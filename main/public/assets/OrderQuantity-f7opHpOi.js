import{s as j}from"./index-CThmynw4.js";import{s as L,a as O}from"./index-DZ_84HLy.js";import{a as P,b as q,s as z,c as E}from"./index-DUdbLDaw.js";import{s as R}from"./index-BcyiWOto.js";import{b as H}from"./index-5ZZNUr_T.js";import{h as s,i as I,c as f,d as o,a as Q,e as D,w as c,n as S,j as U,o as d,F as G,E as J,f as K,C as W,t as X}from"./index-Cp7MK5GH.js";import"./index-B7fHUpY8.js";import"./index-BKUb7z73.js";import"./index-D7UCpOy8.js";import"./index-Dc40dJ-s.js";import"./index-BWn8x0Ui.js";import"./index-Bun3Cj71.js";import"./index-C9QZM6ev.js";import"./index-BFPpMVGv.js";import"./index-BOVrHiKk.js";import"./index-CVDPUBfE.js";const Z={class:"flex flex-column absolute top-0 left-0 border-0 w-full"},tt={class:"card"},et={key:0},at={key:1,class:"card flex justify-content-center w-full"},ot={key:2,class:"card"},Dt={__name:"OrderQuantity",setup(nt){const x=U(),m=s(new Date().getMonth()+1),l=s(new Date().getFullYear()),u=s([]),h=s(String(m.value).padStart(2,"0")),p=s(["normal","pie","bar"][0]),b=s(),k=()=>{getComputedStyle(document.body);const a=()=>`#${Math.floor(Math.random()*16777215).toString(16).padStart(6,"0")}`,t=u.value.length,e=Array.from({length:t},()=>a()),i=e.map(n=>{let y=n.substring(1),v=parseInt(y,16),$=Math.min((v>>16)+30,255),g=Math.min((v>>8&255)+30,255),C=Math.min((v&255)+30,255);return`rgb(${$},${g},${C})`});return{labels:u.value.map(n=>n.name),datasets:[{label:"",data:u.value.map(n=>n.quantity),backgroundColor:e,hoverBackgroundColor:i}]}},T=s(Array.from({length:l.value-2024+1},(a,t)=>{const e=2024+t;return{label:String(e),command:()=>F(e)}}));function F(a){console.log("切换到年份:",a),l.value=a}function B(a,t){const e=`${a}-${String(t).padStart(2,"0")}-01`,i=new Date(a,t,0).getDate(),n=`${a}-${String(t).padStart(2,"0")}-${String(i).padStart(2,"0")}`;return{startDate:e,endDate:n}}function _(a,t){const{startDate:e,endDate:i}=B(a,t);S.dataAnalizeApi.getTopDishesByDate(e,i,n=>{n.success?(u.value=n.data,b.value=k()):console.log("error: ",n.data)})}I(()=>{_(l.value,m.value)});function M(a){h.value=a,m.value=Number(a),_(l.value,m.value)}const A=s(Array.from({length:12},(a,t)=>{const e=String(t+1).padStart(2,"0");return{title:`${e}月`,value:e}})),N=()=>{_(l.value,m.value)};function V(){h.value=null;const a=`${l.value}-01-01`,t=`${l.value}-12-31`;S.dataAnalizeApi.getTopDishesByDate(a,t,e=>{e.success?(u.value=e.data,b.value=k()):console.log("error: ",e.data)})}function Y(){x.push("/")}return(a,t)=>{const e=H,i=R,n=z,y=E,v=q,$=P,g=O,C=L,w=j;return d(),f("div",Z,[o(i,{style:{height:"4rem"},class:"flex align-content-center bg-primary text-white"},{start:c(()=>[o(e,{icon:"pi pi-arrow-left",class:"mr-2 text-center",onClick:t[0]||(t[0]=r=>Y())})]),center:c(()=>[o(e,{icon:"pi pi-align-justify",onClick:t[1]||(t[1]=r=>p.value="normal")}),o(e,{icon:"pi pi-chart-bar",onClick:t[2]||(t[2]=r=>p.value="bar")}),o(e,{icon:"pi pi-chart-pie",onClick:t[3]||(t[3]=r=>p.value="pie")})]),_:1}),Q("div",tt,[o($,{scrollable:"",value:h.value,"onUpdate:value":t[4]||(t[4]=r=>h.value=r)},{default:c(()=>[o(v,null,{default:c(()=>[o(n,{label:`当年销售额:${l.value}`,model:T.value,onClick:V},null,8,["label","model"]),(d(!0),f(G,null,J(A.value,r=>(d(),K(y,{key:r.title,value:r.value,onClick:lt=>M(r.value)},{default:c(()=>[W(X(r.title),1)]),_:2},1032,["value","onClick"]))),128))]),_:1})]),_:1},8,["value"])]),p.value==="normal"?(d(),f("div",et,[o(C,{value:u.value,sortMode:"multiple",tableStyle:"min-width: 50rem",paginator:"",rows:10,rowsPerPageOptions:[10,20,50]},{paginatorstart:c(()=>[o(e,{type:"button",icon:"pi pi-refresh",text:"",onClick:N})]),default:c(()=>[o(g,{field:"_id",header:"编号",sortable:"",style:{width:"25%"}}),o(g,{field:"name",header:"名字",sortable:"",style:{width:"25%"}}),o(g,{field:"quantity",header:"数量",sortable:"",style:{width:"25%"}})]),_:1},8,["value"])])):D("",!0),p.value==="pie"?(d(),f("div",at,[o(w,{type:"pie",data:b.value,class:"w-7"},null,8,["data"])])):D("",!0),p.value==="bar"?(d(),f("div",ot,[o(w,{type:"bar",data:b.value},null,8,["data"])])):D("",!0)])}}};export{Dt as default};
