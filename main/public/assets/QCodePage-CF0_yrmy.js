import{s as $}from"./index-D07BujmP.js";import{b as q}from"./index-Dt8QeYD_.js";import{s as E}from"./index-CNsSOizx.js";import{s as B}from"./index-D3vkpfzW.js";import{C as V,Q as _}from"./CodeMaker-IOgtdCDu.js";import{h as r,u as T,c as b,a as l,d as o,e as g,f as D,w,F as N,o as f}from"./index-Dl_Q6PiL.js";import"./index-CcAkN1m5.js";import"./_commonjsHelpers-gnU0ypJ3.js";const j={class:"flex flex-wrap align-items-center"},F={class:"flex flex-wrap justify-content-center w-full mt-2"},L={key:0,class:"flex flex-column align-items-center justify-content-center"},S={key:1,class:"flex flex-column align-items-center justify-content-center gap-3"},P={class:"flex flex-row gap-3"},W={__name:"QCodePage",setup(A){const i=r(!1),y=T(),p=r(0),v=r(""),x=r(0),n=r(""),m=r(null),C=r(!1);async function k(){const t=document.createElement("canvas");for(let e=p.value;e<=x.value;e++){const c=e<10?`0${e}`:`${e}`,s="https://sushi.xiaoxiong.pt"+v.value+"/client.html?table="+V.SimpleEncode(c);console.log("生成二维码数据: ",s),await _.toCanvas(t,s,{width:300});const u=document.createElement("a");u.download=`${c}.png`,u.href=t.toDataURL("image/png"),u.click(),await new Promise(d=>setTimeout(d,300))}console.log("全部二维码下载完毕")}const R=()=>{if(n.value){let t=window.env.QR_ADDR+V.SimpleEncode(n.value);console.log("The qrcode data: ",t),_.toCanvas(m.value,t,{width:300},e=>{e?console.error(e):C.value=!0})}},Q=()=>{if(m.value){const t=document.createElement("a");t.download=`座号-${n.value}-二维码.png`,t.href=m.value.toDataURL("image/png"),t.click()}};function U(){if(!n.value){y.add({severity:"error",summary:"错误",detail:"座位号不能为空",life:3e3});return}R(),y.add({severity:"success",summary:"成功",detail:"成功生成二维码，座位号："+n.value,life:3e3})}return(t,e)=>{const c=B,s=E,u=q,d=$;return f(),b(N,null,[l("div",j,[o(c,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=a=>i.value=a),class:"m-4"},null,8,["modelValue"]),e[5]||(e[5]=l("p",{class:"font-bold"},"一键生成二维码",-1))]),l("div",F,[i.value?g("",!0):(f(),b("div",L,[e[6]||(e[6]=l("h2",{class:"font-bold"},"座号二维码生成器",-1)),o(s,{type:"text",modelValue:n.value,"onUpdate:modelValue":e[1]||(e[1]=a=>n.value=a),class:"m-3"},null,8,["modelValue"]),o(u,{label:"生成二维码",onClick:U}),l("div",null,[l("canvas",{ref_key:"qrCanvas",ref:m},null,512)]),C.value?(f(),D(u,{key:0,label:"下载二维码",icon:"pi pi-download",onClick:Q})):g("",!0)])),i.value?(f(),b("div",S,[e[10]||(e[10]=l("h2",{class:"font-bold"},"座号二维码一键生成器",-1)),l("div",P,[o(d,{variant:"on"},{default:w(()=>[o(s,{type:"number",modelValue:p.value,"onUpdate:modelValue":e[2]||(e[2]=a=>p.value=a),style:{"max-width":"100px"}},null,8,["modelValue"]),e[7]||(e[7]=l("label",{for:"on_label"},"请输入起始座号",-1))]),_:1,__:[7]}),o(d,{variant:"on"},{default:w(()=>[o(s,{type:"number",modelValue:x.value,"onUpdate:modelValue":e[3]||(e[3]=a=>x.value=a),style:{"max-width":"100px"}},null,8,["modelValue"]),e[8]||(e[8]=l("label",{for:"on_label"},"请输入最终座号",-1))]),_:1,__:[8]})]),o(d,{variant:"on"},{default:w(()=>[o(s,{type:"text",modelValue:v.value,"onUpdate:modelValue":e[4]||(e[4]=a=>v.value=a)},null,8,["modelValue"]),e[9]||(e[9]=l("label",{for:"on_label"},"请输入地址",-1))]),_:1,__:[9]}),o(u,{label:"一键生成下载二维码",onClick:k})])):g("",!0)])],64)}}};export{W as default};
