import{_ as K,r as v,o as q,L as H,J as m,f as a,E as t,F as c,H as d,h as n,D as f,I as o,S as s,N as g,K as S}from"./index-CElJKAcy.js";import{V as k,e as J,a as Q,b as A,d as $}from"./VTextField-BahRdtO5.js";import{V as w,a as j,c as V,d as G}from"./VDialog-2qSnlFK8.js";import{a as p,b as i,V as W}from"./VSpacer-Im85g6TL.js";import{z as I,x as X,V as Y}from"./scopeId-hbGO-rt1.js";import"./VList-LiTk8-Ju.js";const Z={key:1,class:"text-grey"},h={class:"text-h6 mb-3"},ee={key:1},te={key:0},le={key:1},ae={__name:"order_manager",setup(ne){const R=v(!1),y=v(!1),D=v(""),u=v(null),z=[{key:"name",title:"id",sortable:!0},{key:"restaurant",title:"restaurant",sortable:!0},{key:"pickupDate",title:"date 取餐日期"},{key:"pickupTime",title:"time 取餐时间"},{key:"customer.name",title:"customer 客户"},{key:"total_price",title:"total_price 总价"},{key:"pay_state",title:"pay state 付款状态"},{key:"pay_type",title:"pay type 付款方式"},{key:"rider_status",title:"rider status 骑手状态"}],T=v([]);q(()=>{H.getAllOrder(l=>{console.log("serverAPI.getAllSever",l),l.result&&(T.value=l.data)})});function B(l,{item:e}){u.value=e,y.value=!0}function L(l){return l&&l.riderData&&(l.riderData.riderName||l.riderData.riderPhone||l.riderData.state)}function M(l){return l&&l.riderData?l.riderData.riderName:null}function U(l){return l&&l.riderData?l.riderData.riderPhone:null}function _(l){return l&&l.riderData?l.riderData.state:null}function C(l){return l&&l.riderData?l.riderData.riderActionTime:null}function P(l){return l&&l.riderData?l.riderData.reason:null}function b(l){return{accepted:"已接单",picking_up:"取餐中",delivering:"配送中",delivered:"已送达",abandoned:"放弃订单",cancelled:"已取消"}[l]||l}function x(l){return{accepted:"blue",picking_up:"purple",delivering:"orange",delivered:"green",abandoned:"grey",cancelled:"red"}[l]||"grey"}function F(l){return l?new Date(l).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}):""}return(l,e)=>(d(),m(c,null,[a(k,{flat:""},{text:t(()=>[a(Q,{modelValue:D.value,"onUpdate:modelValue":e[0]||(e[0]=r=>D.value=r),label:"Search","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":"","single-line":""},null,8,["modelValue"])]),default:t(()=>[a(k,{class:"ma-2"},{default:t(()=>[a(J,null,{default:t(()=>e[4]||(e[4]=[n("span",null,"Order List",-1)])),_:1,__:[4]}),a(j,{headers:z,items:T.value,search:D.value,hover:"","onClick:row":B},{"item.rider_status":t(({item:r})=>[_(r)?(d(),f(V,{key:0,color:x(_(r)),size:"small",variant:"tonal"},{default:t(()=>[o(s(b(_(r))),1)]),_:2},1032,["color"])):(d(),m("span",Z,"-"))]),_:1},8,["items","search"])]),_:1})]),_:1}),a(w,{modelValue:R.value,"onUpdate:modelValue":e[1]||(e[1]=r=>R.value=r),width:"500"},{default:t(()=>[a(k,{title:"edit user"},{default:t(()=>[a(A)]),_:1})]),_:1},8,["modelValue"]),a(w,{modelValue:y.value,"onUpdate:modelValue":e[3]||(e[3]=r=>y.value=r),width:"600"},{default:t(()=>[a(k,{title:"Order Details"},{default:t(()=>[u.value?(d(),f(A,{key:0},{default:t(()=>[a(p,null,{default:t(()=>[a(i,{cols:"6"},{default:t(()=>[e[5]||(e[5]=n("strong",null,"ID:",-1)),o(" "+s(u.value.name),1)]),_:1,__:[5]}),a(i,{cols:"6"},{default:t(()=>[e[6]||(e[6]=n("strong",null,"Restaurant:",-1)),o(" "+s(u.value.restaurant),1)]),_:1,__:[6]})]),_:1}),a(p,null,{default:t(()=>[a(i,{cols:"6"},{default:t(()=>[e[7]||(e[7]=n("strong",null,"Pickup Date:",-1)),o(" "+s(u.value.pickupDate),1)]),_:1,__:[7]}),a(i,{cols:"6"},{default:t(()=>[e[8]||(e[8]=n("strong",null,"Pickup Time:",-1)),o(" "+s(u.value.pickupTime),1)]),_:1,__:[8]})]),_:1}),a(p,null,{default:t(()=>[a(i,{cols:"6"},{default:t(()=>{var r;return[e[9]||(e[9]=n("strong",null,"Customer:",-1)),o(" "+s((r=u.value.customer)==null?void 0:r.name),1)]}),_:1,__:[9]}),a(i,{cols:"6"},{default:t(()=>{var r;return[e[10]||(e[10]=n("strong",null,"Phone:",-1)),o(" "+s((r=u.value.customer)==null?void 0:r.phone),1)]}),_:1,__:[10]})]),_:1}),a(p,null,{default:t(()=>[a(i,{cols:"6"},{default:t(()=>{var r;return[e[11]||(e[11]=n("strong",null,"email:",-1)),o(" "+s((r=u.value.customer)==null?void 0:r.email),1)]}),_:1,__:[11]}),a(i,{cols:"6"},{default:t(()=>[e[12]||(e[12]=n("strong",null,"Total Price:",-1)),o(" "+s(u.value.total_price),1)]),_:1,__:[12]})]),_:1}),a(p,null,{default:t(()=>[a(i,{cols:"6"},{default:t(()=>[e[13]||(e[13]=n("strong",null,"Payment State:",-1)),o(" "+s(u.value.pay_state),1)]),_:1,__:[13]}),a(i,{cols:"6"},{default:t(()=>[e[14]||(e[14]=n("strong",null,"Payment Type:",-1)),o(" "+s(u.value.pay_type),1)]),_:1,__:[14]})]),_:1}),L(u.value)?(d(),f(p,{key:0},{default:t(()=>[a(i,{cols:"12"},{default:t(()=>[a(I,{class:"my-4"}),n("h3",h,[a(X,{class:"mr-2"},{default:t(()=>e[15]||(e[15]=[o("mdi-motorbike")])),_:1,__:[15]}),e[16]||(e[16]=o(" Rider Information 骑手信息 "))])]),_:1}),a(i,{cols:"6"},{default:t(()=>[e[17]||(e[17]=n("strong",null,"Rider Name 骑手姓名:",-1)),o(" "+s(M(u.value)||"-"),1)]),_:1,__:[17]}),a(i,{cols:"6"},{default:t(()=>[e[18]||(e[18]=n("strong",null,"Rider Phone 骑手电话:",-1)),o(" "+s(U(u.value)||"-"),1)]),_:1,__:[18]}),a(i,{cols:"6"},{default:t(()=>[e[19]||(e[19]=n("strong",null,"Rider Status 骑手状态:",-1)),_(u.value)?(d(),f(V,{key:0,color:x(_(u.value)),size:"small",variant:"tonal",class:"ml-2"},{default:t(()=>[o(s(b(_(u.value))),1)]),_:1},8,["color"])):(d(),m("span",ee,"-"))]),_:1,__:[19]}),C(u.value)?(d(),f(i,{key:0,cols:"6"},{default:t(()=>[e[20]||(e[20]=n("strong",null,"Last Action Time 最后操作时间:",-1)),o(" "+s(F(C(u.value))),1)]),_:1,__:[20]})):g("",!0),P(u.value)?(d(),f(i,{key:1,cols:"12"},{default:t(()=>[e[21]||(e[21]=n("strong",null,"Reason 原因:",-1)),a(V,{color:"orange",size:"small",variant:"tonal",class:"ml-2"},{default:t(()=>[o(s(P(u.value)),1)]),_:1})]),_:1,__:[21]})):g("",!0)]),_:1})):g("",!0),u.value.line_items&&u.value.line_items.length?(d(),f(p,{key:1},{default:t(()=>[a(i,{cols:"12"},{default:t(()=>[a(I,{class:"my-4"}),e[23]||(e[23]=n("h3",{class:"text-h6"},"Item Details",-1)),a(G,{density:"compact"},{default:t(()=>[e[22]||(e[22]=n("thead",null,[n("tr",null,[n("th",null,"SKU"),n("th",null,"Product Name"),n("th",null,"Quantity"),n("th",null,"Price"),n("th",null,"Properties")])],-1)),n("tbody",null,[(d(!0),m(c,null,S(u.value.line_items,(r,O)=>(d(),m("tr",{key:O},[n("td",null,s(r.sku),1),n("td",null,s(r.name),1),n("td",null,s(r.quantity),1),n("td",null,s(r.price),1),n("td",null,[r.properties&&r.properties.length?(d(),m("span",te,[(d(!0),m(c,null,S(r.properties,(N,E)=>(d(),f(V,{key:E,size:"small",class:"ma-1"},{default:t(()=>[o(s(N.name)+": "+s(N.value),1)]),_:2},1024))),128))])):(d(),m("span",le,"None"))])]))),128))])]),_:1,__:[22]})]),_:1,__:[23]})]),_:1})):g("",!0)]),_:1})):g("",!0),a($,null,{default:t(()=>[a(W),a(Y,{color:"primary",onClick:e[2]||(e[2]=r=>y.value=!1)},{default:t(()=>e[24]||(e[24]=[o("Close")])),_:1,__:[24]})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},me=K(ae,[["__scopeId","data-v-6892f087"]]);export{me as default};
