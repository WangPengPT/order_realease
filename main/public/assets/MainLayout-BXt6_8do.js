import{a as Q,b as H,R as J}from"./index-B_YKiWus.js";import{s as K}from"./index-BpZeO7ey.js";import{s as Y}from"./index-C0mdiva-.js";import{s as Z}from"./index-Bq-aXfB5.js";import{s as ee}from"./index-CxyQ8QUE.js";import{s as te}from"./index-CrOPmEnx.js";import{u as ae,q as $,h as v,i as oe,n as p,s as b,x as se,j as ne,p as s,c as f,o as u,a as e,b as i,w as r,y as I,m as M,f as q,e as L,z as N,t as O,F as ie,l as le,R as re}from"./index-B-1Cs4Uy.js";import{_ as ce}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-BSqrLTsS.js";import"./index-CHRTBKuV.js";import"./index-D0AciArL.js";import"./index-n1EPC5Sr.js";import"./index-DQ54BhAZ.js";import"./index-B8_8ifBy.js";const T="/XIAOXIONG_LOGO.png",pe={class:"block lg:hidden"},me={class:"w-full shadow-2 bg-primary"},ue={class:"flex flex-row justify-content-between"},de={class:"flex align-items-center justify-content-start"},he={class:"relative"},ge={class:"block lg:hidden absolute right-0 transform -translate-y-2/5",style:{top:"10%"}},_e=["src"],be=["onClick"],fe=["src"],ve={class:"flex justify-content-center w-full bg-primary"},ye={class:"unchange_white_text_button"},xe={class:"hidden lg:block"},we={class:"w-full shadow-2 bg-primary flex flex-row"},ke={class:"flex flex-row justify-content-start"},Be={class:"flex justify-content-center w-full bg-primary",style:{width:"40%"}},Pe={class:"unchange_white_text_button"},Ce={class:"relative"},Se={class:"hidden lg:block absolute right-0 transform -translate-y-2/5",style:{top:"10%"}},De=["src"],Re=["onClick"],je=["src"],$e={__name:"TopBar",setup(z){const h=ae(),{t}=$(),{locale:m}=$(),y=v(!1);let g=0,x=null;const d=[{label:"pt",imagePath:"flags/pt.png"},{label:"en",imagePath:"flags/en.png"},{label:"zh",imagePath:"flags/zh.png"}];oe(()=>{const n=localStorage.getItem("mg_language");n&&(m.value=n),p.newUserRequestCallback=l=>{h.add({severity:"info",summary:t("tablesPage.guestRequest"),detail:`${t("tablesPage.tableNum")}: ${l.tableId} - ${l.user.username}`,life:5e3})}});const w=b(()=>{switch(m.value.toLowerCase()){case"pt":return"/"+d[0].imagePath;case"en":return"/"+d[1].imagePath;case"zh":return"/"+d[2].imagePath;default:return"/"+d[1].imagePath}}),k=b(()=>d.filter(n=>n.label!==m.value.toLowerCase()).map(n=>({...n,command:()=>{m.value=n.label,A(n.label)}})));function A(n){localStorage.setItem("mg_language",n)}const a=ne(),V=se(),B=v();v([{icon:"pi pi-star",label:t("topBar.takeawayWelcome"),command:()=>{window.open(window.env.ADDR+"/takeReserve","_blank"),y.value=!1}}]);const G=b(()=>[{label:t("topBar.homeGroup"),icon:"pi pi-page",items:[{label:t("topBar.takeawayWelcome"),icon:"pi pi-home",command:()=>{window.open(window.env.ADDR+"/takeReserve","_blank")}},{label:t("topBar.pageEditing"),icon:"pi pi-file-edit",command:()=>{a.push(s.mainPath.editablePages.path)}}]},{label:t("topBar.menuGroup"),icon:"pi pi-dish",items:[{label:t("topBar.menu"),icon:"pi pi-book",command:()=>{a.push(s.mainPath.menu.path)}},{label:t("topBar.uploadMenu"),icon:"pi pi-file-import",command:()=>{a.push(s.mainPath.updateMenu.path)}},{label:t("topBar.menuSorting"),icon:"pi pi-tag",command:()=>{a.push(s.mainPath.menuTags.path)}},{label:t("topBar.dishRating"),icon:"pi pi-star",command:()=>{a.push(s.monthRates.path)}},{label:t("topBar.dishSales"),icon:"pi pi-hashtag",command:()=>{a.push(s.orderQuantity.path)}},{label:t("topBar.customDishEdit"),icon:"pi pi-pen-to-square",command:()=>{a.push(s.mainPath.editableCustomeDish.path)}}]},{label:t("topBar.tools"),icon:"pi pi-tool",items:[{label:t("topBar.printer"),icon:"pi pi-print",command:()=>{a.push(s.mainPath.printers.path)}},{label:t("topBar.qrCode"),icon:"pi pi-qrcode",command:()=>{a.push(s.mainPath.qcode.path)}},{label:t("topBar.dictionary"),icon:"pi pi-book",command:()=>{a.push(s.mainPath.dictionary.path)}}]},{label:t("topBar.settings"),icon:"pi pi-cog",command:()=>{a.push(s.mainPath.settings.path)}},{label:t("topBar.help"),icon:"pi pi-question",command:()=>{a.push(s.helpAndManual.path)}},{label:t("topBar.signOut"),icon:"pi pi-sign-out",command:()=>{F()}}]),P=n=>{B.value.toggle(n),y.value=!0};function E(){g++,clearTimeout(x),g===10&&(g=0,p.developerMode.value=!p.developerMode.value,p.developerMode.value?h.add({severity:"success",summary:t("common.success"),detail:"开发者模式开启",life:1e3}):h.add({severity:"success",summary:t("common.success"),detail:"开发者模式关闭",life:1e3})),x=setTimeout(()=>{g=0},1e3)}const C=b(()=>[{label:t("topBar.home"),icon:"pi pi-home",command:()=>{a.push(s.mainPath.path),E()}},{label:t("topBar.tables"),icon:"pi pi-table",command:()=>{a.push(s.mainPath.tables.path)}},{label:t("topBar.orders"),icon:"pi pi-receipt",command:()=>{a.push(s.mainPath.order.path)},badge:p.getNewOrderCountValue("order")},{label:t("topBar.takeout"),icon:"pi pi-shopping-bag",command:()=>{a.push(s.mainPath.takeaways.path)},badge:p.getNewOrderCountValue("takeaway")},{label:t("topBar.reserver"),icon:"pi pi-calendar",command:()=>{a.push(s.mainPath.reserver.path)},badge:p.getNewOrderCountValue("reserves")}]);function F(){V.require({message:"确认登出您的账号?",header:"登出账号",icon:"pi pi-exclamation-triangle",rejectProps:{label:"取消登出",severity:"secondary",outlined:!0},acceptProps:{label:"确认登出",severity:"danger"},accept:()=>{localStorage.removeItem("loggedIn"),localStorage.removeItem("loginDate"),a.replace("/login")},reject:()=>{}})}return(n,l)=>{const _=Q,S=te,D=H,R=ee,U=Z,W=Y,X=K,j=J;return u(),f(ie,null,[e("div",pe,[e("div",me,[e("div",ue,[e("div",de,[i(_,{type:"button",icon:"pi pi-bars",onClick:P,"aria-haspopup":"true","aria-controls":"overlay_menu",class:"text-white bg-transparent",text:""}),l[0]||(l[0]=e("img",{src:T,class:"max-w-8rem p-1"},null,-1)),l[1]||(l[1]=e("span",{class:"text-lg font-bold",style:{color:"aliceblue"}},"SaaS System",-1))]),e("div",he,[e("div",ge,[i(S,{model:k.value,direction:"left",transitionDelay:80,class:"mr-3 border-0"},{button:r(({toggleCallback:o})=>[i(_,{outlined:"",onClick:o,text:"",class:"bg-transparent p-1"},{default:r(()=>[e("img",{src:w.value,style:{width:"28px",height:"28px"}},null,8,_e)]),_:2},1032,["onClick"])]),item:r(({item:o,toggleCallback:c})=>[e("div",{class:"flex flex-col items-center justify-between",onClick:c},[e("img",{src:o.imagePath,alt:"lang",style:{width:"28px",height:"28px"}},null,8,fe)],8,be)]),_:1},8,["model"])])])]),e("div",ve,[i(R,{model:C.value,class:"bg-primary border-none primary-color custom-menubar",breakpoint:"319px"},{item:r(({item:o,props:c})=>[I((u(),f("a",M({class:"flex flex-column justify-content-center align-items-center no-padding-link"},c.action),[e("span",{class:N([o.icon,"unchange_white_text_button"])},null,2),e("span",ye,O(o.label),1),o.badge?(u(),q(D,{key:0,value:o.badge,severity:"danger",class:"absolute top-0 right-0 transform translate-x-1/4 -translate-y-1/3",style:{"font-size":"0.7rem",height:"16px","min-width":"16px"}},null,8,["value"])):L("",!0)],16)),[[j]])]),_:1},8,["model"])])])]),e("div",xe,[e("div",we,[l[2]||(l[2]=e("div",{class:"absolute z-50",style:{top:"26px",left:"40px"}},[e("div",{class:"flex flex-row gap-2 align-items-center"},[e("img",{src:T,style:{height:"16px"}}),e("span",{class:"font-bold",style:{color:"aliceblue"}},"SaaS System")])],-1)),e("div",ke,[i(_,{type:"button",icon:"pi pi-bars",onClick:P,"aria-haspopup":"true","aria-controls":"overlay_menu",class:"text-white bg-transparent",text:""})]),e("div",Be,[i(R,{model:C.value,class:"bg-primary border-none primary-color custom-menubar",breakpoint:"319px"},{item:r(({item:o,props:c})=>[I((u(),f("a",M({class:"flex flex-column justify-content-center align-items-center no-padding-link-pc"},c.action),[e("span",{class:N([o.icon,"unchange_white_text_button"])},null,2),e("span",Pe,O(o.label),1),o.badge?(u(),q(D,{key:0,value:o.badge,severity:"danger",class:"absolute top-0 right-0 transform translate-x-1/4 -translate-y-1/3",style:{"font-size":"0.7rem",height:"16px","min-width":"16px"}},null,8,["value"])):L("",!0)],16)),[[j]])]),_:1},8,["model"])]),e("div",Ce,[e("div",Se,[i(S,{model:k.value,direction:"left",transitionDelay:80,class:"mr-3 border-0"},{button:r(({toggleCallback:o})=>[i(_,{outlined:"",onClick:o,text:"",class:"bg-transparent p-1"},{default:r(()=>[e("img",{src:w.value,style:{width:"28px",height:"28px"}},null,8,De)]),_:2},1032,["onClick"])]),item:r(({item:o,toggleCallback:c})=>[e("div",{class:"flex flex-col items-center justify-between",onClick:c},[e("img",{src:o.imagePath,alt:"lang",style:{width:"28px",height:"28px"}},null,8,je)],8,Re)]),_:1},8,["model"])])])])]),i(U,{ref_key:"menu",ref:B,id:"overlay_menu",model:G.value,popup:!0},null,8,["model"]),i(W),i(X)],64)}}},Ie=ce($e,[["__scopeId","data-v-6c0e89c2"]]),Me={class:"fixed top-0 right-0 left-0 h-full w-full"},qe={class:"w-full",style:{height:"calc(100dvh - 150px)"}},He={__name:"MainLayout",setup(z){return(h,t)=>{const m=Ie;return u(),f("div",Me,[i(m),e("div",qe,[i(le(re))])])}}};export{He as default};
