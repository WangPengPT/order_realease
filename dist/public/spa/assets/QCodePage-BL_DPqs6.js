import{r as t,c as w,d as s,y as r,ag as U,p as E,F as h,e as f,l as d,q as u,O as i,P as k}from"./index-BJrmHtlE.js";import{Q as B}from"./QPage-DFXwwnOK.js";import{C,Q as q}from"./CodeMaker-IOgtdCDu.js";import"./_commonjsHelpers-gnU0ypJ3.js";const _={key:1,class:"row"},D={class:"q-mb-md"},L={__name:"QCodePage",setup(N){const o=t(!1),c=t(0),v=t(""),p=t(0);async function y(){const a=document.createElement("canvas");for(let e=c.value;e<=p.value;e++){const l=e<10?`0${e}`:`${e}`,g="https://sushi.xiaoxiong.pt"+v.value+"/client.html?table="+C.SimpleEncode(l);console.log("生成二维码数据: ",g),await q.toCanvas(a,g,{width:300});const b=document.createElement("a");b.download=`${l}.png`,b.href=a.toDataURL("image/png"),b.click(),await new Promise(R=>setTimeout(R,300))}console.log("全部二维码下载完毕")}const n=t(""),m=t(null),V=t(!1),x=()=>{if(n.value){let a=window.env.QR_ADDR+C.SimpleEncode(n.value);console.log("The qrcode data: ",a),q.toCanvas(m.value,a,{width:300},e=>{e?console.error(e):V.value=!0})}},Q=()=>{if(m.value){const a=document.createElement("a");a.download=`座号-${n.value}-二维码.png`,a.href=m.value.toDataURL("image/png"),a.click()}};return(a,e)=>(s(),w(h,null,[r(U,{modelValue:o.value,"onUpdate:modelValue":e[0]||(e[0]=l=>o.value=l),label:"一键"},null,8,["modelValue"]),r(B,{class:"flex flex-center column q-pa-md"},{default:E(()=>[e[5]||(e[5]=f("div",{class:"text-h4 q-mb-md"},"座号二维码生成器",-1)),o.value?u("",!0):(s(),d(i,{key:0,modelValue:n.value,"onUpdate:modelValue":e[1]||(e[1]=l=>n.value=l),label:"请输入座号",outlined:"",class:"q-mb-md",style:{"min-width":"300px"},rules:[l=>!!l||"座号不能为空"]},null,8,["modelValue","rules"])),o.value?(s(),w("div",_,[r(i,{modelValue:c.value,"onUpdate:modelValue":e[2]||(e[2]=l=>c.value=l),label:"请输入起始座号",outlined:"",class:"q-mb-md",style:{"min-width":"300px"},rules:[l=>!!l||"座号不能为空"]},null,8,["modelValue","rules"]),r(i,{modelValue:p.value,"onUpdate:modelValue":e[3]||(e[3]=l=>p.value=l),label:"请输入最终座号",outlined:"",class:"q-mb-md",style:{"min-width":"300px"},rules:[l=>!!l||"座号不能为空"]},null,8,["modelValue","rules"])])):u("",!0),o.value?(s(),d(i,{key:2,modelValue:v.value,"onUpdate:modelValue":e[4]||(e[4]=l=>v.value=l),label:"请输入地址",outlined:"",class:"q-mb-md",style:{"min-width":"300px"},rules:[l=>!!l||"地址不能为空"]},null,8,["modelValue","rules"])):u("",!0),o.value?u("",!0):(s(),d(k,{key:3,label:"生成二维码",color:"primary",class:"q-mb-md",onClick:x,disable:!n.value},null,8,["disable"])),o.value?(s(),d(k,{key:4,label:"一键生成下载二维码",color:"primary",class:"q-mb-md",onClick:y})):u("",!0),f("div",D,[f("canvas",{ref_key:"qrCanvas",ref:m},null,512)]),V.value?(s(),d(k,{key:5,label:"下载二维码",color:"positive",icon:"download",onClick:Q})):u("",!0)]),_:1,__:[5]})],64))}};export{L as default};
