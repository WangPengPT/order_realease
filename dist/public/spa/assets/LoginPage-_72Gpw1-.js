import{r as n,c as v,d as w,y as l,p as s,Q as d,L as V,M as x,e as i,N as _,O as m,P as p,R as f,h as y,S as Q,k as h,U as b}from"./index-BJrmHtlE.js";import{Q as P}from"./QForm-Dn_bjnAh.js";import{C as S}from"./ClosePopup-CfnmXNFL.js";const q={class:"flex flex-center bg-grey-1",style:{"min-height":"100vh"}},B={__name:"LoginPage",setup(C){const o=n(""),r=n(!1),u=n("admin"),g=x();function c(){b.login(u.value,o.value,a=>{if(a.success&&a.data){localStorage.setItem("loggedIn","true");const e=new Date().toISOString().split("T")[0];localStorage.setItem("loginDate",e),g.replace("/")}else(!a.success||!a.data)&&(r.value=!0)})}return(a,e)=>(w(),v("div",q,[l(d,{class:"q-pa-lg column q-gutter-md",style:{width:"100%","max-width":"400px"}},{default:s(()=>[e[3]||(e[3]=i("div",{class:"text-h5 text-center"},"Login",-1)),l(P,{onSubmit:_(c,["prevent"]),ref:"formRef",class:"column q-gutter-md"},{default:s(()=>[l(m,{outlined:"",modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=t=>u.value=t),label:"Phone number",dense:"",class:"full-width",rules:[t=>!!t||"Phone number is required"]},null,8,["modelValue","rules"]),l(m,{outlined:"",modelValue:o.value,"onUpdate:modelValue":e[1]||(e[1]=t=>o.value=t),label:"Password",type:"password",dense:"",class:"full-width",rules:[t=>!!t||"Password is required"]},null,8,["modelValue","rules"]),l(p,{label:"Login",color:"primary",class:"full-width",type:"submit"})]),_:1},512)]),_:1,__:[3]}),l(V,{modelValue:r.value,"onUpdate:modelValue":e[2]||(e[2]=t=>r.value=t)},{default:s(()=>[l(d,null,{default:s(()=>[l(f,null,{default:s(()=>e[4]||(e[4]=[i("div",{class:"text-h6"},"Alert",-1)])),_:1,__:[4]}),l(f,{class:"q-pt-none"},{default:s(()=>e[5]||(e[5]=[y(" Username or password is incorrect. ")])),_:1,__:[5]}),l(Q,{align:"right"},{default:s(()=>[h(l(p,{flat:"",label:"OK",color:"primary"},null,512),[[S]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};export{B as default};
