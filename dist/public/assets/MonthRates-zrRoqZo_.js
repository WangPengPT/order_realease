import{s as A}from"./index-BitW2IWn.js";import{s as E,a as I,b as O,c as W,d as Z}from"./index-DuCxBYij.js";import{s as q,a as G}from"./index-Eu2XPkKO.js";import{s as J}from"./index-D0JsjHS8.js";import{s as K}from"./index-CgZCf_c9.js";import{b as Q}from"./index-Bw29GXmD.js";import{h as i,n as w,c as d,d as l,a as v,w as a,j as X,o as u,l as ee,F as x,C as y,f as $,A as m,t as f}from"./index-CjkNiFHf.js";import"./index-BfhOMOA1.js";import"./index-CeGB13x1.js";import"./index-Bjd8oBQ0.js";import"./index-76liomV_.js";import"./index-lS7GtiIS.js";import"./index-CwDYYW_x.js";import"./index-DMQEdfXs.js";const te={class:"flex flex-column w-full",style:{position:"fixed",top:"0",left:"0"}},oe={class:"flex flex-wrap justify-content-center align-items-center gap-1 ml-2"},le={class:"card flex flex-column",style:{height:"calc(100vh - 200px)"}},ge={__name:"MonthRates",setup(ae){const V=X(),n=i(w.menuData.value.filter(t=>t.category!=="")),_=i(!1),k=new Date,b=k.getFullYear(),T=k.getMonth()+1,R=i([{id:0,value:"总评分",label:"总评分"}]);Y();function Y(){for(let e=2025;e<=b;e++)R.value.push({id:e,value:e,label:e})}function j(t){return!t.rates||!t.likes?0:t.likes/t.rates*5}function h(){const t=g.value,e=p.value.find(s=>s.value==C.value).id;g.value==0&&i([]),B(t,e,()=>{_&&(n.value=n.value.filter(s=>s.rates!=0)),n.value=n.value.filter(s=>s.category!=="")})}function B(t,e,s){t==b&&e==T?n.value=w.menuData.value:n.value=w.getMonthRatesWithDate(n,t,e,()=>{s()}),s()}const p=i([]);P();function P(){const t=["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"];for(let e=0;e<t.length;e++)p.value.push({id:e+1,value:t[e],label:e+1+" - "+t[e].toUpperCase()})}const g=i(b),C=i(p.value.find(t=>t.id==T).value);return(t,e)=>{const s=Q,F=K,S=J,M=O,D=I,N=E,c=G,H=q,L=Z,U=W,z=A;return u(),d("div",te,[l(S,{class:"bg-primary text-white p-2"},{start:a(()=>[l(s,{icon:"pi pi-arrow-left",class:"p-button-text text-white",label:"主页",onClick:e[0]||(e[0]=o=>ee(V).push("/"))}),v("div",oe,[l(F,{modelValue:_.value,"onUpdate:modelValue":e[1]||(e[1]=o=>_.value=o),class:"green-toggle",onClick:e[2]||(e[2]=o=>h())},null,8,["modelValue"]),e[5]||(e[5]=v("label",null,"隐藏评分为0的菜品",-1))])]),_:1}),v("div",null,[l(N,{value:g.value,onClick:e[3]||(e[3]=o=>h())},{default:a(()=>[l(D,null,{default:a(()=>[(u(!0),d(x,null,y(R.value,o=>(u(),$(M,{key:o.id,value:o.value},{default:a(()=>[m(f(o.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["value"]),l(N,{value:C.value,scrollable:"",onClick:e[4]||(e[4]=o=>h())},{default:a(()=>[l(D,null,{default:a(()=>[(u(!0),d(x,null,y(p.value,o=>(u(),$(M,{key:o.id,value:o.value},{default:a(()=>[m(f(o.label),1)]),_:2},1032,["value"]))),128))]),_:1}),l(U,null,{default:a(()=>[(u(!0),d(x,null,y(p.value,o=>(u(),$(L,{key:o.id,value:o.value},{default:a(()=>[v("div",le,[l(H,{value:n.value,stripedRows:"",scrollable:"",scrollHeight:"flex",paginator:"",rows:10,rowsPerPageOptions:[5,10,20,50],tableStyle:"min-width: 50rem"},{default:a(()=>[l(c,{field:"id",header:"ID"}),l(c,{field:"category",header:"类型"}),l(c,{field:"name",header:"菜名"}),l(c,{field:"monthRates",header:"当月综合评分"},{body:a(({data:r})=>[m(f(j(r).toFixed(2)),1)]),_:1}),l(c,{field:"monthRates",header:"当月点赞数"},{body:a(({data:r})=>[m(f(r.likes?r.likes:0),1)]),_:1}),l(c,{field:"monthRates",header:"当月评分总数"},{body:a(({data:r})=>[m(f(r.rates?r.rates:0),1)]),_:1})]),_:1},8,["value"])])]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["value"])]),l(z)])}}};export{ge as default};
