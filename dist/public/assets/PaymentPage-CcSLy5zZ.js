import{O as Te,r as v,o as De,c as m,e,z as n,s as b,S as t,R as je,v as W,t as i,q as r,F as X,E as de,l as Se,D as Ue,d as f}from"./vue-CYwjs0iE.js";import{z as ze,a as g,i as u,A as C,B as re,e as ue,D as Ce,d as Ae,E as $e,F as ce,f as x,G as pe,j as ve}from"./primevue-_QN95vq9.js";import{c as me,D as fe,l as ye}from"./localforage-cPbLbd56.js";import{c as D,m as B}from"./index-Qjw8J1Y8.js";import{_ as Ne}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-DYQJwaLu.js";const Fe={class:"w-full h-full flex justify-content-center overflow-auto bg-gray-100"},Le={class:"bg-white m-2 border-round-2xl hidden md:block lg:block",style:{"min-width":"775px","max-width":"1200px",width:"70%"}},Ie={class:"flex flex-row"},Oe={class:"flex flex-column gap-2 m-2 pl-4 pr-4",style:{width:"65%"}},Be={class:"w-full"},Ee={key:0,class:"border-round-xl shadow-5 p-2"},Me={class:"flex flex-wrap gap-1 align-items-center pb-1"},qe={class:"flex align-items-center justify-content-center p-2 bg-gray-200 border-round-2xl"},We={class:"font-bold"},Re={class:"flex flex-row gap-1 align-items-center"},Ge={class:"border-round-xl shadow-5 p-2"},He={class:"flex flex-wrap gap-1 align-items-center pb-1"},Ke={class:"font-bold"},Ye={class:"flex flex-column gap-1 align-items-center"},Ze={class:"col-12"},Qe={class:"",for:"on_label"},Je={class:"col-12"},Xe={class:"",for:"on_label"},el={key:1,class:"border-round-xl shadow-5 p-2"},ll={class:"flex flex-wrap gap-1 align-items-center pb-1"},tl={class:"font-bold"},al={class:"col-12"},sl={class:"",for:"on_label"},ol={class:"col-12"},il={class:"",for:"on_label"},nl={class:"flex flex-row justify-content-center"},dl={class:"col-6"},rl={class:"",for:"on_label"},ul={class:"col-6"},cl={class:"",for:"on_label"},pl={class:"border-round-xl shadow-5 p-2"},vl={class:"flex flex-wrap gap-1 align-items-center pb-1"},ml={class:"font-bold"},fl={class:"flex flex-row justify-content-center"},yl={class:"col-6"},_l={class:"",for:"on_label"},bl={class:"col-6"},xl={class:"",for:"on_label"},gl={class:"flex flex-row justify-content-center"},hl={class:"col-12"},wl={class:"",for:"on_label"},kl={class:"flex flex-row justify-content-center align-items-center"},Vl={class:"col-4"},Pl={class:"flex justify-content-center"},Tl={class:""},Dl={class:"flex items-center"},jl={class:""},Sl={class:"col-8"},Ul={class:"",for:"on_label"},zl={class:"border-round-xl shadow-5 p-2"},Cl={class:"flex flex-wrap gap-1 align-items-center pb-1"},Al={class:"font-bold"},$l={class:"flex flex-row justify-content-center"},Nl={class:"col-12"},Fl={class:"",for:"on_label"},Ll={class:"border-round-xl shadow-5 p-2"},Il={class:"flex flex-wrap gap-1 align-items-center pb-1"},Ol={class:"font-bold"},Bl={class:"flex flex-row justify-content-center"},El={class:"col-12"},Ml={class:"",for:"on_label"},ql={class:"border-round-xl shadow-5 p-2"},Wl={class:"flex flex-wrap gap-1 align-items-center pb-1"},Rl={class:"font-bold"},Gl={class:"flex flex-column justify-content-center align-items-center border-1 border-round border-gray-500 p-2 bg-gray-100 gap-2 m-2"},Hl={class:"flex flex-column"},Kl={key:0,class:"text-gray-400"},Yl={class:"flex flex-row gap-2 w-full"},Zl={class:"text-xs"},Ql={class:"bg-gray-50 border-round-right-2xl",style:{width:"35%"}},Jl={class:"p-2 pt-3"},Xl={class:"font-bold text-xl"},et={class:"overflow-auto flex flex-column gap-2",style:{"max-height":"600px"}},lt={class:"flex flex-row justify-content-between align-items-center"},tt={class:"flex flex-row gap-1"},at=["src","alt"],st={class:"flex flex-column"},ot={class:"font-bold",style:{"font-size":"14px"}},it={style:{"font-size":"14px"}},nt={class:"p-2 bg-white border-round ml-2 mr-2 flex flex-column"},dt={key:0,class:"flex justify-content-between align-items-center"},rt={class:"text-sm text-gray-400"},ut={class:"text-sm text-gray-400"},ct={key:1,class:"flex justify-content-between align-items-center"},pt={class:"text-xs text-gray-400"},vt={class:"text-xs text-gray-400"},mt={class:"flex justify-content-between align-items-center"},ft={class:"font-bold text-gray-500"},yt={class:"font-bold text-gray-500"},_t={key:2,class:"flex justify-content-between align-items-center"},bt={class:"font-bold text-gray-500"},xt={class:"font-bold text-gray-500"},gt={class:"p-2 ml-2 mr-2 flex flex-row justify-content-between"},ht={class:"font-bold text-lg"},wt={class:"font-bold text-lg"},kt={class:"flex flex-row justify-content-center"},Vt={class:"block md:hidden lg:hidden bg-white border-round-xl m-1"},Pt={class:"flex flex-column w-full h-full p-2 pl-3 pr-3 shadow-none gap-2",style:{"max-width":"700px"}},Tt={class:"w-full"},Dt={class:"bg-white border-round-xl shadow-5"},jt={class:"flex flex-wrap gap-1 align-items-center"},St={class:"font-bold"},Ut={class:"flex gap-1"};const zt={class:"font-bold"},Ct={class:"max-h-15rem w-full mt-1 overflow-auto"},At={class:"flex flex-row justify-content-between align-items-center"},$t={class:"flex flex-row gap-1 pl-2"},Nt=["src","alt"],Ft={class:"flex flex-column"},Lt={class:"font-bold",style:{"font-size":"14px"}},It={style:{"font-size":"14px"}},Ot={key:0,class:"border-round-xl shadow-5 p-2"},Bt={class:"flex flex-wrap gap-1 align-items-center pb-1"},Et={class:"flex align-items-center justify-content-center p-2 bg-gray-200 border-round-2xl"},Mt={class:"font-bold"},qt={class:"flex flex-row gap-1 align-items-center"},Wt={class:"border-round-xl shadow-5 p-2"},Rt={class:"flex flex-wrap gap-1 align-items-center pb-1"},Gt={class:"font-bold"},Ht={class:"flex flex-row justify-content-center"},Kt={class:"col-12"},Yt={class:"text-sm",for:"on_label"},Zt={class:"flex flex-row justify-content-center"},Qt={class:"col-12"},Jt={class:"text-sm",for:"on_label"},Xt={key:1,class:"border-round-xl shadow-5 p-2"},ea={class:"flex flex-wrap gap-1 align-items-center pb-1"},la={class:"font-bold"},ta={class:"col-12"},aa={class:"",for:"on_label"},sa={class:"col-12"},oa={class:"",for:"on_label"},ia={class:"flex flex-row justify-content-center"},na={class:"col-6"},da={class:"",for:"on_label"},ra={class:"col-6"},ua={class:"",for:"on_label"},ca={class:"border-round-xl shadow-5 p-2"},pa={class:"flex flex-wrap gap-1 align-items-center pb-1"},va={class:"font-bold"},ma={class:"flex flex-row justify-content-center"},fa={class:"col-6"},ya={class:"text-sm",for:"on_label"},_a={class:"col-6"},ba={class:"text-sm",for:"on_label"},xa={class:"flex flex-row justify-content-center"},ga={class:"col-12"},ha={class:"text-sm",for:"on_label"},wa={class:"flex flex-row justify-content-center align-items-center"},ka={class:"col-3"},Va={class:"flex justify-content-center"},Pa={class:"flex items-center"},Ta={class:"col-9"},Da={for:"on_label"},ja={class:"border-round-xl shadow-5 p-2"},Sa={class:"flex flex-wrap gap-1 align-items-center pb-1"},Ua={class:"font-bold"},za={class:"flex flex-row justify-content-center"},Ca={class:"col-12"},Aa={for:"on_label"},$a={class:"border-round-xl shadow-5 p-2"},Na={class:"flex flex-wrap gap-1 align-items-center pb-1"},Fa={class:"font-bold"},La={class:"flex flex-row justify-content-center"},Ia={class:"col-12"},Oa={for:"on_label"},Ba={class:"border-round-xl shadow-5 p-2"},Ea={class:"flex flex-wrap gap-1 align-items-center pb-1"},Ma={class:"font-bold"},qa={class:"flex flex-column justify-content-center align-items-center border-1 border-round border-gray-500 p-2 bg-gray-100 gap-2 m-2"},Wa={class:"flex flex-column"},Ra={key:0,class:"text-gray-400"},Ga={class:"flex flex-row gap-2 w-full"},Ha={class:"text-sm"},Ka={class:"ml-2 flex flex-column"},Ya={class:"text-sm"},Za={class:"flex flex-column justify-content-center mt-2"},Qa={class:"text-sm"},Ja={key:0,class:"bg-gray-200 pt-2"},Xa={class:"p-2 bg-white border-round ml-2 mr-2 flex flex-column"},es={key:0,class:"flex justify-content-between align-items-center"},ls={class:"text-sm text-gray-400"},ts={class:"text-sm text-gray-400"},as={key:1,class:"flex justify-content-between align-items-center"},ss={class:"text-xs text-gray-400"},os={class:"text-xs text-gray-400"},is={class:"flex justify-content-between align-items-center"},ns={class:"font-bold text-gray-500"},ds={class:"font-bold text-gray-500"},rs={key:2,class:"flex justify-content-between align-items-center"},us={class:"font-bold text-gray-500"},cs={class:"font-bold text-gray-500"},ps={class:"p-2 ml-2 mr-2 flex flex-row justify-content-between"},vs={class:"font-bold text-lg"},ms={class:"font-bold text-lg"},fs={class:"flex flex-column justify-content-center align-items-center"},ys={class:"font-bold text-2xl"},_s={class:"flex justify-content-end mt-3"},bs={__name:"PaymentPage",setup(xs){const _e=ze(),R=je(),{t:o}=Te(),E=new Date,G=v(),H=E.getHours()*60+E.getMinutes(),K=v(new Date),M=v(new Date);K.value.setDate(E.getDate()),M.value.setDate(M.value.getDate()+7);const A=v({visible:!1,icon:"pi pi-angle-down"}),q=v(!1),$=v(!0);function be(){$.value=!$.value}const S=v(),P=v(0),w=v({id:void 0,defaultName:"Tip(小费)",quantity:1,price:0,properties:[]}),ee=v([5,10,15,0]),N=d=>(d/100*Number(h())).toFixed(2);function F(d,l=!1){d?w.value.price=d:w.value.price=0,l&&(P.value=0),ae()}const L=v(351),le=v([{value:351,label:"portugal",code:"PT"},{value:84,label:"china",code:"CN"},{value:34,label:"spain",code:"ES"},{value:55,label:"brazil",code:"BR"},{value:244,label:"angola",code:"AO"},{value:33,label:"france",code:"FR"},{value:49,label:"germany",code:"DE"},{value:44,label:"UK",code:"GB"},{value:39,label:"italy",code:"IT"},{value:41,label:"swiss",code:"CH"}]),te=v([{optionLabel:o("paymentPage.paymentOptions.payInRestaurant"),value:"Pagar no restaurante",deliveryType:"pickUpInShop"},{optionLabel:o("paymentPage.paymentOptions.MBWay"),value:"MB WAY",deliveryType:"pickUpInShop"},{optionLabel:o("paymentPage.paymentOptions.payWithMoney"),value:"Pay With Money",deliveryType:"delivery2home"},{optionLabel:o("paymentPage.paymentOptions.payWithCard"),value:"Pay With Card",deliveryType:"delivery2home"},{optionLabel:o("paymentPage.paymentOptions.MBWay"),value:"MB WAY",deliveryType:"delivery2home"}]),_=v({first:void 0,last:void 0}),xe=["pay_type","pickupDate","pickupTime","customer"],ge=["address1","city","postalCode"],s=v({deliveryType:"pickUpInShop",created_at:void 0,customer:{name:void 0,phone:void 0,email:void 0},deliveryAddress:{address1:void 0,address2:void 0,city:void 0,postalCode:void 0},total_price:0,note:null,pay_state:"pending",pay_type:void 0,pickupDate:void 0,pickupTime:void 0,line_items:[],payment_gateway_names:void 0}),U=v([]);let Y=[];De(()=>{he()});async function he(){const d=me.cartDishs.value,l=fe.getAllIncrementedDish();U.value=[...d,...l],ae(),Y=await D.fetchUserFavoritesDiscount()}function h(){let d=0;return U.value.forEach(l=>{let a=l.discount?l.dis_price:l.price?l.price:0;for(let c=0;c<Y.length;c++){const y=Y[c];if(y.isActive(s.value.pickupDate)&&l.activitys&&l.activitys.includes(y.key)){let p=(l.price?l.price:0)*(100-y.discount);p=Math.round(p)/100,p<a&&(a=p)}}d+=a*(l.quantity?l.quantity:1)}),d}function V(){let d=0;return U.value.forEach(l=>{let a=l.discount?l.dis_price:l.price?l.price:0;d+=a*(l.quantity?l.quantity:1)}),d}const I=v(0),we=v(0);function ae(){I.value=h()+Number(w.value.price),we.value=V()+Number(w.value.price)}function ke(){A.value={visible:!A.value.visible,icon:A.value.visible?"pi pi-angle-down":"pi pi-angle-up"}}function se(d){s.value.deliveryType=d,s.value.pickupTime=void 0,s.value.pay_type=void 0,Z()}const O=v([]);function Z(){F(N(P.value));const d=J(s.value.pickupDate);J(E).toString==d.toString?G.value=!0:G.value=!1;const a=s.value.deliveryType=="delivery2home"?D.getDeliveryBeginEndInterval(d.toString):D.getPickupBeginEndInterval(d.toString),c=s.value.deliveryType=="delivery2home"?D.getHomeDeliveryData("timeInterval"):D.getPickupDate("timeInterval");O.value=[];for(const j in a)y(a[j].begin,a[j].end,c);function y(j,z,T){let k=Number(j.hour*60)+Number(j.minute);const ne=Number(z.hour*60)+Number(z.minute);if(G.value){if(ne<H)return;k<H&&(k=((H/T|0)+2)*T)}for(O.value.push(p(s.value.deliveryType,k,T));k+T<=ne;)k+=T,O.value.push(p(s.value.deliveryType,k,T))}function p(j,z,T){const k={optionLabel:void 0};return j=="delivery2home"?k.optionLabel=Q(z).toSring+" - "+Q(z+T).toSring:k.optionLabel=Q(z).toSring,k}}function Q(d){const l=Math.floor(d/60).toString().padStart(2,"0"),a=(d%60).toString().padStart(2,"0");return{hour:l,minute:a,toSring:l+":"+a}}function J(d){const l=String(d.getDate()).padStart(2,"0"),a=String(d.getMonth()+1).padStart(2,"0"),c=d.getFullYear();return{year:c,month:a,day:l,toString:`${c}/${a}/${l}`}}function oe(){const d=new Date(Date.now());s.value.created_at=d.toUTCString(),s.value.restaurant=window.env.restaurant,_.value.first?s.value.customer.name=_.value.first+" "+_.value.last:s.value.customer.name=_.value.last,s.value.total_price=Number(I.value).toFixed(2),s.value.line_items.length=0,U.value.forEach(l=>{s.value.line_items.push(ie(l))}),w.value.price>0&&s.value.line_items.push(ie(w.value)),Pe()&&_e.require({message:o("paymentPage.confirmPayment"),header:o("home.takeAway"),icon:"pi pi-send",rejectProps:{label:o("common.cancel"),severity:"primary",outlined:!0},acceptProps:{label:o("common.confirm"),severity:"primary"},accept:()=>{Ve()},reject:()=>{}})}function Ve(){var l,a;s.value.customer.phone=L.value+"#"+s.value.customer.phone,s.value.pickupTime=(l=s.value.pickupTime)==null?void 0:l.optionLabel,s.value.pickupDate=J(s.value.pickupDate).toString,s.value.pay_type=(a=s.value.pay_type)==null?void 0:a.value,s.value.payment_gateway_names=[s.value.pay_type],D.sendDataToMgServer("takeaway",s.value,async(c,y)=>{c?(await d(),q.value=!0):B.show_error("Failed")});async function d(){fe.cleanDishDataQty(),me.cleanAll();const c="take_cartDish_normal",y="take_cartDish_custom";await ye.removeItem(c),await ye.removeItem(y)}}function ie(d){return{sku:d.id,name:d.defaultName+(d.defaultSubname?" "+d.defaultSubname:""),quantity:d.quantity,price:d.discount?d.dis_price:d.price?d.price:0,properties:d.properties?d.properties:[]}}function Pe(){if(!d(s.value,xe)||!l(s.value.customer.email)||!a(s.value.customer.phone)||s.value.deliveryType=="delivery2home"&&!d(s.value.deliveryAddress,ge))return!1;return!0;function d(c,y){console.log("object",c),console.log("keyArray",y);for(const p of y){if(p=="pay_type"){if(!c[p])return B.show_error(o("paymentPage.error."+p)),!1;continue}if(typeof c[p]=="object"){if(!d(c[p],Object.keys(c[p])))return!1}else if(!c[p])return B.show_error(o("paymentPage.error."+p)),!1}return!0}function l(c){const p=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(c);return p||B.show_error(o("paymentPage.error.emailFormat")),p}function a(c){const y=Number(c)>999999;return y||B.show_error(o("paymentPage.error.phoneFormat")),y}}return(d,l)=>(f(),m(X,null,[e("div",Fe,[e("div",Le,[e("div",Ie,[e("div",Oe,[e("div",Be,[n(t(g),{class:"w-full border-none bg-gray-400 border-round-xl shadow-5",icon:"pi pi-arrow-left",label:t(o)("common.back"),onClick:l[0]||(l[0]=a=>t(R).push({path:"/table"}))},null,8,["label"])]),t(D).settings.value.homeDelivery?(f(),m("div",Ee,[e("div",Me,[e("div",qe,[e("i",{class:W(s.value.deliveryType=="delivery2home"?"pi pi-truck":"pi pi-shop")},null,2)]),e("label",We,i(t(o)("paymentPage.deliveryType.title")),1)]),e("div",Re,[n(t(g),{class:"border-round-xl p-1 col-6",label:t(o)("paymentPage.deliveryType.inShop"),outlined:s.value.deliveryType=="delivery2home",onClick:l[1]||(l[1]=a=>se("pickUpInShop"))},null,8,["label","outlined"]),n(t(g),{class:"border-round-xl p-1 col-6",label:t(o)("paymentPage.deliveryType.toHome"),outlined:s.value.deliveryType=="pickUpInShop",onClick:l[2]||(l[2]=a=>se("delivery2home"))},null,8,["label","outlined"])])])):b("",!0),e("div",Ge,[e("div",He,[l[49]||(l[49]=e("div",{class:"flex align-items-center justify-content-center p-2 bg-gray-200 border-round-2xl"},[e("i",{class:"pi pi-calendar"})],-1)),e("label",Ke,i(s.value.deliveryType=="delivery2home"?t(o)("paymentPage.delivery.time"):t(o)("paymentPage.pickup.time")),1)]),e("div",Ye,[e("div",Ze,[n(t(u),{variant:"on"},{default:r(()=>[n(t(ce),{modelValue:s.value.pickupDate,"onUpdate:modelValue":[l[3]||(l[3]=a=>s.value.pickupDate=a),l[4]||(l[4]=a=>Z(s.value.pickupDate))],invalid:!s.value.pickupDate,size:"small",minDate:K.value,maxDate:M.value,manualInput:!1,dateFormat:"yy/mm/dd",class:"w-full",fluid:""},null,8,["modelValue","invalid","minDate","maxDate"]),e("label",Qe,i(s.value.deliveryType=="delivery2home"?t(o)("paymentPage.delivery.data"):t(o)("paymentPage.pickup.data"))+"*",1)]),_:1})]),e("div",Je,[n(t(u),{variant:"on"},{default:r(()=>[n(t(C),{modelValue:s.value.pickupTime,"onUpdate:modelValue":l[5]||(l[5]=a=>s.value.pickupTime=a),invalid:!s.value.pickupTime,options:O.value,optionLabel:"optionLabel",class:"w-full flex align-items-center",size:"small"},null,8,["modelValue","invalid","options"]),e("label",Xe,i(s.value.deliveryType=="delivery2home"?t(o)("paymentPage.delivery.time"):t(o)("paymentPage.pickup.time"))+"*",1)]),_:1})])])]),s.value.deliveryType=="delivery2home"?(f(),m("div",el,[e("div",ll,[l[50]||(l[50]=e("div",{class:"flex align-items-center justify-content-center p-2 bg-gray-200 border-round-2xl"},[e("i",{class:"pi pi-map-marker"})],-1)),e("label",tl,i(t(o)("paymentPage.delivery.address.title")),1)]),e("div",al,[n(t(u),{variant:"on"},{default:r(()=>[n(t(x),{type:"text",modelValue:s.value.deliveryAddress.address1,"onUpdate:modelValue":l[6]||(l[6]=a=>s.value.deliveryAddress.address1=a),size:"small",invalid:!s.value.deliveryAddress.address1,class:"w-full safari-input-fix",fluid:""},null,8,["modelValue","invalid"]),e("label",sl,i(t(o)("paymentPage.delivery.address.address1"))+"*",1)]),_:1})]),e("div",ol,[n(t(u),{variant:"on"},{default:r(()=>[n(t(x),{type:"text",modelValue:s.value.deliveryAddress.address2,"onUpdate:modelValue":l[7]||(l[7]=a=>s.value.deliveryAddress.address2=a),size:"small",class:"w-full safari-input-fix",fluid:""},null,8,["modelValue"]),e("label",il,i(t(o)("paymentPage.delivery.address.address2")),1)]),_:1})]),e("div",nl,[e("div",dl,[n(t(u),{variant:"on"},{default:r(()=>[n(t(x),{type:"text",modelValue:s.value.deliveryAddress.city,"onUpdate:modelValue":l[8]||(l[8]=a=>s.value.deliveryAddress.city=a),size:"small",invalid:!s.value.deliveryAddress.city,class:"w-full safari-input-fix",fluid:""},null,8,["modelValue","invalid"]),e("label",rl,i(t(o)("paymentPage.delivery.address.city"))+"*",1)]),_:1})]),e("div",ul,[n(t(u),{variant:"on"},{default:r(()=>[n(t(pe),{id:"basic",modelValue:s.value.deliveryAddress.postalCode,"onUpdate:modelValue":l[9]||(l[9]=a=>s.value.deliveryAddress.postalCode=a),mask:"9999-999",size:"small",invalid:!s.value.deliveryAddress.postalCode,class:"w-full safari-input-fix",fluid:""},null,8,["modelValue","invalid"]),e("label",cl,i(t(o)("paymentPage.delivery.address.postalCode"))+"*",1)]),_:1})])])])):b("",!0),e("div",pl,[e("div",vl,[l[51]||(l[51]=e("div",{class:"flex align-items-center justify-content-center p-2 bg-gray-200 border-round-2xl"},[e("i",{class:"pi pi-user"})],-1)),e("label",ml,i(t(o)("paymentPage.contact")),1)]),e("div",fl,[e("div",yl,[n(t(u),{variant:"on"},{default:r(()=>[n(t(x),{type:"text",modelValue:_.value.first,"onUpdate:modelValue":l[10]||(l[10]=a=>_.value.first=a),class:"w-full safari-input-fix",size:"small",fluid:""},null,8,["modelValue"]),e("label",_l,i(t(o)("paymentPage.name.first")),1)]),_:1})]),e("div",bl,[n(t(u),{variant:"on"},{default:r(()=>[n(t(x),{type:"text",modelValue:_.value.last,"onUpdate:modelValue":l[11]||(l[11]=a=>_.value.last=a),invalid:!_.value.last,class:"w-full safari-input-fix",size:"small",fluid:""},null,8,["modelValue","invalid"]),e("label",xl,i(t(o)("paymentPage.name.last"))+"*",1)]),_:1})])]),e("div",gl,[e("div",hl,[n(t(u),{variant:"on"},{default:r(()=>[n(t(x),{type:"text",modelValue:s.value.customer.email,"onUpdate:modelValue":l[12]||(l[12]=a=>s.value.customer.email=a),invalid:!s.value.customer.email,class:"w-full safari-input-fix",fluid:"",size:"small"},null,8,["modelValue","invalid"]),e("label",wl,i(t(o)("paymentPage.email"))+"*",1)]),_:1})])]),e("div",kl,[e("div",Vl,[n(t(C),{modelValue:L.value,"onUpdate:modelValue":l[13]||(l[13]=a=>L.value=a),options:le.value,optionLabel:"label",optionValue:"value",class:"w-full safari-input-fix",size:"small",filter:"",fluid:""},{value:r(a=>[e("div",Pl,[e("label",Tl,"+"+i(a.value),1)])]),option:r(a=>[e("div",Dl,[e("label",jl,i("+"+a.option.value+"	"+t(o)("common.country."+a.option.label)),1)])]),_:1},8,["modelValue","options"])]),e("div",Sl,[n(t(u),{variant:"on"},{default:r(()=>[n(t(x),{type:"number",modelValue:s.value.customer.phone,"onUpdate:modelValue":l[14]||(l[14]=a=>s.value.customer.phone=a),invalid:!s.value.customer.phone,class:"w-full safari-input-fix",size:"small",fluid:""},null,8,["modelValue","invalid"]),e("label",Ul,i(t(o)("paymentPage.phone"))+"*",1)]),_:1})])])]),e("div",zl,[e("div",Cl,[l[52]||(l[52]=e("div",{class:"flex align-items-center justify-content-center p-2 bg-gray-200 border-round-2xl"},[e("i",{class:"pi pi-credit-card"})],-1)),e("label",Al,i(t(o)("paymentPage.payment")),1)]),e("div",$l,[e("div",Nl,[n(t(u),{variant:"on"},{default:r(()=>[n(t(C),{modelValue:s.value.pay_type,"onUpdate:modelValue":l[15]||(l[15]=a=>s.value.pay_type=a),invalid:!s.value.pay_type,size:"small",options:te.value.filter(a=>a.deliveryType==s.value.deliveryType),optionLabel:"optionLabel",class:"w-full",fluid:""},null,8,["modelValue","invalid","options"]),e("label",Fl,i(t(o)("paymentPage.selectPayment"))+"*",1)]),_:1})])])]),e("div",Ll,[e("div",Il,[l[53]||(l[53]=e("div",{class:"flex align-items-center justify-content-center p-2 bg-gray-200 border-round-2xl"},[e("i",{class:"pi pi-file-edit"})],-1)),e("label",Ol,i(t(o)("common.observation")),1)]),e("div",Bl,[e("div",El,[n(t(u),{variant:"on"},{default:r(()=>[n(t(ve),{id:"on_label",class:"w-full safari-input-fix",rows:"2",modelValue:s.value.note,"onUpdate:modelValue":l[16]||(l[16]=a=>s.value.note=a),size:"small",fluid:""},null,8,["modelValue"]),e("label",Ml,i(t(o)("common.observation")),1)]),_:1})])])]),e("div",ql,[e("div",Wl,[l[54]||(l[54]=e("div",{class:"flex align-items-center justify-content-center p-2 bg-gray-200 border-round-2xl"},[e("i",{class:"pi pi-money-bill"})],-1)),e("label",Rl,i(t(o)("paymentPage.tip")),1)]),e("div",Gl,[n(t(re),{modelValue:P.value,"onUpdate:modelValue":[l[17]||(l[17]=a=>P.value=a),l[18]||(l[18]=a=>F(N(P.value)))],options:ee.value,fluid:"",style:{"max-width":"100%"}},{option:r(a=>[e("div",Hl,[e("label",null,i(a.option?a.option+"%":"NONE"),1),a.option?(f(),m("label",Kl,i(N(a.option))+"€",1)):b("",!0)])]),_:1},8,["modelValue","options"]),e("div",Yl,[n(t(ue),{modelValue:S.value,"onUpdate:modelValue":l[19]||(l[19]=a=>S.value=a),inputId:"stacked-buttons",mode:"currency",currency:"EUR",fluid:"",class:"safari-input-fix",size:"small",style:{width:"70%"}},null,8,["modelValue"]),n(t(g),{class:"text-xs",label:t(o)("paymentPage.addTip"),size:"small",onClick:l[20]||(l[20]=a=>F(S.value,!0)),style:{width:"30%"}},null,8,["label"])]),e("label",Zl,i(t(o)("paymentPage.tipThanksMSG")),1)])])]),n(t(Ce),{layout:"vertical",type:"solid",style:{margin:"0 !important"}}),e("div",Ql,[e("div",Jl,[e("label",Xl,i(t(o)("paymentPage.product")),1),e("div",et,[(f(!0),m(X,null,de(U.value,a=>(f(),m("div",lt,[e("div",tt,[e("img",{src:a.image,alt:a.image,style:{height:"60px"}},null,8,at),e("div",st,[e("label",ot,i(a.name),1),e("label",it,i(a.discount?Number(a.dis_price):a.price?Number(a.price):0)+" x "+i(a.quality?a.quality:1),1)])])]))),256))])]),e("div",nt,[V()!=h()?(f(),m("div",dt,[e("label",rt,i(t(o)("paymentPage.subtotal")),1),e("label",ut,i(V().toFixed(2))+"€",1)])):b("",!0),V()!=h()?(f(),m("div",ct,[e("label",pt,i(t(o)("paymentPage.discount")),1),e("label",vt,"-"+i((Number(V())-Number(h())).toFixed(2))+"€",1)])):b("",!0),e("div",mt,[e("label",ft,i(t(o)("paymentPage.subtotal")),1),e("label",yt,i(h().toFixed(2))+"€",1)]),w.value.price!=0?(f(),m("div",_t,[e("label",bt,i(t(o)("paymentPage.tip")),1),e("label",xt,i(w.value.price)+"€",1)])):b("",!0)]),e("div",gt,[e("label",ht,i(t(o)("paymentPage.total")),1),e("label",wt,i(I.value.toFixed(2))+"€",1)]),e("div",kt,[n(t(g),{type:"submit",class:"p-2",icon:"pi pi-dollar text-sm",onClick:l[21]||(l[21]=a=>oe()),label:t(o)("common.pay"),style:{width:"90%"}},null,8,["label"])])])])]),e("div",Vt,[e("div",Pt,[e("div",Tt,[n(t(g),{class:"w-full border-none bg-gray-400 border-round-xl shadow-5",icon:"pi pi-arrow-left",label:t(o)("common.back"),onClick:l[22]||(l[22]=a=>t(R).push({path:"/table"}))},null,8,["label"])]),e("div",Dt,[n(t(g),{class:"w-full border-round-xl flex flex-wrap justify-content-between pl-2 pr-3",variant:"text",onClick:l[23]||(l[23]=a=>ke()),raised:""},{default:r(()=>[e("div",jt,[l[55]||(l[55]=e("div",{class:"flex align-items-center justify-content-center p-2 bg-gray-200 border-round-2xl"},[e("i",{class:"pi pi-shopping-bag"})],-1)),e("label",St,i(t(o)("paymentPage.subtotal")),1),e("i",{class:W(A.value.icon)},null,2)]),e("div",Ut,[b("",!0),e("label",zt,i(h().toFixed(2))+"€",1)])]),_:1}),Se(e("div",Ct,[(f(!0),m(X,null,de(U.value,a=>(f(),m("div",At,[e("div",$t,[e("img",{src:a.image,alt:a.image,style:{height:"60px"}},null,8,Nt),e("div",Ft,[e("label",Lt,i(a.name),1),e("label",It,i(a.discount?Number(a.dis_price):a.price?Number(a.price):0)+" x "+i(a.quality?a.quality:1),1)])])]))),256))],512),[[Ue,A.value.visible]])]),t(D).settings.value.homeDelivery?(f(),m("div",Ot,[e("div",Bt,[e("div",Et,[e("i",{class:W(s.value.deliveryType=="delivery2home"?"pi pi-truck":"pi pi-shop")},null,2)]),e("label",Mt,i(t(o)("paymentPage.deliveryType.title")),1)]),e("div",qt,[n(t(g),{class:"border-round-xl p-1 col-6",label:t(o)("paymentPage.deliveryType.inShop"),outlined:s.value.deliveryType=="delivery2home",onClick:l[24]||(l[24]=a=>s.value.deliveryType="pickUpInShop")},null,8,["label","outlined"]),n(t(g),{class:"border-round-xl p-1 col-6",label:t(o)("paymentPage.deliveryType.toHome"),outlined:s.value.deliveryType=="pickUpInShop",onClick:l[25]||(l[25]=a=>s.value.deliveryType="delivery2home")},null,8,["label","outlined"])])])):b("",!0),e("div",Wt,[e("div",Rt,[l[56]||(l[56]=e("div",{class:"flex align-items-center justify-content-center p-2 bg-gray-200 border-round-2xl"},[e("i",{class:"pi pi-calendar"})],-1)),e("label",Gt,i(s.value.deliveryType=="delivery2home"?t(o)("paymentPage.delivery.time"):t(o)("paymentPage.pickup.time")),1)]),e("div",Ht,[e("div",Kt,[n(t(u),{variant:"on"},{default:r(()=>[n(t(ce),{modelValue:s.value.pickupDate,"onUpdate:modelValue":[l[26]||(l[26]=a=>s.value.pickupDate=a),l[27]||(l[27]=a=>Z(s.value.pickupDate))],invalid:!s.value.pickupDate,minDate:K.value,maxDate:M.value,manualInput:!1,dateFormat:"yy/mm/dd",class:"w-full",size:"small",fluid:""},null,8,["modelValue","invalid","minDate","maxDate"]),e("label",Yt,i(s.value.deliveryType=="delivery2home"?t(o)("paymentPage.delivery.data"):t(o)("paymentPage.pickup.data"))+"*",1)]),_:1})])]),e("div",Zt,[e("div",Qt,[n(t(u),{variant:"on"},{default:r(()=>[n(t(C),{modelValue:s.value.pickupTime,"onUpdate:modelValue":l[28]||(l[28]=a=>s.value.pickupTime=a),invalid:!s.value.pickupTime,options:O.value,optionLabel:"optionLabel",class:"w-full",size:"small"},null,8,["modelValue","invalid","options"]),e("label",Jt,i(s.value.deliveryType=="delivery2home"?t(o)("paymentPage.delivery.time"):t(o)("paymentPage.pickup.time"))+"*",1)]),_:1})])])]),s.value.deliveryType=="delivery2home"?(f(),m("div",Xt,[e("div",ea,[l[57]||(l[57]=e("div",{class:"flex align-items-center justify-content-center p-2 bg-gray-200 border-round-2xl"},[e("i",{class:"pi pi-map-marker"})],-1)),e("label",la,i(t(o)("paymentPage.delivery.address.title")),1)]),e("div",ta,[n(t(u),{variant:"on"},{default:r(()=>[n(t(x),{type:"text",modelValue:s.value.deliveryAddress.address1,"onUpdate:modelValue":l[29]||(l[29]=a=>s.value.deliveryAddress.address1=a),invalid:!s.value.deliveryAddress.address1,size:"small",class:"w-full safari-input-fix",fluid:""},null,8,["modelValue","invalid"]),e("label",aa,i(t(o)("paymentPage.delivery.address.address1"))+"*",1)]),_:1})]),e("div",sa,[n(t(u),{variant:"on"},{default:r(()=>[n(t(x),{type:"text",modelValue:s.value.deliveryAddress.address2,"onUpdate:modelValue":l[30]||(l[30]=a=>s.value.deliveryAddress.address2=a),size:"small",class:"w-full safari-input-fix",fluid:""},null,8,["modelValue"]),e("label",oa,i(t(o)("paymentPage.delivery.address.address2")),1)]),_:1})]),e("div",ia,[e("div",na,[n(t(u),{variant:"on"},{default:r(()=>[n(t(x),{type:"text",modelValue:s.value.deliveryAddress.city,"onUpdate:modelValue":l[31]||(l[31]=a=>s.value.deliveryAddress.city=a),invalid:!s.value.deliveryAddress.city,size:"small",class:"w-full safari-input-fix",fluid:""},null,8,["modelValue","invalid"]),e("label",da,i(t(o)("paymentPage.delivery.address.city"))+"*",1)]),_:1})]),e("div",ra,[n(t(u),{variant:"on"},{default:r(()=>[n(t(pe),{id:"basic",modelValue:s.value.deliveryAddress.postalCode,"onUpdate:modelValue":l[32]||(l[32]=a=>s.value.deliveryAddress.postalCode=a),mask:"9999-999",size:"small",invalid:!s.value.deliveryAddress.postalCode,class:"w-full safari-input-fix",fluid:""},null,8,["modelValue","invalid"]),e("label",ua,i(t(o)("paymentPage.delivery.address.postalCode"))+"*",1)]),_:1})])])])):b("",!0),e("div",ca,[e("div",pa,[l[58]||(l[58]=e("div",{class:"flex align-items-center justify-content-center p-2 bg-gray-200 border-round-2xl"},[e("i",{class:"pi pi-user"})],-1)),e("label",va,i(t(o)("paymentPage.contact")),1)]),e("div",ma,[e("div",fa,[n(t(u),{variant:"on"},{default:r(()=>[n(t(x),{type:"text",modelValue:_.value.first,"onUpdate:modelValue":l[33]||(l[33]=a=>_.value.first=a),class:"w-full safari-input-fix",size:"small",fluid:""},null,8,["modelValue"]),e("label",ya,i(t(o)("paymentPage.name.first")),1)]),_:1})]),e("div",_a,[n(t(u),{variant:"on"},{default:r(()=>[n(t(x),{type:"text",modelValue:_.value.last,"onUpdate:modelValue":l[34]||(l[34]=a=>_.value.last=a),invalid:!_.value.last,class:"w-full safari-input-fix",size:"small",fluid:""},null,8,["modelValue","invalid"]),e("label",ba,i(t(o)("paymentPage.name.last"))+"*",1)]),_:1})])]),e("div",xa,[e("div",ga,[n(t(u),{variant:"on"},{default:r(()=>[n(t(x),{type:"text",modelValue:s.value.customer.email,"onUpdate:modelValue":l[35]||(l[35]=a=>s.value.customer.email=a),invalid:!s.value.customer.email,class:"w-full safari-input-fix",size:"small",fluid:""},null,8,["modelValue","invalid"]),e("label",ha,i(t(o)("paymentPage.email"))+"*",1)]),_:1})])]),e("div",wa,[e("div",ka,[n(t(C),{modelValue:L.value,"onUpdate:modelValue":l[36]||(l[36]=a=>L.value=a),options:le.value,optionLabel:"label",optionValue:"value",class:"w-full safari-input-fix",filter:"",size:"small",fluid:""},{value:r(a=>[e("div",Va,[e("label",null,"+"+i(a.value),1)])]),option:r(a=>[e("div",Pa,[e("div",null,i("+"+a.option.value+"	"+t(o)("common.country."+a.option.label)),1)])]),_:1},8,["modelValue","options"])]),e("div",Ta,[n(t(u),{variant:"on"},{default:r(()=>[n(t(x),{type:"number",modelValue:s.value.customer.phone,"onUpdate:modelValue":l[37]||(l[37]=a=>s.value.customer.phone=a),invalid:!s.value.customer.phone,class:"w-full safari-input-fix",size:"small",fluid:""},null,8,["modelValue","invalid"]),e("label",Da,i(t(o)("paymentPage.phone"))+"*",1)]),_:1})])])]),e("div",ja,[e("div",Sa,[l[59]||(l[59]=e("div",{class:"flex align-items-center justify-content-center p-2 bg-gray-200 border-round-2xl"},[e("i",{class:"pi pi-credit-card"})],-1)),e("label",Ua,i(t(o)("paymentPage.payment")),1)]),e("div",za,[e("div",Ca,[n(t(u),{variant:"on"},{default:r(()=>[n(t(C),{modelValue:s.value.pay_type,"onUpdate:modelValue":l[38]||(l[38]=a=>s.value.pay_type=a),invalid:!s.value.pay_type,options:te.value.filter(a=>a.deliveryType==s.value.deliveryType),optionLabel:"optionLabel",class:"w-full",size:"small",fluid:""},null,8,["modelValue","invalid","options"]),e("label",Aa,i(t(o)("paymentPage.selectPayment"))+"*",1)]),_:1})])])]),e("div",$a,[e("div",Na,[l[60]||(l[60]=e("div",{class:"flex align-items-center justify-content-center p-2 bg-gray-200 border-round-2xl"},[e("i",{class:"pi pi-file-edit"})],-1)),e("label",Fa,i(t(o)("common.observation")),1)]),e("div",La,[e("div",Ia,[n(t(u),{variant:"on"},{default:r(()=>[n(t(ve),{id:"on_label",class:"w-full safari-input-fix",rows:"2",modelValue:s.value.note,"onUpdate:modelValue":l[39]||(l[39]=a=>s.value.note=a),size:"small",fluid:""},null,8,["modelValue"]),e("label",Oa,i(t(o)("common.observation")),1)]),_:1})])])]),e("div",Ba,[e("div",Ea,[l[61]||(l[61]=e("div",{class:"flex align-items-center justify-content-center p-2 bg-gray-200 border-round-2xl"},[e("i",{class:"pi pi-money-bill"})],-1)),e("label",Ma,i(t(o)("paymentPage.tip")),1)]),e("div",qa,[n(t(re),{modelValue:P.value,"onUpdate:modelValue":[l[40]||(l[40]=a=>P.value=a),l[41]||(l[41]=a=>F(N(P.value)))],options:ee.value,fluid:"",style:{"max-width":"100%"}},{option:r(a=>[e("div",Wa,[e("label",null,i(a.option?a.option+"%":"NONE"),1),a.option?(f(),m("label",Ra,i(N(a.option))+"€",1)):b("",!0)])]),_:1},8,["modelValue","options"]),e("div",Ga,[n(t(ue),{modelValue:S.value,"onUpdate:modelValue":l[42]||(l[42]=a=>S.value=a),inputId:"stacked-buttons",showButtons:"",mode:"currency",currency:"EUR",fluid:"",class:"safari-input-fix",size:"small",style:{width:"75%"}},null,8,["modelValue"]),n(t(g),{class:"text-xs",label:t(o)("paymentPage.addTip"),style:{width:"25%"},size:"small",onClick:l[43]||(l[43]=a=>F(S.value,!0))},null,8,["label"])]),e("label",Ha,i(t(o)("paymentPage.tipThanksMSG")),1)])]),e("div",Ka,[e("label",Ya,i(t(o)("paymentPage.must")),1)]),e("div",Za,[n(t(g),{class:"w-full p-2 shadow-5 border-round-top-lg flex flex-row justify-content-between align-items-center",text:"",onClick:l[44]||(l[44]=a=>be())},{default:r(()=>[e("label",Qa,i(t(o)("paymentPage.detailPrice")),1),e("i",{class:W($.value?"pi pi-chevron-down":"pi pi-chevron-up")},null,2)]),_:1}),$.value?(f(),m("div",Ja,[e("div",Xa,[V()!=h()?(f(),m("div",es,[e("label",ls,i(t(o)("paymentPage.subtotal")),1),e("label",ts,i(V().toFixed(2))+"€",1)])):b("",!0),V()!=h()?(f(),m("div",as,[e("label",ss,i(t(o)("paymentPage.discount")),1),e("label",os,"-"+i((Number(V())-Number(h())).toFixed(2))+"€",1)])):b("",!0),e("div",is,[e("label",ns,i(t(o)("paymentPage.subtotal")),1),e("label",ds,i(h().toFixed(2))+"€",1)]),w.value.price!=0?(f(),m("div",rs,[e("label",us,i(t(o)("paymentPage.tip")),1),e("label",cs,i(w.value.price)+"€",1)])):b("",!0)]),e("div",ps,[e("label",vs,i(t(o)("paymentPage.total")),1),e("label",ms,i(I.value.toFixed(2))+"€",1)])])):b("",!0),n(t(g),{type:"submit",class:"w-full border-round-bottom-lg p-2",icon:"pi pi-dollar",onClick:l[45]||(l[45]=a=>oe()),label:`${t(o)("common.pay")}`+($.value?"":` (${t(o)("paymentPage.total")} ${I.value.toFixed(2)}€) `)},null,8,["label"])])])])]),n(t(Ae),{visible:q.value,"onUpdate:visible":l[47]||(l[47]=a=>q.value=a),header:t(o)("common.success"),modal:!0,onHide:l[48]||(l[48]=a=>t(R).push({path:"/table"})),style:{"max-width":"75%"}},{default:r(()=>[e("div",fs,[l[62]||(l[62]=e("i",{class:"pi pi-check",style:{"font-size":"3rem",color:"green"}},null,-1)),e("label",ys,i(t(o)("paymentPage.successPayment")),1),e("label",null,i(t(o)("paymentPage.toOrderPage")),1)]),e("div",_s,[n(t(g),{label:t(o)("common.confirm"),onClick:l[46]||(l[46]=a=>q.value=!1)},null,8,["label"])])]),_:1},8,["visible","header"]),n(t($e),{style:{"max-width":"90%"}})],64))}},Ts=Ne(bs,[["__scopeId","data-v-a10fe13b"]]);export{Ts as default};
