import{g as $t}from"./_commonjsHelpers-CqkleIqs.js";import{v as Le,B as ye,x as Te,y as qe,f as h,q as i,l as X,i as O,z as he,A as Z,D as ke,h as a,t as v,n as ue,u as pe,r as R,o as ze,a as S,g as P,F as G,p as ne,k as o,j as H,E as Be,s as be,m as le,e as rt,G as Tt,H as Dt,c as ve,I as Pe,J as Ct,R as ut,K as je,L as It,M as Ke,N as St,O as Se,P as At,Q as et,S as ct,T as Nt,U as Bt,V as Ae,w as Ve,b as Pt,d as Lt,W as tt}from"./index-DT9sZ_bc.js";import{s as ge,a as dt}from"./index-BRXY3tPj.js";import{s as J,a as ft}from"./index-C5XBa73O.js";import{D as ee,c as re,s as at,a as qt}from"./index-728j2m4R.js";import{_ as De,a as Ue,b as We,c as Qe,s as Je,d as zt,S as Ot}from"./_plugin-vue_export-helper-DzWI13UC.js";import{s as Et}from"./index-CMxdbfXj.js";import{s as st,a as Mt}from"./index-BzJl3AK2.js";import{c as ce}from"./cookie-CTJN0GZu.js";import{s as Rt}from"./index-B5kCZgfE.js";import{s as nt}from"./index-DVqCFPSL.js";import{s as jt}from"./index-BuJ3lXHU.js";var Fe={exports:{}},ot;function Vt(){return ot||(ot=1,function(e){var t=function(){var n=String.fromCharCode,y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",c={};function d(l,w){if(!c[l]){c[l]={};for(var A=0;A<l.length;A++)c[l][l.charAt(A)]=A}return c[l][w]}var V={compressToBase64:function(l){if(l==null)return"";var w=V._compress(l,6,function(A){return y.charAt(A)});switch(w.length%4){default:case 0:return w;case 1:return w+"===";case 2:return w+"==";case 3:return w+"="}},decompressFromBase64:function(l){return l==null?"":l==""?null:V._decompress(l.length,32,function(w){return d(y,l.charAt(w))})},compressToUTF16:function(l){return l==null?"":V._compress(l,15,function(w){return n(w+32)})+" "},decompressFromUTF16:function(l){return l==null?"":l==""?null:V._decompress(l.length,16384,function(w){return l.charCodeAt(w)-32})},compressToUint8Array:function(l){for(var w=V.compress(l),A=new Uint8Array(w.length*2),_=0,b=w.length;_<b;_++){var q=w.charCodeAt(_);A[_*2]=q>>>8,A[_*2+1]=q%256}return A},decompressFromUint8Array:function(l){if(l==null)return V.decompress(l);for(var w=new Array(l.length/2),A=0,_=w.length;A<_;A++)w[A]=l[A*2]*256+l[A*2+1];var b=[];return w.forEach(function(q){b.push(n(q))}),V.decompress(b.join(""))},compressToEncodedURIComponent:function(l){return l==null?"":V._compress(l,6,function(w){return m.charAt(w)})},decompressFromEncodedURIComponent:function(l){return l==null?"":l==""?null:(l=l.replace(/ /g,"+"),V._decompress(l.length,32,function(w){return d(m,l.charAt(w))}))},compress:function(l){return V._compress(l,16,function(w){return n(w)})},_compress:function(l,w,A){if(l==null)return"";var _,b,q={},W={},U="",Q="",E="",z=2,N=3,L=2,M=[],u=0,s=0,f;for(f=0;f<l.length;f+=1)if(U=l.charAt(f),Object.prototype.hasOwnProperty.call(q,U)||(q[U]=N++,W[U]=!0),Q=E+U,Object.prototype.hasOwnProperty.call(q,Q))E=Q;else{if(Object.prototype.hasOwnProperty.call(W,E)){if(E.charCodeAt(0)<256){for(_=0;_<L;_++)u=u<<1,s==w-1?(s=0,M.push(A(u)),u=0):s++;for(b=E.charCodeAt(0),_=0;_<8;_++)u=u<<1|b&1,s==w-1?(s=0,M.push(A(u)),u=0):s++,b=b>>1}else{for(b=1,_=0;_<L;_++)u=u<<1|b,s==w-1?(s=0,M.push(A(u)),u=0):s++,b=0;for(b=E.charCodeAt(0),_=0;_<16;_++)u=u<<1|b&1,s==w-1?(s=0,M.push(A(u)),u=0):s++,b=b>>1}z--,z==0&&(z=Math.pow(2,L),L++),delete W[E]}else for(b=q[E],_=0;_<L;_++)u=u<<1|b&1,s==w-1?(s=0,M.push(A(u)),u=0):s++,b=b>>1;z--,z==0&&(z=Math.pow(2,L),L++),q[Q]=N++,E=String(U)}if(E!==""){if(Object.prototype.hasOwnProperty.call(W,E)){if(E.charCodeAt(0)<256){for(_=0;_<L;_++)u=u<<1,s==w-1?(s=0,M.push(A(u)),u=0):s++;for(b=E.charCodeAt(0),_=0;_<8;_++)u=u<<1|b&1,s==w-1?(s=0,M.push(A(u)),u=0):s++,b=b>>1}else{for(b=1,_=0;_<L;_++)u=u<<1|b,s==w-1?(s=0,M.push(A(u)),u=0):s++,b=0;for(b=E.charCodeAt(0),_=0;_<16;_++)u=u<<1|b&1,s==w-1?(s=0,M.push(A(u)),u=0):s++,b=b>>1}z--,z==0&&(z=Math.pow(2,L),L++),delete W[E]}else for(b=q[E],_=0;_<L;_++)u=u<<1|b&1,s==w-1?(s=0,M.push(A(u)),u=0):s++,b=b>>1;z--,z==0&&(z=Math.pow(2,L),L++)}for(b=2,_=0;_<L;_++)u=u<<1|b&1,s==w-1?(s=0,M.push(A(u)),u=0):s++,b=b>>1;for(;;)if(u=u<<1,s==w-1){M.push(A(u));break}else s++;return M.join("")},decompress:function(l){return l==null?"":l==""?null:V._decompress(l.length,32768,function(w){return l.charCodeAt(w)})},_decompress:function(l,w,A){var _=[],b=4,q=4,W=3,U="",Q=[],E,z,N,L,M,u,s,f={val:A(0),position:w,index:1};for(E=0;E<3;E+=1)_[E]=E;for(N=0,M=Math.pow(2,2),u=1;u!=M;)L=f.val&f.position,f.position>>=1,f.position==0&&(f.position=w,f.val=A(f.index++)),N|=(L>0?1:0)*u,u<<=1;switch(N){case 0:for(N=0,M=Math.pow(2,8),u=1;u!=M;)L=f.val&f.position,f.position>>=1,f.position==0&&(f.position=w,f.val=A(f.index++)),N|=(L>0?1:0)*u,u<<=1;s=n(N);break;case 1:for(N=0,M=Math.pow(2,16),u=1;u!=M;)L=f.val&f.position,f.position>>=1,f.position==0&&(f.position=w,f.val=A(f.index++)),N|=(L>0?1:0)*u,u<<=1;s=n(N);break;case 2:return""}for(_[3]=s,z=s,Q.push(s);;){if(f.index>l)return"";for(N=0,M=Math.pow(2,W),u=1;u!=M;)L=f.val&f.position,f.position>>=1,f.position==0&&(f.position=w,f.val=A(f.index++)),N|=(L>0?1:0)*u,u<<=1;switch(s=N){case 0:for(N=0,M=Math.pow(2,8),u=1;u!=M;)L=f.val&f.position,f.position>>=1,f.position==0&&(f.position=w,f.val=A(f.index++)),N|=(L>0?1:0)*u,u<<=1;_[q++]=n(N),s=q-1,b--;break;case 1:for(N=0,M=Math.pow(2,16),u=1;u!=M;)L=f.val&f.position,f.position>>=1,f.position==0&&(f.position=w,f.val=A(f.index++)),N|=(L>0?1:0)*u,u<<=1;_[q++]=n(N),s=q-1,b--;break;case 2:return Q.join("")}if(b==0&&(b=Math.pow(2,W),W++),_[s])U=_[s];else if(s===q)U=z+z.charAt(0);else return null;Q.push(U),_[q++]=z+U.charAt(0),b--,z=U,b==0&&(b=Math.pow(2,W),W++)}}};return V}();e!=null?e.exports=t:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return t})}(Fe)),Fe.exports}var Ft=Vt();const He=$t(Ft);var Ht=Le`
    .p-tag {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        background: dt('tag.primary.background');
        color: dt('tag.primary.color');
        font-size: dt('tag.font.size');
        font-weight: dt('tag.font.weight');
        padding: dt('tag.padding');
        border-radius: dt('tag.border.radius');
        gap: dt('tag.gap');
    }

    .p-tag-icon {
        font-size: dt('tag.icon.size');
        width: dt('tag.icon.size');
        height: dt('tag.icon.size');
    }

    .p-tag-rounded {
        border-radius: dt('tag.rounded.border.radius');
    }

    .p-tag-success {
        background: dt('tag.success.background');
        color: dt('tag.success.color');
    }

    .p-tag-info {
        background: dt('tag.info.background');
        color: dt('tag.info.color');
    }

    .p-tag-warn {
        background: dt('tag.warn.background');
        color: dt('tag.warn.color');
    }

    .p-tag-danger {
        background: dt('tag.danger.background');
        color: dt('tag.danger.color');
    }

    .p-tag-secondary {
        background: dt('tag.secondary.background');
        color: dt('tag.secondary.color');
    }

    .p-tag-contrast {
        background: dt('tag.contrast.background');
        color: dt('tag.contrast.color');
    }
`,Kt={root:function(t){var n=t.props;return["p-tag p-component",{"p-tag-info":n.severity==="info","p-tag-success":n.severity==="success","p-tag-warn":n.severity==="warn","p-tag-danger":n.severity==="danger","p-tag-secondary":n.severity==="secondary","p-tag-contrast":n.severity==="contrast","p-tag-rounded":n.rounded}]},icon:"p-tag-icon",label:"p-tag-label"},Ut=ye.extend({name:"tag",style:Ht,classes:Kt}),Wt={name:"BaseTag",extends:Te,props:{value:null,severity:null,rounded:Boolean,icon:String},style:Ut,provide:function(){return{$pcTag:this,$parentInstance:this}}};function xe(e){"@babel/helpers - typeof";return xe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xe(e)}function Qt(e,t,n){return(t=Jt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jt(e){var t=Gt(e,"string");return xe(t)=="symbol"?t:t+""}function Gt(e,t){if(xe(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var y=n.call(e,t);if(xe(y)!="object")return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var we={name:"Tag",extends:Wt,inheritAttrs:!1,computed:{dataP:function(){return qe(Qt({rounded:this.rounded},this.severity,this.severity))}}},Zt=["data-p"];function Xt(e,t,n,y,m,c){return i(),h("span",Z({class:e.cx("root"),"data-p":c.dataP},e.ptmi("root")),[e.$slots.icon?(i(),X(ke(e.$slots.icon),Z({key:0,class:e.cx("icon")},e.ptm("icon")),null,16,["class"])):e.icon?(i(),h("span",Z({key:1,class:[e.cx("icon"),e.icon]},e.ptm("icon")),null,16)):O("",!0),e.value!=null||e.$slots.default?he(e.$slots,"default",{key:2},function(){return[a("span",Z({class:e.cx("label")},e.ptm("label")),v(e.value),17)]}):O("",!0)],16,Zt)}we.render=Xt;var Yt=Le`
    .p-avatar {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: dt('avatar.width');
        height: dt('avatar.height');
        font-size: dt('avatar.font.size');
        background: dt('avatar.background');
        color: dt('avatar.color');
        border-radius: dt('avatar.border.radius');
    }

    .p-avatar-image {
        background: transparent;
    }

    .p-avatar-circle {
        border-radius: 50%;
    }

    .p-avatar-circle img {
        border-radius: 50%;
    }

    .p-avatar-icon {
        font-size: dt('avatar.icon.size');
        width: dt('avatar.icon.size');
        height: dt('avatar.icon.size');
    }

    .p-avatar img {
        width: 100%;
        height: 100%;
    }

    .p-avatar-lg {
        width: dt('avatar.lg.width');
        height: dt('avatar.lg.width');
        font-size: dt('avatar.lg.font.size');
    }

    .p-avatar-lg .p-avatar-icon {
        font-size: dt('avatar.lg.icon.size');
        width: dt('avatar.lg.icon.size');
        height: dt('avatar.lg.icon.size');
    }

    .p-avatar-xl {
        width: dt('avatar.xl.width');
        height: dt('avatar.xl.width');
        font-size: dt('avatar.xl.font.size');
    }

    .p-avatar-xl .p-avatar-icon {
        font-size: dt('avatar.xl.icon.size');
        width: dt('avatar.xl.icon.size');
        height: dt('avatar.xl.icon.size');
    }

    .p-avatar-group {
        display: flex;
        align-items: center;
    }

    .p-avatar-group .p-avatar + .p-avatar {
        margin-inline-start: dt('avatar.group.offset');
    }

    .p-avatar-group .p-avatar {
        border: 2px solid dt('avatar.group.border.color');
    }

    .p-avatar-group .p-avatar-lg + .p-avatar-lg {
        margin-inline-start: dt('avatar.lg.group.offset');
    }

    .p-avatar-group .p-avatar-xl + .p-avatar-xl {
        margin-inline-start: dt('avatar.xl.group.offset');
    }
`,ea={root:function(t){var n=t.props;return["p-avatar p-component",{"p-avatar-image":n.image!=null,"p-avatar-circle":n.shape==="circle","p-avatar-lg":n.size==="large","p-avatar-xl":n.size==="xlarge"}]},label:"p-avatar-label",icon:"p-avatar-icon"},ta=ye.extend({name:"avatar",style:Yt,classes:ea}),aa={name:"BaseAvatar",extends:Te,props:{label:{type:String,default:null},icon:{type:String,default:null},image:{type:String,default:null},size:{type:String,default:"normal"},shape:{type:String,default:"square"},ariaLabelledby:{type:String,default:null},ariaLabel:{type:String,default:null}},style:ta,provide:function(){return{$pcAvatar:this,$parentInstance:this}}};function $e(e){"@babel/helpers - typeof";return $e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$e(e)}function it(e,t,n){return(t=sa(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sa(e){var t=na(e,"string");return $e(t)=="symbol"?t:t+""}function na(e,t){if($e(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var y=n.call(e,t);if($e(y)!="object")return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ge={name:"Avatar",extends:aa,inheritAttrs:!1,emits:["error"],methods:{onError:function(t){this.$emit("error",t)}},computed:{dataP:function(){return qe(it(it({},this.shape,this.shape),this.size,this.size))}}},oa=["aria-labelledby","aria-label","data-p"],ia=["data-p"],la=["data-p"],ra=["src","alt","data-p"];function ua(e,t,n,y,m,c){return i(),h("div",Z({class:e.cx("root"),"aria-labelledby":e.ariaLabelledby,"aria-label":e.ariaLabel},e.ptmi("root"),{"data-p":c.dataP}),[he(e.$slots,"default",{},function(){return[e.label?(i(),h("span",Z({key:0,class:e.cx("label")},e.ptm("label"),{"data-p":c.dataP}),v(e.label),17,ia)):e.$slots.icon?(i(),X(ke(e.$slots.icon),{key:1,class:ue(e.cx("icon"))},null,8,["class"])):e.icon?(i(),h("span",Z({key:2,class:[e.cx("icon"),e.icon]},e.ptm("icon"),{"data-p":c.dataP}),null,16,la)):e.image?(i(),h("img",Z({key:3,src:e.image,alt:e.ariaLabel,onError:t[0]||(t[0]=function(){return c.onError&&c.onError.apply(c,arguments)})},e.ptm("image"),{"data-p":c.dataP}),null,16,ra)):O("",!0)]})],16,oa)}Ge.render=ua;const ca={class:"grid"},da={key:0,class:"col-12 sm:col-12 md:col-6 lg:col-4 border-round surface-section shadow-1 p-2"},fa={class:"flex flex-column"},pa=["onClick"],va={class:"p-1 flex-shrink-0 w-7rem h-7rem flex align-items-center justify-content-center overflow-hidden"},ha=["src","alt"],ma={class:"flex flex-column justify-content-center"},ba={class:"font-bold"},ga={class:"flex flex-wrap gap-2"},ya={class:"flex gap-1 align-items-center"},_a={class:"text-color-secondary line2"},wa={key:0,class:"text-xl font-bold text-primary"},ka={key:1,class:"flex align-items-center gap-1"},xa={class:"text-l font-bold text-color-secondary"},$a={class:"text-sm line-through text-500"},Ta={key:2,class:"flex gap-2 mr-2",id:"card-quantity"},Da={class:"w-2rem text-xl text-center"},Ca={key:3,class:"flex gap-2 mr-2"},Ia={key:0,class:"m-2 mt-0"},Sa={class:"flex flex-row justify-content-between align-content-center"},Aa={class:"flex flex-column"},Na={class:"text-l font-bold"},Ba={key:0,class:"text-l font-bold text-color-secondary"},Pa={key:1,class:"flex align-items-center gap-1"},La={class:"text-l font-bold text-color-secondary"},qa={class:"text-sm line-through text-500"},za={key:0,class:"flex ml-2 mr-2"},Oa={class:"w-2rem text-xl text-center"},Ea={key:1,class:"flex gap-2 mr-3 pt-2 pb-2"},Ma={class:"max-w-5rem flex align-items-center"},Ra={class:"font-bold whitespace-nowrap"},ja={class:"mb-2 flex justify-content-center"},Va={class:"font-bold text-center"},Fa={class:"mb-2"},Ha={class:"text-color-secondary m-0 line-height-3 line2 text-center"},Ka={class:"mb-2"},Ua={class:"flex justify-content-center"},Wa=["src","alt"],Qa={class:"flex align-items-center gap-2"},Ja=["src","alt"],Ga={class:"flex align-items-center gap-3 ml-auto"},Za={__name:"DishList",props:{rateDish:{type:Function,required:!0},likedItemsRef:Array,dislikedItemsRef:Array,tabIndex:Number,onlyVeg:Boolean},setup(e){const{t}=pe(),n=ee.dishDatas,y=R(null),m=e,c=(s,f=!0)=>{if(!m.onlyVeg)return!0;if(f)return s.vegetable;if(s.subItems.length>0){for(const x of s.subItems)if(x.vegetable)return!0}else return s.dish.vegetable;return!1};ze(()=>{let s=S.getOrderMenuTab()[m.tabIndex];if(S.customDishAPI.customDishes.value.map(k=>k.name),S.getMenu().length==0){console.log("exit");return}y.value=n.value[x(n.value,s)].mainDishes,ee.showDishList(y.value);function x(k,T){for(const g in k)if(k[g].name==T)return g;console.error("Can not find tab index in menu")}});let d={rated:!1,id:null,like:0,rate:0};function V(){var x;const s=S.currentPage.value,f=(x=s==null?void 0:s.data)==null?void 0:x.logoPath;return f?S.pathFormated(f,s.imagesPath):"/images/logo_logo.png"}const l=s=>ee.dishDatas.value[s]?ee.dishDatas.value[s].quantity:0,w=s=>{if(!_())return!1;const f=s.quantity;let x=3;if(s.price>0&&(x=9),s.limit){const k=s.id,T=_(),g=(T.peopleType.adults+T.peopleType.children)*s.limit,F=T.order.find($=>$.dishid==k);let I=0;if(s.subitem)for(const $ of s.subitem){I+=l($);const D=T.order.find(te=>te.dishid==A($));D&&(I+=D.quantity)}else I+=s.quantity,F&&(I+=F.quantity);return f>=x||g&&I>=g}return f>=x},A=s=>ee.dishDatas.value[s]?ee.dishDatas.value[s].id:0,_=()=>S.getTableValue(),b=s=>{let f="absolute origin-top-left mt-1 ml-1 border-round-lg pl-1 pr-1 text-xs text-white font-bold ";switch(s){case"new":f+="bg-red-600";break;case"recommended":case"special":f+="bg-orange-600";break;default:f+="bg-blue-600"}return f};function q(){m.rateDish(d.id,d.like,d.rate,d.rated),d.id=null,d.like=0,d.rate=0,d.rated=!1}const W=s=>{const f=m.likedItemsRef.indexOf(s);if(d.id=s.id,f!==-1)m.likedItemsRef.splice(f,1),d.like+=-1,d.rate+=-1,d.rated=!1;else{d.rated=!0,m.likedItemsRef.push(s);const x=m.dislikedItemsRef.indexOf(s);x!==-1?(m.dislikedItemsRef.splice(x,1),d.like+=1):(d.like+=1,d.rate+=1)}q()},U=s=>{const f=m.dislikedItemsRef.indexOf(s);if(d.id=s.id,f!==-1)m.dislikedItemsRef.splice(f,1),d.rate+=-1,d.rated=!1;else{d.rated=!0,m.dislikedItemsRef.push(s);const x=m.likedItemsRef.indexOf(s);x!==-1?(m.likedItemsRef.splice(x,1),d.like+=-1):d.rate+=1}q()},Q=R(!1),E=R({}),z=s=>{Q.value=!0,E.value=s},N=s=>{s.target.src="/images/default.png"};function L(s){u(s.target,300)}function M(s){u(s.target,110)}function u(s,f){const x=s.naturalWidth,k=s.naturalHeight,T=Math.min(x,f),g=T/x,F=k*g;s.style.width=`${T}px`,s.style.height=`${F}px`}return(s,f)=>(i(),h(G,null,[a("div",ca,[(i(!0),h(G,null,ne(y.value,(x,k)=>{var T;return i(),h(G,{key:k},[c(x,!1)?(i(),h("div",da,[a("div",fa,[a("div",{class:ue(["flex flex-row",x.subItems.length!==0?"flex-grow-1":""]),onClick:g=>z(x.dish)},[((T=x.dish.etiquette)==null?void 0:T.length)>0?(i(),h("div",{key:0,class:ue(b(x.dish.etiquette))},v(o(t)("common.etiquette."+x.dish.etiquette)),3)):O("",!0),a("div",va,[a("img",{src:x.dish.image||"/images/default.png",alt:x.dish.name,class:"w-full h-full",style:{"object-fit":"cover"},onError:N,onLoad:M},null,40,ha)]),a("div",ma,[a("div",ba,v(x.dish.name),1),a("div",null,[a("div",ga,[a("div",ya,[(i(),h(G,null,ne(5,g=>a("i",{key:g,class:ue(["pi invert-star",g<=Math.floor(x.dish.likes/x.dish.rates*5)?"pi-star-fill":g-.5<=x.dish.likes/x.dish.rates*5?"pi-star-half-fill":"pi-star"]),style:{color:"black"}},null,2)),64)),a("p",null,"("+v(x.dish.rates?x.dish.rates:0)+")",1)])])]),a("div",null,[a("p",_a,v(x.dish.note),1)])])],10,pa),x.subItems.length==0?(i(),h("div",{key:0,class:ue(["flex ml-2 mr-2 mb-2",Number(x.dish.price)>0?"justify-content-between":"justify-content-end"])},[!x.dish.discount&&Number(x.dish.price)>0?(i(),h("span",wa,"€"+v(x.dish.price),1)):O("",!0),x.dish.discount?(i(),h("div",ka,[a("span",xa,"€"+v(x.dish.dis_price),1),a("span",$a,"€"+v(x.dish.price),1),P(o(we),{severity:"danger",value:"-"+x.dish.discount+"%"},null,8,["value"])])):O("",!0),x.dish.soldout?O("",!0):(i(),h("div",Ta,[P(o(J),{icon:"pi pi-minus",rounded:"",disabled:x.dish.quantity<=0,onClick:g=>x.dish.quantity--,class:"w-2rem h-2rem"},null,8,["disabled","onClick"]),a("span",Da,v(x.dish.quantity),1),P(o(J),{icon:"pi pi-plus",rounded:"",disabled:w(x.dish),onClick:g=>x.dish.quantity++,class:"w-2rem h-2rem"},null,8,["disabled","onClick"])])),x.dish.soldout?(i(),h("div",Ca,[P(o(we),{severity:"danger",value:s.$t("common.soldout")},null,8,["value"])])):O("",!0)],2)):O("",!0),x.subItems.length!==0?(i(!0),h(G,{key:1},ne(x.subItems,(g,F)=>(i(),h(G,{key:"index"},[!g.disable&&c(g)?(i(),h("div",Ia,[a("div",Sa,[a("div",Aa,[a("span",Na,v(g.subname),1),!g.discount&&g.price!=="0.00"&&g.price!=="0"?(i(),h("span",Ba,"€"+v(g.price),1)):O("",!0),g.discount?(i(),h("div",Pa,[a("span",La,"€"+v(g.dis_price),1),a("span",qa,"€"+v(g.price),1),P(o(we),{severity:"danger",value:"-"+g.discount+"%"},null,8,["value"])])):O("",!0)]),g.soldout?O("",!0):(i(),h("div",za,[P(o(J),{icon:"pi pi-minus",rounded:"",disabled:g.quantity<=0,onClick:I=>g.quantity--,class:"w-2rem h-2rem"},null,8,["disabled","onClick"]),a("span",Oa,v(g.quantity),1),P(o(J),{icon:"pi pi-plus",rounded:"",onClick:I=>g.quantity++,class:"w-2rem h-2rem",disabled:w(g)},null,8,["onClick","disabled"])])),g.soldout?(i(),h("div",Ea,[P(o(we),{severity:"danger",value:s.$t("common.soldout")},null,8,["value"])])):O("",!0)])])):O("",!0)],64))),128)):O("",!0)])])):O("",!0)],64)}),128))]),P(o(ge),{visible:Q.value,"onUpdate:visible":f[2]||(f[2]=x=>Q.value=x),modal:"",header:"dish",style:Be([{width:"23rem"},{width:"80vw","max-width":"700px"}])},{header:H(()=>[a("div",Ma,[P(o(Ge),{image:V(),class:"w-full"},null,8,["image"])]),a("span",Ra,v(s.$t("common.details")),1)]),default:H(()=>[a("div",ja,[a("span",Va,v(E.value.name),1)]),a("div",Fa,[a("span",Ha,v(E.value.note),1)]),a("div",Ka,[a("div",Ua,[a("img",{class:"w-full h-auto object-contain",src:E.value.image,alt:E.value.name,onError:N,onLoad:L},null,40,Wa)])]),a("div",Qa,[(i(!0),h(G,null,ne(E.value.allergies,(x,k)=>(i(),h("img",{src:"images/"+x+".png",alt:x,class:"w-2rem h-2rem border-round flex-shrink-0",style:{"object-fit":"cover","min-width":"2rem"}},null,8,Ja))),256)),a("div",Ga,[a("button",{onClick:f[0]||(f[0]=x=>W(E.value)),class:"p-0 border-none bg-transparent cursor-pointer"},[a("i",{class:ue(["pi pi-thumbs-up text-xl",m.likedItemsRef.includes(E.value)?"text-green-500":"text-gray-400"])},null,2)]),a("button",{onClick:f[1]||(f[1]=x=>U(E.value)),class:"p-0 border-none bg-transparent cursor-pointer"},[a("i",{class:ue(["pi pi-thumbs-down text-xl",m.dislikedItemsRef.includes(E.value)?"text-red-500":"text-gray-400"])},null,2)])])])]),_:1},8,["visible"])],64))}},Xa=De(Za,[["__scopeId","data-v-fc57cd09"]]),Ya={key:0,class:"text-3xl font-bold"},es={class:"flex flex-column gap-3 p-1"},ts={key:0,class:"flex flex-column gap-1"},as={key:0,class:"m-0"},ss={key:0,class:"m-0"},ns={class:"flex justify-content-between gap-4 mt-1"},os={class:"flex align-items-center gap-2"},is=["src","alt"],ls={class:"flex-grow-1 min-width-0 max-w-18rem"},rs={class:"flex flex-column gap-1"},us={class:"flex align-items-center gap-2"},cs={class:"text-xl font-bold line1 whitespace-nowrap overflow-hidden text-overflow-ellipsis",style:{"max-width":"20rem"}},ds={class:"flex align-items-end gap-1"},fs={key:0,class:"text-xl font-bold text-primary"},ps={key:1,class:"text-xl font-bold text-primary"},vs={key:2,class:"text-sm text-color-secondary"},hs={key:0,class:"text-xs text-primary"},ms={class:"flex-shrink-0 flex flex-wrap justify-content-between align-items-center gap-1"},bs={class:"flex flex-wrap justify-content-between align-content-center"},gs={class:"flex align-items-center gap-1"},ys={class:"w-2rem text-center"},_s={key:1,class:"flex flex-column gap-2 mt-2"},ws={for:"in_label"},ks={for:"in_label"},xs={class:"bottom-0 left-0 mt-2"},$s={class:"text-2xl font-bold"},Ts={class:"text-2xl font-bold text-primary pl-2"},Ds={class:"flex justify-content-between"},Cs={__name:"Cart",props:{checkout:{type:Function,required:!0},isTakeaway:Boolean},setup(e,{expose:t}){const{locale:n}=pe(),y=rt(),{t:m}=pe(),c=re.cartDishs,d=R([]),V=R(),l=R(),w=R(!1),A=R(!1),_=R(!0),b=R(""),q=R("");function W(I,$,D){let te="";const j=n.value,Y=S.customDishAPI.getCustomDishByName(I);for(const se of D){const de=Y.types[$].dishes.find(fe=>fe.dishid===se.id)[`name_${j}`];te=te+de+"/"}return te}function U(I,$){const D=n.value;return S.customDishAPI.getCustomDishByName(I).types[$][`typeName_${D}`]}const Q=(I,$)=>{const D=d.value[I].quantity+$;D>=0&&(d.value[I].quantity=D)};function E(I){I&&V.value&&(V.value.dishNote=l.value?l.value:void 0),A.value=!1}function z(){l.value&&(l.value=void 0),V.value&&(V.value=void 0)}function N(I){V.value=I,l.value=V.value.dishNote?V.value.dishNote:void 0,A.value=!0}const L=e;t({showDishList:I=>{w.value=!0,d.value.length=0;for(let $=0;$<I.length;$++)d.value.push(I[$]);_.value=d.value.length==0&&c.length==0}});function u(I){re.removeItem(I)}function s(){L.isTakeaway?f():x()}function f(){const I=[];c.value.forEach($=>{I.push($)}),d.value.forEach($=>{$.quantity>0&&I.push($)}),I.length<=0?le.show_warn(m("notification.select_at_least_one")):(w.value=!1,y.push({path:"/paymentPage"}))}function x(){L.checkout({name:b.value,note:q.value},I=>{I.success&&(c.value.forEach($=>{$.dishNote=void 0}),d.value.forEach($=>{$.dishNote=void 0}),q.value="",ee.cleanDishDataQty(),ce.deleteCookie("cartDish_normal"),re.cleanAll(),ce.deleteCookie("cartDish_custom"))})&&(w.value=!1)}function k(I){return I.subname!=""&&I.subname!="Default Title"?I.name+" "+I.subname:I.name}function T(){let I=0;return c.value.forEach($=>{I+=$.discount?($.dis_price?$.dis_price:0)*$.count:($.price?$.price:0)*$.count}),d.value.forEach($=>{I+=$.discount?($.dis_price?$.dis_price:0)*$.quantity:($.price?$.price:0)*$.quantity}),"€"+I.toFixed(2)}const g=I=>{I.target.src="/images/default.png"},F=I=>{const $=I.quantity;let D=3;return I.price>0&&(D=9),$>=D};return(I,$)=>(i(),h(G,null,[P(o(ge),{class:"bg-primary-reverse text-sm md:text-lg lg:text-xl",visible:w.value,"onUpdate:visible":$[2]||($[2]=D=>w.value=D),modal:"",header:I.$t("common.cart"),style:Be([{backgroundColor:"rgba(250, 250, 250, 1)",height:"100%",minWidth:"24rem"},{width:"80vw","max-width":"700px"}]),dismissableMask:!0},{footer:H(()=>[a("div",xs,[a("span",$s,v(I.$t("common.total"))+": ",1),a("span",Ts,v(T()),1),P(o(J),{icon:e.isTakeaway?"pi pi-wallet":"pi pi-plus",class:"p-button-success p-button-rounded ml-3",onClick:s,label:e.isTakeaway?o(m)("common.pay"):o(m)("common.send")},null,8,["icon","label"])])]),default:H(()=>[_.value?(i(),h("h2",Ya,"Cart is empty.")):O("",!0),a("div",es,[(i(!0),h(G,null,ne(o(c),(D,te)=>(i(),X(o(Et),{style:{overflow:"hidden"},key:te},{title:H(()=>[be(v(I.$t(`common.${D.name.replace(/[^a-zA-Z0-9\s]/g,"").toLowerCase().replace(/\s+/g,"")}`)),1)]),subtitle:H(()=>[be(v(I.$t("common.price"))+" : "+v(D.price)+"€",1)]),content:H(()=>[o(S).customDishAPI.customDishes.value.find(j=>j.name==D.name)?(i(),h("div",ts,[(i(!0),h(G,null,ne(D.notesAndId,(j,Y)=>(i(),h("div",null,[D.notesAndId[Y].length!==0?(i(),h("span",as,v(U(D.name,Y))+": "+v(W(D.name,Y,j)),1)):O("",!0)]))),256)),a("div",null,[D.dishNote?(i(),h("span",ss,v(I.$t("common.note"))+": "+v(D.dishNote),1)):O("",!0)])])):O("",!0)]),footer:H(()=>[a("div",ns,[e.isTakeaway?O("",!0):(i(),X(o(J),{key:0,label:o(m)("common.edit")+" "+o(m)("common.note"),severity:"contrast",onClick:j=>N(D)},null,8,["label","onClick"])),P(o(J),{label:o(m)("common.remove"),severity:"danger",onClick:j=>u(D)},null,8,["label","onClick"])])]),_:2},1024))),128)),(i(!0),h(G,null,ne(d.value,(D,te)=>(i(),h("div",{key:te,class:"p-2 border-round shadow-1 transition-all transition-duration-200 hover:shadow-3 flex flex-column gap-1"},[a("div",os,[a("img",{src:D.image,alt:D.name,class:"w-4rem h-4rem border-round flex-shrink-0",onError:g,style:{"object-fit":"cover","min-width":"4rem"}},null,40,is),a("div",ls,[a("div",rs,[a("div",us,[a("span",cs,v(k(D)),1)])]),a("div",ds,[D.discount?(i(),h("span",fs,"€"+v(Number(D.dis_price?D.dis_price:0).toFixed(2)),1)):O("",!0),D.discount?O("",!0):(i(),h("span",ps,"€"+v(Number(D.price?D.price:0).toFixed(2)),1)),D.price>0?(i(),h("span",vs,"/uni.")):O("",!0)])])]),a("div",null,[D.dishNote?(i(),h("span",hs,v(o(m)("common.note")+": "+D.dishNote),1)):O("",!0)]),a("div",ms,[a("div",bs,[e.isTakeaway?O("",!0):(i(),X(o(J),{key:0,label:o(m)("common.edit")+" "+o(m)("common.note"),severity:"contrast",class:"w-3.5rem h-2rem",onClick:j=>N(D)},null,8,["label","onClick"]))]),a("div",gs,[P(o(J),{icon:"pi pi-minus",rounded:"",disabled:D.quantity<=0,onClick:j=>Q(te,-1),class:"w-2rem h-2rem"},null,8,["disabled","onClick"]),a("span",ys,v(D.quantity),1),P(o(J),{icon:"pi pi-plus",rounded:"",disabled:F(D),onClick:j=>Q(te,1),class:"w-2rem h-2rem"},null,8,["disabled","onClick"])])])]))),128))]),e.isTakeaway?O("",!0):(i(),h("div",_s,[P(o(st),{variant:"in"},{default:H(()=>[P(o(dt),{id:"in_label",modelValue:b.value,"onUpdate:modelValue":$[0]||($[0]=D=>b.value=D),variant:"filled",maxlength:"20"},null,8,["modelValue"]),a("label",ws,v(o(m)("common.name")),1)]),_:1}),P(o(st),{variant:"in"},{default:H(()=>[P(o(at),{id:"in_label",class:"min-w-full",rows:"5",modelValue:q.value,"onUpdate:modelValue":$[1]||($[1]=D=>q.value=D),variant:"filled",maxlength:"200"},null,8,["modelValue"]),a("label",ks,v(o(m)("common.observation")),1)]),_:1})]))]),_:1},8,["visible","header"]),P(o(ge),{visible:A.value,"onUpdate:visible":$[6]||($[6]=D=>A.value=D),header:o(m)("common.note"),onHide:$[7]||($[7]=D=>z()),modal:"",dismissableMask:!0},{default:H(()=>[P(o(at),{modelValue:l.value,"onUpdate:modelValue":$[3]||($[3]=D=>l.value=D),rows:"5",cols:"30",placeholder:o(m)("common.edit")+" "+o(m)("common.note")+"...",maxlength:"100"},null,8,["modelValue","placeholder"]),a("div",Ds,[P(o(J),{label:o(m)("common.cancel"),severity:"danger",onClick:$[4]||($[4]=D=>E(!1))},null,8,["label"]),P(o(J),{label:o(m)("common.save"),severity:"primary",size:"sm",onClick:$[5]||($[5]=D=>E(!0))},null,8,["label"])])]),_:1},8,["visible","header"])],64))}},Is=De(Cs,[["__scopeId","data-v-da4419e1"]]);var Ss=Le`
    .p-overlaybadge {
        position: relative;
    }

    .p-overlaybadge .p-badge {
        position: absolute;
        inset-block-start: 0;
        inset-inline-end: 0;
        transform: translate(50%, -50%);
        transform-origin: 100% 0;
        margin: 0;
        outline-width: dt('overlaybadge.outline.width');
        outline-style: solid;
        outline-color: dt('overlaybadge.outline.color');
    }

    .p-overlaybadge .p-badge:dir(rtl) {
        transform: translate(-50%, -50%);
    }
`,As={root:"p-overlaybadge"},Ns=ye.extend({name:"overlaybadge",style:Ss,classes:As}),Bs={name:"OverlayBadge",extends:ft,style:Ns,provide:function(){return{$pcOverlayBadge:this,$parentInstance:this}}},pt={name:"OverlayBadge",extends:Bs,inheritAttrs:!1,components:{Badge:ft}};function Ps(e,t,n,y,m,c){var d=Tt("Badge");return i(),h("div",Z({class:e.cx("root")},e.ptmi("root")),[he(e.$slots,"default"),P(d,Z(e.$props,{pt:e.ptm("pcBadge")}),null,16,["pt"])],16)}pt.render=Ps;R([]);R("iniImages()");const Ls={class:"m-3"},qs={class:"flex flex-column gap-2"},zs={class:"w-full flex justify-content-center"},Os={key:0,class:"max-w-19rem"},Es=["src"],Ms={style:{width:"300px",height:"300px",background:"url(/boxImage/box.png)"}},Rs={key:0,class:"flex align-items-center justify-content-center text-4xl font-bold text-white w-full h-full"},js={key:1,class:"grid m-0 p-2"},Vs=["onClick"],Fs={class:"flex align-items-center justify-content-center font-bold m-0 p-0",style:{width:"94px",height:"94px"}},Hs=["src"],Ks={class:"flex flex-wrap justify-content-between align-items-center m-1"},Us={class:"flex gap-1 align-items-center"},Ws={key:0},Qs={class:"font-bold mb-2"},Js={key:1,class:"flex justify-content-between gap-2 mt-3"},Gs={class:"font-bold mb-2"},Zs={class:"flex mr-2"},Xs={class:"w-3rem text-xl text-center"},Ys={class:"font-bold block mb-2"},en={class:"flex flex-wrap"},tn={key:2,class:"flex flex-wrap gap-2 mt-3"},an={class:"font-bold block mb-2"},sn={class:"font-bold block mb-2 text-center"},nn={class:"flex flex-wrap gap-2 mt-3"},on={__name:"CustomDish",props:{currentCustomDish:Object,tabindex:Number},emits:["typeClick"],setup(e,{emit:t}){const{locale:n}=pe(),y=e,m=Dt(),{t:c}=pe();ze(()=>{const k=S.getOrderMenuTab()[y.tabindex];S.customDishAPI.customDishes.value.map(g=>g.name).includes(k)&&(d.value=S.customDishAPI.customDishes.value.find(g=>g.name==k))});const d=R(null),V=ve(()=>d.boxImages),l=R(0),w=ve(()=>{var T;if(d.value==null)return 0;let k=(T=d.value)==null?void 0:T.initialPrice;for(const g of d.value.types??[])for(const F of g.dishes??[])F.selected&&(k+=F.price);return Number(k).toFixed(2)}),A=t,_=R(null),b=ve(()=>{const k=n.value,T=`title_${k}`,g=`description_${k}`;return d.value==null?{}:d.value.descriptions.map(F=>({title:F[T],descriptions:F.descriptions.map(I=>I[g]),image:F==null?void 0:F.image}))}),q=ve(()=>{var g,F;const k=Number(((g=d.value)==null?void 0:g.like)??0),T=Number(((F=d.value)==null?void 0:F.rate)??0);return T?k/T*5:0});function W(k,T){const g=n.value;return k[`${T}_${g}`]}function U(k,T,g){const F=k[T];if(F.selected){F.selected=!1;return}else{const $=k.filter(D=>D.selected).length;if(g===1){s(k),F.selected=!0;return}$<g&&(F.selected=!0)}}function Q(k,T,g){const F=k.dishes;A("typeClick",k,T,F[T].selected),U(F,T,g)}function E(k){return k.selected}function z(){if(!f(d.value.types))return;const k=L(d.value.types),T=M(d.value.types);re.addItem({dishid:-1,name:d.value.name,category:y.currentCustomDish.category,count:l.value!==0?l.value:1,price:w.value,notes:k,notesAndId:T}),console.log("CART: ",re.cartDishs),u(d.value.types),le.show({severity:"info",summary:"info",detail:c("customDishBibimbapVue.addToCartSuccessBibimbap")})}function N(k){return!k||!k.dishes?"":k.dishes.filter(g=>g.selected).map(g=>g.name).join(",")}function L(k){return k?k.map(T=>N(T)):[]}function M(k){return k?k.map(T=>T.dishes?T.dishes.filter(g=>g.selected).map(g=>({id:g.dishid,name:g.name})):[]):[]}function u(k){k&&k.forEach(T=>{T.dishes&&T.dishes.forEach(g=>{g.selected=!1})})}function s(k){k.forEach(T=>T.selected=!1)}function f(k){if(d.value.options.quantity&&l.value<=0)return le.show({severity:"warn",detail:c("notification.quantity_must_be_positive")}),!1;for(const T of k)if(T.dishes.filter(F=>F.selected).length<T.minQuantity){const F=T.typeName;return le.show({severity:"warn",detail:c("notification.select_type_of",{name:F})}),!1}return!0}function x(k){k?S.customDishAPI.like(d.value.id)&&(_.value="like",m.add({severity:"success",summary:c("common.success"),detail:c("common.rate")+" "+c("common.success"),life:750})):S.customDishAPI.unLike(d.value.id)&&(_.value="unlike",m.add({severity:"success",summary:c("common.success"),detail:c("common.rate")+" "+c("common.success"),life:750}))}return(k,T)=>{var g,F,I,$,D,te;return i(),h("div",Ls,[a("div",qs,[P(o(Je),{class:"w-full max-w-xl mx-auto"},{default:H(()=>[(i(!0),h(G,null,ne(b.value,(j,Y)=>(i(),X(o(Ue),{key:Y,value:Y},{default:H(()=>[P(o(We),null,{default:H(()=>[be(v(j.title),1)]),_:2},1024),P(o(Qe),null,{default:H(()=>{var se;return[(i(!0),h(G,null,ne(j.descriptions,(de,fe)=>(i(),h("p",{key:fe},v(de),1))),128)),a("div",zs,[(se=j.image)!=null&&se.src?(i(),h("div",Os,[a("img",{src:j.image.src,class:"w-full"},null,8,Es)])):O("",!0)])]}),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1}),((F=(g=d.value)==null?void 0:g.value)==null?void 0:F.name)==="MY BOX"?(i(),X(o(Je),{key:0,class:"w-full max-w-xl mx-auto"},{default:H(()=>[P(o(Ue),{value:"0"},{default:H(()=>[P(o(We),null,{default:H(()=>[be(" 🥩 "+v(k.$t("common.showMybox")),1)]),_:1}),P(o(Qe),null,{default:H(()=>[a("div",Ms,[k.isEmptyArray(V.value)?(i(),h("div",Rs,v(k.$t("common.myboxAlarm")),1)):O("",!0),k.isEmptyArray(V.value)?O("",!0):(i(),h("div",js,[(i(!0),h(G,null,ne(V.value,j=>(i(),h("div",{class:"col-4 p-0",onClick:Y=>k.imageSelectAction(j)},[a("div",Fs,[j?(i(),h("img",{key:0,class:"m-0 p-0",src:k.imagePath(j),style:{width:"82px",height:"82px"}},null,8,Hs)):O("",!0)])],8,Vs))),256))]))])]),_:1})]),_:1})]),_:1})):O("",!0)]),a("div",Ks,[a("div",Us,[(i(),h(G,null,ne(5,j=>a("i",{key:j,class:ue(["pi invert-star",j<=Math.floor(q.value)?"pi-star-fill":j-.5<=q.value?"pi-star-half":"pi-star"]),style:{color:"black"}},null,2)),64)),a("p",null,"("+v((I=d.value)!=null&&I.rate?d.value.rate:0)+")",1)]),a("div",null,[P(o(J),{text:"",icon:"pi pi-thumbs-up",severity:_.value==="like"?"success":"",onClick:T[0]||(T[0]=j=>x(!0))},null,8,["severity"]),P(o(J),{text:"",icon:"pi pi-thumbs-down",severity:_.value==="unlike"?"danger":"",onClick:T[1]||(T[1]=j=>x(!1))},null,8,["severity"])])]),($=d.value)!=null&&$.options.extraInfo?(i(),h("div",Ws,[a("label",Qs,v(d.value.options.extraInfo),1)])):O("",!0),(D=d.value)!=null&&D.options.quantity?(i(),h("div",Js,[a("div",null,[a("label",Gs,v(k.$t("common.quantity"))+" / "+v(k.$t("common.pieces")),1)]),a("div",Zs,[P(o(J),{icon:"pi pi-minus",disabled:l.value<=0,onClick:T[2]||(T[2]=j=>{var Y;return l.value-=(Y=d.value)==null?void 0:Y.options.quantitySetp}),class:"w-2rem h-2rem"},null,8,["disabled"]),a("span",Xs,v(l.value),1),P(o(J),{icon:"pi pi-plus",disabled:l.value>=d.value.options.maxQuantity,onClick:T[3]||(T[3]=j=>{var Y;return l.value+=(Y=d.value)==null?void 0:Y.options.quantitySetp}),class:"w-2rem h-2rem"},null,8,["disabled"])])])):O("",!0),(i(!0),h(G,null,ne((te=d.value)==null?void 0:te.types,(j,Y)=>(i(),h("div",{key:j.id},[Pe(a("div",null,[a("label",Ys,v(Y+1)+". "+v(W(j,"typeName")),1),a("div",en,[(i(!0),h(G,null,ne(j.dishes,(se,de)=>(i(),X(o(J),{key:de,onClick:fe=>Q(j,de,l.value==0?j.maxQuantity:j.maxQuantity*l.value),class:ue([{"p-button-primary":E(se),"p-button-outlined":!E(se)},"m-1"])},{default:H(()=>[a("p",{class:ue({"text-gray-700":!E(se)})},v(W(se,"name")),3)]),_:2},1032,["onClick","class"]))),128))])],512),[[Ct,j.enable]])]))),128)),e.currentCustomDish.initialPrice!==0?(i(),h("div",tn,[a("label",an,v(k.$t("common.price"))+":",1),a("label",sn,v(w.value+"€"),1)])):O("",!0),a("div",nn,[P(o(J),{icon:"pi pi-shopping-cart",onClick:T[4]||(T[4]=j=>z()),label:k.$t("common.addToCart"),class:"m-3",severity:"primary",raised:""},null,8,["label"])])])}}},ln=De(on,[["__scopeId","data-v-b35c27a5"]]);var rn=Le`
    .p-tabs {
        display: flex;
        flex-direction: column;
    }

    .p-tablist {
        display: flex;
        position: relative;
    }

    .p-tabs-scrollable > .p-tablist {
        overflow: hidden;
    }

    .p-tablist-viewport {
        overflow-x: auto;
        overflow-y: hidden;
        scroll-behavior: smooth;
        scrollbar-width: none;
        overscroll-behavior: contain auto;
    }

    .p-tablist-viewport::-webkit-scrollbar {
        display: none;
    }

    .p-tablist-tab-list {
        position: relative;
        display: flex;
        background: dt('tabs.tablist.background');
        border-style: solid;
        border-color: dt('tabs.tablist.border.color');
        border-width: dt('tabs.tablist.border.width');
    }

    .p-tablist-content {
        flex-grow: 1;
    }

    .p-tablist-nav-button {
        all: unset;
        position: absolute !important;
        flex-shrink: 0;
        inset-block-start: 0;
        z-index: 2;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        background: dt('tabs.nav.button.background');
        color: dt('tabs.nav.button.color');
        width: dt('tabs.nav.button.width');
        transition:
            color dt('tabs.transition.duration'),
            outline-color dt('tabs.transition.duration'),
            box-shadow dt('tabs.transition.duration');
        box-shadow: dt('tabs.nav.button.shadow');
        outline-color: transparent;
        cursor: pointer;
    }

    .p-tablist-nav-button:focus-visible {
        z-index: 1;
        box-shadow: dt('tabs.nav.button.focus.ring.shadow');
        outline: dt('tabs.nav.button.focus.ring.width') dt('tabs.nav.button.focus.ring.style') dt('tabs.nav.button.focus.ring.color');
        outline-offset: dt('tabs.nav.button.focus.ring.offset');
    }

    .p-tablist-nav-button:hover {
        color: dt('tabs.nav.button.hover.color');
    }

    .p-tablist-prev-button {
        inset-inline-start: 0;
    }

    .p-tablist-next-button {
        inset-inline-end: 0;
    }

    .p-tablist-prev-button:dir(rtl),
    .p-tablist-next-button:dir(rtl) {
        transform: rotate(180deg);
    }

    .p-tab {
        flex-shrink: 0;
        cursor: pointer;
        user-select: none;
        position: relative;
        border-style: solid;
        white-space: nowrap;
        gap: dt('tabs.tab.gap');
        background: dt('tabs.tab.background');
        border-width: dt('tabs.tab.border.width');
        border-color: dt('tabs.tab.border.color');
        color: dt('tabs.tab.color');
        padding: dt('tabs.tab.padding');
        font-weight: dt('tabs.tab.font.weight');
        transition:
            background dt('tabs.transition.duration'),
            border-color dt('tabs.transition.duration'),
            color dt('tabs.transition.duration'),
            outline-color dt('tabs.transition.duration'),
            box-shadow dt('tabs.transition.duration');
        margin: dt('tabs.tab.margin');
        outline-color: transparent;
    }

    .p-tab:not(.p-disabled):focus-visible {
        z-index: 1;
        box-shadow: dt('tabs.tab.focus.ring.shadow');
        outline: dt('tabs.tab.focus.ring.width') dt('tabs.tab.focus.ring.style') dt('tabs.tab.focus.ring.color');
        outline-offset: dt('tabs.tab.focus.ring.offset');
    }

    .p-tab:not(.p-tab-active):not(.p-disabled):hover {
        background: dt('tabs.tab.hover.background');
        border-color: dt('tabs.tab.hover.border.color');
        color: dt('tabs.tab.hover.color');
    }

    .p-tab-active {
        background: dt('tabs.tab.active.background');
        border-color: dt('tabs.tab.active.border.color');
        color: dt('tabs.tab.active.color');
    }

    .p-tabpanels {
        background: dt('tabs.tabpanel.background');
        color: dt('tabs.tabpanel.color');
        padding: dt('tabs.tabpanel.padding');
        outline: 0 none;
    }

    .p-tabpanel:focus-visible {
        box-shadow: dt('tabs.tabpanel.focus.ring.shadow');
        outline: dt('tabs.tabpanel.focus.ring.width') dt('tabs.tabpanel.focus.ring.style') dt('tabs.tabpanel.focus.ring.color');
        outline-offset: dt('tabs.tabpanel.focus.ring.offset');
    }

    .p-tablist-active-bar {
        z-index: 1;
        display: block;
        position: absolute;
        inset-block-end: dt('tabs.active.bar.bottom');
        height: dt('tabs.active.bar.height');
        background: dt('tabs.active.bar.background');
        transition: 250ms cubic-bezier(0.35, 0, 0.25, 1);
    }
`,un={root:function(t){var n=t.props;return["p-tabs p-component",{"p-tabs-scrollable":n.scrollable}]}},cn=ye.extend({name:"tabs",style:rn,classes:un}),dn={name:"BaseTabs",extends:Te,props:{value:{type:[String,Number],default:void 0},lazy:{type:Boolean,default:!1},scrollable:{type:Boolean,default:!1},showNavigators:{type:Boolean,default:!0},tabindex:{type:Number,default:0},selectOnFocus:{type:Boolean,default:!1}},style:cn,provide:function(){return{$pcTabs:this,$parentInstance:this}}},vt={name:"Tabs",extends:dn,inheritAttrs:!1,emits:["update:value"],data:function(){return{d_value:this.value}},watch:{value:function(t){this.d_value=t}},methods:{updateValue:function(t){this.d_value!==t&&(this.d_value=t,this.$emit("update:value",t))},isVertical:function(){return this.orientation==="vertical"}}};function fn(e,t,n,y,m,c){return i(),h("div",Z({class:e.cx("root")},e.ptmi("root")),[he(e.$slots,"default")],16)}vt.render=fn;var pn={root:"p-tablist",content:function(t){var n=t.instance;return["p-tablist-content",{"p-tablist-viewport":n.$pcTabs.scrollable}]},tabList:"p-tablist-tab-list",activeBar:"p-tablist-active-bar",prevButton:"p-tablist-prev-button p-tablist-nav-button",nextButton:"p-tablist-next-button p-tablist-nav-button"},vn=ye.extend({name:"tablist",classes:pn}),hn={name:"BaseTabList",extends:Te,props:{},style:vn,provide:function(){return{$pcTabList:this,$parentInstance:this}}},ht={name:"TabList",extends:hn,inheritAttrs:!1,inject:["$pcTabs"],data:function(){return{isPrevButtonEnabled:!1,isNextButtonEnabled:!0}},resizeObserver:void 0,watch:{showNavigators:function(t){t?this.bindResizeObserver():this.unbindResizeObserver()},activeValue:{flush:"post",handler:function(){this.updateInkBar()}}},mounted:function(){var t=this;setTimeout(function(){t.updateInkBar()},150),this.showNavigators&&(this.updateButtonState(),this.bindResizeObserver())},updated:function(){this.showNavigators&&this.updateButtonState()},beforeUnmount:function(){this.unbindResizeObserver()},methods:{onScroll:function(t){this.showNavigators&&this.updateButtonState(),t.preventDefault()},onPrevButtonClick:function(){var t=this.$refs.content,n=this.getVisibleButtonWidths(),y=je(t)-n,m=Math.abs(t.scrollLeft),c=y*.8,d=m-c,V=Math.max(d,0);t.scrollLeft=et(t)?-1*V:V},onNextButtonClick:function(){var t=this.$refs.content,n=this.getVisibleButtonWidths(),y=je(t)-n,m=Math.abs(t.scrollLeft),c=y*.8,d=m+c,V=t.scrollWidth-y,l=Math.min(d,V);t.scrollLeft=et(t)?-1*l:l},bindResizeObserver:function(){var t=this;this.resizeObserver=new ResizeObserver(function(){return t.updateButtonState()}),this.resizeObserver.observe(this.$refs.list)},unbindResizeObserver:function(){var t;(t=this.resizeObserver)===null||t===void 0||t.unobserve(this.$refs.list),this.resizeObserver=void 0},updateInkBar:function(){var t=this.$refs,n=t.content,y=t.inkbar,m=t.tabs;if(y){var c=Ke(n,'[data-pc-name="tab"][data-p-active="true"]');this.$pcTabs.isVertical()?(y.style.height=St(c)+"px",y.style.top=Se(c).top-Se(m).top+"px"):(y.style.width=At(c)+"px",y.style.left=Se(c).left-Se(m).left+"px")}},updateButtonState:function(){var t=this.$refs,n=t.list,y=t.content,m=y.scrollTop,c=y.scrollWidth,d=y.scrollHeight,V=y.offsetWidth,l=y.offsetHeight,w=Math.abs(y.scrollLeft),A=[je(y),It(y)],_=A[0],b=A[1];this.$pcTabs.isVertical()?(this.isPrevButtonEnabled=m!==0,this.isNextButtonEnabled=n.offsetHeight>=l&&parseInt(m)!==d-b):(this.isPrevButtonEnabled=w!==0,this.isNextButtonEnabled=n.offsetWidth>=V&&parseInt(w)!==c-_)},getVisibleButtonWidths:function(){var t=this.$refs,n=t.prevButton,y=t.nextButton,m=0;return this.showNavigators&&(m=((n==null?void 0:n.offsetWidth)||0)+((y==null?void 0:y.offsetWidth)||0)),m}},computed:{templates:function(){return this.$pcTabs.$slots},activeValue:function(){return this.$pcTabs.d_value},showNavigators:function(){return this.$pcTabs.scrollable&&this.$pcTabs.showNavigators},prevButtonAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.previous:void 0},nextButtonAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.next:void 0},dataP:function(){return qe({scrollable:this.$pcTabs.scrollable})}},components:{ChevronLeftIcon:Mt,ChevronRightIcon:Rt},directives:{ripple:ut}},mn=["data-p"],bn=["aria-label","tabindex"],gn=["data-p"],yn=["aria-orientation"],_n=["aria-label","tabindex"];function wn(e,t,n,y,m,c){var d=ct("ripple");return i(),h("div",Z({ref:"list",class:e.cx("root"),"data-p":c.dataP},e.ptmi("root")),[c.showNavigators&&m.isPrevButtonEnabled?Pe((i(),h("button",Z({key:0,ref:"prevButton",type:"button",class:e.cx("prevButton"),"aria-label":c.prevButtonAriaLabel,tabindex:c.$pcTabs.tabindex,onClick:t[0]||(t[0]=function(){return c.onPrevButtonClick&&c.onPrevButtonClick.apply(c,arguments)})},e.ptm("prevButton"),{"data-pc-group-section":"navigator"}),[(i(),X(ke(c.templates.previcon||"ChevronLeftIcon"),Z({"aria-hidden":"true"},e.ptm("prevIcon")),null,16))],16,bn)),[[d]]):O("",!0),a("div",Z({ref:"content",class:e.cx("content"),onScroll:t[1]||(t[1]=function(){return c.onScroll&&c.onScroll.apply(c,arguments)}),"data-p":c.dataP},e.ptm("content")),[a("div",Z({ref:"tabs",class:e.cx("tabList"),role:"tablist","aria-orientation":c.$pcTabs.orientation||"horizontal"},e.ptm("tabList")),[he(e.$slots,"default"),a("span",Z({ref:"inkbar",class:e.cx("activeBar"),role:"presentation","aria-hidden":"true"},e.ptm("activeBar")),null,16)],16,yn)],16,gn),c.showNavigators&&m.isNextButtonEnabled?Pe((i(),h("button",Z({key:1,ref:"nextButton",type:"button",class:e.cx("nextButton"),"aria-label":c.nextButtonAriaLabel,tabindex:c.$pcTabs.tabindex,onClick:t[2]||(t[2]=function(){return c.onNextButtonClick&&c.onNextButtonClick.apply(c,arguments)})},e.ptm("nextButton"),{"data-pc-group-section":"navigator"}),[(i(),X(ke(c.templates.nexticon||"ChevronRightIcon"),Z({"aria-hidden":"true"},e.ptm("nextIcon")),null,16))],16,_n)),[[d]]):O("",!0)],16,mn)}ht.render=wn;var kn={root:function(t){var n=t.instance,y=t.props;return["p-tab",{"p-tab-active":n.active,"p-disabled":y.disabled}]}},xn=ye.extend({name:"tab",classes:kn}),$n={name:"BaseTab",extends:Te,props:{value:{type:[String,Number],default:void 0},disabled:{type:Boolean,default:!1},as:{type:[String,Object],default:"BUTTON"},asChild:{type:Boolean,default:!1}},style:xn,provide:function(){return{$pcTab:this,$parentInstance:this}}},mt={name:"Tab",extends:$n,inheritAttrs:!1,inject:["$pcTabs","$pcTabList"],methods:{onFocus:function(){this.$pcTabs.selectOnFocus&&this.changeActiveValue()},onClick:function(){this.changeActiveValue()},onKeydown:function(t){switch(t.code){case"ArrowRight":this.onArrowRightKey(t);break;case"ArrowLeft":this.onArrowLeftKey(t);break;case"Home":this.onHomeKey(t);break;case"End":this.onEndKey(t);break;case"PageDown":this.onPageDownKey(t);break;case"PageUp":this.onPageUpKey(t);break;case"Enter":case"NumpadEnter":case"Space":this.onEnterKey(t);break}},onArrowRightKey:function(t){var n=this.findNextTab(t.currentTarget);n?this.changeFocusedTab(t,n):this.onHomeKey(t),t.preventDefault()},onArrowLeftKey:function(t){var n=this.findPrevTab(t.currentTarget);n?this.changeFocusedTab(t,n):this.onEndKey(t),t.preventDefault()},onHomeKey:function(t){var n=this.findFirstTab();this.changeFocusedTab(t,n),t.preventDefault()},onEndKey:function(t){var n=this.findLastTab();this.changeFocusedTab(t,n),t.preventDefault()},onPageDownKey:function(t){this.scrollInView(this.findLastTab()),t.preventDefault()},onPageUpKey:function(t){this.scrollInView(this.findFirstTab()),t.preventDefault()},onEnterKey:function(t){this.changeActiveValue(),t.preventDefault()},findNextTab:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,y=n?t:t.nextElementSibling;return y?Ae(y,"data-p-disabled")||Ae(y,"data-pc-section")==="activebar"?this.findNextTab(y):Ke(y,'[data-pc-name="tab"]'):null},findPrevTab:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,y=n?t:t.previousElementSibling;return y?Ae(y,"data-p-disabled")||Ae(y,"data-pc-section")==="activebar"?this.findPrevTab(y):Ke(y,'[data-pc-name="tab"]'):null},findFirstTab:function(){return this.findNextTab(this.$pcTabList.$refs.tabs.firstElementChild,!0)},findLastTab:function(){return this.findPrevTab(this.$pcTabList.$refs.tabs.lastElementChild,!0)},changeActiveValue:function(){this.$pcTabs.updateValue(this.value)},changeFocusedTab:function(t,n){Bt(n),this.scrollInView(n)},scrollInView:function(t){var n;t==null||(n=t.scrollIntoView)===null||n===void 0||n.call(t,{block:"nearest"})}},computed:{active:function(){var t;return Nt((t=this.$pcTabs)===null||t===void 0?void 0:t.d_value,this.value)},id:function(){var t;return"".concat((t=this.$pcTabs)===null||t===void 0?void 0:t.$id,"_tab_").concat(this.value)},ariaControls:function(){var t;return"".concat((t=this.$pcTabs)===null||t===void 0?void 0:t.$id,"_tabpanel_").concat(this.value)},attrs:function(){return Z(this.asAttrs,this.a11yAttrs,this.ptmi("root",this.ptParams))},asAttrs:function(){return this.as==="BUTTON"?{type:"button",disabled:this.disabled}:void 0},a11yAttrs:function(){return{id:this.id,tabindex:this.active?this.$pcTabs.tabindex:-1,role:"tab","aria-selected":this.active,"aria-controls":this.ariaControls,"data-pc-name":"tab","data-p-disabled":this.disabled,"data-p-active":this.active,onFocus:this.onFocus,onKeydown:this.onKeydown}},ptParams:function(){return{context:{active:this.active}}},dataP:function(){return qe({active:this.active})}},directives:{ripple:ut}};function Tn(e,t,n,y,m,c){var d=ct("ripple");return e.asChild?he(e.$slots,"default",{key:1,dataP:c.dataP,class:ue(e.cx("root")),active:c.active,a11yAttrs:c.a11yAttrs,onClick:c.onClick}):Pe((i(),X(ke(e.as),Z({key:0,class:e.cx("root"),"data-p":c.dataP,onClick:c.onClick},c.attrs),{default:H(function(){return[he(e.$slots,"default")]}),_:3},16,["class","data-p","onClick"])),[[d]])}mt.render=Tn;const Dn={class:"fixed top-0 left-0 w-full bg-primary-reverse",style:{"z-index":"10"}},Cn={class:"grid mt-1 ml-1"},In={class:"max-w-3rem flex align-items-center"},Sn=["src"],An={class:"flex align-items-center"},Nn={key:0,class:"text-color font-bold p-1"},Bn={key:1,class:"text-color font-bold p-1"},Pn={class:"card flex mr-3 flex align-items-center",style:{"margin-left":"auto"}},Ln={style:{display:"flex","align-items":"center"}},qn={style:{"flex-grow":"1",width:"0",overflow:"hidden"}},zn={class:"mt-2"},On={class:"flex justify-content-end mt-2"},En={class:"flex inline-flex items-center justify-center gap-2"},Mn={class:"flex align-items-center"},Rn={class:"flex flex-column"},jn={class:"text-sm p-2"},Vn={class:"text-sm p-2"},Fn={class:"flex items-center gap-4 mb-4 p-2"},Hn={class:"flex flex-column gap-3"},Kn={__name:"HeaderTabs",props:{types:Array,typeIndex:Number,tableId:String,tabItems:Array},emits:["clickType","switchToWelcome"],setup(e,{emit:t}){const{t:n}=pe(),y=R(!1);function m(){var L;const z=S.currentPage.value,N=(L=z==null?void 0:z.data)==null?void 0:L.logoPath;return N?S.pathFormated(N,z.imagesPath):"/images/logo_logo.png"}function c(){return S.getTable()}const d=R(),V=ve(()=>[{label:n("common.options"),items:[{label:n("common.pay"),icon:"pi pi-wallet",command:()=>{W()}},{label:n("common.call"),icon:"pi pi-user-plus",command:()=>{S.send_cmd(c(),{cmd:"call"},z=>{z.success?le.show_info(n("notification.call_msg")):le.show_warn(z.data)})}}]}]),l=z=>{d.value.toggle(z)},w=z=>{A.value.toggle(z)},A=R(),_=R(!1),b=R(),q=R();function W(){_.value=!0}function U(){z(b.value)?S.send_cmd(c(),{cmd:"pay",nif:b.value,note:q.value},N=>{N.success?(le.show_info(n("notification.pay_msg")),_.value=!1):le.show_error(n("common.failed"))}):le.show_warn(n("notification.cancel_msg"));function z(N){return!N||N.toString().length===9||N.toString().length===0}}function Q(){q.value&&(q.value=void 0)}function E(){y.value=!0}return(z,N)=>(i(),h(G,null,[a("div",Dn,[a("div",Cn,[a("div",In,[a("img",{src:m(),class:"w-full",clickble:"",onClick:N[0]||(N[0]=()=>z.$emit("switchToWelcome"))},null,8,Sn)]),a("div",An,[e.tableId?(i(),h("p",Nn,v(z.$t("common.table"))+": "+v(e.tableId),1)):O("",!0),e.tableId?O("",!0):(i(),h("p",Bn,v(z.$t("common.takeAway")),1))]),a("div",Pn,[e.tableId?(i(),X(o(J),{key:0,icon:"pi pi-bell",rounded:"","aria-label":"Filter",onClick:l,"aria-haspopup":"true","aria-controls":"overlay_menu"})):(i(),X(o(J),{key:1,icon:"pi pi-question",rounded:"",onClick:E})),P(o(nt),{ref_key:"menu",ref:d,id:"overlay_menu",model:V.value,popup:!0},null,8,["model"])])]),a("div",Ln,[a("div",null,[P(o(J),{icon:"pi pi-bars",variant:"text",rounded:"","aria-label":"Filter",onClick:w,"aria-haspopup":"true","aria-controls":"tab_menu"}),P(o(nt),{ref_key:"tabMenu",ref:A,id:"tab_menu",model:e.tabItems,popup:!0},null,8,["model"])]),a("div",qn,[P(o(vt),{value:e.typeIndex,scrollable:"",showNavigators:!1},{default:H(()=>[P(o(ht),null,{default:H(()=>[(i(!0),h(G,null,ne(e.types,(L,M)=>(i(),X(o(mt),{value:M,onClick:()=>z.$emit("clickType",M),class:"text-sm md:text-lg lg:text-xl"},{default:H(()=>[be(v(L),1)]),_:2},1032,["value","onClick"]))),256))]),_:1})]),_:1},8,["value"])])])]),P(o(ge),{visible:_.value,"onUpdate:visible":N[4]||(N[4]=L=>_.value=L),header:"结账",class:"flex flex-column",modal:!0,dismissableMask:!0,onHide:Q},{default:H(()=>[a("div",null,[N[6]||(N[6]=a("label",null,"NIF:",-1)),P(o(jt),{modelValue:b.value,"onUpdate:modelValue":N[1]||(N[1]=L=>b.value=L),inputId:"withoutgrouping",useGrouping:!1,fluid:"",class:"w-full m-1"},null,8,["modelValue"])]),a("div",zn,[a("label",null,v(z.$t("common.note"))+":",1),P(o(dt),{type:"text",modelValue:q.value,"onUpdate:modelValue":N[2]||(N[2]=L=>q.value=L),class:"w-full m-1"},null,8,["modelValue"])]),a("div",On,[P(o(J),{label:o(n)("common.send"),onClick:N[3]||(N[3]=L=>U())},null,8,["label"])])]),_:1},8,["visible"]),P(o(ge),{visible:y.value,"onUpdate:visible":N[5]||(N[5]=L=>y.value=L),modal:"",dismissableMask:"",class:"h-full",style:{width:"90vw",maxWidth:"40rem",minWidth:"20rem"},draggable:!1},{header:H(()=>[a("div",En,[P(o(Ge),{icon:"pi pi-question",shape:"circle"}),a("span",Mn,v(o(n)("takeawayHelper.dialogTitle")),1)])]),default:H(()=>[a("div",Rn,[a("span",jn,v(o(n)("takeawayHelper.introduction")),1),a("span",Vn,v(o(n)("takeawayHelper.note_t"))+" "+v(o(n)("takeawayHelper.note_1")),1),a("div",Fn,[P(o(Je),{class:"w-full max-w-xl mx-auto"},{default:H(()=>[P(o(Ue),{value:"0"},{default:H(()=>[P(o(We),{class:"text-sm"},{default:H(()=>[be(v(o(n)("takeawayHelper.question_1")),1)]),_:1}),P(o(Qe),{class:"p-1"},{default:H(()=>[a("div",Hn,[a("span",null,v(o(n)("takeawayHelper.q_1_request_1")),1),a("span",null,v(o(n)("takeawayHelper.q_1_request_2")),1),a("span",null,v(o(n)("takeawayHelper.q_1_request_3")),1),a("span",null,v(o(n)("takeawayHelper.q_1_request_4")),1),a("span",null,v(o(n)("takeawayHelper.q_1_request_5")),1)])]),_:1})]),_:1})]),_:1})])])]),_:1},8,["visible"])],64))}},Un={__name:"SwipeHint",props:{size:{type:String,default:"8rem"},duration:{type:Number,default:6e3},position:{type:String,default:"bottom"}},setup(e){const t=e,n=R(!0);ze(()=>{t.duration>0&&setTimeout(()=>{n.value=!1},t.duration);const m=()=>{n.value=!1,window.removeEventListener("touchstart",m)};window.addEventListener("touchstart",m)});const y=ve(()=>{let m={left:"50%",transform:"translateX(-50%)",zIndex:99999,opacity:.5,pointerEvents:"none",textAlign:"center",position:"fixed"};return t.position==="top"?m.top="15%":t.position==="center"?(m.top="50%",m.transform="translate(-50%, -50%)"):m.bottom="15%",m});return(m,c)=>n.value?(i(),h("div",{key:0,class:"swipe-hint",style:Be(y.value)},[a("div",{class:"hand",style:Be({width:e.size,height:e.size,backgroundImage:"url(/images/hand_finger.png)"})},null,4)],4)):O("",!0)}},Wn=De(Un,[["__scopeId","data-v-e5f3ff45"]]),Qn={class:"w-full h-full flex flex-column p-1"},Jn={class:"swiper-container-wrapper"},Gn={class:"fixed bottom-0 left-0 w-full h-3rem bg-primary-reverse p-3 z-[9999]"},Zn={class:"h-full flex align-items-center justify-content-between w-full"},Xn={class:"m-2"},Yn={key:0,class:"m-2"},eo={class:"m-2"},to={style:{"max-height":"60vh","overflow-y":"auto","padding-bottom":"60px"}},ao={class:"flex flex-column border-bottom-1"},so={key:0,class:"flex justify-content-between"},no={class:"flex flex-column"},oo={class:"font-bold"},io={class:"text-right"},lo={key:1,class:"flex justify-content-between"},ro={class:"flex flex-column"},uo={class:"font-bold"},co={class:"text-right"},fo={key:0},po={key:1,class:"flex flex-column"},vo={class:"flex flex-column"},ho={class:"font-bold"},mo={class:"text-right"},bo={class:"total-footer bg-primary-reverse"},lt=5,Ne="order_time_key",go={__name:"HomePage",setup(e){const t=rt(),n=Lt(),{t:y}=pe(),{locale:m}=pe(),c=R(0),d=R(!1),V=R([""]),l=R(0),w=re.cartItemCount,A=R(!1),_=R([]),b=R(0),q=R({}),W=R(!1),U=ee.dishDatas,Q=R(S.getOrderMenuTab()),E=R(null),z=R(null),N=R([]),L=R([]),M=R([]),u=R(!1);let s=null;const f=r=>{l.value=r.activeIndex,fe()},x=r=>{s=r};Ve(l,r=>{s&&s.activeIndex!==r&&s.slideTo(r);let p=S.getOrderMenuTab()[r];S.customDishAPI.customDishes.value.map(C=>C.name).includes(p)?(W.value=!0,q.value=S.customDishAPI.customDishes.value.find(C=>C.name==p)):W.value=!1});const k=(r,p,B,C)=>{S.rateDish(r,p,B),C&&le.show_success(y("notification.rating_submitted"))},T=(r,p,B)=>{if(q.value.name=="XIAOXIONG® RAMEN"&&r.id===1){const C=r.dishes[p];let K;C.dishid==47?B?K=g(3,!0,1):K=g(3,!1,1):K=g(3,!0,1),K!==void 0&&F(K)}if(q.value.name=="Menu Almoço"&&r.id===3){const C=r.dishes[p];let K;[1427,41].includes(C.dishid)?B?K=g(4,!0,0):K=g(4,!1,0):K=g(4,!0,0),K!==void 0&&F(K)}};function g(r,p,B){if(q.value={...q.value,types:q.value.types.map(C=>C.id===r?{...C,enable:p,minQuantity:p?B:0}:C)},p===!1)return r}function F(r){!q.value||!Array.isArray(q.value.types)||(q.value={...q.value,types:q.value.types.map(p=>p.id===r?{...p,dishes:p.dishes.map(B=>({...B,selected:!1}))}:p)})}function I(r){let p=S.getOrderMenuTab()[r];if(S.customDishAPI.customDishes.value.map(ae=>ae.name).includes(p)?(W.value=!0,q.value=S.customDishAPI.customDishes.value.find(ae=>ae.name==p)):W.value=!1,S.getMenu().length==0){console.log("exit");return}let K=U.value[r].mainDishes;ee.showDishList(K)}const $=()=>{S.refreshTableFromServer(),S.getTableTotalAmount(b),A.value=!0},D=(r,p,B)=>{},te=r=>{let p=r.id;r.org_id&&(p=r.org_id);for(let B=0;B<U.value.length;B++)if(U.value[B].id==p)for(const C in r){let K=C;C.startsWith("note")&&(K=K.replace("note","description")),U.value[B][K]=r[C]}};function j(){return new Promise(r=>{let p=()=>{const B=S.formatedMenu.value;B.length>0?r(B):setTimeout(p,200)};p()})}const Y=ve(()=>r=>{const p=S.dictinaryAPI.dictinary.value[r];return p?p[`text_${m.value.toLowerCase()}`]:r});Ve([()=>S.formatedMenu.value,()=>m.value],([r,p])=>{if(!r||r.length===0){M.value=[];return}const B={};S.orderMenuTab.value;const C=r.map(me=>({...me,mainDishes:me.dishes.map(oe=>{const ie=oe.dish;if(B[ie.id])return B[ie.id];const _e={...ie,defaultName:ie.name,defaultSubname:ie.subname,name:se(ie,"name",p),note:se(ie,"note",p),subname:se(ie,"subname",p),quantity:0},xt=oe.subItems.map(Ye=>{const Re=Ye;return{...Ye,defaultName:ie.name,defaultSubname:ie.subname,name:se(Re,"name",p),note:se(Re,"note",p),subname:se(Re,"subname",p),quantity:0}}),Me={...oe,dish:_e,subItems:xt};return B[Me.id]=Me,Me})}));U.value.length;const K=ee.getAllIncrementedDish();ee.getIdsAndQuantity(K);const ae=re.cartDishs.value;He.compressToEncodedURIComponent(JSON.stringify(ae)),M.value=C,U.value=M.value,V.value=S.orderMenuTab.value,(K.length>0||ae.length>0)&&(ee.cleanDishDataQty(),ee.updateDishDataQty(K)),S.filterMenuTabs(u.value),console.log("languagedMenu updated via watch:",M.value),tt(()=>{c.value++,s&&typeof s.update=="function"&&(s.update(),s.slideTo(l.value))})},{immediate:!0,deep:!0}),Ve(()=>S.orderMenuTab.value,r=>{Q.value=r.map(p=>{const B=S.dictinaryAPI.dictinary.value[p];return B?B[`text_${m.value.toLowerCase()}`]:p}),_.value=[];for(let p=0;p<r.length;p++){const B=p;_.value.push({label:Y.value(r[p]),command:()=>{Ze(B),fe()}})}l.value=0});function se(r,p,B){return r?B==="en"?r[`${p}_en`]||r[p]:B==="zh"&&r[`${p}_cn`]||r[p]:""}async function de(){await j(),S.onMenuItemChanged=te,S.onRatingChanged=D,kt()}const fe=()=>{tt(()=>{const r=document.querySelector(".p-tablist-viewport"),p=document.querySelector(".p-tab.p-tab-active");if(r&&p){const B=p.offsetLeft-r.offsetWidth/2+p.offsetWidth/2;r.scrollTo({left:B,behavior:"smooth"})}window.scrollTo({top:0,behavior:"smooth"})})},Ze=r=>{I(r),l.value=r,fe()},bt=()=>{var r=ee.getAllIncrementedDish();z.value.showDishList(r)};function Oe(){return S.getTable()}S.params.port,E.value=S.table.value.order;function gt(r){var p=y("notification.too_fast",{remainTime:r});le.show_warn(p)}const yt=(r,p)=>{const B=[];for(let oe=0;oe<re.cartDishs.value.length;oe++){var C=re.cartDishs.value[oe];const ie=S.formateCustomDishNotes(C),_e=C.dis_count?C.dis_price:C.price;B.push({dishid:C.dishid,name:C.name,quantity:C.count,notes:ie,limit:C.limit,price:_e,dishNote:C.dishNote,category:C.category})}const K=ee.getAllIncrementedDish();for(let oe=0;oe<K.length;oe++){var C=K[oe];if(C.quantity>0){const _e=C.dis_count?C.dis_price:C.price;B.push({dishid:C.id,name:C.defaultName,quantity:C.quantity,limit:C.limit,price:_e,dishNote:C.dishNote})}}if(B.length===0)return le.show_warn(y("notification.select_at_least_one")),!1;console.log("cart item:",B);const ae=JSON.parse(ce.getCookie(Ne)||"{}"),me=Date.now();if(!ae.startTime||me-ae.startTime>lt*1e3)ae.startTime=me,ae.uniCode||(ae.uniCode=Date.now().toString(36)+Math.random().toString(36).substring(2,5));else{const oe=lt-parseInt((me-ae.startTime)/1e3);gt(oe);return}return ce.setCookie(Ne,JSON.stringify(ae)),d.value=!0,S.submit_order({uniCode:ae.uniCode,name:r.name,note:r.note,table:Oe(),items:B},oe=>{const ie=JSON.parse(ce.getCookie(Ne)||"{}");ie.uniCode=void 0,ce.setCookie(Ne,JSON.stringify(ie)),p(oe)}),!0};function _t(){const r=ce.getCookie("language");r&&(m.value=r)}function Xe(){for(let r=0;r<U.value.length;r++){const p=U.value[r];p.quantity=0}d.value=!1,re.cleanAll()}ze(async()=>{_t(),await de(),I(l.value),S.clear_order_data=()=>{Xe()},S.setOnOrderConfirmed(r=>{Xe();const p=r;le.show_success(y("notification.order_submitted",{id:p}))}),S.setOnShowError(r=>{d.value=!1,le.show_error(r)})});function wt(){ce.deleteCookie("login_time");const r=n.query.table;r?t.push({path:"/",query:{table:r}}):t.push({path:"/takeReserve"})}function Ce(r,p=!0){const B=p?re.cartDishs.value:ee.getIdsAndQuantity(ee.getAllIncrementedDish()),C=He.compressToEncodedURIComponent(JSON.stringify(B));ce.setCookie(r,C)}function Ee(){S.isTakeaway()?(Ce("take_cartDish_normal",!1),Ce("take_cartDish_custom",!0)):(Ce("cartDish_normal",!1),Ce("cartDish_custom",!0))}function Ie(r,p=!0){const B=ce.getCookie(r);if(!B)return;const C=JSON.parse(He.decompressFromEncodedURIComponent(B));if(C&&C!=="undefined")try{p?re.cartDishs.value=C:ee.updateDishDataQty(C)}catch(K){console.error("解析菜失败:",K)}}function kt(){S.isTakeaway()?(Ie("take_cartDish_normal",!1),Ie("take_cartDish_custom")):(Ie("cartDish_normal",!1),Ie("cartDish_custom"))}return Pt(()=>{Ee()}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&Ee()}),window.addEventListener("beforeunload",r=>{Ee(),S.cleanup()}),(r,p)=>(i(),h(G,null,[a("div",Qn,[(i(),X(Kn,{key:c.value,types:Q.value,typeIndex:l.value,tabItems:_.value,tableId:Oe(),onClickType:Ze,onSwitchToWelcome:wt},null,8,["types","typeIndex","tabItems","tableId"])),p[4]||(p[4]=a("div",{class:"pb-8"},null,-1)),p[5]||(p[5]=a("div",{class:"pb-4 sm:pb-5 md:pb-5 lg:pb-5"},null,-1)),P(Wn,{duration:3e3,position:"center",size:"3rem"}),a("div",Jn,[(i(),X(o(zt),{key:`swiper-${Q.value.length}-${c.value}`,"space-between":20,"centered-slides":"","grab-cursor":!0,class:"w-full",autoHeight:!0,onSlideChange:f,onSwiper:x,"initial-slide":l.value},{default:H(()=>[(i(!0),h(G,null,ne(Q.value,(B,C)=>(i(),X(o(Ot),{key:C},{default:H(()=>[Math.abs(l.value-C)<=1&&(!W.value||l.value!==C)?(i(),X(Xa,{key:0,rateDish:k,likedItemsRef:N.value,dislikedItemsRef:L.value,tabIndex:C,onlyVeg:u.value},null,8,["likedItemsRef","dislikedItemsRef","tabIndex","onlyVeg"])):Math.abs(l.value-C)<=1&&W.value&&l.value===C?(i(),X(ln,{key:1,currentCustomDish:q.value,onTypeClick:T,tabindex:C},null,8,["currentCustomDish","tabindex"])):O("",!0)]),_:2},1024))),128))]),_:1},8,["initial-slide"]))]),p[6]||(p[6]=a("div",{style:{height:"60px"}},null,-1)),a("div",Gn,[a("div",Zn,[a("div",Xn,[o(S).isTakeaway()?O("",!0):(i(),X(o(J),{key:0,label:r.$t("common.orders"),icon:"pi pi-list",class:"p-button-secondary",onClick:$},null,8,["label"]))]),o(S).developmentEnvironment.value?(i(),h("div",Yn,[P(o(qt),{class:"text-sm",modelValue:u.value,"onUpdate:modelValue":p[0]||(p[0]=B=>u.value=B),onLabel:o(y)("common.showAll"),offLabel:o(y)("common.showOnlyVegetables"),onClick:p[1]||(p[1]=B=>o(S).filterMenuTabs(u.value))},null,8,["modelValue","onLabel","offLabel"])])):O("",!0),a("div",eo,[P(o(pt),{value:o(w),severity:"danger",onClick:bt},{default:H(()=>p[3]||(p[3]=[a("i",{class:"pi pi-shopping-cart",style:{"font-size":"2rem"}},null,-1)])),_:1,__:[3]},8,["value"])])])])]),P(Is,{ref_key:"cartRef",ref:z,checkout:yt,isTakeaway:!Oe()},null,8,["isTakeaway"]),P(o(ge),{visible:A.value,"onUpdate:visible":p[2]||(p[2]=B=>A.value=B),header:r.$t("common.completedOrders"),modal:"",style:{width:"80vw","max-width":"700px"}},{default:H(()=>{var B,C;return[a("div",to,[a("div",ao,[(B=b.value.adultPrice)!=null&&B.quantity&&b.value.adultPrice.quantity!=0?(i(),h("div",so,[a("div",no,[a("span",oo,v(r.$t("common.adult")),1),a("small",null,v(r.$t("common.quantity"))+": "+v(b.value.adultPrice.quantity),1)]),a("div",io,[a("span",null,"€"+v((Number(b.value.adultPrice.price)*b.value.adultPrice.quantity).toFixed(2)),1)])])):O("",!0),(C=b.value.childrenPrice)!=null&&C.quantity&&b.value.childrenPrice.quantity!=0?(i(),h("div",lo,[a("div",ro,[a("span",uo,v(r.$t("common.children")),1),a("small",null,v(r.$t("common.quantity"))+": "+v(b.value.childrenPrice.quantity),1)]),a("div",co,[a("span",null,"€"+v((Number(b.value.childrenPrice.price)*b.value.childrenPrice.quantity).toFixed(2)),1)])])):O("",!0)]),o(S).table.value.order.length===0?(i(),h("div",fo,v(r.$t("common.noOrders")),1)):(i(),h("div",po,[(i(!0),h(G,null,ne(o(S).table.value.order,(K,ae)=>(i(),h("div",{key:ae,class:"flex justify-content-between border-bottom-1 pb-2"},[a("div",vo,[a("span",ho,v(o(S).getDishName(K)),1),a("small",null,v(r.$t("common.quantity"))+": "+v(K.quantity),1)]),a("div",mo,[a("span",null,"€"+v((K.price*K.quantity).toFixed(2)),1)])]))),128))]))]),a("div",bo,v(r.$t("common.total"))+": €"+v(b.value.total),1)]}),_:1},8,["visible","header"])],64))}},No=De(go,[["__scopeId","data-v-f5dc0f0e"]]);export{No as default};
