import{b as T}from"./index-BeaxIiuH.js";import{s as V,a as B}from"./index-BErC_-bx.js";import{s as D,a as S}from"./index-IaYbvaGp.js";import{s as $}from"./index-kh3dBY8j.js";import{q as j,x as z,n as P,h as _,s as O,c as x,a as t,d as n,w as d,l as s,F as q,o as w,z as E,t as o,C as G,e as U,G as A}from"./index-Bmw8MK5p.js";import{s as H}from"./index-BBOh56sl.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-BRLIeuRp.js";import"./index-DEfDjPYe.js";import"./index-DUQe1Nvi.js";import"./index-BkLYGi7W.js";import"./index-Dn6PED0S.js";import"./index-CQZxu_9o.js";import"./index-Bg7mYsmp.js";const J={class:"card h-full",style:{display:"flex","flex-direction":"column"}},L={class:"flex flex-wrap gap-2 items-center justify-between"},Q={class:"m-0 font-bold text-2xl text-left flex-grow-1"},W={class:"flex gap-2 mt-1"},X={class:"font-bold"},Y={class:"font-bold text-green-800"},Z={class:"font-bold text-blue-800"},ee={class:"font-bold text-red-800"},te={class:"text-center py-5"},se={class:"mt-3 text-gray-500"},ae={class:"flex flex-column gap-2"},le={key:0,class:"text-red-600"},oe={class:"font-bold text-lg"},re={class:"font-bold text-lg"},ne={class:"font-bold text-lg"},ce={class:"flex justify-content-end"},de={__name:"ReserverPage",setup(ie){const{t:e}=j(),y=z(),m=P.tableReserves,a=_(),p=_(!1);function C(l){a.value=l.data,p.value=!0}const g=_({global:{value:null,matchMode:A.CONTAINS}}),h=O(()=>{const l=a.value.status;return l=="processing"?{label:e("reserverPage.processing")+"...",outlined:!0}:l=="voided"?{label:e("orderPage.voided"),outlined:!0}:{label:e("reserverPage.cancelReserve"),outlined:!1}});function R(){a.value.status=="processing"||a.value.status=="voided"||y.require({message:e("reserverPage.reserveCancellationMSG"),header:e("reserverPage.cancelReserve")+":"+a.value.name,rejectProps:{label:e("common.cancel"),severity:"secondary",outlined:!0},acceptProps:{label:e("common.confirm"),severity:"danger"},accept:()=>{P.cancelReserve({...a.value,status:"processing"},l=>{l.success?(a.value.status=l.data.status,p.value=!1):console.log("Cancellation Error:",l.data)})},reject:()=>{}})}function v(l){const r=m.value.filter(i=>i.financial_status==="voided"||i.status==="voided").length,f=m.value.filter(i=>i.status==="new"||i.status==="confirmed").length;switch(l){case"completed":return m.value.length-r-f;case"voided":return r;case"unCompleted":return f;default:return m.value.length}}const N=l=>({completed:"status-completed",confirmed:"status-confirmed",processing:"status-processing",new:"status-new",voided:"status-voided"})[l]||"",I=l=>({completed:e("orderPage.completed"),confirmed:e("orderPage.confirmed"),processing:e("reserverPage.processing"),new:e("orderPage.new"),voided:e("orderPage.voided")})[l]||l;return(l,r)=>{var b;const f=S,i=$,M=D,u=B,k=V,F=T;return w(),x(q,null,[t("div",J,[n(k,{value:s(m),tableStyle:"min-width: 50rem",dataKey:"id",paginator:"",rows:10,rowsPerPageOptions:[10,20,50],stripedRows:"",filters:g.value,scrollable:"",scrollHeight:"flex",onRowClick:C,selectionMode:"single"},{header:d(()=>[t("div",L,[t("h4",Q,o(s(e)("reserverPage.header")),1),n(M,null,{default:d(()=>[n(f,null,{default:d(()=>r[2]||(r[2]=[t("i",{class:"pi pi-search"},null,-1)])),_:1,__:[2]}),n(i,{modelValue:g.value.global.value,"onUpdate:modelValue":r[0]||(r[0]=c=>g.value.global.value=c),placeholder:s(e)("orderPage.find")},null,8,["modelValue","placeholder"])]),_:1})]),t("div",W,[t("label",X,"订台总数:"+o(v("all")),1),t("label",Y,"订台完成数:"+o(v("completed")),1),t("label",Z,"订台未完成数:"+o(v("unCompleted")),1),t("label",ee,"订台取消数:"+o(v("voided")),1)])]),empty:d(()=>[t("div",te,[r[3]||(r[3]=t("i",{class:"pi pi-search",style:{"font-size":"3rem",color:"#ccc"}},null,-1)),t("p",se,o(s(e)("orderPage.notFound")),1)])]),default:d(()=>[n(u,{header:s(e)("orderPage.status")},{body:d(({data:c})=>[t("span",{class:E(["status-badge",N(c.status||"new")])},o(I(c.status||"new")),3)]),_:1},8,["header"]),n(u,{field:"name",header:"ID",sortable:""}),n(u,{field:"date",header:s(e)("reserverPage.dateTime"),sortable:""},{body:d(({data:c})=>[G(o(c.date+" "+c.time),1)]),_:1},8,["header"]),n(u,{field:"customerName",header:s(e)("reserverPage.customerName")},null,8,["header"]),n(u,{field:"numberPeople",header:s(e)("reserverPage.numberPeople")},null,8,["header"]),n(u,{field:"phone",header:s(e)("reserverPage.phone")},null,8,["header"]),n(u,{field:"note",header:s(e)("reserverPage.note")},null,8,["header"])]),_:1},8,["value","filters"])]),n(s(H),{visible:p.value,"onUpdate:visible":r[1]||(r[1]=c=>p.value=c),header:s(e)("reserverPage.reserveDetails")+" (ID: "+((b=a.value)==null?void 0:b.name)+")",modal:"",style:{width:"450px"}},{default:d(()=>[t("div",ae,[a.value.financial_status||a.value.status==="voided"?(w(),x("label",le,o(a.value.financial_status?s(e)("reserverPage.cancelForClient"):s(e)("reserverPage.cancelForRestaurant")),1)):U("",!0),t("label",oe,o(s(e)("reserverPage.dateTime")+": "+a.value.date+" "+a.value.time),1),t("label",re,o(s(e)("reserverPage.customerName")+": "+a.value.customerName),1),t("label",ne,o(s(e)("reserverPage.numberPeople")+": "+a.value.numberPeople),1),t("label",null,o(s(e)("reserverPage.phone")+": "+a.value.phone),1),t("label",null,o(s(e)("reserverPage.email")+": "+a.value.email),1),t("label",null,o(s(e)("reserverPage.note")+": "+a.value.note),1),t("div",ce,[n(F,{label:h.value.label,outlined:h.value.outlined,onClick:R},null,8,["label","outlined"])])])]),_:1},8,["visible","header"])],64)}}},Re=K(de,[["__scopeId","data-v-e462152e"]]);export{Re as default};
