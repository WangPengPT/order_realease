import{s as se,_ as ae,S as oe,P as ne,a as ie}from"./pagination-2hWhYXdy.js";import{u as E,r as p,c as I,a as u,o as re,b as ue,w as ce,d as de,e as me,m as F,f as n,g as r,h as l,i as O,j as c,k as a,n as T,t as d,F as g,l as k,p as o,q as A,s as R}from"./index-DFTnrydr.js";import{s as pe}from"./index-Doa_Zj0_.js";import{s as h}from"./index-B6O2k509.js";import{_ as fe,s as ve,a as ge,b as he,c as _e}from"./_plugin-vue_export-helper-CoWY6WmA.js";import{s as be,a as we}from"./index-DMNSSLcp.js";import{s as xe}from"./index-COkLzru5.js";import{c as S}from"./cookie-DEduTsxr.js";import"./index-Dob2pnpl.js";import"./index-ebsmPk2R.js";const ke=["src"],ye=["onClick"],Ce=["src"],Pe={class:"absolute top-0 border-0 right-0 p-2 flex flex-column flex align-items-center"},$e={class:"m-3 max-w-screen"},Ne={key:0,class:T(["w-full","p-4"])},Ie=["src"],Fe={key:0,class:"text-center p-1"},Se={key:1,class:"text-center p-1"},Be={key:2},Le={class:"flex w-full"},Ve={class:"flex flex-column"},Oe={class:"w-full text-sm break-words whitespace-pre-wrap px-2"},Ae=["src"],Te={class:"pt-5 pb-5"},je={class:"border-400 border-round border-1 p-3"},ze={class:"text-center font-bold"},De={key:0,class:"w-full overflow-hidden"},qe=["src"],Ee={class:"w-full overflow-hidden",style:{"aspect-ratio":"2 / 1.5"}},Re=["src"],Ue={class:"font-bold"},Ge={class:"flex flex-column"},Me={class:"flex flex-row justify-content-between w-full"},We={key:0,class:"fixed right-0 bottom-0 p-4",style:{"z-index":"2"}},Xe={class:"mt-2"},He={class:"flex justify-content-end mt-2"},Je={__name:"Welcome",props:["switchTo"],setup(Ke){const _=[{label:"pt",imagePath:"flags/pt.png"},{label:"en",imagePath:"flags/en.png"},{label:"zh",imagePath:"flags/zh.png"}],U=me(),G=de(),{locale:b}=E(),{t:m}=E(),w=p(null),B=p(!0);p([]);const j=p(),M=I(()=>u.getPickupDate("restaurantName")),i=p({});function W(){const e=S.getCookie("language");e&&(b.value=e)}let y=null;function X(){return new Promise(e=>{let t=()=>{const s=u.currentPage.value;s&&Object.keys(s).length>0?e(s):setTimeout(t,200)};t()})}re(async()=>{var e;W(),await X(),i.value=u.currentPage.value,console.log("page :",i.value),y=new IntersectionObserver(t=>{t.forEach(s=>{s.isIntersecting?B.value=!0:B.value=!1})},{threshold:.1}),(e=w.value)!=null&&e.$el&&y.observe(w.value.$el)}),ue(()=>{var e;y&&((e=w.value)!=null&&e.$el)&&y.unobserve(w.value.$el)}),ce(()=>u.currentPage.value,e=>{e&&(i.value=e)},{immediate:!0});const H=I(()=>{const e="/";switch(b.value.toLowerCase()){case"pt":return e+_[0].imagePath;case"en":return e+_[1].imagePath;case"zh":return e+_[2].imagePath;default:return e+_[1].imagePath}});function f(e){return e[`text_${b.value.toLowerCase()}`]}const J=Date.now(),z=S.getCookie("login_time");let L;z&&(L=JSON.parse(z));const K=I(()=>_.filter(e=>e.label!==b.value.toLowerCase()).map(e=>({...e,command:()=>{b.value=e.label,Q(e.label)}})));function Q(e){S.getCookie("language",e)}function D(e){window.open(e,"_blank")}const Y=e=>{j.value.toggle(e)};L&&(J-L>60*5*1e3?S.clearAllCookies():V());function V(){const e=G.query.table;U.push({path:"/table",query:{table:e}})}const Z=I(()=>[{label:m("common.options"),items:[{label:m("common.pay"),icon:"pi pi-wallet",command:()=>{ee()}},{label:m("common.call"),icon:"pi pi-user-plus",command:()=>{u.send_cmd(u.getTable(),{cmd:"call"}),F.show_info(m("notification.call_msg"))}}]}]);function q(e){return i.value.data.options[e]?"font-bold":""}const C=p(!1),P=p(),x=p();function ee(){C.value=!0}function te(){e(P.value)?u.send_cmd(u.getTable(),{cmd:"pay",nif:P.value,note:x.value},t=>{t.success?(F.show_info(m("notification.pay_msg")),C.value=!1):F.show_error(m("common.failed"))}):F.show_warn(m("notification.cancel_msg"));function e(t){return!t||t.toString().length===9||t.toString().length===0}}function le(){x.value&&(x.value=void 0)}return(e,t)=>(o(),n(g,null,[r(a(se),{model:K.value,direction:"down",transitionDelay:80,class:"absolute top-0 left-0 border-0"},{button:c(({toggleCallback:s})=>[r(a(h),{outlined:"",onClick:s,class:"custom-clean-button"},{default:c(()=>[l("img",{src:H.value,style:{width:"38px",height:"38px"}},null,8,ke)]),_:2},1032,["onClick"])]),item:c(({item:s,toggleCallback:$})=>[l("div",{class:"flex flex-col items-center justify-between",onClick:$},[l("img",{src:s.imagePath,alt:"lang",style:{width:"38px",height:"38px"}},null,8,Ce)],8,ye)]),_:1},8,["model"]),l("div",Pe,[l("div",null,[r(a(h),{icon:"pi pi-bell",rounded:"","aria-label":"Filter",onClick:Y,"aria-haspopup":"true","aria-controls":"overlay_menu",size:"small",style:{width:"42px",height:"42px"}}),r(a(pe),{ref_key:"menu",ref:j,id:"overlay_menu",model:Z.value,popup:!0},null,8,["model"])]),l("div",null,[r(a(h),{icon:"pi pi-instagram",class:"custom-clean-button",onClick:t[0]||(t[0]=()=>{})})])]),l("div",$e,[i.value?(o(),n("div",Ne,[l("img",{src:a(u).pathFormated(i.value.data.logoPath,i.value.imagesPath),alt:"Logo",class:"max-w-6rem h-auto w-full mx-auto block"},null,8,Ie),i.value.data.restaurantName?(o(),n("h3",Fe,d(i.value.data.restaurantName),1)):(o(),n("h3",Se,d(M.value),1)),a(u).testEnvironment.value=="true"?(o(),n("h1",Be,"DEMO")):O("",!0)])):O("",!0),l("div",Le,[r(a(ve),{class:"w-full max-w-xl mx-auto"},{default:c(()=>[(o(!0),n(g,null,k(i.value.data.titles,(s,$)=>(o(),A(a(ge),{value:$},{default:c(()=>[r(a(he),null,{default:c(()=>[R(d(f(s.title)),1)]),_:2},1024),r(a(_e),{class:"p-1"},{default:c(()=>[l("div",Ve,[l("div",Oe,d(f(s.description)),1),l("img",{src:a(u).pathFormated(s.image.src,i.value.imagesPath),class:"max-w-5rem h-auto block mr-auto p-1 invert-image"},null,8,Ae)])]),_:2},1024)]),_:2},1032,["value"]))),256))]),_:1})]),l("div",Te,[r(a(h),{ref_key:"orderButtonRef",ref:w,onClick:t[1]||(t[1]=s=>V()),class:"w-full font-bold",style:{"border-radius":"20px"}},{default:c(()=>[R(d(e.$t("home.orderNow")),1)]),_:1},512)]),(o(!0),n(g,null,k(i.value.data.frames,(s,$)=>(o(),n("div",null,[l("div",je,[(o(!0),n(g,null,k(s,(v,Qe)=>(o(),n("div",null,[l("h1",ze,d(f(v.title)),1),v.images.length<=1?(o(),n("div",De,[l("img",{src:a(u).pathFormated(v.images[0].src,i.value.imagesPath),class:"w-full"},null,8,qe)])):(o(),A(a(ie),{key:1,"slides-per-view":1,loop:!0,class:"w-full",modules:[a(ne)],pagination:{clickable:!0}},{default:c(()=>[(o(!0),n(g,null,k(v.images,(N,Ye)=>(o(),A(a(oe),null,{default:c(()=>[l("div",Ee,[l("img",{src:a(u).pathFormated(N.src,i.value.imagesPath),class:"w-full h-full",style:{"object-fit":"cover"}},null,8,Re)])]),_:2},1024))),256))]),_:2},1032,["modules"])),l("h4",Ue,d(f(v.subtitle)),1),(o(!0),n(g,null,k(v.descriptions,N=>(o(),n("div",null,[l("div",Ge,[l("div",Me,[l("span",{class:T(q(0))},d(f(N.left)),3),l("span",{class:T(q(1))},d(f(N.right)),3)])])]))),256))]))),256))]),t[9]||(t[9]=l("div",{class:"p-4"},null,-1))]))),256)),l("div",{class:"absoluto top-0 text-center text-xs p-2 underline cursor-pointer",onClick:t[2]||(t[2]=s=>D("https://5am3eq-wc.myshopify.com/"))}," ©2025 XIAOXIONG® v2.0.7 "),l("div",{class:"absoluto top-0 text-center text-xs p-2",onClick:t[3]||(t[3]=s=>D("https://5am3eq-wc.myshopify.com/"))},t[10]||(t[10]=[l("img",{src:ae,style:{width:"7rem"}},null,-1)]))]),B.value?O("",!0):(o(),n("div",We,[r(a(h),{rounded:"","aria-label":"Star",onClick:t[4]||(t[4]=s=>V()),class:"w-full font-bold p-button-lg shadow-6"},{default:c(()=>t[11]||(t[11]=[l("span",{class:"material-icons text-5xl"},"restaurant",-1)])),_:1,__:[11]})])),r(a(be),{visible:C.value,"onUpdate:visible":t[8]||(t[8]=s=>C.value=s),header:"结账",class:"flex flex-column",modal:!0,dismissableMask:!0,onHide:le},{default:c(()=>[l("div",null,[t[12]||(t[12]=l("label",null,"NIF:",-1)),r(a(xe),{modelValue:P.value,"onUpdate:modelValue":t[5]||(t[5]=s=>P.value=s),inputId:"withoutgrouping",useGrouping:!1,fluid:"",class:"w-full m-1"},null,8,["modelValue"])]),l("div",Xe,[l("label",null,d(e.$t("common.note"))+":",1),r(a(we),{type:"text",modelValue:x.value,"onUpdate:modelValue":t[6]||(t[6]=s=>x.value=s),class:"w-full m-1"},null,8,["modelValue"])]),l("div",He,[r(a(h),{label:a(m)("common.send"),onClick:t[7]||(t[7]=s=>te())},null,8,["label"])])]),_:1},8,["visible"])],64))}},ut=fe(Je,[["__scopeId","data-v-fd05faa2"]]);export{ut as default};
