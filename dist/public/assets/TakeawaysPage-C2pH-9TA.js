import{s as we}from"./index-B0BbRw-H.js";import{s as ke}from"./index-Dft51Nit.js";import{s as Pe,a as Ce}from"./index-DfdF9Tnt.js";import{a as Se}from"./index-amocC5ZL.js";import{q as Te,h as g,n as P,s as Ae,c as u,a as e,b as r,w as n,l as t,F as N,r as Me,o as c,A as le,z as h,t as o,L as m,C as Ne,e as y,E as oe,G as f}from"./index-D9H7IMIZ.js";import{s as re,a as p}from"./index-DxeyP4mW.js";import{s as $e}from"./index-Dc-hNLpy.js";import{s as ie}from"./index-BhmSlG75.js";import"./index-CblrMs-r.js";import"./index-CrGckYYg.js";import"./index-BTJ-f9wi.js";import"./index-DiK5Oc6e.js";import"./index-CNi2bqpR.js";import"./index-D72eS9TK.js";import"./index-DI9nV-Pl.js";import"./index-oMdL8cwT.js";const je={class:"h-full"},Oe={class:"flex flex-column gap-2"},Ve={class:"flex justify-content-between"},De={class:"flex flex-column"},Ue={class:"flex flex-row"},Ee={class:"m-0 font-bold text-2xl text-left flex-grow-1"},Ie={class:"font-bold"},Re={class:"font-bold"},Fe=["onClick"],Le={class:"text-center py-5"},ze={class:"mt-3 text-gray-500"},Be={class:"flex flex-row gap-2 align-items-center"},He={class:"flex flex-column"},Qe={class:"text-lg font-bold"},qe={class:"text-sm text-gray-600"},Ke={class:"flex flex-column gap-2 overflow-auto"},We={class:"border-gray-300 border-1 border-round-lg p-3 flex flex-column gap-2"},Ge={class:"flex flex-row justify-content-between align-items-center"},Je={class:"text-sm text-gray-500"},Xe={class:"flex flex-row align-items-center gap-2"},Ye={key:0,class:"text-gray-500"},Ze={class:"font-bold"},et={class:"flex flex-row align-items-center gap-2"},tt={key:0,class:"text-gray-500"},at={class:""},st={class:"flex flex-row align-items-center gap-2"},lt={key:0,class:"text-gray-500"},ot={class:""},rt={key:0,class:"flex flex-row align-items-center gap-2"},it={key:0,class:"text-gray-500"},nt={class:"text-red-500 font-bold"},dt={key:0,class:"border-gray-300 border-1 border-round-lg p-3 flex flex-column gap-2"},ut={class:"flex flex-row justify-content-between align-items-center"},ct={class:"text-sm text-gray-500"},pt={key:0,class:"flex flex-row align-items-center gap-2"},yt={key:0,class:"text-gray-500"},gt={class:"font-semibold"},vt={key:1,class:"flex flex-row align-items-center gap-2"},mt={key:0,class:"text-gray-500"},ft={class:"font-semibold"},xt={class:"flex flex-row align-items-center gap-2"},_t={key:0,class:"text-gray-500"},bt={class:""},ht={class:"flex flex-row align-items-center gap-2"},wt={key:0,class:"text-gray-500"},kt={class:""},Pt={class:"border-gray-300 border-1 border-round-lg p-3 flex flex-column gap-2"},Ct={class:"text-sm text-gray-500"},St={class:"flex flex-row gap-2 align-items-center"},Tt={class:"text-sm font-bold"},At={class:"font-semibold"},Mt={class:"flex flex-row gap-4"},Nt={key:0,class:"text-gray-600 text-sm"},$t={class:"text-gray-600 text-sm"},jt={class:"h-full"},Ot=["onClick"],Vt={class:"text-center py-5"},Dt={class:"mt-3 text-gray-500"},Zt={__name:"TakeawaysPage",setup(Ut){const{t:a}=Te(),C=g({global:{value:null,matchMode:f.CONTAINS},id:{value:null,matchMode:f.STARTS_WITH},date:{value:null,matchMode:f.STARTS_WITH},time:{value:null,matchMode:f.IN},customer:{value:null,matchMode:f.EQUALS},total_price:{value:null,matchMode:f.EQUALS},pay_state:{value:null,matchMode:f.EQUALS},pay_ttpe:{value:null,matchMode:f.EQUALS}}),w=P.shopify_orders,x=g(!1),_=g(!1),S=g(!0),k=g(!1),i=g(null),T=g(!1),b=g(null),ne=Ae(()=>[{label:a("orderPage.completed"),value:"completed"},{label:a("orderPage.read"),value:"read"},{label:a("orderPage.new"),value:"new"},{label:a("orderPage.voided"),value:"voided"}]);function $(d){if(d.pay_state=="voided"){d.status="voided";return}i.value=d,k.value=!1,b.value=d.status,T.value=!0}function de(){b.value!==null&&(i.value.status!==b.value&&((i.value.status==="new"||!i.value.status)&&P.updateNewOrderCount("takeaway",-1),b.value==="new"&&P.updateNewOrderCount("takeaway",1),i.value.status=b.value),T.value=!1)}function j(d){i.value=d.data,k.value=!0,(i.value.status==="new"||!i.value.status)&&(i.value.isNew=void 0,P.updateNewOrderCount("takeaway",-1),i.value.status="read")}const O=d=>({completed:"status-completed",read:"status-read",new:"status-new",voided:"status-voided"})[d]||"",V=d=>({completed:a("orderPage.completed"),read:a("orderPage.read"),new:a("orderPage.new"),voided:a("orderPage.voided")})[d]||d;function ue(d){P.print_takeaway_order(d),k.value=!1}g(!1);function ce(){let d=0;return w.value.forEach(s=>{s.status!="voided"&&s.pay_state!="voided"&&d++}),d}function pe(){let d=0;return w.value.forEach(s=>{d+=Number(s.total_price?s.total_price:0)}),d}const M=g(!1);function ye(){M.value=!0}return(d,s)=>{const D=Se,ge=Ce,ve=Pe,me=Me("lable"),fe=ke,xe=we;return c(),u(N,null,[e("div",je,[r(t(re),{value:t(w),tableStyle:"min-width: 50rem",dataKey:"id",paginator:"",rows:10,rowsPerPageOptions:[5,10,20,50],stripedRows:"",scrollable:"",scrollHeight:"flex",filters:C.value,onRowClick:j,selectionMode:"single"},{header:n(()=>[e("div",Oe,[e("div",Ve,[e("div",De,[e("div",Ue,[e("h4",Ee,o(t(a)("takeawaysPage.orders")),1),r(D,{text:"",icon:"pi pi-window-maximize",severity:"contrast",disabled:!t(w).length,onClick:ye},null,8,["disabled"])]),e("div",null,[e("small",Ie,o(t(a)("takeawaysPage.numberSuccessfulOrders"))+"："+o(ce()),1),s[9]||(s[9]=e("small",{class:"font-bold"},"丨",-1)),e("small",Re,o(t(a)("takeawaysPage.totalAmount"))+"：€"+o(pe().toFixed(2)),1)])]),r(ve,{class:"flex align-items-center"},{default:n(()=>[r(ge,null,{default:n(()=>s[10]||(s[10]=[e("i",{class:"pi pi-search"},null,-1)])),_:1,__:[10]}),r(t($e),{modelValue:C.value.global.value,"onUpdate:modelValue":s[0]||(s[0]=l=>C.value.global.value=l),placeholder:t(a)("orderPage.find")},null,8,["modelValue","placeholder"])]),_:1})]),s[11]||(s[11]=e("div",null,null,-1))])]),empty:n(()=>[e("div",Le,[s[12]||(s[12]=e("i",{class:"pi pi-search",style:{"font-size":"3rem",color:"#ccc"}},null,-1)),e("p",ze,o(t(a)("orderPage.notFound")),1)])]),default:n(()=>[r(t(p),{header:t(a)("orderPage.status")},{body:n(({data:l})=>[e("span",{class:h(["status-badge",O(l.status||"new")]),onClick:le(A=>$(l),["stop"])},o(V(l.status||"new")),11,Fe)]),_:1},8,["header"]),r(t(p),{field:"name",header:t(a)("takeawaysPage.orderNumber"),sortable:""},{body:n(({data:l})=>[e("span",{style:m({"text-decoration":l.status=="voided"?"line-through":"none"})},o(l.name),5)]),_:1},8,["header"]),r(t(p),{field:"deliveryType",header:t(a)("orderPage.deliveryType.title"),sortable:""},{body:n(({data:l})=>[r(me,{class:h([l.deliveryType=="delivery2home"?"text-orange-600":"text-blue-600","font-bold"])},{default:n(()=>[Ne(o(l.deliveryType=="delivery2home"?t(a)("orderPage.deliveryType.toHome"):t(a)("orderPage.deliveryType.inShop")),1)]),_:2},1032,["class"])]),_:1},8,["header"]),r(t(p),{field:"pickupDate",header:t(a)("takeawaysPage.date"),sortable:""},null,8,["header"]),r(t(p),{field:"pickupTime",header:t(a)("takeawaysPage.time"),sortable:""},null,8,["header"]),r(t(p),{field:"customer.name",header:t(a)("takeawaysPage.customer"),sortable:""},null,8,["header"]),r(t(p),{field:"total_price",header:t(a)("takeawaysPage.totalPrice"),sortable:""},{body:n(({data:l})=>[e("span",{style:m({"text-decoration":l.status=="voided"?"line-through":"none"})}," €"+o(l.total_price?l.total_price:0),5)]),_:1},8,["header"]),r(t(p),{field:"pay_state",header:t(a)("takeawaysPage.payState"),sortable:""},{body:n(({data:l})=>[e("span",{style:m({"text-decoration":l.status=="voided"?"line-through":"none"})},o(t(a)("takeawaysPage.statePayment."+l.pay_state)),5)]),_:1},8,["header"]),r(t(p),{field:"pay_type",header:t(a)("takeawaysPage.payType"),sortable:""},{body:n(({data:l})=>[e("span",{style:m({"text-decoration":l.status=="voided"?"line-through":"none"})},o(t(a)("takeawaysPage.statePaymentType."+l.pay_type.replaceAll(" ","_"))),5)]),_:1},8,["header"])]),_:1},8,["value","filters"])]),r(t(ie),{visible:k.value,"onUpdate:visible":s[5]||(s[5]=l=>k.value=l),header:"Takeaway Order Detail",modal:!0,dismissableMask:!0,style:{"min-width":"30%",width:"500px","max-width":"90%"}},{header:n(()=>{var l;return[e("div",Be,[s[13]||(s[13]=e("div",{class:"border-round-3xl bg-gray-200 flex justify-content-center align-items-center p-2"},[e("i",{class:"pi pi-receipt text-xl font-bold"})],-1)),e("div",He,[e("label",Qe,o(t(a)("takeawaysPage.orderDetails")),1),e("label",qe,o(t(a)("takeawaysPage.orderNumber"))+":"+o((l=i.value)==null?void 0:l.name),1)])])]}),footer:n(()=>[r(D,{class:"w-full border-round-xl",icon:"pi pi-print",label:t(a)("takeawaysPage.printOrder"),onClick:s[4]||(s[4]=l=>ue(i.value)),fluid:""},null,8,["label"])]),default:n(()=>{var l,A,U,E,I,R,F,L,z,B,H,Q,q,K,W,G,J,X,Y,Z,ee,te,ae,se;return[e("div",Ke,[e("div",We,[e("div",Ge,[e("label",Je,o(t(a)("takeawaysPage.customerDetails")),1),e("i",{class:h([x.value?"pi pi-eye-slash":"pi pi-eye","text-gray-600"]),onClick:s[1]||(s[1]=v=>x.value=!x.value)},null,2)]),e("div",Xe,[s[14]||(s[14]=e("div",{class:"bg-gray-200 p-2 border-round-xl flex justify-content-center align-items-center"},[e("i",{class:"pi pi-user text-gray-500"})],-1)),x.value?(c(),u("label",Ye,o(t(a)("takeawaysPage.name"))+" :",1)):y("",!0),e("label",Ze,o((A=(l=i.value)==null?void 0:l.customer)==null?void 0:A.name),1)]),e("div",et,[s[15]||(s[15]=e("div",{class:"bg-gray-200 p-2 border-round-xl flex justify-content-center align-items-center"},[e("i",{class:"pi pi-phone text-gray-500"})],-1)),x.value?(c(),u("label",tt,o(t(a)("takeawaysPage.phone"))+" :",1)):y("",!0),e("label",at,o((I=(E=(U=i.value)==null?void 0:U.customer)==null?void 0:E.phone)==null?void 0:I.replace("#"," - ")),1)]),e("div",st,[s[16]||(s[16]=e("div",{class:"bg-gray-200 p-2 border-round-xl flex justify-content-center align-items-center"},[e("i",{class:"pi pi-envelope text-gray-500"})],-1)),x.value?(c(),u("label",lt,o(t(a)("takeawaysPage.email"))+" :",1)):y("",!0),e("label",ot,o((F=(R=i.value)==null?void 0:R.customer)==null?void 0:F.email),1)]),(L=i.value)!=null&&L.note&&i.value.note!==""?(c(),u("div",rt,[s[17]||(s[17]=e("div",{class:"bg-gray-200 p-2 border-round-xl flex justify-content-center align-items-center"},[e("i",{class:"pi pi-comment text-gray-500"})],-1)),x.value?(c(),u("label",it,o(t(a)("orderPage.notes"))+" :",1)):y("",!0),e("label",nt,o((B=(z=i.value)==null?void 0:z.customer)==null?void 0:B.note),1)])):y("",!0)]),i.value.deliveryType=="delivery2home"?(c(),u("div",dt,[e("div",ut,[e("label",ct,o(t(a)("takeawaysPage.customerAddress")),1),e("i",{class:h([_.value?"pi pi-eye-slash":"pi pi-eye","text-gray-600"]),onClick:s[2]||(s[2]=v=>_.value=!_.value)},null,2)]),(Q=(H=i.value)==null?void 0:H.deliveryAddress)!=null&&Q.address1?(c(),u("div",pt,[s[18]||(s[18]=e("div",{class:"bg-gray-200 p-2 border-round-xl flex justify-content-center align-items-center"},[e("i",{class:"pi pi-map-marker text-gray-500"},[e("small",{class:"text-xs text-gray-500"},"1")])],-1)),_.value?(c(),u("label",yt,o(t(a)("takeawaysPage.address"))+"1 :",1)):y("",!0),e("label",gt,o((K=(q=i.value)==null?void 0:q.deliveryAddress)==null?void 0:K.address1),1)])):y("",!0),(G=(W=i.value)==null?void 0:W.deliveryAddress)!=null&&G.address2?(c(),u("div",vt,[s[19]||(s[19]=e("div",{class:"bg-gray-200 p-2 border-round-xl flex justify-content-center align-items-center"},[e("i",{class:"pi pi-map-marker text-gray-500"},[e("small",{class:"text-xs text-gray-500"},"2")])],-1)),_.value?(c(),u("label",mt,o(t(a)("takeawaysPage.address"))+"2 :",1)):y("",!0),e("label",ft,o((X=(J=i.value)==null?void 0:J.deliveryAddress)==null?void 0:X.address2),1)])):y("",!0),e("div",xt,[s[20]||(s[20]=e("div",{class:"bg-gray-200 p-2 border-round-xl flex justify-content-center align-items-center"},[e("i",{class:"pi pi pi-building text-gray-500"})],-1)),_.value?(c(),u("label",_t,o(t(a)("takeawaysPage.city"))+" :",1)):y("",!0),e("label",bt,o((Z=(Y=i.value)==null?void 0:Y.deliveryAddress)==null?void 0:Z.city),1)]),e("div",ht,[s[21]||(s[21]=e("div",{class:"bg-gray-200 p-2 border-round-xl flex justify-content-center align-items-center"},[e("i",{class:"pi pi-globe text-gray-500"})],-1)),_.value?(c(),u("label",wt,o(t(a)("takeawaysPage.postalCode"))+" :",1)):y("",!0),e("label",kt,o((te=(ee=i.value)==null?void 0:ee.deliveryAddress)==null?void 0:te.postalCode),1)])])):y("",!0),e("div",Pt,[e("div",{class:"flex flex-row justify-content-between align-items-center",onClick:s[3]||(s[3]=v=>S.value=!S.value)},[e("label",Ct,o(t(a)("takeawaysPage.product")),1),e("div",St,[e("label",Tt,o(t(a)("takeawaysPage.totalPrice"))+": "+o((ae=i.value)==null?void 0:ae.total_price)+"€",1),e("i",{class:h([S.value?"pi pi-angle-up":"pi pi-angle-down"])},null,2)])]),S.value?(c(!0),u(N,{key:0},oe((se=i.value)==null?void 0:se.line_items,(v,_e)=>(c(),u("div",{key:_e,class:"flex flex-column"},[e("label",At,o(v.name),1),(c(!0),u(N,null,oe(v.properties,(be,he)=>(c(),u("label",{key:he,class:"text-gray-600 text-sm"},o(be),1))),128)),e("div",Mt,[v.sku?(c(),u("label",Nt,o(v.sku),1)):y("",!0),e("label",$t,o(v.price)+" x "+o(v.quantity),1)])]))),128)):y("",!0)])])]}),_:1},8,["visible"]),r(t(ie),{visible:T.value,"onUpdate:visible":s[7]||(s[7]=l=>T.value=l),header:t(a)("orderPage.orderStatus"),modal:!0,dismissableMask:!0},{default:n(()=>[r(fe,{modelValue:b.value,"onUpdate:modelValue":s[6]||(s[6]=l=>b.value=l),options:ne.value,optionLabel:"label",optionValue:"value",onClick:de},null,8,["modelValue","options"])]),_:1},8,["visible","header"]),r(xe,{visible:M.value,"onUpdate:visible":s[8]||(s[8]=l=>M.value=l),position:"full",header:t(a)("takeawaysPage.orders")},{default:n(()=>[e("div",jt,[r(t(re),{value:t(w),tableStyle:"min-width: 50rem",dataKey:"id",paginator:"",rows:10,rowsPerPageOptions:[5,10,20,50],stripedRows:"",filters:C.value,scrollable:"",scrollHeight:"flex",onRowClick:j,selectionMode:"single"},{empty:n(()=>[e("div",Vt,[s[22]||(s[22]=e("i",{class:"pi pi-search",style:{"font-size":"3rem",color:"#ccc"}},null,-1)),e("p",Dt,o(t(a)("orderPage.notFound")),1)])]),default:n(()=>[r(t(p),{header:t(a)("orderPage.status")},{body:n(({data:l})=>[e("span",{class:h(["status-badge",O(l.status||"new")]),onClick:le(A=>$(l),["stop"])},o(V(l.status||"new")),11,Ot)]),_:1},8,["header"]),r(t(p),{field:"name",header:t(a)("takeawaysPage.orderNumber"),sortable:""},{body:n(({data:l})=>[e("span",{style:m({"text-decoration":l.status=="voided"?"line-through":"none"})},o(l.name),5)]),_:1},8,["header"]),r(t(p),{field:"pickupDate",header:t(a)("takeawaysPage.date"),sortable:""},null,8,["header"]),r(t(p),{field:"pickupTime",header:t(a)("takeawaysPage.time"),sortable:""},null,8,["header"]),r(t(p),{field:"customer.name",header:t(a)("takeawaysPage.customer"),sortable:""},null,8,["header"]),r(t(p),{field:"total_price",header:t(a)("takeawaysPage.totalPrice"),sortable:""},{body:n(({data:l})=>[e("span",{style:m({"text-decoration":l.status=="voided"?"line-through":"none"})}," €"+o(l.total_price?l.total_price:0),5)]),_:1},8,["header"]),r(t(p),{field:"pay_state",header:t(a)("takeawaysPage.payState"),sortable:""},{body:n(({data:l})=>[e("span",{style:m({"text-decoration":l.status=="voided"?"line-through":"none"})},o(t(a)("takeawaysPage.statePayment."+l.pay_state)),5)]),_:1},8,["header"]),r(t(p),{field:"pay_type",header:t(a)("takeawaysPage.payType"),sortable:""},{body:n(({data:l})=>[e("span",{style:m({"text-decoration":l.status=="voided"?"line-through":"none"})},o(t(a)("takeawaysPage.statePaymentType."+l.pay_type.replaceAll(" ","_"))),5)]),_:1},8,["header"])]),_:1},8,["value","filters"])])]),_:1},8,["visible","header"])],64)}}};export{Zt as default};
