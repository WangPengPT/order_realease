import{g as xt}from"./_commonjsHelpers-CqkleIqs.js";import{v as ze,B as ye,x as Te,y as Oe,f as b,q as u,l as Y,i as z,z as he,A as G,D as ke,h as a,t as v,n as le,u as pe,r as R,o as Ee,a as D,g as N,F as Z,p as ae,k as r,j as V,E as Le,s as be,m as oe,e as rt,G as $t,H as Tt,c as ve,I as qe,J as Ct,R as ct,K as je,L as Dt,M as Ve,N as It,O as Ae,P as St,Q as Xe,S as ut,T as Nt,U as At,V as Be,w as Ye,b as Bt,W as et,d as Pt}from"./index-BOmCuL6-.js";import{s as ge,a as dt}from"./index-CfDL9IrH.js";import{s as Q,a as ft}from"./index-PUDpffkI.js";import{D as ne,c as re,s as tt}from"./index-DYY3tj3o.js";import{_ as Ce,a as He,b as Ke,c as Ue,s as We,d as Lt,S as qt}from"./_plugin-vue_export-helper-q-tq8i5B.js";import{s as zt}from"./index-DPa7YHXy.js";import{s as at,a as Ot}from"./index-lyO4Z9fE.js";import{c as ue}from"./cookie-CTJN0GZu.js";import{s as Et}from"./index-C4kCK-po.js";import{s as st}from"./index-B6C-OaUq.js";import{s as Mt}from"./index-BBCUFAG-.js";var Fe={exports:{}},nt;function Rt(){return nt||(nt=1,function(e){var t=function(){var n=String.fromCharCode,g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",i={};function x(c,_){if(!i[c]){i[c]={};for(var C=0;C<c.length;C++)i[c][c.charAt(C)]=C}return i[c][_]}var j={compressToBase64:function(c){if(c==null)return"";var _=j._compress(c,6,function(C){return g.charAt(C)});switch(_.length%4){default:case 0:return _;case 1:return _+"===";case 2:return _+"==";case 3:return _+"="}},decompressFromBase64:function(c){return c==null?"":c==""?null:j._decompress(c.length,32,function(_){return x(g,c.charAt(_))})},compressToUTF16:function(c){return c==null?"":j._compress(c,15,function(_){return n(_+32)})+" "},decompressFromUTF16:function(c){return c==null?"":c==""?null:j._decompress(c.length,16384,function(_){return c.charCodeAt(_)-32})},compressToUint8Array:function(c){for(var _=j.compress(c),C=new Uint8Array(_.length*2),y=0,m=_.length;y<m;y++){var P=_.charCodeAt(y);C[y*2]=P>>>8,C[y*2+1]=P%256}return C},decompressFromUint8Array:function(c){if(c==null)return j.decompress(c);for(var _=new Array(c.length/2),C=0,y=_.length;C<y;C++)_[C]=c[C*2]*256+c[C*2+1];var m=[];return _.forEach(function(P){m.push(n(P))}),j.decompress(m.join(""))},compressToEncodedURIComponent:function(c){return c==null?"":j._compress(c,6,function(_){return h.charAt(_)})},decompressFromEncodedURIComponent:function(c){return c==null?"":c==""?null:(c=c.replace(/ /g,"+"),j._decompress(c.length,32,function(_){return x(h,c.charAt(_))}))},compress:function(c){return j._compress(c,16,function(_){return n(_)})},_compress:function(c,_,C){if(c==null)return"";var y,m,P={},W={},U="",K="",F="",L=2,S=3,B=2,O=[],s=0,f=0,o;for(o=0;o<c.length;o+=1)if(U=c.charAt(o),Object.prototype.hasOwnProperty.call(P,U)||(P[U]=S++,W[U]=!0),K=F+U,Object.prototype.hasOwnProperty.call(P,K))F=K;else{if(Object.prototype.hasOwnProperty.call(W,F)){if(F.charCodeAt(0)<256){for(y=0;y<B;y++)s=s<<1,f==_-1?(f=0,O.push(C(s)),s=0):f++;for(m=F.charCodeAt(0),y=0;y<8;y++)s=s<<1|m&1,f==_-1?(f=0,O.push(C(s)),s=0):f++,m=m>>1}else{for(m=1,y=0;y<B;y++)s=s<<1|m,f==_-1?(f=0,O.push(C(s)),s=0):f++,m=0;for(m=F.charCodeAt(0),y=0;y<16;y++)s=s<<1|m&1,f==_-1?(f=0,O.push(C(s)),s=0):f++,m=m>>1}L--,L==0&&(L=Math.pow(2,B),B++),delete W[F]}else for(m=P[F],y=0;y<B;y++)s=s<<1|m&1,f==_-1?(f=0,O.push(C(s)),s=0):f++,m=m>>1;L--,L==0&&(L=Math.pow(2,B),B++),P[K]=S++,F=String(U)}if(F!==""){if(Object.prototype.hasOwnProperty.call(W,F)){if(F.charCodeAt(0)<256){for(y=0;y<B;y++)s=s<<1,f==_-1?(f=0,O.push(C(s)),s=0):f++;for(m=F.charCodeAt(0),y=0;y<8;y++)s=s<<1|m&1,f==_-1?(f=0,O.push(C(s)),s=0):f++,m=m>>1}else{for(m=1,y=0;y<B;y++)s=s<<1|m,f==_-1?(f=0,O.push(C(s)),s=0):f++,m=0;for(m=F.charCodeAt(0),y=0;y<16;y++)s=s<<1|m&1,f==_-1?(f=0,O.push(C(s)),s=0):f++,m=m>>1}L--,L==0&&(L=Math.pow(2,B),B++),delete W[F]}else for(m=P[F],y=0;y<B;y++)s=s<<1|m&1,f==_-1?(f=0,O.push(C(s)),s=0):f++,m=m>>1;L--,L==0&&(L=Math.pow(2,B),B++)}for(m=2,y=0;y<B;y++)s=s<<1|m&1,f==_-1?(f=0,O.push(C(s)),s=0):f++,m=m>>1;for(;;)if(s=s<<1,f==_-1){O.push(C(s));break}else f++;return O.join("")},decompress:function(c){return c==null?"":c==""?null:j._decompress(c.length,32768,function(_){return c.charCodeAt(_)})},_decompress:function(c,_,C){var y=[],m=4,P=4,W=3,U="",K=[],F,L,S,B,O,s,f,o={val:C(0),position:_,index:1};for(F=0;F<3;F+=1)y[F]=F;for(S=0,O=Math.pow(2,2),s=1;s!=O;)B=o.val&o.position,o.position>>=1,o.position==0&&(o.position=_,o.val=C(o.index++)),S|=(B>0?1:0)*s,s<<=1;switch(S){case 0:for(S=0,O=Math.pow(2,8),s=1;s!=O;)B=o.val&o.position,o.position>>=1,o.position==0&&(o.position=_,o.val=C(o.index++)),S|=(B>0?1:0)*s,s<<=1;f=n(S);break;case 1:for(S=0,O=Math.pow(2,16),s=1;s!=O;)B=o.val&o.position,o.position>>=1,o.position==0&&(o.position=_,o.val=C(o.index++)),S|=(B>0?1:0)*s,s<<=1;f=n(S);break;case 2:return""}for(y[3]=f,L=f,K.push(f);;){if(o.index>c)return"";for(S=0,O=Math.pow(2,W),s=1;s!=O;)B=o.val&o.position,o.position>>=1,o.position==0&&(o.position=_,o.val=C(o.index++)),S|=(B>0?1:0)*s,s<<=1;switch(f=S){case 0:for(S=0,O=Math.pow(2,8),s=1;s!=O;)B=o.val&o.position,o.position>>=1,o.position==0&&(o.position=_,o.val=C(o.index++)),S|=(B>0?1:0)*s,s<<=1;y[P++]=n(S),f=P-1,m--;break;case 1:for(S=0,O=Math.pow(2,16),s=1;s!=O;)B=o.val&o.position,o.position>>=1,o.position==0&&(o.position=_,o.val=C(o.index++)),S|=(B>0?1:0)*s,s<<=1;y[P++]=n(S),f=P-1,m--;break;case 2:return K.join("")}if(m==0&&(m=Math.pow(2,W),W++),y[f])U=y[f];else if(f===P)U=L+L.charAt(0);else return null;K.push(U),y[P++]=L+U.charAt(0),m--,L=U,m==0&&(m=Math.pow(2,W),W++)}}};return j}();e!=null?e.exports=t:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return t})}(Fe)),Fe.exports}var jt=Rt();const ot=xt(jt);var Ft=ze`
    .p-tag {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        background: dt('tag.primary.background');
        color: dt('tag.primary.color');
        font-size: dt('tag.font.size');
        font-weight: dt('tag.font.weight');
        padding: dt('tag.padding');
        border-radius: dt('tag.border.radius');
        gap: dt('tag.gap');
    }

    .p-tag-icon {
        font-size: dt('tag.icon.size');
        width: dt('tag.icon.size');
        height: dt('tag.icon.size');
    }

    .p-tag-rounded {
        border-radius: dt('tag.rounded.border.radius');
    }

    .p-tag-success {
        background: dt('tag.success.background');
        color: dt('tag.success.color');
    }

    .p-tag-info {
        background: dt('tag.info.background');
        color: dt('tag.info.color');
    }

    .p-tag-warn {
        background: dt('tag.warn.background');
        color: dt('tag.warn.color');
    }

    .p-tag-danger {
        background: dt('tag.danger.background');
        color: dt('tag.danger.color');
    }

    .p-tag-secondary {
        background: dt('tag.secondary.background');
        color: dt('tag.secondary.color');
    }

    .p-tag-contrast {
        background: dt('tag.contrast.background');
        color: dt('tag.contrast.color');
    }
`,Vt={root:function(t){var n=t.props;return["p-tag p-component",{"p-tag-info":n.severity==="info","p-tag-success":n.severity==="success","p-tag-warn":n.severity==="warn","p-tag-danger":n.severity==="danger","p-tag-secondary":n.severity==="secondary","p-tag-contrast":n.severity==="contrast","p-tag-rounded":n.rounded}]},icon:"p-tag-icon",label:"p-tag-label"},Ht=ye.extend({name:"tag",style:Ft,classes:Vt}),Kt={name:"BaseTag",extends:Te,props:{value:null,severity:null,rounded:Boolean,icon:String},style:Ht,provide:function(){return{$pcTag:this,$parentInstance:this}}};function xe(e){"@babel/helpers - typeof";return xe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xe(e)}function Ut(e,t,n){return(t=Wt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wt(e){var t=Qt(e,"string");return xe(t)=="symbol"?t:t+""}function Qt(e,t){if(xe(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var g=n.call(e,t);if(xe(g)!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var we={name:"Tag",extends:Kt,inheritAttrs:!1,computed:{dataP:function(){return Oe(Ut({rounded:this.rounded},this.severity,this.severity))}}},Jt=["data-p"];function Gt(e,t,n,g,h,i){return u(),b("span",G({class:e.cx("root"),"data-p":i.dataP},e.ptmi("root")),[e.$slots.icon?(u(),Y(ke(e.$slots.icon),G({key:0,class:e.cx("icon")},e.ptm("icon")),null,16,["class"])):e.icon?(u(),b("span",G({key:1,class:[e.cx("icon"),e.icon]},e.ptm("icon")),null,16)):z("",!0),e.value!=null||e.$slots.default?he(e.$slots,"default",{key:2},function(){return[a("span",G({class:e.cx("label")},e.ptm("label")),v(e.value),17)]}):z("",!0)],16,Jt)}we.render=Gt;var Zt=ze`
    .p-avatar {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: dt('avatar.width');
        height: dt('avatar.height');
        font-size: dt('avatar.font.size');
        background: dt('avatar.background');
        color: dt('avatar.color');
        border-radius: dt('avatar.border.radius');
    }

    .p-avatar-image {
        background: transparent;
    }

    .p-avatar-circle {
        border-radius: 50%;
    }

    .p-avatar-circle img {
        border-radius: 50%;
    }

    .p-avatar-icon {
        font-size: dt('avatar.icon.size');
        width: dt('avatar.icon.size');
        height: dt('avatar.icon.size');
    }

    .p-avatar img {
        width: 100%;
        height: 100%;
    }

    .p-avatar-lg {
        width: dt('avatar.lg.width');
        height: dt('avatar.lg.width');
        font-size: dt('avatar.lg.font.size');
    }

    .p-avatar-lg .p-avatar-icon {
        font-size: dt('avatar.lg.icon.size');
        width: dt('avatar.lg.icon.size');
        height: dt('avatar.lg.icon.size');
    }

    .p-avatar-xl {
        width: dt('avatar.xl.width');
        height: dt('avatar.xl.width');
        font-size: dt('avatar.xl.font.size');
    }

    .p-avatar-xl .p-avatar-icon {
        font-size: dt('avatar.xl.icon.size');
        width: dt('avatar.xl.icon.size');
        height: dt('avatar.xl.icon.size');
    }

    .p-avatar-group {
        display: flex;
        align-items: center;
    }

    .p-avatar-group .p-avatar + .p-avatar {
        margin-inline-start: dt('avatar.group.offset');
    }

    .p-avatar-group .p-avatar {
        border: 2px solid dt('avatar.group.border.color');
    }

    .p-avatar-group .p-avatar-lg + .p-avatar-lg {
        margin-inline-start: dt('avatar.lg.group.offset');
    }

    .p-avatar-group .p-avatar-xl + .p-avatar-xl {
        margin-inline-start: dt('avatar.xl.group.offset');
    }
`,Xt={root:function(t){var n=t.props;return["p-avatar p-component",{"p-avatar-image":n.image!=null,"p-avatar-circle":n.shape==="circle","p-avatar-lg":n.size==="large","p-avatar-xl":n.size==="xlarge"}]},label:"p-avatar-label",icon:"p-avatar-icon"},Yt=ye.extend({name:"avatar",style:Zt,classes:Xt}),ea={name:"BaseAvatar",extends:Te,props:{label:{type:String,default:null},icon:{type:String,default:null},image:{type:String,default:null},size:{type:String,default:"normal"},shape:{type:String,default:"square"},ariaLabelledby:{type:String,default:null},ariaLabel:{type:String,default:null}},style:Yt,provide:function(){return{$pcAvatar:this,$parentInstance:this}}};function $e(e){"@babel/helpers - typeof";return $e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$e(e)}function it(e,t,n){return(t=ta(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ta(e){var t=aa(e,"string");return $e(t)=="symbol"?t:t+""}function aa(e,t){if($e(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var g=n.call(e,t);if($e(g)!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Qe={name:"Avatar",extends:ea,inheritAttrs:!1,emits:["error"],methods:{onError:function(t){this.$emit("error",t)}},computed:{dataP:function(){return Oe(it(it({},this.shape,this.shape),this.size,this.size))}}},sa=["aria-labelledby","aria-label","data-p"],na=["data-p"],oa=["data-p"],ia=["src","alt","data-p"];function la(e,t,n,g,h,i){return u(),b("div",G({class:e.cx("root"),"aria-labelledby":e.ariaLabelledby,"aria-label":e.ariaLabel},e.ptmi("root"),{"data-p":i.dataP}),[he(e.$slots,"default",{},function(){return[e.label?(u(),b("span",G({key:0,class:e.cx("label")},e.ptm("label"),{"data-p":i.dataP}),v(e.label),17,na)):e.$slots.icon?(u(),Y(ke(e.$slots.icon),{key:1,class:le(e.cx("icon"))},null,8,["class"])):e.icon?(u(),b("span",G({key:2,class:[e.cx("icon"),e.icon]},e.ptm("icon"),{"data-p":i.dataP}),null,16,oa)):e.image?(u(),b("img",G({key:3,src:e.image,alt:e.ariaLabel,onError:t[0]||(t[0]=function(){return i.onError&&i.onError.apply(i,arguments)})},e.ptm("image"),{"data-p":i.dataP}),null,16,ia)):z("",!0)]})],16,sa)}Qe.render=la;const ra={class:"grid"},ca={class:"flex flex-column"},ua=["onClick"],da={class:"p-1 flex-shrink-0 w-7rem h-7rem flex align-items-center justify-content-center overflow-hidden"},fa=["src","alt"],pa={class:"flex flex-column justify-content-center"},va={class:"font-bold"},ha={class:"flex flex-wrap gap-2"},ma={class:"flex gap-1 align-items-center"},ba={class:"text-color-secondary line2"},ga={key:0,class:"text-xl font-bold text-primary"},ya={key:1,class:"flex align-items-center gap-1"},_a={class:"text-l font-bold text-color-secondary"},wa={class:"text-sm line-through text-500"},ka={key:2,class:"flex gap-2 mr-2",id:"card-quantity"},xa={class:"w-2rem text-xl text-center"},$a={key:3,class:"flex gap-2 mr-2"},Ta={key:0,class:"m-2 mt-0"},Ca={class:"flex flex-row justify-content-between align-content-center"},Da={class:"flex flex-column"},Ia={class:"text-l font-bold"},Sa={key:0,class:"text-l font-bold text-color-secondary"},Na={key:1,class:"flex align-items-center gap-1"},Aa={class:"text-l font-bold text-color-secondary"},Ba={class:"text-sm line-through text-500"},Pa={key:0,class:"flex ml-2 mr-2"},La={class:"w-2rem text-xl text-center"},qa={key:1,class:"flex gap-2 mr-3 pt-2 pb-2"},za={class:"max-w-5rem flex align-items-center"},Oa={class:"font-bold whitespace-nowrap"},Ea={class:"mb-2 flex justify-content-center"},Ma={class:"font-bold text-center"},Ra={class:"mb-2"},ja={class:"text-color-secondary m-0 line-height-3 line2 text-center"},Fa={class:"mb-2"},Va={class:"flex justify-content-center"},Ha=["src","alt"],Ka={class:"flex align-items-center gap-2"},Ua=["src","alt"],Wa={class:"flex align-items-center gap-3 ml-auto"},Qa={__name:"DishList",props:{rateDish:{type:Function,required:!0},likedItemsRef:Array,dislikedItemsRef:Array,tabIndex:Number},setup(e){const{t}=pe(),n=ne.dishDatas,g=R(null),h=e;Ee(()=>{if(D.getOrderMenuTab()[h.tabIndex],D.customDishAPI.customDishes.value.map(f=>f.name),D.getMenu().length==0){console.log("exit");return}g.value=n.value[h.tabIndex].mainDishes,ne.showDishList(g.value)});let i={rated:!1,id:null,like:0,rate:0};function x(){var o;const s=D.currentPage.value,f=(o=s==null?void 0:s.data)==null?void 0:o.logoPath;return f?D.pathFormated(f,s.imagesPath):"/images/logo_logo.png"}const j=s=>ne.dishDatas.value[s]?ne.dishDatas.value[s].quantity:0,c=s=>{if(!C())return!1;const f=s.quantity;let o=3;if(s.price>0&&(o=9),s.limit){const ie=s.id,w=C(),d=(w.peopleType.adults+w.peopleType.children)*s.limit,q=w.order.find(I=>I.dishid==ie);let E=0;if(s.subitem)for(const I of s.subitem){E+=j(I);const k=w.order.find(T=>T.dishid==_(I));k&&(E+=k.quantity)}else E+=s.quantity,q&&(E+=q.quantity);return f>=o||d&&E>=d}return f>=o},_=s=>ne.dishDatas.value[s]?ne.dishDatas.value[s].id:0,C=()=>D.getTableValue(),y=s=>{let f="absolute origin-top-left mt-1 ml-1 border-round-lg pl-1 pr-1 text-xs text-white font-bold ";switch(s){case"new":f+="bg-red-600";break;case"recommended":case"special":f+="bg-orange-600";break;default:f+="bg-blue-600"}return f};function m(){h.rateDish(i.id,i.like,i.rate,i.rated),i.id=null,i.like=0,i.rate=0,i.rated=!1}const P=s=>{const f=h.likedItemsRef.indexOf(s);if(i.id=s.id,f!==-1)h.likedItemsRef.splice(f,1),i.like+=-1,i.rate+=-1,i.rated=!1;else{i.rated=!0,h.likedItemsRef.push(s);const o=h.dislikedItemsRef.indexOf(s);o!==-1?(h.dislikedItemsRef.splice(o,1),i.like+=1):(i.like+=1,i.rate+=1)}m()},W=s=>{const f=h.dislikedItemsRef.indexOf(s);if(i.id=s.id,f!==-1)h.dislikedItemsRef.splice(f,1),i.rate+=-1,i.rated=!1;else{i.rated=!0,h.dislikedItemsRef.push(s);const o=h.likedItemsRef.indexOf(s);o!==-1?(h.likedItemsRef.splice(o,1),i.like+=-1):i.rate+=1}m()},U=R(!1),K=R({}),F=s=>{U.value=!0,K.value=s},L=s=>{s.target.src="/images/default.png"};function S(s){O(s.target,300)}function B(s){O(s.target,110)}function O(s,f){const o=s.naturalWidth,ie=s.naturalHeight,w=Math.min(o,f),d=w/o,q=ie*d;s.style.width=`${w}px`,s.style.height=`${q}px`}return(s,f)=>(u(),b(Z,null,[a("div",ra,[(u(!0),b(Z,null,ae(g.value,(o,ie)=>{var w;return u(),b("div",{key:ie,class:"col-12 sm:col-12 md:col-6 lg:col-4 border-round surface-section shadow-1 p-2"},[a("div",ca,[a("div",{class:le(["flex flex-row",o.subItems.length!==0?"flex-grow-1":""]),onClick:d=>F(o.dish)},[((w=o.dish.etiquette)==null?void 0:w.length)>0?(u(),b("div",{key:0,class:le(y(o.dish.etiquette))},v(r(t)("common.etiquette."+o.dish.etiquette)),3)):z("",!0),a("div",da,[a("img",{src:o.dish.image||"/images/default.png",alt:o.dish.name,class:"w-full h-full",style:{"object-fit":"cover"},onError:L,onLoad:B},null,40,fa)]),a("div",pa,[a("div",va,v(o.dish.name),1),a("div",null,[a("div",ha,[a("div",ma,[(u(),b(Z,null,ae(5,d=>a("i",{key:d,class:le(["pi invert-star",d<=Math.floor(o.dish.likes/o.dish.rates*5)?"pi-star-fill":d-.5<=o.dish.likes/o.dish.rates*5?"pi-star-half-fill":"pi-star"]),style:{color:"black"}},null,2)),64)),a("p",null,"("+v(o.dish.rates?o.dish.rates:0)+")",1)])])]),a("div",null,[a("p",ba,v(o.dish.note),1)])])],10,ua),o.subItems.length==0?(u(),b("div",{key:0,class:le(["flex ml-2 mr-2 mb-2",Number(o.dish.price)>0?"justify-content-between":"justify-content-end"])},[!o.dish.discount&&Number(o.dish.price)>0?(u(),b("span",ga,"€"+v(o.dish.price),1)):z("",!0),o.dish.discount?(u(),b("div",ya,[a("span",_a,"€"+v(o.dish.dis_price),1),a("span",wa,"€"+v(o.dish.price),1),N(r(we),{severity:"danger",value:"-"+o.dish.discount+"%"},null,8,["value"])])):z("",!0),o.dish.soldout?z("",!0):(u(),b("div",ka,[N(r(Q),{icon:"pi pi-minus",rounded:"",disabled:o.dish.quantity<=0,onClick:d=>o.dish.quantity--,class:"w-2rem h-2rem"},null,8,["disabled","onClick"]),a("span",xa,v(o.dish.quantity),1),N(r(Q),{icon:"pi pi-plus",rounded:"",disabled:c(o.dish),onClick:d=>o.dish.quantity++,class:"w-2rem h-2rem"},null,8,["disabled","onClick"])])),o.dish.soldout?(u(),b("div",$a,[N(r(we),{severity:"danger",value:s.$t("common.soldout")},null,8,["value"])])):z("",!0)],2)):z("",!0),o.subItems.length!==0?(u(!0),b(Z,{key:1},ae(o.subItems,(d,q)=>(u(),b(Z,{key:"index"},[d.disable?z("",!0):(u(),b("div",Ta,[a("div",Ca,[a("div",Da,[a("span",Ia,v(d.subname),1),!d.discount&&d.price!=="0.00"&&d.price!=="0"?(u(),b("span",Sa,"€"+v(d.price),1)):z("",!0),d.discount?(u(),b("div",Na,[a("span",Aa,"€"+v(d.dis_price),1),a("span",Ba,"€"+v(d.price),1),N(r(we),{severity:"danger",value:"-"+d.discount+"%"},null,8,["value"])])):z("",!0)]),d.soldout?z("",!0):(u(),b("div",Pa,[N(r(Q),{icon:"pi pi-minus",rounded:"",disabled:d.quantity<=0,onClick:E=>d.quantity--,class:"w-2rem h-2rem"},null,8,["disabled","onClick"]),a("span",La,v(d.quantity),1),N(r(Q),{icon:"pi pi-plus",rounded:"",onClick:E=>d.quantity++,class:"w-2rem h-2rem",disabled:c(d)},null,8,["onClick","disabled"])])),d.soldout?(u(),b("div",qa,[N(r(we),{severity:"danger",value:s.$t("common.soldout")},null,8,["value"])])):z("",!0)])]))],64))),128)):z("",!0)])])}),128))]),N(r(ge),{visible:U.value,"onUpdate:visible":f[2]||(f[2]=o=>U.value=o),modal:"",header:"dish",style:Le([{width:"23rem"},{width:"80vw","max-width":"700px"}])},{header:V(()=>[a("div",za,[N(r(Qe),{image:x(),class:"w-full"},null,8,["image"])]),a("span",Oa,v(s.$t("common.details")),1)]),default:V(()=>[a("div",Ea,[a("span",Ma,v(K.value.name),1)]),a("div",Ra,[a("span",ja,v(K.value.note),1)]),a("div",Fa,[a("div",Va,[a("img",{class:"w-full h-auto object-contain",src:K.value.image,alt:K.value.name,onError:L,onLoad:S},null,40,Ha)])]),a("div",Ka,[(u(!0),b(Z,null,ae(K.value.allergies,(o,ie)=>(u(),b("img",{src:"images/"+o+".png",alt:o,class:"w-2rem h-2rem border-round flex-shrink-0",style:{"object-fit":"cover","min-width":"2rem"}},null,8,Ua))),256)),a("div",Wa,[a("button",{onClick:f[0]||(f[0]=o=>P(K.value)),class:"p-0 border-none bg-transparent cursor-pointer"},[a("i",{class:le(["pi pi-thumbs-up text-xl",h.likedItemsRef.includes(K.value)?"text-green-500":"text-gray-400"])},null,2)]),a("button",{onClick:f[1]||(f[1]=o=>W(K.value)),class:"p-0 border-none bg-transparent cursor-pointer"},[a("i",{class:le(["pi pi-thumbs-down text-xl",h.dislikedItemsRef.includes(K.value)?"text-red-500":"text-gray-400"])},null,2)])])])]),_:1},8,["visible"])],64))}},Ja=Ce(Qa,[["__scopeId","data-v-c1881def"]]),Ga={key:0,class:"text-3xl font-bold"},Za={class:"flex flex-column gap-3 p-1"},Xa={key:0,class:"flex flex-column gap-1"},Ya={key:0,class:"m-0"},es={key:0,class:"m-0"},ts={class:"flex justify-content-between gap-4 mt-1"},as={class:"flex align-items-center gap-2"},ss=["src","alt"],ns={class:"flex-grow-1 min-width-0 max-w-18rem"},os={class:"flex flex-column gap-1"},is={class:"flex align-items-center gap-2"},ls={class:"text-xl font-bold line1 whitespace-nowrap overflow-hidden text-overflow-ellipsis",style:{"max-width":"20rem"}},rs={class:"flex align-items-end gap-1"},cs={key:0,class:"text-xl font-bold text-primary"},us={key:1,class:"text-xl font-bold text-primary"},ds={key:2,class:"text-sm text-color-secondary"},fs={key:0,class:"text-xs text-primary"},ps={class:"flex-shrink-0 flex flex-wrap justify-content-between align-items-center gap-1"},vs={class:"flex flex-wrap justify-content-between align-content-center"},hs={class:"flex align-items-center gap-1"},ms={class:"w-2rem text-center"},bs={key:1,class:"flex flex-column gap-2 mt-2"},gs={for:"in_label"},ys={for:"in_label"},_s={class:"bottom-0 left-0 mt-2"},ws={class:"text-2xl font-bold"},ks={class:"text-2xl font-bold text-primary pl-2"},xs={class:"flex justify-content-between"},$s={__name:"Cart",props:{checkout:{type:Function,required:!0},isTakeaway:Boolean},setup(e,{expose:t}){const{locale:n}=pe(),g=rt(),{t:h}=pe(),i=re.cartDishs;D.freeCounts;const x=R([]),j=R(),c=R(),_=R(!1),C=R(!1),y=R(!0),m=R(""),P=R("");function W(I,k,T){let se="";const M=n.value,ee=D.customDishAPI.getCustomDishByName(I);for(const te of T){const de=ee.types[k].dishes.find(fe=>fe.dishid===te.id)[`name_${M}`];se=se+de+"/"}return se}function U(I,k){const T=n.value;return D.customDishAPI.getCustomDishByName(I).types[k][`typeName_${T}`]}const K=(I,k)=>{const T=x.value[I].quantity+k;T>=0&&(x.value[I].quantity=T)};function F(I){I&&j.value&&(j.value.dishNote=c.value?c.value:void 0),C.value=!1}function L(){c.value&&(c.value=void 0),j.value&&(j.value=void 0)}function S(I){j.value=I,c.value=j.value.dishNote?j.value.dishNote:void 0,C.value=!0}const B=e;t({showDishList:I=>{_.value=!0,x.value.length=0;for(let k=0;k<I.length;k++)x.value.push(I[k]);y.value=x.value.length==0&&i.length==0}});function s(I){re.removeItem(I)}function f(){B.isTakeaway?o():ie()}function o(){const I=[];i.value.forEach(k=>{I.push(k)}),x.value.forEach(k=>{k.quantity>0&&I.push(k)}),I.length<=0?oe.show_warn(h("notification.select_at_least_one")):(_.value=!1,g.push({path:"/paymentPage"}))}function ie(){B.checkout({name:m.value,note:P.value},I=>{I.success&&(i.value.forEach(k=>{k.dishNote=void 0}),x.value.forEach(k=>{k.dishNote=void 0}),P.value="",ne.cleanDishDataQty(),ue.deleteCookie("cartDish_normal"),re.cleanAll(),ue.deleteCookie("cartDish_custom"))})&&(_.value=!1)}function w(I){return I.subname!=""&&I.subname!="Default Title"?I.name+" "+I.subname:I.name}function d(){let I=0;return i.value.forEach(k=>{I+=k.discount?(k.dis_price?k.dis_price:0)*k.count:(k.price?k.price:0)*k.count}),x.value.forEach(k=>{I+=k.discount?(k.dis_price?k.dis_price:0)*k.quantity:(k.price?k.price:0)*k.quantity}),"€"+I.toFixed(2)}const q=I=>{I.target.src="/images/default.png"},E=I=>{const k=I.quantity;let T=3;return I.price>0&&(T=9),k>=T};return(I,k)=>(u(),b(Z,null,[N(r(ge),{class:"bg-primary-reverse text-sm md:text-lg lg:text-xl",visible:_.value,"onUpdate:visible":k[2]||(k[2]=T=>_.value=T),modal:"",header:I.$t("common.cart"),style:Le([{backgroundColor:"rgba(250, 250, 250, 1)",height:"100%",minWidth:"24rem"},{width:"80vw","max-width":"700px"}]),dismissableMask:!0},{footer:V(()=>[a("div",_s,[a("span",ws,v(I.$t("common.total"))+": ",1),a("span",ks,v(d()),1),N(r(Q),{icon:e.isTakeaway?"pi pi-wallet":"pi pi-plus",class:"p-button-success p-button-rounded ml-3",onClick:f,label:e.isTakeaway?r(h)("common.pay"):r(h)("common.send")},null,8,["icon","label"])])]),default:V(()=>[y.value?(u(),b("h2",Ga,"Cart is empty.")):z("",!0),a("div",Za,[(u(!0),b(Z,null,ae(r(i),(T,se)=>(u(),Y(r(zt),{style:{overflow:"hidden"},key:se},{title:V(()=>[be(v(I.$t(`common.${T.name.replace(/[^a-zA-Z0-9\s]/g,"").toLowerCase().replace(/\s+/g,"")}`)),1)]),subtitle:V(()=>[be(v(I.$t("common.price"))+" : "+v(T.price)+"€",1)]),content:V(()=>[r(D).customDishAPI.customDishes.value.find(M=>M.name==T.name)?(u(),b("div",Xa,[(u(!0),b(Z,null,ae(T.notesAndId,(M,ee)=>(u(),b("div",null,[T.notesAndId[ee].length!==0?(u(),b("span",Ya,v(U(T.name,ee))+": "+v(W(T.name,ee,M)),1)):z("",!0)]))),256)),a("div",null,[T.dishNote?(u(),b("span",es,v(I.$t("common.note"))+": "+v(T.dishNote),1)):z("",!0)])])):z("",!0)]),footer:V(()=>[a("div",ts,[e.isTakeaway?z("",!0):(u(),Y(r(Q),{key:0,label:r(h)("common.edit")+" "+r(h)("common.note"),severity:"contrast",onClick:M=>S(T)},null,8,["label","onClick"])),N(r(Q),{label:r(h)("common.remove"),severity:"danger",onClick:M=>s(T)},null,8,["label","onClick"])])]),_:2},1024))),128)),(u(!0),b(Z,null,ae(x.value,(T,se)=>(u(),b("div",{key:se,class:"p-2 border-round shadow-1 transition-all transition-duration-200 hover:shadow-3 flex flex-column gap-1"},[a("div",as,[a("img",{src:T.image,alt:T.name,class:"w-4rem h-4rem border-round flex-shrink-0",onError:q,style:{"object-fit":"cover","min-width":"4rem"}},null,40,ss),a("div",ns,[a("div",os,[a("div",is,[a("span",ls,v(w(T)),1)])]),a("div",rs,[T.discount?(u(),b("span",cs,"€"+v(Number(T.dis_price?T.dis_price:0).toFixed(2)),1)):z("",!0),T.discount?z("",!0):(u(),b("span",us,"€"+v(Number(T.price?T.price:0).toFixed(2)),1)),T.price>0?(u(),b("span",ds,"/uni.")):z("",!0)])])]),a("div",null,[T.dishNote?(u(),b("span",fs,v(r(h)("common.note")+": "+T.dishNote),1)):z("",!0)]),a("div",ps,[a("div",vs,[e.isTakeaway?z("",!0):(u(),Y(r(Q),{key:0,label:r(h)("common.edit")+" "+r(h)("common.note"),severity:"contrast",class:"w-3.5rem h-2rem",onClick:M=>S(T)},null,8,["label","onClick"]))]),a("div",hs,[N(r(Q),{icon:"pi pi-minus",rounded:"",disabled:T.quantity<=0,onClick:M=>K(se,-1),class:"w-2rem h-2rem"},null,8,["disabled","onClick"]),a("span",ms,v(T.quantity),1),N(r(Q),{icon:"pi pi-plus",rounded:"",disabled:E(T),onClick:M=>K(se,1),class:"w-2rem h-2rem"},null,8,["disabled","onClick"])])])]))),128))]),e.isTakeaway?z("",!0):(u(),b("div",bs,[N(r(at),{variant:"in"},{default:V(()=>[N(r(dt),{id:"in_label",modelValue:m.value,"onUpdate:modelValue":k[0]||(k[0]=T=>m.value=T),variant:"filled",maxlength:"20"},null,8,["modelValue"]),a("label",gs,v(r(h)("common.name")),1)]),_:1}),N(r(at),{variant:"in"},{default:V(()=>[N(r(tt),{id:"in_label",class:"min-w-full",rows:"5",modelValue:P.value,"onUpdate:modelValue":k[1]||(k[1]=T=>P.value=T),variant:"filled",maxlength:"200"},null,8,["modelValue"]),a("label",ys,v(r(h)("common.observation")),1)]),_:1})]))]),_:1},8,["visible","header"]),N(r(ge),{visible:C.value,"onUpdate:visible":k[6]||(k[6]=T=>C.value=T),header:r(h)("common.note"),onHide:k[7]||(k[7]=T=>L()),modal:"",dismissableMask:!0},{default:V(()=>[N(r(tt),{modelValue:c.value,"onUpdate:modelValue":k[3]||(k[3]=T=>c.value=T),rows:"5",cols:"30",placeholder:r(h)("common.edit")+" "+r(h)("common.note")+"...",maxlength:"100"},null,8,["modelValue","placeholder"]),a("div",xs,[N(r(Q),{label:r(h)("common.cancel"),severity:"danger",onClick:k[4]||(k[4]=T=>F(!1))},null,8,["label"]),N(r(Q),{label:r(h)("common.save"),severity:"primary",size:"sm",onClick:k[5]||(k[5]=T=>F(!0))},null,8,["label"])])]),_:1},8,["visible","header"])],64))}},Ts=Ce($s,[["__scopeId","data-v-d535b634"]]);var Cs=ze`
    .p-overlaybadge {
        position: relative;
    }

    .p-overlaybadge .p-badge {
        position: absolute;
        inset-block-start: 0;
        inset-inline-end: 0;
        transform: translate(50%, -50%);
        transform-origin: 100% 0;
        margin: 0;
        outline-width: dt('overlaybadge.outline.width');
        outline-style: solid;
        outline-color: dt('overlaybadge.outline.color');
    }

    .p-overlaybadge .p-badge:dir(rtl) {
        transform: translate(-50%, -50%);
    }
`,Ds={root:"p-overlaybadge"},Is=ye.extend({name:"overlaybadge",style:Cs,classes:Ds}),Ss={name:"OverlayBadge",extends:ft,style:Is,provide:function(){return{$pcOverlayBadge:this,$parentInstance:this}}},pt={name:"OverlayBadge",extends:Ss,inheritAttrs:!1,components:{Badge:ft}};function Ns(e,t,n,g,h,i){var x=$t("Badge");return u(),b("div",G({class:e.cx("root")},e.ptmi("root")),[he(e.$slots,"default"),N(x,G(e.$props,{pt:e.ptm("pcBadge")}),null,16,["pt"])],16)}pt.render=Ns;R([]);R("iniImages()");const As={class:"m-3"},Bs={class:"flex flex-column gap-2"},Ps={class:"w-full flex justify-content-center"},Ls={key:0,class:"max-w-19rem"},qs=["src"],zs={style:{width:"300px",height:"300px",background:"url(/boxImage/box.png)"}},Os={key:0,class:"flex align-items-center justify-content-center text-4xl font-bold text-white w-full h-full"},Es={key:1,class:"grid m-0 p-2"},Ms=["onClick"],Rs={class:"flex align-items-center justify-content-center font-bold m-0 p-0",style:{width:"94px",height:"94px"}},js=["src"],Fs={class:"flex flex-wrap justify-content-between align-items-center m-1"},Vs={class:"flex gap-1 align-items-center"},Hs={key:0},Ks={class:"font-bold mb-2"},Us={key:1,class:"flex justify-content-between gap-2 mt-3"},Ws={class:"font-bold mb-2"},Qs={class:"flex mr-2"},Js={class:"w-3rem text-xl text-center"},Gs={class:"font-bold block mb-2"},Zs={class:"flex flex-wrap"},Xs={key:2,class:"flex flex-wrap gap-2 mt-3"},Ys={class:"font-bold block mb-2"},en={class:"font-bold block mb-2 text-center"},tn={class:"flex flex-wrap gap-2 mt-3"},an={__name:"CustomDish",props:{currentCustomDish:Object,tabindex:Number},emits:["typeClick"],setup(e,{emit:t}){const{locale:n}=pe(),g=e,h=Tt(),{t:i}=pe();Ee(()=>{const w=D.getOrderMenuTab()[g.tabindex];D.customDishAPI.customDishes.value.map(q=>q.name).includes(w)&&(x.value=D.customDishAPI.customDishes.value.find(q=>q.name==w))});const x=R(null),j=ve(()=>x.boxImages),c=R(0),_=ve(()=>{var d;if(x.value==null)return 0;let w=(d=x.value)==null?void 0:d.initialPrice;for(const q of x.value.types??[])for(const E of q.dishes??[])E.selected&&(w+=E.price);return Number(w).toFixed(2)}),C=t,y=R(null),m=ve(()=>{const w=n.value,d=`title_${w}`,q=`description_${w}`;return x.value==null?{}:x.value.descriptions.map(E=>({title:E[d],descriptions:E.descriptions.map(I=>I[q]),image:E==null?void 0:E.image}))}),P=ve(()=>{var q,E;const w=Number(((q=x.value)==null?void 0:q.like)??0),d=Number(((E=x.value)==null?void 0:E.rate)??0);return d?w/d*5:0});function W(w,d){const q=n.value;return w[`${d}_${q}`]}function U(w,d,q){const E=w[d];if(E.selected){E.selected=!1;return}else{const k=w.filter(T=>T.selected).length;if(q===1){f(w),E.selected=!0;return}k<q&&(E.selected=!0)}}function K(w,d,q){const E=w.dishes;C("typeClick",w,d,E[d].selected),U(E,d,q)}function F(w){return w.selected}function L(){if(!o(x.value.types))return;const w=B(x.value.types),d=O(x.value.types);re.addItem({dishid:-1,name:x.value.name,category:g.currentCustomDish.category,count:c.value!==0?c.value:1,price:_.value,notes:w,notesAndId:d}),console.log("CART: ",re.cartDishs),s(x.value.types),oe.show({severity:"info",summary:"info",detail:i("customDishBibimbapVue.addToCartSuccessBibimbap")})}function S(w){return!w||!w.dishes?"":w.dishes.filter(q=>q.selected).map(q=>q.name).join(",")}function B(w){return w?w.map(d=>S(d)):[]}function O(w){return w?w.map(d=>d.dishes?d.dishes.filter(q=>q.selected).map(q=>({id:q.dishid,name:q.name})):[]):[]}function s(w){w&&w.forEach(d=>{d.dishes&&d.dishes.forEach(q=>{q.selected=!1})})}function f(w){w.forEach(d=>d.selected=!1)}function o(w){if(x.value.options.quantity&&c.value<=0)return oe.show({severity:"warn",detail:i("notification.quantity_must_be_positive")}),!1;for(const d of w)if(d.dishes.filter(E=>E.selected).length<d.minQuantity){const E=d.typeName;return oe.show({severity:"warn",detail:i("notification.select_type_of",{name:E})}),!1}return!0}function ie(w){w?D.customDishAPI.like(x.value.id)&&(y.value="like",h.add({severity:"success",summary:i("common.success"),detail:i("common.rate")+" "+i("common.success"),life:750})):D.customDishAPI.unLike(x.value.id)&&(y.value="unlike",h.add({severity:"success",summary:i("common.success"),detail:i("common.rate")+" "+i("common.success"),life:750}))}return(w,d)=>{var q,E,I,k,T,se;return u(),b("div",As,[a("div",Bs,[N(r(We),{class:"w-full max-w-xl mx-auto"},{default:V(()=>[(u(!0),b(Z,null,ae(m.value,(M,ee)=>(u(),Y(r(He),{key:ee,value:ee},{default:V(()=>[N(r(Ke),null,{default:V(()=>[be(v(M.title),1)]),_:2},1024),N(r(Ue),null,{default:V(()=>{var te;return[(u(!0),b(Z,null,ae(M.descriptions,(de,fe)=>(u(),b("p",{key:fe},v(de),1))),128)),a("div",Ps,[(te=M.image)!=null&&te.src?(u(),b("div",Ls,[a("img",{src:M.image.src,class:"w-full"},null,8,qs)])):z("",!0)])]}),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1}),((E=(q=x.value)==null?void 0:q.value)==null?void 0:E.name)==="MY BOX"?(u(),Y(r(We),{key:0,class:"w-full max-w-xl mx-auto"},{default:V(()=>[N(r(He),{value:"0"},{default:V(()=>[N(r(Ke),null,{default:V(()=>[be(" 🥩 "+v(w.$t("common.showMybox")),1)]),_:1}),N(r(Ue),null,{default:V(()=>[a("div",zs,[w.isEmptyArray(j.value)?(u(),b("div",Os,v(w.$t("common.myboxAlarm")),1)):z("",!0),w.isEmptyArray(j.value)?z("",!0):(u(),b("div",Es,[(u(!0),b(Z,null,ae(j.value,M=>(u(),b("div",{class:"col-4 p-0",onClick:ee=>w.imageSelectAction(M)},[a("div",Rs,[M?(u(),b("img",{key:0,class:"m-0 p-0",src:w.imagePath(M),style:{width:"82px",height:"82px"}},null,8,js)):z("",!0)])],8,Ms))),256))]))])]),_:1})]),_:1})]),_:1})):z("",!0)]),a("div",Fs,[a("div",Vs,[(u(),b(Z,null,ae(5,M=>a("i",{key:M,class:le(["pi invert-star",M<=Math.floor(P.value)?"pi-star-fill":M-.5<=P.value?"pi-star-half":"pi-star"]),style:{color:"black"}},null,2)),64)),a("p",null,"("+v((I=x.value)!=null&&I.rate?x.value.rate:0)+")",1)]),a("div",null,[N(r(Q),{text:"",icon:"pi pi-thumbs-up",severity:y.value==="like"?"success":"",onClick:d[0]||(d[0]=M=>ie(!0))},null,8,["severity"]),N(r(Q),{text:"",icon:"pi pi-thumbs-down",severity:y.value==="unlike"?"danger":"",onClick:d[1]||(d[1]=M=>ie(!1))},null,8,["severity"])])]),(k=x.value)!=null&&k.options.extraInfo?(u(),b("div",Hs,[a("label",Ks,v(x.value.options.extraInfo),1)])):z("",!0),(T=x.value)!=null&&T.options.quantity?(u(),b("div",Us,[a("div",null,[a("label",Ws,v(w.$t("common.quantity"))+" / "+v(w.$t("common.pieces")),1)]),a("div",Qs,[N(r(Q),{icon:"pi pi-minus",disabled:c.value<=0,onClick:d[2]||(d[2]=M=>{var ee;return c.value-=(ee=x.value)==null?void 0:ee.options.quantitySetp}),class:"w-2rem h-2rem"},null,8,["disabled"]),a("span",Js,v(c.value),1),N(r(Q),{icon:"pi pi-plus",disabled:c.value>=x.value.options.maxQuantity,onClick:d[3]||(d[3]=M=>{var ee;return c.value+=(ee=x.value)==null?void 0:ee.options.quantitySetp}),class:"w-2rem h-2rem"},null,8,["disabled"])])])):z("",!0),(u(!0),b(Z,null,ae((se=x.value)==null?void 0:se.types,(M,ee)=>(u(),b("div",{key:M.id},[qe(a("div",null,[a("label",Gs,v(ee+1)+". "+v(W(M,"typeName")),1),a("div",Zs,[(u(!0),b(Z,null,ae(M.dishes,(te,de)=>(u(),Y(r(Q),{key:de,onClick:fe=>K(M,de,c.value==0?M.maxQuantity:M.maxQuantity*c.value),class:le([{"p-button-primary":F(te),"p-button-outlined":!F(te)},"m-1"])},{default:V(()=>[a("p",{class:le({"text-gray-700":!F(te)})},v(W(te,"name")),3)]),_:2},1032,["onClick","class"]))),128))])],512),[[Ct,M.enable]])]))),128)),e.currentCustomDish.initialPrice!==0?(u(),b("div",Xs,[a("label",Ys,v(w.$t("common.price"))+":",1),a("label",en,v(_.value+"€"),1)])):z("",!0),a("div",tn,[N(r(Q),{icon:"pi pi-shopping-cart",onClick:d[4]||(d[4]=M=>L()),label:w.$t("common.addToCart"),class:"m-3",severity:"primary",raised:""},null,8,["label"])])])}}},sn=Ce(an,[["__scopeId","data-v-2b9e3b54"]]);var nn=ze`
    .p-tabs {
        display: flex;
        flex-direction: column;
    }

    .p-tablist {
        display: flex;
        position: relative;
    }

    .p-tabs-scrollable > .p-tablist {
        overflow: hidden;
    }

    .p-tablist-viewport {
        overflow-x: auto;
        overflow-y: hidden;
        scroll-behavior: smooth;
        scrollbar-width: none;
        overscroll-behavior: contain auto;
    }

    .p-tablist-viewport::-webkit-scrollbar {
        display: none;
    }

    .p-tablist-tab-list {
        position: relative;
        display: flex;
        background: dt('tabs.tablist.background');
        border-style: solid;
        border-color: dt('tabs.tablist.border.color');
        border-width: dt('tabs.tablist.border.width');
    }

    .p-tablist-content {
        flex-grow: 1;
    }

    .p-tablist-nav-button {
        all: unset;
        position: absolute !important;
        flex-shrink: 0;
        inset-block-start: 0;
        z-index: 2;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        background: dt('tabs.nav.button.background');
        color: dt('tabs.nav.button.color');
        width: dt('tabs.nav.button.width');
        transition:
            color dt('tabs.transition.duration'),
            outline-color dt('tabs.transition.duration'),
            box-shadow dt('tabs.transition.duration');
        box-shadow: dt('tabs.nav.button.shadow');
        outline-color: transparent;
        cursor: pointer;
    }

    .p-tablist-nav-button:focus-visible {
        z-index: 1;
        box-shadow: dt('tabs.nav.button.focus.ring.shadow');
        outline: dt('tabs.nav.button.focus.ring.width') dt('tabs.nav.button.focus.ring.style') dt('tabs.nav.button.focus.ring.color');
        outline-offset: dt('tabs.nav.button.focus.ring.offset');
    }

    .p-tablist-nav-button:hover {
        color: dt('tabs.nav.button.hover.color');
    }

    .p-tablist-prev-button {
        inset-inline-start: 0;
    }

    .p-tablist-next-button {
        inset-inline-end: 0;
    }

    .p-tablist-prev-button:dir(rtl),
    .p-tablist-next-button:dir(rtl) {
        transform: rotate(180deg);
    }

    .p-tab {
        flex-shrink: 0;
        cursor: pointer;
        user-select: none;
        position: relative;
        border-style: solid;
        white-space: nowrap;
        gap: dt('tabs.tab.gap');
        background: dt('tabs.tab.background');
        border-width: dt('tabs.tab.border.width');
        border-color: dt('tabs.tab.border.color');
        color: dt('tabs.tab.color');
        padding: dt('tabs.tab.padding');
        font-weight: dt('tabs.tab.font.weight');
        transition:
            background dt('tabs.transition.duration'),
            border-color dt('tabs.transition.duration'),
            color dt('tabs.transition.duration'),
            outline-color dt('tabs.transition.duration'),
            box-shadow dt('tabs.transition.duration');
        margin: dt('tabs.tab.margin');
        outline-color: transparent;
    }

    .p-tab:not(.p-disabled):focus-visible {
        z-index: 1;
        box-shadow: dt('tabs.tab.focus.ring.shadow');
        outline: dt('tabs.tab.focus.ring.width') dt('tabs.tab.focus.ring.style') dt('tabs.tab.focus.ring.color');
        outline-offset: dt('tabs.tab.focus.ring.offset');
    }

    .p-tab:not(.p-tab-active):not(.p-disabled):hover {
        background: dt('tabs.tab.hover.background');
        border-color: dt('tabs.tab.hover.border.color');
        color: dt('tabs.tab.hover.color');
    }

    .p-tab-active {
        background: dt('tabs.tab.active.background');
        border-color: dt('tabs.tab.active.border.color');
        color: dt('tabs.tab.active.color');
    }

    .p-tabpanels {
        background: dt('tabs.tabpanel.background');
        color: dt('tabs.tabpanel.color');
        padding: dt('tabs.tabpanel.padding');
        outline: 0 none;
    }

    .p-tabpanel:focus-visible {
        box-shadow: dt('tabs.tabpanel.focus.ring.shadow');
        outline: dt('tabs.tabpanel.focus.ring.width') dt('tabs.tabpanel.focus.ring.style') dt('tabs.tabpanel.focus.ring.color');
        outline-offset: dt('tabs.tabpanel.focus.ring.offset');
    }

    .p-tablist-active-bar {
        z-index: 1;
        display: block;
        position: absolute;
        inset-block-end: dt('tabs.active.bar.bottom');
        height: dt('tabs.active.bar.height');
        background: dt('tabs.active.bar.background');
        transition: 250ms cubic-bezier(0.35, 0, 0.25, 1);
    }
`,on={root:function(t){var n=t.props;return["p-tabs p-component",{"p-tabs-scrollable":n.scrollable}]}},ln=ye.extend({name:"tabs",style:nn,classes:on}),rn={name:"BaseTabs",extends:Te,props:{value:{type:[String,Number],default:void 0},lazy:{type:Boolean,default:!1},scrollable:{type:Boolean,default:!1},showNavigators:{type:Boolean,default:!0},tabindex:{type:Number,default:0},selectOnFocus:{type:Boolean,default:!1}},style:ln,provide:function(){return{$pcTabs:this,$parentInstance:this}}},vt={name:"Tabs",extends:rn,inheritAttrs:!1,emits:["update:value"],data:function(){return{d_value:this.value}},watch:{value:function(t){this.d_value=t}},methods:{updateValue:function(t){this.d_value!==t&&(this.d_value=t,this.$emit("update:value",t))},isVertical:function(){return this.orientation==="vertical"}}};function cn(e,t,n,g,h,i){return u(),b("div",G({class:e.cx("root")},e.ptmi("root")),[he(e.$slots,"default")],16)}vt.render=cn;var un={root:"p-tablist",content:function(t){var n=t.instance;return["p-tablist-content",{"p-tablist-viewport":n.$pcTabs.scrollable}]},tabList:"p-tablist-tab-list",activeBar:"p-tablist-active-bar",prevButton:"p-tablist-prev-button p-tablist-nav-button",nextButton:"p-tablist-next-button p-tablist-nav-button"},dn=ye.extend({name:"tablist",classes:un}),fn={name:"BaseTabList",extends:Te,props:{},style:dn,provide:function(){return{$pcTabList:this,$parentInstance:this}}},ht={name:"TabList",extends:fn,inheritAttrs:!1,inject:["$pcTabs"],data:function(){return{isPrevButtonEnabled:!1,isNextButtonEnabled:!0}},resizeObserver:void 0,watch:{showNavigators:function(t){t?this.bindResizeObserver():this.unbindResizeObserver()},activeValue:{flush:"post",handler:function(){this.updateInkBar()}}},mounted:function(){var t=this;setTimeout(function(){t.updateInkBar()},150),this.showNavigators&&(this.updateButtonState(),this.bindResizeObserver())},updated:function(){this.showNavigators&&this.updateButtonState()},beforeUnmount:function(){this.unbindResizeObserver()},methods:{onScroll:function(t){this.showNavigators&&this.updateButtonState(),t.preventDefault()},onPrevButtonClick:function(){var t=this.$refs.content,n=this.getVisibleButtonWidths(),g=je(t)-n,h=Math.abs(t.scrollLeft),i=g*.8,x=h-i,j=Math.max(x,0);t.scrollLeft=Xe(t)?-1*j:j},onNextButtonClick:function(){var t=this.$refs.content,n=this.getVisibleButtonWidths(),g=je(t)-n,h=Math.abs(t.scrollLeft),i=g*.8,x=h+i,j=t.scrollWidth-g,c=Math.min(x,j);t.scrollLeft=Xe(t)?-1*c:c},bindResizeObserver:function(){var t=this;this.resizeObserver=new ResizeObserver(function(){return t.updateButtonState()}),this.resizeObserver.observe(this.$refs.list)},unbindResizeObserver:function(){var t;(t=this.resizeObserver)===null||t===void 0||t.unobserve(this.$refs.list),this.resizeObserver=void 0},updateInkBar:function(){var t=this.$refs,n=t.content,g=t.inkbar,h=t.tabs;if(g){var i=Ve(n,'[data-pc-name="tab"][data-p-active="true"]');this.$pcTabs.isVertical()?(g.style.height=It(i)+"px",g.style.top=Ae(i).top-Ae(h).top+"px"):(g.style.width=St(i)+"px",g.style.left=Ae(i).left-Ae(h).left+"px")}},updateButtonState:function(){var t=this.$refs,n=t.list,g=t.content,h=g.scrollTop,i=g.scrollWidth,x=g.scrollHeight,j=g.offsetWidth,c=g.offsetHeight,_=Math.abs(g.scrollLeft),C=[je(g),Dt(g)],y=C[0],m=C[1];this.$pcTabs.isVertical()?(this.isPrevButtonEnabled=h!==0,this.isNextButtonEnabled=n.offsetHeight>=c&&parseInt(h)!==x-m):(this.isPrevButtonEnabled=_!==0,this.isNextButtonEnabled=n.offsetWidth>=j&&parseInt(_)!==i-y)},getVisibleButtonWidths:function(){var t=this.$refs,n=t.prevButton,g=t.nextButton,h=0;return this.showNavigators&&(h=((n==null?void 0:n.offsetWidth)||0)+((g==null?void 0:g.offsetWidth)||0)),h}},computed:{templates:function(){return this.$pcTabs.$slots},activeValue:function(){return this.$pcTabs.d_value},showNavigators:function(){return this.$pcTabs.scrollable&&this.$pcTabs.showNavigators},prevButtonAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.previous:void 0},nextButtonAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.next:void 0},dataP:function(){return Oe({scrollable:this.$pcTabs.scrollable})}},components:{ChevronLeftIcon:Ot,ChevronRightIcon:Et},directives:{ripple:ct}},pn=["data-p"],vn=["aria-label","tabindex"],hn=["data-p"],mn=["aria-orientation"],bn=["aria-label","tabindex"];function gn(e,t,n,g,h,i){var x=ut("ripple");return u(),b("div",G({ref:"list",class:e.cx("root"),"data-p":i.dataP},e.ptmi("root")),[i.showNavigators&&h.isPrevButtonEnabled?qe((u(),b("button",G({key:0,ref:"prevButton",type:"button",class:e.cx("prevButton"),"aria-label":i.prevButtonAriaLabel,tabindex:i.$pcTabs.tabindex,onClick:t[0]||(t[0]=function(){return i.onPrevButtonClick&&i.onPrevButtonClick.apply(i,arguments)})},e.ptm("prevButton"),{"data-pc-group-section":"navigator"}),[(u(),Y(ke(i.templates.previcon||"ChevronLeftIcon"),G({"aria-hidden":"true"},e.ptm("prevIcon")),null,16))],16,vn)),[[x]]):z("",!0),a("div",G({ref:"content",class:e.cx("content"),onScroll:t[1]||(t[1]=function(){return i.onScroll&&i.onScroll.apply(i,arguments)}),"data-p":i.dataP},e.ptm("content")),[a("div",G({ref:"tabs",class:e.cx("tabList"),role:"tablist","aria-orientation":i.$pcTabs.orientation||"horizontal"},e.ptm("tabList")),[he(e.$slots,"default"),a("span",G({ref:"inkbar",class:e.cx("activeBar"),role:"presentation","aria-hidden":"true"},e.ptm("activeBar")),null,16)],16,mn)],16,hn),i.showNavigators&&h.isNextButtonEnabled?qe((u(),b("button",G({key:1,ref:"nextButton",type:"button",class:e.cx("nextButton"),"aria-label":i.nextButtonAriaLabel,tabindex:i.$pcTabs.tabindex,onClick:t[2]||(t[2]=function(){return i.onNextButtonClick&&i.onNextButtonClick.apply(i,arguments)})},e.ptm("nextButton"),{"data-pc-group-section":"navigator"}),[(u(),Y(ke(i.templates.nexticon||"ChevronRightIcon"),G({"aria-hidden":"true"},e.ptm("nextIcon")),null,16))],16,bn)),[[x]]):z("",!0)],16,pn)}ht.render=gn;var yn={root:function(t){var n=t.instance,g=t.props;return["p-tab",{"p-tab-active":n.active,"p-disabled":g.disabled}]}},_n=ye.extend({name:"tab",classes:yn}),wn={name:"BaseTab",extends:Te,props:{value:{type:[String,Number],default:void 0},disabled:{type:Boolean,default:!1},as:{type:[String,Object],default:"BUTTON"},asChild:{type:Boolean,default:!1}},style:_n,provide:function(){return{$pcTab:this,$parentInstance:this}}},mt={name:"Tab",extends:wn,inheritAttrs:!1,inject:["$pcTabs","$pcTabList"],methods:{onFocus:function(){this.$pcTabs.selectOnFocus&&this.changeActiveValue()},onClick:function(){this.changeActiveValue()},onKeydown:function(t){switch(t.code){case"ArrowRight":this.onArrowRightKey(t);break;case"ArrowLeft":this.onArrowLeftKey(t);break;case"Home":this.onHomeKey(t);break;case"End":this.onEndKey(t);break;case"PageDown":this.onPageDownKey(t);break;case"PageUp":this.onPageUpKey(t);break;case"Enter":case"NumpadEnter":case"Space":this.onEnterKey(t);break}},onArrowRightKey:function(t){var n=this.findNextTab(t.currentTarget);n?this.changeFocusedTab(t,n):this.onHomeKey(t),t.preventDefault()},onArrowLeftKey:function(t){var n=this.findPrevTab(t.currentTarget);n?this.changeFocusedTab(t,n):this.onEndKey(t),t.preventDefault()},onHomeKey:function(t){var n=this.findFirstTab();this.changeFocusedTab(t,n),t.preventDefault()},onEndKey:function(t){var n=this.findLastTab();this.changeFocusedTab(t,n),t.preventDefault()},onPageDownKey:function(t){this.scrollInView(this.findLastTab()),t.preventDefault()},onPageUpKey:function(t){this.scrollInView(this.findFirstTab()),t.preventDefault()},onEnterKey:function(t){this.changeActiveValue(),t.preventDefault()},findNextTab:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,g=n?t:t.nextElementSibling;return g?Be(g,"data-p-disabled")||Be(g,"data-pc-section")==="activebar"?this.findNextTab(g):Ve(g,'[data-pc-name="tab"]'):null},findPrevTab:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,g=n?t:t.previousElementSibling;return g?Be(g,"data-p-disabled")||Be(g,"data-pc-section")==="activebar"?this.findPrevTab(g):Ve(g,'[data-pc-name="tab"]'):null},findFirstTab:function(){return this.findNextTab(this.$pcTabList.$refs.tabs.firstElementChild,!0)},findLastTab:function(){return this.findPrevTab(this.$pcTabList.$refs.tabs.lastElementChild,!0)},changeActiveValue:function(){this.$pcTabs.updateValue(this.value)},changeFocusedTab:function(t,n){At(n),this.scrollInView(n)},scrollInView:function(t){var n;t==null||(n=t.scrollIntoView)===null||n===void 0||n.call(t,{block:"nearest"})}},computed:{active:function(){var t;return Nt((t=this.$pcTabs)===null||t===void 0?void 0:t.d_value,this.value)},id:function(){var t;return"".concat((t=this.$pcTabs)===null||t===void 0?void 0:t.$id,"_tab_").concat(this.value)},ariaControls:function(){var t;return"".concat((t=this.$pcTabs)===null||t===void 0?void 0:t.$id,"_tabpanel_").concat(this.value)},attrs:function(){return G(this.asAttrs,this.a11yAttrs,this.ptmi("root",this.ptParams))},asAttrs:function(){return this.as==="BUTTON"?{type:"button",disabled:this.disabled}:void 0},a11yAttrs:function(){return{id:this.id,tabindex:this.active?this.$pcTabs.tabindex:-1,role:"tab","aria-selected":this.active,"aria-controls":this.ariaControls,"data-pc-name":"tab","data-p-disabled":this.disabled,"data-p-active":this.active,onFocus:this.onFocus,onKeydown:this.onKeydown}},ptParams:function(){return{context:{active:this.active}}},dataP:function(){return Oe({active:this.active})}},directives:{ripple:ct}};function kn(e,t,n,g,h,i){var x=ut("ripple");return e.asChild?he(e.$slots,"default",{key:1,dataP:i.dataP,class:le(e.cx("root")),active:i.active,a11yAttrs:i.a11yAttrs,onClick:i.onClick}):qe((u(),Y(ke(e.as),G({key:0,class:e.cx("root"),"data-p":i.dataP,onClick:i.onClick},i.attrs),{default:V(function(){return[he(e.$slots,"default")]}),_:3},16,["class","data-p","onClick"])),[[x]])}mt.render=kn;const xn={class:"fixed top-0 left-0 w-full bg-primary-reverse",style:{"z-index":"10"}},$n={class:"grid mt-1 ml-1"},Tn={class:"max-w-3rem flex align-items-center"},Cn=["src"],Dn={class:"flex align-items-center"},In={key:0,class:"text-color font-bold p-1"},Sn={key:1,class:"text-color font-bold p-1"},Nn={class:"card flex mr-3 flex align-items-center",style:{"margin-left":"auto"}},An={style:{display:"flex","align-items":"center"}},Bn={style:{"flex-grow":"1",width:"0",overflow:"hidden"}},Pn={class:"mt-2"},Ln={class:"flex justify-content-end mt-2"},qn={class:"flex inline-flex items-center justify-center gap-2"},zn={class:"flex align-items-center"},On={class:"flex flex-column"},En={class:"text-sm p-2"},Mn={class:"text-sm p-2"},Rn={class:"flex items-center gap-4 mb-4 p-2"},jn={class:"flex flex-column gap-3"},Fn={__name:"HeaderTabs",props:{types:Array,typeIndex:Number,tableId:String,tabItems:Array},emits:["clickType","switchToWelcome"],setup(e,{emit:t}){const{t:n}=pe(),g=R(!1);function h(){var B;const L=D.currentPage.value,S=(B=L==null?void 0:L.data)==null?void 0:B.logoPath;return S?D.pathFormated(S,L.imagesPath):"/images/logo_logo.png"}function i(){return D.getTable()}const x=R(),j=ve(()=>[{label:n("common.options"),items:[{label:n("common.pay"),icon:"pi pi-wallet",command:()=>{W()}},{label:n("common.call"),icon:"pi pi-user-plus",command:()=>{D.send_cmd(i(),{cmd:"call"},L=>{L.success?oe.show_info(n("notification.call_msg")):oe.show_warn(L.data)})}}]}]),c=L=>{x.value.toggle(L)},_=L=>{C.value.toggle(L)},C=R(),y=R(!1),m=R(),P=R();function W(){y.value=!0}function U(){L(m.value)?D.send_cmd(i(),{cmd:"pay",nif:m.value,note:P.value},S=>{S.success?(oe.show_info(n("notification.pay_msg")),y.value=!1):oe.show_error(n("common.failed"))}):oe.show_warn(n("notification.cancel_msg"));function L(S){return!S||S.toString().length===9||S.toString().length===0}}function K(){P.value&&(P.value=void 0)}function F(){g.value=!0}return(L,S)=>(u(),b(Z,null,[a("div",xn,[a("div",$n,[a("div",Tn,[a("img",{src:h(),class:"w-full",clickble:"",onClick:S[0]||(S[0]=()=>L.$emit("switchToWelcome"))},null,8,Cn)]),a("div",Dn,[e.tableId?(u(),b("p",In,v(L.$t("common.table"))+": "+v(e.tableId),1)):z("",!0),e.tableId?z("",!0):(u(),b("p",Sn,v(L.$t("common.takeAway")),1))]),a("div",Nn,[e.tableId?(u(),Y(r(Q),{key:0,icon:"pi pi-bell",rounded:"","aria-label":"Filter",onClick:c,"aria-haspopup":"true","aria-controls":"overlay_menu"})):(u(),Y(r(Q),{key:1,icon:"pi pi-question",rounded:"",onClick:F})),N(r(st),{ref_key:"menu",ref:x,id:"overlay_menu",model:j.value,popup:!0},null,8,["model"])])]),a("div",An,[a("div",null,[N(r(Q),{icon:"pi pi-bars",variant:"text",rounded:"","aria-label":"Filter",onClick:_,"aria-haspopup":"true","aria-controls":"tab_menu"}),N(r(st),{ref_key:"tabMenu",ref:C,id:"tab_menu",model:e.tabItems,popup:!0},null,8,["model"])]),a("div",Bn,[N(r(vt),{value:e.typeIndex,scrollable:"",showNavigators:!1},{default:V(()=>[N(r(ht),null,{default:V(()=>[(u(!0),b(Z,null,ae(e.types,(B,O)=>(u(),Y(r(mt),{value:O,onClick:()=>L.$emit("clickType",O),class:"text-sm md:text-lg lg:text-xl"},{default:V(()=>[be(v(B),1)]),_:2},1032,["value","onClick"]))),256))]),_:1})]),_:1},8,["value"])])])]),N(r(ge),{visible:y.value,"onUpdate:visible":S[4]||(S[4]=B=>y.value=B),header:"结账",class:"flex flex-column",modal:!0,dismissableMask:!0,onHide:K},{default:V(()=>[a("div",null,[S[6]||(S[6]=a("label",null,"NIF:",-1)),N(r(Mt),{modelValue:m.value,"onUpdate:modelValue":S[1]||(S[1]=B=>m.value=B),inputId:"withoutgrouping",useGrouping:!1,fluid:"",class:"w-full m-1"},null,8,["modelValue"])]),a("div",Pn,[a("label",null,v(L.$t("common.note"))+":",1),N(r(dt),{type:"text",modelValue:P.value,"onUpdate:modelValue":S[2]||(S[2]=B=>P.value=B),class:"w-full m-1"},null,8,["modelValue"])]),a("div",Ln,[N(r(Q),{label:r(n)("common.send"),onClick:S[3]||(S[3]=B=>U())},null,8,["label"])])]),_:1},8,["visible"]),N(r(ge),{visible:g.value,"onUpdate:visible":S[5]||(S[5]=B=>g.value=B),modal:"",dismissableMask:"",class:"h-full",style:{width:"90vw",maxWidth:"40rem",minWidth:"20rem"},draggable:!1},{header:V(()=>[a("div",qn,[N(r(Qe),{icon:"pi pi-question",shape:"circle"}),a("span",zn,v(r(n)("takeawayHelper.dialogTitle")),1)])]),default:V(()=>[a("div",On,[a("span",En,v(r(n)("takeawayHelper.introduction")),1),a("span",Mn,v(r(n)("takeawayHelper.note_t"))+" "+v(r(n)("takeawayHelper.note_1")),1),a("div",Rn,[N(r(We),{class:"w-full max-w-xl mx-auto"},{default:V(()=>[N(r(He),{value:"0"},{default:V(()=>[N(r(Ke),{class:"text-sm"},{default:V(()=>[be(v(r(n)("takeawayHelper.question_1")),1)]),_:1}),N(r(Ue),{class:"p-1"},{default:V(()=>[a("div",jn,[a("span",null,v(r(n)("takeawayHelper.q_1_request_1")),1),a("span",null,v(r(n)("takeawayHelper.q_1_request_2")),1),a("span",null,v(r(n)("takeawayHelper.q_1_request_3")),1),a("span",null,v(r(n)("takeawayHelper.q_1_request_4")),1),a("span",null,v(r(n)("takeawayHelper.q_1_request_5")),1)])]),_:1})]),_:1})]),_:1})])])]),_:1},8,["visible"])],64))}},Vn={__name:"SwipeHint",props:{size:{type:String,default:"8rem"},duration:{type:Number,default:6e3},position:{type:String,default:"bottom"}},setup(e){const t=e,n=R(!0);Ee(()=>{t.duration>0&&setTimeout(()=>{n.value=!1},t.duration);const h=()=>{n.value=!1,window.removeEventListener("touchstart",h)};window.addEventListener("touchstart",h)});const g=ve(()=>{let h={left:"50%",transform:"translateX(-50%)",zIndex:99999,opacity:.5,pointerEvents:"none",textAlign:"center",position:"fixed"};return t.position==="top"?h.top="15%":t.position==="center"?(h.top="50%",h.transform="translate(-50%, -50%)"):h.bottom="15%",h});return(h,i)=>n.value?(u(),b("div",{key:0,class:"swipe-hint",style:Le(g.value)},[a("div",{class:"hand",style:Le({width:e.size,height:e.size,backgroundImage:"url(/images/hand_finger.png)"})},null,4)],4)):z("",!0)}},Hn=Ce(Vn,[["__scopeId","data-v-e5f3ff45"]]),Kn={class:"w-full h-full flex flex-column p-1"},Un={class:"swiper-container-wrapper"},Wn={class:"fixed bottom-0 left-0 w-full h-3rem bg-primary-reverse p-3 z-[9999]"},Qn={class:"h-full flex align-items-center justify-content-between w-full"},Jn={class:"m-2"},Gn={class:"m-2"},Zn={style:{"max-height":"60vh","overflow-y":"auto","padding-bottom":"60px"}},Xn={class:"flex flex-column border-bottom-1"},Yn={key:0,class:"flex justify-content-between"},eo={class:"flex flex-column"},to={class:"font-bold"},ao={class:"text-right"},so={key:1,class:"flex justify-content-between"},no={class:"flex flex-column"},oo={class:"font-bold"},io={class:"text-right"},lo={key:0},ro={key:1,class:"flex flex-column"},co={class:"flex flex-column"},uo={class:"font-bold"},fo={class:"text-right"},po={class:"total-footer bg-primary-reverse"},lt=5,Pe="order_time_key",vo={__name:"HomePage",setup(e){const t=rt(),n=Pt(),{t:g}=pe(),{locale:h}=pe(),i=R(0),x=R(!1),j=R([""]),c=R(0),_=re.cartItemCount,C=R(!1),y=R([]),m=R(0),P=R({}),W=R(!1),U=ne.dishDatas,K=R(D.orderMenuTab),F=R(null),L=R(null),S=R([]),B=R([]),O=R([]);let s=null;const f=l=>{c.value=l.activeIndex,fe()},o=l=>{s=l};Ye(c,l=>{s&&s.activeIndex!==l&&s.slideTo(l);let p=D.getOrderMenuTab()[l];D.customDishAPI.customDishes.value.map($=>$.name).includes(p)?(W.value=!0,P.value=D.customDishAPI.customDishes.value.find($=>$.name==p)):W.value=!1});const ie=(l,p,A,$)=>{D.rateDish(l,p,A),$&&oe.show_success(g("notification.rating_submitted"))},w=(l,p,A)=>{if(P.value.name=="XIAOXIONG® RAMEN"&&l.id===1){const $=l.dishes[p];let H;$.dishid==47?A?H=d(3,!0,1):H=d(3,!1,1):H=d(3,!0,1),H!==void 0&&q(H)}if(P.value.name=="Menu Almoço"&&l.id===3){const $=l.dishes[p];let H;[1427,41].includes($.dishid)?A?H=d(4,!0,0):H=d(4,!1,0):H=d(4,!0,0),H!==void 0&&q(H)}};function d(l,p,A){if(P.value={...P.value,types:P.value.types.map($=>$.id===l?{...$,enable:p,minQuantity:p?A:0}:$)},p===!1)return l}function q(l){!P.value||!Array.isArray(P.value.types)||(P.value={...P.value,types:P.value.types.map(p=>p.id===l?{...p,dishes:p.dishes.map(A=>({...A,selected:!1}))}:p)})}function E(l){let p=D.getOrderMenuTab()[l];if(D.customDishAPI.customDishes.value.map(X=>X.name).includes(p)?(W.value=!0,P.value=D.customDishAPI.customDishes.value.find(X=>X.name==p)):W.value=!1,D.getMenu().length==0){console.log("exit");return}let H=U.value[l].mainDishes;ne.showDishList(H)}const I=()=>{D.refreshTableFromServer(),D.getTableTotalAmount(m),C.value=!0},k=(l,p,A)=>{},T=l=>{let p=l.id;l.org_id&&(p=l.org_id);for(let A=0;A<U.value.length;A++)if(U.value[A].id==p)for(const $ in l){let H=$;$.startsWith("note")&&(H=H.replace("note","description")),U.value[A][H]=l[$]}};function se(){return new Promise(l=>{let p=()=>{const A=D.formatedMenu.value;A.length>0?l(A):setTimeout(p,200)};p()})}function M(){return new Promise(l=>{let p=()=>{const A=D.getOrderMenuTab();A.length>0?l(A):setTimeout(p,200)};p()})}const ee=ve(()=>l=>{const p=D.dictinaryAPI.dictinary.value[l];return p?p[`text_${h.value.toLowerCase()}`]:l});Ye([()=>D.formatedMenu.value,()=>h.value,()=>D.orderMenuTab],([l,p])=>{if(!l||l.length===0){O.value=[];return}const A={},$=D.orderMenuTab,H=l.map(X=>({...X,mainDishes:X.dishes.map(ce=>{const J=ce.dish;if(A[J.id])return A[J.id];const me={...J,defaultName:J.name,defaultSubname:J.subname,name:te(J,"name",p),note:te(J,"note",p),subname:te(J,"subname",p),quantity:0},_e=ce.subItems.map(Ze=>{const Re=Ze;return{...Ze,defaultName:J.name,defaultSubname:J.subname,name:te(Re,"name",p),note:te(Re,"note",p),subname:te(Re,"subname",p),quantity:0}}),Me={...ce,dish:me,subItems:_e};return A[Me.id]=Me,Me})}));Se(!0),O.value=H,U.value=O.value,j.value=D.orderMenuTab,K.value=$.map(X=>{const ce=D.dictinaryAPI.dictinary.value[X];return ce?ce[`text_${h.value.toLowerCase()}`]:X}),console.log("languagedMenu updated via watch:",O.value),et(()=>{i.value++,s&&typeof s.update=="function"&&(s.update(),s.slideTo(c.value))})},{immediate:!0,deep:!0});function te(l,p,A){return l?A==="en"?l[`${p}_en`]||l[p]:A==="zh"&&l[`${p}_cn`]||l[p]:""}async function de(){await se();const l=await M();D.isTakeaway(),D.onMenuItemChanged=T,D.onRatingChanged=k,kt();for(let p=0;p<l.length;p++){const A=p;y.value.push({label:ee.value(l[p]),command:()=>{Je(A),fe()}})}i.value++}const fe=()=>{et(()=>{const l=document.querySelector(".p-tablist-viewport"),p=document.querySelector(".p-tab.p-tab-active");if(l&&p){const A=p.offsetLeft-l.offsetWidth/2+p.offsetWidth/2;l.scrollTo({left:A,behavior:"smooth"})}window.scrollTo({top:0,behavior:"smooth"})})},Je=l=>{E(l),c.value=l,fe()},bt=()=>{var l=ne.getAllIncrementedDish();L.value.showDishList(l)};function De(){return D.getTable()}D.params.port,F.value=D.table.value.order;function gt(l){var p=g("notification.too_fast",{remainTime:l});oe.show_warn(p)}const yt=(l,p)=>{const A=[];for(let J=0;J<re.cartDishs.value.length;J++){var $=re.cartDishs.value[J];const me=D.formateCustomDishNotes($),_e=$.dis_count?$.dis_price:$.price;A.push({dishid:$.dishid,name:$.name,quantity:$.count,notes:me,limit:$.limit,price:_e,dishNote:$.dishNote,category:$.category})}const H=ne.getAllIncrementedDish();for(let J=0;J<H.length;J++){var $=H[J];if($.quantity>0){const _e=$.dis_count?$.dis_price:$.price;A.push({dishid:$.id,name:$.defaultName,quantity:$.quantity,limit:$.limit,price:_e,dishNote:$.dishNote})}}if(A.length===0)return oe.show_warn(g("notification.select_at_least_one")),!1;console.log("cart item:",A);const X=JSON.parse(ue.getCookie(Pe)||"{}"),ce=Date.now();if(!X.startTime||ce-X.startTime>lt*1e3)X.startTime=ce,X.uniCode||(X.uniCode=Date.now().toString(36)+Math.random().toString(36).substring(2,5));else{const J=lt-parseInt((ce-X.startTime)/1e3);gt(J);return}return ue.setCookie(Pe,JSON.stringify(X)),x.value=!0,D.submit_order({uniCode:X.uniCode,name:l.name,note:l.note,table:De(),items:A},J=>{const me=JSON.parse(ue.getCookie(Pe)||"{}");me.uniCode=void 0,ue.setCookie(Pe,JSON.stringify(me)),p(J)}),!0};function _t(){const l=ue.getCookie("language");l&&(h.value=l)}function Ge(){for(let l=0;l<U.value.length;l++){const p=U.value[l];p.quantity=0}x.value=!1,re.cleanAll()}Ee(async()=>{_t(),await de(),E(c.value),D.clear_order_data=()=>{Ge()},D.setOnOrderConfirmed(l=>{Ge();const p=l;oe.show_success(g("notification.order_submitted",{id:p}))}),D.setOnShowError(l=>{x.value=!1,oe.show_error(l)})});function wt(){ue.deleteCookie("login_time");const l=n.query.table;l?t.push({path:"/",query:{table:l}}):t.push({path:"/takeReserve"})}function Ie(l,p=!0,A=!1){const $=p?re.cartDishs.value:ne.getIdsAndQuantity(ne.getAllIncrementedDish());if(A&&$.length===0)return;const H=ot.compressToEncodedURIComponent(JSON.stringify($));ue.setCookie(l,H)}function Se(l=!1){D.isTakeaway()?(Ie("take_cartDish_normal",!1,l),Ie("take_cartDish_custom",!0,l)):(Ie("cartDish_normal",!1,l),Ie("cartDish_custom",!0,l))}function Ne(l,p=!0){const A=ue.getCookie(l);if(!A)return;const $=JSON.parse(ot.decompressFromEncodedURIComponent(A));if($&&$!=="undefined")try{p?re.cartDishs.value=$:ne.updateDishDataQty($)}catch(H){console.error("解析菜失败:",H)}}function kt(){D.isTakeaway()?(Ne("take_cartDish_normal",!1),Ne("take_cartDish_custom")):(Ne("cartDish_normal",!1),Ne("cartDish_custom"))}return Bt(()=>{Se()}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&Se()}),window.addEventListener("beforeunload",l=>{Se(),D.cleanup()}),(l,p)=>(u(),b(Z,null,[a("div",Kn,[(u(),Y(Fn,{key:i.value,types:K.value,typeIndex:c.value,tabItems:y.value,tableId:De(),onClickType:Je,onSwitchToWelcome:wt},null,8,["types","typeIndex","tabItems","tableId"])),p[2]||(p[2]=a("div",{class:"pb-8"},null,-1)),p[3]||(p[3]=a("div",{class:"pb-4 sm:pb-5 md:pb-5 lg:pb-5"},null,-1)),N(Hn,{duration:3e3,position:"center",size:"3rem"}),a("div",Un,[(u(),Y(r(Lt),{key:`swiper-${K.value.length}-${i.value}`,"space-between":20,"centered-slides":"","grab-cursor":!0,class:"w-full",autoHeight:!0,onSlideChange:f,onSwiper:o,"initial-slide":c.value},{default:V(()=>[(u(!0),b(Z,null,ae(K.value,(A,$)=>(u(),Y(r(qt),{key:$},{default:V(()=>[Math.abs(c.value-$)<=1&&(!W.value||c.value!==$)?(u(),Y(Ja,{key:0,rateDish:ie,likedItemsRef:S.value,dislikedItemsRef:B.value,tabIndex:$},null,8,["likedItemsRef","dislikedItemsRef","tabIndex"])):Math.abs(c.value-$)<=1&&W.value&&c.value===$?(u(),Y(sn,{key:1,currentCustomDish:P.value,onTypeClick:w,tabindex:$},null,8,["currentCustomDish","tabindex"])):z("",!0)]),_:2},1024))),128))]),_:1},8,["initial-slide"]))]),p[4]||(p[4]=a("div",{style:{height:"60px"}},null,-1)),a("div",Wn,[a("div",Qn,[a("div",Jn,[De()?(u(),Y(r(Q),{key:0,label:l.$t("common.orders"),icon:"pi pi-list",class:"p-button-secondary",onClick:I},null,8,["label"])):z("",!0)]),a("div",Gn,[N(r(pt),{value:r(_),severity:"danger",onClick:bt},{default:V(()=>p[1]||(p[1]=[a("i",{class:"pi pi-shopping-cart",style:{"font-size":"2rem"}},null,-1)])),_:1,__:[1]},8,["value"])])])])]),N(Ts,{ref_key:"cartRef",ref:L,checkout:yt,isTakeaway:!De()},null,8,["isTakeaway"]),N(r(ge),{visible:C.value,"onUpdate:visible":p[0]||(p[0]=A=>C.value=A),header:l.$t("common.completedOrders"),modal:"",style:{width:"80vw","max-width":"700px"}},{default:V(()=>{var A,$;return[a("div",Zn,[a("div",Xn,[(A=m.value.adultPrice)!=null&&A.quantity&&m.value.adultPrice.quantity!=0?(u(),b("div",Yn,[a("div",eo,[a("span",to,v(l.$t("common.adult")),1),a("small",null,v(l.$t("common.quantity"))+": "+v(m.value.adultPrice.quantity),1)]),a("div",ao,[a("span",null,"€"+v((Number(m.value.adultPrice.price)*m.value.adultPrice.quantity).toFixed(2)),1)])])):z("",!0),($=m.value.childrenPrice)!=null&&$.quantity&&m.value.childrenPrice.quantity!=0?(u(),b("div",so,[a("div",no,[a("span",oo,v(l.$t("common.children")),1),a("small",null,v(l.$t("common.quantity"))+": "+v(m.value.childrenPrice.quantity),1)]),a("div",io,[a("span",null,"€"+v((Number(m.value.childrenPrice.price)*m.value.childrenPrice.quantity).toFixed(2)),1)])])):z("",!0)]),r(D).table.value.order.length===0?(u(),b("div",lo,v(l.$t("common.noOrders")),1)):(u(),b("div",ro,[(u(!0),b(Z,null,ae(r(D).table.value.order,(H,X)=>(u(),b("div",{key:X,class:"flex justify-content-between border-bottom-1 pb-2"},[a("div",co,[a("span",uo,v(r(D).getDishName(H)),1),a("small",null,v(l.$t("common.quantity"))+": "+v(H.quantity),1)]),a("div",fo,[a("span",null,"€"+v((H.price*H.quantity).toFixed(2)),1)])]))),128))]))]),a("div",po,v(l.$t("common.total"))+": €"+v(m.value.total),1)]}),_:1},8,["visible","header"])],64))}},Do=Ce(vo,[["__scopeId","data-v-145c1551"]]);export{Do as default};
