import{y as gt,B as He,z as ot,A as yt,g as O,s as $,v as ve,j as ee,D as qe,E as be,G as tt,i as u,t as E,p as Ae,u as Ne,r as Z,o as nt,a as Y,h as K,F as fe,q as Ie,l as _,k as se,H as ht,x as Ke,m as ke,f as ln,d as Pe,I as ta,J as na,w as ze,c as De,K as mt,L as aa,R as un,M as Et,N as ra,O as Pt,P as oa,Q as ct,S as sa,T as Xt,U as cn,V as ia,W as la,X as dt,Y as ua,Z as ca,n as Zt,b as da,e as fa}from"./index-DPvrtvT6.js";import{s as Oe,a as Ft}from"./index-CBqBaMru.js";import{s as ce,a as dn}from"./index-CGJQvp4q.js";import{D as xe,c as Se,s as en,a as va}from"./index-Di_xZGKV.js";import{_ as st}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{s as pa,a as ha}from"./index-ChdRNUuT.js";import{s as tn}from"./index-C3zGBt2v.js";import{a as Ot,b as Mt,c as zt,s as qt,d as ma,S as ba}from"./pagination-2tb0L_i6.js";import{s as ga}from"./index-BNrI_brh.js";import{s as ya}from"./index-C0044FRA.js";import{s as Nt}from"./index-BSeBXqg5.js";import{s as _a}from"./index-D9eUaZCP.js";var ft=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fn(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Rt={exports:{}},nn;function wa(){return nn||(nn=1,function(n){var s=function(){var f=String.fromCharCode,S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",h={};function g(c,k){if(!h[c]){h[c]={};for(var q=0;q<c.length;q++)h[c][c.charAt(q)]=q}return h[c][k]}var z={compressToBase64:function(c){if(c==null)return"";var k=z._compress(c,6,function(q){return S.charAt(q)});switch(k.length%4){default:case 0:return k;case 1:return k+"===";case 2:return k+"==";case 3:return k+"="}},decompressFromBase64:function(c){return c==null?"":c==""?null:z._decompress(c.length,32,function(k){return g(S,c.charAt(k))})},compressToUTF16:function(c){return c==null?"":z._compress(c,15,function(k){return f(k+32)})+" "},decompressFromUTF16:function(c){return c==null?"":c==""?null:z._decompress(c.length,16384,function(k){return c.charCodeAt(k)-32})},compressToUint8Array:function(c){for(var k=z.compress(c),q=new Uint8Array(k.length*2),d=0,v=k.length;d<v;d++){var F=k.charCodeAt(d);q[d*2]=F>>>8,q[d*2+1]=F%256}return q},decompressFromUint8Array:function(c){if(c==null)return z.decompress(c);for(var k=new Array(c.length/2),q=0,d=k.length;q<d;q++)k[q]=c[q*2]*256+c[q*2+1];var v=[];return k.forEach(function(F){v.push(f(F))}),z.decompress(v.join(""))},compressToEncodedURIComponent:function(c){return c==null?"":z._compress(c,6,function(k){return T.charAt(k)})},decompressFromEncodedURIComponent:function(c){return c==null?"":c==""?null:(c=c.replace(/ /g,"+"),z._decompress(c.length,32,function(k){return g(T,c.charAt(k))}))},compress:function(c){return z._compress(c,16,function(k){return f(k)})},_compress:function(c,k,q){if(c==null)return"";var d,v,F={},G={},ne="",te="",Q="",J=2,re=3,X=2,w=[],p=0,l=0,y;for(y=0;y<c.length;y+=1)if(ne=c.charAt(y),Object.prototype.hasOwnProperty.call(F,ne)||(F[ne]=re++,G[ne]=!0),te=Q+ne,Object.prototype.hasOwnProperty.call(F,te))Q=te;else{if(Object.prototype.hasOwnProperty.call(G,Q)){if(Q.charCodeAt(0)<256){for(d=0;d<X;d++)p=p<<1,l==k-1?(l=0,w.push(q(p)),p=0):l++;for(v=Q.charCodeAt(0),d=0;d<8;d++)p=p<<1|v&1,l==k-1?(l=0,w.push(q(p)),p=0):l++,v=v>>1}else{for(v=1,d=0;d<X;d++)p=p<<1|v,l==k-1?(l=0,w.push(q(p)),p=0):l++,v=0;for(v=Q.charCodeAt(0),d=0;d<16;d++)p=p<<1|v&1,l==k-1?(l=0,w.push(q(p)),p=0):l++,v=v>>1}J--,J==0&&(J=Math.pow(2,X),X++),delete G[Q]}else for(v=F[Q],d=0;d<X;d++)p=p<<1|v&1,l==k-1?(l=0,w.push(q(p)),p=0):l++,v=v>>1;J--,J==0&&(J=Math.pow(2,X),X++),F[te]=re++,Q=String(ne)}if(Q!==""){if(Object.prototype.hasOwnProperty.call(G,Q)){if(Q.charCodeAt(0)<256){for(d=0;d<X;d++)p=p<<1,l==k-1?(l=0,w.push(q(p)),p=0):l++;for(v=Q.charCodeAt(0),d=0;d<8;d++)p=p<<1|v&1,l==k-1?(l=0,w.push(q(p)),p=0):l++,v=v>>1}else{for(v=1,d=0;d<X;d++)p=p<<1|v,l==k-1?(l=0,w.push(q(p)),p=0):l++,v=0;for(v=Q.charCodeAt(0),d=0;d<16;d++)p=p<<1|v&1,l==k-1?(l=0,w.push(q(p)),p=0):l++,v=v>>1}J--,J==0&&(J=Math.pow(2,X),X++),delete G[Q]}else for(v=F[Q],d=0;d<X;d++)p=p<<1|v&1,l==k-1?(l=0,w.push(q(p)),p=0):l++,v=v>>1;J--,J==0&&(J=Math.pow(2,X),X++)}for(v=2,d=0;d<X;d++)p=p<<1|v&1,l==k-1?(l=0,w.push(q(p)),p=0):l++,v=v>>1;for(;;)if(p=p<<1,l==k-1){w.push(q(p));break}else l++;return w.join("")},decompress:function(c){return c==null?"":c==""?null:z._decompress(c.length,32768,function(k){return c.charCodeAt(k)})},_decompress:function(c,k,q){var d=[],v=4,F=4,G=3,ne="",te=[],Q,J,re,X,w,p,l,y={val:q(0),position:k,index:1};for(Q=0;Q<3;Q+=1)d[Q]=Q;for(re=0,w=Math.pow(2,2),p=1;p!=w;)X=y.val&y.position,y.position>>=1,y.position==0&&(y.position=k,y.val=q(y.index++)),re|=(X>0?1:0)*p,p<<=1;switch(re){case 0:for(re=0,w=Math.pow(2,8),p=1;p!=w;)X=y.val&y.position,y.position>>=1,y.position==0&&(y.position=k,y.val=q(y.index++)),re|=(X>0?1:0)*p,p<<=1;l=f(re);break;case 1:for(re=0,w=Math.pow(2,16),p=1;p!=w;)X=y.val&y.position,y.position>>=1,y.position==0&&(y.position=k,y.val=q(y.index++)),re|=(X>0?1:0)*p,p<<=1;l=f(re);break;case 2:return""}for(d[3]=l,J=l,te.push(l);;){if(y.index>c)return"";for(re=0,w=Math.pow(2,G),p=1;p!=w;)X=y.val&y.position,y.position>>=1,y.position==0&&(y.position=k,y.val=q(y.index++)),re|=(X>0?1:0)*p,p<<=1;switch(l=re){case 0:for(re=0,w=Math.pow(2,8),p=1;p!=w;)X=y.val&y.position,y.position>>=1,y.position==0&&(y.position=k,y.val=q(y.index++)),re|=(X>0?1:0)*p,p<<=1;d[F++]=f(re),l=F-1,v--;break;case 1:for(re=0,w=Math.pow(2,16),p=1;p!=w;)X=y.val&y.position,y.position>>=1,y.position==0&&(y.position=k,y.val=q(y.index++)),re|=(X>0?1:0)*p,p<<=1;d[F++]=f(re),l=F-1,v--;break;case 2:return te.join("")}if(v==0&&(v=Math.pow(2,G),G++),d[l])ne=d[l];else if(l===F)ne=J+J.charAt(0);else return null;te.push(ne),d[F++]=J+ne.charAt(0),v--,J=ne,v==0&&(v=Math.pow(2,G),G++)}}};return z}();n!=null?n.exports=s:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return s})}(Rt)),Rt.exports}var xa=wa();const Bt=fn(xa);var $a=gt`
    .p-tag {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        background: dt('tag.primary.background');
        color: dt('tag.primary.color');
        font-size: dt('tag.font.size');
        font-weight: dt('tag.font.weight');
        padding: dt('tag.padding');
        border-radius: dt('tag.border.radius');
        gap: dt('tag.gap');
    }

    .p-tag-icon {
        font-size: dt('tag.icon.size');
        width: dt('tag.icon.size');
        height: dt('tag.icon.size');
    }

    .p-tag-rounded {
        border-radius: dt('tag.rounded.border.radius');
    }

    .p-tag-success {
        background: dt('tag.success.background');
        color: dt('tag.success.color');
    }

    .p-tag-info {
        background: dt('tag.info.background');
        color: dt('tag.info.color');
    }

    .p-tag-warn {
        background: dt('tag.warn.background');
        color: dt('tag.warn.color');
    }

    .p-tag-danger {
        background: dt('tag.danger.background');
        color: dt('tag.danger.color');
    }

    .p-tag-secondary {
        background: dt('tag.secondary.background');
        color: dt('tag.secondary.color');
    }

    .p-tag-contrast {
        background: dt('tag.contrast.background');
        color: dt('tag.contrast.color');
    }
`,ka={root:function(s){var f=s.props;return["p-tag p-component",{"p-tag-info":f.severity==="info","p-tag-success":f.severity==="success","p-tag-warn":f.severity==="warn","p-tag-danger":f.severity==="danger","p-tag-secondary":f.severity==="secondary","p-tag-contrast":f.severity==="contrast","p-tag-rounded":f.rounded}]},icon:"p-tag-icon",label:"p-tag-label"},Ia=He.extend({name:"tag",style:$a,classes:ka}),Ta={name:"BaseTag",extends:ot,props:{value:null,severity:null,rounded:Boolean,icon:String},style:Ia,provide:function(){return{$pcTag:this,$parentInstance:this}}};function at(n){"@babel/helpers - typeof";return at=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},at(n)}function Sa(n,s,f){return(s=Da(s))in n?Object.defineProperty(n,s,{value:f,enumerable:!0,configurable:!0,writable:!0}):n[s]=f,n}function Da(n){var s=Ca(n,"string");return at(s)=="symbol"?s:s+""}function Ca(n,s){if(at(n)!="object"||!n)return n;var f=n[Symbol.toPrimitive];if(f!==void 0){var S=f.call(n,s);if(at(S)!="object")return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(n)}var et={name:"Tag",extends:Ta,inheritAttrs:!1,computed:{dataP:function(){return yt(Sa({rounded:this.rounded},this.severity,this.severity))}}},Aa=["data-p"];function Ea(n,s,f,S,T,h){return $(),O("span",be({class:n.cx("root"),"data-p":h.dataP},n.ptmi("root")),[n.$slots.icon?($(),ve(tt(n.$slots.icon),be({key:0,class:n.cx("icon")},n.ptm("icon")),null,16,["class"])):n.icon?($(),O("span",be({key:1,class:[n.cx("icon"),n.icon]},n.ptm("icon")),null,16)):ee("",!0),n.value!=null||n.$slots.default?qe(n.$slots,"default",{key:2},function(){return[u("span",be({class:n.cx("label")},n.ptm("label")),E(n.value),17)]}):ee("",!0)],16,Aa)}et.render=Ea;var Na=gt`
    .p-avatar {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: dt('avatar.width');
        height: dt('avatar.height');
        font-size: dt('avatar.font.size');
        background: dt('avatar.background');
        color: dt('avatar.color');
        border-radius: dt('avatar.border.radius');
    }

    .p-avatar-image {
        background: transparent;
    }

    .p-avatar-circle {
        border-radius: 50%;
    }

    .p-avatar-circle img {
        border-radius: 50%;
    }

    .p-avatar-icon {
        font-size: dt('avatar.icon.size');
        width: dt('avatar.icon.size');
        height: dt('avatar.icon.size');
    }

    .p-avatar img {
        width: 100%;
        height: 100%;
    }

    .p-avatar-lg {
        width: dt('avatar.lg.width');
        height: dt('avatar.lg.width');
        font-size: dt('avatar.lg.font.size');
    }

    .p-avatar-lg .p-avatar-icon {
        font-size: dt('avatar.lg.icon.size');
        width: dt('avatar.lg.icon.size');
        height: dt('avatar.lg.icon.size');
    }

    .p-avatar-xl {
        width: dt('avatar.xl.width');
        height: dt('avatar.xl.width');
        font-size: dt('avatar.xl.font.size');
    }

    .p-avatar-xl .p-avatar-icon {
        font-size: dt('avatar.xl.icon.size');
        width: dt('avatar.xl.icon.size');
        height: dt('avatar.xl.icon.size');
    }

    .p-avatar-group {
        display: flex;
        align-items: center;
    }

    .p-avatar-group .p-avatar + .p-avatar {
        margin-inline-start: dt('avatar.group.offset');
    }

    .p-avatar-group .p-avatar {
        border: 2px solid dt('avatar.group.border.color');
    }

    .p-avatar-group .p-avatar-lg + .p-avatar-lg {
        margin-inline-start: dt('avatar.lg.group.offset');
    }

    .p-avatar-group .p-avatar-xl + .p-avatar-xl {
        margin-inline-start: dt('avatar.xl.group.offset');
    }
`,Ra={root:function(s){var f=s.props;return["p-avatar p-component",{"p-avatar-image":f.image!=null,"p-avatar-circle":f.shape==="circle","p-avatar-lg":f.size==="large","p-avatar-xl":f.size==="xlarge"}]},label:"p-avatar-label",icon:"p-avatar-icon"},Ba=He.extend({name:"avatar",style:Na,classes:Ra}),La={name:"BaseAvatar",extends:ot,props:{label:{type:String,default:null},icon:{type:String,default:null},image:{type:String,default:null},size:{type:String,default:"normal"},shape:{type:String,default:"square"},ariaLabelledby:{type:String,default:null},ariaLabel:{type:String,default:null}},style:Ba,provide:function(){return{$pcAvatar:this,$parentInstance:this}}};function rt(n){"@babel/helpers - typeof";return rt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},rt(n)}function an(n,s,f){return(s=Pa(s))in n?Object.defineProperty(n,s,{value:f,enumerable:!0,configurable:!0,writable:!0}):n[s]=f,n}function Pa(n){var s=Oa(n,"string");return rt(s)=="symbol"?s:s+""}function Oa(n,s){if(rt(n)!="object"||!n)return n;var f=n[Symbol.toPrimitive];if(f!==void 0){var S=f.call(n,s);if(rt(S)!="object")return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(n)}var bt={name:"Avatar",extends:La,inheritAttrs:!1,emits:["error"],methods:{onError:function(s){this.$emit("error",s)}},computed:{dataP:function(){return yt(an(an({},this.shape,this.shape),this.size,this.size))}}},Ma=["aria-labelledby","aria-label","data-p"],za=["data-p"],qa=["data-p"],Fa=["src","alt","data-p"];function Ua(n,s,f,S,T,h){return $(),O("div",be({class:n.cx("root"),"aria-labelledby":n.ariaLabelledby,"aria-label":n.ariaLabel},n.ptmi("root"),{"data-p":h.dataP}),[qe(n.$slots,"default",{},function(){return[n.label?($(),O("span",be({key:0,class:n.cx("label")},n.ptm("label"),{"data-p":h.dataP}),E(n.label),17,za)):n.$slots.icon?($(),ve(tt(n.$slots.icon),{key:1,class:Ae(n.cx("icon"))},null,8,["class"])):n.icon?($(),O("span",be({key:2,class:[n.cx("icon"),n.icon]},n.ptm("icon"),{"data-p":h.dataP}),null,16,qa)):n.image?($(),O("img",be({key:3,src:n.image,alt:n.ariaLabel,onError:s[0]||(s[0]=function(){return h.onError&&h.onError.apply(h,arguments)})},n.ptm("image"),{"data-p":h.dataP}),null,16,Fa)):ee("",!0)]})],16,Ma)}bt.render=Ua;const Va={class:"grid"},Wa={key:0,class:"col-12 sm:col-12 md:col-6 lg:col-4 border-round surface-section shadow-1 p-2"},ja={class:"flex flex-column"},Ka=["onClick"],Ha={class:"p-1 flex-shrink-0 w-7rem h-7rem flex align-items-center justify-content-center overflow-hidden"},Ya=["src","alt"],Qa={class:"flex flex-column justify-content-center"},Ga={class:"font-bold"},Ja={class:"flex flex-wrap gap-2"},Xa={class:"flex gap-1 align-items-center"},Za={class:"text-color-secondary line2"},er={key:0,class:"text-xl font-bold text-primary"},tr={key:1,class:"flex align-items-center gap-1"},nr={class:"text-l font-bold text-color-secondary"},ar={class:"text-sm line-through text-500"},rr={key:2,class:"flex gap-2 mr-2",id:"card-quantity"},or={class:"w-2rem text-xl text-center"},sr={key:3,class:"flex gap-2 mr-2"},ir={key:0,class:"m-2 mt-0"},lr={class:"flex flex-row justify-content-between align-content-center"},ur={class:"flex flex-column"},cr={class:"text-l font-bold"},dr={key:0,class:"text-l font-bold text-color-secondary"},fr={key:1,class:"flex align-items-center gap-1"},vr={class:"text-l font-bold text-color-secondary"},pr={class:"text-sm line-through text-500"},hr={key:0,class:"flex ml-2 mr-2"},mr={class:"w-2rem text-xl text-center"},br={key:1,class:"flex gap-2 mr-3 pt-2 pb-2"},gr={class:"mb-2 flex justify-content-center"},yr={class:"font-bold text-center"},_r={class:"mb-2"},wr={class:"text-color-secondary m-0 line-height-3 line2 text-center"},xr={class:"mb-2"},$r={class:"flex justify-content-center"},kr=["src","alt"],Ir={class:"flex align-items-center gap-2"},Tr=["src","alt"],Sr={class:"flex align-items-center gap-3 ml-auto"},Dr={__name:"DishList",props:{rateDish:{type:Function,required:!0},likedItemsRef:Array,dislikedItemsRef:Array,tabIndex:Number,onlyVeg:Boolean},setup(n){const{t:s}=Ne(),f=xe.dishDatas,S=Z(null),T=n,h=(l,y=!0)=>{if(!T.onlyVeg)return!0;if(y)return l.vegetable;if(l.subItems.length>0){for(const N of l.subItems)if(N.vegetable)return!0}else return l.dish.vegetable;return!1};nt(()=>{let l=Y.getOrderMenuTab()[T.tabIndex];if(Y.customDishAPI.customDishes.value.map(R=>R.name),Y.getMenu().length==0){console.log("exit");return}S.value=f.value[N(f.value,l)].mainDishes,xe.showDishList(S.value);function N(R,M){for(const b in R)if(R[b].name==M)return b;console.error("Can not find tab index in menu")}});let g={rated:!1,id:null,like:0,rate:0};const z=l=>xe.dishDatas.value[l]?xe.dishDatas.value[l].quantity:0,c=l=>{if(!q())return!1;const y=l.quantity;let N=3;if(l.price>0&&(N=9),l.limit){const R=l.id,M=q(),b=(M.peopleType.adults+M.peopleType.children)*l.limit,L=M.order.find(U=>U.dishid==R);let P=0;if(l.subitem)for(const U of l.subitem){P+=z(U);const j=M.order.find(de=>de.dishid==k(U));j&&(P+=j.quantity)}else P+=l.quantity,L&&(P+=L.quantity);return y>=N||b&&P>=b}return y>=N},k=l=>xe.dishDatas.value[l]?xe.dishDatas.value[l].id:0,q=()=>Y.getTableValue(),d=l=>{let y="absolute origin-top-left mt-1 ml-1 border-round-lg pl-1 pr-1 text-xs text-white font-bold ";switch(l){case"new":y+="bg-red-600";break;case"recommended":case"special":y+="bg-orange-600";break;default:y+="bg-blue-600"}return y};function v(l){T.rateDish(g.id,g.like,g.rate,g.rated),G(l,g.rate,g.like),g.id=null,g.like=0,g.rate=0,g.rated=!1}const F=l=>{const y=T.likedItemsRef.indexOf(l);if(g.id=l.id,y!==-1)T.likedItemsRef.splice(y,1),g.like+=-1,g.rate+=-1,g.rated=!1;else{g.rated=!0,T.likedItemsRef.push(l);const N=T.dislikedItemsRef.indexOf(l);N!==-1?(T.dislikedItemsRef.splice(N,1),g.like+=1):(g.like+=1,g.rate+=1)}v(l)};function G(l,y=0,N=0){l.rates=(l.rates||0)+y,l.likes=(l.likes||0)+N}const ne=l=>{const y=T.dislikedItemsRef.indexOf(l);if(g.id=l.id,y!==-1)T.dislikedItemsRef.splice(y,1),g.rate+=-1,g.rated=!1;else{g.rated=!0,T.dislikedItemsRef.push(l);const N=T.likedItemsRef.indexOf(l);N!==-1?(T.likedItemsRef.splice(N,1),g.like+=-1):g.rate+=1}v(l)},te=Z(!1),Q=Z({}),J=l=>{te.value=!0,Q.value=l},re=l=>{l.target.src="/images/default.png"};function X(l){p(l.target,300)}function w(l){p(l.target,110)}function p(l,y){const N=l.naturalWidth,R=l.naturalHeight,M=Math.min(N,y),b=M/N,L=R*b;l.style.width=`${M}px`,l.style.height=`${L}px`}return(l,y)=>($(),O(fe,null,[u("div",Va,[($(!0),O(fe,null,Ie(S.value,(N,R)=>{var M;return $(),O(fe,{key:R},[h(N,!1)?($(),O("div",Wa,[u("div",ja,[u("div",{class:Ae(["flex flex-row",N.subItems.length!==0?"flex-grow-1":""]),onClick:b=>J(N.dish)},[((M=N.dish.etiquette)==null?void 0:M.length)>0?($(),O("div",{key:0,class:Ae(d(N.dish.etiquette))},E(_(s)("common.etiquette."+N.dish.etiquette)),3)):ee("",!0),u("div",Ha,[u("img",{src:N.dish.image||"/images/default.png",alt:N.dish.name,class:"w-full h-full",style:{"object-fit":"cover"},onError:re,onLoad:w},null,40,Ya)]),u("div",Qa,[u("div",Ga,E(N.dish.name),1),u("div",null,[u("div",Ja,[u("div",Xa,[($(),O(fe,null,Ie(5,b=>u("i",{key:b,class:Ae(["pi invert-star",b<=Math.floor(N.dish.likes/N.dish.rates*5)?"pi-star-fill":b-.5<=N.dish.likes/N.dish.rates*5?"pi-star-half-fill":"pi-star"]),style:{color:"black"}},null,2)),64)),u("p",null,"("+E(N.dish.rates?N.dish.rates:0)+")",1)])])]),u("div",null,[u("p",Za,E(N.dish.note),1)])])],10,Ka),N.subItems.length==0?($(),O("div",{key:0,class:Ae(["flex ml-2 mr-2 mb-2",Number(N.dish.price)>0?"justify-content-between":"justify-content-end"])},[!N.dish.discount&&Number(N.dish.price)>0?($(),O("span",er,"â‚¬"+E(N.dish.price),1)):ee("",!0),N.dish.discount?($(),O("div",tr,[u("span",nr,"â‚¬"+E(N.dish.dis_price),1),u("span",ar,"â‚¬"+E(N.dish.price),1),K(_(et),{severity:"danger",value:"-"+N.dish.discount+"%"},null,8,["value"])])):ee("",!0),N.dish.soldout?ee("",!0):($(),O("div",rr,[K(_(ce),{icon:"pi pi-minus",rounded:"",disabled:N.dish.quantity<=0,onClick:b=>N.dish.quantity--,class:"w-2rem h-2rem"},null,8,["disabled","onClick"]),u("span",or,E(N.dish.quantity),1),K(_(ce),{icon:"pi pi-plus",rounded:"",disabled:c(N.dish),onClick:b=>N.dish.quantity++,class:"w-2rem h-2rem"},null,8,["disabled","onClick"])])),N.dish.soldout?($(),O("div",sr,[K(_(et),{severity:"danger",value:l.$t("common.soldout")},null,8,["value"])])):ee("",!0)],2)):ee("",!0),N.subItems.length!==0?($(!0),O(fe,{key:1},Ie(N.subItems,(b,L)=>($(),O(fe,{key:"index"},[!b.disable&&h(b)?($(),O("div",ir,[u("div",lr,[u("div",ur,[u("span",cr,E(b.subname),1),!b.discount&&b.price!=="0.00"&&b.price!=="0"?($(),O("span",dr,"â‚¬"+E(b.price),1)):ee("",!0),b.discount?($(),O("div",fr,[u("span",vr,"â‚¬"+E(b.dis_price),1),u("span",pr,"â‚¬"+E(b.price),1),K(_(et),{severity:"danger",value:"-"+b.discount+"%"},null,8,["value"])])):ee("",!0)]),b.soldout?ee("",!0):($(),O("div",hr,[K(_(ce),{icon:"pi pi-minus",rounded:"",disabled:b.quantity<=0,onClick:P=>b.quantity--,class:"w-2rem h-2rem"},null,8,["disabled","onClick"]),u("span",mr,E(b.quantity),1),K(_(ce),{icon:"pi pi-plus",rounded:"",onClick:P=>b.quantity++,class:"w-2rem h-2rem",disabled:c(b)},null,8,["onClick","disabled"])])),b.soldout?($(),O("div",br,[K(_(et),{severity:"danger",value:l.$t("common.soldout")},null,8,["value"])])):ee("",!0)])])):ee("",!0)],64))),128)):ee("",!0)])])):ee("",!0)],64)}),128))]),K(_(Oe),{visible:te.value,"onUpdate:visible":y[2]||(y[2]=N=>te.value=N),modal:"",header:" ",style:ht([{width:"23rem"},{width:"80vw","max-width":"700px"}]),pt:{header:{class:"p-1"}}},{default:se(()=>[u("div",gr,[u("span",yr,E(Q.value.name),1)]),u("div",_r,[u("span",wr,E(Q.value.note),1)]),u("div",xr,[u("div",$r,[u("img",{class:"w-full h-auto object-contain",src:Q.value.image,alt:Q.value.name,onError:re,onLoad:X},null,40,kr)])]),u("div",Ir,[($(!0),O(fe,null,Ie(Q.value.allergies,(N,R)=>($(),O("img",{src:"images/"+N+".png",alt:N,class:"w-2rem h-2rem border-round flex-shrink-0",style:{"object-fit":"cover","min-width":"2rem"}},null,8,Tr))),256)),u("div",Sr,[u("button",{onClick:y[0]||(y[0]=N=>F(Q.value)),class:"p-0 border-none bg-transparent cursor-pointer"},[u("i",{class:Ae(["pi pi-thumbs-up text-xl",T.likedItemsRef.includes(Q.value)?"text-green-500":"text-gray-400"])},null,2)]),u("button",{onClick:y[1]||(y[1]=N=>ne(Q.value)),class:"p-0 border-none bg-transparent cursor-pointer"},[u("i",{class:Ae(["pi pi-thumbs-down text-xl",T.dislikedItemsRef.includes(Q.value)?"text-red-500":"text-gray-400"])},null,2)])])])]),_:1},8,["visible"])],64))}},Cr=st(Dr,[["__scopeId","data-v-e1c6bd92"]]),Ar={key:0,class:"text-3xl font-bold"},Er={class:"flex flex-column gap-3 p-1"},Nr={key:0,class:"flex flex-column gap-1"},Rr={key:0,class:"m-0"},Br={key:0,class:"m-0"},Lr={class:"flex justify-content-between gap-4 mt-1"},Pr={class:"flex align-items-center gap-2"},Or=["src","alt"],Mr={class:"flex-grow-1 min-width-0 max-w-18rem"},zr={class:"flex flex-column gap-1"},qr={class:"flex align-items-center gap-2"},Fr={class:"text-xl font-bold line1 whitespace-nowrap overflow-hidden text-overflow-ellipsis",style:{"max-width":"20rem"}},Ur={class:"flex align-items-end gap-1"},Vr={key:0,class:"text-xl font-bold text-primary"},Wr={key:1,class:"text-xl font-bold text-primary"},jr={key:2,class:"text-sm text-color-secondary"},Kr={key:0,class:"text-xs text-primary"},Hr={class:"flex-shrink-0 flex flex-wrap justify-content-between align-items-center gap-1"},Yr={class:"flex flex-wrap justify-content-between align-content-center"},Qr={class:"flex align-items-center gap-1"},Gr={class:"w-2rem text-center"},Jr={key:1,class:"flex flex-column gap-2 mt-2"},Xr={for:"in_label"},Zr={for:"in_label"},eo={class:"bottom-0 left-0 mt-2"},to={class:"text-2xl font-bold"},no={class:"text-2xl font-bold text-primary pl-2"},ao={class:"flex justify-content-between"},ro={__name:"Cart",props:{checkout:{type:Function,required:!0},isTakeaway:Boolean},setup(n,{expose:s}){const{locale:f}=Ne(),S=ln(),{t:T}=Ne(),h=Se.cartDishs,g=Z([]),z=Z(),c=Z(),k=Z(!1),q=Z(!1),d=Z(!0),v=Z(""),F=Z("");function G(P,U,j){let de="";const ae=f.value,pe=Y.customDishAPI.getCustomDishByName(P);for(const ye of j){const _e=pe.types[U].dishes.find(Ce=>Ce.dishid===ye.id)[`name_${ae}`];de=de+_e+"/"}return de}function ne(P,U){const j=f.value;return Y.customDishAPI.getCustomDishByName(P).types[U][`typeName_${j}`]}const te=(P,U)=>{const j=g.value[P].quantity+U;j>=0&&(g.value[P].quantity=j)};function Q(P){P&&z.value&&(z.value.dishNote=c.value?c.value:void 0),q.value=!1}function J(){c.value&&(c.value=void 0),z.value&&(z.value=void 0)}function re(P){z.value=P,c.value=z.value.dishNote?z.value.dishNote:void 0,q.value=!0}const X=n;s({showDishList:P=>{k.value=!0,g.value.length=0;for(let U=0;U<P.length;U++)g.value.push(P[U]);d.value=g.value.length==0&&h.length==0}});function p(P){Se.removeItem(P)}function l(){X.isTakeaway?y():N()}function y(){const P=[];h.value.forEach(U=>{P.push(U)}),g.value.forEach(U=>{U.quantity>0&&P.push(U)}),P.length<=0?ke.show_warn(T("notification.select_at_least_one")):(k.value=!1,S.push({path:"/paymentPage"}))}function N(){X.checkout({name:v.value,note:F.value},P=>{P.success&&(h.value.forEach(U=>{U.dishNote=void 0}),g.value.forEach(U=>{U.dishNote=void 0}),F.value="",xe.cleanDishDataQty(),Pe.deleteCookie("cartDish_normal"),Se.cleanAll(),Pe.deleteCookie("cartDish_custom"))})&&(k.value=!1)}function R(P){return P.subname!=""&&P.subname!="Default Title"?P.name+" "+P.subname:P.name}function M(){let P=0;return h.value.forEach(U=>{P+=U.discount?(U.dis_price?U.dis_price:0)*U.count:(U.price?U.price:0)*U.count}),g.value.forEach(U=>{P+=U.discount?(U.dis_price?U.dis_price:0)*U.quantity:(U.price?U.price:0)*U.quantity}),"â‚¬"+P.toFixed(2)}const b=P=>{P.target.src="/images/default.png"},L=P=>{const U=P.quantity;let j=3;return P.price>0&&(j=9),U>=j};return(P,U)=>($(),O(fe,null,[K(_(Oe),{class:"bg-primary-reverse text-sm md:text-lg lg:text-xl",visible:k.value,"onUpdate:visible":U[2]||(U[2]=j=>k.value=j),modal:"",header:P.$t("common.cart"),style:ht([{backgroundColor:"rgba(250, 250, 250, 1)",height:"100%",minWidth:"24rem"},{width:"80vw","max-width":"700px"}]),dismissableMask:!0},{footer:se(()=>[u("div",eo,[u("span",to,E(P.$t("common.total"))+": ",1),u("span",no,E(M()),1),K(_(ce),{icon:n.isTakeaway?"pi pi-wallet":"pi pi-plus",class:"p-button-success p-button-rounded ml-3",onClick:l,label:n.isTakeaway?_(T)("common.pay"):_(T)("common.send")},null,8,["icon","label"])])]),default:se(()=>[d.value?($(),O("h2",Ar,"Cart is empty.")):ee("",!0),u("div",Er,[($(!0),O(fe,null,Ie(_(h),(j,de)=>($(),ve(_(pa),{style:{overflow:"hidden"},key:de},{title:se(()=>[Ke(E(P.$t(`common.${j.name}`)),1)]),subtitle:se(()=>[Ke(E(P.$t("common.price"))+" : "+E(j.price)+"â‚¬",1)]),content:se(()=>[_(Y).customDishAPI.customDishes.value.find(ae=>ae.name==j.name)?($(),O("div",Nr,[($(!0),O(fe,null,Ie(j.notesAndId,(ae,pe)=>($(),O("div",null,[j.notesAndId[pe].length!==0?($(),O("span",Rr,E(ne(j.name,pe))+": "+E(G(j.name,pe,ae)),1)):ee("",!0)]))),256)),u("div",null,[j.dishNote?($(),O("span",Br,E(P.$t("common.note"))+": "+E(j.dishNote),1)):ee("",!0)])])):ee("",!0)]),footer:se(()=>[u("div",Lr,[n.isTakeaway?ee("",!0):($(),ve(_(ce),{key:0,label:_(T)("common.edit")+" "+_(T)("common.note"),severity:"contrast",onClick:ae=>re(j)},null,8,["label","onClick"])),K(_(ce),{label:_(T)("common.remove"),severity:"danger",onClick:ae=>p(j)},null,8,["label","onClick"])])]),_:2},1024))),128)),($(!0),O(fe,null,Ie(g.value,(j,de)=>($(),O("div",{key:de,class:"p-2 border-round shadow-1 transition-all transition-duration-200 hover:shadow-3 flex flex-column gap-1"},[u("div",Pr,[u("img",{src:j.image,alt:j.name,class:"w-4rem h-4rem border-round flex-shrink-0",onError:b,style:{"object-fit":"cover","min-width":"4rem"}},null,40,Or),u("div",Mr,[u("div",zr,[u("div",qr,[u("span",Fr,E(R(j)),1)])]),u("div",Ur,[j.discount?($(),O("span",Vr,"â‚¬"+E(Number(j.dis_price?j.dis_price:0).toFixed(2)),1)):ee("",!0),j.discount?ee("",!0):($(),O("span",Wr,"â‚¬"+E(Number(j.price?j.price:0).toFixed(2)),1)),j.price>0?($(),O("span",jr,"/uni.")):ee("",!0)])])]),u("div",null,[j.dishNote?($(),O("span",Kr,E(_(T)("common.note")+": "+j.dishNote),1)):ee("",!0)]),u("div",Hr,[u("div",Yr,[n.isTakeaway?ee("",!0):($(),ve(_(ce),{key:0,label:_(T)("common.edit")+" "+_(T)("common.note"),severity:"contrast",class:"w-3.5rem h-2rem",onClick:ae=>re(j)},null,8,["label","onClick"]))]),u("div",Qr,[K(_(ce),{icon:"pi pi-minus",rounded:"",disabled:j.quantity<=0,onClick:ae=>te(de,-1),class:"w-2rem h-2rem"},null,8,["disabled","onClick"]),u("span",Gr,E(j.quantity),1),K(_(ce),{icon:"pi pi-plus",rounded:"",disabled:L(j),onClick:ae=>te(de,1),class:"w-2rem h-2rem"},null,8,["disabled","onClick"])])])]))),128))]),n.isTakeaway?ee("",!0):($(),O("div",Jr,[K(_(tn),{variant:"in"},{default:se(()=>[K(_(Ft),{id:"in_label",modelValue:v.value,"onUpdate:modelValue":U[0]||(U[0]=j=>v.value=j),variant:"filled",maxlength:"20"},null,8,["modelValue"]),u("label",Xr,E(_(T)("common.name")),1)]),_:1}),K(_(tn),{variant:"in"},{default:se(()=>[K(_(en),{id:"in_label",class:"min-w-full",rows:"5",modelValue:F.value,"onUpdate:modelValue":U[1]||(U[1]=j=>F.value=j),variant:"filled",maxlength:"200"},null,8,["modelValue"]),u("label",Zr,E(_(T)("common.observation")),1)]),_:1})]))]),_:1},8,["visible","header"]),K(_(Oe),{visible:q.value,"onUpdate:visible":U[6]||(U[6]=j=>q.value=j),header:_(T)("common.note"),onHide:U[7]||(U[7]=j=>J()),modal:"",dismissableMask:!0},{default:se(()=>[K(_(en),{modelValue:c.value,"onUpdate:modelValue":U[3]||(U[3]=j=>c.value=j),rows:"5",cols:"30",placeholder:_(T)("common.edit")+" "+_(T)("common.note")+"...",maxlength:"100"},null,8,["modelValue","placeholder"]),u("div",ao,[K(_(ce),{label:_(T)("common.cancel"),severity:"danger",onClick:U[4]||(U[4]=j=>Q(!1))},null,8,["label"]),K(_(ce),{label:_(T)("common.save"),severity:"primary",size:"sm",onClick:U[5]||(U[5]=j=>Q(!0))},null,8,["label"])])]),_:1},8,["visible","header"])],64))}},oo=st(ro,[["__scopeId","data-v-0e3055df"]]);var so=gt`
    .p-overlaybadge {
        position: relative;
    }

    .p-overlaybadge .p-badge {
        position: absolute;
        inset-block-start: 0;
        inset-inline-end: 0;
        transform: translate(50%, -50%);
        transform-origin: 100% 0;
        margin: 0;
        outline-width: dt('overlaybadge.outline.width');
        outline-style: solid;
        outline-color: dt('overlaybadge.outline.color');
    }

    .p-overlaybadge .p-badge:dir(rtl) {
        transform: translate(-50%, -50%);
    }
`,io={root:"p-overlaybadge"},lo=He.extend({name:"overlaybadge",style:so,classes:io}),uo={name:"OverlayBadge",extends:dn,style:lo,provide:function(){return{$pcOverlayBadge:this,$parentInstance:this}}},vn={name:"OverlayBadge",extends:uo,inheritAttrs:!1,components:{Badge:dn}};function co(n,s,f,S,T,h){var g=ta("Badge");return $(),O("div",be({class:n.cx("root")},n.ptmi("root")),[qe(n.$slots,"default"),K(g,be(n.$props,{pt:n.ptm("pcBadge")}),null,16,["pt"])],16)}vn.render=co;Z([]);Z("iniImages()");const fo={class:"m-3"},vo={class:"flex flex-column gap-2"},po={class:"w-full flex justify-content-center"},ho={key:0,class:"max-w-19rem"},mo=["src"],bo={style:{width:"300px",height:"300px",background:"url(/boxImage/box.png)"}},go={key:0,class:"flex align-items-center justify-content-center text-4xl font-bold text-white w-full h-full"},yo={key:1,class:"grid m-0 p-2"},_o=["onClick"],wo={class:"flex align-items-center justify-content-center font-bold m-0 p-0",style:{width:"94px",height:"94px"}},xo=["src"],$o={class:"flex flex-wrap justify-content-between align-items-center m-1"},ko={class:"flex gap-1 align-items-center"},Io={key:0},To={class:"font-bold mb-2"},So={key:1,class:"flex justify-content-between gap-2 mt-3"},Do={class:"font-bold mb-2"},Co={class:"flex mr-2"},Ao={class:"w-3rem text-xl text-center"},Eo={class:"font-bold block mb-2"},No={class:"flex flex-wrap"},Ro={key:2,class:"flex flex-wrap gap-2 mt-3"},Bo={class:"font-bold block mb-2"},Lo={class:"font-bold block mb-2 text-center"},Po={class:"flex flex-wrap gap-2 mt-3"},Oo={__name:"CustomDish",props:{currentCustomDish:Object,tabindex:Number},emits:["typeClick"],setup(n,{emit:s}){const{locale:f}=Ne(),S=n,T=na(),{t:h}=Ne(),g=Z(null);ze(()=>S.currentCustomDish,R=>{R&&(g.value=R)},{immediate:!0,deep:!0});const z=De(()=>g.boxImages),c=Z(0),k=De(()=>{var M;if(g.value==null)return 0;let R=(M=g.value)==null?void 0:M.initialPrice;for(const b of g.value.types??[])for(const L of b.dishes??[])L.selected&&(R+=L.price);return Number(R).toFixed(2)}),q=s,d=Z(null),v=De(()=>{const R=f.value,M=`title_${R}`,b=`description_${R}`;return g.value==null?{}:g.value.descriptions.map(L=>({title:L[M],descriptions:L.descriptions.map(P=>P[b]),image:L==null?void 0:L.image}))}),F=De(()=>{var b,L;const R=Number(((b=g.value)==null?void 0:b.like)??0),M=Number(((L=g.value)==null?void 0:L.rate)??0);return M?R/M*5:0});function G(R,M){const b=f.value;return R[`${M}_${b}`]}function ne(R,M,b){const L=R[M];if(L.selected){L.selected=!1;return}else{const U=R.filter(j=>j.selected).length;if(b===1){l(R),L.selected=!0;return}U<b&&(L.selected=!0)}}function te(R,M,b){const L=R.dishes;q("typeClick",R,M,L[M].selected),ne(L,M,b)}function Q(R){return R.selected}function J(){if(!y(g.value.types))return;const R=X(g.value.types),M=w(g.value.types);Se.addItem({dishid:-1,name:g.value.name,category:S.currentCustomDish.category,count:c.value!==0?c.value:1,price:k.value,notes:R,notesAndId:M}),console.log("CART: ",Se.cartDishs),p(g.value.types),ke.show({severity:"info",summary:"info",detail:h("customDishBibimbapVue.addToCartSuccessBibimbap")})}function re(R){return!R||!R.dishes?"":R.dishes.filter(b=>b.selected).map(b=>b.name).join(",")}function X(R){return R?R.map(M=>re(M)):[]}function w(R){return R?R.map(M=>M.dishes?M.dishes.filter(b=>b.selected).map(b=>({id:b.dishid,name:b.name})):[]):[]}function p(R){R&&R.forEach(M=>{M.dishes&&M.dishes.forEach(b=>{b.selected=!1})})}function l(R){R.forEach(M=>M.selected=!1)}function y(R){if(g.value.options.quantity&&c.value<=0)return ke.show({severity:"warn",detail:h("notification.quantity_must_be_positive")}),!1;for(const M of R)if(M.dishes.filter(L=>L.selected).length<M.minQuantity){const L=M.typeName;return ke.show({severity:"warn",detail:h("notification.select_type_of",{name:L})}),!1}return!0}function N(R){R?Y.customDishAPI.like(g.value.id)&&(d.value="like",T.add({severity:"success",summary:h("common.success"),detail:h("common.rate")+" "+h("common.success"),life:750})):Y.customDishAPI.unLike(g.value.id)&&(d.value="unlike",T.add({severity:"success",summary:h("common.success"),detail:h("common.rate")+" "+h("common.success"),life:750}))}return(R,M)=>{var b,L,P,U,j,de;return $(),O("div",fo,[u("div",vo,[K(_(qt),{class:"w-full max-w-xl mx-auto"},{default:se(()=>[($(!0),O(fe,null,Ie(v.value,(ae,pe)=>($(),ve(_(Ot),{key:pe,value:pe},{default:se(()=>[K(_(Mt),null,{default:se(()=>[Ke(E(ae.title),1)]),_:2},1024),K(_(zt),null,{default:se(()=>{var ye;return[($(!0),O(fe,null,Ie(ae.descriptions,(_e,Ce)=>($(),O("p",{key:Ce},E(_e),1))),128)),u("div",po,[(ye=ae.image)!=null&&ye.src?($(),O("div",ho,[u("img",{src:ae.image.src,class:"w-full"},null,8,mo)])):ee("",!0)])]}),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1}),((L=(b=g.value)==null?void 0:b.value)==null?void 0:L.name)==="MY BOX"?($(),ve(_(qt),{key:0,class:"w-full max-w-xl mx-auto"},{default:se(()=>[K(_(Ot),{value:"0"},{default:se(()=>[K(_(Mt),null,{default:se(()=>[Ke(" ðŸ¥© "+E(R.$t("common.showMybox")),1)]),_:1}),K(_(zt),null,{default:se(()=>[u("div",bo,[R.isEmptyArray(z.value)?($(),O("div",go,E(R.$t("common.myboxAlarm")),1)):ee("",!0),R.isEmptyArray(z.value)?ee("",!0):($(),O("div",yo,[($(!0),O(fe,null,Ie(z.value,ae=>($(),O("div",{class:"col-4 p-0",onClick:pe=>R.imageSelectAction(ae)},[u("div",wo,[ae?($(),O("img",{key:0,class:"m-0 p-0",src:R.imagePath(ae),style:{width:"82px",height:"82px"}},null,8,xo)):ee("",!0)])],8,_o))),256))]))])]),_:1})]),_:1})]),_:1})):ee("",!0)]),u("div",$o,[u("div",ko,[($(),O(fe,null,Ie(5,ae=>u("i",{key:ae,class:Ae(["pi invert-star",ae<=Math.floor(F.value)?"pi-star-fill":ae-.5<=F.value?"pi-star-half":"pi-star"]),style:{color:"black"}},null,2)),64)),u("p",null,"("+E((P=g.value)!=null&&P.rate?g.value.rate:0)+")",1)]),u("div",null,[K(_(ce),{text:"",icon:"pi pi-thumbs-up",severity:d.value==="like"?"success":"",onClick:M[0]||(M[0]=ae=>N(!0))},null,8,["severity"]),K(_(ce),{text:"",icon:"pi pi-thumbs-down",severity:d.value==="unlike"?"danger":"",onClick:M[1]||(M[1]=ae=>N(!1))},null,8,["severity"])])]),(U=g.value)!=null&&U.options.extraInfo?($(),O("div",Io,[u("label",To,E(g.value.options.extraInfo),1)])):ee("",!0),(j=g.value)!=null&&j.options.quantity?($(),O("div",So,[u("div",null,[u("label",Do,E(R.$t("common.quantity"))+" / "+E(R.$t("common.pieces")),1)]),u("div",Co,[K(_(ce),{icon:"pi pi-minus",disabled:c.value<=0,onClick:M[2]||(M[2]=ae=>{var pe;return c.value-=(pe=g.value)==null?void 0:pe.options.quantitySetp}),class:"w-2rem h-2rem"},null,8,["disabled"]),u("span",Ao,E(c.value),1),K(_(ce),{icon:"pi pi-plus",disabled:c.value>=g.value.options.maxQuantity,onClick:M[3]||(M[3]=ae=>{var pe;return c.value+=(pe=g.value)==null?void 0:pe.options.quantitySetp}),class:"w-2rem h-2rem"},null,8,["disabled"])])])):ee("",!0),($(!0),O(fe,null,Ie((de=g.value)==null?void 0:de.types,(ae,pe)=>($(),O("div",{key:ae.id},[mt(u("div",null,[u("label",Eo,E(pe+1)+". "+E(G(ae,"typeName")),1),u("div",No,[($(!0),O(fe,null,Ie(ae.dishes,(ye,_e)=>($(),ve(_(ce),{key:_e,onClick:Ce=>te(ae,_e,c.value==0?ae.maxQuantity:ae.maxQuantity*c.value),class:Ae([{"p-button-primary":Q(ye),"p-button-outlined":!Q(ye)},"m-1"])},{default:se(()=>[u("p",{class:Ae({"text-gray-700":!Q(ye)})},E(G(ye,"name")),3)]),_:2},1032,["onClick","class"]))),128))])],512),[[aa,ae.enable]])]))),128)),n.currentCustomDish.initialPrice!==0?($(),O("div",Ro,[u("label",Bo,E(R.$t("common.price"))+":",1),u("label",Lo,E(k.value+"â‚¬"),1)])):ee("",!0),u("div",Po,[K(_(ce),{icon:"pi pi-shopping-cart",onClick:M[4]||(M[4]=ae=>J()),label:R.$t("common.addToCart"),class:"m-3",severity:"primary",raised:""},null,8,["label"])])])}}},Mo=st(Oo,[["__scopeId","data-v-e37fc872"]]);var zo=gt`
    .p-tabs {
        display: flex;
        flex-direction: column;
    }

    .p-tablist {
        display: flex;
        position: relative;
    }

    .p-tabs-scrollable > .p-tablist {
        overflow: hidden;
    }

    .p-tablist-viewport {
        overflow-x: auto;
        overflow-y: hidden;
        scroll-behavior: smooth;
        scrollbar-width: none;
        overscroll-behavior: contain auto;
    }

    .p-tablist-viewport::-webkit-scrollbar {
        display: none;
    }

    .p-tablist-tab-list {
        position: relative;
        display: flex;
        background: dt('tabs.tablist.background');
        border-style: solid;
        border-color: dt('tabs.tablist.border.color');
        border-width: dt('tabs.tablist.border.width');
    }

    .p-tablist-content {
        flex-grow: 1;
    }

    .p-tablist-nav-button {
        all: unset;
        position: absolute !important;
        flex-shrink: 0;
        inset-block-start: 0;
        z-index: 2;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        background: dt('tabs.nav.button.background');
        color: dt('tabs.nav.button.color');
        width: dt('tabs.nav.button.width');
        transition:
            color dt('tabs.transition.duration'),
            outline-color dt('tabs.transition.duration'),
            box-shadow dt('tabs.transition.duration');
        box-shadow: dt('tabs.nav.button.shadow');
        outline-color: transparent;
        cursor: pointer;
    }

    .p-tablist-nav-button:focus-visible {
        z-index: 1;
        box-shadow: dt('tabs.nav.button.focus.ring.shadow');
        outline: dt('tabs.nav.button.focus.ring.width') dt('tabs.nav.button.focus.ring.style') dt('tabs.nav.button.focus.ring.color');
        outline-offset: dt('tabs.nav.button.focus.ring.offset');
    }

    .p-tablist-nav-button:hover {
        color: dt('tabs.nav.button.hover.color');
    }

    .p-tablist-prev-button {
        inset-inline-start: 0;
    }

    .p-tablist-next-button {
        inset-inline-end: 0;
    }

    .p-tablist-prev-button:dir(rtl),
    .p-tablist-next-button:dir(rtl) {
        transform: rotate(180deg);
    }

    .p-tab {
        flex-shrink: 0;
        cursor: pointer;
        user-select: none;
        position: relative;
        border-style: solid;
        white-space: nowrap;
        gap: dt('tabs.tab.gap');
        background: dt('tabs.tab.background');
        border-width: dt('tabs.tab.border.width');
        border-color: dt('tabs.tab.border.color');
        color: dt('tabs.tab.color');
        padding: dt('tabs.tab.padding');
        font-weight: dt('tabs.tab.font.weight');
        transition:
            background dt('tabs.transition.duration'),
            border-color dt('tabs.transition.duration'),
            color dt('tabs.transition.duration'),
            outline-color dt('tabs.transition.duration'),
            box-shadow dt('tabs.transition.duration');
        margin: dt('tabs.tab.margin');
        outline-color: transparent;
    }

    .p-tab:not(.p-disabled):focus-visible {
        z-index: 1;
        box-shadow: dt('tabs.tab.focus.ring.shadow');
        outline: dt('tabs.tab.focus.ring.width') dt('tabs.tab.focus.ring.style') dt('tabs.tab.focus.ring.color');
        outline-offset: dt('tabs.tab.focus.ring.offset');
    }

    .p-tab:not(.p-tab-active):not(.p-disabled):hover {
        background: dt('tabs.tab.hover.background');
        border-color: dt('tabs.tab.hover.border.color');
        color: dt('tabs.tab.hover.color');
    }

    .p-tab-active {
        background: dt('tabs.tab.active.background');
        border-color: dt('tabs.tab.active.border.color');
        color: dt('tabs.tab.active.color');
    }

    .p-tabpanels {
        background: dt('tabs.tabpanel.background');
        color: dt('tabs.tabpanel.color');
        padding: dt('tabs.tabpanel.padding');
        outline: 0 none;
    }

    .p-tabpanel:focus-visible {
        box-shadow: dt('tabs.tabpanel.focus.ring.shadow');
        outline: dt('tabs.tabpanel.focus.ring.width') dt('tabs.tabpanel.focus.ring.style') dt('tabs.tabpanel.focus.ring.color');
        outline-offset: dt('tabs.tabpanel.focus.ring.offset');
    }

    .p-tablist-active-bar {
        z-index: 1;
        display: block;
        position: absolute;
        inset-block-end: dt('tabs.active.bar.bottom');
        height: dt('tabs.active.bar.height');
        background: dt('tabs.active.bar.background');
        transition: 250ms cubic-bezier(0.35, 0, 0.25, 1);
    }
`,qo={root:function(s){var f=s.props;return["p-tabs p-component",{"p-tabs-scrollable":f.scrollable}]}},Fo=He.extend({name:"tabs",style:zo,classes:qo}),Uo={name:"BaseTabs",extends:ot,props:{value:{type:[String,Number],default:void 0},lazy:{type:Boolean,default:!1},scrollable:{type:Boolean,default:!1},showNavigators:{type:Boolean,default:!0},tabindex:{type:Number,default:0},selectOnFocus:{type:Boolean,default:!1}},style:Fo,provide:function(){return{$pcTabs:this,$parentInstance:this}}},pn={name:"Tabs",extends:Uo,inheritAttrs:!1,emits:["update:value"],data:function(){return{d_value:this.value}},watch:{value:function(s){this.d_value=s}},methods:{updateValue:function(s){this.d_value!==s&&(this.d_value=s,this.$emit("update:value",s))},isVertical:function(){return this.orientation==="vertical"}}};function Vo(n,s,f,S,T,h){return $(),O("div",be({class:n.cx("root")},n.ptmi("root")),[qe(n.$slots,"default")],16)}pn.render=Vo;var Wo={root:"p-tablist",content:function(s){var f=s.instance;return["p-tablist-content",{"p-tablist-viewport":f.$pcTabs.scrollable}]},tabList:"p-tablist-tab-list",activeBar:"p-tablist-active-bar",prevButton:"p-tablist-prev-button p-tablist-nav-button",nextButton:"p-tablist-next-button p-tablist-nav-button"},jo=He.extend({name:"tablist",classes:Wo}),Ko={name:"BaseTabList",extends:ot,props:{},style:jo,provide:function(){return{$pcTabList:this,$parentInstance:this}}},hn={name:"TabList",extends:Ko,inheritAttrs:!1,inject:["$pcTabs"],data:function(){return{isPrevButtonEnabled:!1,isNextButtonEnabled:!0}},resizeObserver:void 0,watch:{showNavigators:function(s){s?this.bindResizeObserver():this.unbindResizeObserver()},activeValue:{flush:"post",handler:function(){this.updateInkBar()}}},mounted:function(){var s=this;setTimeout(function(){s.updateInkBar()},150),this.showNavigators&&(this.updateButtonState(),this.bindResizeObserver())},updated:function(){this.showNavigators&&this.updateButtonState()},beforeUnmount:function(){this.unbindResizeObserver()},methods:{onScroll:function(s){this.showNavigators&&this.updateButtonState(),s.preventDefault()},onPrevButtonClick:function(){var s=this.$refs.content,f=this.getVisibleButtonWidths(),S=Et(s)-f,T=Math.abs(s.scrollLeft),h=S*.8,g=T-h,z=Math.max(g,0);s.scrollLeft=Xt(s)?-1*z:z},onNextButtonClick:function(){var s=this.$refs.content,f=this.getVisibleButtonWidths(),S=Et(s)-f,T=Math.abs(s.scrollLeft),h=S*.8,g=T+h,z=s.scrollWidth-S,c=Math.min(g,z);s.scrollLeft=Xt(s)?-1*c:c},bindResizeObserver:function(){var s=this;this.resizeObserver=new ResizeObserver(function(){return s.updateButtonState()}),this.resizeObserver.observe(this.$refs.list)},unbindResizeObserver:function(){var s;(s=this.resizeObserver)===null||s===void 0||s.unobserve(this.$refs.list),this.resizeObserver=void 0},updateInkBar:function(){var s=this.$refs,f=s.content,S=s.inkbar,T=s.tabs;if(S){var h=Pt(f,'[data-pc-name="tab"][data-p-active="true"]');this.$pcTabs.isVertical()?(S.style.height=oa(h)+"px",S.style.top=ct(h).top-ct(T).top+"px"):(S.style.width=sa(h)+"px",S.style.left=ct(h).left-ct(T).left+"px")}},updateButtonState:function(){var s=this.$refs,f=s.list,S=s.content,T=S.scrollTop,h=S.scrollWidth,g=S.scrollHeight,z=S.offsetWidth,c=S.offsetHeight,k=Math.abs(S.scrollLeft),q=[Et(S),ra(S)],d=q[0],v=q[1];this.$pcTabs.isVertical()?(this.isPrevButtonEnabled=T!==0,this.isNextButtonEnabled=f.offsetHeight>=c&&parseInt(T)!==g-v):(this.isPrevButtonEnabled=k!==0,this.isNextButtonEnabled=f.offsetWidth>=z&&parseInt(k)!==h-d)},getVisibleButtonWidths:function(){var s=this.$refs,f=s.prevButton,S=s.nextButton,T=0;return this.showNavigators&&(T=((f==null?void 0:f.offsetWidth)||0)+((S==null?void 0:S.offsetWidth)||0)),T}},computed:{templates:function(){return this.$pcTabs.$slots},activeValue:function(){return this.$pcTabs.d_value},showNavigators:function(){return this.$pcTabs.scrollable&&this.$pcTabs.showNavigators},prevButtonAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.previous:void 0},nextButtonAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.next:void 0},dataP:function(){return yt({scrollable:this.$pcTabs.scrollable})}},components:{ChevronLeftIcon:ga,ChevronRightIcon:ya},directives:{ripple:un}},Ho=["data-p"],Yo=["aria-label","tabindex"],Qo=["data-p"],Go=["aria-orientation"],Jo=["aria-label","tabindex"];function Xo(n,s,f,S,T,h){var g=cn("ripple");return $(),O("div",be({ref:"list",class:n.cx("root"),"data-p":h.dataP},n.ptmi("root")),[h.showNavigators&&T.isPrevButtonEnabled?mt(($(),O("button",be({key:0,ref:"prevButton",type:"button",class:n.cx("prevButton"),"aria-label":h.prevButtonAriaLabel,tabindex:h.$pcTabs.tabindex,onClick:s[0]||(s[0]=function(){return h.onPrevButtonClick&&h.onPrevButtonClick.apply(h,arguments)})},n.ptm("prevButton"),{"data-pc-group-section":"navigator"}),[($(),ve(tt(h.templates.previcon||"ChevronLeftIcon"),be({"aria-hidden":"true"},n.ptm("prevIcon")),null,16))],16,Yo)),[[g]]):ee("",!0),u("div",be({ref:"content",class:n.cx("content"),onScroll:s[1]||(s[1]=function(){return h.onScroll&&h.onScroll.apply(h,arguments)}),"data-p":h.dataP},n.ptm("content")),[u("div",be({ref:"tabs",class:n.cx("tabList"),role:"tablist","aria-orientation":h.$pcTabs.orientation||"horizontal"},n.ptm("tabList")),[qe(n.$slots,"default"),u("span",be({ref:"inkbar",class:n.cx("activeBar"),role:"presentation","aria-hidden":"true"},n.ptm("activeBar")),null,16)],16,Go)],16,Qo),h.showNavigators&&T.isNextButtonEnabled?mt(($(),O("button",be({key:1,ref:"nextButton",type:"button",class:n.cx("nextButton"),"aria-label":h.nextButtonAriaLabel,tabindex:h.$pcTabs.tabindex,onClick:s[2]||(s[2]=function(){return h.onNextButtonClick&&h.onNextButtonClick.apply(h,arguments)})},n.ptm("nextButton"),{"data-pc-group-section":"navigator"}),[($(),ve(tt(h.templates.nexticon||"ChevronRightIcon"),be({"aria-hidden":"true"},n.ptm("nextIcon")),null,16))],16,Jo)),[[g]]):ee("",!0)],16,Ho)}hn.render=Xo;var Zo={root:function(s){var f=s.instance,S=s.props;return["p-tab",{"p-tab-active":f.active,"p-disabled":S.disabled}]}},es=He.extend({name:"tab",classes:Zo}),ts={name:"BaseTab",extends:ot,props:{value:{type:[String,Number],default:void 0},disabled:{type:Boolean,default:!1},as:{type:[String,Object],default:"BUTTON"},asChild:{type:Boolean,default:!1}},style:es,provide:function(){return{$pcTab:this,$parentInstance:this}}},mn={name:"Tab",extends:ts,inheritAttrs:!1,inject:["$pcTabs","$pcTabList"],methods:{onFocus:function(){this.$pcTabs.selectOnFocus&&this.changeActiveValue()},onClick:function(){this.changeActiveValue()},onKeydown:function(s){switch(s.code){case"ArrowRight":this.onArrowRightKey(s);break;case"ArrowLeft":this.onArrowLeftKey(s);break;case"Home":this.onHomeKey(s);break;case"End":this.onEndKey(s);break;case"PageDown":this.onPageDownKey(s);break;case"PageUp":this.onPageUpKey(s);break;case"Enter":case"NumpadEnter":case"Space":this.onEnterKey(s);break}},onArrowRightKey:function(s){var f=this.findNextTab(s.currentTarget);f?this.changeFocusedTab(s,f):this.onHomeKey(s),s.preventDefault()},onArrowLeftKey:function(s){var f=this.findPrevTab(s.currentTarget);f?this.changeFocusedTab(s,f):this.onEndKey(s),s.preventDefault()},onHomeKey:function(s){var f=this.findFirstTab();this.changeFocusedTab(s,f),s.preventDefault()},onEndKey:function(s){var f=this.findLastTab();this.changeFocusedTab(s,f),s.preventDefault()},onPageDownKey:function(s){this.scrollInView(this.findLastTab()),s.preventDefault()},onPageUpKey:function(s){this.scrollInView(this.findFirstTab()),s.preventDefault()},onEnterKey:function(s){this.changeActiveValue(),s.preventDefault()},findNextTab:function(s){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,S=f?s:s.nextElementSibling;return S?dt(S,"data-p-disabled")||dt(S,"data-pc-section")==="activebar"?this.findNextTab(S):Pt(S,'[data-pc-name="tab"]'):null},findPrevTab:function(s){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,S=f?s:s.previousElementSibling;return S?dt(S,"data-p-disabled")||dt(S,"data-pc-section")==="activebar"?this.findPrevTab(S):Pt(S,'[data-pc-name="tab"]'):null},findFirstTab:function(){return this.findNextTab(this.$pcTabList.$refs.tabs.firstElementChild,!0)},findLastTab:function(){return this.findPrevTab(this.$pcTabList.$refs.tabs.lastElementChild,!0)},changeActiveValue:function(){this.$pcTabs.updateValue(this.value)},changeFocusedTab:function(s,f){la(f),this.scrollInView(f)},scrollInView:function(s){var f;s==null||(f=s.scrollIntoView)===null||f===void 0||f.call(s,{block:"nearest"})}},computed:{active:function(){var s;return ia((s=this.$pcTabs)===null||s===void 0?void 0:s.d_value,this.value)},id:function(){var s;return"".concat((s=this.$pcTabs)===null||s===void 0?void 0:s.$id,"_tab_").concat(this.value)},ariaControls:function(){var s;return"".concat((s=this.$pcTabs)===null||s===void 0?void 0:s.$id,"_tabpanel_").concat(this.value)},attrs:function(){return be(this.asAttrs,this.a11yAttrs,this.ptmi("root",this.ptParams))},asAttrs:function(){return this.as==="BUTTON"?{type:"button",disabled:this.disabled}:void 0},a11yAttrs:function(){return{id:this.id,tabindex:this.active?this.$pcTabs.tabindex:-1,role:"tab","aria-selected":this.active,"aria-controls":this.ariaControls,"data-pc-name":"tab","data-p-disabled":this.disabled,"data-p-active":this.active,onFocus:this.onFocus,onKeydown:this.onKeydown}},ptParams:function(){return{context:{active:this.active}}},dataP:function(){return yt({active:this.active})}},directives:{ripple:un}};function ns(n,s,f,S,T,h){var g=cn("ripple");return n.asChild?qe(n.$slots,"default",{key:1,dataP:h.dataP,class:Ae(n.cx("root")),active:h.active,a11yAttrs:h.a11yAttrs,onClick:h.onClick}):mt(($(),ve(tt(n.as),be({key:0,class:n.cx("root"),"data-p":h.dataP,onClick:h.onClick},h.attrs),{default:se(function(){return[qe(n.$slots,"default")]}),_:3},16,["class","data-p","onClick"])),[[g]])}mn.render=ns;const as={class:"flex flex-column gap-3"},rs={class:"flex flex-column gap-2"},os={for:"email"},ss={class:"flex flex-column gap-2"},is={for:"password"},ls={key:0,class:"text-red-500 text-sm"},us={class:"flex justify-content-end gap-2"},cs={__name:"LoginDialog",props:{visible:{type:Boolean,default:!1}},emits:["update:visible","login-success"],setup(n,{emit:s}){const{t:f}=Ne(),S=n,T=s,h=Z(""),g=Z(""),z=Z(!1),c=Z("");ze(()=>S.visible,v=>{v&&k()});function k(){h.value="",g.value="",c.value="",z.value=!1}function q(){T("update:visible",!1),k()}async function d(){if(!h.value||!g.value){c.value=f("common.auth.emailPasswordRequired");return}z.value=!0,c.value="";try{const v=await Y.login(h.value,g.value);v.success?(T("login-success"),T("update:visible",!1)):c.value=v.error||f("common.auth.loginFailed")}catch(v){c.value=f("common.auth.loginFailed"),console.error("Login error:",v)}finally{z.value=!1}}return(v,F)=>($(),ve(_(Oe),{visible:n.visible,"onUpdate:visible":F[2]||(F[2]=G=>v.$emit("update:visible",G)),header:v.$t("common.auth.login"),modal:!0,dismissableMask:!0,style:{width:"90vw",maxWidth:"25rem"},onHide:k},{footer:se(()=>[u("div",us,[K(_(ce),{label:v.$t("common.cancel"),severity:"secondary",onClick:q,disabled:z.value},null,8,["label","disabled"]),K(_(ce),{label:v.$t("common.auth.login"),onClick:d,loading:z.value},null,8,["label","loading"])])]),default:se(()=>[u("div",as,[u("div",rs,[u("label",os,E(v.$t("common.auth.email")),1),K(_(Ft),{id:"email",modelValue:h.value,"onUpdate:modelValue":F[0]||(F[0]=G=>h.value=G),type:"email",placeholder:v.$t("common.auth.emailPlaceholder"),class:"w-full",disabled:z.value},null,8,["modelValue","placeholder","disabled"])]),u("div",ss,[u("label",is,E(v.$t("common.auth.password")),1),K(_(ha),{id:"password",modelValue:g.value,"onUpdate:modelValue":F[1]||(F[1]=G=>g.value=G),placeholder:v.$t("common.auth.passwordPlaceholder"),feedback:!1,toggleMask:"",class:"w-full",disabled:z.value,onKeyup:ua(d,["enter"]),fluid:""},null,8,["modelValue","placeholder","disabled"])]),c.value?($(),O("div",ls,E(c.value),1)):ee("",!0)])]),_:1},8,["visible","header"]))}},ds={key:0,class:"flex flex-column gap-4"},fs={class:"flex justify-content-center"},vs={class:"flex flex-column gap-3"},ps={class:"flex flex-column gap-1"},hs={class:"text-sm text-color-secondary"},ms={class:"text-lg font-semibold"},bs={class:"flex flex-column gap-1"},gs={class:"text-sm text-color-secondary"},ys={class:"text-lg"},_s={class:"flex flex-column gap-1"},ws={class:"text-sm text-color-secondary"},xs={class:"text-lg"},$s={key:0,class:"flex flex-column gap-1"},ks={class:"text-sm text-color-secondary"},Is={class:"text-sm text-color-secondary"},Ts={__name:"UserInfoDialog",props:{visible:{type:Boolean,default:!1},user:{type:Object,default:null}},emits:["update:visible"],setup(n,{emit:s}){const{t:f}=Ne(),S=n,T=s,h=Z(!1),g=De(()=>{var k;if(!((k=S.user)!=null&&k.avatar_url))return null;const c=S.user.avatar_url;return c&&(c.startsWith("http://")||c.startsWith("https://")||c.startsWith("/"))?c:null});ze(()=>S.user,c=>{if(h.value=!1,c!=null&&c.avatar_url&&g.value){const k=new Image;k.onload=()=>{h.value=!1},k.onerror=()=>{h.value=!0,console.warn("Avatar image failed to load:",c.avatar_url)},k.src=g.value}},{immediate:!0});function z(){T("update:visible",!1)}return(c,k)=>($(),ve(_(Oe),{visible:n.visible,"onUpdate:visible":k[0]||(k[0]=q=>c.$emit("update:visible",q)),header:c.$t("common.auth.userInfo"),modal:!0,dismissableMask:!0,style:{width:"90vw",maxWidth:"30rem"}},{footer:se(()=>[K(_(ce),{label:c.$t("common.cancel"),severity:"secondary",onClick:z},null,8,["label"])]),default:se(()=>[n.user?($(),O("div",ds,[u("div",fs,[K(_(bt),{image:g.value&&!h.value?g.value:void 0,shape:"circle",size:"xlarge",class:"mb-3"},null,8,["image"])]),u("div",vs,[u("div",ps,[u("label",hs,E(c.$t("common.auth.displayName")),1),u("div",ms,E(n.user.display_name||"-"),1)]),u("div",bs,[u("label",gs,E(c.$t("common.auth.email")),1),u("div",ys,E(n.user.email||"-"),1)]),u("div",_s,[u("label",ws,E(c.$t("common.auth.role")),1),u("div",xs,E(n.user.role||"-"),1)]),n.user.id?($(),O("div",$s,[u("label",ks,E(c.$t("common.auth.userId")),1),u("div",Is,E(n.user.id),1)])):ee("",!0)])])):ee("",!0)]),_:1},8,["visible","header"]))}},Ss={class:"fixed top-0 left-0 w-full bg-primary-reverse",style:{"z-index":"10"}},Ds={class:"grid mt-1 ml-1"},Cs={class:"h-3rem w-3rem flex align-items-center"},As=["src"],Es={class:"flex align-items-center"},Ns={key:0,class:"text-color font-bold p-1"},Rs={key:1,class:"text-color font-bold p-1"},Bs={class:"card flex mr-3 flex align-items-center gap-2",style:{"margin-left":"auto"}},Ls={key:0},Ps={key:1},Os={style:{display:"flex","align-items":"center"}},Ms={style:{"flex-grow":"1",width:"0",overflow:"hidden"}},zs={class:"mt-2"},qs={class:"flex justify-content-end mt-2"},Fs={class:"flex inline-flex items-center justify-center gap-2"},Us={class:"flex align-items-center"},Vs={class:"flex flex-column"},Ws={class:"text-sm p-2"},js={class:"text-sm p-2"},Ks={class:"flex items-center gap-4 mb-4 p-2"},Hs={class:"flex flex-column gap-3"},Ys={__name:"HeaderTabs",props:{types:Array,typeIndex:Number,tableId:String,tabItems:Array},emits:["clickType","switchToWelcome"],setup(n,{emit:s}){const{t:f}=Ne(),S=Z(!1),T=Z(!1),h=Z(!1),g=Z(""),z=Z(),c=Z(!1),k=De(()=>Y.isAuthenticated()),q=De(()=>Y.authUser.value),d=De(()=>{var L;if(!((L=q.value)!=null&&L.avatar_url))return null;const b=q.value.avatar_url;return b&&(b.startsWith("http://")||b.startsWith("https://")||b.startsWith("/"))?b:null});ze(q,b=>{if(c.value=!1,b!=null&&b.avatar_url&&d.value){const L=new Image;L.onload=()=>{c.value=!1},L.onerror=()=>{c.value=!0,console.warn("Avatar image failed to load:",b.avatar_url)},L.src=d.value}},{immediate:!0});function v(){return Y.getTable()}nt(async()=>{g.value=await ca()});const F=Z(),G=De(()=>[{label:f("common.options"),items:[{label:f("common.pay"),icon:"pi pi-wallet",command:()=>{w()}},{label:f("common.call"),icon:"pi pi-user-plus",command:()=>{Y.send_cmd(v(),{cmd:"call"},b=>{b.success?ke.show_info(f("notification.call_msg")):ke.show_warn(b.data)})}}]}]),ne=b=>{F.value.toggle(b)},te=b=>{Q.value.toggle(b)},Q=Z(),J=Z(!1),re=Z(),X=Z();function w(){J.value=!0}function p(){b(re.value)?Y.send_cmd(v(),{cmd:"pay",nif:re.value,note:X.value},L=>{L.success?(ke.show_info(f("notification.pay_msg")),J.value=!1):ke.show_error(f("common.failed"))}):ke.show_warn(f("notification.cancel_msg"));function b(L){return!L||L.toString().length===9||L.toString().length===0}}function l(){X.value&&(X.value=void 0)}function y(){S.value=!0}const N=De(()=>[{label:f("common.auth.userInfo"),icon:"pi pi-user",command:()=>{h.value=!0}},{separator:!0},{label:f("common.auth.logout"),icon:"pi pi-sign-out",command:()=>{Y.logout(),ke.show_info(f("common.auth.logoutSuccess"))}}]);function R(b){z.value.toggle(b)}function M(){var b;T.value=!1,ke.show_info(f("common.auth.loginSuccess")),console.log("Login success, user:",Y.authUser.value),console.log("Avatar URL:",(b=Y.authUser.value)==null?void 0:b.avatar_url)}return(b,L)=>($(),O(fe,null,[u("div",Ss,[u("div",Ds,[u("div",Cs,[u("img",{src:g.value,class:"h-full w-full",onClick:L[0]||(L[0]=()=>b.$emit("switchToWelcome"))},null,8,As)]),u("div",Es,[n.tableId?($(),O("p",Ns,E(b.$t("common.table"))+": "+E(n.tableId),1)):ee("",!0),n.tableId?ee("",!0):($(),O("p",Rs,E(b.$t("common.takeAway")),1))]),u("div",Bs,[k.value?q.value?($(),O("div",Ps,[K(_(bt),{image:d.value,shape:"circle",size:"large",onClick:R,style:{cursor:"pointer"}},null,8,["image"]),K(_(Nt),{ref_key:"userMenu",ref:z,id:"user_menu",model:N.value,popup:!0},null,8,["model"])])):ee("",!0):($(),O("div",Ls,[K(_(ce),{label:_(f)("common.auth.login"),icon:"pi pi-sign-in",onClick:L[1]||(L[1]=P=>T.value=!0)},null,8,["label"])])),n.tableId?($(),ve(_(ce),{key:2,icon:"pi pi-bell",rounded:"","aria-label":"Filter",onClick:ne,"aria-haspopup":"true","aria-controls":"overlay_menu"})):($(),ve(_(ce),{key:3,icon:"pi pi-question",rounded:"",onClick:y})),K(_(Nt),{ref_key:"menu",ref:F,id:"overlay_menu",model:G.value,popup:!0},null,8,["model"])])]),u("div",Os,[u("div",null,[K(_(ce),{icon:"pi pi-bars",variant:"text",rounded:"","aria-label":"Filter",onClick:te,"aria-haspopup":"true","aria-controls":"tab_menu"}),K(_(Nt),{ref_key:"tabMenu",ref:Q,id:"tab_menu",model:n.tabItems,popup:!0},null,8,["model"])]),u("div",Ms,[K(_(pn),{value:n.typeIndex,scrollable:"",showNavigators:!1},{default:se(()=>[K(_(hn),null,{default:se(()=>[($(!0),O(fe,null,Ie(n.types,(P,U)=>($(),ve(_(mn),{value:U,onClick:()=>b.$emit("clickType",U),class:"text-sm md:text-lg lg:text-xl"},{default:se(()=>[Ke(E(P),1)]),_:2},1032,["value","onClick"]))),256))]),_:1})]),_:1},8,["value"])])])]),K(_(Oe),{visible:J.value,"onUpdate:visible":L[5]||(L[5]=P=>J.value=P),header:"ç»“è´¦",class:"flex flex-column",modal:!0,dismissableMask:!0,onHide:l},{default:se(()=>[u("div",null,[L[9]||(L[9]=u("label",null,"NIF:",-1)),K(_(_a),{modelValue:re.value,"onUpdate:modelValue":L[2]||(L[2]=P=>re.value=P),inputId:"withoutgrouping",useGrouping:!1,fluid:"",class:"w-full m-1"},null,8,["modelValue"])]),u("div",zs,[u("label",null,E(b.$t("common.note"))+":",1),K(_(Ft),{type:"text",modelValue:X.value,"onUpdate:modelValue":L[3]||(L[3]=P=>X.value=P),class:"w-full m-1"},null,8,["modelValue"])]),u("div",qs,[K(_(ce),{label:_(f)("common.send"),onClick:L[4]||(L[4]=P=>p())},null,8,["label"])])]),_:1},8,["visible"]),K(_(Oe),{visible:S.value,"onUpdate:visible":L[6]||(L[6]=P=>S.value=P),modal:"",dismissableMask:"",class:"h-full",style:{width:"90vw",maxWidth:"40rem",minWidth:"20rem"},draggable:!1},{header:se(()=>[u("div",Fs,[K(_(bt),{icon:"pi pi-question",shape:"circle"}),u("span",Us,E(_(f)("takeawayHelper.dialogTitle")),1)])]),default:se(()=>[u("div",Vs,[u("span",Ws,E(_(f)("takeawayHelper.introduction")),1),u("span",js,E(_(f)("takeawayHelper.note_t"))+" "+E(_(f)("takeawayHelper.note_1")),1),u("div",Ks,[K(_(qt),{class:"w-full max-w-xl mx-auto"},{default:se(()=>[K(_(Ot),{value:"0"},{default:se(()=>[K(_(Mt),{class:"text-sm"},{default:se(()=>[Ke(E(_(f)("takeawayHelper.question_1")),1)]),_:1}),K(_(zt),{class:"p-1"},{default:se(()=>[u("div",Hs,[u("span",null,E(_(f)("takeawayHelper.q_1_request_1")),1),u("span",null,E(_(f)("takeawayHelper.q_1_request_2")),1),u("span",null,E(_(f)("takeawayHelper.q_1_request_3")),1),u("span",null,E(_(f)("takeawayHelper.q_1_request_4")),1),u("span",null,E(_(f)("takeawayHelper.q_1_request_5")),1)])]),_:1})]),_:1})]),_:1})])])]),_:1},8,["visible"]),K(cs,{visible:T.value,"onUpdate:visible":L[7]||(L[7]=P=>T.value=P),onLoginSuccess:M},null,8,["visible"]),K(Ts,{visible:h.value,"onUpdate:visible":L[8]||(L[8]=P=>h.value=P),user:q.value},null,8,["visible","user"])],64))}},Qs={__name:"SwipeHint",props:{size:{type:String,default:"8rem"},duration:{type:Number,default:6e3},position:{type:String,default:"bottom"}},setup(n){const s=n,f=Z(!0);nt(()=>{s.duration>0&&setTimeout(()=>{f.value=!1},s.duration);const T=()=>{f.value=!1,window.removeEventListener("touchstart",T)};window.addEventListener("touchstart",T)});const S=De(()=>{let T={left:"50%",transform:"translateX(-50%)",zIndex:99999,opacity:.5,pointerEvents:"none",textAlign:"center",position:"fixed"};return s.position==="top"?T.top="15%":s.position==="center"?(T.top="50%",T.transform="translate(-50%, -50%)"):T.bottom="15%",T});return(T,h)=>f.value?($(),O("div",{key:0,class:"swipe-hint",style:ht(S.value)},[u("div",{class:"hand",style:ht({width:n.size,height:n.size,backgroundImages:"url(/images/hand_finger.png)"})},null,4)],4)):ee("",!0)}},Gs=st(Qs,[["__scopeId","data-v-30a48de8"]]);function vt(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Lt={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/var rn;function Js(){return rn||(rn=1,function(n,s){(function(f){n.exports=f()})(function(){return function f(S,T,h){function g(k,q){if(!T[k]){if(!S[k]){var d=typeof vt=="function"&&vt;if(!q&&d)return d(k,!0);if(z)return z(k,!0);var v=new Error("Cannot find module '"+k+"'");throw v.code="MODULE_NOT_FOUND",v}var F=T[k]={exports:{}};S[k][0].call(F.exports,function(G){var ne=S[k][1][G];return g(ne||G)},F,F.exports,f,S,T,h)}return T[k].exports}for(var z=typeof vt=="function"&&vt,c=0;c<h.length;c++)g(h[c]);return g}({1:[function(f,S,T){(function(h){var g=h.MutationObserver||h.WebKitMutationObserver,z;if(g){var c=0,k=new g(G),q=h.document.createTextNode("");k.observe(q,{characterData:!0}),z=function(){q.data=c=++c%2}}else if(!h.setImmediate&&typeof h.MessageChannel<"u"){var d=new h.MessageChannel;d.port1.onmessage=G,z=function(){d.port2.postMessage(0)}}else"document"in h&&"onreadystatechange"in h.document.createElement("script")?z=function(){var te=h.document.createElement("script");te.onreadystatechange=function(){G(),te.onreadystatechange=null,te.parentNode.removeChild(te),te=null},h.document.documentElement.appendChild(te)}:z=function(){setTimeout(G,0)};var v,F=[];function G(){v=!0;for(var te,Q,J=F.length;J;){for(Q=F,F=[],te=-1;++te<J;)Q[te]();J=F.length}v=!1}S.exports=ne;function ne(te){F.push(te)===1&&!v&&z()}}).call(this,typeof ft<"u"?ft:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(f,S,T){var h=f(1);function g(){}var z={},c=["REJECTED"],k=["FULFILLED"],q=["PENDING"];S.exports=d;function d(w){if(typeof w!="function")throw new TypeError("resolver must be a function");this.state=q,this.queue=[],this.outcome=void 0,w!==g&&ne(this,w)}d.prototype.catch=function(w){return this.then(null,w)},d.prototype.then=function(w,p){if(typeof w!="function"&&this.state===k||typeof p!="function"&&this.state===c)return this;var l=new this.constructor(g);if(this.state!==q){var y=this.state===k?w:p;F(l,y,this.outcome)}else this.queue.push(new v(l,w,p));return l};function v(w,p,l){this.promise=w,typeof p=="function"&&(this.onFulfilled=p,this.callFulfilled=this.otherCallFulfilled),typeof l=="function"&&(this.onRejected=l,this.callRejected=this.otherCallRejected)}v.prototype.callFulfilled=function(w){z.resolve(this.promise,w)},v.prototype.otherCallFulfilled=function(w){F(this.promise,this.onFulfilled,w)},v.prototype.callRejected=function(w){z.reject(this.promise,w)},v.prototype.otherCallRejected=function(w){F(this.promise,this.onRejected,w)};function F(w,p,l){h(function(){var y;try{y=p(l)}catch(N){return z.reject(w,N)}y===w?z.reject(w,new TypeError("Cannot resolve promise with itself")):z.resolve(w,y)})}z.resolve=function(w,p){var l=te(G,p);if(l.status==="error")return z.reject(w,l.value);var y=l.value;if(y)ne(w,y);else{w.state=k,w.outcome=p;for(var N=-1,R=w.queue.length;++N<R;)w.queue[N].callFulfilled(p)}return w},z.reject=function(w,p){w.state=c,w.outcome=p;for(var l=-1,y=w.queue.length;++l<y;)w.queue[l].callRejected(p);return w};function G(w){var p=w&&w.then;if(w&&(typeof w=="object"||typeof w=="function")&&typeof p=="function")return function(){p.apply(w,arguments)}}function ne(w,p){var l=!1;function y(b){l||(l=!0,z.reject(w,b))}function N(b){l||(l=!0,z.resolve(w,b))}function R(){p(N,y)}var M=te(R);M.status==="error"&&y(M.value)}function te(w,p){var l={};try{l.value=w(p),l.status="success"}catch(y){l.status="error",l.value=y}return l}d.resolve=Q;function Q(w){return w instanceof this?w:z.resolve(new this(g),w)}d.reject=J;function J(w){var p=new this(g);return z.reject(p,w)}d.all=re;function re(w){var p=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var l=w.length,y=!1;if(!l)return this.resolve([]);for(var N=new Array(l),R=0,M=-1,b=new this(g);++M<l;)L(w[M],M);return b;function L(P,U){p.resolve(P).then(j,function(de){y||(y=!0,z.reject(b,de))});function j(de){N[U]=de,++R===l&&!y&&(y=!0,z.resolve(b,N))}}}d.race=X;function X(w){var p=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var l=w.length,y=!1;if(!l)return this.resolve([]);for(var N=-1,R=new this(g);++N<l;)M(w[N]);return R;function M(b){p.resolve(b).then(function(L){y||(y=!0,z.resolve(R,L))},function(L){y||(y=!0,z.reject(R,L))})}}},{1:1}],3:[function(f,S,T){(function(h){typeof h.Promise!="function"&&(h.Promise=f(2))}).call(this,typeof ft<"u"?ft:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(f,S,T){var h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function g(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function z(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var c=z();function k(){try{if(!c||!c.open)return!1;var e=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),a=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!e||a)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function q(e,a){e=e||[],a=a||{};try{return new Blob(e,a)}catch(r){if(r.name!=="TypeError")throw r;for(var t=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,o=new t,i=0;i<e.length;i+=1)o.append(e[i]);return o.getBlob(a.type)}}typeof Promise>"u"&&f(3);var d=Promise;function v(e,a){a&&e.then(function(t){a(null,t)},function(t){a(t)})}function F(e,a,t){typeof a=="function"&&e.then(a),typeof t=="function"&&e.catch(t)}function G(e){return typeof e!="string"&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function ne(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var te="local-forage-detect-blob-support",Q=void 0,J={},re=Object.prototype.toString,X="readonly",w="readwrite";function p(e){for(var a=e.length,t=new ArrayBuffer(a),o=new Uint8Array(t),i=0;i<a;i++)o[i]=e.charCodeAt(i);return t}function l(e){return new d(function(a){var t=e.transaction(te,w),o=q([""]);t.objectStore(te).put(o,"key"),t.onabort=function(i){i.preventDefault(),i.stopPropagation(),a(!1)},t.oncomplete=function(){var i=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);a(r||!i||parseInt(i[1],10)>=43)}}).catch(function(){return!1})}function y(e){return typeof Q=="boolean"?d.resolve(Q):l(e).then(function(a){return Q=a,Q})}function N(e){var a=J[e.name],t={};t.promise=new d(function(o,i){t.resolve=o,t.reject=i}),a.deferredOperations.push(t),a.dbReady?a.dbReady=a.dbReady.then(function(){return t.promise}):a.dbReady=t.promise}function R(e){var a=J[e.name],t=a.deferredOperations.pop();if(t)return t.resolve(),t.promise}function M(e,a){var t=J[e.name],o=t.deferredOperations.pop();if(o)return o.reject(a),o.promise}function b(e,a){return new d(function(t,o){if(J[e.name]=J[e.name]||Ce(),e.db)if(a)N(e),e.db.close();else return t(e.db);var i=[e.name];a&&i.push(e.version);var r=c.open.apply(c,i);a&&(r.onupgradeneeded=function(m){var I=r.result;try{I.createObjectStore(e.storeName),m.oldVersion<=1&&I.createObjectStore(te)}catch(D){if(D.name==="ConstraintError")console.warn('The database "'+e.name+'" has been upgraded from version '+m.oldVersion+" to version "+m.newVersion+', but the storage "'+e.storeName+'" already exists.');else throw D}}),r.onerror=function(m){m.preventDefault(),o(r.error)},r.onsuccess=function(){var m=r.result;m.onversionchange=function(I){I.target.close()},t(m),R(e)}})}function L(e){return b(e,!1)}function P(e){return b(e,!0)}function U(e,a){if(!e.db)return!0;var t=!e.db.objectStoreNames.contains(e.storeName),o=e.version<e.db.version,i=e.version>e.db.version;if(o&&(e.version!==a&&console.warn('The database "'+e.name+`" can't be downgraded from version `+e.db.version+" to version "+e.version+"."),e.version=e.db.version),i||t){if(t){var r=e.db.version+1;r>e.version&&(e.version=r)}return!0}return!1}function j(e){return new d(function(a,t){var o=new FileReader;o.onerror=t,o.onloadend=function(i){var r=btoa(i.target.result||"");a({__local_forage_encoded_blob:!0,data:r,type:e.type})},o.readAsBinaryString(e)})}function de(e){var a=p(atob(e.data));return q([a],{type:e.type})}function ae(e){return e&&e.__local_forage_encoded_blob}function pe(e){var a=this,t=a._initReady().then(function(){var o=J[a._dbInfo.name];if(o&&o.dbReady)return o.dbReady});return F(t,e,e),t}function ye(e){N(e);for(var a=J[e.name],t=a.forages,o=0;o<t.length;o++){var i=t[o];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return e.db=null,L(e).then(function(r){return e.db=r,U(e)?P(e):r}).then(function(r){e.db=a.db=r;for(var m=0;m<t.length;m++)t[m]._dbInfo.db=r}).catch(function(r){throw M(e,r),r})}function _e(e,a,t,o){o===void 0&&(o=1);try{var i=e.db.transaction(e.storeName,a);t(null,i)}catch(r){if(o>0&&(!e.db||r.name==="InvalidStateError"||r.name==="NotFoundError"))return d.resolve().then(function(){if(!e.db||r.name==="NotFoundError"&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),P(e)}).then(function(){return ye(e).then(function(){_e(e,a,t,o-1)})}).catch(t);t(r)}}function Ce(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Ye(e){var a=this,t={db:null};if(e)for(var o in e)t[o]=e[o];var i=J[t.name];i||(i=Ce(),J[t.name]=i),i.forages.push(a),a._initReady||(a._initReady=a.ready,a.ready=pe);var r=[];function m(){return d.resolve()}for(var I=0;I<i.forages.length;I++){var D=i.forages[I];D!==a&&r.push(D._initReady().catch(m))}var A=i.forages.slice(0);return d.all(r).then(function(){return t.db=i.db,L(t)}).then(function(B){return t.db=B,U(t,a._defaultConfig.version)?P(t):B}).then(function(B){t.db=i.db=B,a._dbInfo=t;for(var H=0;H<A.length;H++){var oe=A[H];oe!==a&&(oe._dbInfo.db=t.db,oe._dbInfo.version=t.version)}})}function it(e,a){var t=this;e=G(e);var o=new d(function(i,r){t.ready().then(function(){_e(t._dbInfo,X,function(m,I){if(m)return r(m);try{var D=I.objectStore(t._dbInfo.storeName),A=D.get(e);A.onsuccess=function(){var B=A.result;B===void 0&&(B=null),ae(B)&&(B=de(B)),i(B)},A.onerror=function(){r(A.error)}}catch(B){r(B)}})}).catch(r)});return v(o,a),o}function _t(e,a){var t=this,o=new d(function(i,r){t.ready().then(function(){_e(t._dbInfo,X,function(m,I){if(m)return r(m);try{var D=I.objectStore(t._dbInfo.storeName),A=D.openCursor(),B=1;A.onsuccess=function(){var H=A.result;if(H){var oe=H.value;ae(oe)&&(oe=de(oe));var le=e(oe,H.key,B++);le!==void 0?i(le):H.continue()}else i()},A.onerror=function(){r(A.error)}}catch(H){r(H)}})}).catch(r)});return v(o,a),o}function Qe(e,a,t){var o=this;e=G(e);var i=new d(function(r,m){var I;o.ready().then(function(){return I=o._dbInfo,re.call(a)==="[object Blob]"?y(I.db).then(function(D){return D?a:j(a)}):a}).then(function(D){_e(o._dbInfo,w,function(A,B){if(A)return m(A);try{var H=B.objectStore(o._dbInfo.storeName);D===null&&(D=void 0);var oe=H.put(D,e);B.oncomplete=function(){D===void 0&&(D=null),r(D)},B.onabort=B.onerror=function(){var le=oe.error?oe.error:oe.transaction.error;m(le)}}catch(le){m(le)}})}).catch(m)});return v(i,t),i}function wt(e,a){var t=this;e=G(e);var o=new d(function(i,r){t.ready().then(function(){_e(t._dbInfo,w,function(m,I){if(m)return r(m);try{var D=I.objectStore(t._dbInfo.storeName),A=D.delete(e);I.oncomplete=function(){i()},I.onerror=function(){r(A.error)},I.onabort=function(){var B=A.error?A.error:A.transaction.error;r(B)}}catch(B){r(B)}})}).catch(r)});return v(o,a),o}function xt(e){var a=this,t=new d(function(o,i){a.ready().then(function(){_e(a._dbInfo,w,function(r,m){if(r)return i(r);try{var I=m.objectStore(a._dbInfo.storeName),D=I.clear();m.oncomplete=function(){o()},m.onabort=m.onerror=function(){var A=D.error?D.error:D.transaction.error;i(A)}}catch(A){i(A)}})}).catch(i)});return v(t,e),t}function $t(e){var a=this,t=new d(function(o,i){a.ready().then(function(){_e(a._dbInfo,X,function(r,m){if(r)return i(r);try{var I=m.objectStore(a._dbInfo.storeName),D=I.count();D.onsuccess=function(){o(D.result)},D.onerror=function(){i(D.error)}}catch(A){i(A)}})}).catch(i)});return v(t,e),t}function lt(e,a){var t=this,o=new d(function(i,r){if(e<0){i(null);return}t.ready().then(function(){_e(t._dbInfo,X,function(m,I){if(m)return r(m);try{var D=I.objectStore(t._dbInfo.storeName),A=!1,B=D.openKeyCursor();B.onsuccess=function(){var H=B.result;if(!H){i(null);return}e===0||A?i(H.key):(A=!0,H.advance(e))},B.onerror=function(){r(B.error)}}catch(H){r(H)}})}).catch(r)});return v(o,a),o}function kt(e){var a=this,t=new d(function(o,i){a.ready().then(function(){_e(a._dbInfo,X,function(r,m){if(r)return i(r);try{var I=m.objectStore(a._dbInfo.storeName),D=I.openKeyCursor(),A=[];D.onsuccess=function(){var B=D.result;if(!B){o(A);return}A.push(B.key),B.continue()},D.onerror=function(){i(D.error)}}catch(B){i(B)}})}).catch(i)});return v(t,e),t}function Fe(e,a){a=ne.apply(this,arguments);var t=this.config();e=typeof e!="function"&&e||{},e.name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var o=this,i;if(!e.name)i=d.reject("Invalid arguments");else{var r=e.name===t.name&&o._dbInfo.db,m=r?d.resolve(o._dbInfo.db):L(e).then(function(I){var D=J[e.name],A=D.forages;D.db=I;for(var B=0;B<A.length;B++)A[B]._dbInfo.db=I;return I});e.storeName?i=m.then(function(I){if(I.objectStoreNames.contains(e.storeName)){var D=I.version+1;N(e);var A=J[e.name],B=A.forages;I.close();for(var H=0;H<B.length;H++){var oe=B[H];oe._dbInfo.db=null,oe._dbInfo.version=D}var le=new d(function(ue,ge){var me=c.open(e.name,D);me.onerror=function(Te){var Ze=me.result;Ze.close(),ge(Te)},me.onupgradeneeded=function(){var Te=me.result;Te.deleteObjectStore(e.storeName)},me.onsuccess=function(){var Te=me.result;Te.close(),ue(Te)}});return le.then(function(ue){A.db=ue;for(var ge=0;ge<B.length;ge++){var me=B[ge];me._dbInfo.db=ue,R(me._dbInfo)}}).catch(function(ue){throw(M(e,ue)||d.resolve()).catch(function(){}),ue})}}):i=m.then(function(I){N(e);var D=J[e.name],A=D.forages;I.close();for(var B=0;B<A.length;B++){var H=A[B];H._dbInfo.db=null}var oe=new d(function(le,ue){var ge=c.deleteDatabase(e.name);ge.onerror=function(){var me=ge.result;me&&me.close(),ue(ge.error)},ge.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},ge.onsuccess=function(){var me=ge.result;me&&me.close(),le(me)}});return oe.then(function(le){D.db=le;for(var ue=0;ue<A.length;ue++){var ge=A[ue];R(ge._dbInfo)}}).catch(function(le){throw(M(e,le)||d.resolve()).catch(function(){}),le})})}return v(i,a),i}var Ge={_driver:"asyncStorage",_initStorage:Ye,_support:k(),iterate:_t,getItem:it,setItem:Qe,removeItem:wt,clear:xt,length:$t,key:lt,keys:kt,dropInstance:Fe};function Ue(){return typeof openDatabase=="function"}var Ee="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",x="~~local_forage_type~",C=/^~~local_forage_type~([^~]+)~/,V="__lfsc__:",W=V.length,ie="arbf",he="blob",Re="si08",we="ui08",$e="uic8",Be="si16",Ve="si32",We="ur16",Je="ui32",Me="fl32",Ut="fl64",Vt=W+ie.length,Wt=Object.prototype.toString;function jt(e){var a=e.length*.75,t=e.length,o,i=0,r,m,I,D;e[e.length-1]==="="&&(a--,e[e.length-2]==="="&&a--);var A=new ArrayBuffer(a),B=new Uint8Array(A);for(o=0;o<t;o+=4)r=Ee.indexOf(e[o]),m=Ee.indexOf(e[o+1]),I=Ee.indexOf(e[o+2]),D=Ee.indexOf(e[o+3]),B[i++]=r<<2|m>>4,B[i++]=(m&15)<<4|I>>2,B[i++]=(I&3)<<6|D&63;return A}function It(e){var a=new Uint8Array(e),t="",o;for(o=0;o<a.length;o+=3)t+=Ee[a[o]>>2],t+=Ee[(a[o]&3)<<4|a[o+1]>>4],t+=Ee[(a[o+1]&15)<<2|a[o+2]>>6],t+=Ee[a[o+2]&63];return a.length%3===2?t=t.substring(0,t.length-1)+"=":a.length%3===1&&(t=t.substring(0,t.length-2)+"=="),t}function bn(e,a){var t="";if(e&&(t=Wt.call(e)),e&&(t==="[object ArrayBuffer]"||e.buffer&&Wt.call(e.buffer)==="[object ArrayBuffer]")){var o,i=V;e instanceof ArrayBuffer?(o=e,i+=ie):(o=e.buffer,t==="[object Int8Array]"?i+=Re:t==="[object Uint8Array]"?i+=we:t==="[object Uint8ClampedArray]"?i+=$e:t==="[object Int16Array]"?i+=Be:t==="[object Uint16Array]"?i+=We:t==="[object Int32Array]"?i+=Ve:t==="[object Uint32Array]"?i+=Je:t==="[object Float32Array]"?i+=Me:t==="[object Float64Array]"?i+=Ut:a(new Error("Failed to get type for BinaryArray"))),a(i+It(o))}else if(t==="[object Blob]"){var r=new FileReader;r.onload=function(){var m=x+e.type+"~"+It(this.result);a(V+he+m)},r.readAsArrayBuffer(e)}else try{a(JSON.stringify(e))}catch(m){console.error("Couldn't convert value into a JSON string: ",e),a(null,m)}}function gn(e){if(e.substring(0,W)!==V)return JSON.parse(e);var a=e.substring(Vt),t=e.substring(W,Vt),o;if(t===he&&C.test(a)){var i=a.match(C);o=i[1],a=a.substring(i[0].length)}var r=jt(a);switch(t){case ie:return r;case he:return q([r],{type:o});case Re:return new Int8Array(r);case we:return new Uint8Array(r);case $e:return new Uint8ClampedArray(r);case Be:return new Int16Array(r);case We:return new Uint16Array(r);case Ve:return new Int32Array(r);case Je:return new Uint32Array(r);case Me:return new Float32Array(r);case Ut:return new Float64Array(r);default:throw new Error("Unkown type: "+t)}}var Tt={serialize:bn,deserialize:gn,stringToBuffer:jt,bufferToString:It};function Kt(e,a,t,o){e.executeSql("CREATE TABLE IF NOT EXISTS "+a.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],t,o)}function yn(e){var a=this,t={db:null};if(e)for(var o in e)t[o]=typeof e[o]!="string"?e[o].toString():e[o];var i=new d(function(r,m){try{t.db=openDatabase(t.name,String(t.version),t.description,t.size)}catch(I){return m(I)}t.db.transaction(function(I){Kt(I,t,function(){a._dbInfo=t,r()},function(D,A){m(A)})},m)});return t.serializer=Tt,i}function Le(e,a,t,o,i,r){e.executeSql(t,o,i,function(m,I){I.code===I.SYNTAX_ERR?m.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[a.storeName],function(D,A){A.rows.length?r(D,I):Kt(D,a,function(){D.executeSql(t,o,i,r)},r)},r):r(m,I)},r)}function _n(e,a){var t=this;e=G(e);var o=new d(function(i,r){t.ready().then(function(){var m=t._dbInfo;m.db.transaction(function(I){Le(I,m,"SELECT * FROM "+m.storeName+" WHERE key = ? LIMIT 1",[e],function(D,A){var B=A.rows.length?A.rows.item(0).value:null;B&&(B=m.serializer.deserialize(B)),i(B)},function(D,A){r(A)})})}).catch(r)});return v(o,a),o}function wn(e,a){var t=this,o=new d(function(i,r){t.ready().then(function(){var m=t._dbInfo;m.db.transaction(function(I){Le(I,m,"SELECT * FROM "+m.storeName,[],function(D,A){for(var B=A.rows,H=B.length,oe=0;oe<H;oe++){var le=B.item(oe),ue=le.value;if(ue&&(ue=m.serializer.deserialize(ue)),ue=e(ue,le.key,oe+1),ue!==void 0){i(ue);return}}i()},function(D,A){r(A)})})}).catch(r)});return v(o,a),o}function Ht(e,a,t,o){var i=this;e=G(e);var r=new d(function(m,I){i.ready().then(function(){a===void 0&&(a=null);var D=a,A=i._dbInfo;A.serializer.serialize(a,function(B,H){H?I(H):A.db.transaction(function(oe){Le(oe,A,"INSERT OR REPLACE INTO "+A.storeName+" (key, value) VALUES (?, ?)",[e,B],function(){m(D)},function(le,ue){I(ue)})},function(oe){if(oe.code===oe.QUOTA_ERR){if(o>0){m(Ht.apply(i,[e,D,t,o-1]));return}I(oe)}})})}).catch(I)});return v(r,t),r}function xn(e,a,t){return Ht.apply(this,[e,a,t,1])}function $n(e,a){var t=this;e=G(e);var o=new d(function(i,r){t.ready().then(function(){var m=t._dbInfo;m.db.transaction(function(I){Le(I,m,"DELETE FROM "+m.storeName+" WHERE key = ?",[e],function(){i()},function(D,A){r(A)})})}).catch(r)});return v(o,a),o}function kn(e){var a=this,t=new d(function(o,i){a.ready().then(function(){var r=a._dbInfo;r.db.transaction(function(m){Le(m,r,"DELETE FROM "+r.storeName,[],function(){o()},function(I,D){i(D)})})}).catch(i)});return v(t,e),t}function In(e){var a=this,t=new d(function(o,i){a.ready().then(function(){var r=a._dbInfo;r.db.transaction(function(m){Le(m,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],function(I,D){var A=D.rows.item(0).c;o(A)},function(I,D){i(D)})})}).catch(i)});return v(t,e),t}function Tn(e,a){var t=this,o=new d(function(i,r){t.ready().then(function(){var m=t._dbInfo;m.db.transaction(function(I){Le(I,m,"SELECT key FROM "+m.storeName+" WHERE id = ? LIMIT 1",[e+1],function(D,A){var B=A.rows.length?A.rows.item(0).key:null;i(B)},function(D,A){r(A)})})}).catch(r)});return v(o,a),o}function Sn(e){var a=this,t=new d(function(o,i){a.ready().then(function(){var r=a._dbInfo;r.db.transaction(function(m){Le(m,r,"SELECT key FROM "+r.storeName,[],function(I,D){for(var A=[],B=0;B<D.rows.length;B++)A.push(D.rows.item(B).key);o(A)},function(I,D){i(D)})})}).catch(i)});return v(t,e),t}function Dn(e){return new d(function(a,t){e.transaction(function(o){o.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(i,r){for(var m=[],I=0;I<r.rows.length;I++)m.push(r.rows.item(I).name);a({db:e,storeNames:m})},function(i,r){t(r)})},function(o){t(o)})})}function Cn(e,a){a=ne.apply(this,arguments);var t=this.config();e=typeof e!="function"&&e||{},e.name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var o=this,i;return e.name?i=new d(function(r){var m;e.name===t.name?m=o._dbInfo.db:m=openDatabase(e.name,"","",0),e.storeName?r({db:m,storeNames:[e.storeName]}):r(Dn(m))}).then(function(r){return new d(function(m,I){r.db.transaction(function(D){function A(le){return new d(function(ue,ge){D.executeSql("DROP TABLE IF EXISTS "+le,[],function(){ue()},function(me,Te){ge(Te)})})}for(var B=[],H=0,oe=r.storeNames.length;H<oe;H++)B.push(A(r.storeNames[H]));d.all(B).then(function(){m()}).catch(function(le){I(le)})},function(D){I(D)})})}):i=d.reject("Invalid arguments"),v(i,a),i}var An={_driver:"webSQLStorage",_initStorage:yn,_support:Ue(),iterate:wn,getItem:_n,setItem:xn,removeItem:$n,clear:kn,length:In,key:Tn,keys:Sn,dropInstance:Cn};function En(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Yt(e,a){var t=e.name+"/";return e.storeName!==a.storeName&&(t+=e.storeName+"/"),t}function Nn(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch{return!0}}function Rn(){return!Nn()||localStorage.length>0}function Bn(e){var a=this,t={};if(e)for(var o in e)t[o]=e[o];return t.keyPrefix=Yt(e,a._defaultConfig),Rn()?(a._dbInfo=t,t.serializer=Tt,d.resolve()):d.reject()}function Ln(e){var a=this,t=a.ready().then(function(){for(var o=a._dbInfo.keyPrefix,i=localStorage.length-1;i>=0;i--){var r=localStorage.key(i);r.indexOf(o)===0&&localStorage.removeItem(r)}});return v(t,e),t}function Pn(e,a){var t=this;e=G(e);var o=t.ready().then(function(){var i=t._dbInfo,r=localStorage.getItem(i.keyPrefix+e);return r&&(r=i.serializer.deserialize(r)),r});return v(o,a),o}function On(e,a){var t=this,o=t.ready().then(function(){for(var i=t._dbInfo,r=i.keyPrefix,m=r.length,I=localStorage.length,D=1,A=0;A<I;A++){var B=localStorage.key(A);if(B.indexOf(r)===0){var H=localStorage.getItem(B);if(H&&(H=i.serializer.deserialize(H)),H=e(H,B.substring(m),D++),H!==void 0)return H}}});return v(o,a),o}function Mn(e,a){var t=this,o=t.ready().then(function(){var i=t._dbInfo,r;try{r=localStorage.key(e)}catch{r=null}return r&&(r=r.substring(i.keyPrefix.length)),r});return v(o,a),o}function zn(e){var a=this,t=a.ready().then(function(){for(var o=a._dbInfo,i=localStorage.length,r=[],m=0;m<i;m++){var I=localStorage.key(m);I.indexOf(o.keyPrefix)===0&&r.push(I.substring(o.keyPrefix.length))}return r});return v(t,e),t}function qn(e){var a=this,t=a.keys().then(function(o){return o.length});return v(t,e),t}function Fn(e,a){var t=this;e=G(e);var o=t.ready().then(function(){var i=t._dbInfo;localStorage.removeItem(i.keyPrefix+e)});return v(o,a),o}function Un(e,a,t){var o=this;e=G(e);var i=o.ready().then(function(){a===void 0&&(a=null);var r=a;return new d(function(m,I){var D=o._dbInfo;D.serializer.serialize(a,function(A,B){if(B)I(B);else try{localStorage.setItem(D.keyPrefix+e,A),m(r)}catch(H){(H.name==="QuotaExceededError"||H.name==="NS_ERROR_DOM_QUOTA_REACHED")&&I(H),I(H)}})})});return v(i,t),i}function Vn(e,a){if(a=ne.apply(this,arguments),e=typeof e!="function"&&e||{},!e.name){var t=this.config();e.name=e.name||t.name,e.storeName=e.storeName||t.storeName}var o=this,i;return e.name?i=new d(function(r){e.storeName?r(Yt(e,o._defaultConfig)):r(e.name+"/")}).then(function(r){for(var m=localStorage.length-1;m>=0;m--){var I=localStorage.key(m);I.indexOf(r)===0&&localStorage.removeItem(I)}}):i=d.reject("Invalid arguments"),v(i,a),i}var Wn={_driver:"localStorageWrapper",_initStorage:Bn,_support:En(),iterate:On,getItem:Pn,setItem:Un,removeItem:Fn,clear:Ln,length:qn,key:Mn,keys:zn,dropInstance:Vn},jn=function(a,t){return a===t||typeof a=="number"&&typeof t=="number"&&isNaN(a)&&isNaN(t)},Kn=function(a,t){for(var o=a.length,i=0;i<o;){if(jn(a[i],t))return!0;i++}return!1},Qt=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},Xe={},Gt={},je={INDEXEDDB:Ge,WEBSQL:An,LOCALSTORAGE:Wn},Hn=[je.INDEXEDDB._driver,je.WEBSQL._driver,je.LOCALSTORAGE._driver],ut=["dropInstance"],St=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ut),Yn={description:"",driver:Hn.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Qn(e,a){e[a]=function(){var t=arguments;return e.ready().then(function(){return e[a].apply(e,t)})}}function Dt(){for(var e=1;e<arguments.length;e++){var a=arguments[e];if(a)for(var t in a)a.hasOwnProperty(t)&&(Qt(a[t])?arguments[0][t]=a[t].slice():arguments[0][t]=a[t])}return arguments[0]}var Gn=function(){function e(a){g(this,e);for(var t in je)if(je.hasOwnProperty(t)){var o=je[t],i=o._driver;this[t]=i,Xe[i]||this.defineDriver(o)}this._defaultConfig=Dt({},Yn),this._config=Dt({},this._defaultConfig,a),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return e.prototype.config=function(t){if((typeof t>"u"?"undefined":h(t))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var o in t){if(o==="storeName"&&(t[o]=t[o].replace(/\W/g,"_")),o==="version"&&typeof t[o]!="number")return new Error("Database version must be a number.");this._config[o]=t[o]}return"driver"in t&&t.driver?this.setDriver(this._config.driver):!0}else return typeof t=="string"?this._config[t]:this._config},e.prototype.defineDriver=function(t,o,i){var r=new d(function(m,I){try{var D=t._driver,A=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver){I(A);return}for(var B=St.concat("_initStorage"),H=0,oe=B.length;H<oe;H++){var le=B[H],ue=!Kn(ut,le);if((ue||t[le])&&typeof t[le]!="function"){I(A);return}}var ge=function(){for(var Ze=function(Zn){return function(){var ea=new Error("Method "+Zn+" is not implemented by the current driver"),Jt=d.reject(ea);return v(Jt,arguments[arguments.length-1]),Jt}},Ct=0,Xn=ut.length;Ct<Xn;Ct++){var At=ut[Ct];t[At]||(t[At]=Ze(At))}};ge();var me=function(Ze){Xe[D]&&console.info("Redefining LocalForage driver: "+D),Xe[D]=t,Gt[D]=Ze,m()};"_support"in t?t._support&&typeof t._support=="function"?t._support().then(me,I):me(!!t._support):me(!0)}catch(Te){I(Te)}});return F(r,o,i),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(t,o,i){var r=Xe[t]?d.resolve(Xe[t]):d.reject(new Error("Driver not found."));return F(r,o,i),r},e.prototype.getSerializer=function(t){var o=d.resolve(Tt);return F(o,t),o},e.prototype.ready=function(t){var o=this,i=o._driverSet.then(function(){return o._ready===null&&(o._ready=o._initDriver()),o._ready});return F(i,t,t),i},e.prototype.setDriver=function(t,o,i){var r=this;Qt(t)||(t=[t]);var m=this._getSupportedDrivers(t);function I(){r._config.driver=r.driver()}function D(H){return r._extend(H),I(),r._ready=r._initStorage(r._config),r._ready}function A(H){return function(){var oe=0;function le(){for(;oe<H.length;){var ue=H[oe];return oe++,r._dbInfo=null,r._ready=null,r.getDriver(ue).then(D).catch(le)}I();var ge=new Error("No available storage method found.");return r._driverSet=d.reject(ge),r._driverSet}return le()}}var B=this._driverSet!==null?this._driverSet.catch(function(){return d.resolve()}):d.resolve();return this._driverSet=B.then(function(){var H=m[0];return r._dbInfo=null,r._ready=null,r.getDriver(H).then(function(oe){r._driver=oe._driver,I(),r._wrapLibraryMethodsWithReady(),r._initDriver=A(m)})}).catch(function(){I();var H=new Error("No available storage method found.");return r._driverSet=d.reject(H),r._driverSet}),F(this._driverSet,o,i),this._driverSet},e.prototype.supports=function(t){return!!Gt[t]},e.prototype._extend=function(t){Dt(this,t)},e.prototype._getSupportedDrivers=function(t){for(var o=[],i=0,r=t.length;i<r;i++){var m=t[i];this.supports(m)&&o.push(m)}return o},e.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,o=St.length;t<o;t++)Qn(this,St[t])},e.prototype.createInstance=function(t){return new e(t)},e}(),Jn=new Gn;S.exports=Jn},{3:3}]},{},[4])(4)})}(Lt)),Lt.exports}var Xs=Js();const on=fn(Xs),Zs={class:"w-full h-full flex flex-column p-1"},ei={class:"swiper-container-wrapper"},ti={class:"fixed bottom-0 left-0 w-full h-3rem bg-primary-reverse p-3 z-[9999]"},ni={class:"h-full flex align-items-center justify-content-between w-full"},ai={class:"m-2"},ri={class:"m-2"},oi={class:"m-2"},si={style:{"max-height":"60vh","overflow-y":"auto","padding-bottom":"60px"}},ii={class:"flex flex-column border-bottom-1"},li={key:0,class:"flex justify-content-between"},ui={class:"flex flex-column"},ci={class:"font-bold"},di={class:"text-right"},fi={key:1,class:"flex justify-content-between"},vi={class:"flex flex-column"},pi={class:"font-bold"},hi={class:"text-right"},mi={key:0},bi={key:1,class:"flex flex-column"},gi={class:"flex flex-column"},yi={class:"font-bold"},_i={class:"text-right"},wi={class:"total-footer bg-primary-reverse"},sn=5,pt="order_time_key",xi={__name:"HomePage",setup(n){const s=ln(),f=fa(),{t:S}=Ne(),{locale:T}=Ne(),h=Z(0),g=Z(!1),z=Z([""]),c=Z(0),k=Se.cartItemCount,q=Z(!1),d=Z([]),v=Z(0),F=Z({}),G=Z(!1),ne=xe.dishDatas,te=Z(Y.getOrderMenuTab()),Q=Z(null),J=Z(null),re=Z([]),X=Z([]),w=Z([]),p=Z(!1);let l=null;const y=x=>{c.value=x.activeIndex,Ye()},N=x=>{l=x};ze(c,x=>{l&&l.activeIndex!==x&&l.slideTo(x);let C=Y.getOrderMenuTab()[x];Y.customDishAPI.customDishes.value.map(W=>W.name).includes(C)?(G.value=!0,F.value=Y.customDishAPI.customDishes.value.find(W=>W.name==C)):G.value=!1});const R=(x,C,V,W)=>{Y.rateDish(x,C,V),W&&ke.show_success(S("notification.rating_submitted"))},M=(x,C,V)=>{if(F.value.name=="XIAOXIONGÂ® RAMEN"&&x.id===1){const W=x.dishes[C];let ie;W.dishid==47?V?ie=b(3,!0,1):ie=b(3,!1,1):ie=b(3,!0,1),ie!==void 0&&L(ie)}if(F.value.name=="Menu AlmoÃ§o"&&x.id===3){const W=x.dishes[C];let ie;[1427,41].includes(W.dishid)?V?ie=b(4,!0,0):ie=b(4,!1,0):ie=b(4,!0,0),ie!==void 0&&L(ie)}};function b(x,C,V){if(F.value={...F.value,types:F.value.types.map(W=>W.id===x?{...W,enable:C,minQuantity:C?V:0}:W)},C===!1)return x}function L(x){!F.value||!Array.isArray(F.value.types)||(F.value={...F.value,types:F.value.types.map(C=>C.id===x?{...C,dishes:C.dishes.map(V=>({...V,selected:!1}))}:C)})}function P(x){let C=Y.getOrderMenuTab()[x];if(Y.customDishAPI.customDishes.value.map(he=>he.name).includes(C)?(G.value=!0,F.value=Y.customDishAPI.customDishes.value.find(he=>he.name==C)):G.value=!1,Y.getMenu().length==0){console.log("exit");return}let ie=ne.value[x].mainDishes;xe.showDishList(ie)}const U=()=>{Y.refreshTableFromServer(),Y.getTableTotalAmount(v),q.value=!0},j=x=>{let C=x.id;x.org_id&&(C=x.org_id);for(let V=0;V<ne.value.length;V++)if(ne.value[V].id==C)for(const W in x){let ie=W;W.startsWith("note")&&(ie=ie.replace("note","description")),ne.value[V][ie]=x[W]}};function de(){return new Promise(x=>{let C=()=>{const V=Y.formatedMenu.value;V.length>0?x(V):setTimeout(C,200)};C()})}function ae(){return new Promise(x=>{let C=()=>{const V=Y.getOrderMenuTab();V.length>0?x(V):setTimeout(C,200)};C()})}const pe=De(()=>x=>{const C=Y.dictinaryAPI.dictinary.value.find(V=>V.refName===x);return C?C[`text_${T.value.toLowerCase()}`]:x});ze([()=>Y.formatedMenu.value,()=>T.value],([x,C])=>{if(!x||x.length===0){w.value=[];return}const V={};Y.orderMenuTab.value;const W=x.map(Re=>({...Re,mainDishes:Re.dishes.map(we=>{const $e=we.dish;if(V[$e.id])return V[$e.id];const Be={...$e,defaultName:$e.name,defaultSubname:$e.subname,name:ye($e,"name",C),note:ye($e,"note",C),subname:ye($e,"subname",C),quantity:0},Ve=we.subItems.map(Je=>{const Me=Je;return{...Je,defaultName:$e.name,defaultSubname:Me.subname,name:ye(Me,"name",C),note:ye(Me,"note",C),subname:ye(Me,"subname",C),quantity:0}}),We={...we,dish:Be,subItems:Ve};return V[We.id]=We,We})}));ne.value.length;const ie=xe.getAllIncrementedDish();xe.getIdsAndQuantity(ie);const he=Se.cartDishs.value;Bt.compressToEncodedURIComponent(JSON.stringify(he)),w.value=W,ne.value=w.value,z.value=Y.orderMenuTab.value,(ie.length>0||he.length>0)&&(xe.cleanDishDataQty(),xe.updateDishDataQty(ie)),Y.filterMenuTabs(p.value),console.log("languagedMenu updated via watch:",w.value),Zt(()=>{h.value++,l&&typeof l.updateDictionaryWord=="function"&&(l.updateDictionaryWord(),l.slideTo(c.value))})},{immediate:!0,deep:!0}),ze(()=>Y.orderMenuTab.value,x=>{te.value=x.map(C=>{const V=Y.dictinaryAPI.dictinary.value.find(W=>W.refName===C);return V?V[`text_${T.value.toLowerCase()}`]:C}),d.value=Ce(x),c.value=0}),nt(()=>{const x=Y.orderMenuTab.value;te.value=x.map(C=>{const V=Y.dictinaryAPI.dictinary.value.find(W=>W.refName===C);return V?V[`text_${T.value.toLowerCase()}`]:C}),d.value=Ce(x),c.value=0});function ye(x,C,V){return x?V==="en"?x[`${C}_en`]||x[C]:V==="zh"&&x[`${C}_cn`]||x[C]:""}async function _e(){await de();const x=await ae();Y.onMenuItemChanged=j,Ee(),d.value=Ce(x)}function Ce(x){const C=[];for(let V=0;V<x.length;V++){const W=V;C.push({label:pe.value(x[V]),command:()=>{it(W),Ye()}})}return C}const Ye=()=>{Zt(()=>{const x=document.querySelector(".p-tablist-viewport"),C=document.querySelector(".p-tab.p-tab-active");if(x&&C){const V=C.offsetLeft-x.offsetWidth/2+C.offsetWidth/2;x.scrollTo({left:V,behavior:"smooth"})}window.scrollTo({top:0,behavior:"smooth"})})},it=x=>{P(x),c.value=x,Ye()},_t=()=>{var x=xe.getAllIncrementedDish();J.value.showDishList(x)};function Qe(){return Y.getTable()}Y.params.port,Q.value=Y.table.value.order;function wt(x){var C=S("notification.too_fast",{remainTime:x});ke.show_warn(C)}const xt=(x,C)=>{const V=[];for(let we=0;we<Se.cartDishs.value.length;we++){var W=Se.cartDishs.value[we];const $e=Y.formateCustomDishNotes(W),Be=W.dis_count?W.dis_price:W.price;V.push({dishid:W.dishid,name:W.name,quantity:W.count,notes:$e,limit:W.limit,price:Be,dishNote:W.dishNote,category:W.category})}const ie=xe.getAllIncrementedDish();for(let we=0;we<ie.length;we++){var W=ie[we];if(W.quantity>0){const Be=W.dis_count?W.dis_price:W.price,Ve=Y.getDishNameDefaultName(W);V.push({dishid:W.id,name:Ve,quantity:W.quantity,limit:W.limit,price:Be,dishNote:W.dishNote})}}if(V.length===0)return ke.show_warn(S("notification.select_at_least_one")),!1;console.log("cart item:",V);const he=JSON.parse(Pe.getCookie(pt)||"{}"),Re=Date.now();if(!he.startTime||Re-he.startTime>sn*1e3)he.startTime=Re,he.uniCode||(he.uniCode=Date.now().toString(36)+Math.random().toString(36).substring(2,5));else{const we=sn-parseInt((Re-he.startTime)/1e3);wt(we);return}return Pe.setCookie(pt,JSON.stringify(he)),g.value=!0,Y.submit_order({uniCode:he.uniCode,name:x.name,note:x.note,table:Qe(),items:V},we=>{const $e=JSON.parse(Pe.getCookie(pt)||"{}");$e.uniCode=void 0,Pe.setCookie(pt,JSON.stringify($e)),C(we)}),!0};function $t(){const x=Pe.getCookie("language");x&&(T.value=x)}function lt(){for(let x=0;x<ne.value.length;x++){const C=ne.value[x];C.quantity=0}g.value=!1,Se.cleanAll()}nt(async()=>{$t(),await _e(),P(c.value),Y.clear_order_data=()=>{lt()},Y.setOnOrderConfirmed(x=>{lt();const C=x;ke.show_success(S("notification.order_submitted",{id:C}))}),Y.setOnShowError(x=>{g.value=!1,ke.show_error(x)})});function kt(){Pe.deleteCookie("login_time");const x=f.query.table;x?s.push({path:"/",query:{table:x}}):s.push({path:"/takeReserve"})}async function Fe(x,C=!0){const V=C?Se.cartDishs.value:xe.getIdsAndQuantity(xe.getAllIncrementedDish()),W=Bt.compressToEncodedURIComponent(JSON.stringify(V));try{await on.setItem(x,W)}catch(ie){console.error("ä¿å­˜åˆ° localForage å¤±è´¥:",ie)}}function Ge(){Y.isTakeaway()?(Fe("take_cartDish_normal",!1),Fe("take_cartDish_custom",!0)):(Fe("cartDish_normal",!1),Fe("cartDish_custom",!0))}async function Ue(x,C=!0){try{const V=await on.getItem(x);if(!V)return;const W=JSON.parse(Bt.decompressFromEncodedURIComponent(V));W&&W!=="undefined"&&(C?Se.cartDishs.value=W:xe.updateDishDataQty(W))}catch(V){console.error("ä»Ž localForage è¯»å–å¤±è´¥æˆ–è§£æžå¤±è´¥:",V)}}function Ee(){Y.isTakeaway()?(Ue("take_cartDish_normal",!1),Ue("take_cartDish_custom")):(Ue("cartDish_normal",!1),Ue("cartDish_custom"))}return da(()=>{Ge()}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&Ge()}),window.addEventListener("beforeunload",x=>{Ge(),Y.cleanup()}),(x,C)=>($(),O(fe,null,[u("div",Zs,[($(),ve(Ys,{key:h.value,types:te.value,typeIndex:c.value,tabItems:d.value,tableId:Qe(),onClickType:it,onSwitchToWelcome:kt},null,8,["types","typeIndex","tabItems","tableId"])),C[4]||(C[4]=u("div",{class:"pb-8"},null,-1)),C[5]||(C[5]=u("div",{class:"pb-4 sm:pb-5 md:pb-5 lg:pb-5"},null,-1)),K(Gs,{duration:3e3,position:"center",size:"3rem"}),u("div",ei,[($(),ve(_(ma),{key:`swiper-${te.value.length}-${h.value}`,"space-between":20,"centered-slides":"","grab-cursor":!0,class:"w-full",autoHeight:!0,onSlideChange:y,onSwiper:N,"initial-slide":c.value},{default:se(()=>[($(!0),O(fe,null,Ie(te.value,(V,W)=>($(),ve(_(ba),{key:W},{default:se(()=>[Math.abs(c.value-W)<=1&&(!G.value||c.value!==W)?($(),ve(Cr,{key:0,rateDish:R,likedItemsRef:re.value,dislikedItemsRef:X.value,tabIndex:W,onlyVeg:p.value},null,8,["likedItemsRef","dislikedItemsRef","tabIndex","onlyVeg"])):Math.abs(c.value-W)<=1&&G.value&&c.value===W?($(),ve(Mo,{key:1,currentCustomDish:F.value,onTypeClick:M,tabindex:W},null,8,["currentCustomDish","tabindex"])):ee("",!0)]),_:2},1024))),128))]),_:1},8,["initial-slide"]))]),C[6]||(C[6]=u("div",{style:{height:"60px"}},null,-1)),u("div",ti,[u("div",ni,[u("div",ai,[_(Y).isTakeaway()?ee("",!0):($(),ve(_(ce),{key:0,label:x.$t("common.orders"),icon:"pi pi-list",class:"p-button-secondary",onClick:U},null,8,["label"]))]),u("div",ri,[K(_(va),{class:"text-sm",modelValue:p.value,"onUpdate:modelValue":C[0]||(C[0]=V=>p.value=V),onLabel:_(S)("common.showAll"),offLabel:_(S)("common.showOnlyVegetables"),onClick:C[1]||(C[1]=V=>_(Y).filterMenuTabs(p.value))},null,8,["modelValue","onLabel","offLabel"])]),u("div",oi,[K(_(vn),{value:_(k),severity:"danger",onClick:_t},{default:se(()=>C[3]||(C[3]=[u("i",{class:"pi pi-shopping-cart",style:{"font-size":"2rem"}},null,-1)])),_:1,__:[3]},8,["value"])])])])]),K(oo,{ref_key:"cartRef",ref:J,checkout:xt,isTakeaway:!Qe()},null,8,["isTakeaway"]),K(_(Oe),{visible:q.value,"onUpdate:visible":C[2]||(C[2]=V=>q.value=V),header:x.$t("common.completedOrders"),modal:"",style:{width:"80vw","max-width":"700px"}},{default:se(()=>{var V,W;return[u("div",si,[u("div",ii,[(V=v.value.adultPrice)!=null&&V.quantity&&v.value.adultPrice.quantity!=0?($(),O("div",li,[u("div",ui,[u("span",ci,E(x.$t("common.adult")),1),u("small",null,E(x.$t("common.quantity"))+": "+E(v.value.adultPrice.quantity),1)]),u("div",di,[u("span",null,"â‚¬"+E((Number(v.value.adultPrice.price)*v.value.adultPrice.quantity).toFixed(2)),1)])])):ee("",!0),(W=v.value.childrenPrice)!=null&&W.quantity&&v.value.childrenPrice.quantity!=0?($(),O("div",fi,[u("div",vi,[u("span",pi,E(x.$t("common.children")),1),u("small",null,E(x.$t("common.quantity"))+": "+E(v.value.childrenPrice.quantity),1)]),u("div",hi,[u("span",null,"â‚¬"+E((Number(v.value.childrenPrice.price)*v.value.childrenPrice.quantity).toFixed(2)),1)])])):ee("",!0)]),_(Y).table.value.order.length===0?($(),O("div",mi,E(x.$t("common.noOrders")),1)):($(),O("div",bi,[($(!0),O(fe,null,Ie(_(Y).table.value.order,(ie,he)=>($(),O("div",{key:he,class:"flex justify-content-between border-bottom-1 pb-2"},[u("div",gi,[u("span",yi,E(_(Y).getDishName(ie)),1),u("small",null,E(x.$t("common.quantity"))+": "+E(ie.quantity),1)]),u("div",_i,[u("span",null,"â‚¬"+E((ie.price*ie.quantity).toFixed(2)),1)])]))),128))]))]),u("div",wi,E(x.$t("common.total"))+": â‚¬"+E(v.value.total),1)]}),_:1},8,["visible","header"])],64))}},Pi=st(xi,[["__scopeId","data-v-018d3c89"]]);export{Pi as default};
