import{b as F}from"./index-B_yOoGes.js";import{s as T,a as V}from"./index-CvOoD4gH.js";import{s as B,a as D}from"./index-Cwyqkitp.js";import{s as S}from"./index-Cp6jjMOu.js";import{q as $,x as j,n as z,h as _,s as O,c as P,a as t,d as o,w as c,l as s,F as q,o as x,z as G,t as l,C as U,e as A,G as E}from"./index-wgRpoX0d.js";import{s as H}from"./index-CeLxPqQC.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-aCXqh-i3.js";import"./index-D-07fRNA.js";import"./index-BSRB7VuG.js";import"./index-Dnq2afyk.js";import"./index-CpkBTmvN.js";import"./index-ChImTywB.js";import"./index-BBPRvQVz.js";import"./index-DxUcq-LS.js";import"./index-CHu6DZJV.js";import"./index-Bqnvhu8P.js";import"./index-CROvrDHc.js";import"./index-DU9w3h9i.js";const J={class:"card h-full",style:{display:"flex","flex-direction":"column"}},L={class:"flex flex-wrap gap-2 items-center justify-between"},Q={class:"m-0 font-bold text-2xl text-left flex-grow-1"},W={class:"flex gap-2 mt-1"},X={class:"font-bold"},Y={class:"font-bold text-green-800"},Z={class:"font-bold text-blue-800"},ee={class:"font-bold text-red-800"},te={class:"text-center py-5"},se={class:"mt-3 text-gray-500"},ae={class:"flex flex-column gap-2"},le={key:0,class:"text-red-600"},re={class:"font-bold text-lg"},oe={class:"font-bold text-lg"},ne={class:"font-bold text-lg"},ie={class:"flex justify-content-end"},ce={__name:"ReserverPage",setup(de){const{t:e}=$(),w=j(),m=z.tableReserves,a=_(),p=_(!1);function y(n){a.value=n.data,p.value=!0}const g=_({global:{value:null,matchMode:E.CONTAINS}}),b=O(()=>{const n=a.value.status;return n=="processing"?{label:e("reserverPage.processing")+"...",outlined:!0}:n=="voided"?{label:e("orderPage.voided"),outlined:!0}:{label:e("reserverPage.cancelReserve"),outlined:!1}});function C(){a.value.status=="processing"||a.value.status=="voided"||w.require({message:e("reserverPage.reserveCancellationMSG"),header:e("reserverPage.cancelReserve")+":"+a.value.name,rejectProps:{label:e("common.cancel"),severity:"secondary",outlined:!0},acceptProps:{label:e("common.confirm"),severity:"danger"},accept:()=>{a.value.status="processing",p.value=!1},reject:()=>{}})}function v(n){const r=m.value.filter(u=>u.financial_status==="voided").length,f=m.value.filter(u=>u.status==="new"||u.status==="confirmed").length;switch(n){case"completed":return m.value.length-r-f;case"voided":return r;case"unCompleted":return f;default:return m.value.length}}const N=n=>({completed:"status-completed",confirmed:"status-confirmed",processing:"status-processing",new:"status-new",voided:"status-voided"})[n]||"",R=n=>({completed:e("orderPage.completed"),confirmed:e("orderPage.confirmed"),processing:e("reserverPage.processing"),new:e("orderPage.new"),voided:e("orderPage.voided")})[n]||n;return(n,r)=>{var h;const f=D,u=S,I=B,d=V,M=T,k=F;return x(),P(q,null,[t("div",J,[o(M,{value:s(m),tableStyle:"min-width: 50rem",dataKey:"id",paginator:"",rows:10,rowsPerPageOptions:[10,20,50],stripedRows:"",filters:g.value,scrollable:"",scrollHeight:"flex",onRowClick:y,selectionMode:"single"},{header:c(()=>[t("div",L,[t("h4",Q,l(s(e)("reserverPage.header")),1),o(I,null,{default:c(()=>[o(f,null,{default:c(()=>r[2]||(r[2]=[t("i",{class:"pi pi-search"},null,-1)])),_:1,__:[2]}),o(u,{modelValue:g.value.global.value,"onUpdate:modelValue":r[0]||(r[0]=i=>g.value.global.value=i),placeholder:s(e)("orderPage.find")},null,8,["modelValue","placeholder"])]),_:1})]),t("div",W,[t("label",X,"订台总数:"+l(v("all")),1),t("label",Y,"订台完成数:"+l(v("completed")),1),t("label",Z,"订台未完成数:"+l(v("unCompleted")),1),t("label",ee,"订台取消数:"+l(v("voided")),1)])]),empty:c(()=>[t("div",te,[r[3]||(r[3]=t("i",{class:"pi pi-search",style:{"font-size":"3rem",color:"#ccc"}},null,-1)),t("p",se,l(s(e)("orderPage.notFound")),1)])]),default:c(()=>[o(d,{header:s(e)("orderPage.status")},{body:c(({data:i})=>[t("span",{class:G(["status-badge",N(i.status||"new")])},l(R(i.status||"new")),3)]),_:1},8,["header"]),o(d,{field:"name",header:"ID",sortable:""}),o(d,{field:"date",header:s(e)("reserverPage.dateTime"),sortable:""},{body:c(({data:i})=>[U(l(i.date+" "+i.time),1)]),_:1},8,["header"]),o(d,{field:"customerName",header:s(e)("reserverPage.customerName")},null,8,["header"]),o(d,{field:"numberPeople",header:s(e)("reserverPage.numberPeople")},null,8,["header"]),o(d,{field:"phone",header:s(e)("reserverPage.phone")},null,8,["header"]),o(d,{field:"note",header:s(e)("reserverPage.note")},null,8,["header"])]),_:1},8,["value","filters"])]),o(s(H),{visible:p.value,"onUpdate:visible":r[1]||(r[1]=i=>p.value=i),header:s(e)("reserverPage.reserveDetails")+" (ID: "+((h=a.value)==null?void 0:h.name)+")",modal:"",style:{width:"450px"}},{default:c(()=>[t("div",ae,[a.value.financial_status||a.value.status==="voided"?(x(),P("label",le,l(a.value.financial_status?s(e)("reserverPage.cancelForClient"):s(e)("reserverPage.cancelForRestaurant")),1)):A("",!0),t("label",re,l(s(e)("reserverPage.dateTime")+": "+a.value.date+" "+a.value.time),1),t("label",oe,l(s(e)("reserverPage.customerName")+": "+a.value.customerName),1),t("label",ne,l(s(e)("reserverPage.numberPeople")+": "+a.value.numberPeople),1),t("label",null,l(s(e)("reserverPage.phone")+": "+a.value.phone),1),t("label",null,l(s(e)("reserverPage.email")+": "+a.value.email),1),t("label",null,l(s(e)("reserverPage.note")+": "+a.value.note),1),t("div",ie,[o(k,{label:b.value.label,outlined:b.value.outlined,onClick:C},null,8,["label","outlined"])])])]),_:1},8,["visible","header"])],64)}}},Fe=K(ce,[["__scopeId","data-v-00e7304f"]]);export{Fe as default};
