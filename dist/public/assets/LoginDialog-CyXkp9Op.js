import{Q as _,b as r,w as L,c as w,o as f,s as y,h as s,f as N,a as $,v as c,t as p,M as t,J as S}from"./vue-BLaX11bV.js";import{j as F,N as G,b as h,e as M}from"./primevue-Dz75K8ui.js";import{c as k}from"./index-C9_-_DFL.js";const P={class:"flex flex-column gap-3"},U={class:"flex flex-column gap-2"},j={for:"email"},q={class:"flex flex-column gap-2"},D={for:"password"},I={key:0,class:"text-red-500 text-sm"},K={class:"flex justify-content-between align-items-center w-full"},A={class:"flex gap-2"},Q={__name:"LoginDialog",props:{visible:{type:Boolean,default:!1},showGuestShortcut:{type:Boolean,default:!0}},emits:["update:visible","login-success","switch-to-guest"],setup(m,{emit:V}){const{t:v}=_(),x=m,n=V,u=r(""),d=r(""),l=r(!1),o=r("");L(()=>x.visible,e=>{e&&b()});function b(){u.value="",d.value="",o.value="",l.value=!1}function B(){n("update:visible",!1)}function C(){n("update:visible",!1),n("switch-to-guest")}async function g(){if(!u.value||!d.value){o.value=v("common.auth.emailPasswordRequired");return}l.value=!0,o.value="";try{const e=await k.login(u.value,d.value);e.success?(n("login-success"),n("update:visible",!1)):o.value=e.error||v("common.auth.loginFailed")}catch(e){o.value=v("common.auth.loginFailed"),console.error("Login error:",e)}finally{l.value=!1}}return(e,i)=>(f(),w(t(M),{visible:m.visible,"onUpdate:visible":i[2]||(i[2]=a=>e.$emit("update:visible",a)),header:e.$t("common.auth.login"),modal:!0,dismissableMask:!0,style:{width:"90vw",maxWidth:"25rem"},onHide:b},{footer:y(()=>{var a;return[s("div",K,[s("div",null,[m.showGuestShortcut&&((a=t(k).settings.value)!=null&&a.qrcodeInfo)?(f(),w(t(h),{key:0,label:e.$t("common.auth.guestLogin"),icon:"pi pi-user",class:"p-button-text",onClick:C,disabled:l.value},null,8,["label","disabled"])):$("",!0)]),s("div",A,[c(t(h),{label:e.$t("common.cancel"),severity:"secondary",onClick:B,disabled:l.value},null,8,["label","disabled"]),c(t(h),{label:e.$t("common.auth.login"),onClick:g,loading:l.value},null,8,["label","loading"])])])]}),default:y(()=>[s("div",P,[s("div",U,[s("label",j,p(e.$t("common.auth.email")),1),c(t(F),{id:"email",modelValue:u.value,"onUpdate:modelValue":i[0]||(i[0]=a=>u.value=a),type:"email",placeholder:e.$t("common.auth.emailPlaceholder"),class:"w-full",disabled:l.value},null,8,["modelValue","placeholder","disabled"])]),s("div",q,[s("label",D,p(e.$t("common.auth.password")),1),c(t(G),{id:"password",modelValue:d.value,"onUpdate:modelValue":i[1]||(i[1]=a=>d.value=a),placeholder:e.$t("common.auth.passwordPlaceholder"),feedback:!1,toggleMask:"",class:"w-full",disabled:l.value,onKeyup:S(g,["enter"]),fluid:""},null,8,["modelValue","placeholder","disabled"])]),o.value?(f(),N("div",I,p(o.value),1)):$("",!0)])]),_:1},8,["visible","header"]))}};export{Q as _};
