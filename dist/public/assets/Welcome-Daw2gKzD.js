import{s as ae,_ as oe,S as ne,P as ie,a as re}from"./pagination-DBSDGVNB.js";import{u as M,r as p,c as S,a as o,o as ue,C as ce,b as de,w as me,d as pe,e as fe,m as k,f as i,g as u,h as l,i as B,j as c,k as s,n as j,t as d,l as L,F as h,p as y,q as n,s as O}from"./index-Ccef2DME.js";import{s as ve}from"./index-DUUDYkib.js";import{s as f}from"./index-BkmjFDQe.js";import{_ as ge,s as he,a as _e,b as be,c as we}from"./_plugin-vue_export-helper-CsWId3IH.js";import{s as xe,a as ke}from"./index-DO23VeFd.js";import{s as ye}from"./index-CJ0fq1_e.js";import{c as V}from"./cookie-CTJN0GZu.js";import"./index-B7wGUsLF.js";import"./index-B2gbRn2j.js";const Ce=["src"],$e=["onClick"],Pe=["src"],Ne={class:"absolute top-0 border-0 right-0 p-2 flex flex-column flex align-items-center"},Ie={class:"m-3 max-w-screen"},Fe={key:0,class:j(["w-full","p-4"])},Se=["src"],Be={key:0,class:"text-center p-1"},Le={key:1,class:"text-center p-1"},Oe={class:"flex flex-column justify-center"},Ve={key:0,class:"text-center"},Te={key:1,class:"text-center"},De={class:"flex w-full"},je={class:"flex flex-column"},Ae={class:"w-full text-sm break-words whitespace-pre-wrap px-2"},Ee=["src"],Re={class:"pt-3 pb-3"},ze={key:0,class:"flex flex-row gap-2"},qe={class:"border-400 border-round border-1 p-3"},Me={class:"text-center font-bold"},Ue={key:0,class:"w-full overflow-hidden"},Ge=["src"],He={class:"w-full overflow-hidden",style:{"aspect-ratio":"2 / 1.5"}},We=["src"],Xe={class:"font-bold"},Je={class:"flex flex-column"},Qe={class:"flex flex-row justify-content-between w-full"},Ke={key:0,class:"fixed right-0 bottom-0 p-4",style:{"z-index":"2"}},Ye={class:"mt-2"},Ze={class:"flex justify-content-end mt-2"},et={__name:"Welcome",props:["switchTo"],setup(tt){const _=[{label:"pt",imagePath:"flags/pt.png"},{label:"en",imagePath:"flags/en.png"},{label:"zh",imagePath:"flags/zh.png"}],A=fe(),U=pe(),{locale:b}=M(),{t:m}=M(),w=p(null),T=p(!0);p([]);const E=p(),G=S(()=>o.getPickupDate("restaurantName")),r=p({});function H(){const e=V.getCookie("language");e&&(b.value=e)}let C=null;function W(){return new Promise(e=>{let t=()=>{const a=o.currentPage.value;a&&Object.keys(a).length>0?e(a):setTimeout(t,200)};t()})}ue(async()=>{var e;o.params=o.getQueryParams(),o.params.table?o.params.table=ce.SimpleDecode(o.params.table):o.params.table=void 0,o.initMenu(!0),H(),await W(),r.value=o.currentPage.value,console.log("page :",r.value),C=new IntersectionObserver(t=>{t.forEach(a=>{a.isIntersecting?T.value=!0:T.value=!1})},{threshold:.1}),(e=w.value)!=null&&e.$el&&C.observe(w.value.$el)}),de(()=>{var e;C&&((e=w.value)!=null&&e.$el)&&C.unobserve(w.value.$el)}),me(()=>o.currentPage.value,e=>{e&&(r.value=e)},{immediate:!0});const X=S(()=>{const e="/";switch(b.value.toLowerCase()){case"pt":return e+_[0].imagePath;case"en":return e+_[1].imagePath;case"zh":return e+_[2].imagePath;default:return e+_[1].imagePath}});function v(e){return e[`text_${b.value.toLowerCase()}`]}const J=Date.now(),R=V.getCookie("login_time");let D;R&&(D=JSON.parse(R));const Q=S(()=>_.filter(e=>e.label!==b.value.toLowerCase()).map(e=>({...e,command:()=>{b.value=e.label,K(e.label)}})));function K(e){V.setCookie("language",e)}function z(e){window.open(e,"_blank")}const Y=e=>{E.value.toggle(e)};D&&(J-D>60*5*1e3?V.clearAllCookies():$());function $(){const e=U.query.table;A.push({path:"/table",query:{table:e}})}function Z(){o.currentTableId.value=void 0,o.params.table=void 0,A.push({path:"/takeReserve"})}const ee=S(()=>[{label:m("common.options"),items:[{label:m("common.pay"),icon:"pi pi-wallet",command:()=>{te()}},{label:m("common.call"),icon:"pi pi-user-plus",command:()=>{o.send_cmd(o.getTable(),{cmd:"call"},e=>{e.success?k.show_info(m("notification.call_msg")):k.show_info(e.data)})}}]}]);function q(e){return r.value.data.options[e]?"font-bold":""}const P=p(!1),N=p(),x=p();function te(){P.value=!0}function le(){e(N.value)?o.send_cmd(o.getTable(),{cmd:"pay",nif:N.value,note:x.value},t=>{t.success?(k.show_info(m("notification.pay_msg")),P.value=!1):k.show_error(m("common.failed"))}):k.show_warn(m("notification.cancel_msg"));function e(t){return!t||t.toString().length===9||t.toString().length===0}}function se(){x.value&&(x.value=void 0)}return(e,t)=>(n(),i(h,null,[u(s(ae),{model:Q.value,direction:"down",transitionDelay:80,class:"absolute top-0 left-0 border-0"},{button:c(({toggleCallback:a})=>[u(s(f),{outlined:"",onClick:a,class:"custom-clean-button"},{default:c(()=>[l("img",{src:X.value,style:{width:"38px",height:"38px"}},null,8,Ce)]),_:2},1032,["onClick"])]),item:c(({item:a,toggleCallback:I})=>[l("div",{class:"flex flex-col items-center justify-between",onClick:I},[l("img",{src:a.imagePath,alt:"lang",style:{width:"38px",height:"38px"}},null,8,Pe)],8,$e)]),_:1},8,["model"]),l("div",Ne,[l("div",null,[u(s(f),{icon:"pi pi-bell",rounded:"","aria-label":"Filter",onClick:Y,"aria-haspopup":"true","aria-controls":"overlay_menu",size:"small",style:{width:"42px",height:"42px"}}),u(s(ve),{ref_key:"menu",ref:E,id:"overlay_menu",model:ee.value,popup:!0},null,8,["model"])]),l("div",null,[u(s(f),{icon:"pi pi-instagram",class:"custom-clean-button",onClick:t[0]||(t[0]=()=>{})})])]),l("div",Ie,[r.value?(n(),i("div",Fe,[(n(),i("img",{src:s(o).pathFormated(r.value.data.logoPath,r.value.imagesPath),alt:"Logo",class:"max-w-6rem h-auto w-full mx-auto block",key:r.value.data.logoPath},null,8,Se)),r.value.data.restaurantName?(n(),i("h3",Be,d(r.value.data.restaurantName),1)):(n(),i("h3",Le,d(G.value),1)),l("div",Oe,[s(o).testEnvironment.value?(n(),i("h2",Ve,d("DEMO"))):B("",!0),s(o).testEnvironment.value?(n(),i("span",Te,d(s(m)("home.demoDescription")),1)):B("",!0)])])):B("",!0),l("div",De,[u(s(he),{class:"w-full max-w-xl mx-auto"},{default:c(()=>[(n(!0),i(h,null,y(r.value.data.titles,(a,I)=>(n(),L(s(_e),{value:I},{default:c(()=>[u(s(be),null,{default:c(()=>[O(d(v(a.title)),1)]),_:2},1024),u(s(we),{class:"p-1"},{default:c(()=>[l("div",je,[l("div",Ae,d(v(a.description)),1),l("img",{src:s(o).pathFormated(a.image.src,r.value.imagesPath),class:"max-w-5rem h-auto block mr-auto p-1 invert-image"},null,8,Ee)])]),_:2},1024)]),_:2},1032,["value"]))),256))]),_:1})]),l("div",Re,[s(o).testEnvironment?(n(),i("div",ze,[u(s(f),{onClick:t[1]||(t[1]=a=>$()),class:"w-full font-bold",style:{"border-radius":"20px"}},{default:c(()=>[O(d(e.$t("common.eatHere")),1)]),_:1}),u(s(f),{onClick:t[2]||(t[2]=a=>Z()),class:"w-full font-bold",style:{"border-radius":"20px"}},{default:c(()=>[O(d(e.$t("common.takeOrReserve")),1)]),_:1})])):(n(),L(s(f),{key:1,ref_key:"orderButtonRef",ref:w,onClick:t[3]||(t[3]=a=>$()),class:"w-full font-bold",style:{"border-radius":"20px"}},{default:c(()=>[O(d(e.$t("home.orderNow")),1)]),_:1},512))]),(n(!0),i(h,null,y(r.value.data.frames,(a,I)=>(n(),i("div",null,[l("div",qe,[(n(!0),i(h,null,y(a,(g,lt)=>(n(),i("div",null,[l("h1",Me,d(v(g.title)),1),g.images.length<=1?(n(),i("div",Ue,[l("img",{src:s(o).pathFormated(g.images[0].src,r.value.imagesPath),class:"w-full"},null,8,Ge)])):(n(),L(s(re),{key:1,"slides-per-view":1,loop:!0,class:"w-full",modules:[s(ie)],pagination:{clickable:!0}},{default:c(()=>[(n(!0),i(h,null,y(g.images,(F,st)=>(n(),L(s(ne),null,{default:c(()=>[l("div",He,[l("img",{src:s(o).pathFormated(F.src,r.value.imagesPath),class:"w-full h-full",style:{"object-fit":"cover"}},null,8,We)])]),_:2},1024))),256))]),_:2},1032,["modules"])),l("h4",Xe,d(v(g.subtitle)),1),(n(!0),i(h,null,y(g.descriptions,F=>(n(),i("div",null,[l("div",Je,[l("div",Qe,[l("span",{class:j(q(0))},d(v(F.left)),3),l("span",{class:j(q(1))},d(v(F.right)),3)])])]))),256))]))),256))]),t[11]||(t[11]=l("div",{class:"p-4"},null,-1))]))),256)),l("div",{class:"absoluto top-0 text-center text-xs p-2 underline cursor-pointer",onClick:t[4]||(t[4]=a=>z("https://5am3eq-wc.myshopify.com/"))}," ©2025 XIAOXIONG® v2.0.7 "),l("div",{class:"absoluto top-0 text-center text-xs p-2",onClick:t[5]||(t[5]=a=>z("https://5am3eq-wc.myshopify.com/"))},t[12]||(t[12]=[l("img",{src:oe,style:{width:"7rem"}},null,-1)]))]),T.value?B("",!0):(n(),i("div",Ke,[u(s(f),{rounded:"","aria-label":"Star",onClick:t[6]||(t[6]=a=>$()),class:"w-full font-bold p-button-lg shadow-6"},{default:c(()=>t[13]||(t[13]=[l("span",{class:"material-icons text-5xl"},"restaurant",-1)])),_:1,__:[13]})])),u(s(xe),{visible:P.value,"onUpdate:visible":t[10]||(t[10]=a=>P.value=a),header:"结账",class:"flex flex-column",modal:!0,dismissableMask:!0,onHide:se},{default:c(()=>[l("div",null,[t[14]||(t[14]=l("label",null,"NIF:",-1)),u(s(ye),{modelValue:N.value,"onUpdate:modelValue":t[7]||(t[7]=a=>N.value=a),inputId:"withoutgrouping",useGrouping:!1,fluid:"",class:"w-full m-1"},null,8,["modelValue"])]),l("div",Ye,[l("label",null,d(e.$t("common.note"))+":",1),u(s(ke),{type:"text",modelValue:x.value,"onUpdate:modelValue":t[8]||(t[8]=a=>x.value=a),class:"w-full m-1"},null,8,["modelValue"])]),l("div",Ze,[u(s(f),{label:s(m)("common.send"),onClick:t[9]||(t[9]=a=>le())},null,8,["label"])])]),_:1},8,["visible"])],64))}},ft=ge(et,[["__scopeId","data-v-87f247bd"]]);export{ft as default};
