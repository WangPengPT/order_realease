import{g as Ct}from"./_commonjsHelpers-CqkleIqs.js";import{v as qe,B as ye,x as Te,y as ze,f as h,q as l,l as X,i as O,z as ve,A as Z,D as ke,h as a,t as v,n as ce,u as fe,r as R,o as Ge,a as B,g as P,F as G,p as se,k as o,j as H,E as Pe,s as be,m as ie,e as ct,G as Dt,H as It,w as Be,c as pe,I as Le,J as St,R as dt,K as Ve,L as At,M as Ke,N as Nt,O as Se,P as Bt,Q as at,S as ft,T as Pt,U as Lt,V as Ae,b as qt,W as st,d as zt}from"./index-BwPPnLGe.js";import{s as ge,a as pt}from"./index-CUQGLdDD.js";import{s as J,a as vt}from"./index-BCbJa3uc.js";import{D as ee,c as re,s as nt,a as Ot}from"./index-CC4ZhHXX.js";import{_ as Ce,a as Ue,b as We,c as Qe,s as Je,d as Et,S as Mt}from"./_plugin-vue_export-helper-BUrooqfo.js";import{s as Rt}from"./index-GRceVCSG.js";import{s as ot,a as jt}from"./index-Dr7d5Dz6.js";import{c as de}from"./cookie-CTJN0GZu.js";import{s as Vt}from"./index-De3R7qhT.js";import{s as it}from"./index-CmmLL9NQ.js";import{s as Ft}from"./index-D5BUWpid.js";var Fe={exports:{}},lt;function Ht(){return lt||(lt=1,function(e){var t=function(){var n=String.fromCharCode,g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",d={};function f(r,w){if(!d[r]){d[r]={};for(var A=0;A<r.length;A++)d[r][r.charAt(A)]=A}return d[r][w]}var V={compressToBase64:function(r){if(r==null)return"";var w=V._compress(r,6,function(A){return g.charAt(A)});switch(w.length%4){default:case 0:return w;case 1:return w+"===";case 2:return w+"==";case 3:return w+"="}},decompressFromBase64:function(r){return r==null?"":r==""?null:V._decompress(r.length,32,function(w){return f(g,r.charAt(w))})},compressToUTF16:function(r){return r==null?"":V._compress(r,15,function(w){return n(w+32)})+" "},decompressFromUTF16:function(r){return r==null?"":r==""?null:V._decompress(r.length,16384,function(w){return r.charCodeAt(w)-32})},compressToUint8Array:function(r){for(var w=V.compress(r),A=new Uint8Array(w.length*2),y=0,b=w.length;y<b;y++){var q=w.charCodeAt(y);A[y*2]=q>>>8,A[y*2+1]=q%256}return A},decompressFromUint8Array:function(r){if(r==null)return V.decompress(r);for(var w=new Array(r.length/2),A=0,y=w.length;A<y;A++)w[A]=r[A*2]*256+r[A*2+1];var b=[];return w.forEach(function(q){b.push(n(q))}),V.decompress(b.join(""))},compressToEncodedURIComponent:function(r){return r==null?"":V._compress(r,6,function(w){return m.charAt(w)})},decompressFromEncodedURIComponent:function(r){return r==null?"":r==""?null:(r=r.replace(/ /g,"+"),V._decompress(r.length,32,function(w){return f(m,r.charAt(w))}))},compress:function(r){return V._compress(r,16,function(w){return n(w)})},_compress:function(r,w,A){if(r==null)return"";var y,b,q={},W={},U="",Q="",E="",z=2,N=3,L=2,M=[],u=0,s=0,p;for(p=0;p<r.length;p+=1)if(U=r.charAt(p),Object.prototype.hasOwnProperty.call(q,U)||(q[U]=N++,W[U]=!0),Q=E+U,Object.prototype.hasOwnProperty.call(q,Q))E=Q;else{if(Object.prototype.hasOwnProperty.call(W,E)){if(E.charCodeAt(0)<256){for(y=0;y<L;y++)u=u<<1,s==w-1?(s=0,M.push(A(u)),u=0):s++;for(b=E.charCodeAt(0),y=0;y<8;y++)u=u<<1|b&1,s==w-1?(s=0,M.push(A(u)),u=0):s++,b=b>>1}else{for(b=1,y=0;y<L;y++)u=u<<1|b,s==w-1?(s=0,M.push(A(u)),u=0):s++,b=0;for(b=E.charCodeAt(0),y=0;y<16;y++)u=u<<1|b&1,s==w-1?(s=0,M.push(A(u)),u=0):s++,b=b>>1}z--,z==0&&(z=Math.pow(2,L),L++),delete W[E]}else for(b=q[E],y=0;y<L;y++)u=u<<1|b&1,s==w-1?(s=0,M.push(A(u)),u=0):s++,b=b>>1;z--,z==0&&(z=Math.pow(2,L),L++),q[Q]=N++,E=String(U)}if(E!==""){if(Object.prototype.hasOwnProperty.call(W,E)){if(E.charCodeAt(0)<256){for(y=0;y<L;y++)u=u<<1,s==w-1?(s=0,M.push(A(u)),u=0):s++;for(b=E.charCodeAt(0),y=0;y<8;y++)u=u<<1|b&1,s==w-1?(s=0,M.push(A(u)),u=0):s++,b=b>>1}else{for(b=1,y=0;y<L;y++)u=u<<1|b,s==w-1?(s=0,M.push(A(u)),u=0):s++,b=0;for(b=E.charCodeAt(0),y=0;y<16;y++)u=u<<1|b&1,s==w-1?(s=0,M.push(A(u)),u=0):s++,b=b>>1}z--,z==0&&(z=Math.pow(2,L),L++),delete W[E]}else for(b=q[E],y=0;y<L;y++)u=u<<1|b&1,s==w-1?(s=0,M.push(A(u)),u=0):s++,b=b>>1;z--,z==0&&(z=Math.pow(2,L),L++)}for(b=2,y=0;y<L;y++)u=u<<1|b&1,s==w-1?(s=0,M.push(A(u)),u=0):s++,b=b>>1;for(;;)if(u=u<<1,s==w-1){M.push(A(u));break}else s++;return M.join("")},decompress:function(r){return r==null?"":r==""?null:V._decompress(r.length,32768,function(w){return r.charCodeAt(w)})},_decompress:function(r,w,A){var y=[],b=4,q=4,W=3,U="",Q=[],E,z,N,L,M,u,s,p={val:A(0),position:w,index:1};for(E=0;E<3;E+=1)y[E]=E;for(N=0,M=Math.pow(2,2),u=1;u!=M;)L=p.val&p.position,p.position>>=1,p.position==0&&(p.position=w,p.val=A(p.index++)),N|=(L>0?1:0)*u,u<<=1;switch(N){case 0:for(N=0,M=Math.pow(2,8),u=1;u!=M;)L=p.val&p.position,p.position>>=1,p.position==0&&(p.position=w,p.val=A(p.index++)),N|=(L>0?1:0)*u,u<<=1;s=n(N);break;case 1:for(N=0,M=Math.pow(2,16),u=1;u!=M;)L=p.val&p.position,p.position>>=1,p.position==0&&(p.position=w,p.val=A(p.index++)),N|=(L>0?1:0)*u,u<<=1;s=n(N);break;case 2:return""}for(y[3]=s,z=s,Q.push(s);;){if(p.index>r)return"";for(N=0,M=Math.pow(2,W),u=1;u!=M;)L=p.val&p.position,p.position>>=1,p.position==0&&(p.position=w,p.val=A(p.index++)),N|=(L>0?1:0)*u,u<<=1;switch(s=N){case 0:for(N=0,M=Math.pow(2,8),u=1;u!=M;)L=p.val&p.position,p.position>>=1,p.position==0&&(p.position=w,p.val=A(p.index++)),N|=(L>0?1:0)*u,u<<=1;y[q++]=n(N),s=q-1,b--;break;case 1:for(N=0,M=Math.pow(2,16),u=1;u!=M;)L=p.val&p.position,p.position>>=1,p.position==0&&(p.position=w,p.val=A(p.index++)),N|=(L>0?1:0)*u,u<<=1;y[q++]=n(N),s=q-1,b--;break;case 2:return Q.join("")}if(b==0&&(b=Math.pow(2,W),W++),y[s])U=y[s];else if(s===q)U=z+z.charAt(0);else return null;Q.push(U),y[q++]=z+U.charAt(0),b--,z=U,b==0&&(b=Math.pow(2,W),W++)}}};return V}();e!=null?e.exports=t:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return t})}(Fe)),Fe.exports}var Kt=Ht();const He=Ct(Kt);var Ut=qe`
    .p-tag {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        background: dt('tag.primary.background');
        color: dt('tag.primary.color');
        font-size: dt('tag.font.size');
        font-weight: dt('tag.font.weight');
        padding: dt('tag.padding');
        border-radius: dt('tag.border.radius');
        gap: dt('tag.gap');
    }

    .p-tag-icon {
        font-size: dt('tag.icon.size');
        width: dt('tag.icon.size');
        height: dt('tag.icon.size');
    }

    .p-tag-rounded {
        border-radius: dt('tag.rounded.border.radius');
    }

    .p-tag-success {
        background: dt('tag.success.background');
        color: dt('tag.success.color');
    }

    .p-tag-info {
        background: dt('tag.info.background');
        color: dt('tag.info.color');
    }

    .p-tag-warn {
        background: dt('tag.warn.background');
        color: dt('tag.warn.color');
    }

    .p-tag-danger {
        background: dt('tag.danger.background');
        color: dt('tag.danger.color');
    }

    .p-tag-secondary {
        background: dt('tag.secondary.background');
        color: dt('tag.secondary.color');
    }

    .p-tag-contrast {
        background: dt('tag.contrast.background');
        color: dt('tag.contrast.color');
    }
`,Wt={root:function(t){var n=t.props;return["p-tag p-component",{"p-tag-info":n.severity==="info","p-tag-success":n.severity==="success","p-tag-warn":n.severity==="warn","p-tag-danger":n.severity==="danger","p-tag-secondary":n.severity==="secondary","p-tag-contrast":n.severity==="contrast","p-tag-rounded":n.rounded}]},icon:"p-tag-icon",label:"p-tag-label"},Qt=ye.extend({name:"tag",style:Ut,classes:Wt}),Jt={name:"BaseTag",extends:Te,props:{value:null,severity:null,rounded:Boolean,icon:String},style:Qt,provide:function(){return{$pcTag:this,$parentInstance:this}}};function xe(e){"@babel/helpers - typeof";return xe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xe(e)}function Gt(e,t,n){return(t=Zt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zt(e){var t=Xt(e,"string");return xe(t)=="symbol"?t:t+""}function Xt(e,t){if(xe(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var g=n.call(e,t);if(xe(g)!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var we={name:"Tag",extends:Jt,inheritAttrs:!1,computed:{dataP:function(){return ze(Gt({rounded:this.rounded},this.severity,this.severity))}}},Yt=["data-p"];function ea(e,t,n,g,m,d){return l(),h("span",Z({class:e.cx("root"),"data-p":d.dataP},e.ptmi("root")),[e.$slots.icon?(l(),X(ke(e.$slots.icon),Z({key:0,class:e.cx("icon")},e.ptm("icon")),null,16,["class"])):e.icon?(l(),h("span",Z({key:1,class:[e.cx("icon"),e.icon]},e.ptm("icon")),null,16)):O("",!0),e.value!=null||e.$slots.default?ve(e.$slots,"default",{key:2},function(){return[a("span",Z({class:e.cx("label")},e.ptm("label")),v(e.value),17)]}):O("",!0)],16,Yt)}we.render=ea;var ta=qe`
    .p-avatar {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: dt('avatar.width');
        height: dt('avatar.height');
        font-size: dt('avatar.font.size');
        background: dt('avatar.background');
        color: dt('avatar.color');
        border-radius: dt('avatar.border.radius');
    }

    .p-avatar-image {
        background: transparent;
    }

    .p-avatar-circle {
        border-radius: 50%;
    }

    .p-avatar-circle img {
        border-radius: 50%;
    }

    .p-avatar-icon {
        font-size: dt('avatar.icon.size');
        width: dt('avatar.icon.size');
        height: dt('avatar.icon.size');
    }

    .p-avatar img {
        width: 100%;
        height: 100%;
    }

    .p-avatar-lg {
        width: dt('avatar.lg.width');
        height: dt('avatar.lg.width');
        font-size: dt('avatar.lg.font.size');
    }

    .p-avatar-lg .p-avatar-icon {
        font-size: dt('avatar.lg.icon.size');
        width: dt('avatar.lg.icon.size');
        height: dt('avatar.lg.icon.size');
    }

    .p-avatar-xl {
        width: dt('avatar.xl.width');
        height: dt('avatar.xl.width');
        font-size: dt('avatar.xl.font.size');
    }

    .p-avatar-xl .p-avatar-icon {
        font-size: dt('avatar.xl.icon.size');
        width: dt('avatar.xl.icon.size');
        height: dt('avatar.xl.icon.size');
    }

    .p-avatar-group {
        display: flex;
        align-items: center;
    }

    .p-avatar-group .p-avatar + .p-avatar {
        margin-inline-start: dt('avatar.group.offset');
    }

    .p-avatar-group .p-avatar {
        border: 2px solid dt('avatar.group.border.color');
    }

    .p-avatar-group .p-avatar-lg + .p-avatar-lg {
        margin-inline-start: dt('avatar.lg.group.offset');
    }

    .p-avatar-group .p-avatar-xl + .p-avatar-xl {
        margin-inline-start: dt('avatar.xl.group.offset');
    }
`,aa={root:function(t){var n=t.props;return["p-avatar p-component",{"p-avatar-image":n.image!=null,"p-avatar-circle":n.shape==="circle","p-avatar-lg":n.size==="large","p-avatar-xl":n.size==="xlarge"}]},label:"p-avatar-label",icon:"p-avatar-icon"},sa=ye.extend({name:"avatar",style:ta,classes:aa}),na={name:"BaseAvatar",extends:Te,props:{label:{type:String,default:null},icon:{type:String,default:null},image:{type:String,default:null},size:{type:String,default:"normal"},shape:{type:String,default:"square"},ariaLabelledby:{type:String,default:null},ariaLabel:{type:String,default:null}},style:sa,provide:function(){return{$pcAvatar:this,$parentInstance:this}}};function $e(e){"@babel/helpers - typeof";return $e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$e(e)}function rt(e,t,n){return(t=oa(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oa(e){var t=ia(e,"string");return $e(t)=="symbol"?t:t+""}function ia(e,t){if($e(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var g=n.call(e,t);if($e(g)!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ze={name:"Avatar",extends:na,inheritAttrs:!1,emits:["error"],methods:{onError:function(t){this.$emit("error",t)}},computed:{dataP:function(){return ze(rt(rt({},this.shape,this.shape),this.size,this.size))}}},la=["aria-labelledby","aria-label","data-p"],ra=["data-p"],ua=["data-p"],ca=["src","alt","data-p"];function da(e,t,n,g,m,d){return l(),h("div",Z({class:e.cx("root"),"aria-labelledby":e.ariaLabelledby,"aria-label":e.ariaLabel},e.ptmi("root"),{"data-p":d.dataP}),[ve(e.$slots,"default",{},function(){return[e.label?(l(),h("span",Z({key:0,class:e.cx("label")},e.ptm("label"),{"data-p":d.dataP}),v(e.label),17,ra)):e.$slots.icon?(l(),X(ke(e.$slots.icon),{key:1,class:ce(e.cx("icon"))},null,8,["class"])):e.icon?(l(),h("span",Z({key:2,class:[e.cx("icon"),e.icon]},e.ptm("icon"),{"data-p":d.dataP}),null,16,ua)):e.image?(l(),h("img",Z({key:3,src:e.image,alt:e.ariaLabel,onError:t[0]||(t[0]=function(){return d.onError&&d.onError.apply(d,arguments)})},e.ptm("image"),{"data-p":d.dataP}),null,16,ca)):O("",!0)]})],16,la)}Ze.render=da;const fa={class:"grid"},pa={key:0,class:"col-12 sm:col-12 md:col-6 lg:col-4 border-round surface-section shadow-1 p-2"},va={class:"flex flex-column"},ha=["onClick"],ma={class:"p-1 flex-shrink-0 w-7rem h-7rem flex align-items-center justify-content-center overflow-hidden"},ba=["src","alt"],ga={class:"flex flex-column justify-content-center"},ya={class:"font-bold"},_a={class:"flex flex-wrap gap-2"},wa={class:"flex gap-1 align-items-center"},ka={class:"text-color-secondary line2"},xa={key:0,class:"text-xl font-bold text-primary"},$a={key:1,class:"flex align-items-center gap-1"},Ta={class:"text-l font-bold text-color-secondary"},Ca={class:"text-sm line-through text-500"},Da={key:2,class:"flex gap-2 mr-2",id:"card-quantity"},Ia={class:"w-2rem text-xl text-center"},Sa={key:3,class:"flex gap-2 mr-2"},Aa={key:0,class:"m-2 mt-0"},Na={class:"flex flex-row justify-content-between align-content-center"},Ba={class:"flex flex-column"},Pa={class:"text-l font-bold"},La={key:0,class:"text-l font-bold text-color-secondary"},qa={key:1,class:"flex align-items-center gap-1"},za={class:"text-l font-bold text-color-secondary"},Oa={class:"text-sm line-through text-500"},Ea={key:0,class:"flex ml-2 mr-2"},Ma={class:"w-2rem text-xl text-center"},Ra={key:1,class:"flex gap-2 mr-3 pt-2 pb-2"},ja={class:"max-w-5rem flex align-items-center"},Va={class:"font-bold whitespace-nowrap"},Fa={class:"mb-2 flex justify-content-center"},Ha={class:"font-bold text-center"},Ka={class:"mb-2"},Ua={class:"text-color-secondary m-0 line-height-3 line2 text-center"},Wa={class:"mb-2"},Qa={class:"flex justify-content-center"},Ja=["src","alt"],Ga={class:"flex align-items-center gap-2"},Za=["src","alt"],Xa={class:"flex align-items-center gap-3 ml-auto"},Ya={__name:"DishList",props:{rateDish:{type:Function,required:!0},likedItemsRef:Array,dislikedItemsRef:Array,tabIndex:Number,onlyVeg:Boolean},setup(e){const{t}=fe(),n=ee.dishDatas,g=R(null),m=e,d=(s,p=!0)=>{if(!m.onlyVeg)return!0;if(p)return s.vegetable;if(s.subItems.length>0){for(const x of s.subItems)if(x.vegetable)return!0}else return s.dish.vegetable;return!1};Ge(()=>{let s=B.getOrderMenuTab()[m.tabIndex];if(B.customDishAPI.customDishes.value.map(k=>k.name),B.getMenu().length==0){console.log("exit");return}g.value=n.value[x(n.value,s)].mainDishes,ee.showDishList(g.value);function x(k,C){for(const _ in k)if(k[_].name==C)return _;console.error("Can not find tab index in menu")}});let f={rated:!1,id:null,like:0,rate:0};function V(){var x;const s=B.currentPage.value,p=(x=s==null?void 0:s.data)==null?void 0:x.logoPath;return p?B.pathFormated(p,s.imagesPath):"/images/logo_logo.png"}const r=s=>ee.dishDatas.value[s]?ee.dishDatas.value[s].quantity:0,w=s=>{if(!y())return!1;const p=s.quantity;let x=3;if(s.price>0&&(x=9),s.limit){const k=s.id,C=y(),_=(C.peopleType.adults+C.peopleType.children)*s.limit,F=C.order.find($=>$.dishid==k);let S=0;if(s.subitem)for(const $ of s.subitem){S+=r($);const D=C.order.find(te=>te.dishid==A($));D&&(S+=D.quantity)}else S+=s.quantity,F&&(S+=F.quantity);return p>=x||_&&S>=_}return p>=x},A=s=>ee.dishDatas.value[s]?ee.dishDatas.value[s].id:0,y=()=>B.getTableValue(),b=s=>{let p="absolute origin-top-left mt-1 ml-1 border-round-lg pl-1 pr-1 text-xs text-white font-bold ";switch(s){case"new":p+="bg-red-600";break;case"recommended":case"special":p+="bg-orange-600";break;default:p+="bg-blue-600"}return p};function q(){m.rateDish(f.id,f.like,f.rate,f.rated),f.id=null,f.like=0,f.rate=0,f.rated=!1}const W=s=>{const p=m.likedItemsRef.indexOf(s);if(f.id=s.id,p!==-1)m.likedItemsRef.splice(p,1),f.like+=-1,f.rate+=-1,f.rated=!1;else{f.rated=!0,m.likedItemsRef.push(s);const x=m.dislikedItemsRef.indexOf(s);x!==-1?(m.dislikedItemsRef.splice(x,1),f.like+=1):(f.like+=1,f.rate+=1)}q()},U=s=>{const p=m.dislikedItemsRef.indexOf(s);if(f.id=s.id,p!==-1)m.dislikedItemsRef.splice(p,1),f.rate+=-1,f.rated=!1;else{f.rated=!0,m.dislikedItemsRef.push(s);const x=m.likedItemsRef.indexOf(s);x!==-1?(m.likedItemsRef.splice(x,1),f.like+=-1):f.rate+=1}q()},Q=R(!1),E=R({}),z=s=>{Q.value=!0,E.value=s},N=s=>{s.target.src="/images/default.png"};function L(s){u(s.target,300)}function M(s){u(s.target,110)}function u(s,p){const x=s.naturalWidth,k=s.naturalHeight,C=Math.min(x,p),_=C/x,F=k*_;s.style.width=`${C}px`,s.style.height=`${F}px`}return(s,p)=>(l(),h(G,null,[a("div",fa,[(l(!0),h(G,null,se(g.value,(x,k)=>{var C;return l(),h(G,{key:k},[d(x,!1)?(l(),h("div",pa,[a("div",va,[a("div",{class:ce(["flex flex-row",x.subItems.length!==0?"flex-grow-1":""]),onClick:_=>z(x.dish)},[((C=x.dish.etiquette)==null?void 0:C.length)>0?(l(),h("div",{key:0,class:ce(b(x.dish.etiquette))},v(o(t)("common.etiquette."+x.dish.etiquette)),3)):O("",!0),a("div",ma,[a("img",{src:x.dish.image||"/images/default.png",alt:x.dish.name,class:"w-full h-full",style:{"object-fit":"cover"},onError:N,onLoad:M},null,40,ba)]),a("div",ga,[a("div",ya,v(x.dish.name),1),a("div",null,[a("div",_a,[a("div",wa,[(l(),h(G,null,se(5,_=>a("i",{key:_,class:ce(["pi invert-star",_<=Math.floor(x.dish.likes/x.dish.rates*5)?"pi-star-fill":_-.5<=x.dish.likes/x.dish.rates*5?"pi-star-half-fill":"pi-star"]),style:{color:"black"}},null,2)),64)),a("p",null,"("+v(x.dish.rates?x.dish.rates:0)+")",1)])])]),a("div",null,[a("p",ka,v(x.dish.note),1)])])],10,ha),x.subItems.length==0?(l(),h("div",{key:0,class:ce(["flex ml-2 mr-2 mb-2",Number(x.dish.price)>0?"justify-content-between":"justify-content-end"])},[!x.dish.discount&&Number(x.dish.price)>0?(l(),h("span",xa,"€"+v(x.dish.price),1)):O("",!0),x.dish.discount?(l(),h("div",$a,[a("span",Ta,"€"+v(x.dish.dis_price),1),a("span",Ca,"€"+v(x.dish.price),1),P(o(we),{severity:"danger",value:"-"+x.dish.discount+"%"},null,8,["value"])])):O("",!0),x.dish.soldout?O("",!0):(l(),h("div",Da,[P(o(J),{icon:"pi pi-minus",rounded:"",disabled:x.dish.quantity<=0,onClick:_=>x.dish.quantity--,class:"w-2rem h-2rem"},null,8,["disabled","onClick"]),a("span",Ia,v(x.dish.quantity),1),P(o(J),{icon:"pi pi-plus",rounded:"",disabled:w(x.dish),onClick:_=>x.dish.quantity++,class:"w-2rem h-2rem"},null,8,["disabled","onClick"])])),x.dish.soldout?(l(),h("div",Sa,[P(o(we),{severity:"danger",value:s.$t("common.soldout")},null,8,["value"])])):O("",!0)],2)):O("",!0),x.subItems.length!==0?(l(!0),h(G,{key:1},se(x.subItems,(_,F)=>(l(),h(G,{key:"index"},[!_.disable&&d(_)?(l(),h("div",Aa,[a("div",Na,[a("div",Ba,[a("span",Pa,v(_.subname),1),!_.discount&&_.price!=="0.00"&&_.price!=="0"?(l(),h("span",La,"€"+v(_.price),1)):O("",!0),_.discount?(l(),h("div",qa,[a("span",za,"€"+v(_.dis_price),1),a("span",Oa,"€"+v(_.price),1),P(o(we),{severity:"danger",value:"-"+_.discount+"%"},null,8,["value"])])):O("",!0)]),_.soldout?O("",!0):(l(),h("div",Ea,[P(o(J),{icon:"pi pi-minus",rounded:"",disabled:_.quantity<=0,onClick:S=>_.quantity--,class:"w-2rem h-2rem"},null,8,["disabled","onClick"]),a("span",Ma,v(_.quantity),1),P(o(J),{icon:"pi pi-plus",rounded:"",onClick:S=>_.quantity++,class:"w-2rem h-2rem",disabled:w(_)},null,8,["onClick","disabled"])])),_.soldout?(l(),h("div",Ra,[P(o(we),{severity:"danger",value:s.$t("common.soldout")},null,8,["value"])])):O("",!0)])])):O("",!0)],64))),128)):O("",!0)])])):O("",!0)],64)}),128))]),P(o(ge),{visible:Q.value,"onUpdate:visible":p[2]||(p[2]=x=>Q.value=x),modal:"",header:"dish",style:Pe([{width:"23rem"},{width:"80vw","max-width":"700px"}])},{header:H(()=>[a("div",ja,[P(o(Ze),{image:V(),class:"w-full"},null,8,["image"])]),a("span",Va,v(s.$t("common.details")),1)]),default:H(()=>[a("div",Fa,[a("span",Ha,v(E.value.name),1)]),a("div",Ka,[a("span",Ua,v(E.value.note),1)]),a("div",Wa,[a("div",Qa,[a("img",{class:"w-full h-auto object-contain",src:E.value.image,alt:E.value.name,onError:N,onLoad:L},null,40,Ja)])]),a("div",Ga,[(l(!0),h(G,null,se(E.value.allergies,(x,k)=>(l(),h("img",{src:"images/"+x+".png",alt:x,class:"w-2rem h-2rem border-round flex-shrink-0",style:{"object-fit":"cover","min-width":"2rem"}},null,8,Za))),256)),a("div",Xa,[a("button",{onClick:p[0]||(p[0]=x=>W(E.value)),class:"p-0 border-none bg-transparent cursor-pointer"},[a("i",{class:ce(["pi pi-thumbs-up text-xl",m.likedItemsRef.includes(E.value)?"text-green-500":"text-gray-400"])},null,2)]),a("button",{onClick:p[1]||(p[1]=x=>U(E.value)),class:"p-0 border-none bg-transparent cursor-pointer"},[a("i",{class:ce(["pi pi-thumbs-down text-xl",m.dislikedItemsRef.includes(E.value)?"text-red-500":"text-gray-400"])},null,2)])])])]),_:1},8,["visible"])],64))}},es=Ce(Ya,[["__scopeId","data-v-fc57cd09"]]),ts={key:0,class:"text-3xl font-bold"},as={class:"flex flex-column gap-3 p-1"},ss={key:0,class:"flex flex-column gap-1"},ns={key:0,class:"m-0"},os={key:0,class:"m-0"},is={class:"flex justify-content-between gap-4 mt-1"},ls={class:"flex align-items-center gap-2"},rs=["src","alt"],us={class:"flex-grow-1 min-width-0 max-w-18rem"},cs={class:"flex flex-column gap-1"},ds={class:"flex align-items-center gap-2"},fs={class:"text-xl font-bold line1 whitespace-nowrap overflow-hidden text-overflow-ellipsis",style:{"max-width":"20rem"}},ps={class:"flex align-items-end gap-1"},vs={key:0,class:"text-xl font-bold text-primary"},hs={key:1,class:"text-xl font-bold text-primary"},ms={key:2,class:"text-sm text-color-secondary"},bs={key:0,class:"text-xs text-primary"},gs={class:"flex-shrink-0 flex flex-wrap justify-content-between align-items-center gap-1"},ys={class:"flex flex-wrap justify-content-between align-content-center"},_s={class:"flex align-items-center gap-1"},ws={class:"w-2rem text-center"},ks={key:1,class:"flex flex-column gap-2 mt-2"},xs={for:"in_label"},$s={for:"in_label"},Ts={class:"bottom-0 left-0 mt-2"},Cs={class:"text-2xl font-bold"},Ds={class:"text-2xl font-bold text-primary pl-2"},Is={class:"flex justify-content-between"},Ss={__name:"Cart",props:{checkout:{type:Function,required:!0},isTakeaway:Boolean},setup(e,{expose:t}){const{locale:n}=fe(),g=ct(),{t:m}=fe(),d=re.cartDishs,f=R([]),V=R(),r=R(),w=R(!1),A=R(!1),y=R(!0),b=R(""),q=R("");function W(S,$,D){let te="";const j=n.value,Y=B.customDishAPI.getCustomDishByName(S);for(const ue of D){const le=Y.types[$].dishes.find(he=>he.dishid===ue.id)[`name_${j}`];te=te+le+"/"}return te}function U(S,$){const D=n.value;return B.customDishAPI.getCustomDishByName(S).types[$][`typeName_${D}`]}const Q=(S,$)=>{const D=f.value[S].quantity+$;D>=0&&(f.value[S].quantity=D)};function E(S){S&&V.value&&(V.value.dishNote=r.value?r.value:void 0),A.value=!1}function z(){r.value&&(r.value=void 0),V.value&&(V.value=void 0)}function N(S){V.value=S,r.value=V.value.dishNote?V.value.dishNote:void 0,A.value=!0}const L=e;t({showDishList:S=>{w.value=!0,f.value.length=0;for(let $=0;$<S.length;$++)f.value.push(S[$]);y.value=f.value.length==0&&d.length==0}});function u(S){re.removeItem(S)}function s(){L.isTakeaway?p():x()}function p(){const S=[];d.value.forEach($=>{S.push($)}),f.value.forEach($=>{$.quantity>0&&S.push($)}),S.length<=0?ie.show_warn(m("notification.select_at_least_one")):(w.value=!1,g.push({path:"/paymentPage"}))}function x(){L.checkout({name:b.value,note:q.value},S=>{S.success&&(d.value.forEach($=>{$.dishNote=void 0}),f.value.forEach($=>{$.dishNote=void 0}),q.value="",ee.cleanDishDataQty(),de.deleteCookie("cartDish_normal"),re.cleanAll(),de.deleteCookie("cartDish_custom"))})&&(w.value=!1)}function k(S){return S.subname!=""&&S.subname!="Default Title"?S.name+" "+S.subname:S.name}function C(){let S=0;return d.value.forEach($=>{S+=$.discount?($.dis_price?$.dis_price:0)*$.count:($.price?$.price:0)*$.count}),f.value.forEach($=>{S+=$.discount?($.dis_price?$.dis_price:0)*$.quantity:($.price?$.price:0)*$.quantity}),"€"+S.toFixed(2)}const _=S=>{S.target.src="/images/default.png"},F=S=>{const $=S.quantity;let D=3;return S.price>0&&(D=9),$>=D};return(S,$)=>(l(),h(G,null,[P(o(ge),{class:"bg-primary-reverse text-sm md:text-lg lg:text-xl",visible:w.value,"onUpdate:visible":$[2]||($[2]=D=>w.value=D),modal:"",header:S.$t("common.cart"),style:Pe([{backgroundColor:"rgba(250, 250, 250, 1)",height:"100%",minWidth:"24rem"},{width:"80vw","max-width":"700px"}]),dismissableMask:!0},{footer:H(()=>[a("div",Ts,[a("span",Cs,v(S.$t("common.total"))+": ",1),a("span",Ds,v(C()),1),P(o(J),{icon:e.isTakeaway?"pi pi-wallet":"pi pi-plus",class:"p-button-success p-button-rounded ml-3",onClick:s,label:e.isTakeaway?o(m)("common.pay"):o(m)("common.send")},null,8,["icon","label"])])]),default:H(()=>[y.value?(l(),h("h2",ts,"Cart is empty.")):O("",!0),a("div",as,[(l(!0),h(G,null,se(o(d),(D,te)=>(l(),X(o(Rt),{style:{overflow:"hidden"},key:te},{title:H(()=>[be(v(S.$t(`common.${D.name.replace(/[^a-zA-Z0-9\s]/g,"").toLowerCase().replace(/\s+/g,"")}`)),1)]),subtitle:H(()=>[be(v(S.$t("common.price"))+" : "+v(D.price)+"€",1)]),content:H(()=>[o(B).customDishAPI.customDishes.value.find(j=>j.name==D.name)?(l(),h("div",ss,[(l(!0),h(G,null,se(D.notesAndId,(j,Y)=>(l(),h("div",null,[D.notesAndId[Y].length!==0?(l(),h("span",ns,v(U(D.name,Y))+": "+v(W(D.name,Y,j)),1)):O("",!0)]))),256)),a("div",null,[D.dishNote?(l(),h("span",os,v(S.$t("common.note"))+": "+v(D.dishNote),1)):O("",!0)])])):O("",!0)]),footer:H(()=>[a("div",is,[e.isTakeaway?O("",!0):(l(),X(o(J),{key:0,label:o(m)("common.edit")+" "+o(m)("common.note"),severity:"contrast",onClick:j=>N(D)},null,8,["label","onClick"])),P(o(J),{label:o(m)("common.remove"),severity:"danger",onClick:j=>u(D)},null,8,["label","onClick"])])]),_:2},1024))),128)),(l(!0),h(G,null,se(f.value,(D,te)=>(l(),h("div",{key:te,class:"p-2 border-round shadow-1 transition-all transition-duration-200 hover:shadow-3 flex flex-column gap-1"},[a("div",ls,[a("img",{src:D.image,alt:D.name,class:"w-4rem h-4rem border-round flex-shrink-0",onError:_,style:{"object-fit":"cover","min-width":"4rem"}},null,40,rs),a("div",us,[a("div",cs,[a("div",ds,[a("span",fs,v(k(D)),1)])]),a("div",ps,[D.discount?(l(),h("span",vs,"€"+v(Number(D.dis_price?D.dis_price:0).toFixed(2)),1)):O("",!0),D.discount?O("",!0):(l(),h("span",hs,"€"+v(Number(D.price?D.price:0).toFixed(2)),1)),D.price>0?(l(),h("span",ms,"/uni.")):O("",!0)])])]),a("div",null,[D.dishNote?(l(),h("span",bs,v(o(m)("common.note")+": "+D.dishNote),1)):O("",!0)]),a("div",gs,[a("div",ys,[e.isTakeaway?O("",!0):(l(),X(o(J),{key:0,label:o(m)("common.edit")+" "+o(m)("common.note"),severity:"contrast",class:"w-3.5rem h-2rem",onClick:j=>N(D)},null,8,["label","onClick"]))]),a("div",_s,[P(o(J),{icon:"pi pi-minus",rounded:"",disabled:D.quantity<=0,onClick:j=>Q(te,-1),class:"w-2rem h-2rem"},null,8,["disabled","onClick"]),a("span",ws,v(D.quantity),1),P(o(J),{icon:"pi pi-plus",rounded:"",disabled:F(D),onClick:j=>Q(te,1),class:"w-2rem h-2rem"},null,8,["disabled","onClick"])])])]))),128))]),e.isTakeaway?O("",!0):(l(),h("div",ks,[P(o(ot),{variant:"in"},{default:H(()=>[P(o(pt),{id:"in_label",modelValue:b.value,"onUpdate:modelValue":$[0]||($[0]=D=>b.value=D),variant:"filled",maxlength:"20"},null,8,["modelValue"]),a("label",xs,v(o(m)("common.name")),1)]),_:1}),P(o(ot),{variant:"in"},{default:H(()=>[P(o(nt),{id:"in_label",class:"min-w-full",rows:"5",modelValue:q.value,"onUpdate:modelValue":$[1]||($[1]=D=>q.value=D),variant:"filled",maxlength:"200"},null,8,["modelValue"]),a("label",$s,v(o(m)("common.observation")),1)]),_:1})]))]),_:1},8,["visible","header"]),P(o(ge),{visible:A.value,"onUpdate:visible":$[6]||($[6]=D=>A.value=D),header:o(m)("common.note"),onHide:$[7]||($[7]=D=>z()),modal:"",dismissableMask:!0},{default:H(()=>[P(o(nt),{modelValue:r.value,"onUpdate:modelValue":$[3]||($[3]=D=>r.value=D),rows:"5",cols:"30",placeholder:o(m)("common.edit")+" "+o(m)("common.note")+"...",maxlength:"100"},null,8,["modelValue","placeholder"]),a("div",Is,[P(o(J),{label:o(m)("common.cancel"),severity:"danger",onClick:$[4]||($[4]=D=>E(!1))},null,8,["label"]),P(o(J),{label:o(m)("common.save"),severity:"primary",size:"sm",onClick:$[5]||($[5]=D=>E(!0))},null,8,["label"])])]),_:1},8,["visible","header"])],64))}},As=Ce(Ss,[["__scopeId","data-v-da4419e1"]]);var Ns=qe`
    .p-overlaybadge {
        position: relative;
    }

    .p-overlaybadge .p-badge {
        position: absolute;
        inset-block-start: 0;
        inset-inline-end: 0;
        transform: translate(50%, -50%);
        transform-origin: 100% 0;
        margin: 0;
        outline-width: dt('overlaybadge.outline.width');
        outline-style: solid;
        outline-color: dt('overlaybadge.outline.color');
    }

    .p-overlaybadge .p-badge:dir(rtl) {
        transform: translate(-50%, -50%);
    }
`,Bs={root:"p-overlaybadge"},Ps=ye.extend({name:"overlaybadge",style:Ns,classes:Bs}),Ls={name:"OverlayBadge",extends:vt,style:Ps,provide:function(){return{$pcOverlayBadge:this,$parentInstance:this}}},ht={name:"OverlayBadge",extends:Ls,inheritAttrs:!1,components:{Badge:vt}};function qs(e,t,n,g,m,d){var f=Dt("Badge");return l(),h("div",Z({class:e.cx("root")},e.ptmi("root")),[ve(e.$slots,"default"),P(f,Z(e.$props,{pt:e.ptm("pcBadge")}),null,16,["pt"])],16)}ht.render=qs;R([]);R("iniImages()");const zs={class:"m-3"},Os={class:"flex flex-column gap-2"},Es={class:"w-full flex justify-content-center"},Ms={key:0,class:"max-w-19rem"},Rs=["src"],js={style:{width:"300px",height:"300px",background:"url(/boxImage/box.png)"}},Vs={key:0,class:"flex align-items-center justify-content-center text-4xl font-bold text-white w-full h-full"},Fs={key:1,class:"grid m-0 p-2"},Hs=["onClick"],Ks={class:"flex align-items-center justify-content-center font-bold m-0 p-0",style:{width:"94px",height:"94px"}},Us=["src"],Ws={class:"flex flex-wrap justify-content-between align-items-center m-1"},Qs={class:"flex gap-1 align-items-center"},Js={key:0},Gs={class:"font-bold mb-2"},Zs={key:1,class:"flex justify-content-between gap-2 mt-3"},Xs={class:"font-bold mb-2"},Ys={class:"flex mr-2"},en={class:"w-3rem text-xl text-center"},tn={class:"font-bold block mb-2"},an={class:"flex flex-wrap"},sn={key:2,class:"flex flex-wrap gap-2 mt-3"},nn={class:"font-bold block mb-2"},on={class:"font-bold block mb-2 text-center"},ln={class:"flex flex-wrap gap-2 mt-3"},rn={__name:"CustomDish",props:{currentCustomDish:Object,tabindex:Number},emits:["typeClick"],setup(e,{emit:t}){const{locale:n}=fe(),g=e,m=It(),{t:d}=fe(),f=R(null);Be(()=>g.currentCustomDish,k=>{k&&(f.value=k)},{immediate:!0,deep:!0});const V=pe(()=>f.boxImages),r=R(0),w=pe(()=>{var C;if(f.value==null)return 0;let k=(C=f.value)==null?void 0:C.initialPrice;for(const _ of f.value.types??[])for(const F of _.dishes??[])F.selected&&(k+=F.price);return Number(k).toFixed(2)}),A=t,y=R(null),b=pe(()=>{const k=n.value,C=`title_${k}`,_=`description_${k}`;return f.value==null?{}:f.value.descriptions.map(F=>({title:F[C],descriptions:F.descriptions.map(S=>S[_]),image:F==null?void 0:F.image}))}),q=pe(()=>{var _,F;const k=Number(((_=f.value)==null?void 0:_.like)??0),C=Number(((F=f.value)==null?void 0:F.rate)??0);return C?k/C*5:0});function W(k,C){const _=n.value;return k[`${C}_${_}`]}function U(k,C,_){const F=k[C];if(F.selected){F.selected=!1;return}else{const $=k.filter(D=>D.selected).length;if(_===1){s(k),F.selected=!0;return}$<_&&(F.selected=!0)}}function Q(k,C,_){const F=k.dishes;A("typeClick",k,C,F[C].selected),U(F,C,_)}function E(k){return k.selected}function z(){if(!p(f.value.types))return;const k=L(f.value.types),C=M(f.value.types);re.addItem({dishid:-1,name:f.value.name,category:g.currentCustomDish.category,count:r.value!==0?r.value:1,price:w.value,notes:k,notesAndId:C}),console.log("CART: ",re.cartDishs),u(f.value.types),ie.show({severity:"info",summary:"info",detail:d("customDishBibimbapVue.addToCartSuccessBibimbap")})}function N(k){return!k||!k.dishes?"":k.dishes.filter(_=>_.selected).map(_=>_.name).join(",")}function L(k){return k?k.map(C=>N(C)):[]}function M(k){return k?k.map(C=>C.dishes?C.dishes.filter(_=>_.selected).map(_=>({id:_.dishid,name:_.name})):[]):[]}function u(k){k&&k.forEach(C=>{C.dishes&&C.dishes.forEach(_=>{_.selected=!1})})}function s(k){k.forEach(C=>C.selected=!1)}function p(k){if(f.value.options.quantity&&r.value<=0)return ie.show({severity:"warn",detail:d("notification.quantity_must_be_positive")}),!1;for(const C of k)if(C.dishes.filter(F=>F.selected).length<C.minQuantity){const F=C.typeName;return ie.show({severity:"warn",detail:d("notification.select_type_of",{name:F})}),!1}return!0}function x(k){k?B.customDishAPI.like(f.value.id)&&(y.value="like",m.add({severity:"success",summary:d("common.success"),detail:d("common.rate")+" "+d("common.success"),life:750})):B.customDishAPI.unLike(f.value.id)&&(y.value="unlike",m.add({severity:"success",summary:d("common.success"),detail:d("common.rate")+" "+d("common.success"),life:750}))}return(k,C)=>{var _,F,S,$,D,te;return l(),h("div",zs,[a("div",Os,[P(o(Je),{class:"w-full max-w-xl mx-auto"},{default:H(()=>[(l(!0),h(G,null,se(b.value,(j,Y)=>(l(),X(o(Ue),{key:Y,value:Y},{default:H(()=>[P(o(We),null,{default:H(()=>[be(v(j.title),1)]),_:2},1024),P(o(Qe),null,{default:H(()=>{var ue;return[(l(!0),h(G,null,se(j.descriptions,(le,he)=>(l(),h("p",{key:he},v(le),1))),128)),a("div",Es,[(ue=j.image)!=null&&ue.src?(l(),h("div",Ms,[a("img",{src:j.image.src,class:"w-full"},null,8,Rs)])):O("",!0)])]}),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1}),((F=(_=f.value)==null?void 0:_.value)==null?void 0:F.name)==="MY BOX"?(l(),X(o(Je),{key:0,class:"w-full max-w-xl mx-auto"},{default:H(()=>[P(o(Ue),{value:"0"},{default:H(()=>[P(o(We),null,{default:H(()=>[be(" 🥩 "+v(k.$t("common.showMybox")),1)]),_:1}),P(o(Qe),null,{default:H(()=>[a("div",js,[k.isEmptyArray(V.value)?(l(),h("div",Vs,v(k.$t("common.myboxAlarm")),1)):O("",!0),k.isEmptyArray(V.value)?O("",!0):(l(),h("div",Fs,[(l(!0),h(G,null,se(V.value,j=>(l(),h("div",{class:"col-4 p-0",onClick:Y=>k.imageSelectAction(j)},[a("div",Ks,[j?(l(),h("img",{key:0,class:"m-0 p-0",src:k.imagePath(j),style:{width:"82px",height:"82px"}},null,8,Us)):O("",!0)])],8,Hs))),256))]))])]),_:1})]),_:1})]),_:1})):O("",!0)]),a("div",Ws,[a("div",Qs,[(l(),h(G,null,se(5,j=>a("i",{key:j,class:ce(["pi invert-star",j<=Math.floor(q.value)?"pi-star-fill":j-.5<=q.value?"pi-star-half":"pi-star"]),style:{color:"black"}},null,2)),64)),a("p",null,"("+v((S=f.value)!=null&&S.rate?f.value.rate:0)+")",1)]),a("div",null,[P(o(J),{text:"",icon:"pi pi-thumbs-up",severity:y.value==="like"?"success":"",onClick:C[0]||(C[0]=j=>x(!0))},null,8,["severity"]),P(o(J),{text:"",icon:"pi pi-thumbs-down",severity:y.value==="unlike"?"danger":"",onClick:C[1]||(C[1]=j=>x(!1))},null,8,["severity"])])]),($=f.value)!=null&&$.options.extraInfo?(l(),h("div",Js,[a("label",Gs,v(f.value.options.extraInfo),1)])):O("",!0),(D=f.value)!=null&&D.options.quantity?(l(),h("div",Zs,[a("div",null,[a("label",Xs,v(k.$t("common.quantity"))+" / "+v(k.$t("common.pieces")),1)]),a("div",Ys,[P(o(J),{icon:"pi pi-minus",disabled:r.value<=0,onClick:C[2]||(C[2]=j=>{var Y;return r.value-=(Y=f.value)==null?void 0:Y.options.quantitySetp}),class:"w-2rem h-2rem"},null,8,["disabled"]),a("span",en,v(r.value),1),P(o(J),{icon:"pi pi-plus",disabled:r.value>=f.value.options.maxQuantity,onClick:C[3]||(C[3]=j=>{var Y;return r.value+=(Y=f.value)==null?void 0:Y.options.quantitySetp}),class:"w-2rem h-2rem"},null,8,["disabled"])])])):O("",!0),(l(!0),h(G,null,se((te=f.value)==null?void 0:te.types,(j,Y)=>(l(),h("div",{key:j.id},[Le(a("div",null,[a("label",tn,v(Y+1)+". "+v(W(j,"typeName")),1),a("div",an,[(l(!0),h(G,null,se(j.dishes,(ue,le)=>(l(),X(o(J),{key:le,onClick:he=>Q(j,le,r.value==0?j.maxQuantity:j.maxQuantity*r.value),class:ce([{"p-button-primary":E(ue),"p-button-outlined":!E(ue)},"m-1"])},{default:H(()=>[a("p",{class:ce({"text-gray-700":!E(ue)})},v(W(ue,"name")),3)]),_:2},1032,["onClick","class"]))),128))])],512),[[St,j.enable]])]))),128)),e.currentCustomDish.initialPrice!==0?(l(),h("div",sn,[a("label",nn,v(k.$t("common.price"))+":",1),a("label",on,v(w.value+"€"),1)])):O("",!0),a("div",ln,[P(o(J),{icon:"pi pi-shopping-cart",onClick:C[4]||(C[4]=j=>z()),label:k.$t("common.addToCart"),class:"m-3",severity:"primary",raised:""},null,8,["label"])])])}}},un=Ce(rn,[["__scopeId","data-v-e37fc872"]]);var cn=qe`
    .p-tabs {
        display: flex;
        flex-direction: column;
    }

    .p-tablist {
        display: flex;
        position: relative;
    }

    .p-tabs-scrollable > .p-tablist {
        overflow: hidden;
    }

    .p-tablist-viewport {
        overflow-x: auto;
        overflow-y: hidden;
        scroll-behavior: smooth;
        scrollbar-width: none;
        overscroll-behavior: contain auto;
    }

    .p-tablist-viewport::-webkit-scrollbar {
        display: none;
    }

    .p-tablist-tab-list {
        position: relative;
        display: flex;
        background: dt('tabs.tablist.background');
        border-style: solid;
        border-color: dt('tabs.tablist.border.color');
        border-width: dt('tabs.tablist.border.width');
    }

    .p-tablist-content {
        flex-grow: 1;
    }

    .p-tablist-nav-button {
        all: unset;
        position: absolute !important;
        flex-shrink: 0;
        inset-block-start: 0;
        z-index: 2;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        background: dt('tabs.nav.button.background');
        color: dt('tabs.nav.button.color');
        width: dt('tabs.nav.button.width');
        transition:
            color dt('tabs.transition.duration'),
            outline-color dt('tabs.transition.duration'),
            box-shadow dt('tabs.transition.duration');
        box-shadow: dt('tabs.nav.button.shadow');
        outline-color: transparent;
        cursor: pointer;
    }

    .p-tablist-nav-button:focus-visible {
        z-index: 1;
        box-shadow: dt('tabs.nav.button.focus.ring.shadow');
        outline: dt('tabs.nav.button.focus.ring.width') dt('tabs.nav.button.focus.ring.style') dt('tabs.nav.button.focus.ring.color');
        outline-offset: dt('tabs.nav.button.focus.ring.offset');
    }

    .p-tablist-nav-button:hover {
        color: dt('tabs.nav.button.hover.color');
    }

    .p-tablist-prev-button {
        inset-inline-start: 0;
    }

    .p-tablist-next-button {
        inset-inline-end: 0;
    }

    .p-tablist-prev-button:dir(rtl),
    .p-tablist-next-button:dir(rtl) {
        transform: rotate(180deg);
    }

    .p-tab {
        flex-shrink: 0;
        cursor: pointer;
        user-select: none;
        position: relative;
        border-style: solid;
        white-space: nowrap;
        gap: dt('tabs.tab.gap');
        background: dt('tabs.tab.background');
        border-width: dt('tabs.tab.border.width');
        border-color: dt('tabs.tab.border.color');
        color: dt('tabs.tab.color');
        padding: dt('tabs.tab.padding');
        font-weight: dt('tabs.tab.font.weight');
        transition:
            background dt('tabs.transition.duration'),
            border-color dt('tabs.transition.duration'),
            color dt('tabs.transition.duration'),
            outline-color dt('tabs.transition.duration'),
            box-shadow dt('tabs.transition.duration');
        margin: dt('tabs.tab.margin');
        outline-color: transparent;
    }

    .p-tab:not(.p-disabled):focus-visible {
        z-index: 1;
        box-shadow: dt('tabs.tab.focus.ring.shadow');
        outline: dt('tabs.tab.focus.ring.width') dt('tabs.tab.focus.ring.style') dt('tabs.tab.focus.ring.color');
        outline-offset: dt('tabs.tab.focus.ring.offset');
    }

    .p-tab:not(.p-tab-active):not(.p-disabled):hover {
        background: dt('tabs.tab.hover.background');
        border-color: dt('tabs.tab.hover.border.color');
        color: dt('tabs.tab.hover.color');
    }

    .p-tab-active {
        background: dt('tabs.tab.active.background');
        border-color: dt('tabs.tab.active.border.color');
        color: dt('tabs.tab.active.color');
    }

    .p-tabpanels {
        background: dt('tabs.tabpanel.background');
        color: dt('tabs.tabpanel.color');
        padding: dt('tabs.tabpanel.padding');
        outline: 0 none;
    }

    .p-tabpanel:focus-visible {
        box-shadow: dt('tabs.tabpanel.focus.ring.shadow');
        outline: dt('tabs.tabpanel.focus.ring.width') dt('tabs.tabpanel.focus.ring.style') dt('tabs.tabpanel.focus.ring.color');
        outline-offset: dt('tabs.tabpanel.focus.ring.offset');
    }

    .p-tablist-active-bar {
        z-index: 1;
        display: block;
        position: absolute;
        inset-block-end: dt('tabs.active.bar.bottom');
        height: dt('tabs.active.bar.height');
        background: dt('tabs.active.bar.background');
        transition: 250ms cubic-bezier(0.35, 0, 0.25, 1);
    }
`,dn={root:function(t){var n=t.props;return["p-tabs p-component",{"p-tabs-scrollable":n.scrollable}]}},fn=ye.extend({name:"tabs",style:cn,classes:dn}),pn={name:"BaseTabs",extends:Te,props:{value:{type:[String,Number],default:void 0},lazy:{type:Boolean,default:!1},scrollable:{type:Boolean,default:!1},showNavigators:{type:Boolean,default:!0},tabindex:{type:Number,default:0},selectOnFocus:{type:Boolean,default:!1}},style:fn,provide:function(){return{$pcTabs:this,$parentInstance:this}}},mt={name:"Tabs",extends:pn,inheritAttrs:!1,emits:["update:value"],data:function(){return{d_value:this.value}},watch:{value:function(t){this.d_value=t}},methods:{updateValue:function(t){this.d_value!==t&&(this.d_value=t,this.$emit("update:value",t))},isVertical:function(){return this.orientation==="vertical"}}};function vn(e,t,n,g,m,d){return l(),h("div",Z({class:e.cx("root")},e.ptmi("root")),[ve(e.$slots,"default")],16)}mt.render=vn;var hn={root:"p-tablist",content:function(t){var n=t.instance;return["p-tablist-content",{"p-tablist-viewport":n.$pcTabs.scrollable}]},tabList:"p-tablist-tab-list",activeBar:"p-tablist-active-bar",prevButton:"p-tablist-prev-button p-tablist-nav-button",nextButton:"p-tablist-next-button p-tablist-nav-button"},mn=ye.extend({name:"tablist",classes:hn}),bn={name:"BaseTabList",extends:Te,props:{},style:mn,provide:function(){return{$pcTabList:this,$parentInstance:this}}},bt={name:"TabList",extends:bn,inheritAttrs:!1,inject:["$pcTabs"],data:function(){return{isPrevButtonEnabled:!1,isNextButtonEnabled:!0}},resizeObserver:void 0,watch:{showNavigators:function(t){t?this.bindResizeObserver():this.unbindResizeObserver()},activeValue:{flush:"post",handler:function(){this.updateInkBar()}}},mounted:function(){var t=this;setTimeout(function(){t.updateInkBar()},150),this.showNavigators&&(this.updateButtonState(),this.bindResizeObserver())},updated:function(){this.showNavigators&&this.updateButtonState()},beforeUnmount:function(){this.unbindResizeObserver()},methods:{onScroll:function(t){this.showNavigators&&this.updateButtonState(),t.preventDefault()},onPrevButtonClick:function(){var t=this.$refs.content,n=this.getVisibleButtonWidths(),g=Ve(t)-n,m=Math.abs(t.scrollLeft),d=g*.8,f=m-d,V=Math.max(f,0);t.scrollLeft=at(t)?-1*V:V},onNextButtonClick:function(){var t=this.$refs.content,n=this.getVisibleButtonWidths(),g=Ve(t)-n,m=Math.abs(t.scrollLeft),d=g*.8,f=m+d,V=t.scrollWidth-g,r=Math.min(f,V);t.scrollLeft=at(t)?-1*r:r},bindResizeObserver:function(){var t=this;this.resizeObserver=new ResizeObserver(function(){return t.updateButtonState()}),this.resizeObserver.observe(this.$refs.list)},unbindResizeObserver:function(){var t;(t=this.resizeObserver)===null||t===void 0||t.unobserve(this.$refs.list),this.resizeObserver=void 0},updateInkBar:function(){var t=this.$refs,n=t.content,g=t.inkbar,m=t.tabs;if(g){var d=Ke(n,'[data-pc-name="tab"][data-p-active="true"]');this.$pcTabs.isVertical()?(g.style.height=Nt(d)+"px",g.style.top=Se(d).top-Se(m).top+"px"):(g.style.width=Bt(d)+"px",g.style.left=Se(d).left-Se(m).left+"px")}},updateButtonState:function(){var t=this.$refs,n=t.list,g=t.content,m=g.scrollTop,d=g.scrollWidth,f=g.scrollHeight,V=g.offsetWidth,r=g.offsetHeight,w=Math.abs(g.scrollLeft),A=[Ve(g),At(g)],y=A[0],b=A[1];this.$pcTabs.isVertical()?(this.isPrevButtonEnabled=m!==0,this.isNextButtonEnabled=n.offsetHeight>=r&&parseInt(m)!==f-b):(this.isPrevButtonEnabled=w!==0,this.isNextButtonEnabled=n.offsetWidth>=V&&parseInt(w)!==d-y)},getVisibleButtonWidths:function(){var t=this.$refs,n=t.prevButton,g=t.nextButton,m=0;return this.showNavigators&&(m=((n==null?void 0:n.offsetWidth)||0)+((g==null?void 0:g.offsetWidth)||0)),m}},computed:{templates:function(){return this.$pcTabs.$slots},activeValue:function(){return this.$pcTabs.d_value},showNavigators:function(){return this.$pcTabs.scrollable&&this.$pcTabs.showNavigators},prevButtonAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.previous:void 0},nextButtonAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.next:void 0},dataP:function(){return ze({scrollable:this.$pcTabs.scrollable})}},components:{ChevronLeftIcon:jt,ChevronRightIcon:Vt},directives:{ripple:dt}},gn=["data-p"],yn=["aria-label","tabindex"],_n=["data-p"],wn=["aria-orientation"],kn=["aria-label","tabindex"];function xn(e,t,n,g,m,d){var f=ft("ripple");return l(),h("div",Z({ref:"list",class:e.cx("root"),"data-p":d.dataP},e.ptmi("root")),[d.showNavigators&&m.isPrevButtonEnabled?Le((l(),h("button",Z({key:0,ref:"prevButton",type:"button",class:e.cx("prevButton"),"aria-label":d.prevButtonAriaLabel,tabindex:d.$pcTabs.tabindex,onClick:t[0]||(t[0]=function(){return d.onPrevButtonClick&&d.onPrevButtonClick.apply(d,arguments)})},e.ptm("prevButton"),{"data-pc-group-section":"navigator"}),[(l(),X(ke(d.templates.previcon||"ChevronLeftIcon"),Z({"aria-hidden":"true"},e.ptm("prevIcon")),null,16))],16,yn)),[[f]]):O("",!0),a("div",Z({ref:"content",class:e.cx("content"),onScroll:t[1]||(t[1]=function(){return d.onScroll&&d.onScroll.apply(d,arguments)}),"data-p":d.dataP},e.ptm("content")),[a("div",Z({ref:"tabs",class:e.cx("tabList"),role:"tablist","aria-orientation":d.$pcTabs.orientation||"horizontal"},e.ptm("tabList")),[ve(e.$slots,"default"),a("span",Z({ref:"inkbar",class:e.cx("activeBar"),role:"presentation","aria-hidden":"true"},e.ptm("activeBar")),null,16)],16,wn)],16,_n),d.showNavigators&&m.isNextButtonEnabled?Le((l(),h("button",Z({key:1,ref:"nextButton",type:"button",class:e.cx("nextButton"),"aria-label":d.nextButtonAriaLabel,tabindex:d.$pcTabs.tabindex,onClick:t[2]||(t[2]=function(){return d.onNextButtonClick&&d.onNextButtonClick.apply(d,arguments)})},e.ptm("nextButton"),{"data-pc-group-section":"navigator"}),[(l(),X(ke(d.templates.nexticon||"ChevronRightIcon"),Z({"aria-hidden":"true"},e.ptm("nextIcon")),null,16))],16,kn)),[[f]]):O("",!0)],16,gn)}bt.render=xn;var $n={root:function(t){var n=t.instance,g=t.props;return["p-tab",{"p-tab-active":n.active,"p-disabled":g.disabled}]}},Tn=ye.extend({name:"tab",classes:$n}),Cn={name:"BaseTab",extends:Te,props:{value:{type:[String,Number],default:void 0},disabled:{type:Boolean,default:!1},as:{type:[String,Object],default:"BUTTON"},asChild:{type:Boolean,default:!1}},style:Tn,provide:function(){return{$pcTab:this,$parentInstance:this}}},gt={name:"Tab",extends:Cn,inheritAttrs:!1,inject:["$pcTabs","$pcTabList"],methods:{onFocus:function(){this.$pcTabs.selectOnFocus&&this.changeActiveValue()},onClick:function(){this.changeActiveValue()},onKeydown:function(t){switch(t.code){case"ArrowRight":this.onArrowRightKey(t);break;case"ArrowLeft":this.onArrowLeftKey(t);break;case"Home":this.onHomeKey(t);break;case"End":this.onEndKey(t);break;case"PageDown":this.onPageDownKey(t);break;case"PageUp":this.onPageUpKey(t);break;case"Enter":case"NumpadEnter":case"Space":this.onEnterKey(t);break}},onArrowRightKey:function(t){var n=this.findNextTab(t.currentTarget);n?this.changeFocusedTab(t,n):this.onHomeKey(t),t.preventDefault()},onArrowLeftKey:function(t){var n=this.findPrevTab(t.currentTarget);n?this.changeFocusedTab(t,n):this.onEndKey(t),t.preventDefault()},onHomeKey:function(t){var n=this.findFirstTab();this.changeFocusedTab(t,n),t.preventDefault()},onEndKey:function(t){var n=this.findLastTab();this.changeFocusedTab(t,n),t.preventDefault()},onPageDownKey:function(t){this.scrollInView(this.findLastTab()),t.preventDefault()},onPageUpKey:function(t){this.scrollInView(this.findFirstTab()),t.preventDefault()},onEnterKey:function(t){this.changeActiveValue(),t.preventDefault()},findNextTab:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,g=n?t:t.nextElementSibling;return g?Ae(g,"data-p-disabled")||Ae(g,"data-pc-section")==="activebar"?this.findNextTab(g):Ke(g,'[data-pc-name="tab"]'):null},findPrevTab:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,g=n?t:t.previousElementSibling;return g?Ae(g,"data-p-disabled")||Ae(g,"data-pc-section")==="activebar"?this.findPrevTab(g):Ke(g,'[data-pc-name="tab"]'):null},findFirstTab:function(){return this.findNextTab(this.$pcTabList.$refs.tabs.firstElementChild,!0)},findLastTab:function(){return this.findPrevTab(this.$pcTabList.$refs.tabs.lastElementChild,!0)},changeActiveValue:function(){this.$pcTabs.updateValue(this.value)},changeFocusedTab:function(t,n){Lt(n),this.scrollInView(n)},scrollInView:function(t){var n;t==null||(n=t.scrollIntoView)===null||n===void 0||n.call(t,{block:"nearest"})}},computed:{active:function(){var t;return Pt((t=this.$pcTabs)===null||t===void 0?void 0:t.d_value,this.value)},id:function(){var t;return"".concat((t=this.$pcTabs)===null||t===void 0?void 0:t.$id,"_tab_").concat(this.value)},ariaControls:function(){var t;return"".concat((t=this.$pcTabs)===null||t===void 0?void 0:t.$id,"_tabpanel_").concat(this.value)},attrs:function(){return Z(this.asAttrs,this.a11yAttrs,this.ptmi("root",this.ptParams))},asAttrs:function(){return this.as==="BUTTON"?{type:"button",disabled:this.disabled}:void 0},a11yAttrs:function(){return{id:this.id,tabindex:this.active?this.$pcTabs.tabindex:-1,role:"tab","aria-selected":this.active,"aria-controls":this.ariaControls,"data-pc-name":"tab","data-p-disabled":this.disabled,"data-p-active":this.active,onFocus:this.onFocus,onKeydown:this.onKeydown}},ptParams:function(){return{context:{active:this.active}}},dataP:function(){return ze({active:this.active})}},directives:{ripple:dt}};function Dn(e,t,n,g,m,d){var f=ft("ripple");return e.asChild?ve(e.$slots,"default",{key:1,dataP:d.dataP,class:ce(e.cx("root")),active:d.active,a11yAttrs:d.a11yAttrs,onClick:d.onClick}):Le((l(),X(ke(e.as),Z({key:0,class:e.cx("root"),"data-p":d.dataP,onClick:d.onClick},d.attrs),{default:H(function(){return[ve(e.$slots,"default")]}),_:3},16,["class","data-p","onClick"])),[[f]])}gt.render=Dn;const In={class:"fixed top-0 left-0 w-full bg-primary-reverse",style:{"z-index":"10"}},Sn={class:"grid mt-1 ml-1"},An={class:"max-w-3rem flex align-items-center"},Nn=["src"],Bn={class:"flex align-items-center"},Pn={key:0,class:"text-color font-bold p-1"},Ln={key:1,class:"text-color font-bold p-1"},qn={class:"card flex mr-3 flex align-items-center",style:{"margin-left":"auto"}},zn={style:{display:"flex","align-items":"center"}},On={style:{"flex-grow":"1",width:"0",overflow:"hidden"}},En={class:"mt-2"},Mn={class:"flex justify-content-end mt-2"},Rn={class:"flex inline-flex items-center justify-center gap-2"},jn={class:"flex align-items-center"},Vn={class:"flex flex-column"},Fn={class:"text-sm p-2"},Hn={class:"text-sm p-2"},Kn={class:"flex items-center gap-4 mb-4 p-2"},Un={class:"flex flex-column gap-3"},Wn={__name:"HeaderTabs",props:{types:Array,typeIndex:Number,tableId:String,tabItems:Array},emits:["clickType","switchToWelcome"],setup(e,{emit:t}){const{t:n}=fe(),g=R(!1);function m(){var L;const z=B.currentPage.value,N=(L=z==null?void 0:z.data)==null?void 0:L.logoPath;return N?B.pathFormated(N,z.imagesPath):"/images/logo_logo.png"}function d(){return B.getTable()}const f=R(),V=pe(()=>[{label:n("common.options"),items:[{label:n("common.pay"),icon:"pi pi-wallet",command:()=>{W()}},{label:n("common.call"),icon:"pi pi-user-plus",command:()=>{B.send_cmd(d(),{cmd:"call"},z=>{z.success?ie.show_info(n("notification.call_msg")):ie.show_warn(z.data)})}}]}]),r=z=>{f.value.toggle(z)},w=z=>{A.value.toggle(z)},A=R(),y=R(!1),b=R(),q=R();function W(){y.value=!0}function U(){z(b.value)?B.send_cmd(d(),{cmd:"pay",nif:b.value,note:q.value},N=>{N.success?(ie.show_info(n("notification.pay_msg")),y.value=!1):ie.show_error(n("common.failed"))}):ie.show_warn(n("notification.cancel_msg"));function z(N){return!N||N.toString().length===9||N.toString().length===0}}function Q(){q.value&&(q.value=void 0)}function E(){g.value=!0}return(z,N)=>(l(),h(G,null,[a("div",In,[a("div",Sn,[a("div",An,[a("img",{src:m(),class:"w-full",clickble:"",onClick:N[0]||(N[0]=()=>z.$emit("switchToWelcome"))},null,8,Nn)]),a("div",Bn,[e.tableId?(l(),h("p",Pn,v(z.$t("common.table"))+": "+v(e.tableId),1)):O("",!0),e.tableId?O("",!0):(l(),h("p",Ln,v(z.$t("common.takeAway")),1))]),a("div",qn,[e.tableId?(l(),X(o(J),{key:0,icon:"pi pi-bell",rounded:"","aria-label":"Filter",onClick:r,"aria-haspopup":"true","aria-controls":"overlay_menu"})):(l(),X(o(J),{key:1,icon:"pi pi-question",rounded:"",onClick:E})),P(o(it),{ref_key:"menu",ref:f,id:"overlay_menu",model:V.value,popup:!0},null,8,["model"])])]),a("div",zn,[a("div",null,[P(o(J),{icon:"pi pi-bars",variant:"text",rounded:"","aria-label":"Filter",onClick:w,"aria-haspopup":"true","aria-controls":"tab_menu"}),P(o(it),{ref_key:"tabMenu",ref:A,id:"tab_menu",model:e.tabItems,popup:!0},null,8,["model"])]),a("div",On,[P(o(mt),{value:e.typeIndex,scrollable:"",showNavigators:!1},{default:H(()=>[P(o(bt),null,{default:H(()=>[(l(!0),h(G,null,se(e.types,(L,M)=>(l(),X(o(gt),{value:M,onClick:()=>z.$emit("clickType",M),class:"text-sm md:text-lg lg:text-xl"},{default:H(()=>[be(v(L),1)]),_:2},1032,["value","onClick"]))),256))]),_:1})]),_:1},8,["value"])])])]),P(o(ge),{visible:y.value,"onUpdate:visible":N[4]||(N[4]=L=>y.value=L),header:"结账",class:"flex flex-column",modal:!0,dismissableMask:!0,onHide:Q},{default:H(()=>[a("div",null,[N[6]||(N[6]=a("label",null,"NIF:",-1)),P(o(Ft),{modelValue:b.value,"onUpdate:modelValue":N[1]||(N[1]=L=>b.value=L),inputId:"withoutgrouping",useGrouping:!1,fluid:"",class:"w-full m-1"},null,8,["modelValue"])]),a("div",En,[a("label",null,v(z.$t("common.note"))+":",1),P(o(pt),{type:"text",modelValue:q.value,"onUpdate:modelValue":N[2]||(N[2]=L=>q.value=L),class:"w-full m-1"},null,8,["modelValue"])]),a("div",Mn,[P(o(J),{label:o(n)("common.send"),onClick:N[3]||(N[3]=L=>U())},null,8,["label"])])]),_:1},8,["visible"]),P(o(ge),{visible:g.value,"onUpdate:visible":N[5]||(N[5]=L=>g.value=L),modal:"",dismissableMask:"",class:"h-full",style:{width:"90vw",maxWidth:"40rem",minWidth:"20rem"},draggable:!1},{header:H(()=>[a("div",Rn,[P(o(Ze),{icon:"pi pi-question",shape:"circle"}),a("span",jn,v(o(n)("takeawayHelper.dialogTitle")),1)])]),default:H(()=>[a("div",Vn,[a("span",Fn,v(o(n)("takeawayHelper.introduction")),1),a("span",Hn,v(o(n)("takeawayHelper.note_t"))+" "+v(o(n)("takeawayHelper.note_1")),1),a("div",Kn,[P(o(Je),{class:"w-full max-w-xl mx-auto"},{default:H(()=>[P(o(Ue),{value:"0"},{default:H(()=>[P(o(We),{class:"text-sm"},{default:H(()=>[be(v(o(n)("takeawayHelper.question_1")),1)]),_:1}),P(o(Qe),{class:"p-1"},{default:H(()=>[a("div",Un,[a("span",null,v(o(n)("takeawayHelper.q_1_request_1")),1),a("span",null,v(o(n)("takeawayHelper.q_1_request_2")),1),a("span",null,v(o(n)("takeawayHelper.q_1_request_3")),1),a("span",null,v(o(n)("takeawayHelper.q_1_request_4")),1),a("span",null,v(o(n)("takeawayHelper.q_1_request_5")),1)])]),_:1})]),_:1})]),_:1})])])]),_:1},8,["visible"])],64))}},Qn={__name:"SwipeHint",props:{size:{type:String,default:"8rem"},duration:{type:Number,default:6e3},position:{type:String,default:"bottom"}},setup(e){const t=e,n=R(!0);Ge(()=>{t.duration>0&&setTimeout(()=>{n.value=!1},t.duration);const m=()=>{n.value=!1,window.removeEventListener("touchstart",m)};window.addEventListener("touchstart",m)});const g=pe(()=>{let m={left:"50%",transform:"translateX(-50%)",zIndex:99999,opacity:.5,pointerEvents:"none",textAlign:"center",position:"fixed"};return t.position==="top"?m.top="15%":t.position==="center"?(m.top="50%",m.transform="translate(-50%, -50%)"):m.bottom="15%",m});return(m,d)=>n.value?(l(),h("div",{key:0,class:"swipe-hint",style:Pe(g.value)},[a("div",{class:"hand",style:Pe({width:e.size,height:e.size,backgroundImage:"url(/images/hand_finger.png)"})},null,4)],4)):O("",!0)}},Jn=Ce(Qn,[["__scopeId","data-v-e5f3ff45"]]),Gn={class:"w-full h-full flex flex-column p-1"},Zn={class:"swiper-container-wrapper"},Xn={class:"fixed bottom-0 left-0 w-full h-3rem bg-primary-reverse p-3 z-[9999]"},Yn={class:"h-full flex align-items-center justify-content-between w-full"},eo={class:"m-2"},to={key:0,class:"m-2"},ao={class:"m-2"},so={style:{"max-height":"60vh","overflow-y":"auto","padding-bottom":"60px"}},no={class:"flex flex-column border-bottom-1"},oo={key:0,class:"flex justify-content-between"},io={class:"flex flex-column"},lo={class:"font-bold"},ro={class:"text-right"},uo={key:1,class:"flex justify-content-between"},co={class:"flex flex-column"},fo={class:"font-bold"},po={class:"text-right"},vo={key:0},ho={key:1,class:"flex flex-column"},mo={class:"flex flex-column"},bo={class:"font-bold"},go={class:"text-right"},yo={class:"total-footer bg-primary-reverse"},ut=5,Ne="order_time_key",_o={__name:"HomePage",setup(e){const t=ct(),n=zt(),{t:g}=fe(),{locale:m}=fe(),d=R(0),f=R(!1),V=R([""]),r=R(0),w=re.cartItemCount,A=R(!1),y=R([]),b=R(0),q=R({}),W=R(!1),U=ee.dishDatas,Q=R(B.getOrderMenuTab()),E=R(null),z=R(null),N=R([]),L=R([]),M=R([]),u=R(!1);let s=null;const p=i=>{r.value=i.activeIndex,Oe()},x=i=>{s=i};Be(r,i=>{s&&s.activeIndex!==i&&s.slideTo(i);let c=B.getOrderMenuTab()[i];B.customDishAPI.customDishes.value.map(T=>T.name).includes(c)?(W.value=!0,q.value=B.customDishAPI.customDishes.value.find(T=>T.name==c)):W.value=!1});const k=(i,c,I,T)=>{B.rateDish(i,c,I),T&&ie.show_success(g("notification.rating_submitted"))},C=(i,c,I)=>{if(q.value.name=="XIAOXIONG® RAMEN"&&i.id===1){const T=i.dishes[c];let K;T.dishid==47?I?K=_(3,!0,1):K=_(3,!1,1):K=_(3,!0,1),K!==void 0&&F(K)}if(q.value.name=="Menu Almoço"&&i.id===3){const T=i.dishes[c];let K;[1427,41].includes(T.dishid)?I?K=_(4,!0,0):K=_(4,!1,0):K=_(4,!0,0),K!==void 0&&F(K)}};function _(i,c,I){if(q.value={...q.value,types:q.value.types.map(T=>T.id===i?{...T,enable:c,minQuantity:c?I:0}:T)},c===!1)return i}function F(i){!q.value||!Array.isArray(q.value.types)||(q.value={...q.value,types:q.value.types.map(c=>c.id===i?{...c,dishes:c.dishes.map(I=>({...I,selected:!1}))}:c)})}function S(i){let c=B.getOrderMenuTab()[i];if(B.customDishAPI.customDishes.value.map(ae=>ae.name).includes(c)?(W.value=!0,q.value=B.customDishAPI.customDishes.value.find(ae=>ae.name==c)):W.value=!1,B.getMenu().length==0){console.log("exit");return}let K=U.value[i].mainDishes;ee.showDishList(K)}const $=()=>{B.refreshTableFromServer(),B.getTableTotalAmount(b),A.value=!0},D=(i,c,I)=>{},te=i=>{let c=i.id;i.org_id&&(c=i.org_id);for(let I=0;I<U.value.length;I++)if(U.value[I].id==c)for(const T in i){let K=T;T.startsWith("note")&&(K=K.replace("note","description")),U.value[I][K]=i[T]}};function j(){return new Promise(i=>{let c=()=>{const I=B.formatedMenu.value;I.length>0?i(I):setTimeout(c,200)};c()})}function Y(){return new Promise(i=>{let c=()=>{const I=B.getOrderMenuTab();I.length>0?i(I):setTimeout(c,200)};c()})}const ue=pe(()=>i=>{const c=B.dictinaryAPI.dictinary.value[i];return c?c[`text_${m.value.toLowerCase()}`]:i});Be([()=>B.formatedMenu.value,()=>m.value],([i,c])=>{if(!i||i.length===0){M.value=[];return}const I={};B.orderMenuTab.value;const T=i.map(me=>({...me,mainDishes:me.dishes.map(ne=>{const oe=ne.dish;if(I[oe.id])return I[oe.id];const _e={...oe,defaultName:oe.name,defaultSubname:oe.subname,name:le(oe,"name",c),note:le(oe,"note",c),subname:le(oe,"subname",c),quantity:0},Tt=ne.subItems.map(tt=>{const je=tt;return{...tt,defaultName:oe.name,defaultSubname:oe.subname,name:le(je,"name",c),note:le(je,"note",c),subname:le(je,"subname",c),quantity:0}}),Re={...ne,dish:_e,subItems:Tt};return I[Re.id]=Re,Re})}));U.value.length;const K=ee.getAllIncrementedDish();ee.getIdsAndQuantity(K);const ae=re.cartDishs.value;He.compressToEncodedURIComponent(JSON.stringify(ae)),M.value=T,U.value=M.value,V.value=B.orderMenuTab.value,(K.length>0||ae.length>0)&&(ee.cleanDishDataQty(),ee.updateDishDataQty(K)),B.filterMenuTabs(u.value),console.log("languagedMenu updated via watch:",M.value),st(()=>{d.value++,s&&typeof s.update=="function"&&(s.update(),s.slideTo(r.value))})},{immediate:!0,deep:!0}),Be(()=>B.orderMenuTab.value,i=>{Q.value=i.map(c=>{const I=B.dictinaryAPI.dictinary.value[c];return I?I[`text_${m.value.toLowerCase()}`]:c}),y.value=Xe(i),r.value=0});function le(i,c,I){return i?I==="en"?i[`${c}_en`]||i[c]:I==="zh"&&i[`${c}_cn`]||i[c]:""}async function he(){await j();const i=await Y();B.onMenuItemChanged=te,B.onRatingChanged=D,$t(),y.value=Xe(i)}function Xe(i){const c=[];for(let I=0;I<i.length;I++){const T=I;c.push({label:ue.value(i[I]),command:()=>{Ye(T),Oe()}})}return c}const Oe=()=>{st(()=>{const i=document.querySelector(".p-tablist-viewport"),c=document.querySelector(".p-tab.p-tab-active");if(i&&c){const I=c.offsetLeft-i.offsetWidth/2+c.offsetWidth/2;i.scrollTo({left:I,behavior:"smooth"})}window.scrollTo({top:0,behavior:"smooth"})})},Ye=i=>{S(i),r.value=i,Oe()},yt=()=>{var i=ee.getAllIncrementedDish();z.value.showDishList(i)};function Ee(){return B.getTable()}B.params.port,E.value=B.table.value.order;function _t(i){var c=g("notification.too_fast",{remainTime:i});ie.show_warn(c)}const wt=(i,c)=>{const I=[];for(let ne=0;ne<re.cartDishs.value.length;ne++){var T=re.cartDishs.value[ne];const oe=B.formateCustomDishNotes(T),_e=T.dis_count?T.dis_price:T.price;I.push({dishid:T.dishid,name:T.name,quantity:T.count,notes:oe,limit:T.limit,price:_e,dishNote:T.dishNote,category:T.category})}const K=ee.getAllIncrementedDish();for(let ne=0;ne<K.length;ne++){var T=K[ne];if(T.quantity>0){const _e=T.dis_count?T.dis_price:T.price;I.push({dishid:T.id,name:T.defaultName,quantity:T.quantity,limit:T.limit,price:_e,dishNote:T.dishNote})}}if(I.length===0)return ie.show_warn(g("notification.select_at_least_one")),!1;console.log("cart item:",I);const ae=JSON.parse(de.getCookie(Ne)||"{}"),me=Date.now();if(!ae.startTime||me-ae.startTime>ut*1e3)ae.startTime=me,ae.uniCode||(ae.uniCode=Date.now().toString(36)+Math.random().toString(36).substring(2,5));else{const ne=ut-parseInt((me-ae.startTime)/1e3);_t(ne);return}return de.setCookie(Ne,JSON.stringify(ae)),f.value=!0,B.submit_order({uniCode:ae.uniCode,name:i.name,note:i.note,table:Ee(),items:I},ne=>{const oe=JSON.parse(de.getCookie(Ne)||"{}");oe.uniCode=void 0,de.setCookie(Ne,JSON.stringify(oe)),c(ne)}),!0};function kt(){const i=de.getCookie("language");i&&(m.value=i)}function et(){for(let i=0;i<U.value.length;i++){const c=U.value[i];c.quantity=0}f.value=!1,re.cleanAll()}Ge(async()=>{kt(),await he(),S(r.value),B.clear_order_data=()=>{et()},B.setOnOrderConfirmed(i=>{et();const c=i;ie.show_success(g("notification.order_submitted",{id:c}))}),B.setOnShowError(i=>{f.value=!1,ie.show_error(i)})});function xt(){de.deleteCookie("login_time");const i=n.query.table;i?t.push({path:"/",query:{table:i}}):t.push({path:"/takeReserve"})}function De(i,c=!0){const I=c?re.cartDishs.value:ee.getIdsAndQuantity(ee.getAllIncrementedDish()),T=He.compressToEncodedURIComponent(JSON.stringify(I));de.setCookie(i,T)}function Me(){B.isTakeaway()?(De("take_cartDish_normal",!1),De("take_cartDish_custom",!0)):(De("cartDish_normal",!1),De("cartDish_custom",!0))}function Ie(i,c=!0){const I=de.getCookie(i);if(!I)return;const T=JSON.parse(He.decompressFromEncodedURIComponent(I));if(T&&T!=="undefined")try{c?re.cartDishs.value=T:ee.updateDishDataQty(T)}catch(K){console.error("解析菜失败:",K)}}function $t(){B.isTakeaway()?(Ie("take_cartDish_normal",!1),Ie("take_cartDish_custom")):(Ie("cartDish_normal",!1),Ie("cartDish_custom"))}return qt(()=>{Me()}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&Me()}),window.addEventListener("beforeunload",i=>{Me(),B.cleanup()}),(i,c)=>(l(),h(G,null,[a("div",Gn,[(l(),X(Wn,{key:d.value,types:Q.value,typeIndex:r.value,tabItems:y.value,tableId:Ee(),onClickType:Ye,onSwitchToWelcome:xt},null,8,["types","typeIndex","tabItems","tableId"])),c[4]||(c[4]=a("div",{class:"pb-8"},null,-1)),c[5]||(c[5]=a("div",{class:"pb-4 sm:pb-5 md:pb-5 lg:pb-5"},null,-1)),P(Jn,{duration:3e3,position:"center",size:"3rem"}),a("div",Zn,[(l(),X(o(Et),{key:`swiper-${Q.value.length}-${d.value}`,"space-between":20,"centered-slides":"","grab-cursor":!0,class:"w-full",autoHeight:!0,onSlideChange:p,onSwiper:x,"initial-slide":r.value},{default:H(()=>[(l(!0),h(G,null,se(Q.value,(I,T)=>(l(),X(o(Mt),{key:T},{default:H(()=>[Math.abs(r.value-T)<=1&&(!W.value||r.value!==T)?(l(),X(es,{key:0,rateDish:k,likedItemsRef:N.value,dislikedItemsRef:L.value,tabIndex:T,onlyVeg:u.value},null,8,["likedItemsRef","dislikedItemsRef","tabIndex","onlyVeg"])):Math.abs(r.value-T)<=1&&W.value&&r.value===T?(l(),X(un,{key:1,currentCustomDish:q.value,onTypeClick:C,tabindex:T},null,8,["currentCustomDish","tabindex"])):O("",!0)]),_:2},1024))),128))]),_:1},8,["initial-slide"]))]),c[6]||(c[6]=a("div",{style:{height:"60px"}},null,-1)),a("div",Xn,[a("div",Yn,[a("div",eo,[o(B).isTakeaway()?O("",!0):(l(),X(o(J),{key:0,label:i.$t("common.orders"),icon:"pi pi-list",class:"p-button-secondary",onClick:$},null,8,["label"]))]),o(B).developmentEnvironment.value?(l(),h("div",to,[P(o(Ot),{class:"text-sm",modelValue:u.value,"onUpdate:modelValue":c[0]||(c[0]=I=>u.value=I),onLabel:o(g)("common.showAll"),offLabel:o(g)("common.showOnlyVegetables"),onClick:c[1]||(c[1]=I=>o(B).filterMenuTabs(u.value))},null,8,["modelValue","onLabel","offLabel"])])):O("",!0),a("div",ao,[P(o(ht),{value:o(w),severity:"danger",onClick:yt},{default:H(()=>c[3]||(c[3]=[a("i",{class:"pi pi-shopping-cart",style:{"font-size":"2rem"}},null,-1)])),_:1,__:[3]},8,["value"])])])])]),P(As,{ref_key:"cartRef",ref:z,checkout:wt,isTakeaway:!Ee()},null,8,["isTakeaway"]),P(o(ge),{visible:A.value,"onUpdate:visible":c[2]||(c[2]=I=>A.value=I),header:i.$t("common.completedOrders"),modal:"",style:{width:"80vw","max-width":"700px"}},{default:H(()=>{var I,T;return[a("div",so,[a("div",no,[(I=b.value.adultPrice)!=null&&I.quantity&&b.value.adultPrice.quantity!=0?(l(),h("div",oo,[a("div",io,[a("span",lo,v(i.$t("common.adult")),1),a("small",null,v(i.$t("common.quantity"))+": "+v(b.value.adultPrice.quantity),1)]),a("div",ro,[a("span",null,"€"+v((Number(b.value.adultPrice.price)*b.value.adultPrice.quantity).toFixed(2)),1)])])):O("",!0),(T=b.value.childrenPrice)!=null&&T.quantity&&b.value.childrenPrice.quantity!=0?(l(),h("div",uo,[a("div",co,[a("span",fo,v(i.$t("common.children")),1),a("small",null,v(i.$t("common.quantity"))+": "+v(b.value.childrenPrice.quantity),1)]),a("div",po,[a("span",null,"€"+v((Number(b.value.childrenPrice.price)*b.value.childrenPrice.quantity).toFixed(2)),1)])])):O("",!0)]),o(B).table.value.order.length===0?(l(),h("div",vo,v(i.$t("common.noOrders")),1)):(l(),h("div",ho,[(l(!0),h(G,null,se(o(B).table.value.order,(K,ae)=>(l(),h("div",{key:ae,class:"flex justify-content-between border-bottom-1 pb-2"},[a("div",mo,[a("span",bo,v(o(B).getDishName(K)),1),a("small",null,v(i.$t("common.quantity"))+": "+v(K.quantity),1)]),a("div",go,[a("span",null,"€"+v((K.price*K.quantity).toFixed(2)),1)])]))),128))]))]),a("div",yo,v(i.$t("common.total"))+": €"+v(b.value.total),1)]}),_:1},8,["visible","header"])],64))}},Po=Ce(_o,[["__scopeId","data-v-5c8e132a"]]);export{Po as default};
