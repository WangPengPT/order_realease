import{s as q}from"./index-dOrF5dWo.js";import{s as E}from"./index-Yi0qIV5i.js";import{c as T}from"./index-DbP2HlSH.js";import{s as B}from"./index-CU5YzXH5.js";import{s as D}from"./index-Dz_memzz.js";import{C as V,Q as k}from"./CodeMaker-DIpcM4PY.js";import{h as u,u as N,c as g,a as l,d as t,e as w,f as j,w as y,F,o as c}from"./index-CS4Gn_Dm.js";import"./index-CAuqSre3.js";import"./index-D8YOPCxm.js";import"./index-D_U2DyPt.js";import"./_commonjsHelpers-DaWZu8wl.js";const L={class:"flex flex-wrap align-items-center"},S={class:"flex flex-wrap justify-content-center w-full mt-2"},P={key:0,class:"flex flex-column align-items-center justify-content-center"},A={key:1,class:"flex flex-column align-items-center justify-content-center gap-3"},G={class:"flex flex-row gap-3"},ee={__name:"QCodePage",setup(I){const i=u(!1),p=N(),f=u(0),v=u(""),x=u(0),n=u(""),d=u(null),C=u(!1);async function R(){const o=document.createElement("canvas");for(let e=f.value;e<=x.value;e++){const m=e<10?`0${e}`:`${e}`,s="https://sushi.xiaoxiong.pt"+v.value+"/client.html?table="+V.SimpleEncode(m);console.log("生成二维码数据: ",s),await k.toCanvas(o,s,{width:300});const r=document.createElement("a");r.download=`${m}.png`,r.href=o.toDataURL("image/png"),r.click(),await new Promise(_=>setTimeout(_,300))}console.log("全部二维码下载完毕")}const $=()=>{if(n.value){let o=window.env.QR_ADDR+V.SimpleEncode(n.value);console.log("The qrcode data: ",o),k.toCanvas(d.value,o,{width:300},e=>{e?console.error(e):C.value=!0})}},Q=()=>{if(d.value){const o=document.createElement("a");o.download=`座号-${n.value}-二维码.png`,o.href=d.value.toDataURL("image/png"),o.click()}};function U(){if(!n.value){p.add({severity:"error",summary:"错误",detail:"座位号不能为空",life:3e3});return}$(),p.add({severity:"success",summary:"成功",detail:"成功生成二维码，座位号："+n.value,life:3e3})}return(o,e)=>{const m=D,s=B,r=T,_=E,b=q;return c(),g(F,null,[l("div",L,[t(m,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=a=>i.value=a),class:"m-4"},null,8,["modelValue"]),e[5]||(e[5]=l("p",{class:"font-bold"},"一键生成二维码",-1))]),l("div",S,[i.value?w("",!0):(c(),g("div",P,[e[6]||(e[6]=l("h2",{class:"font-bold"},"座号二维码生成器",-1)),t(s,{type:"text",modelValue:n.value,"onUpdate:modelValue":e[1]||(e[1]=a=>n.value=a),class:"m-3"},null,8,["modelValue"]),t(r,{label:"生成二维码",onClick:U}),t(_,{ref_key:"toast",ref:p},null,512),l("div",null,[l("canvas",{ref_key:"qrCanvas",ref:d},null,512)]),C.value?(c(),j(r,{key:0,label:"下载二维码",icon:"pi pi-download",onClick:Q})):w("",!0)])),i.value?(c(),g("div",A,[e[10]||(e[10]=l("h2",{class:"font-bold"},"座号二维码一键生成器",-1)),l("div",G,[t(b,{variant:"on"},{default:y(()=>[t(s,{type:"number",modelValue:f.value,"onUpdate:modelValue":e[2]||(e[2]=a=>f.value=a),style:{"max-width":"100px"}},null,8,["modelValue"]),e[7]||(e[7]=l("label",{for:"on_label"},"请输入起始座号",-1))]),_:1,__:[7]}),t(b,{variant:"on"},{default:y(()=>[t(s,{type:"number",modelValue:x.value,"onUpdate:modelValue":e[3]||(e[3]=a=>x.value=a),style:{"max-width":"100px"}},null,8,["modelValue"]),e[8]||(e[8]=l("label",{for:"on_label"},"请输入最终座号",-1))]),_:1,__:[8]})]),t(b,{variant:"on"},{default:y(()=>[t(s,{type:"text",modelValue:v.value,"onUpdate:modelValue":e[4]||(e[4]=a=>v.value=a)},null,8,["modelValue"]),e[9]||(e[9]=l("label",{for:"on_label"},"请输入地址",-1))]),_:1,__:[9]}),t(r,{label:"一键生成下载二维码",onClick:R})])):w("",!0)])],64)}}};export{ee as default};
