import{s as R}from"./index-CI6fSzEC.js";import{b as A}from"./index-CPYDG0bU.js";import{s as F}from"./index-BgpT8uF0.js";import{s as q}from"./index-QGwzMsQD.js";import{s as E,a as H,c as L,b as X}from"./index-CaL1lkjQ.js";import{s as G}from"./index-CLxy0lzO.js";import{s as J}from"./index-2nwGITws.js";import{q as K,h as r,i as Q,n as P,c as W,d as i,w as y,l as a,F as Y,o as z,C as Z,t as d,a as l,f as C,e as T}from"./index-D7zfo4YV.js";import"./index-B0WhYrOj.js";import"./index-VOEtcXyg.js";import"./index-CC3crBVl.js";import"./index-q_Qtn-mc.js";import"./index-B_VBdnp-.js";import"./index-CO6F1dZO.js";import"./index-B_SThZaw.js";import"./index-Dhz_FGKP.js";import"./index-CJscmiHY.js";import"./index-BS4FWdvs.js";const ee={class:"flex flex-wrap justify-content-center py-5"},te={class:"m-3 text-gray-500"},le={class:"flex flex-column gap-1 mt-2 mb-2"},oe={class:"flex flex-wrap justify-content-between"},ne={class:"flex align-items-center gap-2 mb-1 mr-2"},ae={class:"flex flex-column gap-2 mt-2 mb-2"},se={class:"flex align-items-center"},ie={class:"ml-1"},re={class:"flex align-items-center"},ue={class:"ml-1"},pe={class:"mt-2 mb-2"},me={class:"mt-2 mb-2"},ce={class:"flex flex-wrap justify-content-between align-items-center m-3"},Ue={__name:"PrintersPage",setup(de){const{t:n}=K(),v=r(null),S=r([]),f=r([]),g=r([]),$=r([]),h=r(!1),x=r(null),b=r(!1),V=r(!1),k=r(14),w=r(!0);function U(){x.value=null}function D(t){const e=t.data,u=[""].concat(e.printers);if(S.value=u,w.value=S.value.length>1,v.value=e.curPrinter,k.value=e.fontSize||14,g.value.length==0){const p={},m=["My BOX","Bibimbpa"];for(let c=0;c<P.menuApi.menuData.value.length;c++){const s=P.menuApi.menuData.value[c];s.category&&s.category!=""&&(p[s.category]||(p[s.category]=!0,m.push(s.category))),s.tags&&s.tags!=""&&(p[s.tags]||(p[s.tags]=!0,m.push(s.tags)))}g.value=m,console.log(g.value)}if(e.menu){const p=[];for(let m=0;m<e.menu.length;m++){const c=e.menu[m];let s=!1;for(let _=0;_<g.value.length;_++)g.value[_]==c&&(s=!0);s&&p.push(c)}f.value=p}else f.value=[];console.log(f.value),x.value=e,b.value=e.every_one=="true",V.value=e.print_takeaway=="true",h.value=!0}function M(){const t=x.value,e=v.value,u=f.value;t.curPrinter=e,t.menu=[...u],console.log(b.value),b.value==!0?t.every_one="true":t.every_one="false",t.print_takeaway=V.value?"true":"false",t.fontSize=k.value,console.log(t.id,e,u,t.print_takeaway,t.every_one,t.fontSize),P.selectPrinter(t.id,e,u,t.print_takeaway,t.every_one,t.fontSize),h.value=!1}function I(){const t=x.value;P.printTestPage(t.id)}return Q(()=>{P.getPrinters(t=>{$.value=t,console.log("printers",$.value.length)})}),r(""),(t,e)=>{const u=H,p=E,m=J,c=L,s=G,_=X,N=q,O=F,B=A,j=R;return z(),W(Y,null,[i(p,{value:$.value,onRowClick:D},{empty:y(()=>[l("div",ee,[e[10]||(e[10]=l("i",{class:"pi pi-search",style:{"font-size":"3rem",color:"#ccc"}},null,-1)),l("p",te,d(a(n)("optionPages.noPrinter")),1)])]),default:y(()=>[i(u,{field:"id",header:a(n)("optionPages.printerId"),sortable:"",style:{width:"10%"}},null,8,["header"]),i(u,{field:"curPrinter",header:a(n)("optionPages.printer"),sortable:"",style:{width:"20%"}},null,8,["header"]),i(u,{field:"menu",header:a(n)("optionPages.menu"),sortable:"",style:{width:"50%"}},{body:y(({data:o})=>[Z(d(o.menu.toString()),1)]),_:1},8,["header"]),i(u,{field:"every_one",header:a(n)("optionPages.oneByOne"),sortable:"",style:{width:"10%"}},null,8,["header"]),i(u,{field:"fontSize",header:a(n)("optionPages.fontSize"),sortable:"",style:{width:"10%"}},null,8,["header"])]),_:1},8,["value"]),i(j,{visible:h.value,"onUpdate:visible":e[9]||(e[9]=o=>h.value=o),header:a(n)("optionPages.printerSettings"),style:{"max-width":"500px","min-width":"300px"},modal:!0,dismissableMask:!0,onHide:U},{default:y(()=>[l("div",le,[l("div",oe,[l("label",null,d(a(n)("optionPages.printer"))+"ï¼š ",1),l("div",ne,[i(m,{modelValue:w.value,"onUpdate:modelValue":e[0]||(e[0]=o=>w.value=o)},null,8,["modelValue"]),l("label",null,d(a(n)("optionPages.usePrinterIP")),1)])]),w.value?T("",!0):(z(),C(c,{key:0,modelValue:v.value,"onUpdate:modelValue":e[1]||(e[1]=o=>v.value=o),class:"w-full md:w-56",placeholder:a(n)("optionPages.selectPrinter"),options:S.value,filter:""},null,8,["modelValue","placeholder","options"])),w.value?(z(),C(s,{key:1,type:"text",modelValue:v.value,"onUpdate:modelValue":e[2]||(e[2]=o=>v.value=o)},null,8,["modelValue"])):T("",!0)]),l("div",ae,[l("div",se,[i(_,{modelValue:b.value,"onUpdate:modelValue":e[3]||(e[3]=o=>b.value=o),binary:""},null,8,["modelValue"]),l("label",ie,d(a(n)("optionPages.printOne")),1)]),l("div",re,[i(_,{modelValue:V.value,"onUpdate:modelValue":e[4]||(e[4]=o=>V.value=o),binary:""},null,8,["modelValue"]),l("label",ue,d(a(n)("optionPages.printTakeawayOrder")),1)])]),l("div",pe,[l("label",null,d(a(n)("optionPages.printMenu")),1),i(N,{modelValue:f.value,"onUpdate:modelValue":e[5]||(e[5]=o=>f.value=o),options:g.value,class:"w-full md:w-56",filter:""},null,8,["modelValue","options"])]),l("div",me,[l("label",null,d(a(n)("optionPages.fontSize"))+": ",1),i(O,{modelValue:k.value,"onUpdate:modelValue":e[6]||(e[6]=o=>k.value=o),class:"w-full md:w-56",showButtons:"",buttonLayout:"horizontal",min:12,max:20,fluid:""},{incrementbuttonicon:y(()=>e[11]||(e[11]=[l("span",{class:"pi pi-plus"},null,-1)])),decrementbuttonicon:y(()=>e[12]||(e[12]=[l("span",{class:"pi pi-minus"},null,-1)])),_:1},8,["modelValue"])]),l("div",ce,[i(B,{onClick:e[7]||(e[7]=o=>I()),icon:"pi pi-print",color:"primary",label:a(n)("optionPages.printTest")},null,8,["label"]),i(B,{onClick:e[8]||(e[8]=o=>M()),color:"primary",label:a(n)("common.save")},null,8,["label"])])]),_:1},8,["visible","header"])],64)}}};export{Ue as default};
