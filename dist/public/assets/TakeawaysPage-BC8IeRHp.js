import{s as he}from"./index-_0gIHHe-.js";import{s as we}from"./index-CqHMo6-D.js";import{s as ke,a as Pe}from"./index-qLECj6LO.js";import{a as Ce}from"./index-BWa0-TPv.js";import{q as Se,h as g,n as P,s as Te,c as u,a as e,b as r,w as n,l as t,F as N,r as Ae,o as c,A as se,z as h,t as o,L as m,C as Me,e as y,E as le,G as f}from"./index-Bxf78v2S.js";import{s as oe,a as p}from"./index-DAAY8irn.js";import{s as Ne}from"./index-CULdYZBu.js";import{s as re}from"./index-CC4hqRwV.js";import"./index-CS_EJTJF.js";import"./index-DUp_YIiu.js";import"./index-DFDZnx-s.js";import"./index-Czocopw6.js";import"./index-_uKmlvWK.js";import"./index-CvhDf1Ar.js";import"./index-14NAMr2s.js";import"./index-BMHawzqM.js";const $e={class:"h-full"},je={class:"flex flex-column gap-2"},Oe={class:"flex justify-content-between"},Ve={class:"flex flex-column"},De={class:"flex flex-row"},Ue={class:"m-0 font-bold text-2xl text-left flex-grow-1"},Ee={class:"font-bold"},Ie={class:"font-bold"},Re=["onClick"],Fe={class:"text-center py-5"},Le={class:"mt-3 text-gray-500"},ze={class:"flex flex-row gap-2 align-items-center"},Be={class:"flex flex-column"},He={class:"text-lg font-bold"},Qe={class:"text-sm text-gray-600"},qe={class:"flex flex-column gap-2 overflow-auto"},Ke={class:"border-gray-300 border-1 border-round-lg p-3 flex flex-column gap-2"},We={class:"flex flex-row justify-content-between align-items-center"},Ge={class:"text-sm text-gray-500"},Je={class:"flex flex-row align-items-center gap-2"},Xe={key:0,class:"text-gray-500"},Ye={class:"font-bold"},Ze={class:"flex flex-row align-items-center gap-2"},et={key:0,class:"text-gray-500"},tt={class:""},at={class:"flex flex-row align-items-center gap-2"},st={key:0,class:"text-gray-500"},lt={class:""},ot={key:0,class:"flex flex-row align-items-center gap-2"},rt={key:0,class:"text-gray-500"},it={class:"text-red-500 font-bold"},nt={key:0,class:"border-gray-300 border-1 border-round-lg p-3 flex flex-column gap-2"},dt={class:"flex flex-row justify-content-between align-items-center"},ut={class:"text-sm text-gray-500"},ct={key:0,class:"flex flex-row align-items-center gap-2"},pt={key:0,class:"text-gray-500"},yt={class:"font-semibold"},gt={key:1,class:"flex flex-row align-items-center gap-2"},vt={key:0,class:"text-gray-500"},mt={class:"font-semibold"},ft={class:"flex flex-row align-items-center gap-2"},xt={key:0,class:"text-gray-500"},_t={class:""},bt={class:"flex flex-row align-items-center gap-2"},ht={key:0,class:"text-gray-500"},wt={class:""},kt={class:"border-gray-300 border-1 border-round-lg p-3 flex flex-column gap-2"},Pt={class:"text-sm text-gray-500"},Ct={class:"flex flex-row gap-2 align-items-center"},St={class:"text-sm font-bold"},Tt={class:"font-semibold"},At={class:"flex flex-row gap-4"},Mt={key:0,class:"text-gray-600 text-sm"},Nt={class:"text-gray-600 text-sm"},$t={class:"h-full"},jt=["onClick"],Ot={class:"text-center py-5"},Vt={class:"mt-3 text-gray-500"},Yt={__name:"TakeawaysPage",setup(Dt){const{t:a}=Se(),C=g({global:{value:null,matchMode:f.CONTAINS},id:{value:null,matchMode:f.STARTS_WITH},date:{value:null,matchMode:f.STARTS_WITH},time:{value:null,matchMode:f.IN},customer:{value:null,matchMode:f.EQUALS},total_price:{value:null,matchMode:f.EQUALS},pay_state:{value:null,matchMode:f.EQUALS},pay_ttpe:{value:null,matchMode:f.EQUALS}}),w=P.shopify_orders,x=g(!1),_=g(!1),S=g(!0),k=g(!1),i=g(null),T=g(!1),b=g(null),ie=Te(()=>[{label:a("orderPage.completed"),value:"completed"},{label:a("orderPage.read"),value:"read"},{label:a("orderPage.new"),value:"new"},{label:a("orderPage.voided"),value:"voided"}]);function $(d){if(d.pay_state=="voided"){d.status="voided";return}i.value=d,k.value=!1,b.value=d.status,T.value=!0}function ne(){b.value!==null&&(i.value.status!==b.value&&((i.value.status==="new"||!i.value.status)&&P.updateNewOrderCount("takeaway",-1),b.value==="new"&&P.updateNewOrderCount("takeaway",1),i.value.status=b.value),T.value=!1)}function j(d){i.value=d.data,k.value=!0,(i.value.status==="new"||!i.value.status)&&(i.value.isNew=void 0,P.updateNewOrderCount("takeaway",-1),i.value.status="read")}const O=d=>({completed:"status-completed",read:"status-read",new:"status-new",voided:"status-voided"})[d]||"",V=d=>({completed:a("orderPage.completed"),read:a("orderPage.read"),new:a("orderPage.new"),voided:a("orderPage.voided")})[d]||d;function de(d){P.print_takeaway_order(d),k.value=!1}g(!1);function ue(){let d=0;return w.value.forEach(s=>{s.status!="voided"&&s.pay_state!="voided"&&d++}),d}function ce(){let d=0;return w.value.forEach(s=>{d+=Number(s.total_price?s.total_price:0)}),d}const M=g(!1);function pe(){M.value=!0}return(d,s)=>{const D=Ce,ye=Pe,ge=ke,ve=Ae("lable"),me=we,fe=he;return c(),u(N,null,[e("div",$e,[r(t(oe),{value:t(w),tableStyle:"min-width: 50rem",dataKey:"id",paginator:"",rows:10,rowsPerPageOptions:[5,10,20,50],stripedRows:"",scrollable:"",scrollHeight:"flex",filters:C.value,onRowClick:j,selectionMode:"single"},{header:n(()=>[e("div",je,[e("div",Oe,[e("div",Ve,[e("div",De,[e("h4",Ue,o(t(a)("takeawaysPage.orders")),1),r(D,{text:"",icon:"pi pi-window-maximize",severity:"contrast",disabled:!t(w).length,onClick:pe},null,8,["disabled"])]),e("div",null,[e("small",Ee,o(t(a)("takeawaysPage.numberSuccessfulOrders"))+"："+o(ue()),1),s[9]||(s[9]=e("small",{class:"font-bold"},"丨",-1)),e("small",Ie,o(t(a)("takeawaysPage.totalAmount"))+"：€"+o(ce().toFixed(2)),1)])]),r(ge,{class:"flex align-items-center"},{default:n(()=>[r(ye,null,{default:n(()=>s[10]||(s[10]=[e("i",{class:"pi pi-search"},null,-1)])),_:1,__:[10]}),r(t(Ne),{modelValue:C.value.global.value,"onUpdate:modelValue":s[0]||(s[0]=l=>C.value.global.value=l),placeholder:t(a)("orderPage.find")},null,8,["modelValue","placeholder"])]),_:1})]),s[11]||(s[11]=e("div",null,null,-1))])]),empty:n(()=>[e("div",Fe,[s[12]||(s[12]=e("i",{class:"pi pi-search",style:{"font-size":"3rem",color:"#ccc"}},null,-1)),e("p",Le,o(t(a)("orderPage.notFound")),1)])]),default:n(()=>[r(t(p),{header:t(a)("orderPage.status")},{body:n(({data:l})=>[e("span",{class:h(["status-badge",O(l.status||"new")]),onClick:se(A=>$(l),["stop"])},o(V(l.status||"new")),11,Re)]),_:1},8,["header"]),r(t(p),{field:"name",header:t(a)("takeawaysPage.orderNumber"),sortable:""},{body:n(({data:l})=>[e("span",{style:m({"text-decoration":l.status=="voided"?"line-through":"none"})},o(l.name),5)]),_:1},8,["header"]),r(t(p),{field:"deliveryType",header:t(a)("orderPage.deliveryType.title"),sortable:""},{body:n(({data:l})=>[r(ve,{class:h([l.deliveryType=="delivery2home"?"text-orange-600":"text-blue-600","font-bold"])},{default:n(()=>[Me(o(l.deliveryType=="delivery2home"?t(a)("orderPage.deliveryType.toHome"):t(a)("orderPage.deliveryType.inShop")),1)]),_:2},1032,["class"])]),_:1},8,["header"]),r(t(p),{field:"pickupDate",header:t(a)("takeawaysPage.date"),sortable:""},null,8,["header"]),r(t(p),{field:"pickupTime",header:t(a)("takeawaysPage.time"),sortable:""},null,8,["header"]),r(t(p),{field:"customer.name",header:t(a)("takeawaysPage.customer"),sortable:""},null,8,["header"]),r(t(p),{field:"total_price",header:t(a)("takeawaysPage.totalPrice"),sortable:""},{body:n(({data:l})=>[e("span",{style:m({"text-decoration":l.status=="voided"?"line-through":"none"})}," €"+o(l.total_price?l.total_price:0),5)]),_:1},8,["header"]),r(t(p),{field:"pay_state",header:t(a)("takeawaysPage.payState"),sortable:""},{body:n(({data:l})=>[e("span",{style:m({"text-decoration":l.status=="voided"?"line-through":"none"})},o(t(a)("takeawaysPage.statePayment."+l.pay_state)),5)]),_:1},8,["header"]),r(t(p),{field:"pay_type",header:t(a)("takeawaysPage.payType"),sortable:""},{body:n(({data:l})=>[e("span",{style:m({"text-decoration":l.status=="voided"?"line-through":"none"})},o(t(a)("takeawaysPage.statePaymentType."+l.pay_type.replaceAll(" ","_"))),5)]),_:1},8,["header"])]),_:1},8,["value","filters"])]),r(t(re),{visible:k.value,"onUpdate:visible":s[5]||(s[5]=l=>k.value=l),header:"Takeaway Order Detail",modal:!0,dismissableMask:!0,style:{"min-width":"30%",width:"500px","max-width":"90%"}},{header:n(()=>{var l;return[e("div",ze,[s[13]||(s[13]=e("div",{class:"border-round-3xl bg-gray-200 flex justify-content-center align-items-center p-2"},[e("i",{class:"pi pi-receipt text-xl font-bold"})],-1)),e("div",Be,[e("label",He,o(t(a)("takeawaysPage.orderDetails")),1),e("label",Qe,o(t(a)("takeawaysPage.orderNumber"))+":"+o((l=i.value)==null?void 0:l.name),1)])])]}),footer:n(()=>[r(D,{class:"w-full border-round-xl",icon:"pi pi-print",label:t(a)("takeawaysPage.printOrder"),onClick:s[4]||(s[4]=l=>de(i.value)),fluid:""},null,8,["label"])]),default:n(()=>{var l,A,U,E,I,R,F,L,z,B,H,Q,q,K,W,G,J,X,Y,Z,ee,te,ae;return[e("div",qe,[e("div",Ke,[e("div",We,[e("label",Ge,o(t(a)("takeawaysPage.customerDetails")),1),e("i",{class:h([x.value?"pi pi-eye-slash":"pi pi-eye","text-gray-600"]),onClick:s[1]||(s[1]=v=>x.value=!x.value)},null,2)]),e("div",Je,[s[14]||(s[14]=e("div",{class:"bg-gray-200 p-2 border-round-xl flex justify-content-center align-items-center"},[e("i",{class:"pi pi-user text-gray-500"})],-1)),x.value?(c(),u("label",Xe,o(t(a)("takeawaysPage.name"))+" :",1)):y("",!0),e("label",Ye,o((A=(l=i.value)==null?void 0:l.customer)==null?void 0:A.name),1)]),e("div",Ze,[s[15]||(s[15]=e("div",{class:"bg-gray-200 p-2 border-round-xl flex justify-content-center align-items-center"},[e("i",{class:"pi pi-phone text-gray-500"})],-1)),x.value?(c(),u("label",et,o(t(a)("takeawaysPage.phone"))+" :",1)):y("",!0),e("label",tt,o((I=(E=(U=i.value)==null?void 0:U.customer)==null?void 0:E.phone)==null?void 0:I.replace("#"," - ")),1)]),e("div",at,[s[16]||(s[16]=e("div",{class:"bg-gray-200 p-2 border-round-xl flex justify-content-center align-items-center"},[e("i",{class:"pi pi-envelope text-gray-500"})],-1)),x.value?(c(),u("label",st,o(t(a)("takeawaysPage.email"))+" :",1)):y("",!0),e("label",lt,o((F=(R=i.value)==null?void 0:R.customer)==null?void 0:F.email),1)]),(L=i.value)!=null&&L.note&&i.value.note!==""?(c(),u("div",ot,[s[17]||(s[17]=e("div",{class:"bg-gray-200 p-2 border-round-xl flex justify-content-center align-items-center"},[e("i",{class:"pi pi-comment text-gray-500"})],-1)),x.value?(c(),u("label",rt,o(t(a)("orderPage.notes"))+" :",1)):y("",!0),e("label",it,o((z=i.value)==null?void 0:z.note),1)])):y("",!0)]),i.value.deliveryType=="delivery2home"?(c(),u("div",nt,[e("div",dt,[e("label",ut,o(t(a)("takeawaysPage.customerAddress")),1),e("i",{class:h([_.value?"pi pi-eye-slash":"pi pi-eye","text-gray-600"]),onClick:s[2]||(s[2]=v=>_.value=!_.value)},null,2)]),(H=(B=i.value)==null?void 0:B.deliveryAddress)!=null&&H.address1?(c(),u("div",ct,[s[18]||(s[18]=e("div",{class:"bg-gray-200 p-2 border-round-xl flex justify-content-center align-items-center"},[e("i",{class:"pi pi-map-marker text-gray-500"},[e("small",{class:"text-xs text-gray-500"},"1")])],-1)),_.value?(c(),u("label",pt,o(t(a)("takeawaysPage.address"))+"1 :",1)):y("",!0),e("label",yt,o((q=(Q=i.value)==null?void 0:Q.deliveryAddress)==null?void 0:q.address1),1)])):y("",!0),(W=(K=i.value)==null?void 0:K.deliveryAddress)!=null&&W.address2?(c(),u("div",gt,[s[19]||(s[19]=e("div",{class:"bg-gray-200 p-2 border-round-xl flex justify-content-center align-items-center"},[e("i",{class:"pi pi-map-marker text-gray-500"},[e("small",{class:"text-xs text-gray-500"},"2")])],-1)),_.value?(c(),u("label",vt,o(t(a)("takeawaysPage.address"))+"2 :",1)):y("",!0),e("label",mt,o((J=(G=i.value)==null?void 0:G.deliveryAddress)==null?void 0:J.address2),1)])):y("",!0),e("div",ft,[s[20]||(s[20]=e("div",{class:"bg-gray-200 p-2 border-round-xl flex justify-content-center align-items-center"},[e("i",{class:"pi pi pi-building text-gray-500"})],-1)),_.value?(c(),u("label",xt,o(t(a)("takeawaysPage.city"))+" :",1)):y("",!0),e("label",_t,o((Y=(X=i.value)==null?void 0:X.deliveryAddress)==null?void 0:Y.city),1)]),e("div",bt,[s[21]||(s[21]=e("div",{class:"bg-gray-200 p-2 border-round-xl flex justify-content-center align-items-center"},[e("i",{class:"pi pi-globe text-gray-500"})],-1)),_.value?(c(),u("label",ht,o(t(a)("takeawaysPage.postalCode"))+" :",1)):y("",!0),e("label",wt,o((ee=(Z=i.value)==null?void 0:Z.deliveryAddress)==null?void 0:ee.postalCode),1)])])):y("",!0),e("div",kt,[e("div",{class:"flex flex-row justify-content-between align-items-center",onClick:s[3]||(s[3]=v=>S.value=!S.value)},[e("label",Pt,o(t(a)("takeawaysPage.product")),1),e("div",Ct,[e("label",St,o(t(a)("takeawaysPage.totalPrice"))+": "+o((te=i.value)==null?void 0:te.total_price)+"€",1),e("i",{class:h([S.value?"pi pi-angle-up":"pi pi-angle-down"])},null,2)])]),S.value?(c(!0),u(N,{key:0},le((ae=i.value)==null?void 0:ae.line_items,(v,xe)=>(c(),u("div",{key:xe,class:"flex flex-column"},[e("label",Tt,o(v.name),1),(c(!0),u(N,null,le(v.properties,(_e,be)=>(c(),u("label",{key:be,class:"text-gray-600 text-sm"},o(_e),1))),128)),e("div",At,[v.sku?(c(),u("label",Mt,o(v.sku),1)):y("",!0),e("label",Nt,o(v.price)+" x "+o(v.quantity),1)])]))),128)):y("",!0)])])]}),_:1},8,["visible"]),r(t(re),{visible:T.value,"onUpdate:visible":s[7]||(s[7]=l=>T.value=l),header:t(a)("orderPage.orderStatus"),modal:!0,dismissableMask:!0},{default:n(()=>[r(me,{modelValue:b.value,"onUpdate:modelValue":s[6]||(s[6]=l=>b.value=l),options:ie.value,optionLabel:"label",optionValue:"value",onClick:ne},null,8,["modelValue","options"])]),_:1},8,["visible","header"]),r(fe,{visible:M.value,"onUpdate:visible":s[8]||(s[8]=l=>M.value=l),position:"full",header:t(a)("takeawaysPage.orders")},{default:n(()=>[e("div",$t,[r(t(oe),{value:t(w),tableStyle:"min-width: 50rem",dataKey:"id",paginator:"",rows:10,rowsPerPageOptions:[5,10,20,50],stripedRows:"",filters:C.value,scrollable:"",scrollHeight:"flex",onRowClick:j,selectionMode:"single"},{empty:n(()=>[e("div",Ot,[s[22]||(s[22]=e("i",{class:"pi pi-search",style:{"font-size":"3rem",color:"#ccc"}},null,-1)),e("p",Vt,o(t(a)("orderPage.notFound")),1)])]),default:n(()=>[r(t(p),{header:t(a)("orderPage.status")},{body:n(({data:l})=>[e("span",{class:h(["status-badge",O(l.status||"new")]),onClick:se(A=>$(l),["stop"])},o(V(l.status||"new")),11,jt)]),_:1},8,["header"]),r(t(p),{field:"name",header:t(a)("takeawaysPage.orderNumber"),sortable:""},{body:n(({data:l})=>[e("span",{style:m({"text-decoration":l.status=="voided"?"line-through":"none"})},o(l.name),5)]),_:1},8,["header"]),r(t(p),{field:"pickupDate",header:t(a)("takeawaysPage.date"),sortable:""},null,8,["header"]),r(t(p),{field:"pickupTime",header:t(a)("takeawaysPage.time"),sortable:""},null,8,["header"]),r(t(p),{field:"customer.name",header:t(a)("takeawaysPage.customer"),sortable:""},null,8,["header"]),r(t(p),{field:"total_price",header:t(a)("takeawaysPage.totalPrice"),sortable:""},{body:n(({data:l})=>[e("span",{style:m({"text-decoration":l.status=="voided"?"line-through":"none"})}," €"+o(l.total_price?l.total_price:0),5)]),_:1},8,["header"]),r(t(p),{field:"pay_state",header:t(a)("takeawaysPage.payState"),sortable:""},{body:n(({data:l})=>[e("span",{style:m({"text-decoration":l.status=="voided"?"line-through":"none"})},o(t(a)("takeawaysPage.statePayment."+l.pay_state)),5)]),_:1},8,["header"]),r(t(p),{field:"pay_type",header:t(a)("takeawaysPage.payType"),sortable:""},{body:n(({data:l})=>[e("span",{style:m({"text-decoration":l.status=="voided"?"line-through":"none"})},o(t(a)("takeawaysPage.statePaymentType."+l.pay_type.replaceAll(" ","_"))),5)]),_:1},8,["header"])]),_:1},8,["value","filters"])])]),_:1},8,["visible","header"])],64)}}};export{Yt as default};
