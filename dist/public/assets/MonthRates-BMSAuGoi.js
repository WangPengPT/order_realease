import{s as z}from"./index-oWewvl7O.js";import{s as E,a as O}from"./index-CvOoD4gH.js";import{s as H,a as I,b as U}from"./index-BdsqsLRc.js";import{s as q}from"./index-Bh9ZkrPr.js";import{s as G}from"./index-Ys1xQRsJ.js";import{b as J}from"./index-B_yOoGes.js";import{h as i,i as K,c as p,d as n,a as y,e as S,w as c,n as T,j as P,o as u,F as Q,E as W,f as X,C as b,t as x}from"./index-wgRpoX0d.js";import"./index-aCXqh-i3.js";import"./index-D-07fRNA.js";import"./index-BSRB7VuG.js";import"./index-Dnq2afyk.js";import"./index-CpkBTmvN.js";import"./index-Cwyqkitp.js";import"./index-Cp6jjMOu.js";import"./index-DU9w3h9i.js";import"./index-ChImTywB.js";import"./index-BBPRvQVz.js";import"./index-DxUcq-LS.js";import"./index-CHu6DZJV.js";import"./index-Bqnvhu8P.js";import"./index-CROvrDHc.js";const Z={class:"flex flex-column absolute top-0 left-0 border-0 w-full"},tt={class:"card"},et={key:0},at={key:0,style:{color:"green",display:"flex","align-items":"center"}},ot={key:1,style:{color:"red",display:"flex","align-items":"center"}},nt={key:2,style:{color:"gray",display:"flex","align-items":"center"}},rt={key:1,class:"card"},Mt={__name:"MonthRates",setup(lt){const F=P(),d=i(new Date().getMonth()+1),l=i(new Date().getFullYear()),m=i([]),f=i(String(d.value).padStart(2,"0")),h=i(["normal","pie","bar"][0]),_=i(),D=()=>{getComputedStyle(document.body);const a=()=>`#${Math.floor(Math.random()*16777215).toString(16).padStart(6,"0")}`,t=m.value.length,e=Array.from({length:t},()=>a()),s=e.map(r=>{let k=r.substring(1),g=parseInt(k,16),w=Math.min((g>>16)+30,255),v=Math.min((g>>8&255)+30,255),C=Math.min((g&255)+30,255);return`rgb(${w},${v},${C})`});return{labels:m.value.map(r=>r.name),datasets:[{label:"",data:m.value.map(r=>r.range),backgroundColor:e,hoverBackgroundColor:s}]}},M=i(Array.from({length:l.value-2024+1},(a,t)=>{const e=2024+t;return{label:String(e),command:()=>B(e)}}));function B(a){console.log("切换到年份:",a),l.value=a}function A(a,t){const e=`${a}-${String(t).padStart(2,"0")}`,s=`${a}-${String(t).padStart(2,"0")}`;return{startDate:e,endDate:s}}function $(a,t){const{startDate:e,endDate:s}=A(a,t);console.log("start end: ",e,s),T.dataAnalizeApi.getTopRanteDishesByDate(e,s,r=>{console.log("res: ",r),r.success?(m.value=r.data,_.value=D()):console.log("error: ",r.data)})}K(()=>{$(l.value,d.value)});function N(a){f.value=a,d.value=Number(a),$(l.value,d.value)}const V=i(Array.from({length:12},(a,t)=>{const e=String(t+1).padStart(2,"0");return{title:`${e}月`,value:e}})),R=()=>{$(l.value,d.value)};function Y(){f.value=null;const a=`${l.value}-01-01`,t=`${l.value}-12-31`;T.dataAnalizeApi.getTopDishesByDate(a,t,e=>{e.success?(m.value=e.data,_.value=D()):console.log("error: ",e.data)})}function L(){F.push("/")}return(a,t)=>{const e=J,s=G,r=q,k=U,g=I,w=H,v=O,C=E,j=z;return u(),p("div",Z,[n(s,{style:{height:"4rem"},class:"flex align-content-center bg-primary text-white"},{start:c(()=>[n(e,{icon:"pi pi-arrow-left",class:"mr-2 text-center",onClick:t[0]||(t[0]=o=>L())})]),center:c(()=>[n(e,{icon:"pi pi-align-justify",onClick:t[1]||(t[1]=o=>h.value="normal"),class:"text-white"}),n(e,{icon:"pi pi-chart-bar",onClick:t[2]||(t[2]=o=>h.value="bar"),class:"text-white"})]),_:1}),y("div",tt,[n(w,{scrollable:"",value:f.value,"onUpdate:value":t[3]||(t[3]=o=>f.value=o)},{default:c(()=>[n(g,null,{default:c(()=>[n(r,{label:`当年销售额:${l.value}`,model:M.value,onClick:Y},null,8,["label","model"]),(u(!0),p(Q,null,W(V.value,o=>(u(),X(k,{key:o.title,value:o.value,onClick:it=>N(o.value)},{default:c(()=>[b(x(o.title),1)]),_:2},1032,["value","onClick"]))),128))]),_:1})]),_:1},8,["value"])]),h.value==="normal"?(u(),p("div",et,[n(C,{value:m.value,sortMode:"multiple",tableStyle:"min-width: 50rem",paginator:"",rows:10,rowsPerPageOptions:[10,20,50]},{paginatorstart:c(()=>[n(e,{type:"button",icon:"pi pi-refresh",text:"",onClick:R})]),default:c(()=>[n(v,{field:"id",header:"编号",sortable:"",style:{width:"25%"}}),n(v,{field:"name",header:"名字",sortable:"",style:{width:"25%"}}),n(v,{field:"range",header:"评分变动",sortable:"",style:{width:"25%"}},{body:c(o=>[o.data.range>0?(u(),p("span",at,[t[4]||(t[4]=y("i",{class:"pi pi-arrow-up",style:{"margin-right":"0.25rem"}},null,-1)),b(" "+x(o.data.range),1)])):o.data.range<0?(u(),p("span",ot,[t[5]||(t[5]=y("i",{class:"pi pi-arrow-down",style:{"margin-right":"0.25rem"}},null,-1)),b(" "+x(Math.abs(o.data.range)),1)])):(u(),p("span",nt,t[6]||(t[6]=[y("i",{class:"pi pi-minus",style:{"margin-right":"0.25rem"}},null,-1),b(" 0 ",-1)])))]),_:1})]),_:1},8,["value"])])):S("",!0),h.value==="bar"?(u(),p("div",rt,[n(j,{type:"bar",data:_.value},null,8,["data"])])):S("",!0)])}}};export{Mt as default};
