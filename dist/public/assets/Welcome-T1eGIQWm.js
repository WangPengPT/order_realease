import{s as ke,a as Ce,b as Pe,c as $e,d as Ie,e as Ne,f as Be}from"./primevue-_QN95vq9.js";import{_ as Se,P as Ae}from"./pagination-BO-ad-kk.js";import{S as Fe,a as Le}from"./pagination-BQSAUmfl.js";import{O as ee,r as v,y as P,w as Me,o as te,n as Oe,P as Ve,Q as De,R as Re,c as n,z as i,e as s,s as $,q as u,v as E,t as c,S as f,F as x,E as I,j as R,d as a,p as T,h as z}from"./vue-CYwjs0iE.js";import{c as l,C as Te,a as M,m as ze}from"./index-ZqyYksQE.js";import{_ as Ee}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-DYQJwaLu.js";const Ue=["src"],je=["onClick"],qe=["src"],Ge={class:"absolute top-0 border-0 right-0 p-2 flex flex-column flex align-items-center"},He={key:0},Qe={class:"m-3 max-w-screen"},We={class:E(["w-full","p-4"])},Xe=["src"],Je={key:0,class:"text-center p-1"},Ke={key:1,class:"text-center p-1"},Ye={class:"flex flex-column justify-center"},Ze={key:0,class:"text-center"},et={key:1,class:"text-center"},tt={class:"flex w-full"},st={class:"flex flex-column"},lt={class:"w-full text-sm break-words px-2",style:{"white-space":"pre-wrap"}},ot=["src"],at={key:0,class:"flex justify-content-end"},nt={class:"flex flex-row"},it={class:"underline text-blue-600 text-sm"},rt={class:"pt-3 pb-3"},ut={class:"flex flex-row gap-2"},ct={class:"border-400 border-round border-1 p-3"},dt={class:"text-center font-bold"},mt={key:0,class:"w-full overflow-hidden"},pt=["src"],ft={class:"w-full overflow-hidden",style:{"aspect-ratio":"2 / 1.5"}},vt=["src"],_t={class:"font-bold"},gt={class:"flex flex-column"},ht={class:"flex flex-row justify-content-between w-full"},xt={key:0,class:"fixed right-0 bottom-0 p-4",style:{"z-index":"2"}},bt={class:"mt-2"},wt={class:"flex justify-content-end mt-2"},yt={__name:"Welcome",setup(kt){const b=[{label:"pt",imagePath:"flags/pt.png"},{label:"en",imagePath:"flags/en.png"},{label:"zh",imagePath:"flags/zh.png"}],U=Re(),se=De(),{locale:w}=ee(),{t:m}=ee(),_=v(null),N=v(!0),j=v(),q=v(""),le=P(()=>l.getShopInfo("restaurantName")),d=v(void 0),O=P(()=>l.shopInfo.value.instagramUrl);function oe(){const e=M.getCookie("language");e&&(w.value=e)}let g=null;Me(()=>[l.currentPage.value,l.addr.value],([e,t])=>{var r,F,L;d.value=e,(F=(r=d.value)==null?void 0:r.data)!=null&&F.logoPath&&((L=d.value)!=null&&L.imagesPath)&&(q.value=l.pathFormated(d.value.data.logoPath.src,d.value.imagesPath))},{immediate:!0}),te(async()=>{var e;await Oe(),g=new IntersectionObserver(t=>{t.forEach(r=>{N.value=r.isIntersecting})},{threshold:.1}),(e=_.value)!=null&&e.$el&&g.observe(_.value.$el)}),te(async()=>{var e;l.params=l.getQueryParams(),l.params.table?l.params.table=Te.SimpleDecode(l.params.table):l.params.table=void 0,oe(),l.initMenu(!0),g=new IntersectionObserver(t=>{t.forEach(r=>{r.isIntersecting?N.value=!0:N.value=!1})},{threshold:.1}),(e=_.value)!=null&&e.$el&&g.observe(_.value.$el)}),Ve(()=>{var e;g&&((e=_.value)!=null&&e.$el)&&g.unobserve(_.value.$el)});const ae=P(()=>{const e="/";switch(w.value.toLowerCase()){case"pt":return e+b[0].imagePath;case"en":return e+b[1].imagePath;case"zh":return e+b[2].imagePath;default:return e+b[1].imagePath}});function h(e){return e[`text_${w.value.toLowerCase()}`]}const ne=Date.now(),G=M.getCookie("login_time");let V;G&&(V=JSON.parse(G));const ie=P(()=>b.filter(e=>e.label!==w.value.toLowerCase()).map(e=>({...e,command:()=>{w.value=e.label,re(e.label)}})));function re(e){M.setCookie("language",e)}function B(e){typeof e=="string"&&/^(https?:\/\/)/i.test(e)?window.open(e,"_blank"):console.warn("无效的 URL:",e)}function ue(){B(O.value)}const ce=e=>{j.value.toggle(e)};V&&(ne-V>60*5*1e3?M.clearAllCookies():D());function D(){const e=se.query.table;if(!l.permissionsControl.value.order||!l.settings.value.order){ze.show_warn(m("notification.orderClosed"));return}U.push({path:"/table",query:{table:e}})}function de(){l.currentTableId.value=void 0,l.params.table=void 0,U.push("/takeReserve")}const me=P(()=>[{label:m("common.options"),items:[{label:m("common.pay"),icon:"pi pi-wallet",command:()=>{pe()}},{label:m("common.call"),icon:"pi pi-user-plus",command:()=>{l.send_cmd(l.getTable(),{cmd:"call"},e=>{e.success?MsgBox.show_info(m("notification.call_msg")):MsgBox.show_info(e.data)})}}]}]);function H(e){return d.value.data.options[e]?"font-bold":""}const S=v(!1),A=v(),y=v();function pe(){S.value=!0}function fe(){e(A.value)?l.send_cmd(l.getTable(),{cmd:"pay",nif:A.value,note:y.value},t=>{t.success?(MsgBox.show_info(m("notification.pay_msg")),S.value=!1):MsgBox.show_error(m("common.failed"))}):MsgBox.show_warn(m("notification.cancel_msg"));function e(t){return!t||t.toString().length===9||t.toString().length===0}}function ve(){y.value&&(y.value=void 0)}return(e,t)=>{var Q,W,X,J,K,Y;const r=Ce,F=ke,L=Pe,_e=R("AccordionHeader"),ge=R("AccordionContent"),he=R("AccordionPanel"),xe=$e,be=Ne,we=Be,ye=Ie;return a(),n(x,null,[i(F,{model:ie.value,direction:"down",transitionDelay:80,class:"absolute top-0 left-0 border-0"},{button:u(({toggleCallback:o})=>[i(r,{outlined:"",onClick:o,class:"custom-clean-button"},{default:u(()=>[s("img",{src:ae.value,style:{width:"38px",height:"38px"}},null,8,Ue)]),_:2},1032,["onClick"])]),item:u(({item:o,toggleCallback:k})=>[s("div",{class:"flex flex-col items-center justify-between",onClick:k},[s("img",{src:o.imagePath,alt:"lang",style:{width:"38px",height:"38px"}},null,8,qe)],8,je)]),_:1},8,["model"]),s("div",Ge,[s("div",null,[i(r,{icon:"pi pi-bell",rounded:"","aria-label":"Filter",onClick:ce,"aria-haspopup":"true","aria-controls":"overlay_menu",size:"small",style:{width:"42px",height:"42px"}}),i(L,{ref_key:"menu",ref:j,id:"overlay_menu",model:me.value,popup:!0},null,8,["model"])]),O.value&&O.value.trim()!==""?(a(),n("div",He,[i(r,{icon:"pi pi-instagram",class:"custom-clean-button",onClick:ue})])):$("",!0)]),s("div",Qe,[s("div",We,[s("img",{src:q.value,alt:"Logo",class:"max-w-6rem h-auto w-full mx-auto block"},null,8,Xe),(W=(Q=d.value)==null?void 0:Q.data)!=null&&W.restaurantName?(a(),n("h3",Je,c((J=(X=d.value)==null?void 0:X.data)==null?void 0:J.restaurantName),1)):(a(),n("h3",Ke,c(le.value),1)),s("div",Ye,[f(l).testEnvironment.value?(a(),n("h2",Ze,c("DEMO"))):$("",!0),f(l).testEnvironment.value?(a(),n("span",et,c(f(m)("home.demoDescription")),1)):$("",!0)])]),s("div",tt,[i(xe,{class:"w-full max-w-xl mx-auto"},{default:u(()=>{var o,k;return[(a(!0),n(x,null,I((k=(o=d.value)==null?void 0:o.data)==null?void 0:k.titles,(p,Z)=>(a(),T(he,{value:Z},{default:u(()=>[i(_e,null,{default:u(()=>[z(c(h(p.title)),1)]),_:2},1024),i(ge,{class:"p-1"},{default:u(()=>[s("div",st,[s("div",lt,c(h(p.description)),1),s("img",{src:f(l).pathFormated(p.image.src,d.value.imagesPath),class:"max-w-5rem h-auto block mr-auto p-1 invert-image"},null,8,ot),p.title.text_zh.includes("怎么获得学生优惠")?(a(),n("div",at,[i(r,{onClick:t[0]||(t[0]=C=>B("https://xiaoxiongmarket.com/activity/29ca8401-6cd5-4bac-94f8-d5511c463e26")),text:""},{default:u(()=>[s("div",nt,[s("span",it,c(f(m)("home.eventPage")),1),t[10]||(t[10]=s("i",{class:"pi pi-external-link text-blue-600 text-sm p-1"},null,-1))])]),_:1})])):$("",!0)])]),_:2},1024)]),_:2},1032,["value"]))),256))]}),_:1})]),s("div",rt,[s("div",ut,[i(r,{onClick:t[1]||(t[1]=o=>D()),class:"w-full font-bold",style:{"border-radius":"20px"},ref_key:"orderButtonRef",ref:_},{default:u(()=>[z(c(e.$t("common.eatHere")),1)]),_:1},512),i(r,{onClick:t[2]||(t[2]=o=>de()),class:"w-full font-bold",style:{"border-radius":"20px"}},{default:u(()=>[z(c(e.$t("common.takeOrReserve")),1)]),_:1})])]),(a(!0),n(x,null,I((Y=(K=d.value)==null?void 0:K.data)==null?void 0:Y.frames,(o,k)=>(a(),n("div",null,[s("div",ct,[(a(!0),n(x,null,I(o,(p,Z)=>(a(),n("div",null,[s("h1",dt,c(h(p.title)),1),p.images.length<=1?(a(),n("div",mt,[s("img",{src:f(l).pathFormated(p.images[0].src,d.value.imagesPath),class:"w-full"},null,8,pt)])):(a(),T(f(Le),{key:1,"slides-per-view":1,loop:!0,class:"w-full",modules:[f(Ae)],pagination:{clickable:!0}},{default:u(()=>[(a(!0),n(x,null,I(p.images,(C,Ct)=>(a(),T(f(Fe),null,{default:u(()=>[s("div",ft,[s("img",{src:f(l).pathFormated(C.src,d.value.imagesPath),class:"w-full h-full",style:{"object-fit":"cover"}},null,8,vt)])]),_:2},1024))),256))]),_:2},1032,["modules"])),s("h4",_t,c(h(p.subtitle)),1),(a(!0),n(x,null,I(p.descriptions,C=>(a(),n("div",null,[s("div",gt,[s("div",ht,[s("span",{class:E([H(0),"break-words text-left"]),style:{"white-space":"pre-wrap"}},c(h(C.left)),3),s("span",{class:E([H(1),"break-words text-right"]),style:{"white-space":"pre-wrap"}},c(h(C.right)),3)])])]))),256))]))),256))]),t[11]||(t[11]=s("div",{class:"p-4"},null,-1))]))),256))]),s("div",{class:"absoluto top-0 text-center text-xs p-2 underline cursor-pointer",onClick:t[3]||(t[3]=o=>B("https://5am3eq-wc.myshopify.com/"))}," ©2025 XIAOXIONG® v1.1.114 "),s("div",{class:"absoluto top-0 text-center text-xs p-2",onClick:t[4]||(t[4]=o=>B("https://5am3eq-wc.myshopify.com/"))},t[12]||(t[12]=[s("img",{src:Se,style:{width:"7rem"}},null,-1)])),N.value?$("",!0):(a(),n("div",xt,[i(r,{rounded:"","aria-label":"Star",onClick:t[5]||(t[5]=o=>D()),class:"w-full font-bold p-button-lg shadow-6"},{default:u(()=>t[13]||(t[13]=[s("span",{class:"material-icons text-5xl"},"restaurant",-1)])),_:1,__:[13]})])),i(ye,{visible:S.value,"onUpdate:visible":t[9]||(t[9]=o=>S.value=o),header:"结账",class:"flex flex-column",modal:!0,dismissableMask:!0,onHide:ve},{default:u(()=>[s("div",null,[t[14]||(t[14]=s("label",null,"NIF:",-1)),i(be,{modelValue:A.value,"onUpdate:modelValue":t[6]||(t[6]=o=>A.value=o),inputId:"withoutgrouping",useGrouping:!1,fluid:"",class:"w-full m-1"},null,8,["modelValue"])]),s("div",bt,[s("label",null,c(e.$t("common.note"))+":",1),i(we,{type:"text",modelValue:y.value,"onUpdate:modelValue":t[7]||(t[7]=o=>y.value=o),class:"w-full m-1"},null,8,["modelValue"])]),s("div",wt,[i(r,{label:f(m)("common.send"),onClick:t[8]||(t[8]=o=>fe())},null,8,["label"])])]),_:1},8,["visible"])],64)}}},Ft=Ee(yt,[["__scopeId","data-v-f1040177"]]);export{Ft as default};
