import{s as A}from"./index-DdKMzNyn.js";import{s as E}from"./index-ISK4nhHP.js";import{b as k}from"./index-DBEuPXgb.js";import{q as C,j as V,h as _,s as B,f as D,o as b,w as M,a,d as s,l as m,t as P,x as L,u as q,c as w,F as $,E as F,n as f}from"./index-CR4ehUtA.js";import{s as I}from"./index-DW54tKiR.js";import{s as N}from"./index-BUbn9mFe.js";import{_ as S}from"./main-C8Q1gxG8.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-BpRYCbz2.js";import"./index-BiWO65Yw.js";import"./index-Dp3Dpuv2.js";const H={class:"relative"},T={class:"absolute bottom-0 surface-800 left-0 w-full p-3 bg-black bg-opacity-50 text-white"},z={class:"text-xl font-semibold"},O={class:"text-sm"},R={class:"flex justify-content-end"},W={__name:"EditablePageCard",props:{page:Object},emits:[],setup(g,{emit:e}){const{t:p}=C(),l=V(),i=g,r=e;function u(n){l.push(`/editablePages/${n}`)}function x(){r("deletePage",i.page.id)}function h(){r("applypage",i.page.id)}const v=_(),c=B(()=>[{label:p("optionPages.option"),items:[{label:p("optionPages.apply"),icon:"pi pi-check-square",command:h},{label:p("common.delete"),icon:"pi pi-times",command:x}]}]),t=n=>{v.value.toggle(n)};return(n,d)=>{const y=k,o=N,j=I;return b(),D(j,{style:{width:"250px"},class:"relative"},{header:M(()=>[s(y,{type:"button",icon:"pi pi-ellipsis-v",class:"absolute top-2 right-0 z-5",onClick:t,"aria-haspopup":"true","aria-controls":"overlay_menu"}),s(o,{ref_key:"menu",ref:v,model:c.value,popup:!0},null,8,["model"]),a("div",H,[d[1]||(d[1]=a("img",{src:S,style:{width:"100%",height:"150px","object-fit":"cover"}},null,-1)),a("div",T,[a("div",z,P(g.page.name),1),a("div",O,P(g.page.description),1)])])]),footer:M(()=>[a("div",R,[s(y,{label:m(p)("common.edit"),text:"",onClick:d[0]||(d[0]=ae=>u(g.page.id))},null,8,["label"])])]),_:1})}}},G={class:"p-4"},J={class:"flex flex-wrap gap-4"},K={class:"flex justify-center"},Q={class:"flex items-center gap-4 mb-4"},X={for:"name",class:"font-semibold w-24"},Y={class:"flex items-center gap-4 mb-8"},Z={for:"description",class:"font-semibold w-24"},ee={class:"flex justify-end gap-2"},te={__name:"EditablePages",setup(g){const{t:e}=C(),p=L(),l=q(),i=_(""),r=_(""),u=_(!1);async function x(){if(!i.value.trim()){l.add({severity:"warn",summary:e("common.error"),detail:e("optionPages.enterNameMsg"),life:3e3});return}await f.pageApi.addPage(i.value,r.value),await f.pageApi.getPages(),u.value=!1,i.value="",r.value=""}function h(c){p.require({message:e("optionPages.deletePageMsg"),header:e("optionPages.deletePageHeader"),icon:"pi pi-exclamation-triangle",acceptLabel:e("common.delete"),rejectLabel:e("common.cancel"),acceptClass:"p-button-danger",accept:async()=>{try{await f.pageApi.deletePage(c),l.add({severity:"success",summary:e("optionPages.deletedMsg"),detail:e("optionPages.deleteSucMsg"),life:3e3})}catch(t){l.add({severity:"error",summary:e("optionPages.notDeletedMsg"),detail:t.message||e("optionPages.serverErrorMsg"),life:3e3})}},reject:()=>{l.add({severity:"info",summary:e("optionPages.cancelMsg"),detail:e("optionPages.operationCancelMsg"),life:3e3})}})}function v(c){p.require({message:e("optionPages.applyPageMsg"),header:e("optionPages.applyPageHeader"),icon:"pi pi-exclamation-triangle",acceptLabel:e("common.confirm"),rejectLabel:e("common.cancel"),accept:async()=>{try{await f.pageApi.applyWelcomePage(c),l.add({severity:"success",summary:e("optionPages.applyMsg"),detail:e("optionPages.applySucMsg"),life:3e3})}catch(t){l.add({severity:"error",summary:e("optionPages.applyFailMsg"),detail:t.message||e("optionPages.serverErrorMsg"),life:3e3})}},reject:()=>{console.log("取消应用")}})}return(c,t)=>{const n=k,d=E,y=A;return b(),w($,null,[a("div",G,[a("div",J,[(b(!0),w($,null,F(m(f).pageApi.pages.value,o=>(b(),w("div",{key:o.title},[s(W,{page:o,onDeletePage:h,onApplypage:v},null,8,["page"])]))),128)),a("div",K,[s(n,{style:{width:"200px",height:"200px"},icon:"pi pi-plus",onClick:t[0]||(t[0]=o=>u.value=!0)})])])]),s(y,{visible:u.value,"onUpdate:visible":t[4]||(t[4]=o=>u.value=o),modal:"",header:m(e)("optionPages.createPage"),style:{width:"25rem"}},{default:M(()=>[a("div",Q,[a("label",X,P(m(e)("optionPages.name")),1),s(d,{id:"name",class:"flex-auto",modelValue:i.value,"onUpdate:modelValue":t[1]||(t[1]=o=>i.value=o),autocomplete:"off"},null,8,["modelValue"])]),a("div",Y,[a("label",Z,P(m(e)("optionPages.description")),1),s(d,{id:"description",class:"flex-auto",modelValue:r.value,"onUpdate:modelValue":t[2]||(t[2]=o=>r.value=o),autocomplete:"off"},null,8,["modelValue"])]),a("div",ee,[s(n,{type:"button",label:m(e)("common.cancel"),severity:"secondary",onClick:t[3]||(t[3]=o=>c.visible=!1)},null,8,["label"]),s(n,{type:"button",label:m(e)("common.save"),onClick:x},null,8,["label"])])]),_:1},8,["visible","header"])],64)}}},ge=U(te,[["__scopeId","data-v-59608820"]]);export{ge as default};
