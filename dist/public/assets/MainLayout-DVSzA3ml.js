import{b as V,c as z,R as A}from"./index-BDCK0oxM.js";import{s as E,a as G}from"./index-C83mhuAS.js";import{s as F}from"./index-Dp8bMity.js";import{s as X}from"./index-C0jJ4zw5.js";import{s as Q}from"./index-Dz40cSll.js";import{u as U,q as w,i as W,s as u,j as H,x as J,h as K,p as a,n as r,c as b,o as d,d as s,a as n,w as h,y as Y,m as Z,f as ee,e as te,z as ae,t as oe,F as ne,l as se,R as ie}from"./index-DwjZimQ8.js";import"./index-DVoWyuDo.js";import"./index-BDTo8gTE.js";import"./index-DpYzxm2a.js";import"./index-CUcSJe8s.js";import"./index-B5sTOHeQ.js";import"./index-BfvY6j-N.js";import"./index-C2lJ9uAK.js";import"./index-SM29VhVf.js";const le="/XIAOXIONG_LOGO.png",re={class:"w-full shadow-2 bg-primary"},pe={class:"flex flex-row justify-content-start"},ce={class:"flex align-items-center justify-content-center"},me=["src"],ue=["onClick"],he=["src"],de={class:"unchange_white_text_button"},ge={__name:"TopBar",setup(x){const g=U(),{t:e}=w(),{locale:l}=w();let c=0,f=null;const p=[{label:"pt",imagePath:"flags/pt.png"},{label:"en",imagePath:"flags/en.png"},{label:"zh",imagePath:"flags/zh.png"}];W(()=>{const o=localStorage.getItem("mg_language");o&&(l.value=o)});const B=u(()=>{switch(l.value.toLowerCase()){case"pt":return"/"+p[0].imagePath;case"en":return"/"+p[1].imagePath;case"zh":return"/"+p[2].imagePath;default:return"/"+p[1].imagePath}}),P=u(()=>p.filter(o=>o.label!==l.value.toLowerCase()).map(o=>({...o,command:()=>{l.value=o.label,C(o.label)}})));function C(o){localStorage.setItem("mg_language",o)}const t=H(),k=J(),v=K(),S=u(()=>[{label:e("topBar.options"),items:[{label:e("topBar.takeawayWilcome"),icon:"pi pi-home",command:()=>{window.open(window.env.ADDR+"/takeReserve","_blank")}},{label:e("topBar.uploadMenu"),icon:"pi pi-file-import",command:()=>{t.push(a.mainPath.updateMenu.path)}},{label:e("topBar.menuSorting"),icon:"pi pi-tag",command:()=>{t.push(a.mainPath.menuTags.path)}},{label:e("topBar.dishRating"),icon:"pi pi-star",command:()=>{t.push(a.monthRates.path)}},{label:e("topBar.dishSales"),icon:"pi pi-hashtag",command:()=>{t.push(a.orderQuantity.path)}},{label:e("topBar.pageEditing"),icon:"pi pi-file-edit",command:()=>{t.push(a.mainPath.editablePages.path)}},{label:e("topBar.customDishEdit"),icon:"pi pi-pen-to-square",command:()=>{t.push(a.mainPath.editCustomeDish.path)}},{label:e("topBar.printer"),icon:"pi pi-print",command:()=>{t.push(a.mainPath.printers.path)}},{label:e("topBar.qrCode"),icon:"pi pi-qrcode",command:()=>{t.push(a.mainPath.qcode.path)}},{label:e("topBar.settings"),icon:"pi pi-cog",command:()=>{t.push(a.mainPath.settings.path)}},{label:e("topBar.help"),icon:"pi pi-question",command:()=>{t.push(a.helpAndManual.path)}},{label:e("topBar.signOut"),icon:"pi pi-sign-out",command:()=>{R()}}]}]),D=o=>{v.value.toggle(o)};function M(){c++,clearTimeout(f),c===20&&(c=0,r.developerMode.value=!r.developerMode.value,r.developerMode.value?g.add({severity:"success",summary:e("common.success"),detail:"开发者模式开启",life:1e3}):g.add({severity:"success",summary:e("common.success"),detail:"开发者模式关闭",life:1e3})),f=setTimeout(()=>{c=0},1e3)}const O=u(()=>[{label:e("topBar.home"),icon:"pi pi-home",command:()=>{t.push(a.mainPath.path),M()}},{label:e("topBar.orders"),icon:"pi pi-receipt",command:()=>{t.push(a.mainPath.order.path)},badge:r.getNewOrderCountValue("order")},{label:e("topBar.menu"),icon:"pi pi-book",command:()=>{t.push(a.mainPath.menu.path)}},{label:e("topBar.tables"),icon:"pi pi-table",command:()=>{t.push(a.mainPath.tables.path)}},{label:e("topBar.takeout"),icon:"pi pi-shopping-bag",command:()=>{t.push(a.mainPath.takeaways.path)},badge:r.getNewOrderCountValue("takeaway")},{label:e("topBar.reserver"),icon:"pi pi-calendar",command:()=>{t.push(a.mainPath.reserver.path)},badge:r.getNewOrderCountValue("reserves")}]);function R(){k.require({message:"确认登出您的账号?",header:"登出账号",icon:"pi pi-exclamation-triangle",rejectProps:{label:"取消登出",severity:"secondary",outlined:!0},acceptProps:{label:"确认登出",severity:"danger"},accept:()=>{localStorage.removeItem("loggedIn"),localStorage.removeItem("loginDate"),t.replace("/login")},reject:()=>{}})}return(o,m)=>{const $=Q,y=V,j=X,I=E,L=z,N=F,T=G,q=A;return d(),b(ne,null,[s($),n("div",re,[n("div",pe,[n("div",ce,[s(y,{type:"button",icon:"pi pi-bars",onClick:D,"aria-haspopup":"true","aria-controls":"overlay_menu",class:"text-white bg-transparent",text:""}),m[0]||(m[0]=n("img",{src:le,class:"max-w-9rem p-1"},null,-1)),m[1]||(m[1]=n("span",{class:"text-lg font-bold",style:{color:"aliceblue"}},"SaaS System",-1)),s(j,{ref_key:"menu",ref:v,id:"overlay_menu",model:S.value,popup:!0},null,8,["model"])]),s(I,{model:P.value,direction:"left",transitionDelay:80,class:"ml-auto mr-3 border-0"},{button:h(({toggleCallback:i})=>[s(y,{outlined:"",onClick:i,text:"",class:"bg-transparent"},{default:h(()=>[n("img",{src:B.value,style:{width:"32px",height:"32px"}},null,8,me)]),_:2},1032,["onClick"])]),item:h(({item:i,toggleCallback:_})=>[n("div",{class:"flex flex-col items-center justify-between",onClick:_},[n("img",{src:i.imagePath,alt:"lang",style:{width:"32px",height:"32px"}},null,8,he)],8,ue)]),_:1},8,["model"])]),s(N,{model:O.value,class:"justify-content-center bg-primary border-none primary-color",breakpoint:"435px"},{item:h(({item:i,props:_})=>[Y((d(),b("a",Z({class:"flex flex-column justify-content-center align-items-center"},_.action),[n("span",{class:ae([i.icon,"unchange_white_text_button"])},null,2),n("span",de,oe(i.label),1),i.badge?(d(),ee(L,{key:0,value:i.badge,severity:"danger",class:"absolute top-0 right-0 transform translate-x-1/4 -translate-y-1/3",style:{"font-size":"0.7rem",height:"16px","min-width":"16px"}},null,8,["value"])):te("",!0)],16)),[[q]])]),_:1},8,["model"])]),s(T)],64)}}},_e={class:"fixed top-0 right-0 left-0 h-full w-full"},be={class:"w-full",style:{height:"calc(100dvh - 150px)"}},$e={__name:"MainLayout",setup(x){return(g,e)=>{const l=ge;return d(),b("div",_e,[s(l),n("div",be,[s(se(ie))])])}}};export{$e as default};
