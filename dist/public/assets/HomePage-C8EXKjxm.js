import{v as Ae,B as ye,x as Te,y as qe,f as d,q as o,l as J,i as C,z as he,A as F,D as ke,h as a,t as c,n as re,u as fe,r as S,g as w,F as H,p as ee,k as n,j as B,E as Pe,a as T,s as be,m as ae,e as tt,G as bt,H as gt,c as pe,I as we,J as yt,R as at,K as Re,L as _t,M as Ve,N as kt,O as De,P as wt,Q as Je,S as Be,T as xt,U as $t,V as Se,o as st,w as Tt,b as Ct,W as It,d as Dt}from"./index-0BcR1Yhq.js";import{s as ge,a as nt}from"./index-CKXFgt7w.js";import{s as M,a as ot}from"./index-COHnrt3v.js";import{D as Y,c as ne,s as Ge}from"./index-DbCyw0Fd.js";import{_ as Ce,b as Me,c as je,a as Fe,s as He}from"./_plugin-vue_export-helper-DL4JqPYj.js";import{s as St}from"./index-C9KSsS6E.js";import{s as Xe,a as Nt}from"./index-CKP2vp2I.js";import{c as te}from"./cookie-DEduTsxr.js";import{s as Pt}from"./index-BFur9oDb.js";import{s as Ye}from"./index-BQ_7WwrA.js";import{s as Bt}from"./index-CAVkNYew.js";var At=Ae`
    .p-tag {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        background: dt('tag.primary.background');
        color: dt('tag.primary.color');
        font-size: dt('tag.font.size');
        font-weight: dt('tag.font.weight');
        padding: dt('tag.padding');
        border-radius: dt('tag.border.radius');
        gap: dt('tag.gap');
    }

    .p-tag-icon {
        font-size: dt('tag.icon.size');
        width: dt('tag.icon.size');
        height: dt('tag.icon.size');
    }

    .p-tag-rounded {
        border-radius: dt('tag.rounded.border.radius');
    }

    .p-tag-success {
        background: dt('tag.success.background');
        color: dt('tag.success.color');
    }

    .p-tag-info {
        background: dt('tag.info.background');
        color: dt('tag.info.color');
    }

    .p-tag-warn {
        background: dt('tag.warn.background');
        color: dt('tag.warn.color');
    }

    .p-tag-danger {
        background: dt('tag.danger.background');
        color: dt('tag.danger.color');
    }

    .p-tag-secondary {
        background: dt('tag.secondary.background');
        color: dt('tag.secondary.color');
    }

    .p-tag-contrast {
        background: dt('tag.contrast.background');
        color: dt('tag.contrast.color');
    }
`,qt={root:function(t){var s=t.props;return["p-tag p-component",{"p-tag-info":s.severity==="info","p-tag-success":s.severity==="success","p-tag-warn":s.severity==="warn","p-tag-danger":s.severity==="danger","p-tag-secondary":s.severity==="secondary","p-tag-contrast":s.severity==="contrast","p-tag-rounded":s.rounded}]},icon:"p-tag-icon",label:"p-tag-label"},Lt=ye.extend({name:"tag",style:At,classes:qt}),zt={name:"BaseTag",extends:Te,props:{value:null,severity:null,rounded:Boolean,icon:String},style:Lt,provide:function(){return{$pcTag:this,$parentInstance:this}}};function xe(e){"@babel/helpers - typeof";return xe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xe(e)}function Ot(e,t,s){return(t=Et(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Et(e){var t=Rt(e,"string");return xe(t)=="symbol"?t:t+""}function Rt(e,t){if(xe(e)!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var i=s.call(e,t);if(xe(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _e={name:"Tag",extends:zt,inheritAttrs:!1,computed:{dataP:function(){return qe(Ot({rounded:this.rounded},this.severity,this.severity))}}},Vt=["data-p"];function Mt(e,t,s,i,y,u){return o(),d("span",F({class:e.cx("root"),"data-p":u.dataP},e.ptmi("root")),[e.$slots.icon?(o(),J(ke(e.$slots.icon),F({key:0,class:e.cx("icon")},e.ptm("icon")),null,16,["class"])):e.icon?(o(),d("span",F({key:1,class:[e.cx("icon"),e.icon]},e.ptm("icon")),null,16)):C("",!0),e.value!=null||e.$slots.default?he(e.$slots,"default",{key:2},function(){return[a("span",F({class:e.cx("label")},e.ptm("label")),c(e.value),17)]}):C("",!0)],16,Vt)}_e.render=Mt;var jt=Ae`
    .p-avatar {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: dt('avatar.width');
        height: dt('avatar.height');
        font-size: dt('avatar.font.size');
        background: dt('avatar.background');
        color: dt('avatar.color');
        border-radius: dt('avatar.border.radius');
    }

    .p-avatar-image {
        background: transparent;
    }

    .p-avatar-circle {
        border-radius: 50%;
    }

    .p-avatar-circle img {
        border-radius: 50%;
    }

    .p-avatar-icon {
        font-size: dt('avatar.icon.size');
        width: dt('avatar.icon.size');
        height: dt('avatar.icon.size');
    }

    .p-avatar img {
        width: 100%;
        height: 100%;
    }

    .p-avatar-lg {
        width: dt('avatar.lg.width');
        height: dt('avatar.lg.width');
        font-size: dt('avatar.lg.font.size');
    }

    .p-avatar-lg .p-avatar-icon {
        font-size: dt('avatar.lg.icon.size');
        width: dt('avatar.lg.icon.size');
        height: dt('avatar.lg.icon.size');
    }

    .p-avatar-xl {
        width: dt('avatar.xl.width');
        height: dt('avatar.xl.width');
        font-size: dt('avatar.xl.font.size');
    }

    .p-avatar-xl .p-avatar-icon {
        font-size: dt('avatar.xl.icon.size');
        width: dt('avatar.xl.icon.size');
        height: dt('avatar.xl.icon.size');
    }

    .p-avatar-group {
        display: flex;
        align-items: center;
    }

    .p-avatar-group .p-avatar + .p-avatar {
        margin-inline-start: dt('avatar.group.offset');
    }

    .p-avatar-group .p-avatar {
        border: 2px solid dt('avatar.group.border.color');
    }

    .p-avatar-group .p-avatar-lg + .p-avatar-lg {
        margin-inline-start: dt('avatar.lg.group.offset');
    }

    .p-avatar-group .p-avatar-xl + .p-avatar-xl {
        margin-inline-start: dt('avatar.xl.group.offset');
    }
`,Ft={root:function(t){var s=t.props;return["p-avatar p-component",{"p-avatar-image":s.image!=null,"p-avatar-circle":s.shape==="circle","p-avatar-lg":s.size==="large","p-avatar-xl":s.size==="xlarge"}]},label:"p-avatar-label",icon:"p-avatar-icon"},Ht=ye.extend({name:"avatar",style:jt,classes:Ft}),Kt={name:"BaseAvatar",extends:Te,props:{label:{type:String,default:null},icon:{type:String,default:null},image:{type:String,default:null},size:{type:String,default:"normal"},shape:{type:String,default:"square"},ariaLabelledby:{type:String,default:null},ariaLabel:{type:String,default:null}},style:Ht,provide:function(){return{$pcAvatar:this,$parentInstance:this}}};function $e(e){"@babel/helpers - typeof";return $e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$e(e)}function Ze(e,t,s){return(t=Wt(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Wt(e){var t=Ut(e,"string");return $e(t)=="symbol"?t:t+""}function Ut(e,t){if($e(e)!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var i=s.call(e,t);if($e(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ke={name:"Avatar",extends:Kt,inheritAttrs:!1,emits:["error"],methods:{onError:function(t){this.$emit("error",t)}},computed:{dataP:function(){return qe(Ze(Ze({},this.shape,this.shape),this.size,this.size))}}},Qt=["aria-labelledby","aria-label","data-p"],Jt=["data-p"],Gt=["data-p"],Xt=["src","alt","data-p"];function Yt(e,t,s,i,y,u){return o(),d("div",F({class:e.cx("root"),"aria-labelledby":e.ariaLabelledby,"aria-label":e.ariaLabel},e.ptmi("root"),{"data-p":u.dataP}),[he(e.$slots,"default",{},function(){return[e.label?(o(),d("span",F({key:0,class:e.cx("label")},e.ptm("label"),{"data-p":u.dataP}),c(e.label),17,Jt)):e.$slots.icon?(o(),J(ke(e.$slots.icon),{key:1,class:re(e.cx("icon"))},null,8,["class"])):e.icon?(o(),d("span",F({key:2,class:[e.cx("icon"),e.icon]},e.ptm("icon"),{"data-p":u.dataP}),null,16,Gt)):e.image?(o(),d("img",F({key:3,src:e.image,alt:e.ariaLabel,onError:t[0]||(t[0]=function(){return u.onError&&u.onError.apply(u,arguments)})},e.ptm("image"),{"data-p":u.dataP}),null,16,Xt)):C("",!0)]})],16,Qt)}Ke.render=Yt;const Zt={class:"grid"},ea={class:"flex flex-column"},ta=["onClick"],aa={class:"p-1 flex-shrink-0 w-7rem h-7rem flex align-items-center justify-content-center overflow-hidden"},sa=["src","alt"],na={class:"flex flex-column justify-content-center"},oa={class:"font-bold"},ia={class:"flex flex-wrap gap-2"},la={class:"flex gap-1 align-items-center"},ra={class:"text-color-secondary line2"},ca={key:0,class:"text-xl font-bold text-primary"},ua={key:1,class:"flex align-items-center gap-1"},da={class:"text-l font-bold text-color-secondary"},pa={class:"text-sm line-through text-500"},fa={key:2,class:"flex gap-2 mr-2",id:"card-quantity"},va={class:"w-2rem text-xl text-center"},ha={key:3,class:"flex gap-2 mr-2"},ma={key:0,class:"m-2 mt-0"},ba={class:"flex flex-row justify-content-between align-content-center"},ga={class:"flex flex-column"},ya={class:"text-l font-bold"},_a={key:0,class:"text-l font-bold text-color-secondary"},ka={key:1,class:"flex align-items-center gap-1"},wa={class:"text-l font-bold text-color-secondary"},xa={class:"text-sm line-through text-500"},$a={key:0,class:"flex ml-2 mr-2"},Ta={class:"w-2rem text-xl text-center"},Ca={key:1,class:"flex gap-2 mr-3 pt-2 pb-2"},Ia={class:"max-w-5rem flex align-items-center"},Da={class:"font-bold whitespace-nowrap"},Sa={class:"mb-2 flex justify-content-center"},Na={class:"font-bold text-center"},Pa={class:"mb-2"},Ba={class:"text-color-secondary m-0 line-height-3 line2 text-center"},Aa={class:"mb-2"},qa={class:"flex justify-content-center"},La=["src","alt"],za={class:"flex align-items-center gap-2"},Oa=["src","alt"],Ea={class:"flex align-items-center gap-3 ml-auto"},Ra={__name:"DishList",props:{updateCartItemCount:{type:Function,required:!0},rateDish:{type:Function,required:!0},likedItemsRef:Array,dislikedItemsRef:Array},setup(e){const{t}=fe(),s=Y.dishes;let i={rated:!1,id:null,like:0,rate:0};function y(){var h;const k=T.currentPage.value,N=(h=k==null?void 0:k.data)==null?void 0:h.logoPath;return N?T.pathFormated(N,k.imagesPath):"/images/logo_logo.png"}const u=k=>{q.updateCartItemCount(k)},_=k=>{q.updateCartItemCount(-1)},E=k=>Y.dishDatas.value[k]?Y.dishDatas.value[k].quantity:0,I=k=>{if(!K())return!1;const N=k.quantity;let h=3;if(k.price>0&&(h=9),k.limit){const g=k.id,m=K(),b=(m.peopleType.adults+m.peopleType.children)*k.limit,D=m.order.find(f=>f.dishid==g);let r=0;if(k.subitem)for(const f of k.subitem){r+=E(f);const v=m.order.find(U=>U.dishid==G(f));v&&(r+=v.quantity)}else r+=k.quantity,D&&(r+=D.quantity);return N>=h||b&&r>=b}return N>=h},G=k=>Y.dishDatas.value[k]?Y.dishDatas.value[k].id:0,K=()=>T.getTableValue(),W=k=>{let N="absolute origin-top-left mt-1 ml-1 border-round-lg pl-1 pr-1 text-xs text-white font-bold ";switch(k){case"new":N+="bg-red-600";break;case"recommended":case"special":N+="bg-orange-600";break;default:N+="bg-blue-600"}return N};function O(){q.rateDish(i.id,i.like,i.rate,i.rated),i.id=null,i.like=0,i.rate=0,i.rated=!1}const L=k=>{const N=q.likedItemsRef.indexOf(k);if(i.id=k.id,N!==-1)q.likedItemsRef.splice(N,1),i.like+=-1,i.rate+=-1,i.rated=!1;else{i.rated=!0,q.likedItemsRef.push(k);const h=q.dislikedItemsRef.indexOf(k);h!==-1?(q.dislikedItemsRef.splice(h,1),i.like+=1):(i.like+=1,i.rate+=1)}},oe=k=>{const N=q.dislikedItemsRef.indexOf(k);if(i.id=k.id,N!==-1)q.dislikedItemsRef.splice(N,1),i.rate+=-1,i.rated=!1;else{i.rated=!0,q.dislikedItemsRef.push(k);const h=q.likedItemsRef.indexOf(k);h!==-1?(q.likedItemsRef.splice(h,1),i.like+=-1):i.rate+=1}},q=e,se=S(!1),j=S({}),z=k=>{se.value=!0,j.value=k},P=k=>{k.target.src="/images/default.png"};function V(k){ce(k.target,300)}function ie(k){ce(k.target,110)}function ce(k,N){const h=k.naturalWidth,g=k.naturalHeight,m=Math.min(h,N),b=m/h,D=g*b;k.style.width=`${m}px`,k.style.height=`${D}px`}return(k,N)=>(o(),d(H,null,[a("div",Zt,[(o(!0),d(H,null,ee(n(s),(h,g)=>{var m;return o(),d("div",{key:g,class:"col-12 sm:col-12 md:col-6 lg:col-4 border-round surface-section shadow-1 p-2"},[a("div",ea,[a("div",{class:re(["flex flex-row",h.subItems.length!==0?"flex-grow-1":""]),onClick:b=>z(h.dish)},[((m=h.dish.etiquette)==null?void 0:m.length)>0?(o(),d("div",{key:0,class:re(W(h.dish.etiquette))},c(n(t)("common.etiquette."+h.dish.etiquette)),3)):C("",!0),a("div",aa,[a("img",{src:h.dish.image||"/images/default.png",alt:h.dish.name,class:"w-full h-full",style:{"object-fit":"cover"},onError:P,onLoad:ie},null,40,sa)]),a("div",na,[a("div",oa,c(h.dish.name),1),a("div",null,[a("div",ia,[a("div",la,[(o(),d(H,null,ee(5,b=>a("i",{key:b,class:re(["pi invert-star",b<=Math.floor(h.dish.likes/h.dish.rates*5)?"pi-star-fill":b-.5<=h.dish.likes/h.dish.rates*5?"pi-star-half-fill":"pi-star"]),style:{color:"black"}},null,2)),64)),a("p",null,"("+c(h.dish.rates?h.dish.rates:0)+")",1)])])]),a("div",null,[a("p",ra,c(h.dish.note),1)])])],10,ta),h.subItems.length==0?(o(),d("div",{key:0,class:re(["flex ml-2 mr-2 mb-2",Number(h.dish.price)>0?"justify-content-between":"justify-content-end"])},[!h.dish.discount&&Number(h.dish.price)>0?(o(),d("span",ca,"€"+c(h.dish.price),1)):C("",!0),h.dish.discount?(o(),d("div",ua,[a("span",da,"€"+c(h.dish.dis_price),1),a("span",pa,"€"+c(h.dish.price),1),w(n(_e),{severity:"danger",value:"-"+h.dish.discount+"%"},null,8,["value"])])):C("",!0),h.dish.soldout?C("",!0):(o(),d("div",fa,[w(n(M),{icon:"pi pi-minus",rounded:"",disabled:h.dish.quantity<=0,onClick:b=>{h.dish.quantity--,_()},class:"w-2rem h-2rem"},null,8,["disabled","onClick"]),a("span",va,c(h.dish.quantity),1),w(n(M),{icon:"pi pi-plus",rounded:"",disabled:I(h.dish),onClick:b=>{h.dish.quantity++,u(1)},class:"w-2rem h-2rem"},null,8,["disabled","onClick"])])),h.dish.soldout?(o(),d("div",ha,[w(n(_e),{severity:"danger",value:k.$t("common.soldout")},null,8,["value"])])):C("",!0)],2)):C("",!0),h.subItems.length!==0?(o(!0),d(H,{key:1},ee(h.subItems,(b,D)=>(o(),d(H,{key:"index"},[b.disable?C("",!0):(o(),d("div",ma,[a("div",ba,[a("div",ga,[a("span",ya,c(b.subname),1),!b.discount&&b.price!=="0.00"&&b.price!=="0"?(o(),d("span",_a,"€"+c(b.price),1)):C("",!0),b.discount?(o(),d("div",ka,[a("span",wa,"€"+c(b.dis_price),1),a("span",xa,"€"+c(b.price),1),w(n(_e),{severity:"danger",value:"-"+b.discount+"%"},null,8,["value"])])):C("",!0)]),b.soldout?C("",!0):(o(),d("div",$a,[w(n(M),{icon:"pi pi-minus",rounded:"",disabled:b.quantity<=0,onClick:r=>{b.quantity--,_()},class:"w-2rem h-2rem"},null,8,["disabled","onClick"]),a("span",Ta,c(b.quantity),1),w(n(M),{icon:"pi pi-plus",rounded:"",onClick:r=>{b.quantity++,u(1)},class:"w-2rem h-2rem",disabled:I(b)},null,8,["onClick","disabled"])])),b.soldout?(o(),d("div",Ca,[w(n(_e),{severity:"danger",value:k.$t("common.soldout")},null,8,["value"])])):C("",!0)])]))],64))),128)):C("",!0)])])}),128))]),w(n(ge),{visible:se.value,"onUpdate:visible":N[2]||(N[2]=h=>se.value=h),modal:"",header:"dish",style:Pe([{width:"23rem"},{width:"80vw","max-width":"700px"}]),onHide:N[3]||(N[3]=h=>O())},{header:B(()=>[a("div",Ia,[w(n(Ke),{image:y(),class:"w-full"},null,8,["image"])]),a("span",Da,c(k.$t("common.details")),1)]),default:B(()=>[a("div",Sa,[a("span",Na,c(j.value.name),1)]),a("div",Pa,[a("span",Ba,c(j.value.note),1)]),a("div",Aa,[a("div",qa,[a("img",{class:"w-full h-auto object-contain",src:j.value.image,alt:j.value.name,onError:P,onLoad:V},null,40,La)])]),a("div",za,[(o(!0),d(H,null,ee(j.value.allergies,(h,g)=>(o(),d("img",{src:"images/"+h+".png",alt:h,class:"w-2rem h-2rem border-round flex-shrink-0",style:{"object-fit":"cover","min-width":"2rem"}},null,8,Oa))),256)),a("div",Ea,[a("button",{onClick:N[0]||(N[0]=h=>L(j.value)),class:"p-0 border-none bg-transparent cursor-pointer"},[a("i",{class:re(["pi pi-thumbs-up text-xl",q.likedItemsRef.includes(j.value)?"text-green-500":"text-gray-400"])},null,2)]),a("button",{onClick:N[1]||(N[1]=h=>oe(j.value)),class:"p-0 border-none bg-transparent cursor-pointer"},[a("i",{class:re(["pi pi-thumbs-down text-xl",q.dislikedItemsRef.includes(j.value)?"text-red-500":"text-gray-400"])},null,2)])])])]),_:1},8,["visible"])],64))}},Va=Ce(Ra,[["__scopeId","data-v-86dd9a2c"]]),Ma={key:0,class:"text-3xl font-bold"},ja={class:"flex flex-column gap-3 p-1"},Fa={key:0,class:"flex flex-column gap-1"},Ha={key:0,class:"m-0"},Ka={key:0,class:"m-0"},Wa={class:"flex justify-content-between gap-4 mt-1"},Ua={class:"flex align-items-center gap-2"},Qa=["src","alt"],Ja={class:"flex-grow-1 min-width-0 max-w-18rem"},Ga={class:"flex flex-column gap-1"},Xa={class:"flex align-items-center gap-2"},Ya={class:"text-xl font-bold line1 whitespace-nowrap overflow-hidden text-overflow-ellipsis",style:{"max-width":"20rem"}},Za={class:"flex align-items-end gap-1"},es={key:0,class:"text-xl font-bold text-primary"},ts={key:1,class:"text-xl font-bold text-primary"},as={key:2,class:"text-sm text-color-secondary"},ss={key:0,class:"text-xs text-primary"},ns={class:"flex-shrink-0 flex flex-wrap justify-content-between align-items-center gap-1"},os={class:"flex flex-wrap justify-content-between align-content-center"},is={class:"flex align-items-center gap-1"},ls={class:"w-2rem text-center"},rs={key:1,class:"flex flex-column gap-2 mt-2"},cs={for:"in_label"},us={for:"in_label"},ds={class:"bottom-0 left-0 mt-2"},ps={class:"text-2xl font-bold"},fs={class:"text-2xl font-bold text-primary pl-2"},vs={class:"flex justify-content-between"},hs={__name:"Cart",props:{updateCartItemCount:{type:Function,required:!0},checkout:{type:Function,required:!0},isTakeaway:Boolean},setup(e,{expose:t}){const{locale:s}=fe(),i=tt(),{t:y}=fe(),u=ne.cartDishs;T.freeCounts;const _=S([]),E=S(),I=S(),G=S(!1),K=S(!1),W=S(!0),O=S(""),L=S("");function oe(r,f,v){let U="";const Z=s.value,ve=T.customDishAPI.getCustomDishByName(r);for(const ue of v){const Le=ve.types[f].dishes.find(me=>me.dishid===ue.id)[`name_${Z}`];U=U+Le+"/"}return U}function q(r,f){const v=s.value;return T.customDishAPI.getCustomDishByName(r).types[f][`typeName_${v}`]}const se=(r,f)=>{const v=_.value[r].quantity+f;v>=0&&(_.value[r].quantity=v,V.updateCartItemCount(f))};function j(r){r&&E.value&&(E.value.dishNote=I.value?I.value:void 0),K.value=!1}function z(){I.value&&(I.value=void 0),E.value&&(E.value=void 0)}function P(r){E.value=r,I.value=E.value.dishNote?E.value.dishNote:void 0,K.value=!0}const V=e;t({showDishList:r=>{G.value=!0,_.value.length=0;for(let f=0;f<r.length;f++)_.value.push(r[f]);W.value=_.value.length==0&&u.length==0}});function ce(r){ne.removeItem(r)}function k(){V.isTakeaway?N():h()}function N(){const r=[];u.value.forEach(f=>{r.push(f)}),_.value.forEach(f=>{f.quantity>0&&r.push(f)}),r.length<=0?ae.show_warn(y("notification.select_at_least_one")):(G.value=!1,i.push({path:"/paymentPage"}))}function h(){V.checkout({name:O.value,note:L.value},r=>{r.success&&(u.value.forEach(f=>{f.dishNote=void 0}),_.value.forEach(f=>{f.dishNote=void 0}),L.value="",Y.cleanDishDataQty(),te.deleteCookie("cartDish_normal"),ne.cleanAll(),te.deleteCookie("cartDish_custom"))})&&(G.value=!1)}function g(r){return r.subname!=""&&r.subname!="Default Title"?r.name+" "+r.subname:r.name}function m(){let r=0;return u.value.forEach(f=>{r+=f.dis_price?f.dis_price*f.count:f.price*f.count}),_.value.forEach(f=>{r+=f.dis_price?f.dis_price*f.quantity:f.price*f.quantity}),"€"+r.toFixed(2)}const b=r=>{r.target.src="/images/default.png"},D=r=>{const f=r.quantity;let v=3;return r.price>0&&(v=9),f>=v};return(r,f)=>(o(),d(H,null,[w(n(ge),{class:"bg-primary-reverse text-sm md:text-lg lg:text-xl",visible:G.value,"onUpdate:visible":f[2]||(f[2]=v=>G.value=v),modal:"",header:r.$t("common.cart"),style:Pe([{backgroundColor:"rgba(250, 250, 250, 1)",height:"100%",minWidth:"24rem"},{width:"80vw","max-width":"700px"}]),dismissableMask:!0},{footer:B(()=>[a("div",ds,[a("span",ps,c(r.$t("common.total"))+": ",1),a("span",fs,c(m()),1),w(n(M),{icon:e.isTakeaway?"pi pi-wallet":"pi pi-plus",class:"p-button-success p-button-rounded ml-3",onClick:k,label:e.isTakeaway?n(y)("common.pay"):n(y)("common.send")},null,8,["icon","label"])])]),default:B(()=>[W.value?(o(),d("h2",Ma,"Cart is empty.")):C("",!0),a("div",ja,[(o(!0),d(H,null,ee(n(u),(v,U)=>(o(),J(n(St),{style:{overflow:"hidden"},key:U},{title:B(()=>[be(c(r.$t(`common.${v.name.replace(/[^a-zA-Z0-9\s]/g,"").toLowerCase().replace(/\s+/g,"")}`)),1)]),subtitle:B(()=>[be(c(r.$t("common.price"))+" : "+c(v.price)+"€",1)]),content:B(()=>[n(T).customDishAPI.customDishes.value.find(Z=>Z.name==v.name)?(o(),d("div",Fa,[(o(!0),d(H,null,ee(v.notesAndId,(Z,ve)=>(o(),d("div",null,[v.notesAndId[ve].length!==0?(o(),d("span",Ha,c(q(v.name,ve))+": "+c(oe(v.name,ve,Z)),1)):C("",!0)]))),256)),a("div",null,[v.dishNote?(o(),d("span",Ka,c(r.$t("common.note"))+": "+c(v.dishNote),1)):C("",!0)])])):C("",!0)]),footer:B(()=>[a("div",Wa,[e.isTakeaway?C("",!0):(o(),J(n(M),{key:0,label:n(y)("common.edit")+" "+n(y)("common.note"),severity:"contrast",onClick:Z=>P(v)},null,8,["label","onClick"])),w(n(M),{label:n(y)("common.remove"),severity:"danger",onClick:Z=>ce(v)},null,8,["label","onClick"])])]),_:2},1024))),128)),(o(!0),d(H,null,ee(_.value,(v,U)=>(o(),d("div",{key:U,class:"p-2 border-round shadow-1 transition-all transition-duration-200 hover:shadow-3 flex flex-column gap-1"},[a("div",Ua,[a("img",{src:v.image,alt:v.name,class:"w-4rem h-4rem border-round flex-shrink-0",onError:b,style:{"object-fit":"cover","min-width":"4rem"}},null,40,Qa),a("div",Ja,[a("div",Ga,[a("div",Xa,[a("span",Ya,c(g(v)),1)])]),a("div",Za,[v.dis_price?(o(),d("span",es,"€"+c(v.dis_price),1)):C("",!0),!v.dis_price&&v.price>0?(o(),d("span",ts,"€"+c(v.price),1)):C("",!0),v.price>0?(o(),d("span",as,"/uni.")):C("",!0)])])]),a("div",null,[v.dishNote?(o(),d("span",ss,c(n(y)("common.note")+": "+v.dishNote),1)):C("",!0)]),a("div",ns,[a("div",os,[e.isTakeaway?C("",!0):(o(),J(n(M),{key:0,label:n(y)("common.edit")+" "+n(y)("common.note"),severity:"contrast",class:"w-3.5rem h-2rem",onClick:Z=>P(v)},null,8,["label","onClick"]))]),a("div",is,[w(n(M),{icon:"pi pi-minus",rounded:"",disabled:v.quantity<=0,onClick:Z=>se(U,-1),class:"w-2rem h-2rem"},null,8,["disabled","onClick"]),a("span",ls,c(v.quantity),1),w(n(M),{icon:"pi pi-plus",rounded:"",disabled:D(v),onClick:Z=>se(U,1),class:"w-2rem h-2rem"},null,8,["disabled","onClick"])])])]))),128))]),e.isTakeaway?C("",!0):(o(),d("div",rs,[w(n(Xe),{variant:"in"},{default:B(()=>[w(n(nt),{id:"in_label",modelValue:O.value,"onUpdate:modelValue":f[0]||(f[0]=v=>O.value=v),variant:"filled",maxlength:"20"},null,8,["modelValue"]),a("label",cs,c(n(y)("common.name")),1)]),_:1}),w(n(Xe),{variant:"in"},{default:B(()=>[w(n(Ge),{id:"in_label",class:"min-w-full",rows:"5",modelValue:L.value,"onUpdate:modelValue":f[1]||(f[1]=v=>L.value=v),variant:"filled",maxlength:"200"},null,8,["modelValue"]),a("label",us,c(n(y)("common.observation")),1)]),_:1})]))]),_:1},8,["visible","header"]),w(n(ge),{visible:K.value,"onUpdate:visible":f[6]||(f[6]=v=>K.value=v),header:n(y)("common.note"),onHide:f[7]||(f[7]=v=>z()),modal:"",dismissableMask:!0},{default:B(()=>[w(n(Ge),{modelValue:I.value,"onUpdate:modelValue":f[3]||(f[3]=v=>I.value=v),rows:"5",cols:"30",placeholder:n(y)("common.edit")+" "+n(y)("common.note")+"...",maxlength:"100"},null,8,["modelValue","placeholder"]),a("div",vs,[w(n(M),{label:n(y)("common.cancel"),severity:"danger",onClick:f[4]||(f[4]=v=>j(!1))},null,8,["label"]),w(n(M),{label:n(y)("common.save"),severity:"primary",size:"sm",onClick:f[5]||(f[5]=v=>j(!0))},null,8,["label"])])]),_:1},8,["visible","header"])],64))}},ms=Ce(hs,[["__scopeId","data-v-bc198beb"]]);var bs=Ae`
    .p-overlaybadge {
        position: relative;
    }

    .p-overlaybadge .p-badge {
        position: absolute;
        inset-block-start: 0;
        inset-inline-end: 0;
        transform: translate(50%, -50%);
        transform-origin: 100% 0;
        margin: 0;
        outline-width: dt('overlaybadge.outline.width');
        outline-style: solid;
        outline-color: dt('overlaybadge.outline.color');
    }

    .p-overlaybadge .p-badge:dir(rtl) {
        transform: translate(-50%, -50%);
    }
`,gs={root:"p-overlaybadge"},ys=ye.extend({name:"overlaybadge",style:bs,classes:gs}),_s={name:"OverlayBadge",extends:ot,style:ys,provide:function(){return{$pcOverlayBadge:this,$parentInstance:this}}},it={name:"OverlayBadge",extends:_s,inheritAttrs:!1,components:{Badge:ot}};function ks(e,t,s,i,y,u){var _=bt("Badge");return o(),d("div",F({class:e.cx("root")},e.ptmi("root")),[he(e.$slots,"default"),w(_,F(e.$props,{pt:e.ptm("pcBadge")}),null,16,["pt"])],16)}it.render=ks;S([]);S("iniImages()");const ws={class:"m-3"},xs={class:"flex flex-column gap-2"},$s={class:"w-full flex justify-content-center"},Ts={key:0,class:"max-w-19rem"},Cs=["src"],Is={style:{width:"300px",height:"300px",background:"url(/boxImage/box.png)"}},Ds={key:0,class:"flex align-items-center justify-content-center text-4xl font-bold text-white w-full h-full"},Ss={key:1,class:"grid m-0 p-2"},Ns=["onClick"],Ps={class:"flex align-items-center justify-content-center font-bold m-0 p-0",style:{width:"94px",height:"94px"}},Bs=["src"],As={class:"flex flex-wrap justify-content-between align-items-center m-1"},qs={class:"flex gap-1 align-items-center"},Ls={key:0},zs={class:"font-bold mb-2"},Os={key:1,class:"flex justify-content-between gap-2 mt-3"},Es={class:"font-bold mb-2"},Rs={class:"flex mr-2"},Vs={class:"w-3rem text-xl text-center"},Ms={class:"font-bold block mb-2"},js={class:"flex flex-wrap"},Fs={key:2,class:"flex flex-wrap gap-2 mt-3"},Hs={class:"font-bold block mb-2"},Ks={class:"font-bold block mb-2 text-center"},Ws={class:"flex flex-wrap gap-2 mt-3"},Us={__name:"CustomDish",props:{currentCustomDish:Object},emits:["typeClick"],setup(e,{emit:t}){const{locale:s}=fe(),i=e,y=gt(),{t:u}=fe(),_=pe(()=>i.currentCustomDish),E=pe(()=>_.boxImages),I=S(0),G=pe(()=>{let g=_.value.initialPrice;for(const m of _.value.types??[])for(const b of m.dishes??[])b.selected&&(g+=b.price);return Number(g).toFixed(2)}),K=t,W=S(null),O=pe(()=>{const g=s.value,m=`title_${g}`,b=`description_${g}`;return _.value.descriptions.map(D=>({title:D[m],descriptions:D.descriptions.map(r=>r[b]),image:D==null?void 0:D.image}))}),L=pe(()=>{var b,D;const g=Number(((b=_.value)==null?void 0:b.like)??0),m=Number(((D=_.value)==null?void 0:D.rate)??0);return m?g/m*5:0});function oe(g,m){const b=s.value;return g[`${m}_${b}`]}function q(g,m,b){const D=g[m];if(D.selected){D.selected=!1;return}else{const f=g.filter(v=>v.selected).length;if(b===1){k(g),D.selected=!0;return}f<b&&(D.selected=!0)}}function se(g,m,b){const D=g.dishes;K("typeClick",g,m,D[m].selected),q(D,m,b)}function j(g){return g.selected}function z(){if(!N(_.value.types))return;const g=V(_.value.types),m=ie(_.value.types);ne.addItem({dishid:-1,name:_.value.name,category:i.currentCustomDish.category,count:I.value!==0?I.value:1,price:G.value,notes:g,notesAndId:m}),console.log("CART: ",ne.cartDishs),ce(_.value.types),ae.show({severity:"info",summary:"info",detail:u("customDishBibimbapVue.addToCartSuccessBibimbap")})}function P(g){return!g||!g.dishes?"":g.dishes.filter(b=>b.selected).map(b=>b.name).join(",")}function V(g){return g?g.map(m=>P(m)):[]}function ie(g){return g?g.map(m=>m.dishes?m.dishes.filter(b=>b.selected).map(b=>({id:b.dishid,name:b.name})):[]):[]}function ce(g){g&&g.forEach(m=>{m.dishes&&m.dishes.forEach(b=>{b.selected=!1})})}function k(g){g.forEach(m=>m.selected=!1)}function N(g){if(_.value.options.quantity&&I.value<=0)return ae.show({severity:"warn",detail:u("notification.quantity_must_be_positive")}),!1;for(const m of g)if(m.dishes.filter(D=>D.selected).length<m.minQuantity){const D=m.typeName;return ae.show({severity:"warn",detail:u("notification.select_type_of",{name:D})}),!1}return!0}function h(g){g?T.customDishAPI.like(_.value.id)&&(W.value="like",y.add({severity:"success",summary:u("common.success"),detail:u("common.rate")+" "+u("common.success"),life:750})):T.customDishAPI.unLike(_.value.id)&&(W.value="unlike",y.add({severity:"success",summary:u("common.success"),detail:u("common.rate")+" "+u("common.success"),life:750}))}return(g,m)=>{var b,D;return o(),d("div",ws,[a("div",xs,[w(n(He),{class:"w-full max-w-xl mx-auto"},{default:B(()=>[(o(!0),d(H,null,ee(O.value,(r,f)=>(o(),J(n(Fe),{key:f,value:f},{default:B(()=>[w(n(Me),null,{default:B(()=>[be(c(r.title),1)]),_:2},1024),w(n(je),null,{default:B(()=>{var v;return[(o(!0),d(H,null,ee(r.descriptions,(U,Z)=>(o(),d("p",{key:Z},c(U),1))),128)),a("div",$s,[(v=r.image)!=null&&v.src?(o(),d("div",Ts,[a("img",{src:r.image.src,class:"w-full"},null,8,Cs)])):C("",!0)])]}),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1}),((D=(b=_.value)==null?void 0:b.value)==null?void 0:D.name)==="MY BOX"?(o(),J(n(He),{key:0,class:"w-full max-w-xl mx-auto"},{default:B(()=>[w(n(Fe),{value:"0"},{default:B(()=>[w(n(Me),null,{default:B(()=>[be(" 🥩 "+c(g.$t("common.showMybox")),1)]),_:1}),w(n(je),null,{default:B(()=>[a("div",Is,[g.isEmptyArray(E.value)?(o(),d("div",Ds,c(g.$t("common.myboxAlarm")),1)):C("",!0),g.isEmptyArray(E.value)?C("",!0):(o(),d("div",Ss,[(o(!0),d(H,null,ee(E.value,r=>(o(),d("div",{class:"col-4 p-0",onClick:f=>g.imageSelectAction(r)},[a("div",Ps,[r?(o(),d("img",{key:0,class:"m-0 p-0",src:g.imagePath(r),style:{width:"82px",height:"82px"}},null,8,Bs)):C("",!0)])],8,Ns))),256))]))])]),_:1})]),_:1})]),_:1})):C("",!0)]),a("div",As,[a("div",qs,[(o(),d(H,null,ee(5,r=>a("i",{key:r,class:re(["pi invert-star",r<=Math.floor(L.value)?"pi-star-fill":r-.5<=L.value?"pi-star-half":"pi-star"]),style:{color:"black"}},null,2)),64)),a("p",null,"("+c(_.value.rate?_.value.rate:0)+")",1)]),a("div",null,[w(n(M),{text:"",icon:"pi pi-thumbs-up",severity:W.value==="like"?"success":"",onClick:m[0]||(m[0]=r=>h(!0))},null,8,["severity"]),w(n(M),{text:"",icon:"pi pi-thumbs-down",severity:W.value==="unlike"?"danger":"",onClick:m[1]||(m[1]=r=>h(!1))},null,8,["severity"])])]),_.value.options.extraInfo?(o(),d("div",Ls,[a("label",zs,c(_.value.options.extraInfo),1)])):C("",!0),_.value.options.quantity?(o(),d("div",Os,[a("div",null,[a("label",Es,c(g.$t("common.quantity"))+" / "+c(g.$t("common.pieces")),1)]),a("div",Rs,[w(n(M),{icon:"pi pi-minus",disabled:I.value<=0,onClick:m[2]||(m[2]=r=>I.value-=_.value.options.quantitySetp),class:"w-2rem h-2rem"},null,8,["disabled"]),a("span",Vs,c(I.value),1),w(n(M),{icon:"pi pi-plus",disabled:I.value>=_.value.options.maxQuantity,onClick:m[3]||(m[3]=r=>I.value+=_.value.options.quantitySetp),class:"w-2rem h-2rem"},null,8,["disabled"])])])):C("",!0),(o(!0),d(H,null,ee(_.value.types,(r,f)=>(o(),d("div",{key:r.id},[we(a("div",null,[a("label",Ms,c(f+1)+". "+c(oe(r,"typeName")),1),a("div",js,[(o(!0),d(H,null,ee(r.dishes,(v,U)=>(o(),J(n(M),{key:U,onClick:Z=>se(r,U,I.value==0?r.maxQuantity:r.maxQuantity*I.value),class:re([{"p-button-primary":j(v),"p-button-outlined":!j(v)},"m-1"])},{default:B(()=>[a("p",{class:re({"text-gray-700":!j(v)})},c(oe(v,"name")),3)]),_:2},1032,["onClick","class"]))),128))])],512),[[yt,r.enable]])]))),128)),e.currentCustomDish.initialPrice!==0?(o(),d("div",Fs,[a("label",Hs,c(g.$t("common.price"))+":",1),a("label",Ks,c(G.value+"€"),1)])):C("",!0),a("div",Ws,[w(n(M),{icon:"pi pi-shopping-cart",onClick:m[4]||(m[4]=r=>z()),label:g.$t("common.addToCart"),class:"m-3",severity:"primary",raised:""},null,8,["label"])])])}}},Qs=Ce(Us,[["__scopeId","data-v-1bbb17dd"]]);var Js=Ae`
    .p-tabs {
        display: flex;
        flex-direction: column;
    }

    .p-tablist {
        display: flex;
        position: relative;
    }

    .p-tabs-scrollable > .p-tablist {
        overflow: hidden;
    }

    .p-tablist-viewport {
        overflow-x: auto;
        overflow-y: hidden;
        scroll-behavior: smooth;
        scrollbar-width: none;
        overscroll-behavior: contain auto;
    }

    .p-tablist-viewport::-webkit-scrollbar {
        display: none;
    }

    .p-tablist-tab-list {
        position: relative;
        display: flex;
        background: dt('tabs.tablist.background');
        border-style: solid;
        border-color: dt('tabs.tablist.border.color');
        border-width: dt('tabs.tablist.border.width');
    }

    .p-tablist-content {
        flex-grow: 1;
    }

    .p-tablist-nav-button {
        all: unset;
        position: absolute !important;
        flex-shrink: 0;
        inset-block-start: 0;
        z-index: 2;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        background: dt('tabs.nav.button.background');
        color: dt('tabs.nav.button.color');
        width: dt('tabs.nav.button.width');
        transition:
            color dt('tabs.transition.duration'),
            outline-color dt('tabs.transition.duration'),
            box-shadow dt('tabs.transition.duration');
        box-shadow: dt('tabs.nav.button.shadow');
        outline-color: transparent;
        cursor: pointer;
    }

    .p-tablist-nav-button:focus-visible {
        z-index: 1;
        box-shadow: dt('tabs.nav.button.focus.ring.shadow');
        outline: dt('tabs.nav.button.focus.ring.width') dt('tabs.nav.button.focus.ring.style') dt('tabs.nav.button.focus.ring.color');
        outline-offset: dt('tabs.nav.button.focus.ring.offset');
    }

    .p-tablist-nav-button:hover {
        color: dt('tabs.nav.button.hover.color');
    }

    .p-tablist-prev-button {
        inset-inline-start: 0;
    }

    .p-tablist-next-button {
        inset-inline-end: 0;
    }

    .p-tablist-prev-button:dir(rtl),
    .p-tablist-next-button:dir(rtl) {
        transform: rotate(180deg);
    }

    .p-tab {
        flex-shrink: 0;
        cursor: pointer;
        user-select: none;
        position: relative;
        border-style: solid;
        white-space: nowrap;
        gap: dt('tabs.tab.gap');
        background: dt('tabs.tab.background');
        border-width: dt('tabs.tab.border.width');
        border-color: dt('tabs.tab.border.color');
        color: dt('tabs.tab.color');
        padding: dt('tabs.tab.padding');
        font-weight: dt('tabs.tab.font.weight');
        transition:
            background dt('tabs.transition.duration'),
            border-color dt('tabs.transition.duration'),
            color dt('tabs.transition.duration'),
            outline-color dt('tabs.transition.duration'),
            box-shadow dt('tabs.transition.duration');
        margin: dt('tabs.tab.margin');
        outline-color: transparent;
    }

    .p-tab:not(.p-disabled):focus-visible {
        z-index: 1;
        box-shadow: dt('tabs.tab.focus.ring.shadow');
        outline: dt('tabs.tab.focus.ring.width') dt('tabs.tab.focus.ring.style') dt('tabs.tab.focus.ring.color');
        outline-offset: dt('tabs.tab.focus.ring.offset');
    }

    .p-tab:not(.p-tab-active):not(.p-disabled):hover {
        background: dt('tabs.tab.hover.background');
        border-color: dt('tabs.tab.hover.border.color');
        color: dt('tabs.tab.hover.color');
    }

    .p-tab-active {
        background: dt('tabs.tab.active.background');
        border-color: dt('tabs.tab.active.border.color');
        color: dt('tabs.tab.active.color');
    }

    .p-tabpanels {
        background: dt('tabs.tabpanel.background');
        color: dt('tabs.tabpanel.color');
        padding: dt('tabs.tabpanel.padding');
        outline: 0 none;
    }

    .p-tabpanel:focus-visible {
        box-shadow: dt('tabs.tabpanel.focus.ring.shadow');
        outline: dt('tabs.tabpanel.focus.ring.width') dt('tabs.tabpanel.focus.ring.style') dt('tabs.tabpanel.focus.ring.color');
        outline-offset: dt('tabs.tabpanel.focus.ring.offset');
    }

    .p-tablist-active-bar {
        z-index: 1;
        display: block;
        position: absolute;
        inset-block-end: dt('tabs.active.bar.bottom');
        height: dt('tabs.active.bar.height');
        background: dt('tabs.active.bar.background');
        transition: 250ms cubic-bezier(0.35, 0, 0.25, 1);
    }
`,Gs={root:function(t){var s=t.props;return["p-tabs p-component",{"p-tabs-scrollable":s.scrollable}]}},Xs=ye.extend({name:"tabs",style:Js,classes:Gs}),Ys={name:"BaseTabs",extends:Te,props:{value:{type:[String,Number],default:void 0},lazy:{type:Boolean,default:!1},scrollable:{type:Boolean,default:!1},showNavigators:{type:Boolean,default:!0},tabindex:{type:Number,default:0},selectOnFocus:{type:Boolean,default:!1}},style:Xs,provide:function(){return{$pcTabs:this,$parentInstance:this}}},lt={name:"Tabs",extends:Ys,inheritAttrs:!1,emits:["update:value"],data:function(){return{d_value:this.value}},watch:{value:function(t){this.d_value=t}},methods:{updateValue:function(t){this.d_value!==t&&(this.d_value=t,this.$emit("update:value",t))},isVertical:function(){return this.orientation==="vertical"}}};function Zs(e,t,s,i,y,u){return o(),d("div",F({class:e.cx("root")},e.ptmi("root")),[he(e.$slots,"default")],16)}lt.render=Zs;var en={root:"p-tablist",content:function(t){var s=t.instance;return["p-tablist-content",{"p-tablist-viewport":s.$pcTabs.scrollable}]},tabList:"p-tablist-tab-list",activeBar:"p-tablist-active-bar",prevButton:"p-tablist-prev-button p-tablist-nav-button",nextButton:"p-tablist-next-button p-tablist-nav-button"},tn=ye.extend({name:"tablist",classes:en}),an={name:"BaseTabList",extends:Te,props:{},style:tn,provide:function(){return{$pcTabList:this,$parentInstance:this}}},rt={name:"TabList",extends:an,inheritAttrs:!1,inject:["$pcTabs"],data:function(){return{isPrevButtonEnabled:!1,isNextButtonEnabled:!0}},resizeObserver:void 0,watch:{showNavigators:function(t){t?this.bindResizeObserver():this.unbindResizeObserver()},activeValue:{flush:"post",handler:function(){this.updateInkBar()}}},mounted:function(){var t=this;setTimeout(function(){t.updateInkBar()},150),this.showNavigators&&(this.updateButtonState(),this.bindResizeObserver())},updated:function(){this.showNavigators&&this.updateButtonState()},beforeUnmount:function(){this.unbindResizeObserver()},methods:{onScroll:function(t){this.showNavigators&&this.updateButtonState(),t.preventDefault()},onPrevButtonClick:function(){var t=this.$refs.content,s=this.getVisibleButtonWidths(),i=Re(t)-s,y=Math.abs(t.scrollLeft),u=i*.8,_=y-u,E=Math.max(_,0);t.scrollLeft=Je(t)?-1*E:E},onNextButtonClick:function(){var t=this.$refs.content,s=this.getVisibleButtonWidths(),i=Re(t)-s,y=Math.abs(t.scrollLeft),u=i*.8,_=y+u,E=t.scrollWidth-i,I=Math.min(_,E);t.scrollLeft=Je(t)?-1*I:I},bindResizeObserver:function(){var t=this;this.resizeObserver=new ResizeObserver(function(){return t.updateButtonState()}),this.resizeObserver.observe(this.$refs.list)},unbindResizeObserver:function(){var t;(t=this.resizeObserver)===null||t===void 0||t.unobserve(this.$refs.list),this.resizeObserver=void 0},updateInkBar:function(){var t=this.$refs,s=t.content,i=t.inkbar,y=t.tabs;if(i){var u=Ve(s,'[data-pc-name="tab"][data-p-active="true"]');this.$pcTabs.isVertical()?(i.style.height=kt(u)+"px",i.style.top=De(u).top-De(y).top+"px"):(i.style.width=wt(u)+"px",i.style.left=De(u).left-De(y).left+"px")}},updateButtonState:function(){var t=this.$refs,s=t.list,i=t.content,y=i.scrollTop,u=i.scrollWidth,_=i.scrollHeight,E=i.offsetWidth,I=i.offsetHeight,G=Math.abs(i.scrollLeft),K=[Re(i),_t(i)],W=K[0],O=K[1];this.$pcTabs.isVertical()?(this.isPrevButtonEnabled=y!==0,this.isNextButtonEnabled=s.offsetHeight>=I&&parseInt(y)!==_-O):(this.isPrevButtonEnabled=G!==0,this.isNextButtonEnabled=s.offsetWidth>=E&&parseInt(G)!==u-W)},getVisibleButtonWidths:function(){var t=this.$refs,s=t.prevButton,i=t.nextButton,y=0;return this.showNavigators&&(y=((s==null?void 0:s.offsetWidth)||0)+((i==null?void 0:i.offsetWidth)||0)),y}},computed:{templates:function(){return this.$pcTabs.$slots},activeValue:function(){return this.$pcTabs.d_value},showNavigators:function(){return this.$pcTabs.scrollable&&this.$pcTabs.showNavigators},prevButtonAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.previous:void 0},nextButtonAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.next:void 0},dataP:function(){return qe({scrollable:this.$pcTabs.scrollable})}},components:{ChevronLeftIcon:Nt,ChevronRightIcon:Pt},directives:{ripple:at}},sn=["data-p"],nn=["aria-label","tabindex"],on=["data-p"],ln=["aria-orientation"],rn=["aria-label","tabindex"];function cn(e,t,s,i,y,u){var _=Be("ripple");return o(),d("div",F({ref:"list",class:e.cx("root"),"data-p":u.dataP},e.ptmi("root")),[u.showNavigators&&y.isPrevButtonEnabled?we((o(),d("button",F({key:0,ref:"prevButton",type:"button",class:e.cx("prevButton"),"aria-label":u.prevButtonAriaLabel,tabindex:u.$pcTabs.tabindex,onClick:t[0]||(t[0]=function(){return u.onPrevButtonClick&&u.onPrevButtonClick.apply(u,arguments)})},e.ptm("prevButton"),{"data-pc-group-section":"navigator"}),[(o(),J(ke(u.templates.previcon||"ChevronLeftIcon"),F({"aria-hidden":"true"},e.ptm("prevIcon")),null,16))],16,nn)),[[_]]):C("",!0),a("div",F({ref:"content",class:e.cx("content"),onScroll:t[1]||(t[1]=function(){return u.onScroll&&u.onScroll.apply(u,arguments)}),"data-p":u.dataP},e.ptm("content")),[a("div",F({ref:"tabs",class:e.cx("tabList"),role:"tablist","aria-orientation":u.$pcTabs.orientation||"horizontal"},e.ptm("tabList")),[he(e.$slots,"default"),a("span",F({ref:"inkbar",class:e.cx("activeBar"),role:"presentation","aria-hidden":"true"},e.ptm("activeBar")),null,16)],16,ln)],16,on),u.showNavigators&&y.isNextButtonEnabled?we((o(),d("button",F({key:1,ref:"nextButton",type:"button",class:e.cx("nextButton"),"aria-label":u.nextButtonAriaLabel,tabindex:u.$pcTabs.tabindex,onClick:t[2]||(t[2]=function(){return u.onNextButtonClick&&u.onNextButtonClick.apply(u,arguments)})},e.ptm("nextButton"),{"data-pc-group-section":"navigator"}),[(o(),J(ke(u.templates.nexticon||"ChevronRightIcon"),F({"aria-hidden":"true"},e.ptm("nextIcon")),null,16))],16,rn)),[[_]]):C("",!0)],16,sn)}rt.render=cn;var un={root:function(t){var s=t.instance,i=t.props;return["p-tab",{"p-tab-active":s.active,"p-disabled":i.disabled}]}},dn=ye.extend({name:"tab",classes:un}),pn={name:"BaseTab",extends:Te,props:{value:{type:[String,Number],default:void 0},disabled:{type:Boolean,default:!1},as:{type:[String,Object],default:"BUTTON"},asChild:{type:Boolean,default:!1}},style:dn,provide:function(){return{$pcTab:this,$parentInstance:this}}},ct={name:"Tab",extends:pn,inheritAttrs:!1,inject:["$pcTabs","$pcTabList"],methods:{onFocus:function(){this.$pcTabs.selectOnFocus&&this.changeActiveValue()},onClick:function(){this.changeActiveValue()},onKeydown:function(t){switch(t.code){case"ArrowRight":this.onArrowRightKey(t);break;case"ArrowLeft":this.onArrowLeftKey(t);break;case"Home":this.onHomeKey(t);break;case"End":this.onEndKey(t);break;case"PageDown":this.onPageDownKey(t);break;case"PageUp":this.onPageUpKey(t);break;case"Enter":case"NumpadEnter":case"Space":this.onEnterKey(t);break}},onArrowRightKey:function(t){var s=this.findNextTab(t.currentTarget);s?this.changeFocusedTab(t,s):this.onHomeKey(t),t.preventDefault()},onArrowLeftKey:function(t){var s=this.findPrevTab(t.currentTarget);s?this.changeFocusedTab(t,s):this.onEndKey(t),t.preventDefault()},onHomeKey:function(t){var s=this.findFirstTab();this.changeFocusedTab(t,s),t.preventDefault()},onEndKey:function(t){var s=this.findLastTab();this.changeFocusedTab(t,s),t.preventDefault()},onPageDownKey:function(t){this.scrollInView(this.findLastTab()),t.preventDefault()},onPageUpKey:function(t){this.scrollInView(this.findFirstTab()),t.preventDefault()},onEnterKey:function(t){this.changeActiveValue(),t.preventDefault()},findNextTab:function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=s?t:t.nextElementSibling;return i?Se(i,"data-p-disabled")||Se(i,"data-pc-section")==="activebar"?this.findNextTab(i):Ve(i,'[data-pc-name="tab"]'):null},findPrevTab:function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=s?t:t.previousElementSibling;return i?Se(i,"data-p-disabled")||Se(i,"data-pc-section")==="activebar"?this.findPrevTab(i):Ve(i,'[data-pc-name="tab"]'):null},findFirstTab:function(){return this.findNextTab(this.$pcTabList.$refs.tabs.firstElementChild,!0)},findLastTab:function(){return this.findPrevTab(this.$pcTabList.$refs.tabs.lastElementChild,!0)},changeActiveValue:function(){this.$pcTabs.updateValue(this.value)},changeFocusedTab:function(t,s){$t(s),this.scrollInView(s)},scrollInView:function(t){var s;t==null||(s=t.scrollIntoView)===null||s===void 0||s.call(t,{block:"nearest"})}},computed:{active:function(){var t;return xt((t=this.$pcTabs)===null||t===void 0?void 0:t.d_value,this.value)},id:function(){var t;return"".concat((t=this.$pcTabs)===null||t===void 0?void 0:t.$id,"_tab_").concat(this.value)},ariaControls:function(){var t;return"".concat((t=this.$pcTabs)===null||t===void 0?void 0:t.$id,"_tabpanel_").concat(this.value)},attrs:function(){return F(this.asAttrs,this.a11yAttrs,this.ptmi("root",this.ptParams))},asAttrs:function(){return this.as==="BUTTON"?{type:"button",disabled:this.disabled}:void 0},a11yAttrs:function(){return{id:this.id,tabindex:this.active?this.$pcTabs.tabindex:-1,role:"tab","aria-selected":this.active,"aria-controls":this.ariaControls,"data-pc-name":"tab","data-p-disabled":this.disabled,"data-p-active":this.active,onFocus:this.onFocus,onKeydown:this.onKeydown}},ptParams:function(){return{context:{active:this.active}}},dataP:function(){return qe({active:this.active})}},directives:{ripple:at}};function fn(e,t,s,i,y,u){var _=Be("ripple");return e.asChild?he(e.$slots,"default",{key:1,dataP:u.dataP,class:re(e.cx("root")),active:u.active,a11yAttrs:u.a11yAttrs,onClick:u.onClick}):we((o(),J(ke(e.as),F({key:0,class:e.cx("root"),"data-p":u.dataP,onClick:u.onClick},u.attrs),{default:B(function(){return[he(e.$slots,"default")]}),_:3},16,["class","data-p","onClick"])),[[_]])}ct.render=fn;const vn={class:"fixed top-0 left-0 w-full bg-primary-reverse",style:{"z-index":"10"}},hn={class:"grid mt-1 ml-1"},mn={class:"max-w-3rem flex align-items-center"},bn=["src"],gn={class:"flex align-items-center"},yn={key:0,class:"text-color font-bold p-1"},_n={key:1,class:"text-color font-bold p-1"},kn={class:"card flex mr-3 flex align-items-center",style:{"margin-left":"auto"}},wn={style:{display:"flex","align-items":"center"}},xn={style:{"flex-grow":"1",width:"0",overflow:"hidden"}},$n={class:"mt-2"},Tn={class:"flex justify-content-end mt-2"},Cn={class:"flex inline-flex items-center justify-center gap-2"},In={class:"flex align-items-center"},Dn={class:"flex flex-column"},Sn={class:"text-sm p-2"},Nn={class:"text-sm p-2"},Pn={class:"flex items-center gap-4 mb-4 p-2"},Bn={class:"flex flex-column gap-3"},An={__name:"HeaderTabs",props:{types:Array,typeIndex:Number,tableId:String,tabItems:Array},emits:["clickType","switchToWelcome"],setup(e,{emit:t}){const{t:s}=fe(),i=S(!1);function y(){var V;const z=T.currentPage.value,P=(V=z==null?void 0:z.data)==null?void 0:V.logoPath;return P?T.pathFormated(P,z.imagesPath):"/images/logo_logo.png"}function u(){return T.getTable()}const _=S(),E=pe(()=>[{label:s("common.options"),items:[{label:s("common.pay"),icon:"pi pi-wallet",command:()=>{oe()}},{label:s("common.call"),icon:"pi pi-user-plus",command:()=>{T.send_cmd(u(),{cmd:"call"},z=>{z.success?ae.show_info(s("notification.call_msg")):ae.show_warn(z.data)})}}]}]),I=z=>{_.value.toggle(z)},G=z=>{K.value.toggle(z)},K=S(),W=S(!1),O=S(),L=S();function oe(){W.value=!0}function q(){z(O.value)?T.send_cmd(u(),{cmd:"pay",nif:O.value,note:L.value},P=>{P.success?(ae.show_info(s("notification.pay_msg")),W.value=!1):ae.show_error(s("common.failed"))}):ae.show_warn(s("notification.cancel_msg"));function z(P){return!P||P.toString().length===9||P.toString().length===0}}function se(){L.value&&(L.value=void 0)}function j(){i.value=!0}return(z,P)=>(o(),d(H,null,[a("div",vn,[a("div",hn,[a("div",mn,[a("img",{src:y(),class:"w-full",clickble:"",onClick:P[0]||(P[0]=()=>z.$emit("switchToWelcome"))},null,8,bn)]),a("div",gn,[e.tableId?(o(),d("p",yn,c(z.$t("common.table"))+": "+c(e.tableId),1)):C("",!0),e.tableId?C("",!0):(o(),d("p",_n,c(z.$t("common.takeAway")),1))]),a("div",kn,[e.tableId?(o(),J(n(M),{key:0,icon:"pi pi-bell",rounded:"","aria-label":"Filter",onClick:I,"aria-haspopup":"true","aria-controls":"overlay_menu"})):(o(),J(n(M),{key:1,icon:"pi pi-question",rounded:"",onClick:j})),w(n(Ye),{ref_key:"menu",ref:_,id:"overlay_menu",model:E.value,popup:!0},null,8,["model"])])]),a("div",wn,[a("div",null,[w(n(M),{icon:"pi pi-bars",variant:"text",rounded:"","aria-label":"Filter",onClick:G,"aria-haspopup":"true","aria-controls":"tab_menu"}),w(n(Ye),{ref_key:"tabMenu",ref:K,id:"tab_menu",model:e.tabItems,popup:!0},null,8,["model"])]),a("div",xn,[w(n(lt),{value:e.typeIndex,scrollable:"",showNavigators:!1},{default:B(()=>[w(n(rt),null,{default:B(()=>[(o(!0),d(H,null,ee(e.types,(V,ie)=>(o(),J(n(ct),{value:ie,onClick:()=>z.$emit("clickType",ie),class:"text-sm md:text-lg lg:text-xl"},{default:B(()=>[be(c(V),1)]),_:2},1032,["value","onClick"]))),256))]),_:1})]),_:1},8,["value"])])])]),w(n(ge),{visible:W.value,"onUpdate:visible":P[4]||(P[4]=V=>W.value=V),header:"结账",class:"flex flex-column",modal:!0,dismissableMask:!0,onHide:se},{default:B(()=>[a("div",null,[P[6]||(P[6]=a("label",null,"NIF:",-1)),w(n(Bt),{modelValue:O.value,"onUpdate:modelValue":P[1]||(P[1]=V=>O.value=V),inputId:"withoutgrouping",useGrouping:!1,fluid:"",class:"w-full m-1"},null,8,["modelValue"])]),a("div",$n,[a("label",null,c(z.$t("common.note"))+":",1),w(n(nt),{type:"text",modelValue:L.value,"onUpdate:modelValue":P[2]||(P[2]=V=>L.value=V),class:"w-full m-1"},null,8,["modelValue"])]),a("div",Tn,[w(n(M),{label:n(s)("common.send"),onClick:P[3]||(P[3]=V=>q())},null,8,["label"])])]),_:1},8,["visible"]),w(n(ge),{visible:i.value,"onUpdate:visible":P[5]||(P[5]=V=>i.value=V),modal:"",dismissableMask:"",class:"h-full",style:{width:"90vw",maxWidth:"40rem",minWidth:"20rem"},draggable:!1},{header:B(()=>[a("div",Cn,[w(n(Ke),{icon:"pi pi-question",shape:"circle"}),a("span",In,c(n(s)("takeawayHelper.dialogTitle")),1)])]),default:B(()=>[a("div",Dn,[a("span",Sn,c(n(s)("takeawayHelper.introduction")),1),a("span",Nn,c(n(s)("takeawayHelper.note_t"))+" "+c(n(s)("takeawayHelper.note_1")),1),a("div",Pn,[w(n(He),{class:"w-full max-w-xl mx-auto"},{default:B(()=>[w(n(Fe),{value:"0"},{default:B(()=>[w(n(Me),{class:"text-sm"},{default:B(()=>[be(c(n(s)("takeawayHelper.question_1")),1)]),_:1}),w(n(je),{class:"p-1"},{default:B(()=>[a("div",Bn,[a("span",null,c(n(s)("takeawayHelper.q_1_request_1")),1),a("span",null,c(n(s)("takeawayHelper.q_1_request_2")),1),a("span",null,c(n(s)("takeawayHelper.q_1_request_3")),1),a("span",null,c(n(s)("takeawayHelper.q_1_request_4")),1),a("span",null,c(n(s)("takeawayHelper.q_1_request_5")),1)])]),_:1})]),_:1})]),_:1})])])]),_:1},8,["visible"])],64))}},qn={__name:"SwipeHint",props:{size:{type:String,default:"8rem"},duration:{type:Number,default:6e3},position:{type:String,default:"bottom"}},setup(e){const t=e,s=S(!0);st(()=>{t.duration>0&&setTimeout(()=>{s.value=!1},t.duration);const y=()=>{s.value=!1,window.removeEventListener("touchstart",y)};window.addEventListener("touchstart",y)});const i=pe(()=>{let y={left:"50%",transform:"translateX(-50%)",zIndex:99999,opacity:.5,pointerEvents:"none",textAlign:"center",position:"fixed"};return t.position==="top"?y.top="15%":t.position==="center"?(y.top="50%",y.transform="translate(-50%, -50%)"):y.bottom="15%",y});return(y,u)=>s.value?(o(),d("div",{key:0,class:"swipe-hint",style:Pe(i.value)},[a("div",{class:"hand",style:Pe({width:e.size,height:e.size,backgroundImage:"url(/images/hand_finger.png)"})},null,4)],4)):C("",!0)}},Ln=Ce(qn,[["__scopeId","data-v-e5f3ff45"]]),zn={class:"w-full h-full flex flex-column"},On={style:{"overflow-x":"hidden","touch-action":"pan-y"},class:"h-full"},En={class:"fixed bottom-0 left-0 w-full h-3rem bg-primary-reverse p-3"},Rn={class:"h-full flex align-items-center justify-content-between w-full"},Vn={class:"m-2"},Mn={class:"m-2"},jn={style:{"max-height":"60vh","overflow-y":"auto","padding-bottom":"60px"}},Fn={class:"flex flex-column border-bottom-1"},Hn={key:0,class:"flex justify-content-between"},Kn={class:"flex flex-column"},Wn={class:"font-bold"},Un={class:"text-right"},Qn={key:1,class:"flex justify-content-between"},Jn={class:"flex flex-column"},Gn={class:"font-bold"},Xn={class:"text-right"},Yn={key:0},Zn={key:1,class:"flex flex-column"},eo={class:"flex flex-column"},to={class:"font-bold"},ao={class:"text-right"},so={class:"total-footer bg-primary-reverse"},et=5,Ne="order_time_key",no={__name:"HomePage",setup(e){const t=tt(),s=Dt(),{t:i}=fe(),{locale:y}=fe(),u=S(0),_=S(!1),E=S([""]),I=S(0),G=ne.cartItemCount,K=S(!1),W=S([]),O=S(0),L=S({}),oe=S(!1),q=Y.dishDatas,se=S(T.orderMenuTab),j=S(null),z=S(null),P=S([]),V=S([]),ie=S([]),ce=()=>{I.value<E.value.length-1&&(I.value++,me(),D(I.value))},k=()=>{I.value>0&&(I.value--,me(),D(I.value))};function N(l){}const h=(l,p,$,x)=>{T.rateDish(l,p,$),x&&ae.show_success(i("notification.rating_submitted"))},g=(l,p,$)=>{if(L.value.name=="XIAOXIONG® RAMEN"&&l.id===1){const x=l.dishes[p];let A;x.dishid==47?$?A=m(3,!0,1):A=m(3,!1,1):A=m(3,!0,1),A!==void 0&&b(A)}if(L.value.name=="Menu Almoço"&&l.id===3){const x=l.dishes[p];let A;[1427,41].includes(x.dishid)?$?A=m(4,!0,0):A=m(4,!1,0):A=m(4,!0,0),A!==void 0&&b(A)}};function m(l,p,$){if(L.value={...L.value,types:L.value.types.map(x=>x.id===l?{...x,enable:p,minQuantity:p?$:0}:x)},p===!1)return l}function b(l){!L.value||!Array.isArray(L.value.types)||(L.value={...L.value,types:L.value.types.map(p=>p.id===l?{...p,dishes:p.dishes.map($=>({...$,selected:!1}))}:p)})}function D(l){let p=T.getOrderMenuTab()[l];if(T.customDishAPI.customDishes.value.map(R=>R.name).includes(p)?(oe.value=!0,L.value=T.customDishAPI.customDishes.value.find(R=>R.name==p)):oe.value=!1,T.getMenu().length==0){console.log("exit");return}let A=q.value[l].mainDishes;Y.showDishList(A)}const r=()=>{T.refreshTableFromServer(),T.getTableTotalAmount(O),K.value=!0},f=(l,p,$)=>{console.log("update rating changed");const x=T.formatedMenu.value;for(const A of x)for(const R of A.dishes){if(R.dish.id===l){R.dish.likes=p,R.dish.rates=$,console.log("updated inside formatedMenu");return}for(const X of R.subItems)if(X.id===l){X.likes=p,X.rates=$,console.log("updated inside subItem");return}}},v=l=>{let p=l.id;l.org_id&&(p=l.org_id);for(let $=0;$<q.value.length;$++)if(q.value[$].id==p)for(const x in l){let A=x;x.startsWith("note")&&(A=A.replace("note","description")),q.value[$][A]=l[x]}};function U(){return new Promise(l=>{let p=()=>{const $=T.formatedMenu.value;$.length>0?l($):setTimeout(p,200)};p()})}function Z(){return new Promise(l=>{let p=()=>{const $=T.getOrderMenuTab();$.length>0?l($):setTimeout(p,200)};p()})}const ve=pe(()=>l=>{const p=T.dictinaryAPI.dictinary.value[l];return p?p[`text_${y.value.toLowerCase()}`]:l});Tt([()=>T.formatedMenu.value,()=>y.value,()=>T.orderMenuTab],([l,p])=>{if(!l||l.length===0){ie.value=[];return}const $={},x=T.orderMenuTab,A=l.map(Q=>({...Q,mainDishes:Q.dishes.map(le=>{const de=le.dish;if($[de.id])return $[de.id];const ht={...de,defaultName:de.name,name:ue(de,"name",p),note:ue(de,"note",p),subname:ue(de,"subname",p),quantity:0},mt=le.subItems.map(Qe=>{const Ee=Qe;return{...Qe,defaultName:de.name,name:ue(Ee,"name",p),note:ue(Ee,"note",p),subname:ue(Ee,"subname",p),quantity:0}}),Oe={...le,dish:ht,subItems:mt};return $[Oe.id]=Oe,Oe})})),R=Y.getAllIncrementedDish();R.length>0&&te.setCookie("cartDish_normal",JSON.stringify(R));const X=ne.cartDishs.value;X.length>0&&te.setCookie("cartDish_custom",JSON.stringify(X)),ie.value=A,q.value=ie.value,E.value=T.orderMenuTab,(R.length>0||X.length>0)&&(Y.cleanDishDataQty(),Y.updateDishDataQty(R)),se.value=x.map(Q=>{const le=T.dictinaryAPI.dictinary.value[Q];return le?le[`text_${y.value.toLowerCase()}`]:Q}),console.log("languagedMenu updated via watch:",ie.value)},{immediate:!0,deep:!0});function ue(l,p,$){return l?$==="en"?l[`${p}_en`]||l[p]:$==="zh"&&l[`${p}_cn`]||l[p]:""}async function Le(){await U();const l=await Z();T.isTakeaway(),T.onMenuItemChanged=v,T.onRatingChanged=f;const p=te.getCookie("cartDish_custom");if(p&&p!=="undefined")try{ne.cartDishs.value=JSON.parse(p)}catch(x){console.error("解析自定义菜失败:",x),ne.cartDishs.value=[]}const $=te.getCookie("cartDish_normal");if($&&$!=="undefined")try{const x=JSON.parse($);Y.updateDishDataQty(x)}catch(x){console.error("解析普通菜失败:",x)}for(let x=0;x<l.length;x++){const A=x;W.value.push({label:ve.value(l[x]),command:()=>{We(A),me()}})}u.value++}const me=()=>{It(()=>{const l=document.querySelector(".p-tablist-viewport"),p=document.querySelector(".p-tab.p-tab-active");if(l&&p){const $=p.offsetLeft-l.offsetWidth/2+p.offsetWidth/2;l.scrollTo({left:$,behavior:"smooth"})}})},We=l=>{D(l),I.value=l,me()},ut=()=>{var l=Y.getAllIncrementedDish();z.value.showDishList(l)};function Ie(){return T.getTable()}T.params.port,j.value=T.table.value.order;function dt(l){var p=i("notification.too_fast",{remainTime:l});ae.show_warn(p)}const pt=(l,p)=>{const $=[];for(let Q=0;Q<ne.cartDishs.value.length;Q++){var x=ne.cartDishs.value[Q];const le=T.formateCustomDishNotes(x.notesAndId);$.push({dishid:x.dishid,name:x.name,quantity:x.count,notes:le,limit:x.limit,price:x.dis_price?x.dis_price:x.price,dishNote:x.dishNote,category:x.category})}const A=Y.getAllIncrementedDish();for(let Q=0;Q<A.length;Q++){var x=A[Q];console.log("id cartDishs ;  ; : ",x),x.quantity>0&&$.push({dishid:x.id,name:x.defaultName,quantity:x.quantity,limit:x.limit,price:x.dis_price?x.dis_price:x.price,dishNote:x.dishNote})}if($.length===0)return ae.show_warn(i("notification.select_at_least_one")),!1;console.log("cart item:",$);const R=JSON.parse(te.getCookie(Ne)||"{}"),X=Date.now();if(!R.startTime||X-R.startTime>et*1e3)R.startTime=X,R.uniCode||(R.uniCode=Date.now().toString(36)+Math.random().toString(36).substring(2,5));else{const Q=et-parseInt((X-R.startTime)/1e3);dt(Q);return}return te.setCookie(Ne,JSON.stringify(R)),_.value=!0,T.submit_order({uniCode:R.uniCode,name:l.name,note:l.note,table:Ie(),items:$},Q=>{const le=JSON.parse(te.getCookie(Ne)||"{}");le.uniCode=void 0,te.setCookie(Ne,JSON.stringify(le)),p(Q)}),!0};function ft(){const l=te.getCookie("language");l&&(y.value=l)}function Ue(){for(let l=0;l<q.value.length;l++){const p=q.value[l];p.quantity=0}_.value=!1,ne.cleanAll()}st(async()=>{ft(),await Le(),D(I.value),T.clear_order_data=()=>{Ue()},T.setOnOrderConfirmed(l=>{Ue();const p=l;ae.show_success(i("notification.order_submitted",{id:p}))}),T.setOnShowError(l=>{_.value=!1,ae.show_error(l)})});function vt(){te.deleteCookie("login_time");const l=s.query.table;l?t.push({path:"/",query:{table:l}}):t.push({path:"/takeReserve"})}function ze(){console.log("save data cart");const l=Y.getAllIncrementedDish(),p=Y.getIdsAndQuantity(l);te.setCookie("cartDish_normal",JSON.stringify(p));const $=ne.cartDishs.value;te.setCookie("cartDish_custom",JSON.stringify($))}return Ct(()=>{ze()}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&ze()}),window.addEventListener("beforeunload",l=>{ze(),T.cleanup()}),(l,p)=>{const $=Be("touch"),x=Be("touch-options");return o(),d(H,null,[a("div",zn,[(o(),J(An,{key:u.value,types:se.value,typeIndex:I.value,tabItems:W.value,tableId:Ie(),onClickType:We,onSwitchToWelcome:vt},null,8,["types","typeIndex","tabItems","tableId"])),p[2]||(p[2]=a("div",{class:"pb-8"},null,-1)),p[3]||(p[3]=a("div",{class:"pb-4 sm:pb-5 md:pb-5 lg:pb-5"},null,-1)),w(Ln,{duration:3e3,position:"center",size:"3rem"}),we((o(),d("div",On,[oe.value?(o(),J(Qs,{key:0,currentCustomDish:L.value,onTypeClick:g},null,8,["currentCustomDish"])):(o(),J(Va,{key:1,updateCartItemCount:N,rateDish:h,likedItemsRef:P.value,dislikedItemsRef:V.value},null,8,["likedItemsRef","dislikedItemsRef"]))])),[[$,ce,"swipe",{left:!0,passive:!0}],[$,k,"swipe",{right:!0,passive:!0}],[x,{swipeTolerance:100}]]),p[4]||(p[4]=a("div",{class:"pb-6"},null,-1)),a("div",En,[a("div",Rn,[a("div",Vn,[Ie()?(o(),J(n(M),{key:0,label:l.$t("common.orders"),icon:"pi pi-list",class:"p-button-secondary",onClick:r},null,8,["label"])):C("",!0)]),a("div",Mn,[w(n(it),{value:n(G),severity:"danger",onClick:ut},{default:B(()=>p[1]||(p[1]=[a("i",{class:"pi pi-shopping-cart",style:{"font-size":"2rem"}},null,-1)])),_:1,__:[1]},8,["value"])])])])]),w(ms,{ref_key:"cartRef",ref:z,updateCartItemCount:N,checkout:pt,isTakeaway:!Ie()},null,8,["isTakeaway"]),w(n(ge),{visible:K.value,"onUpdate:visible":p[0]||(p[0]=A=>K.value=A),header:l.$t("common.completedOrders"),modal:"",style:{width:"80vw","max-width":"700px"}},{default:B(()=>{var A,R;return[a("div",jn,[a("div",Fn,[(A=O.value.adultPrice)!=null&&A.quantity&&O.value.adultPrice.quantity!=0?(o(),d("div",Hn,[a("div",Kn,[a("span",Wn,c(l.$t("common.adult")),1),a("small",null,c(l.$t("common.quantity"))+": "+c(O.value.adultPrice.quantity),1)]),a("div",Un,[a("span",null,"€"+c((Number(O.value.adultPrice.price)*O.value.adultPrice.quantity).toFixed(2)),1)])])):C("",!0),(R=O.value.childrenPrice)!=null&&R.quantity&&O.value.childrenPrice.quantity!=0?(o(),d("div",Qn,[a("div",Jn,[a("span",Gn,c(l.$t("common.children")),1),a("small",null,c(l.$t("common.quantity"))+": "+c(O.value.childrenPrice.quantity),1)]),a("div",Xn,[a("span",null,"€"+c((Number(O.value.childrenPrice.price)*O.value.childrenPrice.quantity).toFixed(2)),1)])])):C("",!0)]),n(T).table.value.order.length===0?(o(),d("div",Yn,c(l.$t("common.noOrders")),1)):(o(),d("div",Zn,[(o(!0),d(H,null,ee(n(T).table.value.order,(X,Q)=>(o(),d("div",{key:Q,class:"flex justify-content-between border-bottom-1 pb-2"},[a("div",eo,[a("span",to,c(n(T).getDishName(X)),1),a("small",null,c(l.$t("common.quantity"))+": "+c(X.quantity),1)]),a("div",ao,[a("span",null,"€"+c((X.price*X.quantity).toFixed(2)),1)])]))),128))]))]),a("div",so,c(l.$t("common.total"))+": €"+c(O.value.total),1)]}),_:1},8,["visible","header"])],64)}}},bo=Ce(no,[["__scopeId","data-v-65f5c40b"]]);export{bo as default};
