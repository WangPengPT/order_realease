import{s as j}from"./index-B07NjB2w.js";import{s as L,a as O}from"./index-BELaU5RE.js";import{s as P,a as q,b as z}from"./index-d3tY6OA-.js";import{s as E}from"./index-C6iDcrLD.js";import{s as R}from"./index-RULFIfwj.js";import{b as H}from"./index-BDCK0oxM.js";import{h as s,i as I,c as g,d as o,a as Q,e as C,w as c,n as x,j as U,o as d,F as G,E as J,f as K,C as W,t as X}from"./index-DwjZimQ8.js";import"./index-B5sTOHeQ.js";import"./index-BDTo8gTE.js";import"./index-C2lJ9uAK.js";import"./index-BqELxau_.js";import"./index-CI_sdK0r.js";import"./index-CxWPovPH.js";import"./index-BMjeSGCx.js";import"./index-BfvY6j-N.js";import"./index-CNS-XL_w.js";import"./index-CUcSJe8s.js";import"./index-DpYzxm2a.js";const Z={class:"flex flex-column absolute top-0 left-0 border-0 w-full"},tt={class:"card"},et={key:0},at={key:1,class:"card flex justify-content-center w-full"},ot={key:2,class:"card"},kt={__name:"OrderQuantity",setup(nt){const S=U(),m=s(new Date().getMonth()+1),l=s(new Date().getFullYear()),u=s([]),h=s(String(m.value).padStart(2,"0")),p=s(["normal","pie","bar"][0]),b=s(),D=()=>{getComputedStyle(document.body);const a=()=>`#${Math.floor(Math.random()*16777215).toString(16).padStart(6,"0")}`,t=u.value.length,e=Array.from({length:t},()=>a()),i=e.map(n=>{let y=n.substring(1),v=parseInt(y,16),$=Math.min((v>>16)+30,255),f=Math.min((v>>8&255)+30,255),w=Math.min((v&255)+30,255);return`rgb(${$},${f},${w})`});return{labels:u.value.map(n=>n.name),datasets:[{label:"",data:u.value.map(n=>n.quantity),backgroundColor:e,hoverBackgroundColor:i}]}},T=s(Array.from({length:l.value-2024+1},(a,t)=>{const e=2024+t;return{label:String(e),command:()=>F(e)}}));function F(a){console.log("切换到年份:",a),l.value=a}function B(a,t){const e=`${a}-${String(t).padStart(2,"0")}-01`,i=new Date(a,t,0).getDate(),n=`${a}-${String(t).padStart(2,"0")}-${String(i).padStart(2,"0")}`;return{startDate:e,endDate:n}}function _(a,t){const{startDate:e,endDate:i}=B(a,t);x.dataAnalizeApi.getTopDishesByDate(e,i,n=>{n.success?(u.value=n.data,b.value=D()):console.log("error: ",n.data)})}I(()=>{_(l.value,m.value)});function M(a){h.value=a,m.value=Number(a),_(l.value,m.value)}const A=s(Array.from({length:12},(a,t)=>{const e=String(t+1).padStart(2,"0");return{title:`${e}月`,value:e}})),N=()=>{_(l.value,m.value)};function V(){h.value=null;const a=`${l.value}-01-01`,t=`${l.value}-12-31`;x.dataAnalizeApi.getTopDishesByDate(a,t,e=>{e.success?(u.value=e.data,b.value=D()):console.log("error: ",e.data)})}function Y(){S.push("/")}return(a,t)=>{const e=H,i=R,n=E,y=z,v=q,$=P,f=O,w=L,k=j;return d(),g("div",Z,[o(i,{style:{height:"4rem"},class:"flex align-content-center bg-primary text-white"},{start:c(()=>[o(e,{icon:"pi pi-arrow-left",class:"mr-2 text-center",onClick:t[0]||(t[0]=r=>Y())})]),center:c(()=>[o(e,{icon:"pi pi-align-justify",onClick:t[1]||(t[1]=r=>p.value="normal"),class:"text-white"}),o(e,{icon:"pi pi-chart-bar",onClick:t[2]||(t[2]=r=>p.value="bar"),class:"text-white"}),o(e,{icon:"pi pi-chart-pie",onClick:t[3]||(t[3]=r=>p.value="pie"),class:"text-white"})]),_:1}),Q("div",tt,[o($,{scrollable:"",value:h.value,"onUpdate:value":t[4]||(t[4]=r=>h.value=r)},{default:c(()=>[o(v,null,{default:c(()=>[o(n,{label:`当年销售额:${l.value}`,model:T.value,onClick:V},null,8,["label","model"]),(d(!0),g(G,null,J(A.value,r=>(d(),K(y,{key:r.title,value:r.value,onClick:lt=>M(r.value)},{default:c(()=>[W(X(r.title),1)]),_:2},1032,["value","onClick"]))),128))]),_:1})]),_:1},8,["value"])]),p.value==="normal"?(d(),g("div",et,[o(w,{value:u.value,sortMode:"multiple",tableStyle:"min-width: 50rem",paginator:"",rows:10,rowsPerPageOptions:[10,20,50]},{paginatorstart:c(()=>[o(e,{type:"button",icon:"pi pi-refresh",text:"",onClick:N})]),default:c(()=>[o(f,{field:"_id",header:"编号",sortable:"",style:{width:"25%"}}),o(f,{field:"name",header:"名字",sortable:"",style:{width:"25%"}}),o(f,{field:"quantity",header:"数量",sortable:"",style:{width:"25%"}})]),_:1},8,["value"])])):C("",!0),p.value==="pie"?(d(),g("div",at,[o(k,{type:"pie",data:b.value,class:"w-7"},null,8,["data"])])):C("",!0),p.value==="bar"?(d(),g("div",ot,[o(k,{type:"bar",data:b.value},null,8,["data"])])):C("",!0)])}}};export{kt as default};
