import{s as se,_ as ae,S as oe,P as ne,a as ie}from"./pagination-BTiGEvt1.js";import{u as U,r as f,c as N,a as r,o as re,b as ue,w as ce,d as de,e as me,m as S,f as n,g as i,h as l,i as V,j as u,k as a,n as j,t as c,F as _,l as y,p as o,q as O,s as T}from"./index-C6fklXNE.js";import{s as fe}from"./index-DdJMi525.js";import{s as p}from"./index-wtMFRQ64.js";import{_ as pe,s as ve,a as ge,b as _e,c as he}from"./_plugin-vue_export-helper-CFgEgiPP.js";import{s as be,a as we}from"./index-CnhVicv4.js";import{s as xe}from"./index-CAre9-Lg.js";import"./index-CUeHgMXh.js";import"./index-JZmjnyU2.js";const ye=["src"],ke=["onClick"],$e=["src"],Ce={class:"absolute top-0 border-0 right-0 p-2 flex flex-column flex align-items-center"},Ie={class:"m-3 max-w-screen"},Pe={key:0,class:j(["w-full","p-4"])},Ne=["src"],Se={key:0,class:"text-center p-1"},Fe={key:1,class:"text-center p-1"},Be={class:"flex w-full"},Le={class:"flex flex-column"},Ve={class:"w-full text-sm break-words whitespace-pre-wrap px-2"},Oe=["src"],Te={class:"pt-5 pb-5"},je={class:"border-400 border-round border-1 p-3"},Re={class:"text-center font-bold"},ze={key:0,class:"w-full overflow-hidden"},Ae=["src"],qe={class:"w-full overflow-hidden",style:{"aspect-ratio":"2 / 1.5"}},De=["src"],Ue={class:"font-bold"},Ee={class:"flex flex-column"},Ge={class:"flex flex-row justify-content-between w-full"},Me={key:1,class:"flex flex-row w-full justify-content-center"},We={key:0,class:"fixed right-0 bottom-0 p-4",style:{"z-index":"2"}},Xe={class:"mt-2"},He={class:"flex justify-content-end mt-2"},Je={__name:"Welcome",props:["switchTo"],setup(Ke){const h=[{label:"pt",imagePath:"flags/pt.png"},{label:"en",imagePath:"flags/en.png"},{label:"zh",imagePath:"flags/zh.png"}],R=me(),E=de(),{locale:b}=U(),{t:m}=U(),w=f(null),F=f(!0);f([]);const z=f(),G=N(()=>r.getPickupDate("restaurantName")),d=f({});function M(){const e=localStorage.getItem("language");e&&(b.value=e)}let k=null;function W(){return new Promise(e=>{let t=()=>{const s=r.currentPage.value;s&&Object.keys(s).length>0?e(s):setTimeout(t,200)};t()})}re(async()=>{var e;M(),await W(),d.value=r.currentPage.value,console.log("page :",d.value),k=new IntersectionObserver(t=>{t.forEach(s=>{s.isIntersecting?F.value=!0:F.value=!1})},{threshold:.1}),(e=w.value)!=null&&e.$el&&k.observe(w.value.$el)}),ue(()=>{var e;k&&((e=w.value)!=null&&e.$el)&&k.unobserve(w.value.$el)}),ce(()=>r.currentPage.value,e=>{e&&(d.value=e)},{immediate:!0});const X=N(()=>{const e="/";switch(b.value.toLowerCase()){case"pt":return e+h[0].imagePath;case"en":return e+h[1].imagePath;case"zh":return e+h[2].imagePath;default:return e+h[1].imagePath}});function v(e){return e[`text_${b.value.toLowerCase()}`]}const H=Date.now(),A=localStorage.getItem("login_time");let B;A&&(B=JSON.parse(A));const J=N(()=>h.filter(e=>e.label!==b.value.toLowerCase()).map(e=>({...e,command:()=>{b.value=e.label,K(e.label)}})));function K(e){localStorage.setItem("language",e)}function q(e){window.open(e,"_blank")}function Q(){R.push("/takeReserve")}const Y=e=>{z.value.toggle(e)};B&&(H-B>60*5*1e3?localStorage.clear():L());function L(){const e=E.query.table;R.push({path:"/table",query:{table:e}})}const Z=N(()=>[{label:m("common.options"),items:[{label:m("common.pay"),icon:"pi pi-wallet",command:()=>{ee()}},{label:m("common.call"),icon:"pi pi-user-plus",command:()=>{r.send_cmd(r.getTable(),{cmd:"call"}),S.show_info(m("notification.call_msg"))}}]}]);function D(e){return d.value.data.options[e]?"font-bold":""}const $=f(!1),C=f(),x=f();function ee(){$.value=!0}function te(){e(C.value)?r.send_cmd(r.getTable(),{cmd:"pay",nif:C.value,note:x.value},t=>{t.success?(S.show_info(m("notification.pay_msg")),$.value=!1):S.show_error(m("common.failed"))}):S.show_warn(m("notification.cancel_msg"));function e(t){return!t||t.toString().length===9||t.toString().length===0}}function le(){x.value&&(x.value=void 0)}return(e,t)=>(o(),n(_,null,[i(a(se),{model:J.value,direction:"down",transitionDelay:80,class:"absolute top-0 left-0 border-0"},{button:u(({toggleCallback:s})=>[i(a(p),{outlined:"",onClick:s,class:"custom-clean-button"},{default:u(()=>[l("img",{src:X.value,style:{width:"38px",height:"38px"}},null,8,ye)]),_:2},1032,["onClick"])]),item:u(({item:s,toggleCallback:I})=>[l("div",{class:"flex flex-col items-center justify-between",onClick:I},[l("img",{src:s.imagePath,alt:"lang",style:{width:"38px",height:"38px"}},null,8,$e)],8,ke)]),_:1},8,["model"]),l("div",Ce,[l("div",null,[i(a(p),{icon:"pi pi-bell",rounded:"","aria-label":"Filter",onClick:Y,"aria-haspopup":"true","aria-controls":"overlay_menu",size:"small",style:{width:"42px",height:"42px"}}),i(a(fe),{ref_key:"menu",ref:z,id:"overlay_menu",model:Z.value,popup:!0},null,8,["model"])]),l("div",null,[i(a(p),{icon:"pi pi-instagram",class:"custom-clean-button",onClick:t[0]||(t[0]=()=>{})})])]),l("div",Ie,[d.value?(o(),n("div",Pe,[l("img",{src:a(r).pathFormated(d.value.data.logoPath),alt:"Logo",class:"max-w-6rem h-auto w-full mx-auto block"},null,8,Ne),d.value.data.restaurantName?(o(),n("h3",Se,c(d.value.data.restaurantName),1)):(o(),n("h3",Fe,c(G.value),1))])):V("",!0),l("div",Be,[i(a(ve),{class:"w-full max-w-xl mx-auto"},{default:u(()=>[(o(!0),n(_,null,y(d.value.data.titles,(s,I)=>(o(),O(a(ge),{value:I},{default:u(()=>[i(a(_e),null,{default:u(()=>[T(c(v(s.title)),1)]),_:2},1024),i(a(he),{class:"p-1"},{default:u(()=>[l("div",Le,[l("div",Ve,c(v(s.description)),1),l("img",{src:a(r).pathFormated(s.image.src),class:"max-w-5rem h-auto block mr-auto p-1 invert-image"},null,8,Oe)])]),_:2},1024)]),_:2},1032,["value"]))),256))]),_:1})]),l("div",Te,[i(a(p),{ref_key:"orderButtonRef",ref:w,onClick:t[1]||(t[1]=s=>L()),class:"w-full font-bold",style:{"border-radius":"20px"}},{default:u(()=>[T(c(e.$t("home.orderNow")),1)]),_:1},512)]),(o(!0),n(_,null,y(d.value.data.frames,(s,I)=>(o(),n("div",null,[l("div",je,[(o(!0),n(_,null,y(s,(g,Qe)=>(o(),n("div",null,[l("h1",Re,c(v(g.title)),1),g.images.length<=1?(o(),n("div",ze,[l("img",{src:a(r).pathFormated(g.images[0].src),class:"w-full"},null,8,Ae)])):(o(),O(a(ie),{key:1,"slides-per-view":1,loop:!0,class:"w-full",modules:[a(ne)],pagination:{clickable:!0}},{default:u(()=>[(o(!0),n(_,null,y(g.images,(P,Ye)=>(o(),O(a(oe),null,{default:u(()=>[l("div",qe,[l("img",{src:a(r).pathFormated(P.src),class:"w-full h-full",style:{"object-fit":"cover"}},null,8,De)])]),_:2},1024))),256))]),_:2},1032,["modules"])),l("h4",Ue,c(v(g.subtitle)),1),(o(!0),n(_,null,y(g.descriptions,P=>(o(),n("div",null,[l("div",Ee,[l("div",Ge,[l("span",{class:j(D(0))},c(v(P.left)),3),l("span",{class:j(D(1))},c(v(P.right)),3)])])]))),256))]))),256))]),t[10]||(t[10]=l("div",{class:"p-4"},null,-1))]))),256)),a(r).testEnvironment.value?(o(),n("div",Me,[i(a(p),{class:"m-3 custom-bottom-button",onClick:t[2]||(t[2]=s=>Q())},{default:u(()=>[T(c(e.$t("home.reserve")),1)]),_:1})])):V("",!0),l("div",{class:"absoluto top-0 text-center text-xs p-2 underline cursor-pointer",onClick:t[3]||(t[3]=s=>q("https://5am3eq-wc.myshopify.com/"))}," ©2025 XIAOXIONG® v2.0.7 "),l("div",{class:"absoluto top-0 text-center text-xs p-2",onClick:t[4]||(t[4]=s=>q("https://5am3eq-wc.myshopify.com/"))},t[11]||(t[11]=[l("img",{src:ae,style:{width:"7rem"}},null,-1)]))]),F.value?V("",!0):(o(),n("div",We,[i(a(p),{rounded:"","aria-label":"Star",onClick:t[5]||(t[5]=s=>L()),class:"w-full font-bold p-button-lg shadow-6"},{default:u(()=>t[12]||(t[12]=[l("span",{class:"material-icons text-5xl"},"restaurant",-1)])),_:1,__:[12]})])),i(a(be),{visible:$.value,"onUpdate:visible":t[9]||(t[9]=s=>$.value=s),header:"结账",class:"flex flex-column",modal:!0,dismissableMask:!0,onHide:le},{default:u(()=>[l("div",null,[t[13]||(t[13]=l("label",null,"NIF:",-1)),i(a(xe),{modelValue:C.value,"onUpdate:modelValue":t[6]||(t[6]=s=>C.value=s),inputId:"withoutgrouping",useGrouping:!1,fluid:"",class:"w-full m-1"},null,8,["modelValue"])]),l("div",Xe,[l("label",null,c(e.$t("common.note"))+":",1),i(a(we),{type:"text",modelValue:x.value,"onUpdate:modelValue":t[7]||(t[7]=s=>x.value=s),class:"w-full m-1"},null,8,["modelValue"])]),l("div",He,[i(a(p),{label:a(m)("common.send"),onClick:t[8]||(t[8]=s=>te())},null,8,["label"])])]),_:1},8,["visible"])],64))}},rt=pe(Je,[["__scopeId","data-v-ca978c88"]]);export{rt as default};
