import{s as st}from"./index-ODA1w0OE.js";import{a as at}from"./index-BGHIHGDx.js";import{s as it}from"./index-BWYGgLIH.js";import{s as rt}from"./index-BcMNVE90.js";import{s as ut}from"./index-Cy05Lfl4.js";import{s as dt}from"./index-YBf3aQC3.js";import{s as ct}from"./index-DifZgUYA.js";import{s as mt}from"./index-610TIOqT.js";import{b as vt}from"./index-DFRE_58V.js";import{s as ft}from"./index-8yYETk9x.js";import{s as pt}from"./index-B0XAJw-Q.js";import{_ as gt}from"./default_image-wmO2RpFB.js";import{x as bt,q as _t,u as ht,h as _,n as f,s as Q,i as yt,c as p,a as o,d as n,w as v,l as a,F as $,o as r,f as k,e as g,t as i,C as ue,E as T}from"./index-COjh2_nl.js";import{M as q}from"./MsgBox-CkEAX6bb.js";import"./index-Bh0a_kRD.js";import"./index-BLhRM1HA.js";import"./index-EUIeiTN3.js";import"./index-D1l17qSA.js";import"./index-UPliuns3.js";import"./index-goSerjr-.js";import"./index-smnRTjg1.js";const wt={class:"w-full h-full flex justify-content-center overflow-auto"},xt={class:"text-5xl ml-3"},Pt={class:"flex flex-column justify-content-center gap-3 p-3 h-full"},kt={class:"flex flex-wrap justify-content-between align-items-center"},Vt={class:"flex flex-wrap justify-content-between align-items-center"},Dt={class:"flex flex-wrap justify-content-between align-items-center"},It={class:"flex flex-wrap justify-content-between align-items-center"},Ct={class:"font-bold text-lg"},Ut={style:{"max-width":"75%"}},Ft={style:{"max-width":"75%"}},$t={style:{"max-width":"75%"}},St={style:{"max-width":"75%"}},jt={style:{"max-width":"75%"}},Et={style:{"max-width":"75%"}},Rt={class:"flex flex-wrap justify-content-between align-items-center"},Tt={class:"font-bold text-lg"},At={class:"font-bold"},Nt={class:"flex flex-wrap justify-content-between align-items-center"},Ot={class:"font-bold text-lg"},Bt={style:{"max-width":"75%"}},Mt={style:{"max-width":"75%"}},Wt={class:"flex flex-wrap justify-content-between align-items-center"},Ht={class:"font-bold text-lg"},Lt={class:"font-bold"},Kt={class:"flex flex-wrap justify-content-between align-items-center"},zt={class:"font-bold text-lg"},qt={style:{"max-width":"75%"}},Yt={style:{"max-width":"75%"}},Xt={style:{"max-width":"75%"}},Gt={style:{"max-width":"75%"}},Jt={style:{"max-width":"75%"}},Qt={class:"flex flex-wrap justify-content-between align-items-center"},Zt={class:"font-bold text-lg"},el={class:"font-bold"},tl={key:0,class:"mt-3 flex flex-column gap-2"},ll={class:"flex flex-wrap justify-content-between align-items-center"},nl={class:"font-bold text-lg"},ol={class:"flex flex-wrap justify-content-between align-items-center"},sl={class:"font-bold text-lg"},al={key:0},il={class:"flex flex-row justify-content-between align-items-center"},rl={class:"gap-3 flex flex-row align-items-center"},ul={class:"flex flex-wrap justify-content-between align-items-center"},dl={class:"font-bold text-lg"},cl={class:"flex flex-wrap justify-content-between align-items-center"},ml={class:"font-bold text-lg"},vl={class:"flex flex-wrap justify-content-between align-items-center"},fl={class:"font-bold text-lg"},pl={style:{"max-width":"75%"}},gl={class:"flex flex-column"},bl={class:"font-bold"},_l={for:"on_label"},hl={for:"on_label"},yl={class:"flex flex-column"},wl={class:"font-bold"},xl={for:"on_label"},Pl={for:"on_label"},kl={key:1,class:"flex justify-content-between align-items-center m-1 gap-2"},Vl={class:"font-bold"},Dl={for:"on_label"},Il={class:"flex flex-column"},Cl={key:0,class:"flex justify-content-between align-items-center m-1 gap-2"},Ul={for:"on_label"},Fl={key:1,class:"flex justify-content-between align-items-center m-1 gap-2"},$l={class:"flex flex-column justify-content-center align-items-center m-1 gap-2"},Sl={class:"flex flex-wrap justify-content-center align-items-center m-1 gap-2"},jl={class:"gap-2"},El={key:0,class:"font-bold m-1"},Rl={key:2,class:"font-bold m-1"},Tl={key:2,class:"flex justify-content-between align-items-center m-1 gap-2"},Al={class:"flex flex-column justify-content-center align-items-center m-1 gap-2"},Nl={class:"flex flex-wrap justify-content-center align-items-center m-1 gap-2"},Ol={class:"gap-2"},Bl={key:0,class:"font-bold m-1"},Ml={key:1,class:"m-1"},Wl={class:"font-bold"},Hl={key:3,class:"flex flex-column gap-2"},Ll={class:"flex flex-column gap-1"},Kl={class:"flex flex-column gap-1"},zl={key:4,class:"flex flex-column"},ql={key:0,class:"mt-3"},Yl={for:"on_label"},Xl={key:1,class:"mt-3"},Gl={for:"on_label"},Jl={key:2,class:"mt-3"},Ql={class:"w-full grid"},Zl={for:"on_label"},en={for:"on_label"},tn={for:"on_label"},ln={for:"on_label"},nn={for:"on_label"},on={key:3,class:"mt-3"},sn={for:"on_label"},an={key:4,class:"mt-3 flex flex-column align-items-center justify-content-center gap-2",style:{"max-width":"500px","max-height":"600px"}},rn=["src"],un={key:5,class:"flex justify-content-between align-items-center mt-3 gap-2"},dn={for:"on_label"},cn={for:"on_label"},mn={class:"mt-2 w-full flex flex-wrap"},Rn={__name:"SettingPage",setup(vn){const he=bt(),{t}=_t(),W=ht(),L=_(!1),Y=_(!1),X=_(!1),Z=_(),ee=_(),G=_();q.toast=W;const ye=_(Array.from({length:7},(s,e)=>({value:e,label:t("settingPage.week."+f.getCurrentWeekDayName(e))}))),de=_(Array.from({length:31},(s,e)=>(e+1).toString().padStart(2,"0"))),we=["order","delivery","reserver","isFestiveDay","checkIP","useChildrenDiscount","useFandays"],h=Q(()=>{const s={};for(const e of we)s[e]=f.getSettingsValue(e);return s}),xe=Q(()=>f.customDishApi.getSimplyCustomDishes()),te=f.developerMode;function A(s,e){f.updateSetting(s,e,F)}const Pe=s=>s.includes("Aleatória®")?t("common.Sushi"):s.includes("MY BOX")?t("common.my_box"):s.includes("Poke Bowl")?t("common.Poke"):t(`common.${s}`);function ke(){L.value=!0,Z.value=f.getPriceDataValue("weekPrice")}function Ve(){Y.value=!0,ee.value=f.getPriceDataValue("childrenWeekPrice"),G.value=f.getPriceDataValue("childrenPricePercentage")}function N(s,e){switch(K.value=s,j.value=e,s){case"delivery":D.value=f.getPickupDataValue(e);break;case"reserver":e==="intervalDiscount"&&(e="beginEndInterval"),D.value=f.getReserverDataValue(e);break}J.value=!0}function ce(s,e){O.value=s,e==="editPickupReserverBeginEndInterval"?le.value=!0:ne.value=!0}const S=_(),w=_();function H(s){switch(s){case"restaurantName":case"phoneNumber":case"location":case"latitudeAndLongitude":case"instagramUrl":case"logoPath":S.value=s,w.value=f.getShopInfoValue(s);break;default:console.log("showEditShopInfoDialog unknown key:",s)}X.value=!0}function De(){f.customDishApi.reloadReforceDefaultCustomDishData(s=>{s.success?F(!0,"重置","自定义菜重置成功"):F(!1,"重置","自定义菜重置失败")})}function Ie(){me(Z)?(f.updatePricesData("weekPrice",F),L.value=!1):F(!1,"设置价格","价格不能为负")}function Ce(){me(ee)&&G.value>=0?(h.value.useChildrenDiscount?f.updatePricesData("childrenPricePercentage",F):f.updatePricesData("childrenWeekPrice",F),Y.value=!1,L.value=!1):F(!1,"设置价格","价格/折扣不能为负")}function me(s){for(const e in s.value)for(const d in s.value[e])if(s.value[e][d]<0)return!1;return!0}function Ue(s,e){if(s=="beginEndInterval"&&!d(e)){console.log("valid false");return}switch(K.value){case"delivery":f.updatePickupData(s,e,F);break;case"reserver":s==="intervalDiscount"&&(s="beginEndInterval"),f.updateReserverData(s,e,F);break;default:console.log("savePickupReserverData switch default case")}J.value=!1;function d(U){if(m(U)||!I(U))return!1;return!0;function m(u){for(const c in u)for(const x in u[c])if(u[c][x]&&(b(u[c][x].begin)||b(u[c][x].end)))return W.add({severity:"error",summary:t("common.error"),detail:t("settingPage.week."+c)+" "+t("settingPage.isEmpty"),life:2e3}),!0;return!1}function b(u){for(const c in u)if(u[c]===void 0||u[c]==="")return console.log(u,c,u[c]),!0;return!1}function I(u){for(const c in u)if(E(u[c]))return W.add({severity:"error",summary:t("common.error"),detail:t("settingPage.week."+c)+" "+t("settingPage.isErrorValues"),life:2e3}),!1;return!0}function E(u){if(console.log(u),Object.keys(u).length==0)return!1;for(let V=0;V<u.length-1;V++)if(x(u[V].begin)>x(u[V].end)||x(u[V].end)>x(u[V+1].begin))return!0;const c=u[u.length-1];return x(c.begin)>x(c.end);function x(V){return Number(V.hour)*60+Number(V.minute)}}}}function Fe(s,e){console.log("key",s,"value",e),f.updateShopInfo(s,e,F),X.value=!1}function $e(){f.refreshPickupReserverData(K.value)}function F(s,e,d=""){W.add({severity:s?"success":"error",summary:t(s?"common.success":"common.error"),detail:t("common.edit")+t("settingPage."+Se(e))+t("common."+(s?"success":"failed")+d),life:1e3})}function Se(s){switch(s){case"delivery":return"takeAwayFeature";case"reserver":return"reserverFeature";case"isFestiveDay":return"useHolidayPrice";case"hasBibimbap":return"showBibimbap";case"hasBox":return"showBow";case"checkIP":return"wifiOrder";case"useChildrenDiscount":case"childrenPricePercentage":return"setChildrenPriceOn1";default:return console.log(s,"没写 i18n 赶紧写"),s}}const J=_(!1),K=_(),j=_(),O=_(),le=_(!1),ne=_(!1),D=_();function je(){const s=D.value[O.value];s[s.length]={begin:{hour:void 0,minute:void 0},end:{hour:void 0,minute:void 0}}}function Ee(s){he.require({message:t("settingPage.removeInterval"),header:t("settingPage.removeIntervalHeader"),icon:"pi pi-trash",rejectProps:{label:t("common.cancel"),severity:"secondary",outlined:!0},acceptProps:{label:t("common.confirm"),severity:"danger"},accept:()=>{D.value[O.value].splice(s,1)},reject:()=>{}})}const ve=_(null),oe=_(null),fe=_(null),pe=_(null),se=_(null),ge=_(null),ae=_(null),ie=_(null);function Re(s){ae.value=s.target.files[0],Be()}function Te(){var s;(s=ge.value)==null||s.click()}function Ae(){var s;(s=pe.value)==null||s.click()}function Ne(s){ie.value=s.target.files[0],Oe()}function Oe(){if(!ie.value)return alert("请选择文件");const s=new FormData;s.append("page",ie.value),f.dataTransfer.pageUserDatas(s)}function Be(){if(!ae.value)return alert("请选择文件");const s=new FormData;s.append("file",ae.value),f.dataTransfer.importUserDatas(s)}function Me(s){oe.value=s.target.files[0],ze()}function We(){var s;(s=ve.value)==null||s.click()}function He(s){se.value=s.target.files[0],Ke()}function Le(){var s;(s=fe.value)==null||s.click()}function Ke(){if(!se.value)return alert("请选择文件");const s=new FormData;s.append("file",se.value),f.dataTransfer.importMenuDatas(s)}function ze(){if(!oe.value)return alert("请选择文件");const s=new FormData;s.append("file",oe.value),f.dataTransfer.importAppStateDatas(s)}function qe(){f.dataTransfer.downloadFromServer()}function Ye(s){f.customDishApi.updateCustomDishEnable(s,e=>{e.success?q.show_success(t("notification.updateSuccess")):q.show_warn(t("notification.updateFailed"))})}const Xe=Q(()=>{const s=f.permissionsControl.value,e="点餐:"+(s.order?"开":"关"),d="外卖:"+(s.delivery?"开":"关"),U="订台:"+(s.reserver?"开":"关"),m="VIP:"+(s.vip?"开":"关"),b=" | ";return e+b+d+b+U+b+m}),Ge=_([{label:t("settingPage.filterOptions.all"),icon:"pi pi-cog",command:()=>{z("all")}},{label:t("settingPage.filterOptions.shopInfo"),icon:"pi pi-shop",command:()=>{z("shopInfo")}},{label:t("settingPage.filterOptions.order"),icon:"pi pi-pencil",command:()=>{z("order")}},{label:t("settingPage.filterOptions.deliveryReserver"),icon:"pi pi-shopping-bag",command:()=>{z("deliveryReserver")}},{label:t("settingPage.filterOptions.others"),icon:"pi pi-circle",command:()=>{z("others")}}]),Je=["all","deliveryReserver","order","shopInfo","others"],B=_({});yt(()=>{Qe()});function Qe(){for(const s of Je)B.value[s]=!1;B.value.all=!0}function z(s){for(const e in B.value)B.value[e]=!1;B.value[s]=!0}function C(s){return B.value.all||B.value[s]}const Ze=Q(()=>[{name:t("menuPage.dineIn")+" & "+t("menuPage.takeAway"),code:"DINEIN&TAKEAWAY"},{name:t("menuPage.takeAway"),code:"TAKEAWAY"},{name:t("menuPage.dineIn"),code:"DINEIN"}]);function et(s,e){f.customDishApi.updateCustomDishSellType(e.id,s,d=>{d.success?q.show_success(t("notification.updateSuccess")):q.show_warn(t("notification.updateFailed"))})}const be=_(null);function _e(){be.value.click()}function tt(s){const e=s.target.files[0];e&&lt(e)}async function lt(s){let e;e="/upload_image";const U=new FormData,m=await nt(s);U.append("image",m);let b=s.size/1e3;b=b.toFixed(2);let I=m.size/1e3;I=I.toFixed(2),console.log("file size: "+b+"k"),console.log("compressed size: "+I+"k");try{const E=await fetch(e,{method:"POST",body:U});if(!E.ok)throw new Error(t("common.uploadFailed"));const u=await E.json();w.value=u.imageUrl,W.add({severity:"success",summary:t("common.success"),detail:t("menuPage.uploadSucMsg"),life:3e3})}catch(E){console.error("上传错误",E),W.add({severity:"error",summary:t("common.error"),detail:t("menuPage.uploadFailMsg"),life:3e3})}}async function nt(s){return new Promise((e,d)=>{const U=new FileReader;U.onload=m=>{const b=new Image;b.onload=()=>{let u=b.width,c=b.height;u>c?u>512&&(c*=512/u,u=512):c>512&&(u*=512/c,c=512);const x=document.createElement("canvas"),V=x.getContext("2d");x.width=u,x.height=c,s.type==="image/png"&&(V.fillStyle="#ffffff",V.fillRect(0,0,x.width,x.height)),V.drawImage(b,0,0,u,c);const M=s.type==="image/png"?"image/png":"image/jpeg",l=M==="image/png"?.9:.7;x.toBlob(P=>{e(new File([P],s.name,{type:M,lastModified:Date.now()}))},M,l)},b.onerror=d,b.src=m.target.result},U.onerror=d,U.readAsDataURL(s)})}function ot(){w.value="/icons/main.png"}return(s,e)=>{const d=pt,U=ft,m=vt,b=mt,I=ct,E=dt,u=ut,c=rt,x=it,V=at,M=st;return r(),p($,null,[o("div",wt,[n(b,{class:"flex flex-column h-full mt-1 lg:p-5 shadow-none",style:{"max-width":"1000px"}},{title:v(()=>[o("label",xt,i(a(t)("settingPage.settings")),1),n(d),n(U,{class:"border-none p-0",model:Ge.value,breakpoint:"369px"},null,8,["model"]),n(d)]),content:v(()=>[o("div",Pt,[a(te)?(r(),k(b,{key:0,class:"shadow-5"},{content:v(()=>[o("div",kt,[e[59]||(e[59]=o("label",{class:"font-bold text-lg"},i("数据导入导出"),-1)),n(d),e[60]||(e[60]=o("label",null,i("导出所有数据"),-1)),n(m,{label:"导出",onClick:e[0]||(e[0]=l=>qe()),class:"unchange_white_text_button"}),n(d),o("input",{type:"file",onChange:Me,accept:".json",style:{display:"none"},ref_key:"appStatefileInput",ref:ve},null,544),e[61]||(e[61]=o("label",null,i("导入AppState数据"),-1)),n(m,{label:"导入",onClick:We,class:"unchange_white_text_button"}),n(d),o("input",{type:"file",onChange:He,accept:".json",style:{display:"none"},ref_key:"menufileInput",ref:fe},null,544),e[62]||(e[62]=o("label",null,i("导入Menu数据"),-1)),n(m,{label:"导入",onClick:Le,class:"unchange_white_text_button"}),n(d),o("input",{type:"file",onChange:Re,accept:".json",style:{display:"none"},ref_key:"usersfileInput",ref:ge},null,544),e[63]||(e[63]=o("label",null,i("导入Users数据"),-1)),n(m,{label:"导入",onClick:Te,class:"unchange_white_text_button"}),n(d),o("input",{type:"file",onChange:Ne,accept:".zip",style:{display:"none"},ref_key:"pagefileInput",ref:pe},null,544),e[64]||(e[64]=o("label",null,i("导入主页数据"),-1)),n(m,{label:"导入",onClick:Ae,class:"unchange_white_text_button"}),n(d),o("label",null,i(Xe.value),1)])]),_:1})):g("",!0),a(te)?(r(),k(b,{key:1,class:"shadow-5"},{title:v(()=>[e[65]||(e[65]=ue(i("恢复按钮")+" ",-1)),n(d)]),content:v(()=>[o("div",Vt,[e[66]||(e[66]=o("label",null,i("重新恢复菜品默认排序"),-1)),n(m,{label:"恢复",onClick:e[1]||(e[1]=l=>a(f).menuApi.defaultMenuOrder()),class:"unchange_white_text_button"})]),n(d),o("div",Dt,[e[67]||(e[67]=o("label",null,i("重新恢复自定义菜初始数据"),-1)),n(m,{label:"恢复",onClick:e[2]||(e[2]=l=>De()),class:"unchange_white_text_button"})])]),_:1})):g("",!0),C("shopInfo")?(r(),k(b,{key:2,class:"shadow-5"},{content:v(()=>[o("div",It,[o("label",Ct,i(a(t)("settingPage.shopInformation.title")),1),n(d),o("label",Ut,i(a(t)("settingPage.shopInformation.restaurantName")),1),n(m,{label:a(t)("common.edit"),onClick:e[3]||(e[3]=l=>H("restaurantName")),class:"unchange_white_text_button"},null,8,["label"]),n(d),o("label",Ft,i(a(t)("settingPage.shopInformation.location")),1),n(m,{label:a(t)("common.edit"),onClick:e[4]||(e[4]=l=>H("location")),class:"unchange_white_text_button"},null,8,["label"]),n(d),o("label",$t,i(a(t)("settingPage.shopInformation.phoneNumber")),1),n(m,{label:a(t)("common.edit"),onClick:e[5]||(e[5]=l=>H("phoneNumber")),class:"unchange_white_text_button"},null,8,["label"]),n(d),o("label",St,i(a(t)("settingPage.shopInformation.logoPath")),1),n(m,{label:a(t)("common.edit"),onClick:e[6]||(e[6]=l=>H("logoPath")),class:"unchange_white_text_button"},null,8,["label"]),n(d),o("label",jt,i(a(t)("settingPage.shopInformation.instagramUrl")),1),n(m,{label:a(t)("common.edit"),onClick:e[7]||(e[7]=l=>H("instagramUrl")),class:"unchange_white_text_button"},null,8,["label"]),n(d),o("label",Et,i(a(t)("settingPage.shopInformation.latitudeAndLongitude")),1),n(m,{label:a(t)("common.edit"),onClick:e[8]||(e[8]=l=>H("latitudeAndLongitude")),class:"unchange_white_text_button"},null,8,["label"])])]),_:1})):g("",!0),C("deliveryReserver")?(r(),k(b,{key:3,class:"shadow-5"},{content:v(()=>[o("div",Rt,[o("label",Tt,i(a(t)("settingPage.takeAwayFeature")),1),n(I,{modelValue:h.value.delivery,"onUpdate:modelValue":[e[9]||(e[9]=l=>h.value.delivery=l),e[10]||(e[10]=l=>A("delivery",h.value.delivery))],disabled:!a(f).permissionsControl.value.delivery},null,8,["modelValue","disabled"]),n(d),o("div",null,[o("label",null,i(a(t)("settingPage.takeAwayFeatureOn")),1),o("label",At,i(" "+(a(f).permissionsControl.value.delivery?"":a(t)("settingPage.permissionReminder"))),1)])]),h.value.delivery&&a(f).permissionsControl.value.delivery&&C("deliveryReserver")?(r(),k(b,{key:0,class:"shadow-5 mt-3"},{content:v(()=>[o("div",Nt,[o("label",Ot,i(a(t)("settingPage.delivery.title")),1),n(d),o("label",Bt,i(a(t)("settingPage.delivery.timeInterval")),1),n(m,{label:a(t)("common.edit"),onClick:e[11]||(e[11]=l=>N("delivery","timeInterval")),class:"unchange_white_text_button"},null,8,["label"]),n(d),o("label",Mt,i(a(t)("settingPage.delivery.beginEndInterval")),1),n(m,{label:a(t)("common.edit"),onClick:e[12]||(e[12]=l=>N("delivery","beginEndInterval")),class:"unchange_white_text_button"},null,8,["label"])])]),_:1})):g("",!0)]),_:1})):g("",!0),C("deliveryReserver")?(r(),k(b,{key:4,class:"shadow-5"},{content:v(()=>[o("div",Wt,[o("label",Ht,i(a(t)("settingPage.reserverFeature")),1),n(I,{modelValue:h.value.reserver,"onUpdate:modelValue":[e[13]||(e[13]=l=>h.value.reserver=l),e[14]||(e[14]=l=>A("reserver",h.value.reserver))],disabled:!a(f).permissionsControl.value.reserver},null,8,["modelValue","disabled"]),n(d),o("div",null,[o("label",null,i(a(t)("settingPage.reserverFeatureOn")),1),o("label",Lt,i(" "+(a(f).permissionsControl.value.reserver?"":a(t)("settingPage.permissionReminder"))),1)])]),h.value.reserver&&a(f).permissionsControl.value.reserver&&C("deliveryReserver")?(r(),k(b,{key:0,class:"shadow-5 mt-3"},{content:v(()=>[o("div",Kt,[o("label",zt,i(a(t)("settingPage.reserver.title")),1),n(d),o("label",qt,i(a(t)("settingPage.reserver.timeInterval")),1),n(m,{label:a(t)("common.edit"),onClick:e[15]||(e[15]=l=>N("reserver","timeInterval")),class:"unchange_white_text_button"},null,8,["label"]),n(d),o("label",Yt,i(a(t)("settingPage.reserver.beginEndInterval")),1),n(m,{label:a(t)("common.edit"),onClick:e[16]||(e[16]=l=>N("reserver","beginEndInterval")),class:"unchange_white_text_button"},null,8,["label"]),n(d),o("label",Xt,i(a(t)("settingPage.reserver.intervalDiscount")),1),n(m,{label:a(t)("common.edit"),onClick:e[17]||(e[17]=l=>N("reserver","intervalDiscount")),class:"unchange_white_text_button"},null,8,["label"]),n(d),o("label",Gt,i(a(t)("settingPage.reserver.excludeDates")),1),n(m,{label:a(t)("common.edit"),onClick:e[18]||(e[18]=l=>N("reserver","excludeDates")),class:"unchange_white_text_button"},null,8,["label"]),n(d),o("label",Jt,i(a(t)("settingPage.reserver.excludeDiscountDates")),1),n(m,{label:a(t)("common.edit"),onClick:e[19]||(e[19]=l=>N("reserver","excludeDiscountDates")),class:"unchange_white_text_button"},null,8,["label"])])]),_:1})):g("",!0)]),_:1})):g("",!0),C("order")?(r(),k(b,{key:5,class:"shadow-5"},{content:v(()=>[o("div",Qt,[o("label",Zt,i(a(t)("settingPage.orderFeature")),1),n(I,{modelValue:h.value.order,"onUpdate:modelValue":[e[20]||(e[20]=l=>h.value.order=l),e[21]||(e[21]=l=>A("order",h.value.order))],disabled:!a(f).permissionsControl.value.order},null,8,["modelValue","disabled"]),n(d),o("div",null,[o("label",null,i(a(t)("settingPage.orderFeatureOn")),1),o("label",el,i(" "+(a(f).permissionsControl.value.order?"":a(t)("settingPage.permissionReminder"))),1)])]),h.value.order&&a(f).permissionsControl.value.order&&C("order")?(r(),p("div",tl,[C("order")?(r(),k(b,{key:0,class:"shadow-5"},{content:v(()=>[o("div",ll,[o("label",nl,i(a(t)("settingPage.useHolidayPrice")),1),n(I,{modelValue:h.value.isFestiveDay,"onUpdate:modelValue":[e[22]||(e[22]=l=>h.value.isFestiveDay=l),e[23]||(e[23]=l=>A("isFestiveDay",h.value.isFestiveDay))]},null,8,["modelValue"]),n(d),o("label",null,i(a(t)("settingPage.useHolidayPriceOn")),1)])]),_:1})):g("",!0),a(f).permissionsControl.value.fandays&&C("order")?(r(),k(b,{key:1,class:"shadow-5"},{content:v(()=>[o("div",ol,[o("label",sl,i(a(t)("settingPage.useFandays")),1),n(I,{modelValue:h.value.useFandays,"onUpdate:modelValue":[e[24]||(e[24]=l=>h.value.useFandays=l),e[25]||(e[25]=l=>A("useFandays",h.value.useFandays))]},null,8,["modelValue"]),n(d),o("label",null,i(a(t)("settingPage.useFandaysOn")),1)])]),_:1})):g("",!0),C("order")?(r(),k(b,{key:2,class:"shadow-5"},{title:v(()=>[e[68]||(e[68]=ue(" 自定义菜单 ",-1)),n(d)]),content:v(()=>[(r(!0),p($,null,T(xe.value,l=>{var P;return r(),p("div",null,[(P=a(f).customDishApi.getCustomDishesControl()[l.id])!=null&&P.enabled?(r(),p("div",al,[o("div",il,[o("span",null,i(Pe(l.name)),1),o("div",rl,[n(E,{modelValue:l.sellType,"onUpdate:modelValue":[y=>l.sellType=y,y=>et(y,l)],options:Ze.value,optionLabel:"name",optionValue:"code"},null,8,["modelValue","onUpdate:modelValue","options"]),n(I,{modelValue:l.enable,"onUpdate:modelValue":[y=>l.enable=y,y=>Ye(l)]},null,8,["modelValue","onUpdate:modelValue"])])]),n(d)])):g("",!0)])}),256))]),_:1})):g("",!0),C("order")?(r(),k(b,{key:3,class:"shadow-5"},{content:v(()=>[o("div",ul,[o("label",dl,i(a(t)("settingPage.wifiOrder")),1),n(I,{modelValue:h.value.checkIP,"onUpdate:modelValue":[e[26]||(e[26]=l=>h.value.checkIP=l),e[27]||(e[27]=l=>A("checkIP",h.value.checkIP))]},null,8,["modelValue"]),n(d),o("label",null,i(a(t)("settingPage.wifiOrderOn")),1)])]),_:1})):g("",!0),C("order")?(r(),k(b,{key:4,class:"shadow-5"},{content:v(()=>[o("div",cl,[o("label",ml,i(a(t)("settingPage.setPrice")),1),n(d),o("label",null,i(a(t)("settingPage.setPriceOn")),1),n(m,{label:a(t)("common.edit"),onClick:e[28]||(e[28]=l=>ke()),class:"unchange_white_text_button"},null,8,["label"])])]),_:1})):g("",!0),C("order")?(r(),k(b,{key:5,class:"shadow-5"},{content:v(()=>[o("div",vl,[o("label",fl,i(a(t)("settingPage.setChildrenPrice")),1),n(d),o("label",null,i(a(t)("settingPage.setChildrenPriceOn1")),1),n(I,{modelValue:h.value.useChildrenDiscount,"onUpdate:modelValue":[e[29]||(e[29]=l=>h.value.useChildrenDiscount=l),e[30]||(e[30]=l=>A("useChildrenDiscount",h.value.useChildrenDiscount))]},null,8,["modelValue"]),n(d),o("label",pl,i(a(t)("settingPage.setChildrenPriceOn2")),1),n(m,{label:a(t)("common.edit"),onClick:e[31]||(e[31]=l=>Ve()),class:"unchange_white_text_button"},null,8,["label"])])]),_:1})):g("",!0)])):g("",!0)]),_:1})):g("",!0)])]),_:1})]),n(x,{visible:L.value,"onUpdate:visible":e[33]||(e[33]=l=>L.value=l),header:a(t)("settingPage.editWeekPrice")},{default:v(()=>[o("div",gl,[(r(!0),p($,null,T(Z.value,(l,P)=>(r(),p("div",{key:P,class:"flex justify-content-between m-1 gap-2"},[o("div",null,[o("label",bl,i(a(t)("settingPage.week."+P))+":",1)]),o("div",null,[n(c,{variant:"on"},{default:v(()=>[n(u,{type:"number",modelValue:l.lunch,"onUpdate:modelValue":y=>l.lunch=y,class:"w-full"},null,8,["modelValue","onUpdate:modelValue"]),o("label",_l,i(a(t)("settingPage.lunch")),1)]),_:2},1024)]),o("div",null,[n(c,{variant:"on"},{default:v(()=>[n(u,{type:"number",modelValue:l.dinner,"onUpdate:modelValue":y=>l.dinner=y,class:"w-full"},null,8,["modelValue","onUpdate:modelValue"]),o("label",hl,i(a(t)("settingPage.dinner")),1)]),_:2},1024)])]))),128)),n(m,{label:a(t)("common.save"),onClick:e[32]||(e[32]=l=>Ie()),class:"unchange_white_text_button"},null,8,["label"])])]),_:1},8,["visible","header"]),n(x,{visible:Y.value,"onUpdate:visible":e[36]||(e[36]=l=>Y.value=l),header:a(t)("settingPage.editChildrenWeekPrice")},{default:v(()=>[o("div",yl,[h.value.useChildrenDiscount?g("",!0):(r(!0),p($,{key:0},T(ee.value,(l,P)=>(r(),p("div",{key:P,class:"flex justify-content-between align-items-center m-1 gap-2"},[o("div",null,[o("label",wl,i(a(t)("settingPage.week."+P))+":",1)]),o("div",null,[n(c,{variant:"on"},{default:v(()=>[n(u,{type:"number",modelValue:l.lunch,"onUpdate:modelValue":y=>l.lunch=y,class:"w-full"},null,8,["modelValue","onUpdate:modelValue"]),o("label",xl,i(a(t)("settingPage.lunch")),1)]),_:2},1024)]),o("div",null,[n(c,{variant:"on"},{default:v(()=>[n(u,{type:"number",modelValue:l.dinner,"onUpdate:modelValue":y=>l.dinner=y,class:"w-full"},null,8,["modelValue","onUpdate:modelValue"]),o("label",Pl,i(a(t)("settingPage.dinner")),1)]),_:2},1024)])]))),128)),h.value.useChildrenDiscount?(r(),p("div",kl,[o("div",null,[o("label",Vl,i(a(t)("settingPage.childrenPricePercentage"))+":",1)]),o("div",null,[n(c,{variant:"on"},{default:v(()=>[n(V,{type:"number",modelValue:G.value,"onUpdate:modelValue":e[34]||(e[34]=l=>G.value=l),class:"w-full",suffix:" %"},null,8,["modelValue"]),o("label",Dl,i(a(t)("settingPage.childrenPricePercentage")),1)]),_:1})])])):g("",!0),n(m,{class:"unchange_white_text_button",label:a(t)("common.save"),onClick:e[35]||(e[35]=l=>Ce())},null,8,["label"])])]),_:1},8,["visible","header"]),n(x,{visible:J.value,"onUpdate:visible":e[45]||(e[45]=l=>J.value=l),header:a(t)("settingPage."+K.value+"."+j.value),onHide:e[46]||(e[46]=l=>$e()),style:{"max-height":"80%","max-width":"90%","min-width":"30%"},modal:!0,dismissableMask:!0},{default:v(()=>[o("div",Il,[j.value==="timeInterval"?(r(),p("div",Cl,[n(c,{variant:"on"},{default:v(()=>[n(V,{inputId:"minmax",min:0,max:60,modelValue:D.value,"onUpdate:modelValue":e[37]||(e[37]=l=>D.value=l),fluid:""},null,8,["modelValue"]),o("label",Ul,i(a(t)("settingPage."+K.value+"."+j.value)),1)]),_:1})])):g("",!0),j.value==="beginEndInterval"?(r(),p("div",Fl,[(r(!0),p($,null,T(D.value,(l,P)=>(r(),k(m,{key:P,label:a(t)("settingPage.week."+P),onClick:y=>ce(P,"editPickupReserverBeginEndInterval"),class:"unchange_white_text_button"},null,8,["label","onClick"]))),128)),n(x,{visible:le.value,"onUpdate:visible":e[39]||(e[39]=l=>le.value=l),header:a(t)("settingPage.week."+O.value),modal:!0,dismissableMask:!0},{default:v(()=>[o("div",$l,[(r(!0),p($,null,T(D.value[O.value],(l,P)=>(r(),p("div",Sl,[(r(!0),p($,null,T(l,(y,R)=>(r(),p("div",jl,[R!=="discount"?(r(),p("label",El,i(a(t)("settingPage."+R)),1)):g("",!0),R!=="discount"?(r(),k(V,{key:1,inputId:"minmax",min:0,max:23,fluid:"",modelValue:y.hour,"onUpdate:modelValue":re=>y.hour=re,style:{width:"4rem"}},null,8,["modelValue","onUpdate:modelValue"])):g("",!0),R!=="discount"?(r(),p("label",Rl,":")):g("",!0),R!=="discount"?(r(),k(V,{key:3,inputId:"minmax",min:0,max:59,fluid:"",modelValue:y.minute,"onUpdate:modelValue":re=>y.minute=re,style:{width:"4rem"}},null,8,["modelValue","onUpdate:modelValue"])):g("",!0)]))),256)),n(m,{icon:"pi pi-trash",severity:"danger",onClick:y=>Ee(P)},null,8,["onClick"])]))),256)),n(m,{label:"+",class:"w-full unchange_white_text_button",onClick:e[38]||(e[38]=l=>je())})])]),_:1},8,["visible","header"])])):g("",!0),j.value==="intervalDiscount"?(r(),p("div",Tl,[(r(!0),p($,null,T(D.value,(l,P)=>(r(),k(m,{key:P,label:a(t)("settingPage.week."+P),onClick:y=>ce(P)},null,8,["label","onClick"]))),128)),n(x,{visible:ne.value,"onUpdate:visible":e[40]||(e[40]=l=>ne.value=l),header:a(t)("settingPage.week."+O.value),modal:!0,dismissableMask:!0},{default:v(()=>[o("div",Al,[(r(!0),p($,null,T(D.value[O.value],(l,P)=>(r(),p("div",Nl,[(r(!0),p($,null,T(l,(y,R)=>(r(),p("div",Ol,[R!=="discount"?(r(),p("label",Bl,i(a(t)("settingPage."+R)),1)):g("",!0),R!=="discount"?(r(),p("label",Ml,i(y.hour+":"+y.minute.toString().padStart(2,"0")),1)):g("",!0)]))),256)),o("label",Wl,i(a(t)("menuPage.discount"))+":",1),n(u,{type:"number",modelValue:l.discount,"onUpdate:modelValue":y=>l.discount=y,style:{width:"4rem"},min:0,max:100},null,8,["modelValue","onUpdate:modelValue"]),e[69]||(e[69]=ue("% ",-1))]))),256))])]),_:1},8,["visible","header"])])):g("",!0),j.value==="excludeDates"?(r(),p("div",Hl,[o("div",Ll,[e[70]||(e[70]=o("label",{class:""},"每周:",-1)),n(M,{modelValue:D.value.week,"onUpdate:modelValue":e[41]||(e[41]=l=>D.value.week=l),options:ye.value,optionLabel:"label",optionValue:"value",class:"w-full",filter:"",fluid:""},null,8,["modelValue","options"])]),o("div",Kl,[e[71]||(e[71]=o("label",{class:""},"每月:",-1)),n(M,{modelValue:D.value.month,"onUpdate:modelValue":e[42]||(e[42]=l=>D.value.month=l),options:de.value,class:"w-full",fluid:""},null,8,["modelValue","options"])])])):g("",!0),j.value==="excludeDiscountDates"?(r(),p("div",zl,[n(M,{modelValue:D.value,"onUpdate:modelValue":e[43]||(e[43]=l=>D.value=l),options:de.value,filter:"",fluid:""},null,8,["modelValue","options"]),e[72]||(e[72]=o("div",{class:"flex justify-content-end"},[o("small",null,i("(注: 每个月固定排除)"))],-1))])):g("",!0),n(m,{class:"mt-2",label:a(t)("common.save"),onClick:e[44]||(e[44]=l=>Ue(j.value,D.value))},null,8,["label"])])]),_:1},8,["visible","header"]),n(x,{visible:X.value,"onUpdate:visible":e[58]||(e[58]=l=>X.value=l),header:a(t)("settingPage.shopInformation."+S.value),style:{width:"90%","max-width":"450px"}},{default:v(()=>[S.value==="restaurantName"?(r(),p("div",ql,[n(c,{variant:"on"},{default:v(()=>[n(u,{type:"text",modelValue:w.value,"onUpdate:modelValue":e[47]||(e[47]=l=>w.value=l),class:"w-full"},null,8,["modelValue"]),o("label",Yl,i(a(t)("settingPage.shopInformation.restaurantName")),1)]),_:1})])):g("",!0),S.value==="instagramUrl"?(r(),p("div",Xl,[n(c,{variant:"on"},{default:v(()=>[n(u,{type:"text",modelValue:w.value,"onUpdate:modelValue":e[48]||(e[48]=l=>w.value=l),class:"w-full",placeholder:"https://www.instagram.com/"},null,8,["modelValue"]),o("label",Gl,i(a(t)("settingPage.shopInformation.instagramUrl")),1)]),_:1})])):g("",!0),S.value==="location"?(r(),p("div",Jl,[o("div",Ql,[n(c,{class:"col-12",variant:"on"},{default:v(()=>[n(u,{type:"text",modelValue:w.value.street,"onUpdate:modelValue":e[49]||(e[49]=l=>w.value.street=l),class:"w-full"},null,8,["modelValue"]),o("label",Zl,i(a(t)("settingPage.shopInformation.location1.street")),1)]),_:1}),n(c,{class:"col-6",variant:"on"},{default:v(()=>[n(u,{type:"text",modelValue:w.value.postcode,"onUpdate:modelValue":e[50]||(e[50]=l=>w.value.postcode=l),class:"w-full"},null,8,["modelValue"]),o("label",en,i(a(t)("settingPage.shopInformation.location1.postcode")),1)]),_:1}),n(c,{class:"col-6",variant:"on"},{default:v(()=>[n(u,{type:"text",modelValue:w.value.city,"onUpdate:modelValue":e[51]||(e[51]=l=>w.value.city=l),class:"w-full"},null,8,["modelValue"]),o("label",tn,i(a(t)("settingPage.shopInformation.location1.city")),1)]),_:1}),n(c,{class:"col-6",variant:"on"},{default:v(()=>[n(u,{type:"text",modelValue:w.value.region,"onUpdate:modelValue":e[52]||(e[52]=l=>w.value.region=l),class:"w-full"},null,8,["modelValue"]),o("label",ln,i(a(t)("settingPage.shopInformation.location1.region")),1)]),_:1}),n(c,{class:"col-6",variant:"on"},{default:v(()=>[n(u,{type:"text",modelValue:w.value.country,"onUpdate:modelValue":e[53]||(e[53]=l=>w.value.country=l),class:"w-full"},null,8,["modelValue"]),o("label",nn,i(a(t)("settingPage.shopInformation.location1.country")),1)]),_:1})])])):g("",!0),S.value==="phoneNumber"?(r(),p("div",on,[n(c,{variant:"on"},{default:v(()=>[n(u,{type:"text",modelValue:w.value,"onUpdate:modelValue":e[54]||(e[54]=l=>w.value=l),class:"w-full"},null,8,["modelValue"]),o("label",sn,i(a(t)("settingPage.shopInformation.phoneNumber")),1)]),_:1})])):g("",!0),S.value==="logoPath"?(r(),p("div",an,[w.value?(r(),p("img",{key:0,src:w.value,class:"border-1 border-round",style:{"max-width":"90%"},onClick:_e},null,8,rn)):(r(),p("img",{key:1,src:gt,class:"border-1 border-round",style:{"max-width":"90%"},onClick:_e})),o("input",{type:"file",ref_key:"fileInput",ref:be,accept:"image/*",style:{display:"none"},onChange:tt},null,544),a(te)?(r(),k(m,{key:2,class:"w-full",label:"恢复默认logo",onClick:ot})):g("",!0)])):g("",!0),S.value==="latitudeAndLongitude"?(r(),p("div",un,[n(c,{variant:"on"},{default:v(()=>[n(u,{type:"text",modelValue:w.value.longitude,"onUpdate:modelValue":e[55]||(e[55]=l=>w.value.longitude=l),class:"w-full"},null,8,["modelValue"]),o("label",dn,i(a(t)("settingPage.shopInformation.longitude")),1)]),_:1}),n(c,{variant:"on"},{default:v(()=>[n(u,{type:"text",modelValue:w.value.latitude,"onUpdate:modelValue":e[56]||(e[56]=l=>w.value.latitude=l),class:"w-full"},null,8,["modelValue"]),o("label",cn,i(a(t)("settingPage.shopInformation.latitude")),1)]),_:1})])):g("",!0),o("div",mn,[n(m,{class:"w-full",label:a(t)("common.save"),onClick:e[57]||(e[57]=l=>Fe(S.value,w.value))},null,8,["label"])])]),_:1},8,["visible","header"])],64)}}};export{Rn as default};
