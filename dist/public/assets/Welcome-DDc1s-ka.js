import{s as oe,_ as ae,S as ne,P as ie,a as re}from"./pagination-BPu6yvMF.js";import{u as U,r as f,c as F,a as i,o as ue,b as ce,w as de,d as me,e as fe,m as S,f as n,g as r,h as l,i as B,j as c,k as s,n as A,t as d,l as L,F as h,p as k,q as a,s as O}from"./index-BAEf-Q7m.js";import{s as pe}from"./index-B0cibs3_.js";import{s as p}from"./index-DRaii8p4.js";import{_ as ve,s as ge,a as he,b as _e,c as be}from"./_plugin-vue_export-helper-_rSNpqd0.js";import{s as we,a as xe}from"./index-Bjeozapg.js";import{s as ke}from"./index-BeM26nRs.js";import{c as V}from"./cookie-DEduTsxr.js";import"./index-CCb96nVS.js";import"./index-BpJmPU7T.js";const ye=["src"],Ce=["onClick"],$e=["src"],Pe={class:"absolute top-0 border-0 right-0 p-2 flex flex-column flex align-items-center"},Ne={class:"m-3 max-w-screen"},Ie={key:0,class:A(["w-full","p-4"])},Fe=["src"],Se={key:0,class:"text-center p-1"},Be={key:1,class:"text-center p-1"},Le={class:"flex flex-column justify-center"},Oe={key:0,class:"text-center"},Ve={key:1,class:"text-center"},Te={class:"flex w-full"},je={class:"flex flex-column"},Ae={class:"w-full text-sm break-words whitespace-pre-wrap px-2"},De=["src"],Ee={class:"pt-5 pb-5"},Re={key:0,class:"flex flex-row gap-2"},ze={class:"border-400 border-round border-1 p-3"},qe={class:"text-center font-bold"},Ue={key:0,class:"w-full overflow-hidden"},Ge=["src"],Me={class:"w-full overflow-hidden",style:{"aspect-ratio":"2 / 1.5"}},He=["src"],We={class:"font-bold"},Xe={class:"flex flex-column"},Je={class:"flex flex-row justify-content-between w-full"},Ke={key:0,class:"fixed right-0 bottom-0 p-4",style:{"z-index":"2"}},Qe={class:"mt-2"},Ye={class:"flex justify-content-end mt-2"},Ze={__name:"Welcome",props:["switchTo"],setup(et){const _=[{label:"pt",imagePath:"flags/pt.png"},{label:"en",imagePath:"flags/en.png"},{label:"zh",imagePath:"flags/zh.png"}],D=fe(),G=me(),{locale:b}=U(),{t:m}=U(),w=f(null),T=f(!0);f([]);const E=f(),M=F(()=>i.getPickupDate("restaurantName")),u=f({});function H(){const e=V.getCookie("language");e&&(b.value=e)}let y=null;function W(){return new Promise(e=>{let t=()=>{const o=i.currentPage.value;o&&Object.keys(o).length>0?e(o):setTimeout(t,200)};t()})}ue(async()=>{var e;H(),await W(),u.value=i.currentPage.value,console.log("page :",u.value),y=new IntersectionObserver(t=>{t.forEach(o=>{o.isIntersecting?T.value=!0:T.value=!1})},{threshold:.1}),(e=w.value)!=null&&e.$el&&y.observe(w.value.$el)}),ce(()=>{var e;y&&((e=w.value)!=null&&e.$el)&&y.unobserve(w.value.$el)}),de(()=>i.currentPage.value,e=>{e&&(u.value=e)},{immediate:!0});const X=F(()=>{const e="/";switch(b.value.toLowerCase()){case"pt":return e+_[0].imagePath;case"en":return e+_[1].imagePath;case"zh":return e+_[2].imagePath;default:return e+_[1].imagePath}});function v(e){return e[`text_${b.value.toLowerCase()}`]}const J=Date.now(),R=V.getCookie("login_time");let j;R&&(j=JSON.parse(R));const K=F(()=>_.filter(e=>e.label!==b.value.toLowerCase()).map(e=>({...e,command:()=>{b.value=e.label,Q(e.label)}})));function Q(e){V.getCookie("language",e)}function z(e){window.open(e,"_blank")}const Y=e=>{E.value.toggle(e)};j&&(J-j>60*5*1e3?V.clearAllCookies():C());function C(){const e=G.query.table;D.push({path:"/table",query:{table:e}})}function Z(){D.push({path:"/takeReserve"})}const ee=F(()=>[{label:m("common.options"),items:[{label:m("common.pay"),icon:"pi pi-wallet",command:()=>{te()}},{label:m("common.call"),icon:"pi pi-user-plus",command:()=>{i.send_cmd(i.getTable(),{cmd:"call"}),S.show_info(m("notification.call_msg"))}}]}]);function q(e){return u.value.data.options[e]?"font-bold":""}const $=f(!1),P=f(),x=f();function te(){$.value=!0}function le(){e(P.value)?i.send_cmd(i.getTable(),{cmd:"pay",nif:P.value,note:x.value},t=>{t.success?(S.show_info(m("notification.pay_msg")),$.value=!1):S.show_error(m("common.failed"))}):S.show_warn(m("notification.cancel_msg"));function e(t){return!t||t.toString().length===9||t.toString().length===0}}function se(){x.value&&(x.value=void 0)}return(e,t)=>(a(),n(h,null,[r(s(oe),{model:K.value,direction:"down",transitionDelay:80,class:"absolute top-0 left-0 border-0"},{button:c(({toggleCallback:o})=>[r(s(p),{outlined:"",onClick:o,class:"custom-clean-button"},{default:c(()=>[l("img",{src:X.value,style:{width:"38px",height:"38px"}},null,8,ye)]),_:2},1032,["onClick"])]),item:c(({item:o,toggleCallback:N})=>[l("div",{class:"flex flex-col items-center justify-between",onClick:N},[l("img",{src:o.imagePath,alt:"lang",style:{width:"38px",height:"38px"}},null,8,$e)],8,Ce)]),_:1},8,["model"]),l("div",Pe,[l("div",null,[r(s(p),{icon:"pi pi-bell",rounded:"","aria-label":"Filter",onClick:Y,"aria-haspopup":"true","aria-controls":"overlay_menu",size:"small",style:{width:"42px",height:"42px"}}),r(s(pe),{ref_key:"menu",ref:E,id:"overlay_menu",model:ee.value,popup:!0},null,8,["model"])]),l("div",null,[r(s(p),{icon:"pi pi-instagram",class:"custom-clean-button",onClick:t[0]||(t[0]=()=>{})})])]),l("div",Ne,[u.value?(a(),n("div",Ie,[l("img",{src:s(i).pathFormated(u.value.data.logoPath,u.value.imagesPath),alt:"Logo",class:"max-w-6rem h-auto w-full mx-auto block"},null,8,Fe),u.value.data.restaurantName?(a(),n("h3",Se,d(u.value.data.restaurantName),1)):(a(),n("h3",Be,d(M.value),1)),l("div",Le,[s(i).testEnvironment.value?(a(),n("h2",Oe,d("DEMO"))):B("",!0),s(i).testEnvironment.value?(a(),n("span",Ve,d(s(m)("home.demoDescription")),1)):B("",!0)])])):B("",!0),l("div",Te,[r(s(ge),{class:"w-full max-w-xl mx-auto"},{default:c(()=>[(a(!0),n(h,null,k(u.value.data.titles,(o,N)=>(a(),L(s(he),{value:N},{default:c(()=>[r(s(_e),null,{default:c(()=>[O(d(v(o.title)),1)]),_:2},1024),r(s(be),{class:"p-1"},{default:c(()=>[l("div",je,[l("div",Ae,d(v(o.description)),1),l("img",{src:s(i).pathFormated(o.image.src,u.value.imagesPath),class:"max-w-5rem h-auto block mr-auto p-1 invert-image"},null,8,De)])]),_:2},1024)]),_:2},1032,["value"]))),256))]),_:1})]),l("div",Ee,[s(i).testEnvironment?(a(),n("div",Re,[r(s(p),{onClick:t[1]||(t[1]=o=>C()),class:"w-full font-bold",style:{"border-radius":"20px"}},{default:c(()=>[O(d(e.$t("common.eatHere")),1)]),_:1}),r(s(p),{onClick:t[2]||(t[2]=o=>Z()),class:"w-full font-bold",style:{"border-radius":"20px"}},{default:c(()=>[O(d(e.$t("common.takeOrReserve")),1)]),_:1})])):(a(),L(s(p),{key:1,ref_key:"orderButtonRef",ref:w,onClick:t[3]||(t[3]=o=>C()),class:"w-full font-bold",style:{"border-radius":"20px"}},{default:c(()=>[O(d(e.$t("home.orderNow")),1)]),_:1},512))]),(a(!0),n(h,null,k(u.value.data.frames,(o,N)=>(a(),n("div",null,[l("div",ze,[(a(!0),n(h,null,k(o,(g,tt)=>(a(),n("div",null,[l("h1",qe,d(v(g.title)),1),g.images.length<=1?(a(),n("div",Ue,[l("img",{src:s(i).pathFormated(g.images[0].src,u.value.imagesPath),class:"w-full"},null,8,Ge)])):(a(),L(s(re),{key:1,"slides-per-view":1,loop:!0,class:"w-full",modules:[s(ie)],pagination:{clickable:!0}},{default:c(()=>[(a(!0),n(h,null,k(g.images,(I,lt)=>(a(),L(s(ne),null,{default:c(()=>[l("div",Me,[l("img",{src:s(i).pathFormated(I.src,u.value.imagesPath),class:"w-full h-full",style:{"object-fit":"cover"}},null,8,He)])]),_:2},1024))),256))]),_:2},1032,["modules"])),l("h4",We,d(v(g.subtitle)),1),(a(!0),n(h,null,k(g.descriptions,I=>(a(),n("div",null,[l("div",Xe,[l("div",Je,[l("span",{class:A(q(0))},d(v(I.left)),3),l("span",{class:A(q(1))},d(v(I.right)),3)])])]))),256))]))),256))]),t[11]||(t[11]=l("div",{class:"p-4"},null,-1))]))),256)),l("div",{class:"absoluto top-0 text-center text-xs p-2 underline cursor-pointer",onClick:t[4]||(t[4]=o=>z("https://5am3eq-wc.myshopify.com/"))}," ©2025 XIAOXIONG® v2.0.7 "),l("div",{class:"absoluto top-0 text-center text-xs p-2",onClick:t[5]||(t[5]=o=>z("https://5am3eq-wc.myshopify.com/"))},t[12]||(t[12]=[l("img",{src:ae,style:{width:"7rem"}},null,-1)]))]),T.value?B("",!0):(a(),n("div",Ke,[r(s(p),{rounded:"","aria-label":"Star",onClick:t[6]||(t[6]=o=>C()),class:"w-full font-bold p-button-lg shadow-6"},{default:c(()=>t[13]||(t[13]=[l("span",{class:"material-icons text-5xl"},"restaurant",-1)])),_:1,__:[13]})])),r(s(we),{visible:$.value,"onUpdate:visible":t[10]||(t[10]=o=>$.value=o),header:"结账",class:"flex flex-column",modal:!0,dismissableMask:!0,onHide:se},{default:c(()=>[l("div",null,[t[14]||(t[14]=l("label",null,"NIF:",-1)),r(s(ke),{modelValue:P.value,"onUpdate:modelValue":t[7]||(t[7]=o=>P.value=o),inputId:"withoutgrouping",useGrouping:!1,fluid:"",class:"w-full m-1"},null,8,["modelValue"])]),l("div",Qe,[l("label",null,d(e.$t("common.note"))+":",1),r(s(xe),{type:"text",modelValue:x.value,"onUpdate:modelValue":t[8]||(t[8]=o=>x.value=o),class:"w-full m-1"},null,8,["modelValue"])]),l("div",Ye,[r(s(p),{label:s(m)("common.send"),onClick:t[9]||(t[9]=o=>le())},null,8,["label"])])]),_:1},8,["visible"])],64))}},ft=ve(Ze,[["__scopeId","data-v-ba30618f"]]);export{ft as default};
