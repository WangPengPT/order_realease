import{_ as oe,P as ne}from"./pagination-BO-ad-kk.js";import{c as l,g as ie,a as L,m as I}from"./index-CkQFOLy4.js";import{s as re,x as ue,a as _,y as ce,c as de,e as me,f as pe,g as fe}from"./primevue-DzNNCCVj.js";import{S as ve,a as ge}from"./pagination-C-oWYlPG.js";import{O as E,r as v,y as g,w as V,o as he,P as we,R as _e,c,z as m,s as k,e as a,q as d,S as o,F as h,D as x,Q as xe,d as n,t as f,h as j,p as z,v as W}from"./vue-BhQbBSxl.js";import{b as be}from"./vendor-DYQJwaLu.js";import{_ as ye}from"./_plugin-vue_export-helper-DlAUqK2U.js";be();const ke=["src"],Ce=["onClick"],$e=["src"],Pe={class:"flex flex-column w-full"},Le={class:"w-full"},Ie={class:"flex flex-row justify-content-center align-items-center"},Te={class:"flex flex-row justify-content-center align-items-center"},Ne={key:0,class:"pr-1 w-2rem h-auto"},Be=["src"],Se={key:0,class:"w-full"},Ae={class:"w-full bg-black-alpha-90 h-3rem flex flex-row justify-content-between"},je={class:"flex align-content-center"},ze={style:{position:"relative",width:"100%",height:"350px",overflow:"hidden","border-radius":"10px","margin-left":"1rem","margin-right":"1rem","margin-top":"1rem"}},Me=["src","alt"],Fe={class:"w-full h-full text-center p-3 flex flex-column justify-content-end",style:{position:"absolute",inset:"0","z-index":"1"}},De={class:"text-white font-bold m-0"},Oe={key:0,class:"text-white mt-2"},Re={class:"text-white mt-2"},Ue={class:"p-4"},Ee={class:"flex justify-content-center flex-row pb-5 gap-2"},Ve={class:"flex w-full"},We={key:0,class:"w-full text-sm break-words px-2",style:{"white-space":"pre-wrap"}},qe={key:1,class:"flex flex-column w-full"},Ge={class:"w-full text-sm break-words px-2",style:{"white-space":"pre-wrap"}},He=["src"],Xe={class:"border-400 border-round border-1 p-3"},Je={class:"text-center font-bold"},Qe={key:0,class:"w-full overflow-hidden"},Ke=["src"],Ye={class:"w-full overflow-hidden",style:{"aspect-ratio":"2 / 1.5"}},Ze=["src"],et={class:"font-bold"},tt={class:"flex flex-column"},st={class:"flex flex-row justify-content-between w-full"},at=["innerHTML"],lt=["innerHTML"],ot={class:"m-1 max-w-screen flex flex-column flex align-items-center"},nt={key:1,class:"fixed right-0 bottom-0 p-4",style:{"z-index":"2"}},it={__name:"TakeawayWelcome",props:["switchTo"],setup(rt){const b=[{label:"pt",imagePath:"flags/pt.png"},{label:"en",imagePath:"flags/en.png"},{label:"zh",imagePath:"flags/zh.png"}],M=_e();xe();const{locale:w}=E(),{t:p}=E(),C=v(null),F=v(void 0),T=v(!0),N=v(!1);v([]),v();const q=g(()=>l.getPickupDate("restaurantName")),i=v({}),G=v(""),B=v("");function H(){const e=L.getCookie("language");e&&(w.value=e)}function X(){N.value=!0}let $=null;V(()=>[l.currentTakeAwayPage.value,l.addr.value],([e,t])=>{var s,u,r;i.value=e,(u=(s=i.value)==null?void 0:s.data)!=null&&u.logoPath&&((r=i.value)!=null&&r.imagesPath)&&(G.value=l.pathFormated(i.value.data.logoPath,i.value.imagesPath))},{immediate:!0}),he(async()=>{var e;l.initMenu(!0),H(),B.value=await ie(),$=new IntersectionObserver(t=>{t.forEach(s=>{s.isIntersecting?T.value=!0:T.value=!1})},{threshold:.1}),(e=C.value)!=null&&e.$el&&$.observe(C.value.$el)}),we(()=>{var e;$&&((e=C.value)!=null&&e.$el)&&$.unobserve(C.value.$el)}),V(()=>l.currentTakeAwayPage.value,e=>{e&&(i.value=e)},{immediate:!0});const J=g(()=>{const e="/";switch(w.value.toLowerCase()){case"pt":return e+b[0].imagePath;case"en":return e+b[1].imagePath;case"zh":return e+b[2].imagePath;default:return e+b[1].imagePath}});function y(e){const t=`text_${w.value.toLowerCase()}`;return e[t]}const Q=Date.now(),D=L.getCookie("login_time");let S;D&&(S=JSON.parse(D));const K=g(()=>b.filter(e=>e.label!==w.value.toLowerCase()).map(e=>({...e,command:()=>{w.value=e.label,Y(e.label)}})));function Y(e){L.setCookie("language",e)}S&&(Q-S>60*5*1e3?L.clearAllCookies():A());function A(){if(!l.settings.value.delivery||!l.permissionsControl.value.delivery){I.show_warn(p("notification.deliveryClosed"));return}M.push("/table")}function Z(){if(!l.settings.value.reserver||!l.permissionsControl.value.reserver){I.show_warn(p("notification.reserverClosed"));return}M.push("/reservePage")}function O(e){window.open(e,"_blank")}g(()=>[{label:p("common.options"),items:[{label:p("common.pay"),icon:"pi pi-wallet",command:()=>{l.send_cmd(l.getTable(),"pay"),I.show_info(p("notification.pay_msg"))}},{label:p("common.call"),icon:"pi pi-user-plus",command:()=>{l.send_cmd(l.getTable(),"call"),I.show_info(p("notification.call_msg"))}}]}]);const ee=g(()=>[{name:p("home.mapNavigationButton"),image:"/images/xiaoxiongmarketLogo.png",onclick:()=>{window.open("https://xiaoxiongmarket.com/","_blank")}}]);function R(e){return i.value.data.options[e]?"font-bold":""}function U(e){const t=e[`text_${w.value.toLowerCase()}`];return t?t.replace(/\[\[(.*?)\|(.*?)\]\]/g,(s,u,r)=>`<a href="${r.startsWith("http")?r:`https://${r}`}" target="_blank" rel="noopener noreferrer" class="text-blue-500 underline cursor-pointer">${u}</a>`):""}g(()=>{const e=l.getShopInfo("location");let t="";e&&(t+=(e.street?p("common.location")+": "+e.street:"")+(e.postcode?e.postcode:"")+(e.city?", "+e.city:""));const s=l.getShopInfo("phoneNumber");return s&&(t+=`
`+p("common.contact")+": "+s),t});const te=g(()=>{var t,s,u;return(((u=(s=(t=i.value)==null?void 0:t.data)==null?void 0:s.backgrounds)==null?void 0:u.filter(r=>r.src!==""))||[]).length===0}),se=g(()=>{var t,s,u;const e=((u=(s=(t=i.value)==null?void 0:t.data)==null?void 0:s.backgrounds)==null?void 0:u.filter(r=>r.src!==""))||[];return e.length>0?e.map(r=>r.src):B.value?[B.value]:[]});function ae(){const e=l.shopInfo.value,t=e.location,s=`${t.street}, ${t.postcode}, ${t.city}, ${t.region}, ${t.country}`,u=e.phoneNumber;return`${s} 
${u}`}return(e,t)=>(n(),c(h,null,[m(o(re),{model:K.value,direction:"down",transitionDelay:80,class:"absolute bottom-1 right-0"},{button:d(({toggleCallback:s})=>[m(o(_),{outlined:"",onClick:s,class:"custom-clean-button",style:{"padding-top":"11px","padding-right":"14px"}},{default:d(()=>[a("img",{src:J.value,style:{width:"1.7rem",height:"1.7rem"}},null,8,ke)]),_:2},1032,["onClick"])]),item:d(({item:s,toggleCallback:u})=>[a("div",{class:"flex flex-col items-center justify-between",onClick:u},[a("img",{src:s.imagePath,alt:"lang",style:{width:"1.7rem",height:"1.7rem"}},null,8,$e)],8,Ce)]),_:1},8,["model"]),m(o(ue),{visible:N.value,"onUpdate:visible":t[0]||(t[0]=s=>N.value=s),position:"left",class:"max-w-12rem",pt:{content:{class:"p-0"},header:{class:"p-2"}}},{default:d(()=>[a("div",Pe,[(n(!0),c(h,null,x(ee.value,(s,u)=>(n(),c("div",Le,[a("div",Ie,[m(o(_),{label:s.name,onClick:s.onclick,text:"",class:"w-full text-sm text-center"},{default:d(()=>[a("div",Te,[s.image?(n(),c("div",Ne,[a("img",{src:s.image,class:"w-full h-full"},null,8,Be)])):k("",!0),a("span",null,f(s.name),1)])]),_:2},1032,["label","onClick"])])]))),256))])]),_:1},8,["visible"]),i.value&&i.value.data?(n(),c("div",Se,[a("div",Ae,[a("div",je,[m(o(_),{icon:"pi pi-bars text-xl",class:"",onClick:X})])]),m(o(ce),{value:se.value,showThumbnails:!1,showIndicators:!0,autoPlay:!0,circular:!0,transitionInterval:4e3,class:"w-full h-full",containerStyle:"position:relative;",pt:{root:{style:{border:"none",boxShadow:"none"}},indicatorButton:{style:{width:"10px",height:"10px"}},indicatorList:{style:{padding:"5px"}}}},{item:d(s=>[a("div",ze,[a("img",{src:te.value?s.item:o(l).pathFormated(s.item,i.value.imagesPath),alt:s.item.alt,style:{width:"100%",height:"100%","object-fit":"cover","object-position":"center",display:"block"}},null,8,Me),t[8]||(t[8]=a("div",{style:{position:"absolute",inset:"0",background:"linear-gradient(to top, rgba(0,0,0,0.8), rgba(0,0,0,0.2) 50%, transparent)","pointer-events":"none","z-index":"1"}},null,-1)),a("div",Fe,[a("h3",De,f(i.value.data.title||q.value),1),o(l).testEnvironment.value?(n(),c("div",Oe,[t[7]||(t[7]=a("h2",{class:"m-0"},"DEMO",-1)),a("span",null,f(o(p)("home.demoDescription")),1)])):k("",!0),a("div",null,[a("span",Re,f(y(i.value.data.subtitle)),1)])])])]),_:1},8,["value"]),a("div",Ue,[a("div",Ee,[m(o(_),{onClick:t[1]||(t[1]=s=>A()),class:"w-full font-bold",style:{"border-radius":"20px",width:"120px"}},{default:d(()=>[j(f(e.$t("home.takeAway")),1)]),_:1}),m(o(_),{onClick:t[2]||(t[2]=s=>Z()),class:"w-full font-bold",style:{"border-radius":"20px",width:"120px"}},{default:d(()=>[j(f(e.$t("home.reserve")),1)]),_:1})]),a("div",Ve,[m(o(de),{value:F.value,"onUpdate:value":t[3]||(t[3]=s=>F.value=s),class:"w-full max-w-xl mx-auto"},{default:d(()=>[(n(!0),c(h,null,x(i.value.data.titles,(s,u)=>(n(),z(o(me),{value:u},{default:d(()=>[m(o(pe),null,{default:d(()=>[j(f(y(s.title)),1)]),_:2},1024),m(o(fe),{class:"p-1"},{default:d(()=>[s.title.text_zh.includes("餐厅信息")?(n(),c("div",We,f(ae()),1)):(n(),c("div",qe,[a("div",Ge,f(y(s.description)),1),a("img",{src:o(l).pathFormated(s.image.src,i.value.imagesPath),class:"max-w-5rem h-auto block mr-auto p-1 invert-image"},null,8,He)]))]),_:2},1024)]),_:2},1032,["value"]))),256))]),_:1},8,["value"])]),t[10]||(t[10]=a("div",{class:"p-4"},null,-1)),i.value.data?(n(!0),c(h,{key:0},x(i.value.data.frames,(s,u)=>(n(),c("div",null,[a("div",Xe,[(n(!0),c(h,null,x(s,(r,le)=>(n(),c("div",null,[a("h1",Je,f(y(r.title)),1),r.images.length<=1?(n(),c("div",Qe,[a("img",{src:o(l).pathFormated(r.images[0].src,i.value.imagesPath),class:"w-full"},null,8,Ke)])):(n(),z(o(ge),{key:1,"slides-per-view":1,loop:!0,class:"w-full",modules:[o(ne)],pagination:{clickable:!0}},{default:d(()=>[(n(!0),c(h,null,x(r.images,(P,ut)=>(n(),z(o(ve),null,{default:d(()=>[a("div",Ye,[a("img",{src:o(l).pathFormated(P.src,i.value.imagesPath),class:"w-full h-full",style:{"object-fit":"cover"}},null,8,Ze)])]),_:2},1024))),256))]),_:2},1032,["modules"])),a("h4",et,f(y(r.subtitle)),1),(n(!0),c(h,null,x(r.descriptions,P=>(n(),c("div",null,[a("div",tt,[a("div",st,[a("span",{class:W([R(0),"break-words text-left"]),innerHTML:U(P.left),style:{"white-space":"pre-wrap"}},null,10,at),a("span",{class:W([R(1),"break-words text-right"]),innerHTML:U(P.right),style:{"white-space":"pre-wrap"}},null,10,lt)])])]))),256))]))),256))]),t[9]||(t[9]=a("div",{class:"p-4"},null,-1))]))),256)):k("",!0)])])):k("",!0),a("div",ot,[a("div",{class:"absoluto top-0 text-center text-xs p-2 underline cursor-pointer",onClick:t[4]||(t[4]=s=>O("https://5am3eq-wc.myshopify.com/"))}," ©2025 XIAOXIONG® v1.1.114 "),a("div",{class:"absoluto top-0 text-center text-xs p-2",onClick:t[5]||(t[5]=s=>O("https://5am3eq-wc.myshopify.com/"))},t[11]||(t[11]=[a("img",{src:oe,style:{width:"7rem"}},null,-1)]))]),T.value?k("",!0):(n(),c("div",nt,[m(o(_),{rounded:"","aria-label":"Star",onClick:t[6]||(t[6]=s=>A()),class:"w-full font-bold p-button-lg shadow-6"},{default:d(()=>t[12]||(t[12]=[a("span",{class:"material-icons text-5xl"},"restaurant",-1)])),_:1,__:[12]})]))],64))}},ht=ye(it,[["__scopeId","data-v-f74a64b6"]]);export{ht as default};
