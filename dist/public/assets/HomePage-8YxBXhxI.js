import{g as Tt}from"./_commonjsHelpers-CqkleIqs.js";import{x as Oe,B as ye,y as Te,z as Ee,f as b,q as r,s as X,i as E,A as he,D as Z,E as ke,h as a,t as h,l as ue,u as pe,r as R,o as Pe,a as B,g as L,F as G,p as ne,k as i,j as H,G as qe,v as be,m as le,e as ut,H as Dt,I as Ct,w as Le,c as ve,J as ze,K as It,R as ct,L as He,M as St,N as We,O as Nt,P as Ne,Q as At,S as tt,T as dt,U as Bt,V as Lt,W as Ae,n as at,b as Pt,d as qt}from"./index-DAMfJyof.js";import{s as ge,a as ft}from"./index-DGaJmO3V.js";import{s as J,a as pt}from"./index-K3_jXIOK.js";import{D as ee,c as re,s as st,a as zt}from"./index-B1-9Rp0f.js";import{_ as De,c as ce}from"./_plugin-vue_export-helper-vSIagneg.js";import{s as Ot}from"./index-CYME4iXJ.js";import{s as nt}from"./index-DTLsRokN.js";import{a as Qe,b as Je,c as Ge,s as Ze,d as Et,S as Mt}from"./pagination-hGFgzrZQ.js";import{s as Rt}from"./index-D8AFqLQb.js";import{s as jt}from"./index-CvC_XyCr.js";import{s as ot}from"./index-DCnWC8c1.js";import{s as Vt}from"./index-DK_m3u0P.js";var Ke={exports:{}},it;function Ft(){return it||(it=1,function(e){var t=function(){var n=String.fromCharCode,g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",f={};function c(l,k){if(!f[l]){f[l]={};for(var N=0;N<l.length;N++)f[l][l.charAt(N)]=N}return f[l][k]}var V={compressToBase64:function(l){if(l==null)return"";var k=V._compress(l,6,function(N){return g.charAt(N)});switch(k.length%4){default:case 0:return k;case 1:return k+"===";case 2:return k+"==";case 3:return k+"="}},decompressFromBase64:function(l){return l==null?"":l==""?null:V._decompress(l.length,32,function(k){return c(g,l.charAt(k))})},compressToUTF16:function(l){return l==null?"":V._compress(l,15,function(k){return n(k+32)})+" "},decompressFromUTF16:function(l){return l==null?"":l==""?null:V._decompress(l.length,16384,function(k){return l.charCodeAt(k)-32})},compressToUint8Array:function(l){for(var k=V.compress(l),N=new Uint8Array(k.length*2),y=0,m=k.length;y<m;y++){var q=k.charCodeAt(y);N[y*2]=q>>>8,N[y*2+1]=q%256}return N},decompressFromUint8Array:function(l){if(l==null)return V.decompress(l);for(var k=new Array(l.length/2),N=0,y=k.length;N<y;N++)k[N]=l[N*2]*256+l[N*2+1];var m=[];return k.forEach(function(q){m.push(n(q))}),V.decompress(m.join(""))},compressToEncodedURIComponent:function(l){return l==null?"":V._compress(l,6,function(k){return v.charAt(k)})},decompressFromEncodedURIComponent:function(l){return l==null?"":l==""?null:(l=l.replace(/ /g,"+"),V._decompress(l.length,32,function(k){return c(v,l.charAt(k))}))},compress:function(l){return V._compress(l,16,function(k){return n(k)})},_compress:function(l,k,N){if(l==null)return"";var y,m,q={},W={},U="",Q="",O="",z=2,A=3,P=2,M=[],d=0,s=0,p;for(p=0;p<l.length;p+=1)if(U=l.charAt(p),Object.prototype.hasOwnProperty.call(q,U)||(q[U]=A++,W[U]=!0),Q=O+U,Object.prototype.hasOwnProperty.call(q,Q))O=Q;else{if(Object.prototype.hasOwnProperty.call(W,O)){if(O.charCodeAt(0)<256){for(y=0;y<P;y++)d=d<<1,s==k-1?(s=0,M.push(N(d)),d=0):s++;for(m=O.charCodeAt(0),y=0;y<8;y++)d=d<<1|m&1,s==k-1?(s=0,M.push(N(d)),d=0):s++,m=m>>1}else{for(m=1,y=0;y<P;y++)d=d<<1|m,s==k-1?(s=0,M.push(N(d)),d=0):s++,m=0;for(m=O.charCodeAt(0),y=0;y<16;y++)d=d<<1|m&1,s==k-1?(s=0,M.push(N(d)),d=0):s++,m=m>>1}z--,z==0&&(z=Math.pow(2,P),P++),delete W[O]}else for(m=q[O],y=0;y<P;y++)d=d<<1|m&1,s==k-1?(s=0,M.push(N(d)),d=0):s++,m=m>>1;z--,z==0&&(z=Math.pow(2,P),P++),q[Q]=A++,O=String(U)}if(O!==""){if(Object.prototype.hasOwnProperty.call(W,O)){if(O.charCodeAt(0)<256){for(y=0;y<P;y++)d=d<<1,s==k-1?(s=0,M.push(N(d)),d=0):s++;for(m=O.charCodeAt(0),y=0;y<8;y++)d=d<<1|m&1,s==k-1?(s=0,M.push(N(d)),d=0):s++,m=m>>1}else{for(m=1,y=0;y<P;y++)d=d<<1|m,s==k-1?(s=0,M.push(N(d)),d=0):s++,m=0;for(m=O.charCodeAt(0),y=0;y<16;y++)d=d<<1|m&1,s==k-1?(s=0,M.push(N(d)),d=0):s++,m=m>>1}z--,z==0&&(z=Math.pow(2,P),P++),delete W[O]}else for(m=q[O],y=0;y<P;y++)d=d<<1|m&1,s==k-1?(s=0,M.push(N(d)),d=0):s++,m=m>>1;z--,z==0&&(z=Math.pow(2,P),P++)}for(m=2,y=0;y<P;y++)d=d<<1|m&1,s==k-1?(s=0,M.push(N(d)),d=0):s++,m=m>>1;for(;;)if(d=d<<1,s==k-1){M.push(N(d));break}else s++;return M.join("")},decompress:function(l){return l==null?"":l==""?null:V._decompress(l.length,32768,function(k){return l.charCodeAt(k)})},_decompress:function(l,k,N){var y=[],m=4,q=4,W=3,U="",Q=[],O,z,A,P,M,d,s,p={val:N(0),position:k,index:1};for(O=0;O<3;O+=1)y[O]=O;for(A=0,M=Math.pow(2,2),d=1;d!=M;)P=p.val&p.position,p.position>>=1,p.position==0&&(p.position=k,p.val=N(p.index++)),A|=(P>0?1:0)*d,d<<=1;switch(A){case 0:for(A=0,M=Math.pow(2,8),d=1;d!=M;)P=p.val&p.position,p.position>>=1,p.position==0&&(p.position=k,p.val=N(p.index++)),A|=(P>0?1:0)*d,d<<=1;s=n(A);break;case 1:for(A=0,M=Math.pow(2,16),d=1;d!=M;)P=p.val&p.position,p.position>>=1,p.position==0&&(p.position=k,p.val=N(p.index++)),A|=(P>0?1:0)*d,d<<=1;s=n(A);break;case 2:return""}for(y[3]=s,z=s,Q.push(s);;){if(p.index>l)return"";for(A=0,M=Math.pow(2,W),d=1;d!=M;)P=p.val&p.position,p.position>>=1,p.position==0&&(p.position=k,p.val=N(p.index++)),A|=(P>0?1:0)*d,d<<=1;switch(s=A){case 0:for(A=0,M=Math.pow(2,8),d=1;d!=M;)P=p.val&p.position,p.position>>=1,p.position==0&&(p.position=k,p.val=N(p.index++)),A|=(P>0?1:0)*d,d<<=1;y[q++]=n(A),s=q-1,m--;break;case 1:for(A=0,M=Math.pow(2,16),d=1;d!=M;)P=p.val&p.position,p.position>>=1,p.position==0&&(p.position=k,p.val=N(p.index++)),A|=(P>0?1:0)*d,d<<=1;y[q++]=n(A),s=q-1,m--;break;case 2:return Q.join("")}if(m==0&&(m=Math.pow(2,W),W++),y[s])U=y[s];else if(s===q)U=z+z.charAt(0);else return null;Q.push(U),y[q++]=z+U.charAt(0),m--,z=U,m==0&&(m=Math.pow(2,W),W++)}}};return V}();e!=null?e.exports=t:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return t})}(Ke)),Ke.exports}var Ht=Ft();const Ue=Tt(Ht);var Kt=Oe`
    .p-tag {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        background: dt('tag.primary.background');
        color: dt('tag.primary.color');
        font-size: dt('tag.font.size');
        font-weight: dt('tag.font.weight');
        padding: dt('tag.padding');
        border-radius: dt('tag.border.radius');
        gap: dt('tag.gap');
    }

    .p-tag-icon {
        font-size: dt('tag.icon.size');
        width: dt('tag.icon.size');
        height: dt('tag.icon.size');
    }

    .p-tag-rounded {
        border-radius: dt('tag.rounded.border.radius');
    }

    .p-tag-success {
        background: dt('tag.success.background');
        color: dt('tag.success.color');
    }

    .p-tag-info {
        background: dt('tag.info.background');
        color: dt('tag.info.color');
    }

    .p-tag-warn {
        background: dt('tag.warn.background');
        color: dt('tag.warn.color');
    }

    .p-tag-danger {
        background: dt('tag.danger.background');
        color: dt('tag.danger.color');
    }

    .p-tag-secondary {
        background: dt('tag.secondary.background');
        color: dt('tag.secondary.color');
    }

    .p-tag-contrast {
        background: dt('tag.contrast.background');
        color: dt('tag.contrast.color');
    }
`,Ut={root:function(t){var n=t.props;return["p-tag p-component",{"p-tag-info":n.severity==="info","p-tag-success":n.severity==="success","p-tag-warn":n.severity==="warn","p-tag-danger":n.severity==="danger","p-tag-secondary":n.severity==="secondary","p-tag-contrast":n.severity==="contrast","p-tag-rounded":n.rounded}]},icon:"p-tag-icon",label:"p-tag-label"},Wt=ye.extend({name:"tag",style:Kt,classes:Ut}),Qt={name:"BaseTag",extends:Te,props:{value:null,severity:null,rounded:Boolean,icon:String},style:Wt,provide:function(){return{$pcTag:this,$parentInstance:this}}};function xe(e){"@babel/helpers - typeof";return xe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xe(e)}function Jt(e,t,n){return(t=Gt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gt(e){var t=Zt(e,"string");return xe(t)=="symbol"?t:t+""}function Zt(e,t){if(xe(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var g=n.call(e,t);if(xe(g)!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var we={name:"Tag",extends:Qt,inheritAttrs:!1,computed:{dataP:function(){return Ee(Jt({rounded:this.rounded},this.severity,this.severity))}}},Xt=["data-p"];function Yt(e,t,n,g,v,f){return r(),b("span",Z({class:e.cx("root"),"data-p":f.dataP},e.ptmi("root")),[e.$slots.icon?(r(),X(ke(e.$slots.icon),Z({key:0,class:e.cx("icon")},e.ptm("icon")),null,16,["class"])):e.icon?(r(),b("span",Z({key:1,class:[e.cx("icon"),e.icon]},e.ptm("icon")),null,16)):E("",!0),e.value!=null||e.$slots.default?he(e.$slots,"default",{key:2},function(){return[a("span",Z({class:e.cx("label")},e.ptm("label")),h(e.value),17)]}):E("",!0)],16,Xt)}we.render=Yt;var ea=Oe`
    .p-avatar {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: dt('avatar.width');
        height: dt('avatar.height');
        font-size: dt('avatar.font.size');
        background: dt('avatar.background');
        color: dt('avatar.color');
        border-radius: dt('avatar.border.radius');
    }

    .p-avatar-image {
        background: transparent;
    }

    .p-avatar-circle {
        border-radius: 50%;
    }

    .p-avatar-circle img {
        border-radius: 50%;
    }

    .p-avatar-icon {
        font-size: dt('avatar.icon.size');
        width: dt('avatar.icon.size');
        height: dt('avatar.icon.size');
    }

    .p-avatar img {
        width: 100%;
        height: 100%;
    }

    .p-avatar-lg {
        width: dt('avatar.lg.width');
        height: dt('avatar.lg.width');
        font-size: dt('avatar.lg.font.size');
    }

    .p-avatar-lg .p-avatar-icon {
        font-size: dt('avatar.lg.icon.size');
        width: dt('avatar.lg.icon.size');
        height: dt('avatar.lg.icon.size');
    }

    .p-avatar-xl {
        width: dt('avatar.xl.width');
        height: dt('avatar.xl.width');
        font-size: dt('avatar.xl.font.size');
    }

    .p-avatar-xl .p-avatar-icon {
        font-size: dt('avatar.xl.icon.size');
        width: dt('avatar.xl.icon.size');
        height: dt('avatar.xl.icon.size');
    }

    .p-avatar-group {
        display: flex;
        align-items: center;
    }

    .p-avatar-group .p-avatar + .p-avatar {
        margin-inline-start: dt('avatar.group.offset');
    }

    .p-avatar-group .p-avatar {
        border: 2px solid dt('avatar.group.border.color');
    }

    .p-avatar-group .p-avatar-lg + .p-avatar-lg {
        margin-inline-start: dt('avatar.lg.group.offset');
    }

    .p-avatar-group .p-avatar-xl + .p-avatar-xl {
        margin-inline-start: dt('avatar.xl.group.offset');
    }
`,ta={root:function(t){var n=t.props;return["p-avatar p-component",{"p-avatar-image":n.image!=null,"p-avatar-circle":n.shape==="circle","p-avatar-lg":n.size==="large","p-avatar-xl":n.size==="xlarge"}]},label:"p-avatar-label",icon:"p-avatar-icon"},aa=ye.extend({name:"avatar",style:ea,classes:ta}),sa={name:"BaseAvatar",extends:Te,props:{label:{type:String,default:null},icon:{type:String,default:null},image:{type:String,default:null},size:{type:String,default:"normal"},shape:{type:String,default:"square"},ariaLabelledby:{type:String,default:null},ariaLabel:{type:String,default:null}},style:aa,provide:function(){return{$pcAvatar:this,$parentInstance:this}}};function $e(e){"@babel/helpers - typeof";return $e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$e(e)}function lt(e,t,n){return(t=na(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function na(e){var t=oa(e,"string");return $e(t)=="symbol"?t:t+""}function oa(e,t){if($e(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var g=n.call(e,t);if($e(g)!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vt={name:"Avatar",extends:sa,inheritAttrs:!1,emits:["error"],methods:{onError:function(t){this.$emit("error",t)}},computed:{dataP:function(){return Ee(lt(lt({},this.shape,this.shape),this.size,this.size))}}},ia=["aria-labelledby","aria-label","data-p"],la=["data-p"],ra=["data-p"],ua=["src","alt","data-p"];function ca(e,t,n,g,v,f){return r(),b("div",Z({class:e.cx("root"),"aria-labelledby":e.ariaLabelledby,"aria-label":e.ariaLabel},e.ptmi("root"),{"data-p":f.dataP}),[he(e.$slots,"default",{},function(){return[e.label?(r(),b("span",Z({key:0,class:e.cx("label")},e.ptm("label"),{"data-p":f.dataP}),h(e.label),17,la)):e.$slots.icon?(r(),X(ke(e.$slots.icon),{key:1,class:ue(e.cx("icon"))},null,8,["class"])):e.icon?(r(),b("span",Z({key:2,class:[e.cx("icon"),e.icon]},e.ptm("icon"),{"data-p":f.dataP}),null,16,ra)):e.image?(r(),b("img",Z({key:3,src:e.image,alt:e.ariaLabel,onError:t[0]||(t[0]=function(){return f.onError&&f.onError.apply(f,arguments)})},e.ptm("image"),{"data-p":f.dataP}),null,16,ua)):E("",!0)]})],16,ia)}vt.render=ca;const da={class:"grid"},fa={key:0,class:"col-12 sm:col-12 md:col-6 lg:col-4 border-round surface-section shadow-1 p-2"},pa={class:"flex flex-column"},va=["onClick"],ha={class:"p-1 flex-shrink-0 w-7rem h-7rem flex align-items-center justify-content-center overflow-hidden"},ma=["src","alt"],ba={class:"flex flex-column justify-content-center"},ga={class:"font-bold"},ya={class:"flex flex-wrap gap-2"},_a={class:"flex gap-1 align-items-center"},wa={class:"text-color-secondary line2"},ka={key:0,class:"text-xl font-bold text-primary"},xa={key:1,class:"flex align-items-center gap-1"},$a={class:"text-l font-bold text-color-secondary"},Ta={class:"text-sm line-through text-500"},Da={key:2,class:"flex gap-2 mr-2",id:"card-quantity"},Ca={class:"w-2rem text-xl text-center"},Ia={key:3,class:"flex gap-2 mr-2"},Sa={key:0,class:"m-2 mt-0"},Na={class:"flex flex-row justify-content-between align-content-center"},Aa={class:"flex flex-column"},Ba={class:"text-l font-bold"},La={key:0,class:"text-l font-bold text-color-secondary"},Pa={key:1,class:"flex align-items-center gap-1"},qa={class:"text-l font-bold text-color-secondary"},za={class:"text-sm line-through text-500"},Oa={key:0,class:"flex ml-2 mr-2"},Ea={class:"w-2rem text-xl text-center"},Ma={key:1,class:"flex gap-2 mr-3 pt-2 pb-2"},Ra={class:"mb-2 flex justify-content-center"},ja={class:"font-bold text-center"},Va={class:"mb-2"},Fa={class:"text-color-secondary m-0 line-height-3 line2 text-center"},Ha={class:"mb-2"},Ka={class:"flex justify-content-center"},Ua=["src","alt"],Wa={class:"flex align-items-center gap-2"},Qa=["src","alt"],Ja={class:"flex align-items-center gap-3 ml-auto"},Ga={__name:"DishList",props:{rateDish:{type:Function,required:!0},likedItemsRef:Array,dislikedItemsRef:Array,tabIndex:Number,onlyVeg:Boolean},setup(e){const{t}=pe(),n=ee.dishDatas,g=R(null),v=e,f=(s,p=!0)=>{if(!v.onlyVeg)return!0;if(p)return s.vegetable;if(s.subItems.length>0){for(const x of s.subItems)if(x.vegetable)return!0}else return s.dish.vegetable;return!1};Pe(()=>{let s=B.getOrderMenuTab()[v.tabIndex];if(B.customDishAPI.customDishes.value.map(w=>w.name),B.getMenu().length==0){console.log("exit");return}g.value=n.value[x(n.value,s)].mainDishes,ee.showDishList(g.value);function x(w,C){for(const _ in w)if(w[_].name==C)return _;console.error("Can not find tab index in menu")}});let c={rated:!1,id:null,like:0,rate:0};const V=s=>ee.dishDatas.value[s]?ee.dishDatas.value[s].quantity:0,l=s=>{if(!N())return!1;const p=s.quantity;let x=3;if(s.price>0&&(x=9),s.limit){const w=s.id,C=N(),_=(C.peopleType.adults+C.peopleType.children)*s.limit,F=C.order.find($=>$.dishid==w);let S=0;if(s.subitem)for(const $ of s.subitem){S+=V($);const I=C.order.find(te=>te.dishid==k($));I&&(S+=I.quantity)}else S+=s.quantity,F&&(S+=F.quantity);return p>=x||_&&S>=_}return p>=x},k=s=>ee.dishDatas.value[s]?ee.dishDatas.value[s].id:0,N=()=>B.getTableValue(),y=s=>{let p="absolute origin-top-left mt-1 ml-1 border-round-lg pl-1 pr-1 text-xs text-white font-bold ";switch(s){case"new":p+="bg-red-600";break;case"recommended":case"special":p+="bg-orange-600";break;default:p+="bg-blue-600"}return p};function m(s){v.rateDish(c.id,c.like,c.rate,c.rated),W(s,c.rate,c.like),c.id=null,c.like=0,c.rate=0,c.rated=!1}const q=s=>{const p=v.likedItemsRef.indexOf(s);if(c.id=s.id,p!==-1)v.likedItemsRef.splice(p,1),c.like+=-1,c.rate+=-1,c.rated=!1;else{c.rated=!0,v.likedItemsRef.push(s);const x=v.dislikedItemsRef.indexOf(s);x!==-1?(v.dislikedItemsRef.splice(x,1),c.like+=1):(c.like+=1,c.rate+=1)}m(s)};function W(s,p=0,x=0){s.rates=(s.rates||0)+p,s.likes=(s.likes||0)+x}const U=s=>{const p=v.dislikedItemsRef.indexOf(s);if(c.id=s.id,p!==-1)v.dislikedItemsRef.splice(p,1),c.rate+=-1,c.rated=!1;else{c.rated=!0,v.dislikedItemsRef.push(s);const x=v.likedItemsRef.indexOf(s);x!==-1?(v.likedItemsRef.splice(x,1),c.like+=-1):c.rate+=1}m(s)},Q=R(!1),O=R({}),z=s=>{Q.value=!0,O.value=s},A=s=>{s.target.src="/images/default.png"};function P(s){d(s.target,300)}function M(s){d(s.target,110)}function d(s,p){const x=s.naturalWidth,w=s.naturalHeight,C=Math.min(x,p),_=C/x,F=w*_;s.style.width=`${C}px`,s.style.height=`${F}px`}return(s,p)=>(r(),b(G,null,[a("div",da,[(r(!0),b(G,null,ne(g.value,(x,w)=>{var C;return r(),b(G,{key:w},[f(x,!1)?(r(),b("div",fa,[a("div",pa,[a("div",{class:ue(["flex flex-row",x.subItems.length!==0?"flex-grow-1":""]),onClick:_=>z(x.dish)},[((C=x.dish.etiquette)==null?void 0:C.length)>0?(r(),b("div",{key:0,class:ue(y(x.dish.etiquette))},h(i(t)("common.etiquette."+x.dish.etiquette)),3)):E("",!0),a("div",ha,[a("img",{src:x.dish.image||"/images/default.png",alt:x.dish.name,class:"w-full h-full",style:{"object-fit":"cover"},onError:A,onLoad:M},null,40,ma)]),a("div",ba,[a("div",ga,h(x.dish.name),1),a("div",null,[a("div",ya,[a("div",_a,[(r(),b(G,null,ne(5,_=>a("i",{key:_,class:ue(["pi invert-star",_<=Math.floor(x.dish.likes/x.dish.rates*5)?"pi-star-fill":_-.5<=x.dish.likes/x.dish.rates*5?"pi-star-half-fill":"pi-star"]),style:{color:"black"}},null,2)),64)),a("p",null,"("+h(x.dish.rates?x.dish.rates:0)+")",1)])])]),a("div",null,[a("p",wa,h(x.dish.note),1)])])],10,va),x.subItems.length==0?(r(),b("div",{key:0,class:ue(["flex ml-2 mr-2 mb-2",Number(x.dish.price)>0?"justify-content-between":"justify-content-end"])},[!x.dish.discount&&Number(x.dish.price)>0?(r(),b("span",ka,"â‚¬"+h(x.dish.price),1)):E("",!0),x.dish.discount?(r(),b("div",xa,[a("span",$a,"â‚¬"+h(x.dish.dis_price),1),a("span",Ta,"â‚¬"+h(x.dish.price),1),L(i(we),{severity:"danger",value:"-"+x.dish.discount+"%"},null,8,["value"])])):E("",!0),x.dish.soldout?E("",!0):(r(),b("div",Da,[L(i(J),{icon:"pi pi-minus",rounded:"",disabled:x.dish.quantity<=0,onClick:_=>x.dish.quantity--,class:"w-2rem h-2rem"},null,8,["disabled","onClick"]),a("span",Ca,h(x.dish.quantity),1),L(i(J),{icon:"pi pi-plus",rounded:"",disabled:l(x.dish),onClick:_=>x.dish.quantity++,class:"w-2rem h-2rem"},null,8,["disabled","onClick"])])),x.dish.soldout?(r(),b("div",Ia,[L(i(we),{severity:"danger",value:s.$t("common.soldout")},null,8,["value"])])):E("",!0)],2)):E("",!0),x.subItems.length!==0?(r(!0),b(G,{key:1},ne(x.subItems,(_,F)=>(r(),b(G,{key:"index"},[!_.disable&&f(_)?(r(),b("div",Sa,[a("div",Na,[a("div",Aa,[a("span",Ba,h(_.subname),1),!_.discount&&_.price!=="0.00"&&_.price!=="0"?(r(),b("span",La,"â‚¬"+h(_.price),1)):E("",!0),_.discount?(r(),b("div",Pa,[a("span",qa,"â‚¬"+h(_.dis_price),1),a("span",za,"â‚¬"+h(_.price),1),L(i(we),{severity:"danger",value:"-"+_.discount+"%"},null,8,["value"])])):E("",!0)]),_.soldout?E("",!0):(r(),b("div",Oa,[L(i(J),{icon:"pi pi-minus",rounded:"",disabled:_.quantity<=0,onClick:S=>_.quantity--,class:"w-2rem h-2rem"},null,8,["disabled","onClick"]),a("span",Ea,h(_.quantity),1),L(i(J),{icon:"pi pi-plus",rounded:"",onClick:S=>_.quantity++,class:"w-2rem h-2rem",disabled:l(_)},null,8,["onClick","disabled"])])),_.soldout?(r(),b("div",Ma,[L(i(we),{severity:"danger",value:s.$t("common.soldout")},null,8,["value"])])):E("",!0)])])):E("",!0)],64))),128)):E("",!0)])])):E("",!0)],64)}),128))]),L(i(ge),{visible:Q.value,"onUpdate:visible":p[2]||(p[2]=x=>Q.value=x),modal:"",header:" ",style:qe([{width:"23rem"},{width:"80vw","max-width":"700px"}]),pt:{header:{class:"p-1"}}},{default:H(()=>[a("div",Ra,[a("span",ja,h(O.value.name),1)]),a("div",Va,[a("span",Fa,h(O.value.note),1)]),a("div",Ha,[a("div",Ka,[a("img",{class:"w-full h-auto object-contain",src:O.value.image,alt:O.value.name,onError:A,onLoad:P},null,40,Ua)])]),a("div",Wa,[(r(!0),b(G,null,ne(O.value.allergies,(x,w)=>(r(),b("img",{src:"images/"+x+".png",alt:x,class:"w-2rem h-2rem border-round flex-shrink-0",style:{"object-fit":"cover","min-width":"2rem"}},null,8,Qa))),256)),a("div",Ja,[a("button",{onClick:p[0]||(p[0]=x=>q(O.value)),class:"p-0 border-none bg-transparent cursor-pointer"},[a("i",{class:ue(["pi pi-thumbs-up text-xl",v.likedItemsRef.includes(O.value)?"text-green-500":"text-gray-400"])},null,2)]),a("button",{onClick:p[1]||(p[1]=x=>U(O.value)),class:"p-0 border-none bg-transparent cursor-pointer"},[a("i",{class:ue(["pi pi-thumbs-down text-xl",v.dislikedItemsRef.includes(O.value)?"text-red-500":"text-gray-400"])},null,2)])])])]),_:1},8,["visible"])],64))}},Za=De(Ga,[["__scopeId","data-v-e1c6bd92"]]),Xa={key:0,class:"text-3xl font-bold"},Ya={class:"flex flex-column gap-3 p-1"},es={key:0,class:"flex flex-column gap-1"},ts={key:0,class:"m-0"},as={key:0,class:"m-0"},ss={class:"flex justify-content-between gap-4 mt-1"},ns={class:"flex align-items-center gap-2"},os=["src","alt"],is={class:"flex-grow-1 min-width-0 max-w-18rem"},ls={class:"flex flex-column gap-1"},rs={class:"flex align-items-center gap-2"},us={class:"text-xl font-bold line1 whitespace-nowrap overflow-hidden text-overflow-ellipsis",style:{"max-width":"20rem"}},cs={class:"flex align-items-end gap-1"},ds={key:0,class:"text-xl font-bold text-primary"},fs={key:1,class:"text-xl font-bold text-primary"},ps={key:2,class:"text-sm text-color-secondary"},vs={key:0,class:"text-xs text-primary"},hs={class:"flex-shrink-0 flex flex-wrap justify-content-between align-items-center gap-1"},ms={class:"flex flex-wrap justify-content-between align-content-center"},bs={class:"flex align-items-center gap-1"},gs={class:"w-2rem text-center"},ys={key:1,class:"flex flex-column gap-2 mt-2"},_s={for:"in_label"},ws={for:"in_label"},ks={class:"bottom-0 left-0 mt-2"},xs={class:"text-2xl font-bold"},$s={class:"text-2xl font-bold text-primary pl-2"},Ts={class:"flex justify-content-between"},Ds={__name:"Cart",props:{checkout:{type:Function,required:!0},isTakeaway:Boolean},setup(e,{expose:t}){const{locale:n}=pe(),g=ut(),{t:v}=pe(),f=re.cartDishs,c=R([]),V=R(),l=R(),k=R(!1),N=R(!1),y=R(!0),m=R(""),q=R("");function W(S,$,I){let te="";const j=n.value,Y=B.customDishAPI.getCustomDishByName(S);for(const se of I){const de=Y.types[$].dishes.find(fe=>fe.dishid===se.id)[`name_${j}`];te=te+de+"/"}return te}function U(S,$){const I=n.value;return B.customDishAPI.getCustomDishByName(S).types[$][`typeName_${I}`]}const Q=(S,$)=>{const I=c.value[S].quantity+$;I>=0&&(c.value[S].quantity=I)};function O(S){S&&V.value&&(V.value.dishNote=l.value?l.value:void 0),N.value=!1}function z(){l.value&&(l.value=void 0),V.value&&(V.value=void 0)}function A(S){V.value=S,l.value=V.value.dishNote?V.value.dishNote:void 0,N.value=!0}const P=e;t({showDishList:S=>{k.value=!0,c.value.length=0;for(let $=0;$<S.length;$++)c.value.push(S[$]);y.value=c.value.length==0&&f.length==0}});function d(S){re.removeItem(S)}function s(){P.isTakeaway?p():x()}function p(){const S=[];f.value.forEach($=>{S.push($)}),c.value.forEach($=>{$.quantity>0&&S.push($)}),S.length<=0?le.show_warn(v("notification.select_at_least_one")):(k.value=!1,g.push({path:"/paymentPage"}))}function x(){P.checkout({name:m.value,note:q.value},S=>{S.success&&(f.value.forEach($=>{$.dishNote=void 0}),c.value.forEach($=>{$.dishNote=void 0}),q.value="",ee.cleanDishDataQty(),ce.deleteCookie("cartDish_normal"),re.cleanAll(),ce.deleteCookie("cartDish_custom"))})&&(k.value=!1)}function w(S){return S.subname!=""&&S.subname!="Default Title"?S.name+" "+S.subname:S.name}function C(){let S=0;return f.value.forEach($=>{S+=$.discount?($.dis_price?$.dis_price:0)*$.count:($.price?$.price:0)*$.count}),c.value.forEach($=>{S+=$.discount?($.dis_price?$.dis_price:0)*$.quantity:($.price?$.price:0)*$.quantity}),"â‚¬"+S.toFixed(2)}const _=S=>{S.target.src="/images/default.png"},F=S=>{const $=S.quantity;let I=3;return S.price>0&&(I=9),$>=I};return(S,$)=>(r(),b(G,null,[L(i(ge),{class:"bg-primary-reverse text-sm md:text-lg lg:text-xl",visible:k.value,"onUpdate:visible":$[2]||($[2]=I=>k.value=I),modal:"",header:S.$t("common.cart"),style:qe([{backgroundColor:"rgba(250, 250, 250, 1)",height:"100%",minWidth:"24rem"},{width:"80vw","max-width":"700px"}]),dismissableMask:!0},{footer:H(()=>[a("div",ks,[a("span",xs,h(S.$t("common.total"))+": ",1),a("span",$s,h(C()),1),L(i(J),{icon:e.isTakeaway?"pi pi-wallet":"pi pi-plus",class:"p-button-success p-button-rounded ml-3",onClick:s,label:e.isTakeaway?i(v)("common.pay"):i(v)("common.send")},null,8,["icon","label"])])]),default:H(()=>[y.value?(r(),b("h2",Xa,"Cart is empty.")):E("",!0),a("div",Ya,[(r(!0),b(G,null,ne(i(f),(I,te)=>(r(),X(i(Ot),{style:{overflow:"hidden"},key:te},{title:H(()=>[be(h(S.$t(`common.${I.name}`)),1)]),subtitle:H(()=>[be(h(S.$t("common.price"))+" : "+h(I.price)+"â‚¬",1)]),content:H(()=>[i(B).customDishAPI.customDishes.value.find(j=>j.name==I.name)?(r(),b("div",es,[(r(!0),b(G,null,ne(I.notesAndId,(j,Y)=>(r(),b("div",null,[I.notesAndId[Y].length!==0?(r(),b("span",ts,h(U(I.name,Y))+": "+h(W(I.name,Y,j)),1)):E("",!0)]))),256)),a("div",null,[I.dishNote?(r(),b("span",as,h(S.$t("common.note"))+": "+h(I.dishNote),1)):E("",!0)])])):E("",!0)]),footer:H(()=>[a("div",ss,[e.isTakeaway?E("",!0):(r(),X(i(J),{key:0,label:i(v)("common.edit")+" "+i(v)("common.note"),severity:"contrast",onClick:j=>A(I)},null,8,["label","onClick"])),L(i(J),{label:i(v)("common.remove"),severity:"danger",onClick:j=>d(I)},null,8,["label","onClick"])])]),_:2},1024))),128)),(r(!0),b(G,null,ne(c.value,(I,te)=>(r(),b("div",{key:te,class:"p-2 border-round shadow-1 transition-all transition-duration-200 hover:shadow-3 flex flex-column gap-1"},[a("div",ns,[a("img",{src:I.image,alt:I.name,class:"w-4rem h-4rem border-round flex-shrink-0",onError:_,style:{"object-fit":"cover","min-width":"4rem"}},null,40,os),a("div",is,[a("div",ls,[a("div",rs,[a("span",us,h(w(I)),1)])]),a("div",cs,[I.discount?(r(),b("span",ds,"â‚¬"+h(Number(I.dis_price?I.dis_price:0).toFixed(2)),1)):E("",!0),I.discount?E("",!0):(r(),b("span",fs,"â‚¬"+h(Number(I.price?I.price:0).toFixed(2)),1)),I.price>0?(r(),b("span",ps,"/uni.")):E("",!0)])])]),a("div",null,[I.dishNote?(r(),b("span",vs,h(i(v)("common.note")+": "+I.dishNote),1)):E("",!0)]),a("div",hs,[a("div",ms,[e.isTakeaway?E("",!0):(r(),X(i(J),{key:0,label:i(v)("common.edit")+" "+i(v)("common.note"),severity:"contrast",class:"w-3.5rem h-2rem",onClick:j=>A(I)},null,8,["label","onClick"]))]),a("div",bs,[L(i(J),{icon:"pi pi-minus",rounded:"",disabled:I.quantity<=0,onClick:j=>Q(te,-1),class:"w-2rem h-2rem"},null,8,["disabled","onClick"]),a("span",gs,h(I.quantity),1),L(i(J),{icon:"pi pi-plus",rounded:"",disabled:F(I),onClick:j=>Q(te,1),class:"w-2rem h-2rem"},null,8,["disabled","onClick"])])])]))),128))]),e.isTakeaway?E("",!0):(r(),b("div",ys,[L(i(nt),{variant:"in"},{default:H(()=>[L(i(ft),{id:"in_label",modelValue:m.value,"onUpdate:modelValue":$[0]||($[0]=I=>m.value=I),variant:"filled",maxlength:"20"},null,8,["modelValue"]),a("label",_s,h(i(v)("common.name")),1)]),_:1}),L(i(nt),{variant:"in"},{default:H(()=>[L(i(st),{id:"in_label",class:"min-w-full",rows:"5",modelValue:q.value,"onUpdate:modelValue":$[1]||($[1]=I=>q.value=I),variant:"filled",maxlength:"200"},null,8,["modelValue"]),a("label",ws,h(i(v)("common.observation")),1)]),_:1})]))]),_:1},8,["visible","header"]),L(i(ge),{visible:N.value,"onUpdate:visible":$[6]||($[6]=I=>N.value=I),header:i(v)("common.note"),onHide:$[7]||($[7]=I=>z()),modal:"",dismissableMask:!0},{default:H(()=>[L(i(st),{modelValue:l.value,"onUpdate:modelValue":$[3]||($[3]=I=>l.value=I),rows:"5",cols:"30",placeholder:i(v)("common.edit")+" "+i(v)("common.note")+"...",maxlength:"100"},null,8,["modelValue","placeholder"]),a("div",Ts,[L(i(J),{label:i(v)("common.cancel"),severity:"danger",onClick:$[4]||($[4]=I=>O(!1))},null,8,["label"]),L(i(J),{label:i(v)("common.save"),severity:"primary",size:"sm",onClick:$[5]||($[5]=I=>O(!0))},null,8,["label"])])]),_:1},8,["visible","header"])],64))}},Cs=De(Ds,[["__scopeId","data-v-0e3055df"]]);var Is=Oe`
    .p-overlaybadge {
        position: relative;
    }

    .p-overlaybadge .p-badge {
        position: absolute;
        inset-block-start: 0;
        inset-inline-end: 0;
        transform: translate(50%, -50%);
        transform-origin: 100% 0;
        margin: 0;
        outline-width: dt('overlaybadge.outline.width');
        outline-style: solid;
        outline-color: dt('overlaybadge.outline.color');
    }

    .p-overlaybadge .p-badge:dir(rtl) {
        transform: translate(-50%, -50%);
    }
`,Ss={root:"p-overlaybadge"},Ns=ye.extend({name:"overlaybadge",style:Is,classes:Ss}),As={name:"OverlayBadge",extends:pt,style:Ns,provide:function(){return{$pcOverlayBadge:this,$parentInstance:this}}},ht={name:"OverlayBadge",extends:As,inheritAttrs:!1,components:{Badge:pt}};function Bs(e,t,n,g,v,f){var c=Dt("Badge");return r(),b("div",Z({class:e.cx("root")},e.ptmi("root")),[he(e.$slots,"default"),L(c,Z(e.$props,{pt:e.ptm("pcBadge")}),null,16,["pt"])],16)}ht.render=Bs;R([]);R("iniImages()");const Ls={class:"m-3"},Ps={class:"flex flex-column gap-2"},qs={class:"w-full flex justify-content-center"},zs={key:0,class:"max-w-19rem"},Os=["src"],Es={style:{width:"300px",height:"300px",background:"url(/boxImage/box.png)"}},Ms={key:0,class:"flex align-items-center justify-content-center text-4xl font-bold text-white w-full h-full"},Rs={key:1,class:"grid m-0 p-2"},js=["onClick"],Vs={class:"flex align-items-center justify-content-center font-bold m-0 p-0",style:{width:"94px",height:"94px"}},Fs=["src"],Hs={class:"flex flex-wrap justify-content-between align-items-center m-1"},Ks={class:"flex gap-1 align-items-center"},Us={key:0},Ws={class:"font-bold mb-2"},Qs={key:1,class:"flex justify-content-between gap-2 mt-3"},Js={class:"font-bold mb-2"},Gs={class:"flex mr-2"},Zs={class:"w-3rem text-xl text-center"},Xs={class:"font-bold block mb-2"},Ys={class:"flex flex-wrap"},en={key:2,class:"flex flex-wrap gap-2 mt-3"},tn={class:"font-bold block mb-2"},an={class:"font-bold block mb-2 text-center"},sn={class:"flex flex-wrap gap-2 mt-3"},nn={__name:"CustomDish",props:{currentCustomDish:Object,tabindex:Number},emits:["typeClick"],setup(e,{emit:t}){const{locale:n}=pe(),g=e,v=Ct(),{t:f}=pe(),c=R(null);Le(()=>g.currentCustomDish,w=>{w&&(c.value=w)},{immediate:!0,deep:!0});const V=ve(()=>c.boxImages),l=R(0),k=ve(()=>{var C;if(c.value==null)return 0;let w=(C=c.value)==null?void 0:C.initialPrice;for(const _ of c.value.types??[])for(const F of _.dishes??[])F.selected&&(w+=F.price);return Number(w).toFixed(2)}),N=t,y=R(null),m=ve(()=>{const w=n.value,C=`title_${w}`,_=`description_${w}`;return c.value==null?{}:c.value.descriptions.map(F=>({title:F[C],descriptions:F.descriptions.map(S=>S[_]),image:F==null?void 0:F.image}))}),q=ve(()=>{var _,F;const w=Number(((_=c.value)==null?void 0:_.like)??0),C=Number(((F=c.value)==null?void 0:F.rate)??0);return C?w/C*5:0});function W(w,C){const _=n.value;return w[`${C}_${_}`]}function U(w,C,_){const F=w[C];if(F.selected){F.selected=!1;return}else{const $=w.filter(I=>I.selected).length;if(_===1){s(w),F.selected=!0;return}$<_&&(F.selected=!0)}}function Q(w,C,_){const F=w.dishes;N("typeClick",w,C,F[C].selected),U(F,C,_)}function O(w){return w.selected}function z(){if(!p(c.value.types))return;const w=P(c.value.types),C=M(c.value.types);re.addItem({dishid:-1,name:c.value.name,category:g.currentCustomDish.category,count:l.value!==0?l.value:1,price:k.value,notes:w,notesAndId:C}),console.log("CART: ",re.cartDishs),d(c.value.types),le.show({severity:"info",summary:"info",detail:f("customDishBibimbapVue.addToCartSuccessBibimbap")})}function A(w){return!w||!w.dishes?"":w.dishes.filter(_=>_.selected).map(_=>_.name).join(",")}function P(w){return w?w.map(C=>A(C)):[]}function M(w){return w?w.map(C=>C.dishes?C.dishes.filter(_=>_.selected).map(_=>({id:_.dishid,name:_.name})):[]):[]}function d(w){w&&w.forEach(C=>{C.dishes&&C.dishes.forEach(_=>{_.selected=!1})})}function s(w){w.forEach(C=>C.selected=!1)}function p(w){if(c.value.options.quantity&&l.value<=0)return le.show({severity:"warn",detail:f("notification.quantity_must_be_positive")}),!1;for(const C of w)if(C.dishes.filter(F=>F.selected).length<C.minQuantity){const F=C.typeName;return le.show({severity:"warn",detail:f("notification.select_type_of",{name:F})}),!1}return!0}function x(w){w?B.customDishAPI.like(c.value.id)&&(y.value="like",v.add({severity:"success",summary:f("common.success"),detail:f("common.rate")+" "+f("common.success"),life:750})):B.customDishAPI.unLike(c.value.id)&&(y.value="unlike",v.add({severity:"success",summary:f("common.success"),detail:f("common.rate")+" "+f("common.success"),life:750}))}return(w,C)=>{var _,F,S,$,I,te;return r(),b("div",Ls,[a("div",Ps,[L(i(Ze),{class:"w-full max-w-xl mx-auto"},{default:H(()=>[(r(!0),b(G,null,ne(m.value,(j,Y)=>(r(),X(i(Qe),{key:Y,value:Y},{default:H(()=>[L(i(Je),null,{default:H(()=>[be(h(j.title),1)]),_:2},1024),L(i(Ge),null,{default:H(()=>{var se;return[(r(!0),b(G,null,ne(j.descriptions,(de,fe)=>(r(),b("p",{key:fe},h(de),1))),128)),a("div",qs,[(se=j.image)!=null&&se.src?(r(),b("div",zs,[a("img",{src:j.image.src,class:"w-full"},null,8,Os)])):E("",!0)])]}),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1}),((F=(_=c.value)==null?void 0:_.value)==null?void 0:F.name)==="MY BOX"?(r(),X(i(Ze),{key:0,class:"w-full max-w-xl mx-auto"},{default:H(()=>[L(i(Qe),{value:"0"},{default:H(()=>[L(i(Je),null,{default:H(()=>[be(" ðŸ¥© "+h(w.$t("common.showMybox")),1)]),_:1}),L(i(Ge),null,{default:H(()=>[a("div",Es,[w.isEmptyArray(V.value)?(r(),b("div",Ms,h(w.$t("common.myboxAlarm")),1)):E("",!0),w.isEmptyArray(V.value)?E("",!0):(r(),b("div",Rs,[(r(!0),b(G,null,ne(V.value,j=>(r(),b("div",{class:"col-4 p-0",onClick:Y=>w.imageSelectAction(j)},[a("div",Vs,[j?(r(),b("img",{key:0,class:"m-0 p-0",src:w.imagePath(j),style:{width:"82px",height:"82px"}},null,8,Fs)):E("",!0)])],8,js))),256))]))])]),_:1})]),_:1})]),_:1})):E("",!0)]),a("div",Hs,[a("div",Ks,[(r(),b(G,null,ne(5,j=>a("i",{key:j,class:ue(["pi invert-star",j<=Math.floor(q.value)?"pi-star-fill":j-.5<=q.value?"pi-star-half":"pi-star"]),style:{color:"black"}},null,2)),64)),a("p",null,"("+h((S=c.value)!=null&&S.rate?c.value.rate:0)+")",1)]),a("div",null,[L(i(J),{text:"",icon:"pi pi-thumbs-up",severity:y.value==="like"?"success":"",onClick:C[0]||(C[0]=j=>x(!0))},null,8,["severity"]),L(i(J),{text:"",icon:"pi pi-thumbs-down",severity:y.value==="unlike"?"danger":"",onClick:C[1]||(C[1]=j=>x(!1))},null,8,["severity"])])]),($=c.value)!=null&&$.options.extraInfo?(r(),b("div",Us,[a("label",Ws,h(c.value.options.extraInfo),1)])):E("",!0),(I=c.value)!=null&&I.options.quantity?(r(),b("div",Qs,[a("div",null,[a("label",Js,h(w.$t("common.quantity"))+" / "+h(w.$t("common.pieces")),1)]),a("div",Gs,[L(i(J),{icon:"pi pi-minus",disabled:l.value<=0,onClick:C[2]||(C[2]=j=>{var Y;return l.value-=(Y=c.value)==null?void 0:Y.options.quantitySetp}),class:"w-2rem h-2rem"},null,8,["disabled"]),a("span",Zs,h(l.value),1),L(i(J),{icon:"pi pi-plus",disabled:l.value>=c.value.options.maxQuantity,onClick:C[3]||(C[3]=j=>{var Y;return l.value+=(Y=c.value)==null?void 0:Y.options.quantitySetp}),class:"w-2rem h-2rem"},null,8,["disabled"])])])):E("",!0),(r(!0),b(G,null,ne((te=c.value)==null?void 0:te.types,(j,Y)=>(r(),b("div",{key:j.id},[ze(a("div",null,[a("label",Xs,h(Y+1)+". "+h(W(j,"typeName")),1),a("div",Ys,[(r(!0),b(G,null,ne(j.dishes,(se,de)=>(r(),X(i(J),{key:de,onClick:fe=>Q(j,de,l.value==0?j.maxQuantity:j.maxQuantity*l.value),class:ue([{"p-button-primary":O(se),"p-button-outlined":!O(se)},"m-1"])},{default:H(()=>[a("p",{class:ue({"text-gray-700":!O(se)})},h(W(se,"name")),3)]),_:2},1032,["onClick","class"]))),128))])],512),[[It,j.enable]])]))),128)),e.currentCustomDish.initialPrice!==0?(r(),b("div",en,[a("label",tn,h(w.$t("common.price"))+":",1),a("label",an,h(k.value+"â‚¬"),1)])):E("",!0),a("div",sn,[L(i(J),{icon:"pi pi-shopping-cart",onClick:C[4]||(C[4]=j=>z()),label:w.$t("common.addToCart"),class:"m-3",severity:"primary",raised:""},null,8,["label"])])])}}},on=De(nn,[["__scopeId","data-v-e37fc872"]]);var ln=Oe`
    .p-tabs {
        display: flex;
        flex-direction: column;
    }

    .p-tablist {
        display: flex;
        position: relative;
    }

    .p-tabs-scrollable > .p-tablist {
        overflow: hidden;
    }

    .p-tablist-viewport {
        overflow-x: auto;
        overflow-y: hidden;
        scroll-behavior: smooth;
        scrollbar-width: none;
        overscroll-behavior: contain auto;
    }

    .p-tablist-viewport::-webkit-scrollbar {
        display: none;
    }

    .p-tablist-tab-list {
        position: relative;
        display: flex;
        background: dt('tabs.tablist.background');
        border-style: solid;
        border-color: dt('tabs.tablist.border.color');
        border-width: dt('tabs.tablist.border.width');
    }

    .p-tablist-content {
        flex-grow: 1;
    }

    .p-tablist-nav-button {
        all: unset;
        position: absolute !important;
        flex-shrink: 0;
        inset-block-start: 0;
        z-index: 2;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        background: dt('tabs.nav.button.background');
        color: dt('tabs.nav.button.color');
        width: dt('tabs.nav.button.width');
        transition:
            color dt('tabs.transition.duration'),
            outline-color dt('tabs.transition.duration'),
            box-shadow dt('tabs.transition.duration');
        box-shadow: dt('tabs.nav.button.shadow');
        outline-color: transparent;
        cursor: pointer;
    }

    .p-tablist-nav-button:focus-visible {
        z-index: 1;
        box-shadow: dt('tabs.nav.button.focus.ring.shadow');
        outline: dt('tabs.nav.button.focus.ring.width') dt('tabs.nav.button.focus.ring.style') dt('tabs.nav.button.focus.ring.color');
        outline-offset: dt('tabs.nav.button.focus.ring.offset');
    }

    .p-tablist-nav-button:hover {
        color: dt('tabs.nav.button.hover.color');
    }

    .p-tablist-prev-button {
        inset-inline-start: 0;
    }

    .p-tablist-next-button {
        inset-inline-end: 0;
    }

    .p-tablist-prev-button:dir(rtl),
    .p-tablist-next-button:dir(rtl) {
        transform: rotate(180deg);
    }

    .p-tab {
        flex-shrink: 0;
        cursor: pointer;
        user-select: none;
        position: relative;
        border-style: solid;
        white-space: nowrap;
        gap: dt('tabs.tab.gap');
        background: dt('tabs.tab.background');
        border-width: dt('tabs.tab.border.width');
        border-color: dt('tabs.tab.border.color');
        color: dt('tabs.tab.color');
        padding: dt('tabs.tab.padding');
        font-weight: dt('tabs.tab.font.weight');
        transition:
            background dt('tabs.transition.duration'),
            border-color dt('tabs.transition.duration'),
            color dt('tabs.transition.duration'),
            outline-color dt('tabs.transition.duration'),
            box-shadow dt('tabs.transition.duration');
        margin: dt('tabs.tab.margin');
        outline-color: transparent;
    }

    .p-tab:not(.p-disabled):focus-visible {
        z-index: 1;
        box-shadow: dt('tabs.tab.focus.ring.shadow');
        outline: dt('tabs.tab.focus.ring.width') dt('tabs.tab.focus.ring.style') dt('tabs.tab.focus.ring.color');
        outline-offset: dt('tabs.tab.focus.ring.offset');
    }

    .p-tab:not(.p-tab-active):not(.p-disabled):hover {
        background: dt('tabs.tab.hover.background');
        border-color: dt('tabs.tab.hover.border.color');
        color: dt('tabs.tab.hover.color');
    }

    .p-tab-active {
        background: dt('tabs.tab.active.background');
        border-color: dt('tabs.tab.active.border.color');
        color: dt('tabs.tab.active.color');
    }

    .p-tabpanels {
        background: dt('tabs.tabpanel.background');
        color: dt('tabs.tabpanel.color');
        padding: dt('tabs.tabpanel.padding');
        outline: 0 none;
    }

    .p-tabpanel:focus-visible {
        box-shadow: dt('tabs.tabpanel.focus.ring.shadow');
        outline: dt('tabs.tabpanel.focus.ring.width') dt('tabs.tabpanel.focus.ring.style') dt('tabs.tabpanel.focus.ring.color');
        outline-offset: dt('tabs.tabpanel.focus.ring.offset');
    }

    .p-tablist-active-bar {
        z-index: 1;
        display: block;
        position: absolute;
        inset-block-end: dt('tabs.active.bar.bottom');
        height: dt('tabs.active.bar.height');
        background: dt('tabs.active.bar.background');
        transition: 250ms cubic-bezier(0.35, 0, 0.25, 1);
    }
`,rn={root:function(t){var n=t.props;return["p-tabs p-component",{"p-tabs-scrollable":n.scrollable}]}},un=ye.extend({name:"tabs",style:ln,classes:rn}),cn={name:"BaseTabs",extends:Te,props:{value:{type:[String,Number],default:void 0},lazy:{type:Boolean,default:!1},scrollable:{type:Boolean,default:!1},showNavigators:{type:Boolean,default:!0},tabindex:{type:Number,default:0},selectOnFocus:{type:Boolean,default:!1}},style:un,provide:function(){return{$pcTabs:this,$parentInstance:this}}},mt={name:"Tabs",extends:cn,inheritAttrs:!1,emits:["update:value"],data:function(){return{d_value:this.value}},watch:{value:function(t){this.d_value=t}},methods:{updateValue:function(t){this.d_value!==t&&(this.d_value=t,this.$emit("update:value",t))},isVertical:function(){return this.orientation==="vertical"}}};function dn(e,t,n,g,v,f){return r(),b("div",Z({class:e.cx("root")},e.ptmi("root")),[he(e.$slots,"default")],16)}mt.render=dn;var fn={root:"p-tablist",content:function(t){var n=t.instance;return["p-tablist-content",{"p-tablist-viewport":n.$pcTabs.scrollable}]},tabList:"p-tablist-tab-list",activeBar:"p-tablist-active-bar",prevButton:"p-tablist-prev-button p-tablist-nav-button",nextButton:"p-tablist-next-button p-tablist-nav-button"},pn=ye.extend({name:"tablist",classes:fn}),vn={name:"BaseTabList",extends:Te,props:{},style:pn,provide:function(){return{$pcTabList:this,$parentInstance:this}}},bt={name:"TabList",extends:vn,inheritAttrs:!1,inject:["$pcTabs"],data:function(){return{isPrevButtonEnabled:!1,isNextButtonEnabled:!0}},resizeObserver:void 0,watch:{showNavigators:function(t){t?this.bindResizeObserver():this.unbindResizeObserver()},activeValue:{flush:"post",handler:function(){this.updateInkBar()}}},mounted:function(){var t=this;setTimeout(function(){t.updateInkBar()},150),this.showNavigators&&(this.updateButtonState(),this.bindResizeObserver())},updated:function(){this.showNavigators&&this.updateButtonState()},beforeUnmount:function(){this.unbindResizeObserver()},methods:{onScroll:function(t){this.showNavigators&&this.updateButtonState(),t.preventDefault()},onPrevButtonClick:function(){var t=this.$refs.content,n=this.getVisibleButtonWidths(),g=He(t)-n,v=Math.abs(t.scrollLeft),f=g*.8,c=v-f,V=Math.max(c,0);t.scrollLeft=tt(t)?-1*V:V},onNextButtonClick:function(){var t=this.$refs.content,n=this.getVisibleButtonWidths(),g=He(t)-n,v=Math.abs(t.scrollLeft),f=g*.8,c=v+f,V=t.scrollWidth-g,l=Math.min(c,V);t.scrollLeft=tt(t)?-1*l:l},bindResizeObserver:function(){var t=this;this.resizeObserver=new ResizeObserver(function(){return t.updateButtonState()}),this.resizeObserver.observe(this.$refs.list)},unbindResizeObserver:function(){var t;(t=this.resizeObserver)===null||t===void 0||t.unobserve(this.$refs.list),this.resizeObserver=void 0},updateInkBar:function(){var t=this.$refs,n=t.content,g=t.inkbar,v=t.tabs;if(g){var f=We(n,'[data-pc-name="tab"][data-p-active="true"]');this.$pcTabs.isVertical()?(g.style.height=Nt(f)+"px",g.style.top=Ne(f).top-Ne(v).top+"px"):(g.style.width=At(f)+"px",g.style.left=Ne(f).left-Ne(v).left+"px")}},updateButtonState:function(){var t=this.$refs,n=t.list,g=t.content,v=g.scrollTop,f=g.scrollWidth,c=g.scrollHeight,V=g.offsetWidth,l=g.offsetHeight,k=Math.abs(g.scrollLeft),N=[He(g),St(g)],y=N[0],m=N[1];this.$pcTabs.isVertical()?(this.isPrevButtonEnabled=v!==0,this.isNextButtonEnabled=n.offsetHeight>=l&&parseInt(v)!==c-m):(this.isPrevButtonEnabled=k!==0,this.isNextButtonEnabled=n.offsetWidth>=V&&parseInt(k)!==f-y)},getVisibleButtonWidths:function(){var t=this.$refs,n=t.prevButton,g=t.nextButton,v=0;return this.showNavigators&&(v=((n==null?void 0:n.offsetWidth)||0)+((g==null?void 0:g.offsetWidth)||0)),v}},computed:{templates:function(){return this.$pcTabs.$slots},activeValue:function(){return this.$pcTabs.d_value},showNavigators:function(){return this.$pcTabs.scrollable&&this.$pcTabs.showNavigators},prevButtonAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.previous:void 0},nextButtonAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.next:void 0},dataP:function(){return Ee({scrollable:this.$pcTabs.scrollable})}},components:{ChevronLeftIcon:Rt,ChevronRightIcon:jt},directives:{ripple:ct}},hn=["data-p"],mn=["aria-label","tabindex"],bn=["data-p"],gn=["aria-orientation"],yn=["aria-label","tabindex"];function _n(e,t,n,g,v,f){var c=dt("ripple");return r(),b("div",Z({ref:"list",class:e.cx("root"),"data-p":f.dataP},e.ptmi("root")),[f.showNavigators&&v.isPrevButtonEnabled?ze((r(),b("button",Z({key:0,ref:"prevButton",type:"button",class:e.cx("prevButton"),"aria-label":f.prevButtonAriaLabel,tabindex:f.$pcTabs.tabindex,onClick:t[0]||(t[0]=function(){return f.onPrevButtonClick&&f.onPrevButtonClick.apply(f,arguments)})},e.ptm("prevButton"),{"data-pc-group-section":"navigator"}),[(r(),X(ke(f.templates.previcon||"ChevronLeftIcon"),Z({"aria-hidden":"true"},e.ptm("prevIcon")),null,16))],16,mn)),[[c]]):E("",!0),a("div",Z({ref:"content",class:e.cx("content"),onScroll:t[1]||(t[1]=function(){return f.onScroll&&f.onScroll.apply(f,arguments)}),"data-p":f.dataP},e.ptm("content")),[a("div",Z({ref:"tabs",class:e.cx("tabList"),role:"tablist","aria-orientation":f.$pcTabs.orientation||"horizontal"},e.ptm("tabList")),[he(e.$slots,"default"),a("span",Z({ref:"inkbar",class:e.cx("activeBar"),role:"presentation","aria-hidden":"true"},e.ptm("activeBar")),null,16)],16,gn)],16,bn),f.showNavigators&&v.isNextButtonEnabled?ze((r(),b("button",Z({key:1,ref:"nextButton",type:"button",class:e.cx("nextButton"),"aria-label":f.nextButtonAriaLabel,tabindex:f.$pcTabs.tabindex,onClick:t[2]||(t[2]=function(){return f.onNextButtonClick&&f.onNextButtonClick.apply(f,arguments)})},e.ptm("nextButton"),{"data-pc-group-section":"navigator"}),[(r(),X(ke(f.templates.nexticon||"ChevronRightIcon"),Z({"aria-hidden":"true"},e.ptm("nextIcon")),null,16))],16,yn)),[[c]]):E("",!0)],16,hn)}bt.render=_n;var wn={root:function(t){var n=t.instance,g=t.props;return["p-tab",{"p-tab-active":n.active,"p-disabled":g.disabled}]}},kn=ye.extend({name:"tab",classes:wn}),xn={name:"BaseTab",extends:Te,props:{value:{type:[String,Number],default:void 0},disabled:{type:Boolean,default:!1},as:{type:[String,Object],default:"BUTTON"},asChild:{type:Boolean,default:!1}},style:kn,provide:function(){return{$pcTab:this,$parentInstance:this}}},gt={name:"Tab",extends:xn,inheritAttrs:!1,inject:["$pcTabs","$pcTabList"],methods:{onFocus:function(){this.$pcTabs.selectOnFocus&&this.changeActiveValue()},onClick:function(){this.changeActiveValue()},onKeydown:function(t){switch(t.code){case"ArrowRight":this.onArrowRightKey(t);break;case"ArrowLeft":this.onArrowLeftKey(t);break;case"Home":this.onHomeKey(t);break;case"End":this.onEndKey(t);break;case"PageDown":this.onPageDownKey(t);break;case"PageUp":this.onPageUpKey(t);break;case"Enter":case"NumpadEnter":case"Space":this.onEnterKey(t);break}},onArrowRightKey:function(t){var n=this.findNextTab(t.currentTarget);n?this.changeFocusedTab(t,n):this.onHomeKey(t),t.preventDefault()},onArrowLeftKey:function(t){var n=this.findPrevTab(t.currentTarget);n?this.changeFocusedTab(t,n):this.onEndKey(t),t.preventDefault()},onHomeKey:function(t){var n=this.findFirstTab();this.changeFocusedTab(t,n),t.preventDefault()},onEndKey:function(t){var n=this.findLastTab();this.changeFocusedTab(t,n),t.preventDefault()},onPageDownKey:function(t){this.scrollInView(this.findLastTab()),t.preventDefault()},onPageUpKey:function(t){this.scrollInView(this.findFirstTab()),t.preventDefault()},onEnterKey:function(t){this.changeActiveValue(),t.preventDefault()},findNextTab:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,g=n?t:t.nextElementSibling;return g?Ae(g,"data-p-disabled")||Ae(g,"data-pc-section")==="activebar"?this.findNextTab(g):We(g,'[data-pc-name="tab"]'):null},findPrevTab:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,g=n?t:t.previousElementSibling;return g?Ae(g,"data-p-disabled")||Ae(g,"data-pc-section")==="activebar"?this.findPrevTab(g):We(g,'[data-pc-name="tab"]'):null},findFirstTab:function(){return this.findNextTab(this.$pcTabList.$refs.tabs.firstElementChild,!0)},findLastTab:function(){return this.findPrevTab(this.$pcTabList.$refs.tabs.lastElementChild,!0)},changeActiveValue:function(){this.$pcTabs.updateValue(this.value)},changeFocusedTab:function(t,n){Lt(n),this.scrollInView(n)},scrollInView:function(t){var n;t==null||(n=t.scrollIntoView)===null||n===void 0||n.call(t,{block:"nearest"})}},computed:{active:function(){var t;return Bt((t=this.$pcTabs)===null||t===void 0?void 0:t.d_value,this.value)},id:function(){var t;return"".concat((t=this.$pcTabs)===null||t===void 0?void 0:t.$id,"_tab_").concat(this.value)},ariaControls:function(){var t;return"".concat((t=this.$pcTabs)===null||t===void 0?void 0:t.$id,"_tabpanel_").concat(this.value)},attrs:function(){return Z(this.asAttrs,this.a11yAttrs,this.ptmi("root",this.ptParams))},asAttrs:function(){return this.as==="BUTTON"?{type:"button",disabled:this.disabled}:void 0},a11yAttrs:function(){return{id:this.id,tabindex:this.active?this.$pcTabs.tabindex:-1,role:"tab","aria-selected":this.active,"aria-controls":this.ariaControls,"data-pc-name":"tab","data-p-disabled":this.disabled,"data-p-active":this.active,onFocus:this.onFocus,onKeydown:this.onKeydown}},ptParams:function(){return{context:{active:this.active}}},dataP:function(){return Ee({active:this.active})}},directives:{ripple:ct}};function $n(e,t,n,g,v,f){var c=dt("ripple");return e.asChild?he(e.$slots,"default",{key:1,dataP:f.dataP,class:ue(e.cx("root")),active:f.active,a11yAttrs:f.a11yAttrs,onClick:f.onClick}):ze((r(),X(ke(e.as),Z({key:0,class:e.cx("root"),"data-p":f.dataP,onClick:f.onClick},f.attrs),{default:H(function(){return[he(e.$slots,"default")]}),_:3},16,["class","data-p","onClick"])),[[c]])}gt.render=$n;const Tn={class:"fixed top-0 left-0 w-full bg-primary-reverse",style:{"z-index":"10"}},Dn={class:"grid mt-1 ml-1"},Cn={class:"max-w-3rem flex align-items-center"},In=["src"],Sn={class:"flex align-items-center"},Nn={key:0,class:"text-color font-bold p-1"},An={key:1,class:"text-color font-bold p-1"},Bn={class:"card flex mr-3 flex align-items-center",style:{"margin-left":"auto"}},Ln={style:{display:"flex","align-items":"center"}},Pn={style:{"flex-grow":"1",width:"0",overflow:"hidden"}},qn={class:"mt-2"},zn={class:"flex justify-content-end mt-2"},On={class:"flex inline-flex items-center justify-center gap-2"},En={class:"flex align-items-center"},Mn={class:"flex flex-column"},Rn={class:"text-sm p-2"},jn={class:"text-sm p-2"},Vn={class:"flex items-center gap-4 mb-4 p-2"},Fn={class:"flex flex-column gap-3"},Hn={__name:"HeaderTabs",props:{types:Array,typeIndex:Number,tableId:String,tabItems:Array},emits:["clickType","switchToWelcome"],setup(e,{emit:t}){const{t:n}=pe(),g=R(!1);function v(){var P;const z=B.currentPage.value,A=(P=z==null?void 0:z.data)==null?void 0:P.logoPath;return A?B.pathFormated(A,z.imagesPath):"/images/logo_logo.png"}function f(){return B.getTable()}const c=R(),V=ve(()=>[{label:n("common.options"),items:[{label:n("common.pay"),icon:"pi pi-wallet",command:()=>{W()}},{label:n("common.call"),icon:"pi pi-user-plus",command:()=>{B.send_cmd(f(),{cmd:"call"},z=>{z.success?le.show_info(n("notification.call_msg")):le.show_warn(z.data)})}}]}]),l=z=>{c.value.toggle(z)},k=z=>{N.value.toggle(z)},N=R(),y=R(!1),m=R(),q=R();function W(){y.value=!0}function U(){z(m.value)?B.send_cmd(f(),{cmd:"pay",nif:m.value,note:q.value},A=>{A.success?(le.show_info(n("notification.pay_msg")),y.value=!1):le.show_error(n("common.failed"))}):le.show_warn(n("notification.cancel_msg"));function z(A){return!A||A.toString().length===9||A.toString().length===0}}function Q(){q.value&&(q.value=void 0)}function O(){g.value=!0}return(z,A)=>(r(),b(G,null,[a("div",Tn,[a("div",Dn,[a("div",Cn,[a("img",{src:v(),class:"w-full",clickble:"",onClick:A[0]||(A[0]=()=>z.$emit("switchToWelcome"))},null,8,In)]),a("div",Sn,[e.tableId?(r(),b("p",Nn,h(z.$t("common.table"))+": "+h(e.tableId),1)):E("",!0),e.tableId?E("",!0):(r(),b("p",An,h(z.$t("common.takeAway")),1))]),a("div",Bn,[e.tableId?(r(),X(i(J),{key:0,icon:"pi pi-bell",rounded:"","aria-label":"Filter",onClick:l,"aria-haspopup":"true","aria-controls":"overlay_menu"})):(r(),X(i(J),{key:1,icon:"pi pi-question",rounded:"",onClick:O})),L(i(ot),{ref_key:"menu",ref:c,id:"overlay_menu",model:V.value,popup:!0},null,8,["model"])])]),a("div",Ln,[a("div",null,[L(i(J),{icon:"pi pi-bars",variant:"text",rounded:"","aria-label":"Filter",onClick:k,"aria-haspopup":"true","aria-controls":"tab_menu"}),L(i(ot),{ref_key:"tabMenu",ref:N,id:"tab_menu",model:e.tabItems,popup:!0},null,8,["model"])]),a("div",Pn,[L(i(mt),{value:e.typeIndex,scrollable:"",showNavigators:!1},{default:H(()=>[L(i(bt),null,{default:H(()=>[(r(!0),b(G,null,ne(e.types,(P,M)=>(r(),X(i(gt),{value:M,onClick:()=>z.$emit("clickType",M),class:"text-sm md:text-lg lg:text-xl"},{default:H(()=>[be(h(P),1)]),_:2},1032,["value","onClick"]))),256))]),_:1})]),_:1},8,["value"])])])]),L(i(ge),{visible:y.value,"onUpdate:visible":A[4]||(A[4]=P=>y.value=P),header:"ç»“è´¦",class:"flex flex-column",modal:!0,dismissableMask:!0,onHide:Q},{default:H(()=>[a("div",null,[A[6]||(A[6]=a("label",null,"NIF:",-1)),L(i(Vt),{modelValue:m.value,"onUpdate:modelValue":A[1]||(A[1]=P=>m.value=P),inputId:"withoutgrouping",useGrouping:!1,fluid:"",class:"w-full m-1"},null,8,["modelValue"])]),a("div",qn,[a("label",null,h(z.$t("common.note"))+":",1),L(i(ft),{type:"text",modelValue:q.value,"onUpdate:modelValue":A[2]||(A[2]=P=>q.value=P),class:"w-full m-1"},null,8,["modelValue"])]),a("div",zn,[L(i(J),{label:i(n)("common.send"),onClick:A[3]||(A[3]=P=>U())},null,8,["label"])])]),_:1},8,["visible"]),L(i(ge),{visible:g.value,"onUpdate:visible":A[5]||(A[5]=P=>g.value=P),modal:"",dismissableMask:"",class:"h-full",style:{width:"90vw",maxWidth:"40rem",minWidth:"20rem"},draggable:!1},{header:H(()=>[a("div",On,[L(i(vt),{icon:"pi pi-question",shape:"circle"}),a("span",En,h(i(n)("takeawayHelper.dialogTitle")),1)])]),default:H(()=>[a("div",Mn,[a("span",Rn,h(i(n)("takeawayHelper.introduction")),1),a("span",jn,h(i(n)("takeawayHelper.note_t"))+" "+h(i(n)("takeawayHelper.note_1")),1),a("div",Vn,[L(i(Ze),{class:"w-full max-w-xl mx-auto"},{default:H(()=>[L(i(Qe),{value:"0"},{default:H(()=>[L(i(Je),{class:"text-sm"},{default:H(()=>[be(h(i(n)("takeawayHelper.question_1")),1)]),_:1}),L(i(Ge),{class:"p-1"},{default:H(()=>[a("div",Fn,[a("span",null,h(i(n)("takeawayHelper.q_1_request_1")),1),a("span",null,h(i(n)("takeawayHelper.q_1_request_2")),1),a("span",null,h(i(n)("takeawayHelper.q_1_request_3")),1),a("span",null,h(i(n)("takeawayHelper.q_1_request_4")),1),a("span",null,h(i(n)("takeawayHelper.q_1_request_5")),1)])]),_:1})]),_:1})]),_:1})])])]),_:1},8,["visible"])],64))}},Kn={__name:"SwipeHint",props:{size:{type:String,default:"8rem"},duration:{type:Number,default:6e3},position:{type:String,default:"bottom"}},setup(e){const t=e,n=R(!0);Pe(()=>{t.duration>0&&setTimeout(()=>{n.value=!1},t.duration);const v=()=>{n.value=!1,window.removeEventListener("touchstart",v)};window.addEventListener("touchstart",v)});const g=ve(()=>{let v={left:"50%",transform:"translateX(-50%)",zIndex:99999,opacity:.5,pointerEvents:"none",textAlign:"center",position:"fixed"};return t.position==="top"?v.top="15%":t.position==="center"?(v.top="50%",v.transform="translate(-50%, -50%)"):v.bottom="15%",v});return(v,f)=>n.value?(r(),b("div",{key:0,class:"swipe-hint",style:qe(g.value)},[a("div",{class:"hand",style:qe({width:e.size,height:e.size,backgroundImages:"url(/images/hand_finger.png)"})},null,4)],4)):E("",!0)}},Un=De(Kn,[["__scopeId","data-v-30a48de8"]]),Wn={class:"w-full h-full flex flex-column p-1"},Qn={class:"swiper-container-wrapper"},Jn={class:"fixed bottom-0 left-0 w-full h-3rem bg-primary-reverse p-3 z-[9999]"},Gn={class:"h-full flex align-items-center justify-content-between w-full"},Zn={class:"m-2"},Xn={class:"m-2"},Yn={class:"m-2"},eo={style:{"max-height":"60vh","overflow-y":"auto","padding-bottom":"60px"}},to={class:"flex flex-column border-bottom-1"},ao={key:0,class:"flex justify-content-between"},so={class:"flex flex-column"},no={class:"font-bold"},oo={class:"text-right"},io={key:1,class:"flex justify-content-between"},lo={class:"flex flex-column"},ro={class:"font-bold"},uo={class:"text-right"},co={key:0},fo={key:1,class:"flex flex-column"},po={class:"flex flex-column"},vo={class:"font-bold"},ho={class:"text-right"},mo={class:"total-footer bg-primary-reverse"},rt=5,Be="order_time_key",bo={__name:"HomePage",setup(e){const t=ut(),n=qt(),{t:g}=pe(),{locale:v}=pe(),f=R(0),c=R(!1),V=R([""]),l=R(0),k=re.cartItemCount,N=R(!1),y=R([]),m=R(0),q=R({}),W=R(!1),U=ee.dishDatas,Q=R(B.getOrderMenuTab()),O=R(null),z=R(null),A=R([]),P=R([]),M=R([]),d=R(!1);let s=null;const p=o=>{l.value=o.activeIndex,Me()},x=o=>{s=o};Le(l,o=>{s&&s.activeIndex!==o&&s.slideTo(o);let u=B.getOrderMenuTab()[o];B.customDishAPI.customDishes.value.map(D=>D.name).includes(u)?(W.value=!0,q.value=B.customDishAPI.customDishes.value.find(D=>D.name==u)):W.value=!1});const w=(o,u,T,D)=>{B.rateDish(o,u,T),D&&le.show_success(g("notification.rating_submitted"))},C=(o,u,T)=>{if(q.value.name=="XIAOXIONGÂ® RAMEN"&&o.id===1){const D=o.dishes[u];let K;D.dishid==47?T?K=_(3,!0,1):K=_(3,!1,1):K=_(3,!0,1),K!==void 0&&F(K)}if(q.value.name=="Menu AlmoÃ§o"&&o.id===3){const D=o.dishes[u];let K;[1427,41].includes(D.dishid)?T?K=_(4,!0,0):K=_(4,!1,0):K=_(4,!0,0),K!==void 0&&F(K)}};function _(o,u,T){if(q.value={...q.value,types:q.value.types.map(D=>D.id===o?{...D,enable:u,minQuantity:u?T:0}:D)},u===!1)return o}function F(o){!q.value||!Array.isArray(q.value.types)||(q.value={...q.value,types:q.value.types.map(u=>u.id===o?{...u,dishes:u.dishes.map(T=>({...T,selected:!1}))}:u)})}function S(o){let u=B.getOrderMenuTab()[o];if(B.customDishAPI.customDishes.value.map(ae=>ae.name).includes(u)?(W.value=!0,q.value=B.customDishAPI.customDishes.value.find(ae=>ae.name==u)):W.value=!1,B.getMenu().length==0){console.log("exit");return}let K=U.value[o].mainDishes;ee.showDishList(K)}const $=()=>{B.refreshTableFromServer(),B.getTableTotalAmount(m),N.value=!0},I=o=>{let u=o.id;o.org_id&&(u=o.org_id);for(let T=0;T<U.value.length;T++)if(U.value[T].id==u)for(const D in o){let K=D;D.startsWith("note")&&(K=K.replace("note","description")),U.value[T][K]=o[D]}};function te(){return new Promise(o=>{let u=()=>{const T=B.formatedMenu.value;T.length>0?o(T):setTimeout(u,200)};u()})}function j(){return new Promise(o=>{let u=()=>{const T=B.getOrderMenuTab();T.length>0?o(T):setTimeout(u,200)};u()})}const Y=ve(()=>o=>{const u=B.dictinaryAPI.dictinary.value[o];return u?u[`text_${v.value.toLowerCase()}`]:o});Le([()=>B.formatedMenu.value,()=>v.value],([o,u])=>{if(!o||o.length===0){M.value=[];return}const T={};B.orderMenuTab.value;const D=o.map(me=>({...me,mainDishes:me.dishes.map(oe=>{const ie=oe.dish;if(T[ie.id])return T[ie.id];const _e={...ie,defaultName:ie.name,defaultSubname:ie.subname,name:se(ie,"name",u),note:se(ie,"note",u),subname:se(ie,"subname",u),quantity:0},Ve=oe.subItems.map(et=>{const Se=et;return{...et,defaultName:ie.name,defaultSubname:Se.subname,name:se(Se,"name",u),note:se(Se,"note",u),subname:se(Se,"subname",u),quantity:0}}),Fe={...oe,dish:_e,subItems:Ve};return T[Fe.id]=Fe,Fe})}));U.value.length;const K=ee.getAllIncrementedDish();ee.getIdsAndQuantity(K);const ae=re.cartDishs.value;Ue.compressToEncodedURIComponent(JSON.stringify(ae)),M.value=D,U.value=M.value,V.value=B.orderMenuTab.value,(K.length>0||ae.length>0)&&(ee.cleanDishDataQty(),ee.updateDishDataQty(K)),B.filterMenuTabs(d.value),console.log("languagedMenu updated via watch:",M.value),at(()=>{f.value++,s&&typeof s.update=="function"&&(s.update(),s.slideTo(l.value))})},{immediate:!0,deep:!0}),Le(()=>B.orderMenuTab.value,o=>{Q.value=o.map(u=>{const T=B.dictinaryAPI.dictinary.value[u];return T?T[`text_${v.value.toLowerCase()}`]:u}),y.value=fe(o),l.value=0}),Pe(()=>{const o=B.orderMenuTab.value;Q.value=o.map(u=>{const T=B.dictinaryAPI.dictinary.value[u];return T?T[`text_${v.value.toLowerCase()}`]:u}),y.value=fe(o),l.value=0});function se(o,u,T){return o?T==="en"?o[`${u}_en`]||o[u]:T==="zh"&&o[`${u}_cn`]||o[u]:""}async function de(){await te();const o=await j();B.onMenuItemChanged=I,$t(),y.value=fe(o)}function fe(o){const u=[];for(let T=0;T<o.length;T++){const D=T;u.push({label:Y.value(o[T]),command:()=>{Xe(D),Me()}})}return u}const Me=()=>{at(()=>{const o=document.querySelector(".p-tablist-viewport"),u=document.querySelector(".p-tab.p-tab-active");if(o&&u){const T=u.offsetLeft-o.offsetWidth/2+u.offsetWidth/2;o.scrollTo({left:T,behavior:"smooth"})}window.scrollTo({top:0,behavior:"smooth"})})},Xe=o=>{S(o),l.value=o,Me()},yt=()=>{var o=ee.getAllIncrementedDish();z.value.showDishList(o)};function Re(){return B.getTable()}B.params.port,O.value=B.table.value.order;function _t(o){var u=g("notification.too_fast",{remainTime:o});le.show_warn(u)}const wt=(o,u)=>{const T=[];for(let oe=0;oe<re.cartDishs.value.length;oe++){var D=re.cartDishs.value[oe];const ie=B.formateCustomDishNotes(D),_e=D.dis_count?D.dis_price:D.price;T.push({dishid:D.dishid,name:D.name,quantity:D.count,notes:ie,limit:D.limit,price:_e,dishNote:D.dishNote,category:D.category})}const K=ee.getAllIncrementedDish();for(let oe=0;oe<K.length;oe++){var D=K[oe];if(D.quantity>0){const _e=D.dis_count?D.dis_price:D.price,Ve=B.getDishNameDefaultName(D);T.push({dishid:D.id,name:Ve,quantity:D.quantity,limit:D.limit,price:_e,dishNote:D.dishNote})}}if(T.length===0)return le.show_warn(g("notification.select_at_least_one")),!1;console.log("cart item:",T);const ae=JSON.parse(ce.getCookie(Be)||"{}"),me=Date.now();if(!ae.startTime||me-ae.startTime>rt*1e3)ae.startTime=me,ae.uniCode||(ae.uniCode=Date.now().toString(36)+Math.random().toString(36).substring(2,5));else{const oe=rt-parseInt((me-ae.startTime)/1e3);_t(oe);return}return ce.setCookie(Be,JSON.stringify(ae)),c.value=!0,B.submit_order({uniCode:ae.uniCode,name:o.name,note:o.note,table:Re(),items:T},oe=>{const ie=JSON.parse(ce.getCookie(Be)||"{}");ie.uniCode=void 0,ce.setCookie(Be,JSON.stringify(ie)),u(oe)}),!0};function kt(){const o=ce.getCookie("language");o&&(v.value=o)}function Ye(){for(let o=0;o<U.value.length;o++){const u=U.value[o];u.quantity=0}c.value=!1,re.cleanAll()}Pe(async()=>{kt(),await de(),S(l.value),B.clear_order_data=()=>{Ye()},B.setOnOrderConfirmed(o=>{Ye();const u=o;le.show_success(g("notification.order_submitted",{id:u}))}),B.setOnShowError(o=>{c.value=!1,le.show_error(o)})});function xt(){ce.deleteCookie("login_time");const o=n.query.table;o?t.push({path:"/",query:{table:o}}):t.push({path:"/takeReserve"})}function Ce(o,u=!0){const T=u?re.cartDishs.value:ee.getIdsAndQuantity(ee.getAllIncrementedDish()),D=Ue.compressToEncodedURIComponent(JSON.stringify(T));ce.setCookie(o,D)}function je(){B.isTakeaway()?(Ce("take_cartDish_normal",!1),Ce("take_cartDish_custom",!0)):(Ce("cartDish_normal",!1),Ce("cartDish_custom",!0))}function Ie(o,u=!0){const T=ce.getCookie(o);if(!T)return;const D=JSON.parse(Ue.decompressFromEncodedURIComponent(T));if(D&&D!=="undefined")try{u?re.cartDishs.value=D:ee.updateDishDataQty(D)}catch(K){console.error("è§£æžèœå¤±è´¥:",K)}}function $t(){B.isTakeaway()?(Ie("take_cartDish_normal",!1),Ie("take_cartDish_custom")):(Ie("cartDish_normal",!1),Ie("cartDish_custom"))}return Pt(()=>{je()}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&je()}),window.addEventListener("beforeunload",o=>{je(),B.cleanup()}),(o,u)=>(r(),b(G,null,[a("div",Wn,[(r(),X(Hn,{key:f.value,types:Q.value,typeIndex:l.value,tabItems:y.value,tableId:Re(),onClickType:Xe,onSwitchToWelcome:xt},null,8,["types","typeIndex","tabItems","tableId"])),u[4]||(u[4]=a("div",{class:"pb-8"},null,-1)),u[5]||(u[5]=a("div",{class:"pb-4 sm:pb-5 md:pb-5 lg:pb-5"},null,-1)),L(Un,{duration:3e3,position:"center",size:"3rem"}),a("div",Qn,[(r(),X(i(Et),{key:`swiper-${Q.value.length}-${f.value}`,"space-between":20,"centered-slides":"","grab-cursor":!0,class:"w-full",autoHeight:!0,onSlideChange:p,onSwiper:x,"initial-slide":l.value},{default:H(()=>[(r(!0),b(G,null,ne(Q.value,(T,D)=>(r(),X(i(Mt),{key:D},{default:H(()=>[Math.abs(l.value-D)<=1&&(!W.value||l.value!==D)?(r(),X(Za,{key:0,rateDish:w,likedItemsRef:A.value,dislikedItemsRef:P.value,tabIndex:D,onlyVeg:d.value},null,8,["likedItemsRef","dislikedItemsRef","tabIndex","onlyVeg"])):Math.abs(l.value-D)<=1&&W.value&&l.value===D?(r(),X(on,{key:1,currentCustomDish:q.value,onTypeClick:C,tabindex:D},null,8,["currentCustomDish","tabindex"])):E("",!0)]),_:2},1024))),128))]),_:1},8,["initial-slide"]))]),u[6]||(u[6]=a("div",{style:{height:"60px"}},null,-1)),a("div",Jn,[a("div",Gn,[a("div",Zn,[i(B).isTakeaway()?E("",!0):(r(),X(i(J),{key:0,label:o.$t("common.orders"),icon:"pi pi-list",class:"p-button-secondary",onClick:$},null,8,["label"]))]),a("div",Xn,[L(i(zt),{class:"text-sm",modelValue:d.value,"onUpdate:modelValue":u[0]||(u[0]=T=>d.value=T),onLabel:i(g)("common.showAll"),offLabel:i(g)("common.showOnlyVegetables"),onClick:u[1]||(u[1]=T=>i(B).filterMenuTabs(d.value))},null,8,["modelValue","onLabel","offLabel"])]),a("div",Yn,[L(i(ht),{value:i(k),severity:"danger",onClick:yt},{default:H(()=>u[3]||(u[3]=[a("i",{class:"pi pi-shopping-cart",style:{"font-size":"2rem"}},null,-1)])),_:1,__:[3]},8,["value"])])])])]),L(Cs,{ref_key:"cartRef",ref:z,checkout:wt,isTakeaway:!Re()},null,8,["isTakeaway"]),L(i(ge),{visible:N.value,"onUpdate:visible":u[2]||(u[2]=T=>N.value=T),header:o.$t("common.completedOrders"),modal:"",style:{width:"80vw","max-width":"700px"}},{default:H(()=>{var T,D;return[a("div",eo,[a("div",to,[(T=m.value.adultPrice)!=null&&T.quantity&&m.value.adultPrice.quantity!=0?(r(),b("div",ao,[a("div",so,[a("span",no,h(o.$t("common.adult")),1),a("small",null,h(o.$t("common.quantity"))+": "+h(m.value.adultPrice.quantity),1)]),a("div",oo,[a("span",null,"â‚¬"+h((Number(m.value.adultPrice.price)*m.value.adultPrice.quantity).toFixed(2)),1)])])):E("",!0),(D=m.value.childrenPrice)!=null&&D.quantity&&m.value.childrenPrice.quantity!=0?(r(),b("div",io,[a("div",lo,[a("span",ro,h(o.$t("common.children")),1),a("small",null,h(o.$t("common.quantity"))+": "+h(m.value.childrenPrice.quantity),1)]),a("div",uo,[a("span",null,"â‚¬"+h((Number(m.value.childrenPrice.price)*m.value.childrenPrice.quantity).toFixed(2)),1)])])):E("",!0)]),i(B).table.value.order.length===0?(r(),b("div",co,h(o.$t("common.noOrders")),1)):(r(),b("div",fo,[(r(!0),b(G,null,ne(i(B).table.value.order,(K,ae)=>(r(),b("div",{key:ae,class:"flex justify-content-between border-bottom-1 pb-2"},[a("div",po,[a("span",vo,h(i(B).getDishName(K)),1),a("small",null,h(o.$t("common.quantity"))+": "+h(K.quantity),1)]),a("div",ho,[a("span",null,"â‚¬"+h((K.price*K.quantity).toFixed(2)),1)])]))),128))]))]),a("div",mo,h(o.$t("common.total"))+": â‚¬"+h(m.value.total),1)]}),_:1},8,["visible","header"])],64))}},Ao=De(bo,[["__scopeId","data-v-d6599c91"]]);export{Ao as default};
