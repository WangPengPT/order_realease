import{r as u,y as c}from"./vue-BhQbBSxl.js";import{g as f,j as h}from"./vendor-DYQJwaLu.js";const i=u([]),a=u([]),l=n=>{i.value.length=0;for(let t=0;t<n.length;t++)i.value.push(n[t])};function m(){const n=[];for(const t of a.value)if(t.name!="Descontos")for(const s of t.mainDishes){s.dish.quantity>0&&n.push(s.dish);for(const e of s.subItems)e.quantity>0&&(e.name=s.dish.name,e.image=s.dish.image,n.push(e))}return n}function d(n){const t=[];for(const s of n)t.push({id:s.id,quantity:s.quantity});return t}function g(n){if(Array.isArray(n))for(const t of n)for(const s of a.value)for(const e of s.mainDishes){e.dish.id===t.id&&e.subItems.length===0&&(e.dish.quantity=t.quantity);for(const r of e.subItems)r.id===t.id&&(r.quantity=t.quantity)}}function y(){for(const n of a.value)for(const t of n.mainDishes){t.dish.quantity=0;for(const s of t.subItems)s.quantity=0}}const D={dishDatas:a,dishes:i,showDishList:l,getAllIncrementedDish:m,updateDishDataQty:g,cleanDishDataQty:y,getIdsAndQuantity:d},o=u([]),p=c(()=>{const n=o.value.length,t=D.dishDatas.value.flatMap(s=>s.name=="Descontos"?[]:s.mainDishes).flatMap(s=>[s.dish,...s.subItems.map(e=>({...e,parentName:s.dish.name,parentImage:s.dish.image}))]).filter(s=>s.quantity>0).reduce((s,e)=>s+e.quantity,0);return n+t});function q(n){n.id=I(),o.value.push(n)}function v(n){for(let t=0;t<o.value.length;t++)if(o.value[t].id==n.id){o.value.splice(t,1);break}}function I(){const n=Date.now().toString(36),t=Math.random().toString(36).substring(2,5);return`${n}-${t}`}function b(){o.value=[]}const L={addItem:q,removeItem:v,cartDishs:o,cartItemCount:p,cleanAll:b};var A=h();const M=f(A);export{D,L as c,M as l};
