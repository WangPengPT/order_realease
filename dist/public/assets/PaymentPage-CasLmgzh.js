import{Q as De,b as y,e as je,f as p,h as e,v as n,a as _,M as t,U as Se,B as W,t as i,s as r,F as X,y as de,p as Ue,I as ze,o as v}from"./vue-BLaX11bV.js";import{A as Ne,b as g,m as c,B as N,D as re,i as ue,E as Ae,e as Ce,F as $e,G as ce,j as x,H as pe,n as ve}from"./primevue-DRc8vkgT.js";import{c as me,D as fe,l as ye}from"./localforage-Cr7WH93t.js";import{c as V,m as O}from"./index-BhJZ0ssr.js";import{_ as Le}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-DYQJwaLu.js";const Fe={class:"w-full h-full flex justify-content-center overflow-auto bg-gray-100"},Ie={class:"bg-white m-2 border-round-2xl hidden md:block lg:block",style:{"min-width":"775px","max-width":"1200px",width:"70%"}},Be={class:"flex flex-row"},Oe={class:"flex flex-column gap-2 m-2 pl-4 pr-4",style:{width:"65%"}},Me={class:"w-full"},Ee={key:0,class:"border-round-xl shadow-5 p-2"},qe={class:"flex flex-wrap gap-1 align-items-center pb-1"},We={class:"flex align-items-center justify-content-center p-2 bg-gray-200 border-round-2xl"},Re={class:"font-bold"},He={class:"flex flex-row gap-1 align-items-center"},Ge={key:0},Ke={key:1},Ye={class:"border-round-xl shadow-5 p-2"},Ze={class:"flex flex-wrap gap-1 align-items-center pb-1"},Qe={class:"font-bold"},Je={class:"flex flex-column gap-1 align-items-center"},Xe={class:"col-12"},el={class:"",for:"on_label"},ll={class:"col-12"},tl={class:"",for:"on_label"},al={key:1,class:"border-round-xl shadow-5 p-2"},sl={class:"flex flex-wrap gap-1 align-items-center pb-1"},ol={class:"font-bold"},il={class:"col-12"},nl={class:"",for:"on_label"},dl={class:"col-12"},rl={class:"",for:"on_label"},ul={class:"flex flex-row justify-content-center"},cl={class:"col-6"},pl={class:"",for:"on_label"},vl={class:"col-6"},ml={class:"",for:"on_label"},fl={class:"border-round-xl shadow-5 p-2"},yl={class:"flex flex-wrap gap-1 align-items-center pb-1"},_l={class:"font-bold"},bl={class:"flex flex-row justify-content-center"},xl={class:"col-6"},gl={class:"",for:"on_label"},hl={class:"col-6"},wl={class:"",for:"on_label"},kl={class:"flex flex-row justify-content-center"},Pl={class:"col-12"},Vl={class:"",for:"on_label"},Tl={class:"flex flex-row justify-content-center align-items-center"},Dl={class:"col-4"},jl={class:"flex justify-content-center"},Sl={class:""},Ul={class:"flex items-center"},zl={class:""},Nl={class:"col-8"},Al={class:"",for:"on_label"},Cl={class:"border-round-xl shadow-5 p-2"},$l={class:"flex flex-wrap gap-1 align-items-center pb-1"},Ll={class:"font-bold"},Fl={class:"flex flex-row justify-content-center"},Il={class:"col-12"},Bl={class:"",for:"on_label"},Ol={class:"border-round-xl shadow-5 p-2"},Ml={class:"flex flex-wrap gap-1 align-items-center pb-1"},El={class:"font-bold"},ql={class:"flex flex-row justify-content-center"},Wl={class:"col-12"},Rl={class:"",for:"on_label"},Hl={class:"border-round-xl shadow-5 p-2"},Gl={class:"flex flex-wrap gap-1 align-items-center pb-1"},Kl={class:"font-bold"},Yl={class:"flex flex-column justify-content-center align-items-center border-1 border-round border-gray-500 p-2 bg-gray-100 gap-2 m-2"},Zl={class:"flex flex-column"},Ql={key:0,class:"text-gray-400"},Jl={class:"flex flex-row gap-2 w-full"},Xl={class:"text-xs"},et={class:"bg-gray-50 border-round-right-2xl",style:{width:"35%"}},lt={class:"p-2 pt-3"},tt={class:"font-bold text-xl"},at={class:"overflow-auto flex flex-column gap-2",style:{"max-height":"600px"}},st={class:"flex flex-row justify-content-between align-items-center"},ot={class:"flex flex-row gap-1"},it=["src","alt"],nt={class:"flex flex-column"},dt={class:"font-bold",style:{"font-size":"14px"}},rt={style:{"font-size":"14px"}},ut={class:"p-2 bg-white border-round ml-2 mr-2 flex flex-column"},ct={key:0,class:"flex justify-content-between align-items-center"},pt={class:"text-sm text-gray-400"},vt={class:"text-sm text-gray-400"},mt={key:1,class:"flex justify-content-between align-items-center"},ft={class:"text-xs text-gray-400"},yt={class:"text-xs text-gray-400"},_t={class:"flex justify-content-between align-items-center"},bt={class:"font-bold text-gray-500"},xt={class:"font-bold text-gray-500"},gt={key:2,class:"flex justify-content-between align-items-center"},ht={class:"font-bold text-gray-500"},wt={class:"font-bold text-gray-500"},kt={class:"p-2 ml-2 mr-2 flex flex-row justify-content-between"},Pt={class:"font-bold text-lg"},Vt={class:"font-bold text-lg"},Tt={class:"flex flex-row justify-content-center"},Dt={class:"block md:hidden lg:hidden bg-white border-round-xl m-1"},jt={class:"flex flex-column w-full h-full p-2 pl-3 pr-3 shadow-none gap-2",style:{"max-width":"700px"}},St={class:"w-full"},Ut={class:"bg-white border-round-xl shadow-5"},zt={class:"flex flex-wrap gap-1 align-items-center"},Nt={class:"font-bold"},At={class:"flex gap-1"};const Ct={class:"font-bold"},$t={class:"max-h-15rem w-full mt-1 overflow-auto"},Lt={class:"flex flex-row justify-content-between align-items-center"},Ft={class:"flex flex-row gap-1 pl-2"},It=["src","alt"],Bt={class:"flex flex-column"},Ot={class:"font-bold",style:{"font-size":"14px"}},Mt={style:{"font-size":"14px"}},Et={key:0,class:"border-round-xl shadow-5 p-2"},qt={class:"flex flex-wrap gap-1 align-items-center pb-1"},Wt={class:"flex align-items-center justify-content-center p-2 bg-gray-200 border-round-2xl"},Rt={class:"font-bold"},Ht={class:"flex flex-row gap-1 align-items-center"},Gt={class:"pt-1"},Kt={key:0},Yt={key:1},Zt={class:"border-round-xl shadow-5 p-2"},Qt={class:"flex flex-wrap gap-1 align-items-center pb-1"},Jt={class:"font-bold"},Xt={class:"flex flex-row justify-content-center"},ea={class:"col-12"},la={class:"text-sm",for:"on_label"},ta={class:"flex flex-row justify-content-center"},aa={class:"col-12"},sa={class:"text-sm",for:"on_label"},oa={key:1,class:"border-round-xl shadow-5 p-2"},ia={class:"flex flex-wrap gap-1 align-items-center pb-1"},na={class:"font-bold"},da={class:"col-12"},ra={class:"",for:"on_label"},ua={class:"col-12"},ca={class:"",for:"on_label"},pa={class:"flex flex-row justify-content-center"},va={class:"col-6"},ma={class:"",for:"on_label"},fa={class:"col-6"},ya={class:"",for:"on_label"},_a={class:"border-round-xl shadow-5 p-2"},ba={class:"flex flex-wrap gap-1 align-items-center pb-1"},xa={class:"font-bold"},ga={class:"flex flex-row justify-content-center"},ha={class:"col-6"},wa={class:"text-sm",for:"on_label"},ka={class:"col-6"},Pa={class:"text-sm",for:"on_label"},Va={class:"flex flex-row justify-content-center"},Ta={class:"col-12"},Da={class:"text-sm",for:"on_label"},ja={class:"flex flex-row justify-content-center align-items-center"},Sa={class:"col-3"},Ua={class:"flex justify-content-center"},za={class:"flex items-center"},Na={class:"col-9"},Aa={for:"on_label"},Ca={class:"border-round-xl shadow-5 p-2"},$a={class:"flex flex-wrap gap-1 align-items-center pb-1"},La={class:"font-bold"},Fa={class:"flex flex-row justify-content-center"},Ia={class:"col-12"},Ba={for:"on_label"},Oa={class:"border-round-xl shadow-5 p-2"},Ma={class:"flex flex-wrap gap-1 align-items-center pb-1"},Ea={class:"font-bold"},qa={class:"flex flex-row justify-content-center"},Wa={class:"col-12"},Ra={for:"on_label"},Ha={class:"border-round-xl shadow-5 p-2"},Ga={class:"flex flex-wrap gap-1 align-items-center pb-1"},Ka={class:"font-bold"},Ya={class:"flex flex-column justify-content-center align-items-center border-1 border-round border-gray-500 p-2 bg-gray-100 gap-2 m-2"},Za={class:"flex flex-column"},Qa={key:0,class:"text-gray-400"},Ja={class:"flex flex-row gap-2 w-full"},Xa={class:"text-sm"},es={class:"ml-2 flex flex-column"},ls={class:"text-sm"},ts={class:"flex flex-column justify-content-center mt-2"},as={class:"text-sm"},ss={key:0,class:"bg-gray-200 pt-2"},os={class:"p-2 bg-white border-round ml-2 mr-2 flex flex-column"},is={key:0,class:"flex justify-content-between align-items-center"},ns={class:"text-sm text-gray-400"},ds={class:"text-sm text-gray-400"},rs={key:1,class:"flex justify-content-between align-items-center"},us={class:"text-xs text-gray-400"},cs={class:"text-xs text-gray-400"},ps={class:"flex justify-content-between align-items-center"},vs={class:"font-bold text-gray-500"},ms={class:"font-bold text-gray-500"},fs={key:2,class:"flex justify-content-between align-items-center"},ys={class:"font-bold text-gray-500"},_s={class:"font-bold text-gray-500"},bs={class:"p-2 ml-2 mr-2 flex flex-row justify-content-between"},xs={class:"font-bold text-lg"},gs={class:"font-bold text-lg"},hs={class:"flex flex-column justify-content-center align-items-center"},ws={class:"font-bold text-2xl"},ks={class:"flex justify-content-end mt-3"},Ps={__name:"PaymentPage",setup(Vs){const _e=Ne(),R=Se(),{t:o}=De(),M=new Date,H=y(),G=M.getHours()*60+M.getMinutes(),K=y(new Date),E=y(new Date);K.value.setDate(M.getDate()),E.value.setDate(E.value.getDate()+7);const A=y({visible:!1,icon:"pi pi-angle-down"}),q=y(!1),C=y(!0);function be(){C.value=!C.value}const S=y(),T=y(0),w=y({id:void 0,defaultName:"Tip(小费)",quantity:1,price:0,properties:[]}),ee=y([5,10,15,0]),$=d=>(d/100*Number(h())).toFixed(2);function L(d,l=!1){d?w.value.price=d:w.value.price=0,l&&(T.value=0),ae()}const F=y(351),le=y([{value:351,label:"portugal",code:"PT"},{value:84,label:"china",code:"CN"},{value:34,label:"spain",code:"ES"},{value:55,label:"brazil",code:"BR"},{value:244,label:"angola",code:"AO"},{value:33,label:"france",code:"FR"},{value:49,label:"germany",code:"DE"},{value:44,label:"UK",code:"GB"},{value:39,label:"italy",code:"IT"},{value:41,label:"swiss",code:"CH"}]),te=y([{optionLabel:o("paymentPage.paymentOptions.payInRestaurant"),value:"Pagar no restaurante",deliveryType:"pickUpInShop"},{optionLabel:o("paymentPage.paymentOptions.MBWay"),value:"MB WAY",deliveryType:"pickUpInShop"},{optionLabel:o("paymentPage.paymentOptions.payWithMoney"),value:"Pay With Money",deliveryType:"delivery2home"},{optionLabel:o("paymentPage.paymentOptions.payWithCard"),value:"Pay With Card",deliveryType:"delivery2home"},{optionLabel:o("paymentPage.paymentOptions.MBWay"),value:"MB WAY",deliveryType:"delivery2home"}]),b=y({first:void 0,last:void 0}),xe=["pay_type","pickupDate","pickupTime","customer"],ge=["address1","city","postalCode"],s=y({deliveryType:"pickUpInShop",created_at:void 0,customer:{name:void 0,phone:void 0,email:void 0},deliveryAddress:{address1:void 0,address2:void 0,city:void 0,postalCode:void 0},total_price:0,note:null,pay_state:"pending",pay_type:void 0,pickupDate:void 0,pickupTime:void 0,line_items:[],payment_gateway_names:void 0}),U=y([]);let Y=[];je(()=>{he()});async function he(){const d=me.cartDishs.value,l=fe.getAllIncrementedDish();U.value=[...d,...l],ae(),Y=await V.fetchUserFavoritesDiscount()}function h(){let d=0;return U.value.forEach(l=>{let a=l.discount?l.dis_price:l.price?l.price:0;for(let u=0;u<Y.length;u++){const m=Y[u];if(m.isActive(s.value.pickupDate)&&l.activitys&&l.activitys.includes(m.key)){let f=(l.price?l.price:0)*(100-m.discount);f=Math.round(f)/100,f<a&&(a=f)}}d+=a*(l.quantity?l.quantity:1)}),d}function P(){let d=0;return U.value.forEach(l=>{let a=l.discount?l.dis_price:l.price?l.price:0;d+=a*(l.quantity?l.quantity:1)}),d}const I=y(0),we=y(0);function ae(){I.value=h()+Number(w.value.price),we.value=P()+Number(w.value.price)}function ke(){A.value={visible:!A.value.visible,icon:A.value.visible?"pi pi-angle-down":"pi pi-angle-up"}}function se(d){s.value.deliveryType=d,s.value.pickupTime=void 0,s.value.pay_type=void 0,Z()}const B=y([]);function Z(){L($(T.value));const d=J(s.value.pickupDate);J(M).toString==d.toString?H.value=!0:H.value=!1;const a=s.value.deliveryType=="delivery2home"?V.getDeliveryBeginEndInterval(d.toString):V.getPickupBeginEndInterval(d.toString),u=s.value.deliveryType=="delivery2home"?V.getHomeDeliveryData("timeInterval"):V.getPickupDate("timeInterval");B.value=[];for(const j in a)m(a[j].begin,a[j].end,u);function m(j,z,D){let k=Number(j.hour*60)+Number(j.minute);const ne=Number(z.hour*60)+Number(z.minute);if(H.value){if(ne<G)return;k<G&&(k=((G/D|0)+2)*D)}for(B.value.push(f(s.value.deliveryType,k,D));k+D<=ne;)k+=D,B.value.push(f(s.value.deliveryType,k,D))}function f(j,z,D){const k={optionLabel:void 0};return j=="delivery2home"?k.optionLabel=Q(z).toSring+" - "+Q(z+D).toSring:k.optionLabel=Q(z).toSring,k}}function Q(d){const l=Math.floor(d/60).toString().padStart(2,"0"),a=(d%60).toString().padStart(2,"0");return{hour:l,minute:a,toSring:l+":"+a}}function J(d){const l=String(d.getDate()).padStart(2,"0"),a=String(d.getMonth()+1).padStart(2,"0"),u=d.getFullYear();return{year:u,month:a,day:l,toString:`${u}/${a}/${l}`}}function oe(){const d=new Date(Date.now());s.value.created_at=d.toUTCString(),s.value.restaurant=window.env.restaurant,b.value.first?s.value.customer.name=b.value.first+" "+b.value.last:s.value.customer.name=b.value.last,s.value.total_price=Number(I.value).toFixed(2),s.value.line_items.length=0,U.value.forEach(l=>{s.value.line_items.push(ie(l))}),w.value.price>0&&s.value.line_items.push(ie(w.value)),Te()&&_e.require({message:o("paymentPage.confirmPayment"),header:o("home.takeAway"),icon:"pi pi-send",rejectProps:{label:o("common.cancel"),severity:"primary",outlined:!0},acceptProps:{label:o("common.confirm"),severity:"primary"},accept:()=>{Ve()},reject:()=>{}})}function Pe(){const d=V.shopInfo.value.location;if(!d)return"";const l=d.street||"",a=[d.postcode,d.city].filter(m=>m).join(" "),u=d.country||"";return[l,a,u].filter(m=>m.trim()!=="").join(", ")}function Ve(){var l,a;s.value.customer.phone=F.value+"#"+s.value.customer.phone,s.value.pickupTime=(l=s.value.pickupTime)==null?void 0:l.optionLabel,s.value.pickupDate=J(s.value.pickupDate).toString,s.value.pay_type=(a=s.value.pay_type)==null?void 0:a.value,s.value.payment_gateway_names=[s.value.pay_type],s.value.pickupLocation=Pe(),V.sendDataToMgServer("takeaway",s.value,async(u,m)=>{u?(await d(),q.value=!0):O.show_error("Failed")});async function d(){fe.cleanDishDataQty(),me.cleanAll();const u="take_cartDish_normal",m="take_cartDish_custom";await ye.removeItem(u),await ye.removeItem(m)}}function ie(d){return{sku:d.id,name:d.defaultName+(d.defaultSubname?" "+d.defaultSubname:""),quantity:d.quantity,price:d.discount?d.dis_price:d.price?d.price:0,properties:d.properties?d.properties:[]}}function Te(){if(!d(s.value,xe)||!l(s.value.customer.email)||!a(s.value.customer.phone)||s.value.deliveryType=="delivery2home"&&!d(s.value.deliveryAddress,ge))return!1;return!0;function d(u,m){console.log("object",u),console.log("keyArray",m);for(const f of m){if(f=="pay_type"){if(!u[f])return O.show_error(o("paymentPage.error."+f)),!1;continue}if(typeof u[f]=="object"){if(!d(u[f],Object.keys(u[f])))return!1}else if(!u[f])return O.show_error(o("paymentPage.error."+f)),!1}return!0}function l(u){const f=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(u);return f||O.show_error(o("paymentPage.error.emailFormat")),f}function a(u){const m=Number(u)>999999;return m||O.show_error(o("paymentPage.error.phoneFormat")),m}}return(d,l)=>(v(),p(X,null,[e("div",Fe,[e("div",Ie,[e("div",Be,[e("div",Oe,[e("div",Me,[n(t(g),{class:"w-full border-none bg-gray-400 border-round-xl shadow-5",icon:"pi pi-arrow-left",label:t(o)("common.back"),onClick:l[0]||(l[0]=a=>t(R).push({path:"/table"}))},null,8,["label"])]),t(V).settings.value.homeDelivery?(v(),p("div",Ee,[e("div",qe,[e("div",We,[e("i",{class:W(s.value.deliveryType=="delivery2home"?"pi pi-truck":"pi pi-shop")},null,2)]),e("label",Re,i(t(o)("paymentPage.deliveryType.title")),1)]),e("div",He,[n(t(g),{class:"border-round-xl p-1 col-6",label:t(o)("paymentPage.deliveryType.inShop"),outlined:s.value.deliveryType=="delivery2home",onClick:l[1]||(l[1]=a=>se("pickUpInShop"))},null,8,["label","outlined"]),n(t(g),{class:"border-round-xl p-1 col-6",label:t(o)("paymentPage.deliveryType.toHome"),outlined:s.value.deliveryType=="pickUpInShop",onClick:l[2]||(l[2]=a=>se("delivery2home"))},null,8,["label","outlined"])]),e("div",null,[s.value.deliveryType=="pickUpInShop"?(v(),p("small",Ge,i(t(o)("paymentPage.pageNote.inShopNote")),1)):_("",!0),s.value.deliveryType=="delivery2home"?(v(),p("small",Ke,i(t(o)("paymentPage.pageNote.toHomeNote")),1)):_("",!0)])])):_("",!0),e("div",Ye,[e("div",Ze,[l[49]||(l[49]=e("div",{class:"flex align-items-center justify-content-center p-2 bg-gray-200 border-round-2xl"},[e("i",{class:"pi pi-calendar"})],-1)),e("label",Qe,i(s.value.deliveryType=="delivery2home"?t(o)("paymentPage.delivery.time"):t(o)("paymentPage.pickup.time")),1)]),e("div",Je,[e("div",Xe,[n(t(c),{variant:"on"},{default:r(()=>[n(t(ce),{modelValue:s.value.pickupDate,"onUpdate:modelValue":[l[3]||(l[3]=a=>s.value.pickupDate=a),l[4]||(l[4]=a=>Z(s.value.pickupDate))],invalid:!s.value.pickupDate,size:"small",minDate:K.value,maxDate:E.value,manualInput:!1,dateFormat:"yy/mm/dd",class:"w-full",fluid:""},null,8,["modelValue","invalid","minDate","maxDate"]),e("label",el,i(s.value.deliveryType=="delivery2home"?t(o)("paymentPage.delivery.data"):t(o)("paymentPage.pickup.data"))+"*",1)]),_:1})]),e("div",ll,[n(t(c),{variant:"on"},{default:r(()=>[n(t(N),{modelValue:s.value.pickupTime,"onUpdate:modelValue":l[5]||(l[5]=a=>s.value.pickupTime=a),invalid:!s.value.pickupTime,options:B.value,optionLabel:"optionLabel",class:"w-full flex align-items-center",size:"small"},null,8,["modelValue","invalid","options"]),e("label",tl,i(s.value.deliveryType=="delivery2home"?t(o)("paymentPage.delivery.time"):t(o)("paymentPage.pickup.time"))+"*",1)]),_:1})])])]),s.value.deliveryType=="delivery2home"?(v(),p("div",al,[e("div",sl,[l[50]||(l[50]=e("div",{class:"flex align-items-center justify-content-center p-2 bg-gray-200 border-round-2xl"},[e("i",{class:"pi pi-map-marker"})],-1)),e("label",ol,i(t(o)("paymentPage.delivery.address.title")),1)]),e("div",il,[n(t(c),{variant:"on"},{default:r(()=>[n(t(x),{type:"text",modelValue:s.value.deliveryAddress.address1,"onUpdate:modelValue":l[6]||(l[6]=a=>s.value.deliveryAddress.address1=a),size:"small",invalid:!s.value.deliveryAddress.address1,class:"w-full safari-input-fix",fluid:""},null,8,["modelValue","invalid"]),e("label",nl,i(t(o)("paymentPage.delivery.address.address1"))+"*",1)]),_:1})]),e("div",dl,[n(t(c),{variant:"on"},{default:r(()=>[n(t(x),{type:"text",modelValue:s.value.deliveryAddress.address2,"onUpdate:modelValue":l[7]||(l[7]=a=>s.value.deliveryAddress.address2=a),size:"small",class:"w-full safari-input-fix",fluid:""},null,8,["modelValue"]),e("label",rl,i(t(o)("paymentPage.delivery.address.address2")),1)]),_:1})]),e("div",ul,[e("div",cl,[n(t(c),{variant:"on"},{default:r(()=>[n(t(x),{type:"text",modelValue:s.value.deliveryAddress.city,"onUpdate:modelValue":l[8]||(l[8]=a=>s.value.deliveryAddress.city=a),size:"small",invalid:!s.value.deliveryAddress.city,class:"w-full safari-input-fix",fluid:""},null,8,["modelValue","invalid"]),e("label",pl,i(t(o)("paymentPage.delivery.address.city"))+"*",1)]),_:1})]),e("div",vl,[n(t(c),{variant:"on"},{default:r(()=>[n(t(pe),{id:"basic",modelValue:s.value.deliveryAddress.postalCode,"onUpdate:modelValue":l[9]||(l[9]=a=>s.value.deliveryAddress.postalCode=a),mask:"9999-999",size:"small",invalid:!s.value.deliveryAddress.postalCode,class:"w-full safari-input-fix",fluid:""},null,8,["modelValue","invalid"]),e("label",ml,i(t(o)("paymentPage.delivery.address.postalCode"))+"*",1)]),_:1})])])])):_("",!0),e("div",fl,[e("div",yl,[l[51]||(l[51]=e("div",{class:"flex align-items-center justify-content-center p-2 bg-gray-200 border-round-2xl"},[e("i",{class:"pi pi-user"})],-1)),e("label",_l,i(t(o)("paymentPage.contact")),1)]),e("div",bl,[e("div",xl,[n(t(c),{variant:"on"},{default:r(()=>[n(t(x),{type:"text",modelValue:b.value.first,"onUpdate:modelValue":l[10]||(l[10]=a=>b.value.first=a),class:"w-full safari-input-fix",size:"small",fluid:""},null,8,["modelValue"]),e("label",gl,i(t(o)("paymentPage.name.first")),1)]),_:1})]),e("div",hl,[n(t(c),{variant:"on"},{default:r(()=>[n(t(x),{type:"text",modelValue:b.value.last,"onUpdate:modelValue":l[11]||(l[11]=a=>b.value.last=a),invalid:!b.value.last,class:"w-full safari-input-fix",size:"small",fluid:""},null,8,["modelValue","invalid"]),e("label",wl,i(t(o)("paymentPage.name.last"))+"*",1)]),_:1})])]),e("div",kl,[e("div",Pl,[n(t(c),{variant:"on"},{default:r(()=>[n(t(x),{type:"text",modelValue:s.value.customer.email,"onUpdate:modelValue":l[12]||(l[12]=a=>s.value.customer.email=a),invalid:!s.value.customer.email,class:"w-full safari-input-fix",fluid:"",size:"small"},null,8,["modelValue","invalid"]),e("label",Vl,i(t(o)("paymentPage.email"))+"*",1)]),_:1})])]),e("div",Tl,[e("div",Dl,[n(t(N),{modelValue:F.value,"onUpdate:modelValue":l[13]||(l[13]=a=>F.value=a),options:le.value,optionLabel:"label",optionValue:"value",class:"w-full safari-input-fix",size:"small",filter:"",fluid:""},{value:r(a=>[e("div",jl,[e("label",Sl,"+"+i(a.value),1)])]),option:r(a=>[e("div",Ul,[e("label",zl,i("+"+a.option.value+"	"+t(o)("common.country."+a.option.label)),1)])]),_:1},8,["modelValue","options"])]),e("div",Nl,[n(t(c),{variant:"on"},{default:r(()=>[n(t(x),{type:"number",modelValue:s.value.customer.phone,"onUpdate:modelValue":l[14]||(l[14]=a=>s.value.customer.phone=a),invalid:!s.value.customer.phone,class:"w-full safari-input-fix",size:"small",fluid:""},null,8,["modelValue","invalid"]),e("label",Al,i(t(o)("paymentPage.phone"))+"*",1)]),_:1})])])]),e("div",Cl,[e("div",$l,[l[52]||(l[52]=e("div",{class:"flex align-items-center justify-content-center p-2 bg-gray-200 border-round-2xl"},[e("i",{class:"pi pi-credit-card"})],-1)),e("label",Ll,i(t(o)("paymentPage.payment")),1)]),e("div",Fl,[e("div",Il,[n(t(c),{variant:"on"},{default:r(()=>[n(t(N),{modelValue:s.value.pay_type,"onUpdate:modelValue":l[15]||(l[15]=a=>s.value.pay_type=a),invalid:!s.value.pay_type,size:"small",options:te.value.filter(a=>a.deliveryType==s.value.deliveryType),optionLabel:"optionLabel",class:"w-full",fluid:""},null,8,["modelValue","invalid","options"]),e("label",Bl,i(t(o)("paymentPage.selectPayment"))+"*",1)]),_:1})])])]),e("div",Ol,[e("div",Ml,[l[53]||(l[53]=e("div",{class:"flex align-items-center justify-content-center p-2 bg-gray-200 border-round-2xl"},[e("i",{class:"pi pi-file-edit"})],-1)),e("label",El,i(t(o)("common.observation")),1)]),e("div",ql,[e("div",Wl,[n(t(c),{variant:"on"},{default:r(()=>[n(t(ve),{id:"on_label",class:"w-full safari-input-fix",rows:"2",modelValue:s.value.note,"onUpdate:modelValue":l[16]||(l[16]=a=>s.value.note=a),size:"small",fluid:""},null,8,["modelValue"]),e("label",Rl,i(t(o)("common.observation")),1)]),_:1})])])]),e("div",Hl,[e("div",Gl,[l[54]||(l[54]=e("div",{class:"flex align-items-center justify-content-center p-2 bg-gray-200 border-round-2xl"},[e("i",{class:"pi pi-money-bill"})],-1)),e("label",Kl,i(t(o)("paymentPage.tip")),1)]),e("div",Yl,[n(t(re),{modelValue:T.value,"onUpdate:modelValue":[l[17]||(l[17]=a=>T.value=a),l[18]||(l[18]=a=>L($(T.value)))],options:ee.value,fluid:"",style:{"max-width":"100%"}},{option:r(a=>[e("div",Zl,[e("label",null,i(a.option?a.option+"%":"NONE"),1),a.option?(v(),p("label",Ql,i($(a.option))+"€",1)):_("",!0)])]),_:1},8,["modelValue","options"]),e("div",Jl,[n(t(ue),{modelValue:S.value,"onUpdate:modelValue":l[19]||(l[19]=a=>S.value=a),inputId:"stacked-buttons",mode:"currency",currency:"EUR",fluid:"",class:"safari-input-fix",size:"small",style:{width:"70%"}},null,8,["modelValue"]),n(t(g),{class:"text-xs",label:t(o)("paymentPage.addTip"),size:"small",onClick:l[20]||(l[20]=a=>L(S.value,!0)),style:{width:"30%"}},null,8,["label"])]),e("label",Xl,i(t(o)("paymentPage.tipThanksMSG")),1)])])]),n(t(Ae),{layout:"vertical",type:"solid",style:{margin:"0 !important"}}),e("div",et,[e("div",lt,[e("label",tt,i(t(o)("paymentPage.product")),1),e("div",at,[(v(!0),p(X,null,de(U.value,a=>(v(),p("div",st,[e("div",ot,[e("img",{src:a.image,alt:a.image,style:{height:"60px"}},null,8,it),e("div",nt,[e("label",dt,i(a.name),1),e("label",rt,i(a.discount?Number(a.dis_price):a.price?Number(a.price):0)+" x "+i(a.quality?a.quality:1),1)])])]))),256))])]),e("div",ut,[P()!=h()?(v(),p("div",ct,[e("label",pt,i(t(o)("paymentPage.subtotal")),1),e("label",vt,i(P().toFixed(2))+"€",1)])):_("",!0),P()!=h()?(v(),p("div",mt,[e("label",ft,i(t(o)("paymentPage.discount")),1),e("label",yt,"-"+i((Number(P())-Number(h())).toFixed(2))+"€",1)])):_("",!0),e("div",_t,[e("label",bt,i(t(o)("paymentPage.subtotal")),1),e("label",xt,i(h().toFixed(2))+"€",1)]),w.value.price!=0?(v(),p("div",gt,[e("label",ht,i(t(o)("paymentPage.tip")),1),e("label",wt,i(w.value.price)+"€",1)])):_("",!0)]),e("div",kt,[e("label",Pt,i(t(o)("paymentPage.total")),1),e("label",Vt,i(I.value.toFixed(2))+"€",1)]),e("div",Tt,[n(t(g),{type:"submit",class:"p-2",icon:"pi pi-dollar text-sm",onClick:l[21]||(l[21]=a=>oe()),label:t(o)("common.pay"),style:{width:"90%"}},null,8,["label"])])])])]),e("div",Dt,[e("div",jt,[e("div",St,[n(t(g),{class:"w-full border-none bg-gray-400 border-round-xl shadow-5",icon:"pi pi-arrow-left",label:t(o)("common.back"),onClick:l[22]||(l[22]=a=>t(R).push({path:"/table"}))},null,8,["label"])]),e("div",Ut,[n(t(g),{class:"w-full border-round-xl flex flex-wrap justify-content-between pl-2 pr-3",variant:"text",onClick:l[23]||(l[23]=a=>ke()),raised:""},{default:r(()=>[e("div",zt,[l[55]||(l[55]=e("div",{class:"flex align-items-center justify-content-center p-2 bg-gray-200 border-round-2xl"},[e("i",{class:"pi pi-shopping-bag"})],-1)),e("label",Nt,i(t(o)("paymentPage.subtotal")),1),e("i",{class:W(A.value.icon)},null,2)]),e("div",At,[_("",!0),e("label",Ct,i(h().toFixed(2))+"€",1)])]),_:1}),Ue(e("div",$t,[(v(!0),p(X,null,de(U.value,a=>(v(),p("div",Lt,[e("div",Ft,[e("img",{src:a.image,alt:a.image,style:{height:"60px"}},null,8,It),e("div",Bt,[e("label",Ot,i(a.name),1),e("label",Mt,i(a.discount?Number(a.dis_price):a.price?Number(a.price):0)+" x "+i(a.quality?a.quality:1),1)])])]))),256))],512),[[ze,A.value.visible]])]),t(V).settings.value.homeDelivery?(v(),p("div",Et,[e("div",qt,[e("div",Wt,[e("i",{class:W(s.value.deliveryType=="delivery2home"?"pi pi-truck":"pi pi-shop")},null,2)]),e("label",Rt,i(t(o)("paymentPage.deliveryType.title")),1)]),e("div",Ht,[n(t(g),{class:"border-round-xl p-1 col-6",label:t(o)("paymentPage.deliveryType.inShop"),outlined:s.value.deliveryType=="delivery2home",onClick:l[24]||(l[24]=a=>s.value.deliveryType="pickUpInShop")},null,8,["label","outlined"]),n(t(g),{class:"border-round-xl p-1 col-6",label:t(o)("paymentPage.deliveryType.toHome"),outlined:s.value.deliveryType=="pickUpInShop",onClick:l[25]||(l[25]=a=>s.value.deliveryType="delivery2home")},null,8,["label","outlined"])]),e("div",Gt,[s.value.deliveryType=="pickUpInShop"?(v(),p("small",Kt,i(t(o)("paymentPage.pageNote.inShopNote")),1)):_("",!0),s.value.deliveryType=="delivery2home"?(v(),p("small",Yt,i(t(o)("paymentPage.pageNote.toHomeNote")),1)):_("",!0)])])):_("",!0),e("div",Zt,[e("div",Qt,[l[56]||(l[56]=e("div",{class:"flex align-items-center justify-content-center p-2 bg-gray-200 border-round-2xl"},[e("i",{class:"pi pi-calendar"})],-1)),e("label",Jt,i(s.value.deliveryType=="delivery2home"?t(o)("paymentPage.delivery.time"):t(o)("paymentPage.pickup.time")),1)]),e("div",Xt,[e("div",ea,[n(t(c),{variant:"on"},{default:r(()=>[n(t(ce),{modelValue:s.value.pickupDate,"onUpdate:modelValue":[l[26]||(l[26]=a=>s.value.pickupDate=a),l[27]||(l[27]=a=>Z(s.value.pickupDate))],invalid:!s.value.pickupDate,minDate:K.value,maxDate:E.value,manualInput:!1,dateFormat:"yy/mm/dd",class:"w-full",size:"small",fluid:""},null,8,["modelValue","invalid","minDate","maxDate"]),e("label",la,i(s.value.deliveryType=="delivery2home"?t(o)("paymentPage.delivery.data"):t(o)("paymentPage.pickup.data"))+"*",1)]),_:1})])]),e("div",ta,[e("div",aa,[n(t(c),{variant:"on"},{default:r(()=>[n(t(N),{modelValue:s.value.pickupTime,"onUpdate:modelValue":l[28]||(l[28]=a=>s.value.pickupTime=a),invalid:!s.value.pickupTime,options:B.value,optionLabel:"optionLabel",class:"w-full",size:"small"},null,8,["modelValue","invalid","options"]),e("label",sa,i(s.value.deliveryType=="delivery2home"?t(o)("paymentPage.delivery.time"):t(o)("paymentPage.pickup.time"))+"*",1)]),_:1})])])]),s.value.deliveryType=="delivery2home"?(v(),p("div",oa,[e("div",ia,[l[57]||(l[57]=e("div",{class:"flex align-items-center justify-content-center p-2 bg-gray-200 border-round-2xl"},[e("i",{class:"pi pi-map-marker"})],-1)),e("label",na,i(t(o)("paymentPage.delivery.address.title")),1)]),e("div",da,[n(t(c),{variant:"on"},{default:r(()=>[n(t(x),{type:"text",modelValue:s.value.deliveryAddress.address1,"onUpdate:modelValue":l[29]||(l[29]=a=>s.value.deliveryAddress.address1=a),invalid:!s.value.deliveryAddress.address1,size:"small",class:"w-full safari-input-fix",fluid:""},null,8,["modelValue","invalid"]),e("label",ra,i(t(o)("paymentPage.delivery.address.address1"))+"*",1)]),_:1})]),e("div",ua,[n(t(c),{variant:"on"},{default:r(()=>[n(t(x),{type:"text",modelValue:s.value.deliveryAddress.address2,"onUpdate:modelValue":l[30]||(l[30]=a=>s.value.deliveryAddress.address2=a),size:"small",class:"w-full safari-input-fix",fluid:""},null,8,["modelValue"]),e("label",ca,i(t(o)("paymentPage.delivery.address.address2")),1)]),_:1})]),e("div",pa,[e("div",va,[n(t(c),{variant:"on"},{default:r(()=>[n(t(x),{type:"text",modelValue:s.value.deliveryAddress.city,"onUpdate:modelValue":l[31]||(l[31]=a=>s.value.deliveryAddress.city=a),invalid:!s.value.deliveryAddress.city,size:"small",class:"w-full safari-input-fix",fluid:""},null,8,["modelValue","invalid"]),e("label",ma,i(t(o)("paymentPage.delivery.address.city"))+"*",1)]),_:1})]),e("div",fa,[n(t(c),{variant:"on"},{default:r(()=>[n(t(pe),{id:"basic",modelValue:s.value.deliveryAddress.postalCode,"onUpdate:modelValue":l[32]||(l[32]=a=>s.value.deliveryAddress.postalCode=a),mask:"9999-999",size:"small",invalid:!s.value.deliveryAddress.postalCode,class:"w-full safari-input-fix",fluid:""},null,8,["modelValue","invalid"]),e("label",ya,i(t(o)("paymentPage.delivery.address.postalCode"))+"*",1)]),_:1})])])])):_("",!0),e("div",_a,[e("div",ba,[l[58]||(l[58]=e("div",{class:"flex align-items-center justify-content-center p-2 bg-gray-200 border-round-2xl"},[e("i",{class:"pi pi-user"})],-1)),e("label",xa,i(t(o)("paymentPage.contact")),1)]),e("div",ga,[e("div",ha,[n(t(c),{variant:"on"},{default:r(()=>[n(t(x),{type:"text",modelValue:b.value.first,"onUpdate:modelValue":l[33]||(l[33]=a=>b.value.first=a),class:"w-full safari-input-fix",size:"small",fluid:""},null,8,["modelValue"]),e("label",wa,i(t(o)("paymentPage.name.first")),1)]),_:1})]),e("div",ka,[n(t(c),{variant:"on"},{default:r(()=>[n(t(x),{type:"text",modelValue:b.value.last,"onUpdate:modelValue":l[34]||(l[34]=a=>b.value.last=a),invalid:!b.value.last,class:"w-full safari-input-fix",size:"small",fluid:""},null,8,["modelValue","invalid"]),e("label",Pa,i(t(o)("paymentPage.name.last"))+"*",1)]),_:1})])]),e("div",Va,[e("div",Ta,[n(t(c),{variant:"on"},{default:r(()=>[n(t(x),{type:"text",modelValue:s.value.customer.email,"onUpdate:modelValue":l[35]||(l[35]=a=>s.value.customer.email=a),invalid:!s.value.customer.email,class:"w-full safari-input-fix",size:"small",fluid:""},null,8,["modelValue","invalid"]),e("label",Da,i(t(o)("paymentPage.email"))+"*",1)]),_:1})])]),e("div",ja,[e("div",Sa,[n(t(N),{modelValue:F.value,"onUpdate:modelValue":l[36]||(l[36]=a=>F.value=a),options:le.value,optionLabel:"label",optionValue:"value",class:"w-full safari-input-fix",filter:"",size:"small",fluid:""},{value:r(a=>[e("div",Ua,[e("label",null,"+"+i(a.value),1)])]),option:r(a=>[e("div",za,[e("div",null,i("+"+a.option.value+"	"+t(o)("common.country."+a.option.label)),1)])]),_:1},8,["modelValue","options"])]),e("div",Na,[n(t(c),{variant:"on"},{default:r(()=>[n(t(x),{type:"number",modelValue:s.value.customer.phone,"onUpdate:modelValue":l[37]||(l[37]=a=>s.value.customer.phone=a),invalid:!s.value.customer.phone,class:"w-full safari-input-fix",size:"small",fluid:""},null,8,["modelValue","invalid"]),e("label",Aa,i(t(o)("paymentPage.phone"))+"*",1)]),_:1})])])]),e("div",Ca,[e("div",$a,[l[59]||(l[59]=e("div",{class:"flex align-items-center justify-content-center p-2 bg-gray-200 border-round-2xl"},[e("i",{class:"pi pi-credit-card"})],-1)),e("label",La,i(t(o)("paymentPage.payment")),1)]),e("div",Fa,[e("div",Ia,[n(t(c),{variant:"on"},{default:r(()=>[n(t(N),{modelValue:s.value.pay_type,"onUpdate:modelValue":l[38]||(l[38]=a=>s.value.pay_type=a),invalid:!s.value.pay_type,options:te.value.filter(a=>a.deliveryType==s.value.deliveryType),optionLabel:"optionLabel",class:"w-full",size:"small",fluid:""},null,8,["modelValue","invalid","options"]),e("label",Ba,i(t(o)("paymentPage.selectPayment"))+"*",1)]),_:1})])])]),e("div",Oa,[e("div",Ma,[l[60]||(l[60]=e("div",{class:"flex align-items-center justify-content-center p-2 bg-gray-200 border-round-2xl"},[e("i",{class:"pi pi-file-edit"})],-1)),e("label",Ea,i(t(o)("common.observation")),1)]),e("div",qa,[e("div",Wa,[n(t(c),{variant:"on"},{default:r(()=>[n(t(ve),{id:"on_label",class:"w-full safari-input-fix",rows:"2",modelValue:s.value.note,"onUpdate:modelValue":l[39]||(l[39]=a=>s.value.note=a),size:"small",fluid:""},null,8,["modelValue"]),e("label",Ra,i(t(o)("common.observation")),1)]),_:1})])])]),e("div",Ha,[e("div",Ga,[l[61]||(l[61]=e("div",{class:"flex align-items-center justify-content-center p-2 bg-gray-200 border-round-2xl"},[e("i",{class:"pi pi-money-bill"})],-1)),e("label",Ka,i(t(o)("paymentPage.tip")),1)]),e("div",Ya,[n(t(re),{modelValue:T.value,"onUpdate:modelValue":[l[40]||(l[40]=a=>T.value=a),l[41]||(l[41]=a=>L($(T.value)))],options:ee.value,fluid:"",style:{"max-width":"100%"}},{option:r(a=>[e("div",Za,[e("label",null,i(a.option?a.option+"%":"NONE"),1),a.option?(v(),p("label",Qa,i($(a.option))+"€",1)):_("",!0)])]),_:1},8,["modelValue","options"]),e("div",Ja,[n(t(ue),{modelValue:S.value,"onUpdate:modelValue":l[42]||(l[42]=a=>S.value=a),inputId:"stacked-buttons",showButtons:"",mode:"currency",currency:"EUR",fluid:"",class:"safari-input-fix",size:"small",style:{width:"75%"}},null,8,["modelValue"]),n(t(g),{class:"text-xs",label:t(o)("paymentPage.addTip"),style:{width:"25%"},size:"small",onClick:l[43]||(l[43]=a=>L(S.value,!0))},null,8,["label"])]),e("label",Xa,i(t(o)("paymentPage.tipThanksMSG")),1)])]),e("div",es,[e("label",ls,i(t(o)("paymentPage.must")),1)]),e("div",ts,[n(t(g),{class:"w-full p-2 shadow-5 border-round-top-lg flex flex-row justify-content-between align-items-center",text:"",onClick:l[44]||(l[44]=a=>be())},{default:r(()=>[e("label",as,i(t(o)("paymentPage.detailPrice")),1),e("i",{class:W(C.value?"pi pi-chevron-down":"pi pi-chevron-up")},null,2)]),_:1}),C.value?(v(),p("div",ss,[e("div",os,[P()!=h()?(v(),p("div",is,[e("label",ns,i(t(o)("paymentPage.subtotal")),1),e("label",ds,i(P().toFixed(2))+"€",1)])):_("",!0),P()!=h()?(v(),p("div",rs,[e("label",us,i(t(o)("paymentPage.discount")),1),e("label",cs,"-"+i((Number(P())-Number(h())).toFixed(2))+"€",1)])):_("",!0),e("div",ps,[e("label",vs,i(t(o)("paymentPage.subtotal")),1),e("label",ms,i(h().toFixed(2))+"€",1)]),w.value.price!=0?(v(),p("div",fs,[e("label",ys,i(t(o)("paymentPage.tip")),1),e("label",_s,i(w.value.price)+"€",1)])):_("",!0)]),e("div",bs,[e("label",xs,i(t(o)("paymentPage.total")),1),e("label",gs,i(I.value.toFixed(2))+"€",1)])])):_("",!0),n(t(g),{type:"submit",class:"w-full border-round-bottom-lg p-2",icon:"pi pi-dollar",onClick:l[45]||(l[45]=a=>oe()),label:`${t(o)("common.pay")}`+(C.value?"":` (${t(o)("paymentPage.total")} ${I.value.toFixed(2)}€) `)},null,8,["label"])])])])]),n(t(Ce),{visible:q.value,"onUpdate:visible":l[47]||(l[47]=a=>q.value=a),header:t(o)("common.success"),modal:!0,onHide:l[48]||(l[48]=a=>t(R).push({path:"/table"})),style:{"max-width":"75%"}},{default:r(()=>[e("div",hs,[l[62]||(l[62]=e("i",{class:"pi pi-check",style:{"font-size":"3rem",color:"green"}},null,-1)),e("label",ws,i(t(o)("paymentPage.successPayment")),1),e("label",null,i(t(o)("paymentPage.toOrderPage")),1)]),e("div",ks,[n(t(g),{label:t(o)("common.confirm"),onClick:l[46]||(l[46]=a=>q.value=!1)},null,8,["label"])])]),_:1},8,["visible","header"]),n(t($e),{style:{"max-width":"90%"}})],64))}},Ns=Le(Ps,[["__scopeId","data-v-5f00780c"]]);export{Ns as default};
