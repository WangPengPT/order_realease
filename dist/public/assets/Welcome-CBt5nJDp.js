import{s as fe,_ as pe,P as ve}from"./pagination-npdj-0pw.js";import{s as ge}from"./index-CTMM8re7.js";import{u as K,r as v,c as B,a,w as he,o as Y,n as _e,C as be,b as we,d as xe,m as w,e as ye,f as i,g as r,h as l,i as D,j as c,k as s,l as z,t as d,F as x,p as N,q as n,s as E,v as j}from"./index-ZpqDipqf.js";import{s as h}from"./index-DoEbXwLc.js";import{_ as ke,s as Ce,a as $e,b as Ie,c as Pe,S as Ne,d as Se}from"./_plugin-vue_export-helper-CctFmnes.js";import{s as Fe,a as Le}from"./index-DxV6CBG5.js";import{s as Ve}from"./index-Bj73ZoNr.js";import{c as O}from"./cookie-CTJN0GZu.js";import"./index-j0NRvZ5f.js";import"./index-BbUTdACZ.js";const Be=["src"],Oe=["onClick"],Ae=["src"],Re={class:"absolute top-0 border-0 right-0 p-2 flex flex-column flex align-items-center"},Te={class:"m-3 max-w-screen"},De={class:z(["w-full","p-4"])},Ee=["src"],je={key:0,class:"text-center p-1"},ze={key:1,class:"text-center p-1"},Ue={class:"flex flex-column justify-center"},qe={key:0,class:"text-center"},Me={key:1,class:"text-center"},Ge={class:"flex w-full"},He={class:"flex flex-column"},We={class:"w-full text-sm break-words px-2",style:{"white-space":"pre-wrap"}},Xe=["src"],Je={class:"pt-3 pb-3"},Qe={class:"flex flex-row gap-2"},Ke={class:"border-400 border-round border-1 p-3"},Ye={class:"text-center font-bold"},Ze={key:0,class:"w-full overflow-hidden"},et=["src"],tt={class:"w-full overflow-hidden",style:{"aspect-ratio":"2 / 1.5"}},lt=["src"],st={class:"font-bold"},at={class:"flex flex-column"},ot={class:"flex flex-row justify-content-between w-full"},nt={key:0,class:"fixed right-0 bottom-0 p-4",style:{"z-index":"2"}},it={class:"mt-2"},rt={class:"flex justify-content-end mt-2"},ut={__name:"Welcome",setup(ct){const y=[{label:"pt",imagePath:"flags/pt.png"},{label:"en",imagePath:"flags/en.png"},{label:"zh",imagePath:"flags/zh.png"}],U=ye(),Z=xe(),{locale:k}=K(),{t:m}=K(),g=v(null),S=v(!0),q=v(),M=v(""),ee=B(()=>a.getShopInfo("restaurantName")),u=v(void 0);function te(){const e=O.getCookie("language");e&&(k.value=e)}let _=null;he(()=>[a.currentPage.value,a.addr.value],([e,t])=>{var p,$,I;u.value=e,($=(p=u.value)==null?void 0:p.data)!=null&&$.logoPath&&((I=u.value)!=null&&I.imagesPath)&&(M.value=a.pathFormated(u.value.data.logoPath,u.value.imagesPath))},{immediate:!0}),Y(async()=>{var e;await _e(),_=new IntersectionObserver(t=>{t.forEach(p=>{S.value=p.isIntersecting})},{threshold:.1}),(e=g.value)!=null&&e.$el&&_.observe(g.value.$el)}),Y(async()=>{var e;a.params=a.getQueryParams(),a.params.table?a.params.table=be.SimpleDecode(a.params.table):a.params.table=void 0,te(),a.initMenu(!0),_=new IntersectionObserver(t=>{t.forEach(p=>{p.isIntersecting?S.value=!0:S.value=!1})},{threshold:.1}),(e=g.value)!=null&&e.$el&&_.observe(g.value.$el)}),we(()=>{var e;_&&((e=g.value)!=null&&e.$el)&&_.unobserve(g.value.$el)});const le=B(()=>{const e="/";switch(k.value.toLowerCase()){case"pt":return e+y[0].imagePath;case"en":return e+y[1].imagePath;case"zh":return e+y[2].imagePath;default:return e+y[1].imagePath}});function b(e){return e[`text_${k.value.toLowerCase()}`]}const se=Date.now(),G=O.getCookie("login_time");let A;G&&(A=JSON.parse(G));const ae=B(()=>y.filter(e=>e.label!==k.value.toLowerCase()).map(e=>({...e,command:()=>{k.value=e.label,oe(e.label)}})));function oe(e){O.setCookie("language",e)}function R(e){window.open(e,"_blank")}function ne(){let e=window.env.INS_URL;(e===void 0||e===""||e===null)&&(e="https://www.instagram.com/sushicome.pt/"),R(e)}const ie=e=>{q.value.toggle(e)};A&&(se-A>60*5*1e3?O.clearAllCookies():T());function T(){const e=Z.query.table;if(!a.permissionsControl.value.order||!a.settings.value.order){w.show_warn(m("notification.orderClosed"));return}U.push({path:"/table",query:{table:e}})}function re(){a.currentTableId.value=void 0,a.params.table=void 0,U.push({path:"/takeReserve"})}const ue=B(()=>[{label:m("common.options"),items:[{label:m("common.pay"),icon:"pi pi-wallet",command:()=>{ce()}},{label:m("common.call"),icon:"pi pi-user-plus",command:()=>{a.send_cmd(a.getTable(),{cmd:"call"},e=>{e.success?w.show_info(m("notification.call_msg")):w.show_info(e.data)})}}]}]);function H(e){return u.value.data.options[e]?"font-bold":""}const F=v(!1),L=v(),C=v();function ce(){F.value=!0}function de(){e(L.value)?a.send_cmd(a.getTable(),{cmd:"pay",nif:L.value,note:C.value},t=>{t.success?(w.show_info(m("notification.pay_msg")),F.value=!1):w.show_error(m("common.failed"))}):w.show_warn(m("notification.cancel_msg"));function e(t){return!t||t.toString().length===9||t.toString().length===0}}function me(){C.value&&(C.value=void 0)}return(e,t)=>{var p,$,I,W,X,J;return n(),i(x,null,[r(s(fe),{model:ae.value,direction:"down",transitionDelay:80,class:"absolute top-0 left-0 border-0"},{button:c(({toggleCallback:o})=>[r(s(h),{outlined:"",onClick:o,class:"custom-clean-button"},{default:c(()=>[l("img",{src:le.value,style:{width:"38px",height:"38px"}},null,8,Be)]),_:2},1032,["onClick"])]),item:c(({item:o,toggleCallback:P})=>[l("div",{class:"flex flex-col items-center justify-between",onClick:P},[l("img",{src:o.imagePath,alt:"lang",style:{width:"38px",height:"38px"}},null,8,Ae)],8,Oe)]),_:1},8,["model"]),l("div",Re,[l("div",null,[r(s(h),{icon:"pi pi-bell",rounded:"","aria-label":"Filter",onClick:ie,"aria-haspopup":"true","aria-controls":"overlay_menu",size:"small",style:{width:"42px",height:"42px"}}),r(s(ge),{ref_key:"menu",ref:q,id:"overlay_menu",model:ue.value,popup:!0},null,8,["model"])]),l("div",null,[r(s(h),{icon:"pi pi-instagram",class:"custom-clean-button",onClick:ne})])]),l("div",Te,[l("div",De,[l("img",{src:M.value,alt:"Logo",class:"max-w-6rem h-auto w-full mx-auto block"},null,8,Ee),($=(p=u.value)==null?void 0:p.data)!=null&&$.restaurantName?(n(),i("h3",je,d((W=(I=u.value)==null?void 0:I.data)==null?void 0:W.restaurantName),1)):(n(),i("h3",ze,d(ee.value),1)),l("div",Ue,[s(a).testEnvironment.value?(n(),i("h2",qe,d("DEMO"))):D("",!0),s(a).testEnvironment.value?(n(),i("span",Me,d(s(m)("home.demoDescription")),1)):D("",!0)])]),l("div",Ge,[r(s(Ce),{class:"w-full max-w-xl mx-auto"},{default:c(()=>{var o,P;return[(n(!0),i(x,null,N((P=(o=u.value)==null?void 0:o.data)==null?void 0:P.titles,(f,Q)=>(n(),E(s($e),{value:Q},{default:c(()=>[r(s(Ie),null,{default:c(()=>[j(d(b(f.title)),1)]),_:2},1024),r(s(Pe),{class:"p-1"},{default:c(()=>[l("div",He,[l("div",We,d(b(f.description)),1),l("img",{src:s(a).pathFormated(f.image.src,u.value.imagesPath),class:"max-w-5rem h-auto block mr-auto p-1 invert-image"},null,8,Xe)])]),_:2},1024)]),_:2},1032,["value"]))),256))]}),_:1})]),l("div",Je,[l("div",Qe,[r(s(h),{onClick:t[0]||(t[0]=o=>T()),class:"w-full font-bold",style:{"border-radius":"20px"},ref_key:"orderButtonRef",ref:g},{default:c(()=>[j(d(e.$t("common.eatHere")),1)]),_:1},512),r(s(h),{onClick:t[1]||(t[1]=o=>re()),class:"w-full font-bold",style:{"border-radius":"20px"}},{default:c(()=>[j(d(e.$t("common.takeOrReserve")),1)]),_:1})])]),(n(!0),i(x,null,N((J=(X=u.value)==null?void 0:X.data)==null?void 0:J.frames,(o,P)=>(n(),i("div",null,[l("div",Ke,[(n(!0),i(x,null,N(o,(f,Q)=>(n(),i("div",null,[l("h1",Ye,d(b(f.title)),1),f.images.length<=1?(n(),i("div",Ze,[l("img",{src:s(a).pathFormated(f.images[0].src,u.value.imagesPath),class:"w-full"},null,8,et)])):(n(),E(s(Se),{key:1,"slides-per-view":1,loop:!0,class:"w-full",modules:[s(ve)],pagination:{clickable:!0}},{default:c(()=>[(n(!0),i(x,null,N(f.images,(V,dt)=>(n(),E(s(Ne),null,{default:c(()=>[l("div",tt,[l("img",{src:s(a).pathFormated(V.src,u.value.imagesPath),class:"w-full h-full",style:{"object-fit":"cover"}},null,8,lt)])]),_:2},1024))),256))]),_:2},1032,["modules"])),l("h4",st,d(b(f.subtitle)),1),(n(!0),i(x,null,N(f.descriptions,V=>(n(),i("div",null,[l("div",at,[l("div",ot,[l("span",{class:z(H(0))},d(b(V.left)),3),l("span",{class:z(H(1))},d(b(V.right)),3)])])]))),256))]))),256))]),t[9]||(t[9]=l("div",{class:"p-4"},null,-1))]))),256))]),l("div",{class:"absoluto top-0 text-center text-xs p-2 underline cursor-pointer",onClick:t[2]||(t[2]=o=>R("https://5am3eq-wc.myshopify.com/"))}," ©2025 XIAOXIONG® v1.1.114 "),l("div",{class:"absoluto top-0 text-center text-xs p-2",onClick:t[3]||(t[3]=o=>R("https://5am3eq-wc.myshopify.com/"))},t[10]||(t[10]=[l("img",{src:pe,style:{width:"7rem"}},null,-1)])),S.value?D("",!0):(n(),i("div",nt,[r(s(h),{rounded:"","aria-label":"Star",onClick:t[4]||(t[4]=o=>T()),class:"w-full font-bold p-button-lg shadow-6"},{default:c(()=>t[11]||(t[11]=[l("span",{class:"material-icons text-5xl"},"restaurant",-1)])),_:1,__:[11]})])),r(s(Fe),{visible:F.value,"onUpdate:visible":t[8]||(t[8]=o=>F.value=o),header:"结账",class:"flex flex-column",modal:!0,dismissableMask:!0,onHide:me},{default:c(()=>[l("div",null,[t[12]||(t[12]=l("label",null,"NIF:",-1)),r(s(Ve),{modelValue:L.value,"onUpdate:modelValue":t[5]||(t[5]=o=>L.value=o),inputId:"withoutgrouping",useGrouping:!1,fluid:"",class:"w-full m-1"},null,8,["modelValue"])]),l("div",it,[l("label",null,d(e.$t("common.note"))+":",1),r(s(Le),{type:"text",modelValue:C.value,"onUpdate:modelValue":t[6]||(t[6]=o=>C.value=o),class:"w-full m-1"},null,8,["modelValue"])]),l("div",rt,[r(s(h),{label:s(m)("common.send"),onClick:t[7]||(t[7]=o=>de())},null,8,["label"])])]),_:1},8,["visible"])],64)}}},yt=ke(ut,[["__scopeId","data-v-86a18c3f"]]);export{yt as default};
