import{s as he,a as xe,b as be,c as we,d as ye,e as ke,f as Ce,g as $e,h as Ie,i as Pe}from"./primevue-DzNNCCVj.js";import{_ as Ne,P as Be}from"./pagination-BO-ad-kk.js";import{S as Se,a as Fe}from"./pagination-C-oWYlPG.js";import{O as Z,r as v,y as $,w as Le,o as ee,n as Me,P as Oe,Q as Ve,R as De,c as n,z as i,e as s,s as I,q as c,v as A,t as d,S as u,F as x,D as P,d as a,p as T,h as z}from"./vue-BhQbBSxl.js";import{c as l,C as Re,a as O,m as Te}from"./index-CtB4Cq0I.js";import{_ as ze}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-DYQJwaLu.js";const Ae=["src"],Ue=["onClick"],Ee=["src"],je={class:"absolute top-0 border-0 right-0 p-2 flex flex-column flex align-items-center"},qe={key:0},Ge={class:"m-3 max-w-screen"},He={class:A(["w-full","p-4"])},Qe=["src"],We={key:0,class:"text-center p-1"},Xe={key:1,class:"text-center p-1"},Je={class:"flex flex-column justify-center"},Ke={key:0,class:"text-center"},Ye={key:1,class:"text-center"},Ze={class:"flex w-full"},et={class:"flex flex-column"},tt={class:"w-full text-sm break-words px-2",style:{"white-space":"pre-wrap"}},st=["src"],lt={key:0,class:"flex justify-content-end"},ot={class:"flex flex-row"},at={class:"underline text-blue-600 text-sm"},nt={class:"pt-3 pb-3"},it={class:"flex flex-row gap-2"},rt={class:"border-400 border-round border-1 p-3"},ut={class:"text-center font-bold"},ct={key:0,class:"w-full overflow-hidden"},dt=["src"],mt={class:"w-full overflow-hidden",style:{"aspect-ratio":"2 / 1.5"}},pt=["src"],ft={class:"font-bold"},vt={class:"flex flex-column"},gt={class:"flex flex-row justify-content-between w-full"},_t={key:0,class:"fixed right-0 bottom-0 p-4",style:{"z-index":"2"}},ht={class:"mt-2"},xt={class:"flex justify-content-end mt-2"},bt={__name:"Welcome",setup(wt){const b=[{label:"pt",imagePath:"flags/pt.png"},{label:"en",imagePath:"flags/en.png"},{label:"zh",imagePath:"flags/zh.png"}],U=De(),te=Ve(),{locale:w}=Z(),{t:p}=Z(),g=v(null),N=v(!0),E=v(),j=v(""),se=$(()=>l.getShopInfo("restaurantName")),m=v(void 0),V=$(()=>l.shopInfo.value.instagramUrl);function le(){const e=O.getCookie("language");e&&(w.value=e)}let _=null;Le(()=>[l.currentPage.value,l.addr.value],([e,t])=>{var r,L,M;m.value=e,(L=(r=m.value)==null?void 0:r.data)!=null&&L.logoPath&&((M=m.value)!=null&&M.imagesPath)&&(j.value=l.pathFormated(m.value.data.logoPath.src,m.value.imagesPath))},{immediate:!0}),ee(async()=>{var e;await Me(),_=new IntersectionObserver(t=>{t.forEach(r=>{N.value=r.isIntersecting})},{threshold:.1}),(e=g.value)!=null&&e.$el&&_.observe(g.value.$el)}),ee(async()=>{var e;l.params=l.getQueryParams(),l.params.table?l.params.table=Re.SimpleDecode(l.params.table):l.params.table=void 0,le(),l.initMenu(!0),_=new IntersectionObserver(t=>{t.forEach(r=>{r.isIntersecting?N.value=!0:N.value=!1})},{threshold:.1}),(e=g.value)!=null&&e.$el&&_.observe(g.value.$el)}),Oe(()=>{var e;_&&((e=g.value)!=null&&e.$el)&&_.unobserve(g.value.$el)});const oe=$(()=>{const e="/";switch(w.value.toLowerCase()){case"pt":return e+b[0].imagePath;case"en":return e+b[1].imagePath;case"zh":return e+b[2].imagePath;default:return e+b[1].imagePath}});function h(e){return e[`text_${w.value.toLowerCase()}`]}const ae=Date.now(),q=O.getCookie("login_time");let D;q&&(D=JSON.parse(q));const ne=$(()=>b.filter(e=>e.label!==w.value.toLowerCase()).map(e=>({...e,command:()=>{w.value=e.label,ie(e.label)}})));function ie(e){O.setCookie("language",e)}function B(e){typeof e=="string"&&/^(https?:\/\/)/i.test(e)?window.open(e,"_blank"):console.warn("无效的 URL:",e)}function re(){B(V.value)}const ue=e=>{E.value.toggle(e)};D&&(ae-D>60*5*1e3?O.clearAllCookies():R());function R(){const e=te.query.table;if(!l.permissionsControl.value.order||!l.settings.value.order){Te.show_warn(p("notification.orderClosed"));return}U.push({path:"/table",query:{table:e}})}function ce(){l.currentTableId.value=void 0,l.params.table=void 0,U.push("/takeReserve")}const de=$(()=>[{label:p("common.options"),items:[{label:p("common.pay"),icon:"pi pi-wallet",command:()=>{me()}},{label:p("common.call"),icon:"pi pi-user-plus",command:()=>{l.send_cmd(l.getTable(),{cmd:"call"},e=>{e.success?MsgBox.show_info(p("notification.call_msg")):MsgBox.show_info(e.data)})}}]}]);function G(e){return m.value.data.options[e]?"font-bold":""}const S=v(!1),F=v(),y=v();function me(){S.value=!0}function pe(){e(F.value)?l.send_cmd(l.getTable(),{cmd:"pay",nif:F.value,note:y.value},t=>{t.success?(MsgBox.show_info(p("notification.pay_msg")),S.value=!1):MsgBox.show_error(p("common.failed"))}):MsgBox.show_warn(p("notification.cancel_msg"));function e(t){return!t||t.toString().length===9||t.toString().length===0}}function fe(){y.value&&(y.value=void 0)}return(e,t)=>{var H,Q,W,X,J,K;const r=xe,L=he,M=be,ve=Ie,ge=Pe,_e=ye;return a(),n(x,null,[i(L,{model:ne.value,direction:"down",transitionDelay:80,class:"absolute top-0 left-0 border-0"},{button:c(({toggleCallback:o})=>[i(r,{outlined:"",onClick:o,class:"custom-clean-button"},{default:c(()=>[s("img",{src:oe.value,style:{width:"38px",height:"38px"}},null,8,Ae)]),_:2},1032,["onClick"])]),item:c(({item:o,toggleCallback:k})=>[s("div",{class:"flex flex-col items-center justify-between",onClick:k},[s("img",{src:o.imagePath,alt:"lang",style:{width:"38px",height:"38px"}},null,8,Ee)],8,Ue)]),_:1},8,["model"]),s("div",je,[s("div",null,[i(r,{icon:"pi pi-bell",rounded:"","aria-label":"Filter",onClick:ue,"aria-haspopup":"true","aria-controls":"overlay_menu",size:"small",style:{width:"42px",height:"42px"}}),i(M,{ref_key:"menu",ref:E,id:"overlay_menu",model:de.value,popup:!0},null,8,["model"])]),V.value&&V.value.trim()!==""?(a(),n("div",qe,[i(r,{icon:"pi pi-instagram",class:"custom-clean-button",onClick:re})])):I("",!0)]),s("div",Ge,[s("div",He,[s("img",{src:j.value,alt:"Logo",class:"max-w-6rem h-auto w-full mx-auto block"},null,8,Qe),(Q=(H=m.value)==null?void 0:H.data)!=null&&Q.restaurantName?(a(),n("h3",We,d((X=(W=m.value)==null?void 0:W.data)==null?void 0:X.restaurantName),1)):(a(),n("h3",Xe,d(se.value),1)),s("div",Je,[u(l).testEnvironment.value?(a(),n("h2",Ke,d("DEMO"))):I("",!0),u(l).testEnvironment.value?(a(),n("span",Ye,d(u(p)("home.demoDescription")),1)):I("",!0)])]),s("div",Ze,[i(u(we),{class:"w-full max-w-xl mx-auto"},{default:c(()=>{var o,k;return[(a(!0),n(x,null,P((k=(o=m.value)==null?void 0:o.data)==null?void 0:k.titles,(f,Y)=>(a(),T(u(ke),{value:Y},{default:c(()=>[i(u(Ce),null,{default:c(()=>[z(d(h(f.title)),1)]),_:2},1024),i(u($e),{class:"p-1"},{default:c(()=>[s("div",et,[s("div",tt,d(h(f.description)),1),s("img",{src:u(l).pathFormated(f.image.src,m.value.imagesPath),class:"max-w-5rem h-auto block mr-auto p-1 invert-image"},null,8,st),f.title.text_zh.includes("怎么获得学生优惠")?(a(),n("div",lt,[i(r,{onClick:t[0]||(t[0]=C=>B("https://xiaoxiongmarket.com/activity/29ca8401-6cd5-4bac-94f8-d5511c463e26")),text:""},{default:c(()=>[s("div",ot,[s("span",at,d(u(p)("home.eventPage")),1),t[10]||(t[10]=s("i",{class:"pi pi-external-link text-blue-600 text-sm p-1"},null,-1))])]),_:1})])):I("",!0)])]),_:2},1024)]),_:2},1032,["value"]))),256))]}),_:1})]),s("div",nt,[s("div",it,[i(r,{onClick:t[1]||(t[1]=o=>R()),class:"w-full font-bold",style:{"border-radius":"20px"},ref_key:"orderButtonRef",ref:g},{default:c(()=>[z(d(e.$t("common.eatHere")),1)]),_:1},512),i(r,{onClick:t[2]||(t[2]=o=>ce()),class:"w-full font-bold",style:{"border-radius":"20px"}},{default:c(()=>[z(d(e.$t("common.takeOrReserve")),1)]),_:1})])]),(a(!0),n(x,null,P((K=(J=m.value)==null?void 0:J.data)==null?void 0:K.frames,(o,k)=>(a(),n("div",null,[s("div",rt,[(a(!0),n(x,null,P(o,(f,Y)=>(a(),n("div",null,[s("h1",ut,d(h(f.title)),1),f.images.length<=1?(a(),n("div",ct,[s("img",{src:u(l).pathFormated(f.images[0].src,m.value.imagesPath),class:"w-full"},null,8,dt)])):(a(),T(u(Fe),{key:1,"slides-per-view":1,loop:!0,class:"w-full",modules:[u(Be)],pagination:{clickable:!0}},{default:c(()=>[(a(!0),n(x,null,P(f.images,(C,yt)=>(a(),T(u(Se),null,{default:c(()=>[s("div",mt,[s("img",{src:u(l).pathFormated(C.src,m.value.imagesPath),class:"w-full h-full",style:{"object-fit":"cover"}},null,8,pt)])]),_:2},1024))),256))]),_:2},1032,["modules"])),s("h4",ft,d(h(f.subtitle)),1),(a(!0),n(x,null,P(f.descriptions,C=>(a(),n("div",null,[s("div",vt,[s("div",gt,[s("span",{class:A([G(0),"break-words text-left"]),style:{"white-space":"pre-wrap"}},d(h(C.left)),3),s("span",{class:A([G(1),"break-words text-right"]),style:{"white-space":"pre-wrap"}},d(h(C.right)),3)])])]))),256))]))),256))]),t[11]||(t[11]=s("div",{class:"p-4"},null,-1))]))),256))]),s("div",{class:"absoluto top-0 text-center text-xs p-2 underline cursor-pointer",onClick:t[3]||(t[3]=o=>B("https://5am3eq-wc.myshopify.com/"))}," ©2025 XIAOXIONG® v1.1.114 "),s("div",{class:"absoluto top-0 text-center text-xs p-2",onClick:t[4]||(t[4]=o=>B("https://5am3eq-wc.myshopify.com/"))},t[12]||(t[12]=[s("img",{src:Ne,style:{width:"7rem"}},null,-1)])),N.value?I("",!0):(a(),n("div",_t,[i(r,{rounded:"","aria-label":"Star",onClick:t[5]||(t[5]=o=>R()),class:"w-full font-bold p-button-lg shadow-6"},{default:c(()=>t[13]||(t[13]=[s("span",{class:"material-icons text-5xl"},"restaurant",-1)])),_:1,__:[13]})])),i(_e,{visible:S.value,"onUpdate:visible":t[9]||(t[9]=o=>S.value=o),header:"结账",class:"flex flex-column",modal:!0,dismissableMask:!0,onHide:fe},{default:c(()=>[s("div",null,[t[14]||(t[14]=s("label",null,"NIF:",-1)),i(ve,{modelValue:F.value,"onUpdate:modelValue":t[6]||(t[6]=o=>F.value=o),inputId:"withoutgrouping",useGrouping:!1,fluid:"",class:"w-full m-1"},null,8,["modelValue"])]),s("div",ht,[s("label",null,d(e.$t("common.note"))+":",1),i(ge,{type:"text",modelValue:y.value,"onUpdate:modelValue":t[7]||(t[7]=o=>y.value=o),class:"w-full m-1"},null,8,["modelValue"])]),s("div",xt,[i(r,{label:u(p)("common.send"),onClick:t[8]||(t[8]=o=>pe())},null,8,["label"])])]),_:1},8,["visible"])],64)}}},St=ze(bt,[["__scopeId","data-v-cafe0957"]]);export{St as default};
