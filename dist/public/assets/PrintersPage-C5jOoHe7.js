import{s as H}from"./index-CJ5DrYmM.js";import{b as K,c as L}from"./index-CGkSJoIj.js";import{s as G}from"./index-Ba92UNnq.js";import{s as J}from"./index-wyQ4vOvk.js";import{s as Q}from"./index-DK8tJrji.js";import{s as W,a as X,c as Y,b as Z}from"./index-DSACQbO9.js";import{s as ee}from"./index-0HyeERaN.js";import{q as te,h as c,i as le,n as w,c as oe,d as a,w as f,l as t,F as ne,o as S,C as z,t as m,a as l,f as D,e as U,K as p}from"./index-CcLhF43X.js";import{s as se}from"./index-BcIKHkfB.js";import"./index-9wMuKYh0.js";import"./index-Dm191p6I.js";import"./index-eeaXY6HR.js";import"./index-BCKhOO1h.js";import"./index-Be-jUq4O.js";import"./index-DCoXVKBL.js";import"./index-BfeuBlom.js";import"./index-DM8BZImU.js";import"./index-DQyBrwKJ.js";import"./index-B-jDI51p.js";const ae={class:"flex flex-column gap-2"},ie={class:"flex justify-content-between"},re={class:"m-0 font-bold text-2xl text-left flex-grow-1"},ue={class:"flex flex-wrap justify-content-center py-5"},pe={class:"m-3 text-gray-500"},de={class:"flex flex-column gap-1 mt-2 mb-2"},ce={class:"flex flex-wrap justify-content-between"},me={class:"flex align-items-center gap-2 mb-1 mr-2"},ve={class:"flex flex-column gap-2 mt-2 mb-2"},fe={class:"flex align-items-center"},ge={class:"ml-1"},ye={class:"flex align-items-center"},_e={class:"ml-1"},be={class:"mt-2 mb-2"},we={class:"mt-2 mb-2"},xe={class:"flex flex-wrap justify-content-between align-items-center m-3"},Pe={class:"w-full flex flex-column gap-2 h-full align-items-center"},he={class:"flex gap-2"},ke={class:"flex gap-2 font-bold text-xl align-items-center"},Ve={class:"text-lg p-2 border-1",style:{width:"300px","white-space":"pre-line"}},Me={class:"flex justify-content-end mt-2 w-full"},Ge={__name:"PrintersPage",setup(Se){const{t:n}=te(),g=c(null),$=c([]),y=c([]),_=c([]),C=c([]),h=c(!1),k=c(null),x=c(!1),V=c(!1),M=c(14),T=c(!1),P=c(!0);function B(){k.value=null}function j(s){const e=s.data,r=[""].concat(e.printers);if($.value=r,P.value=$.value.length>1,g.value=e.curPrinter,M.value=e.fontSize||14,_.value.length==0){const u={},v=w.customDishApi.getSimplyCustomDishes().filter(d=>d.enable).map(d=>d.name);for(let d=0;d<w.menuApi.menuData.value.length;d++){const i=w.menuApi.menuData.value[d];i.category&&i.category!=""&&(u[i.category]||(u[i.category]=!0,v.push(i.category))),i.tags&&i.tags!=""&&(u[i.tags]||(u[i.tags]=!0,v.push(i.tags)))}_.value=v,console.log(_.value)}if(e.menu){const u=[];for(let v=0;v<e.menu.length;v++){const d=e.menu[v];let i=!1;for(let b=0;b<_.value.length;b++)_.value[b]==d&&(i=!0);i&&u.push(d)}y.value=u}else y.value=[];console.log(y.value),k.value=e,x.value=e.every_one=="true",V.value=e.print_takeaway=="true",h.value=!0}function N(){const s=k.value,e=g.value,r=y.value;s.curPrinter=e,s.menu=[...r],console.log(x.value),x.value==!0?s.every_one="true":s.every_one="false",s.print_takeaway=V.value?"true":"false",s.fontSize=M.value,console.log(s.id,e,r,s.print_takeaway,s.every_one,s.fontSize),w.selectPrinter(s.id,e,r,s.print_takeaway,s.every_one,s.fontSize),h.value=!1}function I(){const s=k.value;w.printTestPage(s.id)}le(()=>{w.getPrinters(s=>{C.value=s,console.log("printers",C.value.length)})});function A(){console.log("changePrintModel clicked"),T.value=!0}return(s,e)=>{const r=K,u=X,v=W,d=ee,i=Y,b=Z,O=Q,R=J,F=G,q=L,E=H;return S(),oe(ne,null,[a(v,{value:C.value,onRowClick:j},{header:f(()=>[l("div",ae,[l("div",ie,[l("h4",re,m(t(n)("optionPages.allPrinters")),1),a(r,{label:"修改打印机模板",onClick:e[0]||(e[0]=o=>A())})])])]),empty:f(()=>[l("div",ue,[e[17]||(e[17]=l("i",{class:"pi pi-search",style:{"font-size":"3rem",color:"#ccc"}},null,-1)),l("p",pe,m(t(n)("optionPages.noPrinter")),1)])]),default:f(()=>[a(u,{field:"id",header:t(n)("optionPages.printerId"),sortable:"",style:{width:"10%"}},null,8,["header"]),a(u,{field:"curPrinter",header:t(n)("optionPages.printer"),sortable:"",style:{width:"20%"}},null,8,["header"]),a(u,{field:"menu",header:t(n)("optionPages.menu"),sortable:"",style:{width:"50%"}},{body:f(({data:o})=>[z(m(o.menu.toString()),1)]),_:1},8,["header"]),a(u,{field:"every_one",header:t(n)("optionPages.oneByOne"),sortable:"",style:{width:"10%"}},null,8,["header"]),a(u,{field:"fontSize",header:t(n)("optionPages.fontSize"),sortable:"",style:{width:"10%"}},null,8,["header"])]),_:1},8,["value"]),a(F,{visible:h.value,"onUpdate:visible":e[10]||(e[10]=o=>h.value=o),header:t(n)("optionPages.printerSettings"),style:{"max-width":"500px","min-width":"300px"},modal:!0,dismissableMask:!0,onHide:B},{default:f(()=>[l("div",de,[l("div",ce,[l("label",null,m(t(n)("optionPages.printer"))+"： ",1),l("div",me,[a(d,{modelValue:P.value,"onUpdate:modelValue":e[1]||(e[1]=o=>P.value=o)},null,8,["modelValue"]),l("label",null,m(t(n)("optionPages.usePrinterIP")),1)])]),P.value?U("",!0):(S(),D(i,{key:0,modelValue:g.value,"onUpdate:modelValue":e[2]||(e[2]=o=>g.value=o),class:"w-full md:w-56",placeholder:t(n)("optionPages.selectPrinter"),options:$.value,filter:""},null,8,["modelValue","placeholder","options"])),P.value?(S(),D(t(se),{key:1,type:"text",modelValue:g.value,"onUpdate:modelValue":e[3]||(e[3]=o=>g.value=o)},null,8,["modelValue"])):U("",!0)]),l("div",ve,[l("div",fe,[a(b,{modelValue:x.value,"onUpdate:modelValue":e[4]||(e[4]=o=>x.value=o),binary:""},null,8,["modelValue"]),l("label",ge,m(t(n)("optionPages.printOne")),1)]),l("div",ye,[a(b,{modelValue:V.value,"onUpdate:modelValue":e[5]||(e[5]=o=>V.value=o),binary:""},null,8,["modelValue"]),l("label",_e,m(t(n)("optionPages.printTakeawayOrder")),1)])]),l("div",be,[l("label",null,m(t(n)("optionPages.printMenu")),1),a(O,{modelValue:y.value,"onUpdate:modelValue":e[6]||(e[6]=o=>y.value=o),options:_.value,class:"w-full md:w-56",filter:""},null,8,["modelValue","options"])]),l("div",we,[l("label",null,m(t(n)("optionPages.fontSize"))+": ",1),a(R,{modelValue:M.value,"onUpdate:modelValue":e[7]||(e[7]=o=>M.value=o),class:"w-full md:w-56",showButtons:"",buttonLayout:"horizontal",min:12,max:20,fluid:""},{incrementbuttonicon:f(()=>e[18]||(e[18]=[l("span",{class:"pi pi-plus"},null,-1)])),decrementbuttonicon:f(()=>e[19]||(e[19]=[l("span",{class:"pi pi-minus"},null,-1)])),_:1},8,["modelValue"])]),l("div",xe,[a(r,{onClick:e[8]||(e[8]=o=>I()),icon:"pi pi-print",color:"primary",label:t(n)("optionPages.printTest")},null,8,["label"]),a(r,{onClick:e[9]||(e[9]=o=>N()),color:"primary",label:t(n)("common.save")},null,8,["label"])])]),_:1},8,["visible","header"]),a(E,{visible:T.value,"onUpdate:visible":e[16]||(e[16]=o=>T.value=o),header:"修改打印机样式",position:"full"},{default:f(()=>[l("div",Pe,[l("div",he,[a(r,{label:t(n)("optionPages.order"),severity:"contrast",outlined:!t(p).printModel.value.order.selected,onClick:e[11]||(e[11]=o=>t(p).changePrintModelSelected(t(p).printModelType.order))},null,8,["label","outlined"]),a(r,{label:t(n)("common.takeaway"),severity:"contrast",outlined:!t(p).printModel.value.takeaway.selected,onClick:e[12]||(e[12]=o=>t(p).changePrintModelSelected(t(p).printModelType.takeaway))},null,8,["label","outlined"])]),l("label",ke,[z(m(t(n)("optionPages.printModel")+": "+t(p).printModel.value[t(p).getPrintModelSelected.value].index)+" ",1),t(p).isUsing.value?(S(),D(q,{key:0,severity:"success"},{default:f(()=>[z(m(t(n)("optionPages.using")),1)]),_:1})):U("",!0)]),l("div",Ve,m(t(p).getPrintModel()),1),l("div",Me,[a(r,{label:t(n)("optionPages.usePrintModel"),class:"w-full",onClick:e[13]||(e[13]=o=>t(p).savePrintModel())},null,8,["label"])])]),a(r,{icon:"pi pi-caret-right text-3xl",class:"mr-1",severity:"contrast",text:"",style:{position:"absolute",top:"calc(50% - 2rem)",right:"0"},onClick:e[14]||(e[14]=o=>t(p).changeTo(1))}),a(r,{icon:"pi pi-caret-left text-4xl",class:"ml-1",severity:"contrast",text:"",style:{position:"absolute",top:"calc(50% - 2rem)",left:"0"},onClick:e[15]||(e[15]=o=>t(p).changeTo(-1))})]),_:1},8,["visible"])],64)}}};export{Ge as default};
