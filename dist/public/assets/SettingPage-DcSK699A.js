import{s as ge}from"./index-OTGjaSNS.js";import{s as be}from"./index-DdKMzNyn.js";import{s as Pe}from"./index-LSKK50wT.js";import{s as _e}from"./index-ISK4nhHP.js";import{s as we}from"./index-ByQOO0kz.js";import{s as ye}from"./index-DW54tKiR.js";import{b as he}from"./index-DBEuPXgb.js";import{s as ke}from"./index-Du-pnkm2.js";import{q as xe,u as Ve,s as X,h as c,n as r,H as D,c as b,a as t,d as l,w as d,l as o,F as C,o as m,f as Y,e as F,t as u,E as H,C as De}from"./index-CR4ehUtA.js";import"./index-DyvfC_e2.js";import"./index-BpRYCbz2.js";import"./index-BiWO65Yw.js";const Ce={class:"w-full h-full flex justify-content-center overflow-auto"},Fe={class:"text-5xl ml-3"},Ie={class:"flex flex-column justify-content-center gap-3 p-3 h-full"},Se={class:"flex flex-wrap justify-content-between align-items-center"},Ue={class:"flex flex-wrap justify-content-between align-items-center"},je={class:"font-bold text-lg"},$e={class:"flex flex-wrap justify-content-between align-items-center"},Te={class:"font-bold text-lg"},Ae={class:"flex flex-wrap justify-content-between align-items-center"},We={class:"font-bold text-lg"},Be={class:"flex justify-content-between"},Oe={class:"flex flex-wrap justify-content-between align-items-center"},Ee={class:"font-bold text-lg"},He={class:"flex flex-wrap justify-content-between align-items-center"},Me={class:"font-bold text-lg"},Ne={class:"flex flex-wrap justify-content-between align-items-center"},Le={class:"font-bold text-lg"},qe={style:{"max-width":"75%"}},Ke={class:"flex flex-column"},Xe={class:"font-bold"},Ye={for:"on_label"},ze={for:"on_label"},Ge={class:"flex flex-column"},Je={class:"font-bold"},Qe={for:"on_label"},Re={for:"on_label"},Ze={key:1,class:"flex justify-content-between align-items-center m-1 gap-2"},et={class:"font-bold"},tt={for:"on_label"},lt={class:"flex flex-column"},nt={class:"flex justify-content-between align-items-center m-1 gap-2"},at={for:"on_label"},wt={__name:"SettingPage",setup(st){const{t:a}=xe(),z=Ve(),G=X(()=>!0),y=c(!1),I=c(!1),S=c(!1),U=c(),j=c(),k=c(),$=c(),x=c(r.getSettingsValue("delivery")),T=c(r.getSettingsValue("isFestiveDay")),A=c(r.getSettingsValue("checkIP")),_=c(r.getSettingsValue("useChildrenDiscount")),J=X(()=>r.customDishApi.getSimplyCustomDishes()),Q=r.developerMode,M=c(null),W=c(null),N=c(null),B=c(null),L=c(null),O=c(null);D(x,n=>{r.updateSetting("delivery",n,(e,i)=>{p(e,i)})}),D(T,n=>{r.updateSetting("isFestiveDay",n,(e,i)=>{p(e,i)})}),D(A,n=>{r.updateSetting("checkIP",n,(e,i)=>{p(e,i)})}),D(_,n=>{r.updateSetting("useChildrenDiscount",n,(e,i)=>{p(e,i)})});const R=n=>n.includes("Aleatória®")?a("common.Sushi"):n.includes("MY BOX")?a("common.my_box"):a(`common.${n}`);function Z(n){O.value=n.target.files[0],te()}function ee(){var n;(n=L.value)==null||n.click()}function te(){if(!O.value)return alert("请选择文件");const n=new FormData;n.append("file",O.value),r.dataTransfer.importUserDatas(n)}function le(n){W.value=n.target.files[0],ie()}function ne(){var n;(n=M.value)==null||n.click()}function ae(n){B.value=n.target.files[0],oe()}function se(){var n;(n=N.value)==null||n.click()}function oe(){if(!B.value)return alert("请选择文件");const n=new FormData;n.append("file",B.value),r.dataTransfer.importMenuDatas(n)}function ie(){if(!W.value)return alert("请选择文件");const n=new FormData;n.append("file",W.value),r.dataTransfer.importAppStateDatas(n)}function ue(){r.dataTransfer.downloadFromServer()}function re(n){r.customDishApi.updateCustomDishEnable(n)}function de(){y.value=!0,U.value=r.getPriceDataValue("weekPrice")}function ce(){I.value=!0,j.value=r.getPriceDataValue("childrenWeekPrice"),k.value=r.getPriceDataValue("childrenPricePercentage")}function fe(){S.value=!0,$.value=r.getPriceDataValue("timeInterval")}function ot(){}function me(){q(U)?(r.updatePricesData("weekPrice",(e,i)=>{p(e,i)}),y.value=!1):p(!1,"设置价格","价格不能为负")}function q(n){for(const e in n.value)for(const i in n.value[e])if(n.value[e][i]<0)return!1;return!0}function pe(){q(j)&&k.value>=0?(_.value?r.updatePricesData("childrenPricePercentage",(e,i)=>{p(e,i)}):r.updatePricesData("childrenWeekPrice",(e,i)=>{p(e,i)}),y.value=!1):p(!1,"设置价格","价格/折扣不能为负")}function it(){}function p(n,e,i=""){z.add({severity:n?"success":"error",summary:a(n?"common.success":"common.error"),detail:a("common.edit")+a("settingPage."+ve(e))+a("common."+(n?"success":"failed")+i),life:1e3})}function ve(n){switch(n){case"delivery":return"takeAwayFeature";case"isFestiveDay":return"takeAwayFeature";case"hasBibimbap":return"showBibimbap";case"hasBox":return"showBow";case"checkIP":return"wifiOrder";case"useChildrenDiscount":return"takeAwayFeature"}}return(n,e)=>{const i=ke,f=he,v=ye,h=we,V=_e,w=Pe,E=be,K=ge;return m(),b(C,null,[t("div",Ce,[l(v,{class:"flex flex-column h-full mt-1 lg:p-5 shadow-none",style:{"max-width":"1000px"}},{title:d(()=>[t("label",Fe,u(o(a)("settingPage.settings")),1),l(i)]),content:d(()=>[t("div",Ie,[o(Q)?(m(),Y(v,{key:0,class:"shadow-5"},{content:d(()=>[t("div",Se,[e[17]||(e[17]=t("label",{class:"font-bold text-lg"},u("数据导入导出"),-1)),l(i),e[18]||(e[18]=t("label",null,u("导出所有数据"),-1)),l(f,{label:"导出",onClick:e[0]||(e[0]=s=>ue())}),l(i),t("input",{type:"file",onChange:le,accept:".json",style:{display:"none"},ref_key:"appStatefileInput",ref:M},null,544),e[19]||(e[19]=t("label",null,u("导入AppState数据"),-1)),l(f,{label:"导入",onClick:ne}),l(i),t("input",{type:"file",onChange:ae,accept:".json",style:{display:"none"},ref_key:"menufileInput",ref:N},null,544),e[20]||(e[20]=t("label",null,u("导入Menu数据"),-1)),l(f,{label:"导入",onClick:se}),l(i),t("input",{type:"file",onChange:Z,accept:".json",style:{display:"none"},ref_key:"usersfileInput",ref:L},null,544),e[21]||(e[21]=t("label",null,u("导入Users数据"),-1)),l(f,{label:"导入",onClick:ee})])]),_:1})):F("",!0),l(v,{class:"shadow-5"},{content:d(()=>[t("div",Ue,[t("label",je,u(o(a)("settingPage.takeAwayFeature")),1),l(h,{modelValue:x.value,"onUpdate:modelValue":e[1]||(e[1]=s=>x.value=s),disabled:G.value},null,8,["modelValue","disabled"]),l(i),t("label",null,u(o(a)("settingPage.takeAwayFeatureOn")),1)])]),_:1}),x.value?(m(),Y(v,{key:1,class:"shadow-5"},{content:d(()=>[t("div",$e,[t("label",Te,u(o(a)("settingPage.setPuckup.title")),1),l(i),t("label",null,u(o(a)("settingPage.setPuckup.timeInterval")),1),l(f,{label:o(a)("common.edit"),onClick:e[2]||(e[2]=s=>fe())},null,8,["label"])])]),_:1})):F("",!0),l(v,{class:"shadow-5"},{content:d(()=>[t("div",Ae,[t("label",We,u(o(a)("settingPage.useHolidayPrice")),1),l(h,{modelValue:T.value,"onUpdate:modelValue":e[3]||(e[3]=s=>T.value=s)},null,8,["modelValue"]),l(i),t("label",null,u(o(a)("settingPage.useHolidayPriceOn")),1)])]),_:1}),l(v,{class:"shadow-5"},{title:d(()=>[e[22]||(e[22]=De(" 自定义菜单 ",-1)),l(i)]),content:d(()=>[(m(!0),b(C,null,H(J.value,s=>(m(),b("div",null,[t("div",Be,[t("span",null,u(R(s.name)),1),l(h,{modelValue:s.enable,"onUpdate:modelValue":[g=>s.enable=g,g=>re(s)]},null,8,["modelValue","onUpdate:modelValue"])]),l(i)]))),256))]),_:1}),l(v,{class:"shadow-5"},{content:d(()=>[t("div",Oe,[t("label",Ee,u(o(a)("settingPage.wifiOrder")),1),l(h,{modelValue:A.value,"onUpdate:modelValue":e[4]||(e[4]=s=>A.value=s)},null,8,["modelValue"]),l(i),t("label",null,u(o(a)("settingPage.wifiOrderOn")),1)])]),_:1}),l(v,{class:"shadow-5"},{content:d(()=>[t("div",He,[t("label",Me,u(o(a)("settingPage.setPrice")),1),l(i),t("label",null,u(o(a)("settingPage.setPriceOn")),1),l(f,{label:o(a)("common.edit"),onClick:e[5]||(e[5]=s=>de())},null,8,["label"])])]),_:1}),l(v,{class:"shadow-5"},{content:d(()=>[t("div",Ne,[t("label",Le,u(o(a)("settingPage.setChildrenPrice")),1),l(i),t("label",null,u(o(a)("settingPage.setChildrenPriceOn1")),1),l(h,{modelValue:_.value,"onUpdate:modelValue":e[6]||(e[6]=s=>_.value=s)},null,8,["modelValue"]),l(i),t("label",qe,u(o(a)("settingPage.setChildrenPriceOn2")),1),l(f,{label:o(a)("common.edit"),onClick:e[7]||(e[7]=s=>ce())},null,8,["label"])])]),_:1})])]),_:1})]),l(E,{visible:y.value,"onUpdate:visible":e[9]||(e[9]=s=>y.value=s),header:o(a)("settingPage.editWeekPrice"),onHide:e[10]||(e[10]=s=>void 0)},{default:d(()=>[t("div",Ke,[(m(!0),b(C,null,H(U.value,(s,g)=>(m(),b("div",{key:g,class:"flex justify-content-between m-1 gap-2"},[t("div",null,[t("label",Xe,u(o(a)("settingPage.week."+g))+":",1)]),t("div",null,[l(w,{variant:"on"},{default:d(()=>[l(V,{type:"number",modelValue:s.lunch,"onUpdate:modelValue":P=>s.lunch=P,class:"w-full"},null,8,["modelValue","onUpdate:modelValue"]),t("label",Ye,u(o(a)("settingPage.lunch")),1)]),_:2},1024)]),t("div",null,[l(w,{variant:"on"},{default:d(()=>[l(V,{type:"number",modelValue:s.dinner,"onUpdate:modelValue":P=>s.dinner=P,class:"w-full"},null,8,["modelValue","onUpdate:modelValue"]),t("label",ze,u(o(a)("settingPage.dinner")),1)]),_:2},1024)])]))),128)),l(f,{label:o(a)("common.save"),onClick:e[8]||(e[8]=s=>me())},null,8,["label"])])]),_:1},8,["visible","header"]),l(E,{visible:I.value,"onUpdate:visible":e[13]||(e[13]=s=>I.value=s),header:o(a)("settingPage.editChildrenWeekPrice")},{default:d(()=>[t("div",Ge,[_.value?F("",!0):(m(!0),b(C,{key:0},H(j.value,(s,g)=>(m(),b("div",{key:g,class:"flex justify-content-between align-items-center m-1 gap-2"},[t("div",null,[t("label",Je,u(o(a)("settingPage.week."+g))+":",1)]),t("div",null,[l(w,{variant:"on"},{default:d(()=>[l(V,{type:"number",modelValue:s.lunch,"onUpdate:modelValue":P=>s.lunch=P,class:"w-full"},null,8,["modelValue","onUpdate:modelValue"]),t("label",Qe,u(o(a)("settingPage.lunch")),1)]),_:2},1024)]),t("div",null,[l(w,{variant:"on"},{default:d(()=>[l(V,{type:"number",modelValue:s.dinner,"onUpdate:modelValue":P=>s.dinner=P,class:"w-full"},null,8,["modelValue","onUpdate:modelValue"]),t("label",Re,u(o(a)("settingPage.dinner")),1)]),_:2},1024)])]))),128)),_.value?(m(),b("div",Ze,[t("div",null,[t("label",et,u(o(a)("settingPage.childrenPricePercentage"))+":",1)]),t("div",null,[l(w,{variant:"on"},{default:d(()=>[l(K,{type:"number",modelValue:k.value,"onUpdate:modelValue":e[11]||(e[11]=s=>k.value=s),class:"w-full",suffix:" %"},null,8,["modelValue"]),t("label",tt,u(o(a)("settingPage.childrenPricePercentage")),1)]),_:1})])])):F("",!0),l(f,{class:"mt-2",label:o(a)("common.save"),onClick:e[12]||(e[12]=s=>pe())},null,8,["label"])])]),_:1},8,["visible","header"]),l(E,{visible:S.value,"onUpdate:visible":e[16]||(e[16]=s=>S.value=s),header:o(a)("settingPage.setPuckup.timeInterval")},{default:d(()=>[t("div",lt,[t("div",nt,[l(w,{variant:"on"},{default:d(()=>[l(K,{type:"number",modelValue:$.value,"onUpdate:modelValue":e[14]||(e[14]=s=>$.value=s),class:"w-full",suffix:o(a)("common.minute")},null,8,["modelValue","suffix"]),t("label",at,u(o(a)("settingPage.setPuckup.timeInterval")),1)]),_:1})]),l(f,{class:"mt-2",label:o(a)("common.save"),onClick:e[15]||(e[15]=s=>void 0)},null,8,["label"])])]),_:1},8,["visible","header"])],64)}}};export{wt as default};
