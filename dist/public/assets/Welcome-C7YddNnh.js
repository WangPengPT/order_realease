import{s as pe,_ as ve,P as ge}from"./pagination-CLSxo8LA.js";import{s as he}from"./index-CUzV6lR2.js";import{u as Y,r as v,c as N,a,w as _e,o as Z,n as be,C as we,b as xe,d as ye,m as w,e as ke,f as i,g as r,h as s,i as O,j as c,k as l,l as z,t as d,F as x,p as S,q as n,s as E,v as j}from"./index-oqSstbDx.js";import{s as h}from"./index-Cwv35lhU.js";import{s as Ce,a as $e,b as Ie,c as Pe,S as Ne,d as Se}from"./pagination-BRd5UI4T.js";import{s as Fe,a as Le}from"./index-BCy8LvGU.js";import{s as Ve}from"./index-C_MZjiPp.js";import{_ as Be,c as A}from"./_plugin-vue_export-helper-vSIagneg.js";import"./index-C9NIKNCP.js";import"./index-B9FgCnJt.js";const Oe=["src"],Ae=["onClick"],Re=["src"],Te={class:"absolute top-0 border-0 right-0 p-2 flex flex-column flex align-items-center"},Ue={key:0},De={class:"m-3 max-w-screen"},Ee={class:z(["w-full","p-4"])},je=["src"],ze={key:0,class:"text-center p-1"},qe={key:1,class:"text-center p-1"},Me={class:"flex flex-column justify-center"},Ge={key:0,class:"text-center"},He={key:1,class:"text-center"},We={class:"flex w-full"},Xe={class:"flex flex-column"},Je={class:"w-full text-sm break-words px-2",style:{"white-space":"pre-wrap"}},Qe=["src"],Ke={class:"pt-3 pb-3"},Ye={class:"flex flex-row gap-2"},Ze={class:"border-400 border-round border-1 p-3"},et={class:"text-center font-bold"},tt={key:0,class:"w-full overflow-hidden"},st=["src"],lt={class:"w-full overflow-hidden",style:{"aspect-ratio":"2 / 1.5"}},at=["src"],ot={class:"font-bold"},nt={class:"flex flex-column"},it={class:"flex flex-row justify-content-between w-full"},rt={key:0,class:"fixed right-0 bottom-0 p-4",style:{"z-index":"2"}},ut={class:"mt-2"},ct={class:"flex justify-content-end mt-2"},dt={__name:"Welcome",setup(mt){const y=[{label:"pt",imagePath:"flags/pt.png"},{label:"en",imagePath:"flags/en.png"},{label:"zh",imagePath:"flags/zh.png"}],q=ke(),ee=ye(),{locale:k}=Y(),{t:m}=Y(),g=v(null),F=v(!0),M=v(),G=v(""),te=N(()=>a.getShopInfo("restaurantName")),u=v(void 0),R=N(()=>a.shopInfo.value.instagramUrl);function se(){const e=A.getCookie("language");e&&(k.value=e)}let _=null;_e(()=>[a.currentPage.value,a.addr.value],([e,t])=>{var p,$,I;u.value=e,($=(p=u.value)==null?void 0:p.data)!=null&&$.logoPath&&((I=u.value)!=null&&I.imagesPath)&&(G.value=a.pathFormated(u.value.data.logoPath.src,u.value.imagesPath))},{immediate:!0}),Z(async()=>{var e;await be(),_=new IntersectionObserver(t=>{t.forEach(p=>{F.value=p.isIntersecting})},{threshold:.1}),(e=g.value)!=null&&e.$el&&_.observe(g.value.$el)}),Z(async()=>{var e;a.params=a.getQueryParams(),a.params.table?a.params.table=we.SimpleDecode(a.params.table):a.params.table=void 0,se(),a.initMenu(!0),_=new IntersectionObserver(t=>{t.forEach(p=>{p.isIntersecting?F.value=!0:F.value=!1})},{threshold:.1}),(e=g.value)!=null&&e.$el&&_.observe(g.value.$el)}),xe(()=>{var e;_&&((e=g.value)!=null&&e.$el)&&_.unobserve(g.value.$el)});const le=N(()=>{const e="/";switch(k.value.toLowerCase()){case"pt":return e+y[0].imagePath;case"en":return e+y[1].imagePath;case"zh":return e+y[2].imagePath;default:return e+y[1].imagePath}});function b(e){return e[`text_${k.value.toLowerCase()}`]}const ae=Date.now(),H=A.getCookie("login_time");let T;H&&(T=JSON.parse(H));const oe=N(()=>y.filter(e=>e.label!==k.value.toLowerCase()).map(e=>({...e,command:()=>{k.value=e.label,ne(e.label)}})));function ne(e){A.setCookie("language",e)}function U(e){typeof e=="string"&&/^(https?:\/\/)/i.test(e)?window.open(e,"_blank"):console.warn("无效的 URL:",e)}function ie(){U(R.value)}const re=e=>{M.value.toggle(e)};T&&(ae-T>60*5*1e3?A.clearAllCookies():D());function D(){const e=ee.query.table;if(!a.permissionsControl.value.order||!a.settings.value.order){w.show_warn(m("notification.orderClosed"));return}q.push({path:"/table",query:{table:e}})}function ue(){a.currentTableId.value=void 0,a.params.table=void 0,q.push("/takeReserve")}const ce=N(()=>[{label:m("common.options"),items:[{label:m("common.pay"),icon:"pi pi-wallet",command:()=>{de()}},{label:m("common.call"),icon:"pi pi-user-plus",command:()=>{a.send_cmd(a.getTable(),{cmd:"call"},e=>{e.success?w.show_info(m("notification.call_msg")):w.show_info(e.data)})}}]}]);function W(e){return u.value.data.options[e]?"font-bold":""}const L=v(!1),V=v(),C=v();function de(){L.value=!0}function me(){e(V.value)?a.send_cmd(a.getTable(),{cmd:"pay",nif:V.value,note:C.value},t=>{t.success?(w.show_info(m("notification.pay_msg")),L.value=!1):w.show_error(m("common.failed"))}):w.show_warn(m("notification.cancel_msg"));function e(t){return!t||t.toString().length===9||t.toString().length===0}}function fe(){C.value&&(C.value=void 0)}return(e,t)=>{var p,$,I,X,J,Q;return n(),i(x,null,[r(l(pe),{model:oe.value,direction:"down",transitionDelay:80,class:"absolute top-0 left-0 border-0"},{button:c(({toggleCallback:o})=>[r(l(h),{outlined:"",onClick:o,class:"custom-clean-button"},{default:c(()=>[s("img",{src:le.value,style:{width:"38px",height:"38px"}},null,8,Oe)]),_:2},1032,["onClick"])]),item:c(({item:o,toggleCallback:P})=>[s("div",{class:"flex flex-col items-center justify-between",onClick:P},[s("img",{src:o.imagePath,alt:"lang",style:{width:"38px",height:"38px"}},null,8,Re)],8,Ae)]),_:1},8,["model"]),s("div",Te,[s("div",null,[r(l(h),{icon:"pi pi-bell",rounded:"","aria-label":"Filter",onClick:re,"aria-haspopup":"true","aria-controls":"overlay_menu",size:"small",style:{width:"42px",height:"42px"}}),r(l(he),{ref_key:"menu",ref:M,id:"overlay_menu",model:ce.value,popup:!0},null,8,["model"])]),R.value&&R.value.trim()!==""?(n(),i("div",Ue,[r(l(h),{icon:"pi pi-instagram",class:"custom-clean-button",onClick:ie})])):O("",!0)]),s("div",De,[s("div",Ee,[s("img",{src:G.value,alt:"Logo",class:"max-w-6rem h-auto w-full mx-auto block"},null,8,je),($=(p=u.value)==null?void 0:p.data)!=null&&$.restaurantName?(n(),i("h3",ze,d((X=(I=u.value)==null?void 0:I.data)==null?void 0:X.restaurantName),1)):(n(),i("h3",qe,d(te.value),1)),s("div",Me,[l(a).testEnvironment.value?(n(),i("h2",Ge,d("DEMO"))):O("",!0),l(a).testEnvironment.value?(n(),i("span",He,d(l(m)("home.demoDescription")),1)):O("",!0)])]),s("div",We,[r(l(Ce),{class:"w-full max-w-xl mx-auto"},{default:c(()=>{var o,P;return[(n(!0),i(x,null,S((P=(o=u.value)==null?void 0:o.data)==null?void 0:P.titles,(f,K)=>(n(),E(l($e),{value:K},{default:c(()=>[r(l(Ie),null,{default:c(()=>[j(d(b(f.title)),1)]),_:2},1024),r(l(Pe),{class:"p-1"},{default:c(()=>[s("div",Xe,[s("div",Je,d(b(f.description)),1),s("img",{src:l(a).pathFormated(f.image.src,u.value.imagesPath),class:"max-w-5rem h-auto block mr-auto p-1 invert-image"},null,8,Qe)])]),_:2},1024)]),_:2},1032,["value"]))),256))]}),_:1})]),s("div",Ke,[s("div",Ye,[r(l(h),{onClick:t[0]||(t[0]=o=>D()),class:"w-full font-bold",style:{"border-radius":"20px"},ref_key:"orderButtonRef",ref:g},{default:c(()=>[j(d(e.$t("common.eatHere")),1)]),_:1},512),r(l(h),{onClick:t[1]||(t[1]=o=>ue()),class:"w-full font-bold",style:{"border-radius":"20px"}},{default:c(()=>[j(d(e.$t("common.takeOrReserve")),1)]),_:1})])]),(n(!0),i(x,null,S((Q=(J=u.value)==null?void 0:J.data)==null?void 0:Q.frames,(o,P)=>(n(),i("div",null,[s("div",Ze,[(n(!0),i(x,null,S(o,(f,K)=>(n(),i("div",null,[s("h1",et,d(b(f.title)),1),f.images.length<=1?(n(),i("div",tt,[s("img",{src:l(a).pathFormated(f.images[0].src,u.value.imagesPath),class:"w-full"},null,8,st)])):(n(),E(l(Se),{key:1,"slides-per-view":1,loop:!0,class:"w-full",modules:[l(ge)],pagination:{clickable:!0}},{default:c(()=>[(n(!0),i(x,null,S(f.images,(B,ft)=>(n(),E(l(Ne),null,{default:c(()=>[s("div",lt,[s("img",{src:l(a).pathFormated(B.src,u.value.imagesPath),class:"w-full h-full",style:{"object-fit":"cover"}},null,8,at)])]),_:2},1024))),256))]),_:2},1032,["modules"])),s("h4",ot,d(b(f.subtitle)),1),(n(!0),i(x,null,S(f.descriptions,B=>(n(),i("div",null,[s("div",nt,[s("div",it,[s("span",{class:z(W(0))},d(b(B.left)),3),s("span",{class:z(W(1))},d(b(B.right)),3)])])]))),256))]))),256))]),t[9]||(t[9]=s("div",{class:"p-4"},null,-1))]))),256))]),s("div",{class:"absoluto top-0 text-center text-xs p-2 underline cursor-pointer",onClick:t[2]||(t[2]=o=>U("https://5am3eq-wc.myshopify.com/"))}," ©2025 XIAOXIONG® v1.1.114 "),s("div",{class:"absoluto top-0 text-center text-xs p-2",onClick:t[3]||(t[3]=o=>U("https://5am3eq-wc.myshopify.com/"))},t[10]||(t[10]=[s("img",{src:ve,style:{width:"7rem"}},null,-1)])),F.value?O("",!0):(n(),i("div",rt,[r(l(h),{rounded:"","aria-label":"Star",onClick:t[4]||(t[4]=o=>D()),class:"w-full font-bold p-button-lg shadow-6"},{default:c(()=>t[11]||(t[11]=[s("span",{class:"material-icons text-5xl"},"restaurant",-1)])),_:1,__:[11]})])),r(l(Fe),{visible:L.value,"onUpdate:visible":t[8]||(t[8]=o=>L.value=o),header:"结账",class:"flex flex-column",modal:!0,dismissableMask:!0,onHide:fe},{default:c(()=>[s("div",null,[t[12]||(t[12]=s("label",null,"NIF:",-1)),r(l(Ve),{modelValue:V.value,"onUpdate:modelValue":t[5]||(t[5]=o=>V.value=o),inputId:"withoutgrouping",useGrouping:!1,fluid:"",class:"w-full m-1"},null,8,["modelValue"])]),s("div",ut,[s("label",null,d(e.$t("common.note"))+":",1),r(l(Le),{type:"text",modelValue:C.value,"onUpdate:modelValue":t[6]||(t[6]=o=>C.value=o),class:"w-full m-1"},null,8,["modelValue"])]),s("div",ct,[r(l(h),{label:l(m)("common.send"),onClick:t[7]||(t[7]=o=>me())},null,8,["label"])])]),_:1},8,["visible"])],64)}}},Ct=Be(dt,[["__scopeId","data-v-094ed04b"]]);export{Ct as default};
