import{s as K}from"./index-ph7f-Bih.js";import{c as X,s as ee,a as te}from"./index-CFt--O9r.js";import{s as le,a as ae,b as oe,c as se}from"./index-CSm5vaqA.js";import{s as ne}from"./index-DTyyAbml.js";import{s as re}from"./index-CcbygsGK.js";import{b as ie}from"./index-CaW9szM_.js";import{q as ue,h as p,n as T,c as $,d as r,a as _,w as u,e as S,t as V,l as Q,j as de,o as i,F as N,E as Y,f as x,C as F}from"./index-BShNAIhh.js";import"./index-QIG-zb-E.js";import"./index-BaW51Udu.js";import"./index-aw8HYO3P.js";import"./index-Br-UpKLP.js";import"./index-Dfd85u33.js";import"./index-BK0Kbx9n.js";import"./index-DPWVLdbS.js";import"./index-BjYwmhV5.js";const pe={class:"flex flex-column w-full",style:{position:"fixed",top:"0",left:"0"}},ce={class:"flex flex-wrap justify-content-center align-items-center gap-1 ml-2"},ve={class:"card flex flex-column",style:{height:"calc(100vh - 200px)"}},fe={key:0,style:{padding:"0.5rem 1rem"}},me={class:"text-center py-5"},ge={class:"mt-3 text-gray-500"},be=2025,Le={__name:"OrderQuantity",setup(ye){const{t:l}=ue(),I=de(),c=p(T.menuData.value.filter(t=>t.category));R();const U=p([{id:0,label:l("optionPages.noZero")},{id:1,label:l("optionPages.onlyZero")}]),w=p(),A=new Date,b=A.getFullYear(),O=A.getMonth()+1,B=A.getDate(),L=p([{id:0,value:0,label:l("optionPages.sales")}]);Z();function Z(){for(let t=be;t<=b;t++)L.value.push({id:t,value:t,label:t})}const C=p([]);z();function z(){const t=["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"];C.value.push({id:0,value:"yearTotal",label:l("optionPages.year")+l("optionPages.sales")});for(let e=0;e<t.length;e++)C.value.push({id:e+1,value:t[e],label:e+1+" - "+l(`optionPages.months[${e}]`).toUpperCase()})}const E=[[{id:0,label:l("optionPages.month")+l("optionPages.sales")},...Array.from({length:28},(t,e)=>({id:e+1,label:e+1}))],[{id:0,label:l("optionPages.month")+l("optionPages.sales")},...Array.from({length:29},(t,e)=>({id:e+1,label:e+1}))],[{id:0,label:l("optionPages.month")+l("optionPages.sales")},...Array.from({length:30},(t,e)=>({id:e+1,label:e+1}))],[{id:0,label:l("optionPages.month")+l("optionPages.sales")},...Array.from({length:31},(t,e)=>({id:e+1,label:e+1}))]],M=p([]);j(b,O);function j(t,e){if(e<1||e>12)return 0;const s=[3,t&&(t%4===0&&t%100!==0||t%400===0)?1:0,3,2,3,2,3,3,2,3,2,3];M.value=E[s[e-1]]}async function R(){try{await T.refreshMenu(),k(b,O,B)}catch(t){console.error("获取销售量失败:",t),toast.add({severity:"error",summary:l("common.error"),detail:l("optionPages.saleFailMsg"),life:3e3})}}function k(t,e,a){d.value!==e&&j(t,e),v.value=t,d.value=e,a=a|0,c.value=[],H(c,t,e,a,()=>{W()})}function H(t,e,a,s,y){e==0||e==b&&a==0||e==b&&a==O&&s==0||e==b&&a==O&&s==B?t.value=T.menuData.value:(a===0&&(s=0),T.getOrderQuantityWithDate(t,e,a,s,()=>{y()})),y(),c.value=c.value.filter(h=>h.category)}function W(){var y,h;const t=v.value,e=d.value,a=f.value.id,s=[];for(let P=0;P<c.value.length;P++){const n=c.value[P];let m=0;t||(m=n.orders|0),t&&!e&&(m=n.yearlyOrders|0),t&&e&&!a&&(m=n.monthlyOrders|0),t&&e&&a&&(m=n.dailyOrders|0),n.filteredOrders=m,w.value?(!((y=w.value)!=null&&y.id)&&n.filteredOrders||(h=w.value)!=null&&h.id&&!n.filteredOrders)&&s.push(n):s.push(n)}c.value=s}const v=p(b),d=p(O),f=p(M.value.find(t=>t.id===B));return(t,e)=>{const a=ie,s=re,y=ne,h=oe,P=ae,n=se,m=le,q=X,D=te,G=ee,J=K;return i(),$("div",pe,[r(y,{class:"bg-primary text-white p-2"},{start:u(()=>[r(a,{icon:"pi pi-arrow-left",class:"p-button-text text-white",label:t.$t("optionPages.home"),onClick:e[0]||(e[0]=o=>Q(I).push("/"))},null,8,["label"]),_("div",ce,[r(s,{modelValue:w.value,"onUpdate:modelValue":e[1]||(e[1]=o=>w.value=o),options:U.value,optionLabel:"label",unselectable:!1,onChange:e[2]||(e[2]=o=>k(v.value,d.value,f.value.id))},null,8,["modelValue","options"])])]),_:1}),_("div",null,[r(m,{value:v.value},{default:u(()=>[r(P,null,{default:u(()=>[(i(!0),$(N,null,Y(L.value,o=>(i(),x(h,{key:o.id,value:o.id,onClick:g=>k(o.id,d.value,f.value.id)},{default:u(()=>[F(V(o.label),1)]),_:2},1032,["value","onClick"]))),128))]),_:1}),(i(!0),$(N,null,Y(L.value,o=>(i(),x(n,{key:o.id,value:o.id},{default:u(()=>[v.value!==0?(i(),x(m,{key:0,value:d.value,scrollable:""},{default:u(()=>[r(P,null,{default:u(()=>[(i(!0),$(N,null,Y(C.value,g=>(i(),x(h,{key:g.id,value:g.id,onClick:he=>k(o.id,g.id,f.value.id)},{default:u(()=>[F(V(g.label),1)]),_:2},1032,["value","onClick"]))),128))]),_:2},1024),(i(!0),$(N,null,Y(C.value,g=>(i(),x(n,{key:g.id,value:g.id},null,8,["value"]))),128))]),_:2},1032,["value"])):S("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["value"]),_("div",ve,[v.value&&d.value?(i(),$("div",fe,[r(q,{modelValue:f.value,"onUpdate:modelValue":e[3]||(e[3]=o=>f.value=o),options:M.value,optionLabel:"label",placeholder:"选择日期",onChange:e[4]||(e[4]=o=>k(v.value,d.value,f.value.id))},null,8,["modelValue","options"]),_("label",null,V(Q(l)("optionPages.dayy")),1)])):S("",!0),r(G,{value:c.value,stripedRows:"",scrollable:"",scrollHeight:"flex",paginator:"",rows:10,rowsPerPageOptions:[5,10,20,50],tableStyle:"min-width: 50rem"},{empty:u(()=>[_("div",me,[e[5]||(e[5]=_("i",{class:"pi pi-search",style:{"font-size":"3rem",color:"#ccc"}},null,-1)),_("p",ge,V(Q(l)("optionPages.noSale")),1)])]),default:u(()=>[r(D,{field:"id",header:"ID",sortable:""}),r(D,{field:"category",header:t.$t("optionPages.category"),sortable:""},null,8,["header"]),r(D,{field:"name",header:t.$t("optionPages.name")},null,8,["header"]),r(D,{field:"filteredOrders",header:(v.value===0?"":d.value===0?t.$t("optionPages.year"):f.value.id===0?t.$t("optionPages.month"):t.$t("optionPages.day"))+t.$t("optionPages.sales"),sortable:""},null,8,["header"])]),_:1},8,["value"])])]),r(J)])}}};export{Le as default};
