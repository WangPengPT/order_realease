import{s as pe,_ as ve,P as ge}from"./pagination-B-e68Tk3.js";import{s as he}from"./index-C4EfP9NY.js";import{u as Y,r as v,c as S,a,w as _e,o as Z,n as be,C as xe,b as we,d as R,e as ye,m as x,f as ke,g as i,h as r,i as s,j as F,k as u,l,p as E,t as c,F as w,q as L,s as n,v as z,x as D}from"./index-BjK2mYqU.js";import{s as g}from"./index-CJnrwy5F.js";import{s as Ce,a as $e,b as Ie,c as Pe,S as Ne,d as Se}from"./pagination-D8nikC58.js";import{s as Fe,a as Le}from"./index-CqnxA1W-.js";import{s as Ve}from"./index-DiBeMhv9.js";import{_ as Be}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-dCzKvQu_.js";import"./index-DVeGLsfw.js";const Oe=["src"],Ae=["onClick"],Re=["src"],Te={class:"absolute top-0 border-0 right-0 p-2 flex flex-column flex align-items-center"},Ue={key:0},je={class:"m-3 max-w-screen"},ze={class:E(["w-full","p-4"])},De=["src"],Ee={key:0,class:"text-center p-1"},qe={key:1,class:"text-center p-1"},Me={class:"flex flex-column justify-center"},Ge={key:0,class:"text-center"},He={key:1,class:"text-center"},We={class:"flex w-full"},Xe={class:"flex flex-column"},Je={class:"w-full text-sm break-words px-2",style:{"white-space":"pre-wrap"}},Qe=["src"],Ke={key:0,class:"flex justify-content-end"},Ye={class:"pt-3 pb-3"},Ze={class:"flex flex-row gap-2"},et={class:"border-400 border-round border-1 p-3"},tt={class:"text-center font-bold"},st={key:0,class:"w-full overflow-hidden"},lt=["src"],at={class:"w-full overflow-hidden",style:{"aspect-ratio":"2 / 1.5"}},ot=["src"],nt={class:"font-bold"},it={class:"flex flex-column"},rt={class:"flex flex-row justify-content-between w-full"},ut={key:0,class:"fixed right-0 bottom-0 p-4",style:{"z-index":"2"}},ct={class:"mt-2"},dt={class:"flex justify-content-end mt-2"},mt={__name:"Welcome",setup(ft){const y=[{label:"pt",imagePath:"flags/pt.png"},{label:"en",imagePath:"flags/en.png"},{label:"zh",imagePath:"flags/zh.png"}],q=ke(),ee=ye(),{locale:k}=Y(),{t:f}=Y(),h=v(null),V=v(!0),M=v(),G=v(""),te=S(()=>a.getShopInfo("restaurantName")),d=v(void 0),T=S(()=>a.shopInfo.value.instagramUrl);function se(){const e=R.getCookie("language");e&&(k.value=e)}let _=null;_e(()=>[a.currentPage.value,a.addr.value],([e,t])=>{var p,$,I;d.value=e,($=(p=d.value)==null?void 0:p.data)!=null&&$.logoPath&&((I=d.value)!=null&&I.imagesPath)&&(G.value=a.pathFormated(d.value.data.logoPath.src,d.value.imagesPath))},{immediate:!0}),Z(async()=>{var e;await be(),_=new IntersectionObserver(t=>{t.forEach(p=>{V.value=p.isIntersecting})},{threshold:.1}),(e=h.value)!=null&&e.$el&&_.observe(h.value.$el)}),Z(async()=>{var e;a.params=a.getQueryParams(),a.params.table?a.params.table=xe.SimpleDecode(a.params.table):a.params.table=void 0,se(),a.initMenu(!0),_=new IntersectionObserver(t=>{t.forEach(p=>{p.isIntersecting?V.value=!0:V.value=!1})},{threshold:.1}),(e=h.value)!=null&&e.$el&&_.observe(h.value.$el)}),we(()=>{var e;_&&((e=h.value)!=null&&e.$el)&&_.unobserve(h.value.$el)});const le=S(()=>{const e="/";switch(k.value.toLowerCase()){case"pt":return e+y[0].imagePath;case"en":return e+y[1].imagePath;case"zh":return e+y[2].imagePath;default:return e+y[1].imagePath}});function b(e){return e[`text_${k.value.toLowerCase()}`]}const ae=Date.now(),H=R.getCookie("login_time");let U;H&&(U=JSON.parse(H));const oe=S(()=>y.filter(e=>e.label!==k.value.toLowerCase()).map(e=>({...e,command:()=>{k.value=e.label,ne(e.label)}})));function ne(e){R.setCookie("language",e)}function B(e){typeof e=="string"&&/^(https?:\/\/)/i.test(e)?window.open(e,"_blank"):console.warn("无效的 URL:",e)}function ie(){B(T.value)}const re=e=>{M.value.toggle(e)};U&&(ae-U>60*5*1e3?R.clearAllCookies():j());function j(){const e=ee.query.table;if(!a.permissionsControl.value.order||!a.settings.value.order){x.show_warn(f("notification.orderClosed"));return}q.push({path:"/table",query:{table:e}})}function ue(){a.currentTableId.value=void 0,a.params.table=void 0,q.push("/takeReserve")}const ce=S(()=>[{label:f("common.options"),items:[{label:f("common.pay"),icon:"pi pi-wallet",command:()=>{de()}},{label:f("common.call"),icon:"pi pi-user-plus",command:()=>{a.send_cmd(a.getTable(),{cmd:"call"},e=>{e.success?x.show_info(f("notification.call_msg")):x.show_info(e.data)})}}]}]);function W(e){return d.value.data.options[e]?"font-bold":""}const O=v(!1),A=v(),C=v();function de(){O.value=!0}function me(){e(A.value)?a.send_cmd(a.getTable(),{cmd:"pay",nif:A.value,note:C.value},t=>{t.success?(x.show_info(f("notification.pay_msg")),O.value=!1):x.show_error(f("common.failed"))}):x.show_warn(f("notification.cancel_msg"));function e(t){return!t||t.toString().length===9||t.toString().length===0}}function fe(){C.value&&(C.value=void 0)}return(e,t)=>{var p,$,I,X,J,Q;return n(),i(w,null,[r(l(pe),{model:oe.value,direction:"down",transitionDelay:80,class:"absolute top-0 left-0 border-0"},{button:u(({toggleCallback:o})=>[r(l(g),{outlined:"",onClick:o,class:"custom-clean-button"},{default:u(()=>[s("img",{src:le.value,style:{width:"38px",height:"38px"}},null,8,Oe)]),_:2},1032,["onClick"])]),item:u(({item:o,toggleCallback:P})=>[s("div",{class:"flex flex-col items-center justify-between",onClick:P},[s("img",{src:o.imagePath,alt:"lang",style:{width:"38px",height:"38px"}},null,8,Re)],8,Ae)]),_:1},8,["model"]),s("div",Te,[s("div",null,[r(l(g),{icon:"pi pi-bell",rounded:"","aria-label":"Filter",onClick:re,"aria-haspopup":"true","aria-controls":"overlay_menu",size:"small",style:{width:"42px",height:"42px"}}),r(l(he),{ref_key:"menu",ref:M,id:"overlay_menu",model:ce.value,popup:!0},null,8,["model"])]),T.value&&T.value.trim()!==""?(n(),i("div",Ue,[r(l(g),{icon:"pi pi-instagram",class:"custom-clean-button",onClick:ie})])):F("",!0)]),s("div",je,[s("div",ze,[s("img",{src:G.value,alt:"Logo",class:"max-w-6rem h-auto w-full mx-auto block"},null,8,De),($=(p=d.value)==null?void 0:p.data)!=null&&$.restaurantName?(n(),i("h3",Ee,c((X=(I=d.value)==null?void 0:I.data)==null?void 0:X.restaurantName),1)):(n(),i("h3",qe,c(te.value),1)),s("div",Me,[l(a).testEnvironment.value?(n(),i("h2",Ge,c("DEMO"))):F("",!0),l(a).testEnvironment.value?(n(),i("span",He,c(l(f)("home.demoDescription")),1)):F("",!0)])]),s("div",We,[r(l(Ce),{class:"w-full max-w-xl mx-auto"},{default:u(()=>{var o,P;return[(n(!0),i(w,null,L((P=(o=d.value)==null?void 0:o.data)==null?void 0:P.titles,(m,K)=>(n(),z(l($e),{value:K},{default:u(()=>[r(l(Ie),null,{default:u(()=>[D(c(b(m.title)),1)]),_:2},1024),r(l(Pe),{class:"p-1"},{default:u(()=>[s("div",Xe,[s("div",Je,c(b(m.description)),1),s("img",{src:l(a).pathFormated(m.image.src,d.value.imagesPath),class:"max-w-5rem h-auto block mr-auto p-1 invert-image"},null,8,Qe),m.title.text_zh.includes("怎么获得学生优惠")?(n(),i("div",Ke,[r(l(g),{onClick:t[0]||(t[0]=N=>B("https://xiaoxiongmarket.com/activity/29ca8401-6cd5-4bac-94f8-d5511c463e26")),text:""},{default:u(()=>t[10]||(t[10]=[s("div",{class:"flex flex-row"},[s("span",{class:"underline text-blue-600 text-sm"},c("活动页面")),s("i",{class:"pi pi-external-link text-blue-600 text-sm p-1"})],-1)])),_:1,__:[10]})])):F("",!0)])]),_:2},1024)]),_:2},1032,["value"]))),256))]}),_:1})]),s("div",Ye,[s("div",Ze,[r(l(g),{onClick:t[1]||(t[1]=o=>j()),class:"w-full font-bold",style:{"border-radius":"20px"},ref_key:"orderButtonRef",ref:h},{default:u(()=>[D(c(e.$t("common.eatHere")),1)]),_:1},512),r(l(g),{onClick:t[2]||(t[2]=o=>ue()),class:"w-full font-bold",style:{"border-radius":"20px"}},{default:u(()=>[D(c(e.$t("common.takeOrReserve")),1)]),_:1})])]),(n(!0),i(w,null,L((Q=(J=d.value)==null?void 0:J.data)==null?void 0:Q.frames,(o,P)=>(n(),i("div",null,[s("div",et,[(n(!0),i(w,null,L(o,(m,K)=>(n(),i("div",null,[s("h1",tt,c(b(m.title)),1),m.images.length<=1?(n(),i("div",st,[s("img",{src:l(a).pathFormated(m.images[0].src,d.value.imagesPath),class:"w-full"},null,8,lt)])):(n(),z(l(Se),{key:1,"slides-per-view":1,loop:!0,class:"w-full",modules:[l(ge)],pagination:{clickable:!0}},{default:u(()=>[(n(!0),i(w,null,L(m.images,(N,pt)=>(n(),z(l(Ne),null,{default:u(()=>[s("div",at,[s("img",{src:l(a).pathFormated(N.src,d.value.imagesPath),class:"w-full h-full",style:{"object-fit":"cover"}},null,8,ot)])]),_:2},1024))),256))]),_:2},1032,["modules"])),s("h4",nt,c(b(m.subtitle)),1),(n(!0),i(w,null,L(m.descriptions,N=>(n(),i("div",null,[s("div",it,[s("div",rt,[s("span",{class:E(W(0))},c(b(N.left)),3),s("span",{class:E(W(1))},c(b(N.right)),3)])])]))),256))]))),256))]),t[11]||(t[11]=s("div",{class:"p-4"},null,-1))]))),256))]),s("div",{class:"absoluto top-0 text-center text-xs p-2 underline cursor-pointer",onClick:t[3]||(t[3]=o=>B("https://5am3eq-wc.myshopify.com/"))}," ©2025 XIAOXIONG® v1.1.114 "),s("div",{class:"absoluto top-0 text-center text-xs p-2",onClick:t[4]||(t[4]=o=>B("https://5am3eq-wc.myshopify.com/"))},t[12]||(t[12]=[s("img",{src:ve,style:{width:"7rem"}},null,-1)])),V.value?F("",!0):(n(),i("div",ut,[r(l(g),{rounded:"","aria-label":"Star",onClick:t[5]||(t[5]=o=>j()),class:"w-full font-bold p-button-lg shadow-6"},{default:u(()=>t[13]||(t[13]=[s("span",{class:"material-icons text-5xl"},"restaurant",-1)])),_:1,__:[13]})])),r(l(Fe),{visible:O.value,"onUpdate:visible":t[9]||(t[9]=o=>O.value=o),header:"结账",class:"flex flex-column",modal:!0,dismissableMask:!0,onHide:fe},{default:u(()=>[s("div",null,[t[14]||(t[14]=s("label",null,"NIF:",-1)),r(l(Ve),{modelValue:A.value,"onUpdate:modelValue":t[6]||(t[6]=o=>A.value=o),inputId:"withoutgrouping",useGrouping:!1,fluid:"",class:"w-full m-1"},null,8,["modelValue"])]),s("div",ct,[s("label",null,c(e.$t("common.note"))+":",1),r(l(Le),{type:"text",modelValue:C.value,"onUpdate:modelValue":t[7]||(t[7]=o=>C.value=o),class:"w-full m-1"},null,8,["modelValue"])]),s("div",dt,[r(l(g),{label:l(f)("common.send"),onClick:t[8]||(t[8]=o=>me())},null,8,["label"])])]),_:1},8,["visible"])],64)}}},$t=Be(mt,[["__scopeId","data-v-579c17a7"]]);export{$t as default};
