import{g as Tt}from"./_commonjsHelpers-CqkleIqs.js";import{v as qe,B as ye,x as Te,y as ze,f as m,q as r,l as X,i as O,z as he,A as Z,D as ke,h as a,t as v,n as ue,u as fe,r as R,o as Ge,a as N,g as B,F as G,p as ne,k as i,j as H,E as Pe,s as be,m as le,e as ut,G as Ct,H as Dt,w as Be,c as ve,I as Le,J as It,R as ct,K as Ve,L as St,M as Ke,N as At,O as Se,P as Nt,Q as tt,S as dt,T as Bt,U as Pt,V as Ae,b as Lt,W as at,d as qt}from"./index-D6Nxg1IZ.js";import{s as ge,a as ft}from"./index-CPfYLVEo.js";import{s as Q,a as pt}from"./index-CTrDfwNC.js";import{D as te,c as re,s as st,a as zt}from"./index-Cb785Wnk.js";import{_ as Ce,a as Ue,b as We,c as Qe,s as Je,d as Ot,S as Et}from"./_plugin-vue_export-helper-DEr60vaA.js";import{s as Mt}from"./index-BPDyAFka.js";import{s as nt,a as Rt}from"./index-BpT4IJt9.js";import{c as ce}from"./cookie-CTJN0GZu.js";import{s as jt}from"./index-CDgtWjJb.js";import{s as ot}from"./index-C8eJf_GX.js";import{s as Vt}from"./index-DcOTowXw.js";var Fe={exports:{}},it;function Ft(){return it||(it=1,function(e){var t=function(){var o=String.fromCharCode,g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",f={};function c(u,_){if(!f[u]){f[u]={};for(var S=0;S<u.length;S++)f[u][u.charAt(S)]=S}return f[u][_]}var j={compressToBase64:function(u){if(u==null)return"";var _=j._compress(u,6,function(S){return g.charAt(S)});switch(_.length%4){default:case 0:return _;case 1:return _+"===";case 2:return _+"==";case 3:return _+"="}},decompressFromBase64:function(u){return u==null?"":u==""?null:j._decompress(u.length,32,function(_){return c(g,u.charAt(_))})},compressToUTF16:function(u){return u==null?"":j._compress(u,15,function(_){return o(_+32)})+" "},decompressFromUTF16:function(u){return u==null?"":u==""?null:j._decompress(u.length,16384,function(_){return u.charCodeAt(_)-32})},compressToUint8Array:function(u){for(var _=j.compress(u),S=new Uint8Array(_.length*2),y=0,b=_.length;y<b;y++){var z=_.charCodeAt(y);S[y*2]=z>>>8,S[y*2+1]=z%256}return S},decompressFromUint8Array:function(u){if(u==null)return j.decompress(u);for(var _=new Array(u.length/2),S=0,y=_.length;S<y;S++)_[S]=u[S*2]*256+u[S*2+1];var b=[];return _.forEach(function(z){b.push(o(z))}),j.decompress(b.join(""))},compressToEncodedURIComponent:function(u){return u==null?"":j._compress(u,6,function(_){return h.charAt(_)})},decompressFromEncodedURIComponent:function(u){return u==null?"":u==""?null:(u=u.replace(/ /g,"+"),j._decompress(u.length,32,function(_){return c(h,u.charAt(_))}))},compress:function(u){return j._compress(u,16,function(_){return o(_)})},_compress:function(u,_,S){if(u==null)return"";var y,b,z={},W={},U="",J="",V="",A=2,P=3,L=2,M=[],d=0,$=0,n;for(n=0;n<u.length;n+=1)if(U=u.charAt(n),Object.prototype.hasOwnProperty.call(z,U)||(z[U]=P++,W[U]=!0),J=V+U,Object.prototype.hasOwnProperty.call(z,J))V=J;else{if(Object.prototype.hasOwnProperty.call(W,V)){if(V.charCodeAt(0)<256){for(y=0;y<L;y++)d=d<<1,$==_-1?($=0,M.push(S(d)),d=0):$++;for(b=V.charCodeAt(0),y=0;y<8;y++)d=d<<1|b&1,$==_-1?($=0,M.push(S(d)),d=0):$++,b=b>>1}else{for(b=1,y=0;y<L;y++)d=d<<1|b,$==_-1?($=0,M.push(S(d)),d=0):$++,b=0;for(b=V.charCodeAt(0),y=0;y<16;y++)d=d<<1|b&1,$==_-1?($=0,M.push(S(d)),d=0):$++,b=b>>1}A--,A==0&&(A=Math.pow(2,L),L++),delete W[V]}else for(b=z[V],y=0;y<L;y++)d=d<<1|b&1,$==_-1?($=0,M.push(S(d)),d=0):$++,b=b>>1;A--,A==0&&(A=Math.pow(2,L),L++),z[J]=P++,V=String(U)}if(V!==""){if(Object.prototype.hasOwnProperty.call(W,V)){if(V.charCodeAt(0)<256){for(y=0;y<L;y++)d=d<<1,$==_-1?($=0,M.push(S(d)),d=0):$++;for(b=V.charCodeAt(0),y=0;y<8;y++)d=d<<1|b&1,$==_-1?($=0,M.push(S(d)),d=0):$++,b=b>>1}else{for(b=1,y=0;y<L;y++)d=d<<1|b,$==_-1?($=0,M.push(S(d)),d=0):$++,b=0;for(b=V.charCodeAt(0),y=0;y<16;y++)d=d<<1|b&1,$==_-1?($=0,M.push(S(d)),d=0):$++,b=b>>1}A--,A==0&&(A=Math.pow(2,L),L++),delete W[V]}else for(b=z[V],y=0;y<L;y++)d=d<<1|b&1,$==_-1?($=0,M.push(S(d)),d=0):$++,b=b>>1;A--,A==0&&(A=Math.pow(2,L),L++)}for(b=2,y=0;y<L;y++)d=d<<1|b&1,$==_-1?($=0,M.push(S(d)),d=0):$++,b=b>>1;for(;;)if(d=d<<1,$==_-1){M.push(S(d));break}else $++;return M.join("")},decompress:function(u){return u==null?"":u==""?null:j._decompress(u.length,32768,function(_){return u.charCodeAt(_)})},_decompress:function(u,_,S){var y=[],b=4,z=4,W=3,U="",J=[],V,A,P,L,M,d,$,n={val:S(0),position:_,index:1};for(V=0;V<3;V+=1)y[V]=V;for(P=0,M=Math.pow(2,2),d=1;d!=M;)L=n.val&n.position,n.position>>=1,n.position==0&&(n.position=_,n.val=S(n.index++)),P|=(L>0?1:0)*d,d<<=1;switch(P){case 0:for(P=0,M=Math.pow(2,8),d=1;d!=M;)L=n.val&n.position,n.position>>=1,n.position==0&&(n.position=_,n.val=S(n.index++)),P|=(L>0?1:0)*d,d<<=1;$=o(P);break;case 1:for(P=0,M=Math.pow(2,16),d=1;d!=M;)L=n.val&n.position,n.position>>=1,n.position==0&&(n.position=_,n.val=S(n.index++)),P|=(L>0?1:0)*d,d<<=1;$=o(P);break;case 2:return""}for(y[3]=$,A=$,J.push($);;){if(n.index>u)return"";for(P=0,M=Math.pow(2,W),d=1;d!=M;)L=n.val&n.position,n.position>>=1,n.position==0&&(n.position=_,n.val=S(n.index++)),P|=(L>0?1:0)*d,d<<=1;switch($=P){case 0:for(P=0,M=Math.pow(2,8),d=1;d!=M;)L=n.val&n.position,n.position>>=1,n.position==0&&(n.position=_,n.val=S(n.index++)),P|=(L>0?1:0)*d,d<<=1;y[z++]=o(P),$=z-1,b--;break;case 1:for(P=0,M=Math.pow(2,16),d=1;d!=M;)L=n.val&n.position,n.position>>=1,n.position==0&&(n.position=_,n.val=S(n.index++)),P|=(L>0?1:0)*d,d<<=1;y[z++]=o(P),$=z-1,b--;break;case 2:return J.join("")}if(b==0&&(b=Math.pow(2,W),W++),y[$])U=y[$];else if($===z)U=A+A.charAt(0);else return null;J.push(U),y[z++]=A+U.charAt(0),b--,A=U,b==0&&(b=Math.pow(2,W),W++)}}};return j}();e!=null?e.exports=t:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return t})}(Fe)),Fe.exports}var Ht=Ft();const He=Tt(Ht);var Kt=qe`
    .p-tag {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        background: dt('tag.primary.background');
        color: dt('tag.primary.color');
        font-size: dt('tag.font.size');
        font-weight: dt('tag.font.weight');
        padding: dt('tag.padding');
        border-radius: dt('tag.border.radius');
        gap: dt('tag.gap');
    }

    .p-tag-icon {
        font-size: dt('tag.icon.size');
        width: dt('tag.icon.size');
        height: dt('tag.icon.size');
    }

    .p-tag-rounded {
        border-radius: dt('tag.rounded.border.radius');
    }

    .p-tag-success {
        background: dt('tag.success.background');
        color: dt('tag.success.color');
    }

    .p-tag-info {
        background: dt('tag.info.background');
        color: dt('tag.info.color');
    }

    .p-tag-warn {
        background: dt('tag.warn.background');
        color: dt('tag.warn.color');
    }

    .p-tag-danger {
        background: dt('tag.danger.background');
        color: dt('tag.danger.color');
    }

    .p-tag-secondary {
        background: dt('tag.secondary.background');
        color: dt('tag.secondary.color');
    }

    .p-tag-contrast {
        background: dt('tag.contrast.background');
        color: dt('tag.contrast.color');
    }
`,Ut={root:function(t){var o=t.props;return["p-tag p-component",{"p-tag-info":o.severity==="info","p-tag-success":o.severity==="success","p-tag-warn":o.severity==="warn","p-tag-danger":o.severity==="danger","p-tag-secondary":o.severity==="secondary","p-tag-contrast":o.severity==="contrast","p-tag-rounded":o.rounded}]},icon:"p-tag-icon",label:"p-tag-label"},Wt=ye.extend({name:"tag",style:Kt,classes:Ut}),Qt={name:"BaseTag",extends:Te,props:{value:null,severity:null,rounded:Boolean,icon:String},style:Wt,provide:function(){return{$pcTag:this,$parentInstance:this}}};function xe(e){"@babel/helpers - typeof";return xe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xe(e)}function Jt(e,t,o){return(t=Gt(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function Gt(e){var t=Zt(e,"string");return xe(t)=="symbol"?t:t+""}function Zt(e,t){if(xe(e)!="object"||!e)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var g=o.call(e,t);if(xe(g)!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var we={name:"Tag",extends:Qt,inheritAttrs:!1,computed:{dataP:function(){return ze(Jt({rounded:this.rounded},this.severity,this.severity))}}},Xt=["data-p"];function Yt(e,t,o,g,h,f){return r(),m("span",Z({class:e.cx("root"),"data-p":f.dataP},e.ptmi("root")),[e.$slots.icon?(r(),X(ke(e.$slots.icon),Z({key:0,class:e.cx("icon")},e.ptm("icon")),null,16,["class"])):e.icon?(r(),m("span",Z({key:1,class:[e.cx("icon"),e.icon]},e.ptm("icon")),null,16)):O("",!0),e.value!=null||e.$slots.default?he(e.$slots,"default",{key:2},function(){return[a("span",Z({class:e.cx("label")},e.ptm("label")),v(e.value),17)]}):O("",!0)],16,Xt)}we.render=Yt;var ea=qe`
    .p-avatar {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: dt('avatar.width');
        height: dt('avatar.height');
        font-size: dt('avatar.font.size');
        background: dt('avatar.background');
        color: dt('avatar.color');
        border-radius: dt('avatar.border.radius');
    }

    .p-avatar-image {
        background: transparent;
    }

    .p-avatar-circle {
        border-radius: 50%;
    }

    .p-avatar-circle img {
        border-radius: 50%;
    }

    .p-avatar-icon {
        font-size: dt('avatar.icon.size');
        width: dt('avatar.icon.size');
        height: dt('avatar.icon.size');
    }

    .p-avatar img {
        width: 100%;
        height: 100%;
    }

    .p-avatar-lg {
        width: dt('avatar.lg.width');
        height: dt('avatar.lg.width');
        font-size: dt('avatar.lg.font.size');
    }

    .p-avatar-lg .p-avatar-icon {
        font-size: dt('avatar.lg.icon.size');
        width: dt('avatar.lg.icon.size');
        height: dt('avatar.lg.icon.size');
    }

    .p-avatar-xl {
        width: dt('avatar.xl.width');
        height: dt('avatar.xl.width');
        font-size: dt('avatar.xl.font.size');
    }

    .p-avatar-xl .p-avatar-icon {
        font-size: dt('avatar.xl.icon.size');
        width: dt('avatar.xl.icon.size');
        height: dt('avatar.xl.icon.size');
    }

    .p-avatar-group {
        display: flex;
        align-items: center;
    }

    .p-avatar-group .p-avatar + .p-avatar {
        margin-inline-start: dt('avatar.group.offset');
    }

    .p-avatar-group .p-avatar {
        border: 2px solid dt('avatar.group.border.color');
    }

    .p-avatar-group .p-avatar-lg + .p-avatar-lg {
        margin-inline-start: dt('avatar.lg.group.offset');
    }

    .p-avatar-group .p-avatar-xl + .p-avatar-xl {
        margin-inline-start: dt('avatar.xl.group.offset');
    }
`,ta={root:function(t){var o=t.props;return["p-avatar p-component",{"p-avatar-image":o.image!=null,"p-avatar-circle":o.shape==="circle","p-avatar-lg":o.size==="large","p-avatar-xl":o.size==="xlarge"}]},label:"p-avatar-label",icon:"p-avatar-icon"},aa=ye.extend({name:"avatar",style:ea,classes:ta}),sa={name:"BaseAvatar",extends:Te,props:{label:{type:String,default:null},icon:{type:String,default:null},image:{type:String,default:null},size:{type:String,default:"normal"},shape:{type:String,default:"square"},ariaLabelledby:{type:String,default:null},ariaLabel:{type:String,default:null}},style:aa,provide:function(){return{$pcAvatar:this,$parentInstance:this}}};function $e(e){"@babel/helpers - typeof";return $e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$e(e)}function lt(e,t,o){return(t=na(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function na(e){var t=oa(e,"string");return $e(t)=="symbol"?t:t+""}function oa(e,t){if($e(e)!="object"||!e)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var g=o.call(e,t);if($e(g)!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ze={name:"Avatar",extends:sa,inheritAttrs:!1,emits:["error"],methods:{onError:function(t){this.$emit("error",t)}},computed:{dataP:function(){return ze(lt(lt({},this.shape,this.shape),this.size,this.size))}}},ia=["aria-labelledby","aria-label","data-p"],la=["data-p"],ra=["data-p"],ua=["src","alt","data-p"];function ca(e,t,o,g,h,f){return r(),m("div",Z({class:e.cx("root"),"aria-labelledby":e.ariaLabelledby,"aria-label":e.ariaLabel},e.ptmi("root"),{"data-p":f.dataP}),[he(e.$slots,"default",{},function(){return[e.label?(r(),m("span",Z({key:0,class:e.cx("label")},e.ptm("label"),{"data-p":f.dataP}),v(e.label),17,la)):e.$slots.icon?(r(),X(ke(e.$slots.icon),{key:1,class:ue(e.cx("icon"))},null,8,["class"])):e.icon?(r(),m("span",Z({key:2,class:[e.cx("icon"),e.icon]},e.ptm("icon"),{"data-p":f.dataP}),null,16,ra)):e.image?(r(),m("img",Z({key:3,src:e.image,alt:e.ariaLabel,onError:t[0]||(t[0]=function(){return f.onError&&f.onError.apply(f,arguments)})},e.ptm("image"),{"data-p":f.dataP}),null,16,ua)):O("",!0)]})],16,ia)}Ze.render=ca;const da={class:"grid"},fa={key:0,class:"col-12 sm:col-12 md:col-6 lg:col-4 border-round surface-section shadow-1 p-2"},pa={class:"flex flex-column"},va=["onClick"],ha={class:"p-1 flex-shrink-0 w-7rem h-7rem flex align-items-center justify-content-center overflow-hidden"},ma=["src","alt"],ba={class:"flex flex-column justify-content-center"},ga={class:"font-bold"},ya={class:"flex flex-wrap gap-2"},_a={class:"flex gap-1 align-items-center"},wa={class:"text-color-secondary line2"},ka={key:0,class:"text-xl font-bold text-primary"},xa={key:1,class:"flex align-items-center gap-1"},$a={class:"text-l font-bold text-color-secondary"},Ta={class:"text-sm line-through text-500"},Ca={key:2,class:"flex gap-2 mr-2",id:"card-quantity"},Da={class:"w-2rem text-xl text-center"},Ia={key:3,class:"flex gap-2 mr-2"},Sa={key:0,class:"m-2 mt-0"},Aa={class:"flex flex-row justify-content-between align-content-center"},Na={class:"flex flex-column"},Ba={class:"text-l font-bold"},Pa={key:0,class:"text-l font-bold text-color-secondary"},La={key:1,class:"flex align-items-center gap-1"},qa={class:"text-l font-bold text-color-secondary"},za={class:"text-sm line-through text-500"},Oa={key:0,class:"flex ml-2 mr-2"},Ea={class:"w-2rem text-xl text-center"},Ma={key:1,class:"flex gap-2 mr-3 pt-2 pb-2"},Ra={class:"max-w-5rem flex align-items-center"},ja={class:"font-bold whitespace-nowrap"},Va={class:"mb-2 flex justify-content-center"},Fa={class:"font-bold text-center"},Ha={class:"mb-2"},Ka={class:"text-color-secondary m-0 line-height-3 line2 text-center"},Ua={class:"mb-2"},Wa={class:"flex justify-content-center"},Qa=["src","alt"],Ja={class:"flex align-items-center gap-2"},Ga=["src","alt"],Za={class:"flex align-items-center gap-3 ml-auto"},Xa={__name:"DishList",props:{rateDish:{type:Function,required:!0},likedItemsRef:Array,dislikedItemsRef:Array,tabIndex:Number,onlyVeg:Boolean},setup(e){const{t}=fe(),o=te.dishDatas,g=R(null),h=e,f=(n,F=!0)=>{if(!h.onlyVeg)return!0;if(F)return n.vegetable;if(n.subItems.length>0){for(const s of n.subItems)if(s.vegetable)return!0}else return n.dish.vegetable;return!1};Ge(()=>{let n=N.getOrderMenuTab()[h.tabIndex];if(N.customDishAPI.customDishes.value.map(C=>C.name),N.getMenu().length==0){console.log("exit");return}g.value=o.value[s(o.value,n)].mainDishes,te.showDishList(g.value);function s(C,q){for(const x in C)if(C[x].name==q)return x;console.error("Can not find tab index in menu")}});let c={rated:!1,id:null,like:0,rate:0};function j(){var s;const n=N.currentPage.value,F=(s=n==null?void 0:n.data)==null?void 0:s.logoPath;return F?N.pathFormated(F,n.imagesPath):"/images/logo_logo.png"}const u=n=>te.dishDatas.value[n]?te.dishDatas.value[n].quantity:0,_=n=>{if(!y())return!1;const F=n.quantity;let s=3;if(n.price>0&&(s=9),n.limit){const C=n.id,q=y(),x=(q.peopleType.adults+q.peopleType.children)*n.limit,I=q.order.find(w=>w.dishid==C);let k=0;if(n.subitem)for(const w of n.subitem){k+=u(w);const ee=q.order.find(E=>E.dishid==S(w));ee&&(k+=ee.quantity)}else k+=n.quantity,I&&(k+=I.quantity);return F>=s||x&&k>=x}return F>=s},S=n=>te.dishDatas.value[n]?te.dishDatas.value[n].id:0,y=()=>N.getTableValue(),b=n=>{let F="absolute origin-top-left mt-1 ml-1 border-round-lg pl-1 pr-1 text-xs text-white font-bold ";switch(n){case"new":F+="bg-red-600";break;case"recommended":case"special":F+="bg-orange-600";break;default:F+="bg-blue-600"}return F};function z(n){h.rateDish(c.id,c.like,c.rate,c.rated),U(n,c.rate,c.like),c.id=null,c.like=0,c.rate=0,c.rated=!1}const W=n=>{const F=h.likedItemsRef.indexOf(n);if(c.id=n.id,F!==-1)h.likedItemsRef.splice(F,1),c.like+=-1,c.rate+=-1,c.rated=!1;else{c.rated=!0,h.likedItemsRef.push(n);const s=h.dislikedItemsRef.indexOf(n);s!==-1?(h.dislikedItemsRef.splice(s,1),c.like+=1):(c.like+=1,c.rate+=1)}z(n)};function U(n,F=0,s=0){n.rates=(n.rates||0)+F,n.likes=(n.likes||0)+s}const J=n=>{const F=h.dislikedItemsRef.indexOf(n);if(c.id=n.id,F!==-1)h.dislikedItemsRef.splice(F,1),c.rate+=-1,c.rated=!1;else{c.rated=!0,h.dislikedItemsRef.push(n);const s=h.likedItemsRef.indexOf(n);s!==-1?(h.likedItemsRef.splice(s,1),c.like+=-1):c.rate+=1}z(n)},V=R(!1),A=R({}),P=n=>{V.value=!0,A.value=n},L=n=>{n.target.src="/images/default.png"};function M(n){$(n.target,300)}function d(n){$(n.target,110)}function $(n,F){const s=n.naturalWidth,C=n.naturalHeight,q=Math.min(s,F),x=q/s,I=C*x;n.style.width=`${q}px`,n.style.height=`${I}px`}return(n,F)=>(r(),m(G,null,[a("div",da,[(r(!0),m(G,null,ne(g.value,(s,C)=>{var q;return r(),m(G,{key:C},[f(s,!1)?(r(),m("div",fa,[a("div",pa,[a("div",{class:ue(["flex flex-row",s.subItems.length!==0?"flex-grow-1":""]),onClick:x=>P(s.dish)},[((q=s.dish.etiquette)==null?void 0:q.length)>0?(r(),m("div",{key:0,class:ue(b(s.dish.etiquette))},v(i(t)("common.etiquette."+s.dish.etiquette)),3)):O("",!0),a("div",ha,[a("img",{src:s.dish.image||"/images/default.png",alt:s.dish.name,class:"w-full h-full",style:{"object-fit":"cover"},onError:L,onLoad:d},null,40,ma)]),a("div",ba,[a("div",ga,v(s.dish.name),1),a("div",null,[a("div",ya,[a("div",_a,[(r(),m(G,null,ne(5,x=>a("i",{key:x,class:ue(["pi invert-star",x<=Math.floor(s.dish.likes/s.dish.rates*5)?"pi-star-fill":x-.5<=s.dish.likes/s.dish.rates*5?"pi-star-half-fill":"pi-star"]),style:{color:"black"}},null,2)),64)),a("p",null,"("+v(s.dish.rates?s.dish.rates:0)+")",1)])])]),a("div",null,[a("p",wa,v(s.dish.note),1)])])],10,va),s.subItems.length==0?(r(),m("div",{key:0,class:ue(["flex ml-2 mr-2 mb-2",Number(s.dish.price)>0?"justify-content-between":"justify-content-end"])},[!s.dish.discount&&Number(s.dish.price)>0?(r(),m("span",ka,"€"+v(s.dish.price),1)):O("",!0),s.dish.discount?(r(),m("div",xa,[a("span",$a,"€"+v(s.dish.dis_price),1),a("span",Ta,"€"+v(s.dish.price),1),B(i(we),{severity:"danger",value:"-"+s.dish.discount+"%"},null,8,["value"])])):O("",!0),s.dish.soldout?O("",!0):(r(),m("div",Ca,[B(i(Q),{icon:"pi pi-minus",rounded:"",disabled:s.dish.quantity<=0,onClick:x=>s.dish.quantity--,class:"w-2rem h-2rem"},null,8,["disabled","onClick"]),a("span",Da,v(s.dish.quantity),1),B(i(Q),{icon:"pi pi-plus",rounded:"",disabled:_(s.dish),onClick:x=>s.dish.quantity++,class:"w-2rem h-2rem"},null,8,["disabled","onClick"])])),s.dish.soldout?(r(),m("div",Ia,[B(i(we),{severity:"danger",value:n.$t("common.soldout")},null,8,["value"])])):O("",!0)],2)):O("",!0),s.subItems.length!==0?(r(!0),m(G,{key:1},ne(s.subItems,(x,I)=>(r(),m(G,{key:"index"},[!x.disable&&f(x)?(r(),m("div",Sa,[a("div",Aa,[a("div",Na,[a("span",Ba,v(x.subname),1),!x.discount&&x.price!=="0.00"&&x.price!=="0"?(r(),m("span",Pa,"€"+v(x.price),1)):O("",!0),x.discount?(r(),m("div",La,[a("span",qa,"€"+v(x.dis_price),1),a("span",za,"€"+v(x.price),1),B(i(we),{severity:"danger",value:"-"+x.discount+"%"},null,8,["value"])])):O("",!0)]),x.soldout?O("",!0):(r(),m("div",Oa,[B(i(Q),{icon:"pi pi-minus",rounded:"",disabled:x.quantity<=0,onClick:k=>x.quantity--,class:"w-2rem h-2rem"},null,8,["disabled","onClick"]),a("span",Ea,v(x.quantity),1),B(i(Q),{icon:"pi pi-plus",rounded:"",onClick:k=>x.quantity++,class:"w-2rem h-2rem",disabled:_(x)},null,8,["onClick","disabled"])])),x.soldout?(r(),m("div",Ma,[B(i(we),{severity:"danger",value:n.$t("common.soldout")},null,8,["value"])])):O("",!0)])])):O("",!0)],64))),128)):O("",!0)])])):O("",!0)],64)}),128))]),B(i(ge),{visible:V.value,"onUpdate:visible":F[2]||(F[2]=s=>V.value=s),modal:"",header:"dish",style:Pe([{width:"23rem"},{width:"80vw","max-width":"700px"}])},{header:H(()=>[a("div",Ra,[B(i(Ze),{image:j(),class:"w-full"},null,8,["image"])]),a("span",ja,v(n.$t("common.details")),1)]),default:H(()=>[a("div",Va,[a("span",Fa,v(A.value.name),1)]),a("div",Ha,[a("span",Ka,v(A.value.note),1)]),a("div",Ua,[a("div",Wa,[a("img",{class:"w-full h-auto object-contain",src:A.value.image,alt:A.value.name,onError:L,onLoad:M},null,40,Qa)])]),a("div",Ja,[(r(!0),m(G,null,ne(A.value.allergies,(s,C)=>(r(),m("img",{src:"images/"+s+".png",alt:s,class:"w-2rem h-2rem border-round flex-shrink-0",style:{"object-fit":"cover","min-width":"2rem"}},null,8,Ga))),256)),a("div",Za,[a("button",{onClick:F[0]||(F[0]=s=>W(A.value)),class:"p-0 border-none bg-transparent cursor-pointer"},[a("i",{class:ue(["pi pi-thumbs-up text-xl",h.likedItemsRef.includes(A.value)?"text-green-500":"text-gray-400"])},null,2)]),a("button",{onClick:F[1]||(F[1]=s=>J(A.value)),class:"p-0 border-none bg-transparent cursor-pointer"},[a("i",{class:ue(["pi pi-thumbs-down text-xl",h.dislikedItemsRef.includes(A.value)?"text-red-500":"text-gray-400"])},null,2)])])])]),_:1},8,["visible"])],64))}},Ya=Ce(Xa,[["__scopeId","data-v-00befd56"]]),es={key:0,class:"text-3xl font-bold"},ts={class:"flex flex-column gap-3 p-1"},as={key:0,class:"flex flex-column gap-1"},ss={key:0,class:"m-0"},ns={key:0,class:"m-0"},os={class:"flex justify-content-between gap-4 mt-1"},is={class:"flex align-items-center gap-2"},ls=["src","alt"],rs={class:"flex-grow-1 min-width-0 max-w-18rem"},us={class:"flex flex-column gap-1"},cs={class:"flex align-items-center gap-2"},ds={class:"text-xl font-bold line1 whitespace-nowrap overflow-hidden text-overflow-ellipsis",style:{"max-width":"20rem"}},fs={class:"flex align-items-end gap-1"},ps={key:0,class:"text-xl font-bold text-primary"},vs={key:1,class:"text-xl font-bold text-primary"},hs={key:2,class:"text-sm text-color-secondary"},ms={key:0,class:"text-xs text-primary"},bs={class:"flex-shrink-0 flex flex-wrap justify-content-between align-items-center gap-1"},gs={class:"flex flex-wrap justify-content-between align-content-center"},ys={class:"flex align-items-center gap-1"},_s={class:"w-2rem text-center"},ws={key:1,class:"flex flex-column gap-2 mt-2"},ks={for:"in_label"},xs={for:"in_label"},$s={class:"bottom-0 left-0 mt-2"},Ts={class:"text-2xl font-bold"},Cs={class:"text-2xl font-bold text-primary pl-2"},Ds={class:"flex justify-content-between"},Is={__name:"Cart",props:{checkout:{type:Function,required:!0},isTakeaway:Boolean},setup(e,{expose:t}){const{locale:o}=fe(),g=ut(),{t:h}=fe(),f=re.cartDishs,c=R([]),j=R(),u=R(),_=R(!1),S=R(!1),y=R(!0),b=R(""),z=R("");function W(I,k,w){let ee="";const E=o.value,Y=N.customDishAPI.getCustomDishByName(I);for(const se of w){const de=Y.types[k].dishes.find(pe=>pe.dishid===se.id)[`name_${E}`];ee=ee+de+"/"}return ee}function U(I,k){const w=o.value;return N.customDishAPI.getCustomDishByName(I).types[k][`typeName_${w}`]}const J=(I,k)=>{const w=c.value[I].quantity+k;w>=0&&(c.value[I].quantity=w)};function V(I){I&&j.value&&(j.value.dishNote=u.value?u.value:void 0),S.value=!1}function A(){u.value&&(u.value=void 0),j.value&&(j.value=void 0)}function P(I){j.value=I,u.value=j.value.dishNote?j.value.dishNote:void 0,S.value=!0}const L=e;t({showDishList:I=>{_.value=!0,c.value.length=0;for(let k=0;k<I.length;k++)c.value.push(I[k]);y.value=c.value.length==0&&f.length==0}});function d(I){re.removeItem(I)}function $(){L.isTakeaway?n():F()}function n(){const I=[];f.value.forEach(k=>{I.push(k)}),c.value.forEach(k=>{k.quantity>0&&I.push(k)}),I.length<=0?le.show_warn(h("notification.select_at_least_one")):(_.value=!1,g.push({path:"/paymentPage"}))}function F(){L.checkout({name:b.value,note:z.value},I=>{if(I.success){f.value.forEach(w=>{w.dishNote=void 0}),c.value.forEach(w=>{w.dishNote=void 0}),z.value="",te.cleanDishDataQty(),ce.deleteCookie("cartDish_normal"),re.cleanAll(),ce.deleteCookie("cartDish_custom");const k=I.data.id;le.show_success(h("notification.order_submitted",{id:k}))}})&&(_.value=!1)}function s(I){return I.subname!=""&&I.subname!="Default Title"?I.name+" "+I.subname:I.name}function C(){let I=0;return f.value.forEach(k=>{I+=k.discount?(k.dis_price?k.dis_price:0)*k.count:(k.price?k.price:0)*k.count}),c.value.forEach(k=>{I+=k.discount?(k.dis_price?k.dis_price:0)*k.quantity:(k.price?k.price:0)*k.quantity}),"€"+I.toFixed(2)}const q=I=>{I.target.src="/images/default.png"},x=I=>{const k=I.quantity;let w=3;return I.price>0&&(w=9),k>=w};return(I,k)=>(r(),m(G,null,[B(i(ge),{class:"bg-primary-reverse text-sm md:text-lg lg:text-xl",visible:_.value,"onUpdate:visible":k[2]||(k[2]=w=>_.value=w),modal:"",header:I.$t("common.cart"),style:Pe([{backgroundColor:"rgba(250, 250, 250, 1)",height:"100%",minWidth:"24rem"},{width:"80vw","max-width":"700px"}]),dismissableMask:!0},{footer:H(()=>[a("div",$s,[a("span",Ts,v(I.$t("common.total"))+": ",1),a("span",Cs,v(C()),1),B(i(Q),{icon:e.isTakeaway?"pi pi-wallet":"pi pi-plus",class:"p-button-success p-button-rounded ml-3",onClick:$,label:e.isTakeaway?i(h)("common.pay"):i(h)("common.send")},null,8,["icon","label"])])]),default:H(()=>[y.value?(r(),m("h2",es,"Cart is empty.")):O("",!0),a("div",ts,[(r(!0),m(G,null,ne(i(f),(w,ee)=>(r(),X(i(Mt),{style:{overflow:"hidden"},key:ee},{title:H(()=>[be(v(I.$t(`common.${w.name.replace(/[^a-zA-Z0-9\s]/g,"").toLowerCase().replace(/\s+/g,"")}`)),1)]),subtitle:H(()=>[be(v(I.$t("common.price"))+" : "+v(w.price)+"€",1)]),content:H(()=>[i(N).customDishAPI.customDishes.value.find(E=>E.name==w.name)?(r(),m("div",as,[(r(!0),m(G,null,ne(w.notesAndId,(E,Y)=>(r(),m("div",null,[w.notesAndId[Y].length!==0?(r(),m("span",ss,v(U(w.name,Y))+": "+v(W(w.name,Y,E)),1)):O("",!0)]))),256)),a("div",null,[w.dishNote?(r(),m("span",ns,v(I.$t("common.note"))+": "+v(w.dishNote),1)):O("",!0)])])):O("",!0)]),footer:H(()=>[a("div",os,[e.isTakeaway?O("",!0):(r(),X(i(Q),{key:0,label:i(h)("common.edit")+" "+i(h)("common.note"),severity:"contrast",onClick:E=>P(w)},null,8,["label","onClick"])),B(i(Q),{label:i(h)("common.remove"),severity:"danger",onClick:E=>d(w)},null,8,["label","onClick"])])]),_:2},1024))),128)),(r(!0),m(G,null,ne(c.value,(w,ee)=>(r(),m("div",{key:ee,class:"p-2 border-round shadow-1 transition-all transition-duration-200 hover:shadow-3 flex flex-column gap-1"},[a("div",is,[a("img",{src:w.image,alt:w.name,class:"w-4rem h-4rem border-round flex-shrink-0",onError:q,style:{"object-fit":"cover","min-width":"4rem"}},null,40,ls),a("div",rs,[a("div",us,[a("div",cs,[a("span",ds,v(s(w)),1)])]),a("div",fs,[w.discount?(r(),m("span",ps,"€"+v(Number(w.dis_price?w.dis_price:0).toFixed(2)),1)):O("",!0),w.discount?O("",!0):(r(),m("span",vs,"€"+v(Number(w.price?w.price:0).toFixed(2)),1)),w.price>0?(r(),m("span",hs,"/uni.")):O("",!0)])])]),a("div",null,[w.dishNote?(r(),m("span",ms,v(i(h)("common.note")+": "+w.dishNote),1)):O("",!0)]),a("div",bs,[a("div",gs,[e.isTakeaway?O("",!0):(r(),X(i(Q),{key:0,label:i(h)("common.edit")+" "+i(h)("common.note"),severity:"contrast",class:"w-3.5rem h-2rem",onClick:E=>P(w)},null,8,["label","onClick"]))]),a("div",ys,[B(i(Q),{icon:"pi pi-minus",rounded:"",disabled:w.quantity<=0,onClick:E=>J(ee,-1),class:"w-2rem h-2rem"},null,8,["disabled","onClick"]),a("span",_s,v(w.quantity),1),B(i(Q),{icon:"pi pi-plus",rounded:"",disabled:x(w),onClick:E=>J(ee,1),class:"w-2rem h-2rem"},null,8,["disabled","onClick"])])])]))),128))]),e.isTakeaway?O("",!0):(r(),m("div",ws,[B(i(nt),{variant:"in"},{default:H(()=>[B(i(ft),{id:"in_label",modelValue:b.value,"onUpdate:modelValue":k[0]||(k[0]=w=>b.value=w),variant:"filled",maxlength:"20"},null,8,["modelValue"]),a("label",ks,v(i(h)("common.name")),1)]),_:1}),B(i(nt),{variant:"in"},{default:H(()=>[B(i(st),{id:"in_label",class:"min-w-full",rows:"5",modelValue:z.value,"onUpdate:modelValue":k[1]||(k[1]=w=>z.value=w),variant:"filled",maxlength:"200"},null,8,["modelValue"]),a("label",xs,v(i(h)("common.observation")),1)]),_:1})]))]),_:1},8,["visible","header"]),B(i(ge),{visible:S.value,"onUpdate:visible":k[6]||(k[6]=w=>S.value=w),header:i(h)("common.note"),onHide:k[7]||(k[7]=w=>A()),modal:"",dismissableMask:!0},{default:H(()=>[B(i(st),{modelValue:u.value,"onUpdate:modelValue":k[3]||(k[3]=w=>u.value=w),rows:"5",cols:"30",placeholder:i(h)("common.edit")+" "+i(h)("common.note")+"...",maxlength:"100"},null,8,["modelValue","placeholder"]),a("div",Ds,[B(i(Q),{label:i(h)("common.cancel"),severity:"danger",onClick:k[4]||(k[4]=w=>V(!1))},null,8,["label"]),B(i(Q),{label:i(h)("common.save"),severity:"primary",size:"sm",onClick:k[5]||(k[5]=w=>V(!0))},null,8,["label"])])]),_:1},8,["visible","header"])],64))}},Ss=Ce(Is,[["__scopeId","data-v-5c39b66c"]]);var As=qe`
    .p-overlaybadge {
        position: relative;
    }

    .p-overlaybadge .p-badge {
        position: absolute;
        inset-block-start: 0;
        inset-inline-end: 0;
        transform: translate(50%, -50%);
        transform-origin: 100% 0;
        margin: 0;
        outline-width: dt('overlaybadge.outline.width');
        outline-style: solid;
        outline-color: dt('overlaybadge.outline.color');
    }

    .p-overlaybadge .p-badge:dir(rtl) {
        transform: translate(-50%, -50%);
    }
`,Ns={root:"p-overlaybadge"},Bs=ye.extend({name:"overlaybadge",style:As,classes:Ns}),Ps={name:"OverlayBadge",extends:pt,style:Bs,provide:function(){return{$pcOverlayBadge:this,$parentInstance:this}}},vt={name:"OverlayBadge",extends:Ps,inheritAttrs:!1,components:{Badge:pt}};function Ls(e,t,o,g,h,f){var c=Ct("Badge");return r(),m("div",Z({class:e.cx("root")},e.ptmi("root")),[he(e.$slots,"default"),B(c,Z(e.$props,{pt:e.ptm("pcBadge")}),null,16,["pt"])],16)}vt.render=Ls;R([]);R("iniImages()");const qs={class:"m-3"},zs={class:"flex flex-column gap-2"},Os={class:"w-full flex justify-content-center"},Es={key:0,class:"max-w-19rem"},Ms=["src"],Rs={style:{width:"300px",height:"300px",background:"url(/boxImage/box.png)"}},js={key:0,class:"flex align-items-center justify-content-center text-4xl font-bold text-white w-full h-full"},Vs={key:1,class:"grid m-0 p-2"},Fs=["onClick"],Hs={class:"flex align-items-center justify-content-center font-bold m-0 p-0",style:{width:"94px",height:"94px"}},Ks=["src"],Us={class:"flex flex-wrap justify-content-between align-items-center m-1"},Ws={class:"flex gap-1 align-items-center"},Qs={key:0},Js={class:"font-bold mb-2"},Gs={key:1,class:"flex justify-content-between gap-2 mt-3"},Zs={class:"font-bold mb-2"},Xs={class:"flex mr-2"},Ys={class:"w-3rem text-xl text-center"},en={class:"font-bold block mb-2"},tn={class:"flex flex-wrap"},an={key:2,class:"flex flex-wrap gap-2 mt-3"},sn={class:"font-bold block mb-2"},nn={class:"font-bold block mb-2 text-center"},on={class:"flex flex-wrap gap-2 mt-3"},ln={__name:"CustomDish",props:{currentCustomDish:Object,tabindex:Number},emits:["typeClick"],setup(e,{emit:t}){const{locale:o}=fe(),g=e,h=Dt(),{t:f}=fe(),c=R(null);Be(()=>g.currentCustomDish,s=>{s&&(c.value=s)},{immediate:!0,deep:!0});const j=ve(()=>c.boxImages),u=R(0),_=ve(()=>{var C;if(c.value==null)return 0;let s=(C=c.value)==null?void 0:C.initialPrice;for(const q of c.value.types??[])for(const x of q.dishes??[])x.selected&&(s+=x.price);return Number(s).toFixed(2)}),S=t,y=R(null),b=ve(()=>{const s=o.value,C=`title_${s}`,q=`description_${s}`;return c.value==null?{}:c.value.descriptions.map(x=>({title:x[C],descriptions:x.descriptions.map(I=>I[q]),image:x==null?void 0:x.image}))}),z=ve(()=>{var q,x;const s=Number(((q=c.value)==null?void 0:q.like)??0),C=Number(((x=c.value)==null?void 0:x.rate)??0);return C?s/C*5:0});function W(s,C){const q=o.value;return s[`${C}_${q}`]}function U(s,C,q){const x=s[C];if(x.selected){x.selected=!1;return}else{const k=s.filter(w=>w.selected).length;if(q===1){$(s),x.selected=!0;return}k<q&&(x.selected=!0)}}function J(s,C,q){const x=s.dishes;S("typeClick",s,C,x[C].selected),U(x,C,q)}function V(s){return s.selected}function A(){if(!n(c.value.types))return;const s=L(c.value.types),C=M(c.value.types);re.addItem({dishid:-1,name:c.value.name,category:g.currentCustomDish.category,count:u.value!==0?u.value:1,price:_.value,notes:s,notesAndId:C}),console.log("CART: ",re.cartDishs),d(c.value.types),le.show({severity:"info",summary:"info",detail:f("customDishBibimbapVue.addToCartSuccessBibimbap")})}function P(s){return!s||!s.dishes?"":s.dishes.filter(q=>q.selected).map(q=>q.name).join(",")}function L(s){return s?s.map(C=>P(C)):[]}function M(s){return s?s.map(C=>C.dishes?C.dishes.filter(q=>q.selected).map(q=>({id:q.dishid,name:q.name})):[]):[]}function d(s){s&&s.forEach(C=>{C.dishes&&C.dishes.forEach(q=>{q.selected=!1})})}function $(s){s.forEach(C=>C.selected=!1)}function n(s){if(c.value.options.quantity&&u.value<=0)return le.show({severity:"warn",detail:f("notification.quantity_must_be_positive")}),!1;for(const C of s)if(C.dishes.filter(x=>x.selected).length<C.minQuantity){const x=C.typeName;return le.show({severity:"warn",detail:f("notification.select_type_of",{name:x})}),!1}return!0}function F(s){s?N.customDishAPI.like(c.value.id)&&(y.value="like",h.add({severity:"success",summary:f("common.success"),detail:f("common.rate")+" "+f("common.success"),life:750})):N.customDishAPI.unLike(c.value.id)&&(y.value="unlike",h.add({severity:"success",summary:f("common.success"),detail:f("common.rate")+" "+f("common.success"),life:750}))}return(s,C)=>{var q,x,I,k,w,ee;return r(),m("div",qs,[a("div",zs,[B(i(Je),{class:"w-full max-w-xl mx-auto"},{default:H(()=>[(r(!0),m(G,null,ne(b.value,(E,Y)=>(r(),X(i(Ue),{key:Y,value:Y},{default:H(()=>[B(i(We),null,{default:H(()=>[be(v(E.title),1)]),_:2},1024),B(i(Qe),null,{default:H(()=>{var se;return[(r(!0),m(G,null,ne(E.descriptions,(de,pe)=>(r(),m("p",{key:pe},v(de),1))),128)),a("div",Os,[(se=E.image)!=null&&se.src?(r(),m("div",Es,[a("img",{src:E.image.src,class:"w-full"},null,8,Ms)])):O("",!0)])]}),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1}),((x=(q=c.value)==null?void 0:q.value)==null?void 0:x.name)==="MY BOX"?(r(),X(i(Je),{key:0,class:"w-full max-w-xl mx-auto"},{default:H(()=>[B(i(Ue),{value:"0"},{default:H(()=>[B(i(We),null,{default:H(()=>[be(" 🥩 "+v(s.$t("common.showMybox")),1)]),_:1}),B(i(Qe),null,{default:H(()=>[a("div",Rs,[s.isEmptyArray(j.value)?(r(),m("div",js,v(s.$t("common.myboxAlarm")),1)):O("",!0),s.isEmptyArray(j.value)?O("",!0):(r(),m("div",Vs,[(r(!0),m(G,null,ne(j.value,E=>(r(),m("div",{class:"col-4 p-0",onClick:Y=>s.imageSelectAction(E)},[a("div",Hs,[E?(r(),m("img",{key:0,class:"m-0 p-0",src:s.imagePath(E),style:{width:"82px",height:"82px"}},null,8,Ks)):O("",!0)])],8,Fs))),256))]))])]),_:1})]),_:1})]),_:1})):O("",!0)]),a("div",Us,[a("div",Ws,[(r(),m(G,null,ne(5,E=>a("i",{key:E,class:ue(["pi invert-star",E<=Math.floor(z.value)?"pi-star-fill":E-.5<=z.value?"pi-star-half":"pi-star"]),style:{color:"black"}},null,2)),64)),a("p",null,"("+v((I=c.value)!=null&&I.rate?c.value.rate:0)+")",1)]),a("div",null,[B(i(Q),{text:"",icon:"pi pi-thumbs-up",severity:y.value==="like"?"success":"",onClick:C[0]||(C[0]=E=>F(!0))},null,8,["severity"]),B(i(Q),{text:"",icon:"pi pi-thumbs-down",severity:y.value==="unlike"?"danger":"",onClick:C[1]||(C[1]=E=>F(!1))},null,8,["severity"])])]),(k=c.value)!=null&&k.options.extraInfo?(r(),m("div",Qs,[a("label",Js,v(c.value.options.extraInfo),1)])):O("",!0),(w=c.value)!=null&&w.options.quantity?(r(),m("div",Gs,[a("div",null,[a("label",Zs,v(s.$t("common.quantity"))+" / "+v(s.$t("common.pieces")),1)]),a("div",Xs,[B(i(Q),{icon:"pi pi-minus",disabled:u.value<=0,onClick:C[2]||(C[2]=E=>{var Y;return u.value-=(Y=c.value)==null?void 0:Y.options.quantitySetp}),class:"w-2rem h-2rem"},null,8,["disabled"]),a("span",Ys,v(u.value),1),B(i(Q),{icon:"pi pi-plus",disabled:u.value>=c.value.options.maxQuantity,onClick:C[3]||(C[3]=E=>{var Y;return u.value+=(Y=c.value)==null?void 0:Y.options.quantitySetp}),class:"w-2rem h-2rem"},null,8,["disabled"])])])):O("",!0),(r(!0),m(G,null,ne((ee=c.value)==null?void 0:ee.types,(E,Y)=>(r(),m("div",{key:E.id},[Le(a("div",null,[a("label",en,v(Y+1)+". "+v(W(E,"typeName")),1),a("div",tn,[(r(!0),m(G,null,ne(E.dishes,(se,de)=>(r(),X(i(Q),{key:de,onClick:pe=>J(E,de,u.value==0?E.maxQuantity:E.maxQuantity*u.value),class:ue([{"p-button-primary":V(se),"p-button-outlined":!V(se)},"m-1"])},{default:H(()=>[a("p",{class:ue({"text-gray-700":!V(se)})},v(W(se,"name")),3)]),_:2},1032,["onClick","class"]))),128))])],512),[[It,E.enable]])]))),128)),e.currentCustomDish.initialPrice!==0?(r(),m("div",an,[a("label",sn,v(s.$t("common.price"))+":",1),a("label",nn,v(_.value+"€"),1)])):O("",!0),a("div",on,[B(i(Q),{icon:"pi pi-shopping-cart",onClick:C[4]||(C[4]=E=>A()),label:s.$t("common.addToCart"),class:"m-3",severity:"primary",raised:""},null,8,["label"])])])}}},rn=Ce(ln,[["__scopeId","data-v-e37fc872"]]);var un=qe`
    .p-tabs {
        display: flex;
        flex-direction: column;
    }

    .p-tablist {
        display: flex;
        position: relative;
    }

    .p-tabs-scrollable > .p-tablist {
        overflow: hidden;
    }

    .p-tablist-viewport {
        overflow-x: auto;
        overflow-y: hidden;
        scroll-behavior: smooth;
        scrollbar-width: none;
        overscroll-behavior: contain auto;
    }

    .p-tablist-viewport::-webkit-scrollbar {
        display: none;
    }

    .p-tablist-tab-list {
        position: relative;
        display: flex;
        background: dt('tabs.tablist.background');
        border-style: solid;
        border-color: dt('tabs.tablist.border.color');
        border-width: dt('tabs.tablist.border.width');
    }

    .p-tablist-content {
        flex-grow: 1;
    }

    .p-tablist-nav-button {
        all: unset;
        position: absolute !important;
        flex-shrink: 0;
        inset-block-start: 0;
        z-index: 2;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        background: dt('tabs.nav.button.background');
        color: dt('tabs.nav.button.color');
        width: dt('tabs.nav.button.width');
        transition:
            color dt('tabs.transition.duration'),
            outline-color dt('tabs.transition.duration'),
            box-shadow dt('tabs.transition.duration');
        box-shadow: dt('tabs.nav.button.shadow');
        outline-color: transparent;
        cursor: pointer;
    }

    .p-tablist-nav-button:focus-visible {
        z-index: 1;
        box-shadow: dt('tabs.nav.button.focus.ring.shadow');
        outline: dt('tabs.nav.button.focus.ring.width') dt('tabs.nav.button.focus.ring.style') dt('tabs.nav.button.focus.ring.color');
        outline-offset: dt('tabs.nav.button.focus.ring.offset');
    }

    .p-tablist-nav-button:hover {
        color: dt('tabs.nav.button.hover.color');
    }

    .p-tablist-prev-button {
        inset-inline-start: 0;
    }

    .p-tablist-next-button {
        inset-inline-end: 0;
    }

    .p-tablist-prev-button:dir(rtl),
    .p-tablist-next-button:dir(rtl) {
        transform: rotate(180deg);
    }

    .p-tab {
        flex-shrink: 0;
        cursor: pointer;
        user-select: none;
        position: relative;
        border-style: solid;
        white-space: nowrap;
        gap: dt('tabs.tab.gap');
        background: dt('tabs.tab.background');
        border-width: dt('tabs.tab.border.width');
        border-color: dt('tabs.tab.border.color');
        color: dt('tabs.tab.color');
        padding: dt('tabs.tab.padding');
        font-weight: dt('tabs.tab.font.weight');
        transition:
            background dt('tabs.transition.duration'),
            border-color dt('tabs.transition.duration'),
            color dt('tabs.transition.duration'),
            outline-color dt('tabs.transition.duration'),
            box-shadow dt('tabs.transition.duration');
        margin: dt('tabs.tab.margin');
        outline-color: transparent;
    }

    .p-tab:not(.p-disabled):focus-visible {
        z-index: 1;
        box-shadow: dt('tabs.tab.focus.ring.shadow');
        outline: dt('tabs.tab.focus.ring.width') dt('tabs.tab.focus.ring.style') dt('tabs.tab.focus.ring.color');
        outline-offset: dt('tabs.tab.focus.ring.offset');
    }

    .p-tab:not(.p-tab-active):not(.p-disabled):hover {
        background: dt('tabs.tab.hover.background');
        border-color: dt('tabs.tab.hover.border.color');
        color: dt('tabs.tab.hover.color');
    }

    .p-tab-active {
        background: dt('tabs.tab.active.background');
        border-color: dt('tabs.tab.active.border.color');
        color: dt('tabs.tab.active.color');
    }

    .p-tabpanels {
        background: dt('tabs.tabpanel.background');
        color: dt('tabs.tabpanel.color');
        padding: dt('tabs.tabpanel.padding');
        outline: 0 none;
    }

    .p-tabpanel:focus-visible {
        box-shadow: dt('tabs.tabpanel.focus.ring.shadow');
        outline: dt('tabs.tabpanel.focus.ring.width') dt('tabs.tabpanel.focus.ring.style') dt('tabs.tabpanel.focus.ring.color');
        outline-offset: dt('tabs.tabpanel.focus.ring.offset');
    }

    .p-tablist-active-bar {
        z-index: 1;
        display: block;
        position: absolute;
        inset-block-end: dt('tabs.active.bar.bottom');
        height: dt('tabs.active.bar.height');
        background: dt('tabs.active.bar.background');
        transition: 250ms cubic-bezier(0.35, 0, 0.25, 1);
    }
`,cn={root:function(t){var o=t.props;return["p-tabs p-component",{"p-tabs-scrollable":o.scrollable}]}},dn=ye.extend({name:"tabs",style:un,classes:cn}),fn={name:"BaseTabs",extends:Te,props:{value:{type:[String,Number],default:void 0},lazy:{type:Boolean,default:!1},scrollable:{type:Boolean,default:!1},showNavigators:{type:Boolean,default:!0},tabindex:{type:Number,default:0},selectOnFocus:{type:Boolean,default:!1}},style:dn,provide:function(){return{$pcTabs:this,$parentInstance:this}}},ht={name:"Tabs",extends:fn,inheritAttrs:!1,emits:["update:value"],data:function(){return{d_value:this.value}},watch:{value:function(t){this.d_value=t}},methods:{updateValue:function(t){this.d_value!==t&&(this.d_value=t,this.$emit("update:value",t))},isVertical:function(){return this.orientation==="vertical"}}};function pn(e,t,o,g,h,f){return r(),m("div",Z({class:e.cx("root")},e.ptmi("root")),[he(e.$slots,"default")],16)}ht.render=pn;var vn={root:"p-tablist",content:function(t){var o=t.instance;return["p-tablist-content",{"p-tablist-viewport":o.$pcTabs.scrollable}]},tabList:"p-tablist-tab-list",activeBar:"p-tablist-active-bar",prevButton:"p-tablist-prev-button p-tablist-nav-button",nextButton:"p-tablist-next-button p-tablist-nav-button"},hn=ye.extend({name:"tablist",classes:vn}),mn={name:"BaseTabList",extends:Te,props:{},style:hn,provide:function(){return{$pcTabList:this,$parentInstance:this}}},mt={name:"TabList",extends:mn,inheritAttrs:!1,inject:["$pcTabs"],data:function(){return{isPrevButtonEnabled:!1,isNextButtonEnabled:!0}},resizeObserver:void 0,watch:{showNavigators:function(t){t?this.bindResizeObserver():this.unbindResizeObserver()},activeValue:{flush:"post",handler:function(){this.updateInkBar()}}},mounted:function(){var t=this;setTimeout(function(){t.updateInkBar()},150),this.showNavigators&&(this.updateButtonState(),this.bindResizeObserver())},updated:function(){this.showNavigators&&this.updateButtonState()},beforeUnmount:function(){this.unbindResizeObserver()},methods:{onScroll:function(t){this.showNavigators&&this.updateButtonState(),t.preventDefault()},onPrevButtonClick:function(){var t=this.$refs.content,o=this.getVisibleButtonWidths(),g=Ve(t)-o,h=Math.abs(t.scrollLeft),f=g*.8,c=h-f,j=Math.max(c,0);t.scrollLeft=tt(t)?-1*j:j},onNextButtonClick:function(){var t=this.$refs.content,o=this.getVisibleButtonWidths(),g=Ve(t)-o,h=Math.abs(t.scrollLeft),f=g*.8,c=h+f,j=t.scrollWidth-g,u=Math.min(c,j);t.scrollLeft=tt(t)?-1*u:u},bindResizeObserver:function(){var t=this;this.resizeObserver=new ResizeObserver(function(){return t.updateButtonState()}),this.resizeObserver.observe(this.$refs.list)},unbindResizeObserver:function(){var t;(t=this.resizeObserver)===null||t===void 0||t.unobserve(this.$refs.list),this.resizeObserver=void 0},updateInkBar:function(){var t=this.$refs,o=t.content,g=t.inkbar,h=t.tabs;if(g){var f=Ke(o,'[data-pc-name="tab"][data-p-active="true"]');this.$pcTabs.isVertical()?(g.style.height=At(f)+"px",g.style.top=Se(f).top-Se(h).top+"px"):(g.style.width=Nt(f)+"px",g.style.left=Se(f).left-Se(h).left+"px")}},updateButtonState:function(){var t=this.$refs,o=t.list,g=t.content,h=g.scrollTop,f=g.scrollWidth,c=g.scrollHeight,j=g.offsetWidth,u=g.offsetHeight,_=Math.abs(g.scrollLeft),S=[Ve(g),St(g)],y=S[0],b=S[1];this.$pcTabs.isVertical()?(this.isPrevButtonEnabled=h!==0,this.isNextButtonEnabled=o.offsetHeight>=u&&parseInt(h)!==c-b):(this.isPrevButtonEnabled=_!==0,this.isNextButtonEnabled=o.offsetWidth>=j&&parseInt(_)!==f-y)},getVisibleButtonWidths:function(){var t=this.$refs,o=t.prevButton,g=t.nextButton,h=0;return this.showNavigators&&(h=((o==null?void 0:o.offsetWidth)||0)+((g==null?void 0:g.offsetWidth)||0)),h}},computed:{templates:function(){return this.$pcTabs.$slots},activeValue:function(){return this.$pcTabs.d_value},showNavigators:function(){return this.$pcTabs.scrollable&&this.$pcTabs.showNavigators},prevButtonAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.previous:void 0},nextButtonAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.next:void 0},dataP:function(){return ze({scrollable:this.$pcTabs.scrollable})}},components:{ChevronLeftIcon:Rt,ChevronRightIcon:jt},directives:{ripple:ct}},bn=["data-p"],gn=["aria-label","tabindex"],yn=["data-p"],_n=["aria-orientation"],wn=["aria-label","tabindex"];function kn(e,t,o,g,h,f){var c=dt("ripple");return r(),m("div",Z({ref:"list",class:e.cx("root"),"data-p":f.dataP},e.ptmi("root")),[f.showNavigators&&h.isPrevButtonEnabled?Le((r(),m("button",Z({key:0,ref:"prevButton",type:"button",class:e.cx("prevButton"),"aria-label":f.prevButtonAriaLabel,tabindex:f.$pcTabs.tabindex,onClick:t[0]||(t[0]=function(){return f.onPrevButtonClick&&f.onPrevButtonClick.apply(f,arguments)})},e.ptm("prevButton"),{"data-pc-group-section":"navigator"}),[(r(),X(ke(f.templates.previcon||"ChevronLeftIcon"),Z({"aria-hidden":"true"},e.ptm("prevIcon")),null,16))],16,gn)),[[c]]):O("",!0),a("div",Z({ref:"content",class:e.cx("content"),onScroll:t[1]||(t[1]=function(){return f.onScroll&&f.onScroll.apply(f,arguments)}),"data-p":f.dataP},e.ptm("content")),[a("div",Z({ref:"tabs",class:e.cx("tabList"),role:"tablist","aria-orientation":f.$pcTabs.orientation||"horizontal"},e.ptm("tabList")),[he(e.$slots,"default"),a("span",Z({ref:"inkbar",class:e.cx("activeBar"),role:"presentation","aria-hidden":"true"},e.ptm("activeBar")),null,16)],16,_n)],16,yn),f.showNavigators&&h.isNextButtonEnabled?Le((r(),m("button",Z({key:1,ref:"nextButton",type:"button",class:e.cx("nextButton"),"aria-label":f.nextButtonAriaLabel,tabindex:f.$pcTabs.tabindex,onClick:t[2]||(t[2]=function(){return f.onNextButtonClick&&f.onNextButtonClick.apply(f,arguments)})},e.ptm("nextButton"),{"data-pc-group-section":"navigator"}),[(r(),X(ke(f.templates.nexticon||"ChevronRightIcon"),Z({"aria-hidden":"true"},e.ptm("nextIcon")),null,16))],16,wn)),[[c]]):O("",!0)],16,bn)}mt.render=kn;var xn={root:function(t){var o=t.instance,g=t.props;return["p-tab",{"p-tab-active":o.active,"p-disabled":g.disabled}]}},$n=ye.extend({name:"tab",classes:xn}),Tn={name:"BaseTab",extends:Te,props:{value:{type:[String,Number],default:void 0},disabled:{type:Boolean,default:!1},as:{type:[String,Object],default:"BUTTON"},asChild:{type:Boolean,default:!1}},style:$n,provide:function(){return{$pcTab:this,$parentInstance:this}}},bt={name:"Tab",extends:Tn,inheritAttrs:!1,inject:["$pcTabs","$pcTabList"],methods:{onFocus:function(){this.$pcTabs.selectOnFocus&&this.changeActiveValue()},onClick:function(){this.changeActiveValue()},onKeydown:function(t){switch(t.code){case"ArrowRight":this.onArrowRightKey(t);break;case"ArrowLeft":this.onArrowLeftKey(t);break;case"Home":this.onHomeKey(t);break;case"End":this.onEndKey(t);break;case"PageDown":this.onPageDownKey(t);break;case"PageUp":this.onPageUpKey(t);break;case"Enter":case"NumpadEnter":case"Space":this.onEnterKey(t);break}},onArrowRightKey:function(t){var o=this.findNextTab(t.currentTarget);o?this.changeFocusedTab(t,o):this.onHomeKey(t),t.preventDefault()},onArrowLeftKey:function(t){var o=this.findPrevTab(t.currentTarget);o?this.changeFocusedTab(t,o):this.onEndKey(t),t.preventDefault()},onHomeKey:function(t){var o=this.findFirstTab();this.changeFocusedTab(t,o),t.preventDefault()},onEndKey:function(t){var o=this.findLastTab();this.changeFocusedTab(t,o),t.preventDefault()},onPageDownKey:function(t){this.scrollInView(this.findLastTab()),t.preventDefault()},onPageUpKey:function(t){this.scrollInView(this.findFirstTab()),t.preventDefault()},onEnterKey:function(t){this.changeActiveValue(),t.preventDefault()},findNextTab:function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,g=o?t:t.nextElementSibling;return g?Ae(g,"data-p-disabled")||Ae(g,"data-pc-section")==="activebar"?this.findNextTab(g):Ke(g,'[data-pc-name="tab"]'):null},findPrevTab:function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,g=o?t:t.previousElementSibling;return g?Ae(g,"data-p-disabled")||Ae(g,"data-pc-section")==="activebar"?this.findPrevTab(g):Ke(g,'[data-pc-name="tab"]'):null},findFirstTab:function(){return this.findNextTab(this.$pcTabList.$refs.tabs.firstElementChild,!0)},findLastTab:function(){return this.findPrevTab(this.$pcTabList.$refs.tabs.lastElementChild,!0)},changeActiveValue:function(){this.$pcTabs.updateValue(this.value)},changeFocusedTab:function(t,o){Pt(o),this.scrollInView(o)},scrollInView:function(t){var o;t==null||(o=t.scrollIntoView)===null||o===void 0||o.call(t,{block:"nearest"})}},computed:{active:function(){var t;return Bt((t=this.$pcTabs)===null||t===void 0?void 0:t.d_value,this.value)},id:function(){var t;return"".concat((t=this.$pcTabs)===null||t===void 0?void 0:t.$id,"_tab_").concat(this.value)},ariaControls:function(){var t;return"".concat((t=this.$pcTabs)===null||t===void 0?void 0:t.$id,"_tabpanel_").concat(this.value)},attrs:function(){return Z(this.asAttrs,this.a11yAttrs,this.ptmi("root",this.ptParams))},asAttrs:function(){return this.as==="BUTTON"?{type:"button",disabled:this.disabled}:void 0},a11yAttrs:function(){return{id:this.id,tabindex:this.active?this.$pcTabs.tabindex:-1,role:"tab","aria-selected":this.active,"aria-controls":this.ariaControls,"data-pc-name":"tab","data-p-disabled":this.disabled,"data-p-active":this.active,onFocus:this.onFocus,onKeydown:this.onKeydown}},ptParams:function(){return{context:{active:this.active}}},dataP:function(){return ze({active:this.active})}},directives:{ripple:ct}};function Cn(e,t,o,g,h,f){var c=dt("ripple");return e.asChild?he(e.$slots,"default",{key:1,dataP:f.dataP,class:ue(e.cx("root")),active:f.active,a11yAttrs:f.a11yAttrs,onClick:f.onClick}):Le((r(),X(ke(e.as),Z({key:0,class:e.cx("root"),"data-p":f.dataP,onClick:f.onClick},f.attrs),{default:H(function(){return[he(e.$slots,"default")]}),_:3},16,["class","data-p","onClick"])),[[c]])}bt.render=Cn;const Dn={class:"fixed top-0 left-0 w-full bg-primary-reverse",style:{"z-index":"10"}},In={class:"grid mt-1 ml-1"},Sn={class:"max-w-3rem flex align-items-center"},An=["src"],Nn={class:"flex align-items-center"},Bn={key:0,class:"text-color font-bold p-1"},Pn={key:1,class:"text-color font-bold p-1"},Ln={class:"card flex mr-3 flex align-items-center",style:{"margin-left":"auto"}},qn={style:{display:"flex","align-items":"center"}},zn={style:{"flex-grow":"1",width:"0",overflow:"hidden"}},On={class:"mt-2"},En={class:"flex justify-content-end mt-2"},Mn={class:"flex inline-flex items-center justify-center gap-2"},Rn={class:"flex align-items-center"},jn={class:"flex flex-column"},Vn={class:"text-sm p-2"},Fn={class:"text-sm p-2"},Hn={class:"flex items-center gap-4 mb-4 p-2"},Kn={class:"flex flex-column gap-3"},Un={__name:"HeaderTabs",props:{types:Array,typeIndex:Number,tableId:String,tabItems:Array},emits:["clickType","switchToWelcome"],setup(e,{emit:t}){const{t:o}=fe(),g=R(!1);function h(){var L;const A=N.currentPage.value,P=(L=A==null?void 0:A.data)==null?void 0:L.logoPath;return P?N.pathFormated(P,A.imagesPath):"/images/logo_logo.png"}function f(){return N.getTable()}const c=R(),j=ve(()=>[{label:o("common.options"),items:[{label:o("common.pay"),icon:"pi pi-wallet",command:()=>{W()}},{label:o("common.call"),icon:"pi pi-user-plus",command:()=>{N.send_cmd(f(),{cmd:"call"},A=>{A.success?le.show_info(o("notification.call_msg")):le.show_warn(A.data)})}}]}]),u=A=>{c.value.toggle(A)},_=A=>{S.value.toggle(A)},S=R(),y=R(!1),b=R(),z=R();function W(){y.value=!0}function U(){A(b.value)?N.send_cmd(f(),{cmd:"pay",nif:b.value,note:z.value},P=>{P.success?(le.show_info(o("notification.pay_msg")),y.value=!1):le.show_error(o("common.failed"))}):le.show_warn(o("notification.cancel_msg"));function A(P){return!P||P.toString().length===9||P.toString().length===0}}function J(){z.value&&(z.value=void 0)}function V(){g.value=!0}return(A,P)=>(r(),m(G,null,[a("div",Dn,[a("div",In,[a("div",Sn,[a("img",{src:h(),class:"w-full",clickble:"",onClick:P[0]||(P[0]=()=>A.$emit("switchToWelcome"))},null,8,An)]),a("div",Nn,[e.tableId?(r(),m("p",Bn,v(A.$t("common.table"))+": "+v(e.tableId),1)):O("",!0),e.tableId?O("",!0):(r(),m("p",Pn,v(A.$t("common.takeAway")),1))]),a("div",Ln,[e.tableId?(r(),X(i(Q),{key:0,icon:"pi pi-bell",rounded:"","aria-label":"Filter",onClick:u,"aria-haspopup":"true","aria-controls":"overlay_menu"})):(r(),X(i(Q),{key:1,icon:"pi pi-question",rounded:"",onClick:V})),B(i(ot),{ref_key:"menu",ref:c,id:"overlay_menu",model:j.value,popup:!0},null,8,["model"])])]),a("div",qn,[a("div",null,[B(i(Q),{icon:"pi pi-bars",variant:"text",rounded:"","aria-label":"Filter",onClick:_,"aria-haspopup":"true","aria-controls":"tab_menu"}),B(i(ot),{ref_key:"tabMenu",ref:S,id:"tab_menu",model:e.tabItems,popup:!0},null,8,["model"])]),a("div",zn,[B(i(ht),{value:e.typeIndex,scrollable:"",showNavigators:!1},{default:H(()=>[B(i(mt),null,{default:H(()=>[(r(!0),m(G,null,ne(e.types,(L,M)=>(r(),X(i(bt),{value:M,onClick:()=>A.$emit("clickType",M),class:"text-sm md:text-lg lg:text-xl"},{default:H(()=>[be(v(L),1)]),_:2},1032,["value","onClick"]))),256))]),_:1})]),_:1},8,["value"])])])]),B(i(ge),{visible:y.value,"onUpdate:visible":P[4]||(P[4]=L=>y.value=L),header:"结账",class:"flex flex-column",modal:!0,dismissableMask:!0,onHide:J},{default:H(()=>[a("div",null,[P[6]||(P[6]=a("label",null,"NIF:",-1)),B(i(Vt),{modelValue:b.value,"onUpdate:modelValue":P[1]||(P[1]=L=>b.value=L),inputId:"withoutgrouping",useGrouping:!1,fluid:"",class:"w-full m-1"},null,8,["modelValue"])]),a("div",On,[a("label",null,v(A.$t("common.note"))+":",1),B(i(ft),{type:"text",modelValue:z.value,"onUpdate:modelValue":P[2]||(P[2]=L=>z.value=L),class:"w-full m-1"},null,8,["modelValue"])]),a("div",En,[B(i(Q),{label:i(o)("common.send"),onClick:P[3]||(P[3]=L=>U())},null,8,["label"])])]),_:1},8,["visible"]),B(i(ge),{visible:g.value,"onUpdate:visible":P[5]||(P[5]=L=>g.value=L),modal:"",dismissableMask:"",class:"h-full",style:{width:"90vw",maxWidth:"40rem",minWidth:"20rem"},draggable:!1},{header:H(()=>[a("div",Mn,[B(i(Ze),{icon:"pi pi-question",shape:"circle"}),a("span",Rn,v(i(o)("takeawayHelper.dialogTitle")),1)])]),default:H(()=>[a("div",jn,[a("span",Vn,v(i(o)("takeawayHelper.introduction")),1),a("span",Fn,v(i(o)("takeawayHelper.note_t"))+" "+v(i(o)("takeawayHelper.note_1")),1),a("div",Hn,[B(i(Je),{class:"w-full max-w-xl mx-auto"},{default:H(()=>[B(i(Ue),{value:"0"},{default:H(()=>[B(i(We),{class:"text-sm"},{default:H(()=>[be(v(i(o)("takeawayHelper.question_1")),1)]),_:1}),B(i(Qe),{class:"p-1"},{default:H(()=>[a("div",Kn,[a("span",null,v(i(o)("takeawayHelper.q_1_request_1")),1),a("span",null,v(i(o)("takeawayHelper.q_1_request_2")),1),a("span",null,v(i(o)("takeawayHelper.q_1_request_3")),1),a("span",null,v(i(o)("takeawayHelper.q_1_request_4")),1),a("span",null,v(i(o)("takeawayHelper.q_1_request_5")),1)])]),_:1})]),_:1})]),_:1})])])]),_:1},8,["visible"])],64))}},Wn={__name:"SwipeHint",props:{size:{type:String,default:"8rem"},duration:{type:Number,default:6e3},position:{type:String,default:"bottom"}},setup(e){const t=e,o=R(!0);Ge(()=>{t.duration>0&&setTimeout(()=>{o.value=!1},t.duration);const h=()=>{o.value=!1,window.removeEventListener("touchstart",h)};window.addEventListener("touchstart",h)});const g=ve(()=>{let h={left:"50%",transform:"translateX(-50%)",zIndex:99999,opacity:.5,pointerEvents:"none",textAlign:"center",position:"fixed"};return t.position==="top"?h.top="15%":t.position==="center"?(h.top="50%",h.transform="translate(-50%, -50%)"):h.bottom="15%",h});return(h,f)=>o.value?(r(),m("div",{key:0,class:"swipe-hint",style:Pe(g.value)},[a("div",{class:"hand",style:Pe({width:e.size,height:e.size,backgroundImage:"url(/images/hand_finger.png)"})},null,4)],4)):O("",!0)}},Qn=Ce(Wn,[["__scopeId","data-v-e5f3ff45"]]),Jn={class:"w-full h-full flex flex-column p-1"},Gn={class:"swiper-container-wrapper"},Zn={class:"fixed bottom-0 left-0 w-full h-3rem bg-primary-reverse p-3 z-[9999]"},Xn={class:"h-full flex align-items-center justify-content-between w-full"},Yn={class:"m-2"},eo={key:0,class:"m-2"},to={class:"m-2"},ao={style:{"max-height":"60vh","overflow-y":"auto","padding-bottom":"60px"}},so={class:"flex flex-column border-bottom-1"},no={key:0,class:"flex justify-content-between"},oo={class:"flex flex-column"},io={class:"font-bold"},lo={class:"text-right"},ro={key:1,class:"flex justify-content-between"},uo={class:"flex flex-column"},co={class:"font-bold"},fo={class:"text-right"},po={key:0},vo={key:1,class:"flex flex-column"},ho={class:"flex flex-column"},mo={class:"font-bold"},bo={class:"text-right"},go={class:"total-footer bg-primary-reverse"},rt=5,Ne="order_time_key",yo={__name:"HomePage",setup(e){const t=ut(),o=qt(),{t:g}=fe(),{locale:h}=fe(),f=R(0),c=R(!1),j=R([""]),u=R(0),_=re.cartItemCount,S=R(!1),y=R([]),b=R(0),z=R({}),W=R(!1),U=te.dishDatas,J=R(N.getOrderMenuTab()),V=R(null),A=R(null),P=R([]),L=R([]),M=R([]),d=R(!1);let $=null;const n=l=>{u.value=l.activeIndex,Oe()},F=l=>{$=l};Be(u,l=>{$&&$.activeIndex!==l&&$.slideTo(l);let p=N.getOrderMenuTab()[l];N.customDishAPI.customDishes.value.map(T=>T.name).includes(p)?(W.value=!0,z.value=N.customDishAPI.customDishes.value.find(T=>T.name==p)):W.value=!1});const s=(l,p,D,T)=>{N.rateDish(l,p,D),T&&le.show_success(g("notification.rating_submitted"))},C=(l,p,D)=>{if(z.value.name=="XIAOXIONG® RAMEN"&&l.id===1){const T=l.dishes[p];let K;T.dishid==47?D?K=q(3,!0,1):K=q(3,!1,1):K=q(3,!0,1),K!==void 0&&x(K)}if(z.value.name=="Menu Almoço"&&l.id===3){const T=l.dishes[p];let K;[1427,41].includes(T.dishid)?D?K=q(4,!0,0):K=q(4,!1,0):K=q(4,!0,0),K!==void 0&&x(K)}};function q(l,p,D){if(z.value={...z.value,types:z.value.types.map(T=>T.id===l?{...T,enable:p,minQuantity:p?D:0}:T)},p===!1)return l}function x(l){!z.value||!Array.isArray(z.value.types)||(z.value={...z.value,types:z.value.types.map(p=>p.id===l?{...p,dishes:p.dishes.map(D=>({...D,selected:!1}))}:p)})}function I(l){let p=N.getOrderMenuTab()[l];if(N.customDishAPI.customDishes.value.map(ae=>ae.name).includes(p)?(W.value=!0,z.value=N.customDishAPI.customDishes.value.find(ae=>ae.name==p)):W.value=!1,N.getMenu().length==0){console.log("exit");return}let K=U.value[l].mainDishes;te.showDishList(K)}const k=()=>{N.refreshTableFromServer(),N.getTableTotalAmount(b),S.value=!0},w=l=>{let p=l.id;l.org_id&&(p=l.org_id);for(let D=0;D<U.value.length;D++)if(U.value[D].id==p)for(const T in l){let K=T;T.startsWith("note")&&(K=K.replace("note","description")),U.value[D][K]=l[T]}};function ee(){return new Promise(l=>{let p=()=>{const D=N.formatedMenu.value;D.length>0?l(D):setTimeout(p,200)};p()})}function E(){return new Promise(l=>{let p=()=>{const D=N.getOrderMenuTab();D.length>0?l(D):setTimeout(p,200)};p()})}const Y=ve(()=>l=>{const p=N.dictinaryAPI.dictinary.value[l];return p?p[`text_${h.value.toLowerCase()}`]:l});Be([()=>N.formatedMenu.value,()=>h.value],([l,p])=>{if(!l||l.length===0){M.value=[];return}const D={};N.orderMenuTab.value;const T=l.map(me=>({...me,mainDishes:me.dishes.map(oe=>{const ie=oe.dish;if(D[ie.id])return D[ie.id];const _e={...ie,defaultName:ie.name,defaultSubname:ie.subname,name:se(ie,"name",p),note:se(ie,"note",p),subname:se(ie,"subname",p),quantity:0},$t=oe.subItems.map(et=>{const je=et;return{...et,defaultName:ie.name,defaultSubname:ie.subname,name:se(je,"name",p),note:se(je,"note",p),subname:se(je,"subname",p),quantity:0}}),Re={...oe,dish:_e,subItems:$t};return D[Re.id]=Re,Re})}));U.value.length;const K=te.getAllIncrementedDish();te.getIdsAndQuantity(K);const ae=re.cartDishs.value;He.compressToEncodedURIComponent(JSON.stringify(ae)),M.value=T,U.value=M.value,j.value=N.orderMenuTab.value,(K.length>0||ae.length>0)&&(te.cleanDishDataQty(),te.updateDishDataQty(K)),N.filterMenuTabs(d.value),console.log("languagedMenu updated via watch:",M.value),at(()=>{f.value++,$&&typeof $.update=="function"&&($.update(),$.slideTo(u.value))})},{immediate:!0,deep:!0}),Be(()=>N.orderMenuTab.value,l=>{J.value=l.map(p=>{const D=N.dictinaryAPI.dictinary.value[p];return D?D[`text_${h.value.toLowerCase()}`]:p}),y.value=pe(l),u.value=0});function se(l,p,D){return l?D==="en"?l[`${p}_en`]||l[p]:D==="zh"&&l[`${p}_cn`]||l[p]:""}async function de(){await ee();const l=await E();N.onMenuItemChanged=w,N.onRatingChanged=onRatingChanged,xt(),y.value=pe(l)}function pe(l){const p=[];for(let D=0;D<l.length;D++){const T=D;p.push({label:Y.value(l[D]),command:()=>{Xe(T),Oe()}})}return p}const Oe=()=>{at(()=>{const l=document.querySelector(".p-tablist-viewport"),p=document.querySelector(".p-tab.p-tab-active");if(l&&p){const D=p.offsetLeft-l.offsetWidth/2+p.offsetWidth/2;l.scrollTo({left:D,behavior:"smooth"})}window.scrollTo({top:0,behavior:"smooth"})})},Xe=l=>{I(l),u.value=l,Oe()},gt=()=>{var l=te.getAllIncrementedDish();A.value.showDishList(l)};function Ee(){return N.getTable()}N.params.port,V.value=N.table.value.order;function yt(l){var p=g("notification.too_fast",{remainTime:l});le.show_warn(p)}const _t=(l,p)=>{const D=[];for(let oe=0;oe<re.cartDishs.value.length;oe++){var T=re.cartDishs.value[oe];const ie=N.formateCustomDishNotes(T),_e=T.dis_count?T.dis_price:T.price;D.push({dishid:T.dishid,name:T.name,quantity:T.count,notes:ie,limit:T.limit,price:_e,dishNote:T.dishNote,category:T.category})}const K=te.getAllIncrementedDish();for(let oe=0;oe<K.length;oe++){var T=K[oe];if(T.quantity>0){const _e=T.dis_count?T.dis_price:T.price;D.push({dishid:T.id,name:T.defaultName,quantity:T.quantity,limit:T.limit,price:_e,dishNote:T.dishNote})}}if(D.length===0)return le.show_warn(g("notification.select_at_least_one")),!1;console.log("cart item:",D);const ae=JSON.parse(ce.getCookie(Ne)||"{}"),me=Date.now();if(!ae.startTime||me-ae.startTime>rt*1e3)ae.startTime=me,ae.uniCode||(ae.uniCode=Date.now().toString(36)+Math.random().toString(36).substring(2,5));else{const oe=rt-parseInt((me-ae.startTime)/1e3);yt(oe);return}return ce.setCookie(Ne,JSON.stringify(ae)),c.value=!0,N.submit_order({uniCode:ae.uniCode,name:l.name,note:l.note,table:Ee(),items:D},oe=>{const ie=JSON.parse(ce.getCookie(Ne)||"{}");ie.uniCode=void 0,ce.setCookie(Ne,JSON.stringify(ie)),p(oe)}),!0};function wt(){const l=ce.getCookie("language");l&&(h.value=l)}function Ye(){for(let l=0;l<U.value.length;l++){const p=U.value[l];p.quantity=0}c.value=!1,re.cleanAll()}Ge(async()=>{wt(),await de(),I(u.value),N.clear_order_data=()=>{Ye()},N.setOnOrderConfirmed(l=>{Ye();const p=l;le.show_success(g("notification.order_submitted",{id:p}))}),N.setOnShowError(l=>{c.value=!1,le.show_error(l)})});function kt(){ce.deleteCookie("login_time");const l=o.query.table;l?t.push({path:"/",query:{table:l}}):t.push({path:"/takeReserve"})}function De(l,p=!0){const D=p?re.cartDishs.value:te.getIdsAndQuantity(te.getAllIncrementedDish()),T=He.compressToEncodedURIComponent(JSON.stringify(D));ce.setCookie(l,T)}function Me(){N.isTakeaway()?(De("take_cartDish_normal",!1),De("take_cartDish_custom",!0)):(De("cartDish_normal",!1),De("cartDish_custom",!0))}function Ie(l,p=!0){const D=ce.getCookie(l);if(!D)return;const T=JSON.parse(He.decompressFromEncodedURIComponent(D));if(T&&T!=="undefined")try{p?re.cartDishs.value=T:te.updateDishDataQty(T)}catch(K){console.error("解析菜失败:",K)}}function xt(){N.isTakeaway()?(Ie("take_cartDish_normal",!1),Ie("take_cartDish_custom")):(Ie("cartDish_normal",!1),Ie("cartDish_custom"))}return Lt(()=>{Me()}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&Me()}),window.addEventListener("beforeunload",l=>{Me(),N.cleanup()}),(l,p)=>(r(),m(G,null,[a("div",Jn,[(r(),X(Un,{key:f.value,types:J.value,typeIndex:u.value,tabItems:y.value,tableId:Ee(),onClickType:Xe,onSwitchToWelcome:kt},null,8,["types","typeIndex","tabItems","tableId"])),p[4]||(p[4]=a("div",{class:"pb-8"},null,-1)),p[5]||(p[5]=a("div",{class:"pb-4 sm:pb-5 md:pb-5 lg:pb-5"},null,-1)),B(Qn,{duration:3e3,position:"center",size:"3rem"}),a("div",Gn,[(r(),X(i(Ot),{key:`swiper-${J.value.length}-${f.value}`,"space-between":20,"centered-slides":"","grab-cursor":!0,class:"w-full",autoHeight:!0,onSlideChange:n,onSwiper:F,"initial-slide":u.value},{default:H(()=>[(r(!0),m(G,null,ne(J.value,(D,T)=>(r(),X(i(Et),{key:T},{default:H(()=>[Math.abs(u.value-T)<=1&&(!W.value||u.value!==T)?(r(),X(Ya,{key:0,rateDish:s,likedItemsRef:P.value,dislikedItemsRef:L.value,tabIndex:T,onlyVeg:d.value},null,8,["likedItemsRef","dislikedItemsRef","tabIndex","onlyVeg"])):Math.abs(u.value-T)<=1&&W.value&&u.value===T?(r(),X(rn,{key:1,currentCustomDish:z.value,onTypeClick:C,tabindex:T},null,8,["currentCustomDish","tabindex"])):O("",!0)]),_:2},1024))),128))]),_:1},8,["initial-slide"]))]),p[6]||(p[6]=a("div",{style:{height:"60px"}},null,-1)),a("div",Zn,[a("div",Xn,[a("div",Yn,[i(N).isTakeaway()?O("",!0):(r(),X(i(Q),{key:0,label:l.$t("common.orders"),icon:"pi pi-list",class:"p-button-secondary",onClick:k},null,8,["label"]))]),i(N).developmentEnvironment.value?(r(),m("div",eo,[B(i(zt),{class:"text-sm",modelValue:d.value,"onUpdate:modelValue":p[0]||(p[0]=D=>d.value=D),onLabel:i(g)("common.showAll"),offLabel:i(g)("common.showOnlyVegetables"),onClick:p[1]||(p[1]=D=>i(N).filterMenuTabs(d.value))},null,8,["modelValue","onLabel","offLabel"])])):O("",!0),a("div",to,[B(i(vt),{value:i(_),severity:"danger",onClick:gt},{default:H(()=>p[3]||(p[3]=[a("i",{class:"pi pi-shopping-cart",style:{"font-size":"2rem"}},null,-1)])),_:1,__:[3]},8,["value"])])])])]),B(Ss,{ref_key:"cartRef",ref:A,checkout:_t,isTakeaway:!Ee()},null,8,["isTakeaway"]),B(i(ge),{visible:S.value,"onUpdate:visible":p[2]||(p[2]=D=>S.value=D),header:l.$t("common.completedOrders"),modal:"",style:{width:"80vw","max-width":"700px"}},{default:H(()=>{var D,T;return[a("div",ao,[a("div",so,[(D=b.value.adultPrice)!=null&&D.quantity&&b.value.adultPrice.quantity!=0?(r(),m("div",no,[a("div",oo,[a("span",io,v(l.$t("common.adult")),1),a("small",null,v(l.$t("common.quantity"))+": "+v(b.value.adultPrice.quantity),1)]),a("div",lo,[a("span",null,"€"+v((Number(b.value.adultPrice.price)*b.value.adultPrice.quantity).toFixed(2)),1)])])):O("",!0),(T=b.value.childrenPrice)!=null&&T.quantity&&b.value.childrenPrice.quantity!=0?(r(),m("div",ro,[a("div",uo,[a("span",co,v(l.$t("common.children")),1),a("small",null,v(l.$t("common.quantity"))+": "+v(b.value.childrenPrice.quantity),1)]),a("div",fo,[a("span",null,"€"+v((Number(b.value.childrenPrice.price)*b.value.childrenPrice.quantity).toFixed(2)),1)])])):O("",!0)]),i(N).table.value.order.length===0?(r(),m("div",po,v(l.$t("common.noOrders")),1)):(r(),m("div",vo,[(r(!0),m(G,null,ne(i(N).table.value.order,(K,ae)=>(r(),m("div",{key:ae,class:"flex justify-content-between border-bottom-1 pb-2"},[a("div",ho,[a("span",mo,v(i(N).getDishName(K)),1),a("small",null,v(l.$t("common.quantity"))+": "+v(K.quantity),1)]),a("div",bo,[a("span",null,"€"+v((K.price*K.quantity).toFixed(2)),1)])]))),128))]))]),a("div",go,v(l.$t("common.total"))+": €"+v(b.value.total),1)]}),_:1},8,["visible","header"])],64))}},Bo=Ce(yo,[["__scopeId","data-v-6d7b05b9"]]);export{Bo as default};
