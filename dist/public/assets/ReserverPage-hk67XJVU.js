import{b as F}from"./index-BpabYjYI.js";import{s as T,a as V}from"./index-Dm5l9bhU.js";import{s as B,a as S}from"./index-D05ZGsUb.js";import{s as $}from"./index-ZIVrwSXI.js";import{q as j,x as z,n as w,h,s as O,c as g,a as s,d as r,w as d,l as a,F as q,o as _,z as E,t as l,C as G,e as U,G as A}from"./index-D4WScVyT.js";import{s as H}from"./index-BcJUgWc9.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-D59IgB8y.js";import"./index-BCpTaFcl.js";import"./index-BuekEADY.js";import"./index-CSUVLsnf.js";import"./index-CtSmqy6i.js";import"./index-D016wXxm.js";import"./index-Du0mS8ae.js";const J={class:"card h-full",style:{display:"flex","flex-direction":"column"}},L={class:"flex flex-wrap gap-2 items-center justify-between"},Q={class:"m-0 font-bold text-2xl text-left flex-grow-1"},W={class:"flex gap-2 mt-1"},X={class:"font-bold"},Y={class:"font-bold text-green-800"},Z={class:"font-bold text-blue-800"},ee={class:"font-bold text-red-800"},te={key:0},se={key:1},ae={class:"text-center py-5"},le={class:"mt-3 text-gray-500"},oe={class:"flex flex-column gap-2"},re={key:0,class:"text-red-600"},ne={class:"font-bold text-lg"},ce={class:"font-bold text-lg"},de={class:"font-bold text-lg"},ie={class:"font-bold text-lg"},ue={class:"flex justify-content-end"},ve={__name:"ReserverPage",setup(me){const{t:e}=j(),y=z(),v=w.tableReserves,t=h(),m=h(!1);function C(o){t.value=o.data,m.value=!0,console.log(t.value)}const b=h({global:{value:null,matchMode:A.CONTAINS}}),P=O(()=>{const o=t.value.status;return o=="processing"?{label:e("reserverPage.processing")+"...",outlined:!0}:o=="voided"?{label:e("orderPage.voided"),outlined:!0}:{label:e("reserverPage.cancelReserve"),outlined:!1}});function R(){t.value.status=="processing"||t.value.status=="voided"||y.require({message:e("reserverPage.reserveCancellationMSG"),header:e("reserverPage.cancelReserve")+":"+t.value.name,rejectProps:{label:e("common.cancel"),severity:"secondary",outlined:!0},acceptProps:{label:e("common.confirm"),severity:"danger"},accept:()=>{w.cancelReserve({...t.value,status:"processing"},o=>{o.success?(t.value.status=o.data.status,m.value=!1):console.log("Cancellation Error:",o.data)})},reject:()=>{}})}function p(o){const n=v.value.filter(u=>u.financial_status==="voided"||u.status==="voided").length,f=v.value.filter(u=>u.status==="new"||u.status==="confirmed").length;switch(o){case"completed":return v.value.length-n-f;case"voided":return n;case"unCompleted":return f;default:return v.value.length}}const N=o=>({completed:"status-completed",confirmed:"status-confirmed",processing:"status-processing",new:"status-new",voided:"status-voided"})[o]||"",k=o=>({completed:e("orderPage.completed"),confirmed:e("orderPage.confirmed"),processing:e("reserverPage.processing"),new:e("orderPage.new"),voided:e("orderPage.voided")})[o]||o;return(o,n)=>{var x;const f=S,u=$,D=B,i=V,I=T,M=F;return _(),g(q,null,[s("div",J,[r(I,{value:a(v),tableStyle:"min-width: 50rem",dataKey:"id",paginator:"",rows:10,rowsPerPageOptions:[10,20,50],stripedRows:"",filters:b.value,scrollable:"",scrollHeight:"flex",onRowClick:C,selectionMode:"single"},{header:d(()=>[s("div",L,[s("h4",Q,l(a(e)("reserverPage.header")),1),r(D,null,{default:d(()=>[r(f,null,{default:d(()=>n[2]||(n[2]=[s("i",{class:"pi pi-search"},null,-1)])),_:1,__:[2]}),r(u,{modelValue:b.value.global.value,"onUpdate:modelValue":n[0]||(n[0]=c=>b.value.global.value=c),placeholder:a(e)("orderPage.find")},null,8,["modelValue","placeholder"])]),_:1})]),s("div",W,[s("label",X,"订台总数:"+l(p("all")),1),s("label",Y,"订台完成数:"+l(p("completed")),1),s("label",Z,"订台未完成数:"+l(p("unCompleted")),1),s("label",ee,"订台取消数:"+l(p("voided")),1)])]),empty:d(()=>[s("div",ae,[n[3]||(n[3]=s("i",{class:"pi pi-search",style:{"font-size":"3rem",color:"#ccc"}},null,-1)),s("p",le,l(a(e)("orderPage.notFound")),1)])]),default:d(()=>[r(i,{header:a(e)("orderPage.status")},{body:d(({data:c})=>[s("span",{class:E(["status-badge",N(c.status||"new")])},l(k(c.status||"new")),3)]),_:1},8,["header"]),r(i,{field:"name",header:"ID",sortable:""}),r(i,{field:"date",header:a(e)("reserverPage.dateTime"),sortable:""},{body:d(({data:c})=>[G(l(c.date+" "+c.time),1)]),_:1},8,["header"]),r(i,{field:"discount",header:a(e)("reserverPage.discount")},{body:d(({data:c})=>[c.discount?(_(),g("label",te,l(c.discount)+"%",1)):(_(),g("label",se))]),_:1},8,["header"]),r(i,{field:"customerName",header:a(e)("reserverPage.customerName")},null,8,["header"]),r(i,{field:"numberPeople",header:a(e)("reserverPage.numberPeople")},null,8,["header"]),r(i,{field:"phone",header:a(e)("reserverPage.phone")},null,8,["header"]),r(i,{field:"note",header:a(e)("reserverPage.note")},null,8,["header"])]),_:1},8,["value","filters"])]),r(a(H),{visible:m.value,"onUpdate:visible":n[1]||(n[1]=c=>m.value=c),header:a(e)("reserverPage.reserveDetails")+" (ID: "+((x=t.value)==null?void 0:x.name)+")",modal:"",style:{width:"450px"}},{default:d(()=>[s("div",oe,[t.value.financial_status||t.value.status==="voided"?(_(),g("label",re,l(t.value.financial_status?a(e)("reserverPage.cancelForClient"):a(e)("reserverPage.cancelForRestaurant")),1)):U("",!0),s("label",ne,l(a(e)("reserverPage.dateTime")+": "+t.value.date+" "+t.value.time),1),s("label",ce,l(a(e)("reserverPage.discount")+": "+(t.value.discount?t.value.discount+"%":"")),1),s("label",de,l(a(e)("reserverPage.customerName")+": "+t.value.customerName),1),s("label",ie,l(a(e)("reserverPage.numberPeople")+": "+t.value.numberPeople),1),s("label",null,l(a(e)("reserverPage.phone")+": "+t.value.phone),1),s("label",null,l(a(e)("reserverPage.email")+": "+t.value.email),1),s("label",null,l(a(e)("reserverPage.creationDate")+": "+(t.value.creationDate?t.value.creationDate:"")),1),s("label",null,l(a(e)("reserverPage.note")+": "+t.value.note),1),s("div",ue,[r(M,{label:P.value.label,outlined:P.value.outlined,onClick:R},null,8,["label","outlined"])])])]),_:1},8,["visible","header"])],64)}}},De=K(ve,[["__scopeId","data-v-36626185"]]);export{De as default};
