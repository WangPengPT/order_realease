import{s as T}from"./index-BEPSesFs.js";import{a as D}from"./index-DH3rseWb.js";import{s as q}from"./index-CYGDddnb.js";import{s as E}from"./index-sdHM58ez.js";import{C as h,Q as k}from"./CodeMaker-IOgtdCDu.js";import{q as U,h as u,u as B,c as w,a as t,b as s,t as m,l as n,e as x,f as N,w as Q,F as S,o as _}from"./index-CGpIDtCX.js";import"./index-C3Xt7ZPr.js";import"./_commonjsHelpers-gnU0ypJ3.js";const j={class:"flex flex-wrap align-items-center"},F={class:"font-bold"},L={class:"flex flex-wrap justify-content-center w-full mt-2"},M={key:0,class:"flex flex-column align-items-center justify-content-center"},A={class:"font-bold"},I={key:1,class:"flex flex-column align-items-center justify-content-center gap-3"},O={class:"font-bold"},G={class:"flex flex-row gap-3"},z={for:"on_label"},H={for:"on_label"},te={__name:"QCodePage",setup(J){const{t:o}=U(),p=u(!1),y=B(),g=u(0);u("");const b=u(0),a=u(""),v=u(null),C=u(!1);async function V(){const l=document.createElement("canvas");for(let e=g.value;e<=b.value;e++){const r=e<10?`0${e}`:`${e}`,d=window.env.QR_ADDR+h.SimpleEncode(r);console.log("生成二维码数据: ",d),await k.toCanvas(l,d,{width:300});const c=document.createElement("a");c.download=`${r}.png`,c.href=l.toDataURL("image/png"),c.click(),await new Promise(f=>setTimeout(f,300))}console.log("全部二维码下载完毕")}const P=()=>{if(a.value){const l=a.value<10?`0${a.value}`:`${a.value}`;let e=window.env.QR_ADDR+h.SimpleEncode(l);console.log("The qrcode data: ",e),k.toCanvas(v.value,e,{width:300},r=>{r?console.error(r):C.value=!0})}},$=()=>{if(v.value){const l=document.createElement("a"),e=a.value<10?`0${a.value}`:`${a.value}`;l.download=`座号-${e}-二维码.png`,l.href=v.value.toDataURL("image/png"),l.click()}};function R(){if(!a.value){y.add({severity:"error",summary:o("common.error"),detail:o("optionPages.emptyTableMsg"),life:3e3});return}P(),y.add({severity:"success",summary:o("common.success"),detail:o("optionPages.createQrMsg")+(a.value<10?"0"+Number(a.value):a.value),life:3e3})}return(l,e)=>{const r=E,d=q,c=D,f=T;return _(),w(S,null,[t("div",j,[s(r,{modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=i=>p.value=i),class:"m-4"},null,8,["modelValue"]),t("p",F,m(n(o)("optionPages.createQrOne")),1)]),t("div",L,[p.value?x("",!0):(_(),w("div",M,[t("h1",A,m(n(o)("optionPages.tableQr")),1),s(d,{type:"number",modelValue:a.value,"onUpdate:modelValue":e[1]||(e[1]=i=>a.value=i),placeholder:n(o)("optionPages.enterTable"),class:"m-3"},null,8,["modelValue","placeholder"]),s(c,{label:n(o)("optionPages.createQr"),onClick:R},null,8,["label"]),t("div",null,[t("canvas",{ref_key:"qrCanvas",ref:v},null,512)]),C.value?(_(),N(c,{key:0,label:n(o)("optionPages.downloadQr"),icon:"pi pi-download",onClick:$},null,8,["label"])):x("",!0)])),p.value?(_(),w("div",I,[t("h2",O,m(n(o)("optionPages.tableQrOne")),1),t("div",G,[s(f,{variant:"on"},{default:Q(()=>[s(d,{type:"number",modelValue:g.value,"onUpdate:modelValue":e[2]||(e[2]=i=>g.value=i),style:{"max-width":"100px"}},null,8,["modelValue"]),t("label",z,m(n(o)("optionPages.startTable")),1)]),_:1}),s(f,{variant:"on"},{default:Q(()=>[s(d,{type:"number",modelValue:b.value,"onUpdate:modelValue":e[3]||(e[3]=i=>b.value=i),style:{"max-width":"100px"}},null,8,["modelValue"]),t("label",H,m(n(o)("optionPages.endTable")),1)]),_:1})]),s(c,{label:n(o)("optionPages.createDownloadQr"),onClick:V},null,8,["label"])])):x("",!0)])],64)}}};export{te as default};
