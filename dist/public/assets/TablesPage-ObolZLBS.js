import{s as G}from"./index-DeQhilv7.js";import{s as ee}from"./index-BD_V1jqp.js";import{b as J}from"./index-oge4_c7I.js";import{q as H,s as Q,f as j,o as T,w as y,a as r,d as n,h as $,n as x,c as O,e as S,F as L,E as se,t as C,l as q,A as I,z as oe,u as le,x as K,i as ne,H as ie,C as z,J as Y}from"./index-BULDcCGn.js";import{s as re}from"./index-_mb50UGy.js";import{s as te}from"./index-6tqVHg-v.js";import{s as de}from"./index-CbXyr5lH.js";import{s as ue}from"./index-D6Tk2Gzn.js";import{s as ce}from"./index-B9Up2pcY.js";import{s as pe}from"./index-BIZYGEVw.js";import{Q as me,C as Z}from"./CodeMaker-IOgtdCDu.js";import{_ as be}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{s as ve}from"./index-CyZejRsm.js";import{a as fe,s as ge}from"./index-BFnt7Pfi.js";import"./index-MPeAesa8.js";import"./index-R0uzDHrX.js";import"./index-BQhRBBUL.js";import"./index-CrZnt2vz.js";import"./_commonjsHelpers-gnU0ypJ3.js";import"./index-kA6imsrS.js";import"./index-q9kZl5Ge.js";import"./index-CfU8x9jY.js";import"./index-CW2B1p7O.js";const ye={class:"p-menuitem-content"},Te={__name:"TableMenuBar",props:{filterStatu:String},setup(E){const{t:b}=H(),a=Q(()=>[{label:b("tablesPage.all"),value:"Todos",icon:"pi pi-circle-fill",severity:"contrast"},{label:b("tablesPage.available"),value:"Livre",icon:"pi pi-circle-fill",severity:"success"},{label:b("tablesPage.dining"),value:"Ocupado",icon:"pi pi-circle-fill",severity:"danger"},{label:b("tablesPage.reserved"),value:"Reservado",icon:"pi pi-circle-fill",severity:"info"},{label:b("tablesPage.paid"),value:"Pago",icon:"pi pi-circle-fill",severity:"help"}]);return(P,v)=>{const f=J,p=re;return T(),j(p,{model:a.value,breakpoint:"355px",class:"border-0"},{item:y(({item:c})=>[r("div",ye,[n(f,{label:c.label,icon:c.icon,severity:c.severity,variant:"outlined",raised:"",onClick:w=>P.$emit("update:filterStatu",c.value)},null,8,["label","icon","severity","onClick"])])]),_:1},8,["model"])}}},he={class:"overflow-auto",style:{height:"calc(100vh - 250px)"}},$e={class:"grid m-2"},Pe={class:"flex justify-content-center align-items-center w-100"},we={class:"relative"},_e={class:"text-center text-2xl font-bold"},Ce={key:0},ke={class:"text-center"},xe={class:"text-center text-lg"},Se={class:"text-center text-lg font-bold"},Ne={key:1,class:"flex flex-wrap justify-content-center"},Oe={class:"font-bold text-xl"},Ee={class:"ont-bold"},Me={class:"flex flex-wrap justify-content-end mt-3"},Ve={__name:"TableGrid",props:{filteredTables:Array,editMode:Boolean},emits:["openTableDetail","removeTable","addNewTable"],setup(E,{emit:b}){const{t:a}=H(),P=$(!1),v=$(),f=$(!1),p=$({nif:void 0,note:void 0}),c=Q(()=>[{label:a("tablesPage.available"),value:"Livre"},{label:a("tablesPage.dining"),value:"Ocupado"},{label:a("tablesPage.reserved"),value:"Reservado"},{label:a("tablesPage.paid"),value:"Pago"}]);function w(d){return c.value.find(i=>i.value===d)}function M(d){return Number(d.peopleType.children)+Number(d.peopleType.adults)}function s(d){return!d||!Array.isArray(d)?0:parseFloat(d.reduce((i,h)=>i+h.price*h.quantity,0).toFixed(2))}function A(d){const i="m-1 border-3 border-gray-500 ";let h="";switch(d){case"Livre":break;case"Ocupado":h="border-red-300 bg-red-100";break;case"Reservado":h="border-blue-300 bg-blue-100";break;case"Pago":h="border-purple-300 bg-purple-100";break;default:h="border-gray-500 bg-gray-100"}return i+h}function R(d,i){i=="pay"?(p.value=d.nif_note,f.value=!0):d["msg_"+i]=!1,x.socket.emit("click_msg",d.id,{cmd:i})}function F(){document.getElementById("tipsAudio").play()}return x.playSoundFun=F,(d,i)=>{const h=J,B=de,V=ee,U=G,o=te;return T(),O(L,null,[r("div",he,[r("div",$e,[i[7]||(i[7]=r("audio",{id:"tipsAudio",src:"/sound/tips.mp3",preload:"auto"},null,-1)),E.editMode?(T(),j(B,{key:0,class:"m-1 border-3 border-gray-500 flex justify-content-center align-items-center",style:{"min-width":"150px","min-height":"150px","max-width":"175px","max-height":"175px"},onClick:i[0]||(i[0]=e=>P.value=!0)},{content:y(()=>[r("div",Pe,[n(h,{text:"",icon:"pi pi-plus",severity:"contrast",size:"large"})])]),_:1})):S("",!0),(T(!0),O(L,null,se(E.filteredTables,e=>(T(),j(B,{class:oe(A(e.status)),style:{"min-width":"150px","min-height":"150px","max-width":"175px","max-height":"175px"},onClick:u=>E.editMode?"":d.$emit("openTableDetail",e.id)},{header:y(()=>[r("div",we,[e.msg_pay?(T(),j(h,{key:0,onClick:I(u=>R(e,"pay"),["stop"]),icon:"pi pi-credit-card",rounded:"",raised:"",severity:"danger",class:"absolute",style:{top:"-13px",right:"5px","z-index":"10"}},null,8,["onClick"])):S("",!0),e.msg_call?(T(),j(h,{key:1,onClick:I(u=>R(e,"call"),["stop"]),icon:"pi pi-bell",rounded:"",raised:"",severity:"danger",class:"absolute",style:{top:"-13px",right:"60px","z-index":"10"}},null,8,["onClick"])):S("",!0)])]),content:y(()=>[r("p",_e,C(q(a)("tablesPage.tableNum"))+": "+C(e.id),1),E.editMode?S("",!0):(T(),O("div",Ce,[r("p",ke,C(w(e.status).label),1),r("p",xe,C(M(e)+" "+q(a)("tablesPage.people")),1),r("p",Se,C(s(e.order))+"€",1)])),E.editMode?(T(),O("div",Ne,[n(h,{icon:"pi pi-trash",severity:"danger",outlined:"",raised:"",class:"m-2",onClick:I(u=>d.$emit("removeTable",e.id),["stop"])},null,8,["onClick"])])):S("",!0)]),_:2},1032,["class","onClick"]))),256))])]),n(U,{visible:f.value,"onUpdate:visible":i[1]||(i[1]=e=>f.value=e),modal:!0,dismissableMask:!0,header:d.$t("tablesPage.payInfo"),style:{"min-width":"300px","max-width":"450px"},onHide:i[2]||(i[2]=e=>p.value={nif:void 0,note:void 0})},{default:y(()=>{var e,u;return[r("label",Oe,"NIF:"+C((e=p.value)!=null&&e.nif?p.value.nif:q(a)("tablesPage.noNif")),1),n(V),r("label",Ee,C(q(a)("tablesPage.note"))+": "+C((u=p.value)!=null&&u.note?p.value.note:q(a)("tablesPage.noNote")),1)]}),_:1},8,["visible","header"]),n(U,{visible:P.value,"onUpdate:visible":i[5]||(i[5]=e=>P.value=e),modal:!0,dismissableMask:!0,header:d.$t("tablesPage.addTable"),onHide:i[6]||(i[6]=e=>v.value=void 0)},{default:y(()=>[n(o,{modelValue:v.value,"onUpdate:modelValue":i[3]||(i[3]=e=>v.value=e),inputId:"horizontal-buttons",showButtons:"",buttonLayout:"horizontal",prefix:`${q(a)("tablesPage.tableNum")}：${v.value<10?"0":""}`,step:1,min:1,max:9999,placeholder:d.$t("tablesPage.enterTable"),fluid:""},{incrementbuttonicon:y(()=>i[8]||(i[8]=[r("span",{class:"pi pi-plus"},null,-1)])),decrementbuttonicon:y(()=>i[9]||(i[9]=[r("span",{class:"pi pi-minus"},null,-1)])),_:1},8,["modelValue","prefix","placeholder"]),r("div",Me,[n(h,{label:d.$t("tablesPage.createTable"),onClick:i[4]||(i[4]=e=>{d.$emit("addNewTable",v.value),P.value=!1})},null,8,["label"])])]),_:1},8,["visible","header"])],64)}}},De={class:"flex flex-column justify-content-center align-items-center"},qe={for:"Total"},je={key:0,class:"flex flex-wrap justify-content-center align-items-center"},Ae={for:"Adult"},Be={key:1,class:"flex flex-wrap justify-content-center align-items-center"},Ue={for:"Children"},Re={class:"flex flex-wrap justify-content-center align-items-center m-2"},Fe={class:"flex flex-wrap justify-content-center align-items-center m-3 mb-5"},ze={class:"m-2"},Le={key:0,class:"flex flex-wrap justify-content-between align-items-center"},Je={key:1,class:"flex flex-wrap justify-content-between align-items-center"},He={class:"flex flex-column"},Qe={__name:"TableDetail",props:{selectedTable:Object,isEditTable:Boolean},emits:["tableEditConfirm","cleanTable","showTableOrders","onEdit"],setup(E,{emit:b}){const{t:a}=H();let P=!1;const v=le(),f=$(!1),p=$(!1),c=E,w=b;function M(){w("onEdit",c.selectedTable.id,l=>{s.value=JSON.parse(JSON.stringify(l)),f.value=!0})}const s=$(JSON.parse(JSON.stringify(c.selectedTable))),A=$([{label:a("tablesPage.available"),value:"Livre",severity:"success"},{label:a("tablesPage.dining"),value:"Ocupado",severity:"danger"},{label:a("tablesPage.reserved"),value:"Reservado",severity:"info"},{label:a("tablesPage.paid"),value:"Pago",severity:"help"}]);function R(){P||(p.value=!1,s.value=JSON.parse(JSON.stringify(c.selectedTable))),P=!1}const F=Q(()=>Number(s.value.peopleType.children)+Number(s.value.peopleType.adults));function d(){s.value.status?(w("tableEditConfirm",s.value,l=>{(l==null?void 0:l.success)==!0?(v.add({severity:"success",summary:a("common.success"),detail:l.message,life:3e3}),f.value=!1):v.add({severity:"error",summary:a("common.error"),detail:l.message,life:3e3})}),p.value=!1,P=!0):v.add({severity:"error",summary:a("common.error"),detail:a("tablesPage.stateError"),life:3e3})}function i(){p.value=!0}function h(){f.value=!1,s.value=JSON.parse(JSON.stringify(c.selectedTable))}function B(){return A.value.find(l=>l.value===s.value.status)}function V(l,t){const m=Number(t);if(l==="Adult"){Number(s.value.peopleType.adults)+m<=0?s.value.peopleType.adults=0:s.value.peopleType.adults=Number(s.value.peopleType.adults)+m,s.value.people=Number(s.value.peopleType.adults)+Number(s.value.peopleType.children);return}if(l==="Children"){s.value.peopleType.children+m<=0?s.value.peopleType.children=0:s.value.peopleType.children=Number(s.value.peopleType.children)+m,s.value.people=Number(s.value.peopleType.adults)+Number(s.value.peopleType.children);return}}const U=K(),o=()=>{U.require({message:a("tablesPage.clearMsg.1")+s.value.id+a("tablesPage.clearMsg.2"),header:a("tablesPage.confirmClear"),icon:"pi pi-info-circle",rejectLabel:a("common.cancel"),rejectProps:{label:a("common.cancel"),severity:"secondary",outlined:!0},acceptProps:{label:a("common.confirm"),severity:"danger"},accept:()=>{w("cleanTable",s.value.id,l=>{(l==null?void 0:l.success)===!1?v.add({severity:"error",summary:a("common.error"),detail:l.message,life:3e3}):(l==null?void 0:l.success)===!0&&v.add({severity:"success",summary:a("common.success"),detail:`${a("tablesPage.clearSucMsg.1")}${s.value.id}${a("tablesPage.clearSucMsg.2")}`,life:3e3})})},reject:()=>{v.add({severity:"error",summary:a("common.operation"),detail:`${a("tablesPage.clearCancelMsg.1")}${s.value.id}${a("tablesPage.clearCancelMsg.2")}`,life:3e3})}})},e=$(null);function u(){window.open(window.env.QR_ADDR+Z.SimpleEncode(c.selectedTable.id),"_blank")}const D=async()=>{if(e.value)try{await me.toCanvas(e.value,window.env.QR_ADDR+Z.SimpleEncode(c.selectedTable.id),{width:175,margin:2,color:{dark:"#000000",light:"#ffffff"}})}catch(l){console.error("生成二维码失败:",l)}};return ne(()=>{D()}),ie(()=>window.env.QR_ADDR+Z.SimpleEncode(c.selectedTable.id),D),(l,t)=>{var W,X;const m=pe,g=ce,_=J,N=ue,ae=G;return T(),O(L,null,[r("div",De,[r("div",null,[n(g,{class:"m-2",variant:"on"},{default:y(()=>[n(m,{id:"Total",modelValue:F.value,"onUpdate:modelValue":t[0]||(t[0]=k=>F.value=k),autocomplete:"off",disabled:""},null,8,["modelValue"]),r("label",qe,C(q(a)("tablesPage.totalPeople")),1)]),_:1})]),f.value?(T(),O("div",je,[n(_,{icon:"pi pi-minus",rounded:"","aria-label":"Filter",size:"small",onClick:t[1]||(t[1]=k=>V("Adult",-1))}),n(g,{class:"m-2",variant:"on"},{default:y(()=>[n(m,{id:"Adult",modelValue:s.value.peopleType.adults,"onUpdate:modelValue":t[2]||(t[2]=k=>s.value.peopleType.adults=k),autocomplete:"off"},null,8,["modelValue"]),r("label",Ae,C(q(a)("tablesPage.adult")),1)]),_:1}),n(_,{icon:"pi pi-plus",rounded:"","aria-label":"Filter",size:"small",onClick:t[3]||(t[3]=k=>V("Adult",1))})])):S("",!0),f.value?(T(),O("div",Be,[n(_,{icon:"pi pi-minus",rounded:"","aria-label":"Filter",size:"small",onClick:t[4]||(t[4]=k=>V("Children",-1))}),n(g,{class:"m-2",variant:"on"},{default:y(()=>[n(m,{id:"Children",modelValue:s.value.peopleType.children,"onUpdate:modelValue":t[5]||(t[5]=k=>s.value.peopleType.children=k),autocomplete:"off"},null,8,["modelValue"]),r("label",Ue,C(q(a)("tablesPage.child")),1)]),_:1}),n(_,{icon:"pi pi-plus",rounded:"","aria-label":"Filter",size:"small",onClick:t[6]||(t[6]=k=>V("Children",1))})])):S("",!0)]),r("div",Re,[f.value?S("",!0):(T(),j(_,{key:0,icon:"pi pi-circle-fill",variant:"outlined",label:(W=B())==null?void 0:W.label,severity:(X=B())==null?void 0:X.severity,onClick:i},null,8,["label","severity"])),f.value?(T(),j(N,{key:1,modelValue:s.value.status,"onUpdate:modelValue":t[7]||(t[7]=k=>s.value.status=k),options:A.value,optionLabel:"label",optionValue:"value",allowEmptySelection:!1,allowEmpty:"",invalid:s.value.status===null},null,8,["modelValue","options","invalid"])):S("",!0)]),r("div",Fe,[r("canvas",{ref_key:"qrCanvas",ref:e,class:"p-1",style:{border:"2px solid #b0b0b0","border-radius":"10px"},onClick:u},null,512)]),r("div",ze,[f.value?S("",!0):(T(),O("div",Le,[n(_,{label:l.$t("tablesPage.orderDetails"),severity:"success",onClick:t[8]||(t[8]=()=>l.$emit("showTableOrders"))},null,8,["label"]),n(_,{label:l.$t("tablesPage.clear"),onClick:o,severity:"danger",class:"m-1"},null,8,["label"]),n(_,{label:l.$t("tablesPage.edit"),onClick:M,class:"m-1"},null,8,["label"])])),f.value?(T(),O("div",Je,[n(_,{label:l.$t("tablesPage.cancelEdit"),severity:"danger",raised:"",class:"m-2",onClick:h},null,8,["label"]),n(_,{label:l.$t("tablesPage.saveEdit"),severity:"success",raised:"",class:"m-2",onClick:d},null,8,["label"])])):S("",!0)]),n(ae,{visible:p.value,"onUpdate:visible":t[10]||(t[10]=k=>p.value=k),modal:"",header:l.$t("tablesPage.editState"),closable:!0,dismissableMask:!0,onHide:R},{default:y(()=>[r("div",He,[n(N,{modelValue:s.value.status,"onUpdate:modelValue":t[9]||(t[9]=k=>s.value.status=k),options:A.value,optionLabel:"label",optionValue:"value",allowEmptySelection:!1,allowEmpty:"",invalid:s.value.status===null},null,8,["modelValue","options","invalid"]),n(_,{label:l.$t("common.confirm"),class:"mt-3",onClick:d},null,8,["label"])])]),_:1},8,["visible","header"])],64)}}},Ie=be(Qe,[["__scopeId","data-v-fd40c96d"]]),Ze={key:0},Ge=["disabled","onClick"],Ke={class:"text-center py-5"},We={class:"text-gray-500"},Xe={class:"flex flex-wrap justify-content-end justify-content-between align-items-center mt-1"},Ye={class:"font-bold"},el={__name:"TableOrderView",props:{selectedTable:Object},emits:["saveOrder","cancelOrderEdit","showToast"],setup(E,{emit:b}){var U;const{t:a}=H(),P=E,v=b,f=$((U=P.selectedTable.order)==null?void 0:U.sort((o,e)=>e.price-o.price).filter(o=>o.quantity!=0)),p=$(f.value.filter(o=>o.price!=0)),c=$([]),w=$(!1),M=$(!1);function s(o){let e=0;return o.forEach(u=>{e+=u.price*u.quantity}),e.toFixed(2)}function A(){w.value=!w.value,!w.value&&c.value.length>0&&V()}function R(o){if(c.value.find(e=>e.dishid===o.dishid))c.value.find(e=>e.dishid===o.dishid).quantity+=1;else{const e={...o,quantity:1};c.value.push(e)}o.quantity-=1}function F(){let o="| ";return c.value.forEach(e=>{const u=f.value.find(D=>D.dishid===e.dishid);u&&(o+=e.dishid+"-"+x.getDishName(e)+" "+(u.quantity+e.quantity)+" -> "+u.quantity+` | 
`)}),o}function d(o){v("cancelOrderEdit"),v("showToast","error",a("common.operation"),a("tablesPage.editCancelMsg")+`
`+o),c.value.forEach(e=>{f.value.find(u=>u.dishid===e.dishid).quantity+=e.quantity}),c.value=[]}function i(o){var e;v("saveOrder",c.value),v("showToast","info",a("common.operation"),a("tablesPage.ediSucMsg")+`
`+o),c.value=[],f.value=(e=P.selectedTable.order)==null?void 0:e.sort((u,D)=>D.price-u.price).filter(u=>u.quantity!=0)}const h=K();function B(o){return Array.isArray(o)?o.map(Y):Y(o)}const V=()=>{let o=!1;const e=B(F());h.require({message:e,escape:!0,header:a("tablesPage.editOrder"),rejectLabel:a("common.cancel"),rejectProps:{label:a("common.cancel"),severity:"secondary",outlined:!0},acceptProps:{label:a("common.cancel"),severity:"danger"},accept:()=>{o=!0,i(e)},reject:()=>{o=!0,d(e)},onHide:()=>{o||d(e)}})};return(o,e)=>{const u=fe,D=te,l=ge,t=ve,m=J;return T(),O(L,null,[r("div",null,[n(l,{value:M.value?p.value:f.value,scrollable:"",scrollHeight:"flex",style:{"max-height":"350px"}},{empty:y(()=>[r("div",Ke,[r("p",We,C(o.$t("tablesPage.noOrder")),1)])]),default:y(()=>[n(u,{field:"dishid",header:"ID"}),n(u,{header:o.$t("tablesPage.name")},{body:y(g=>[z(C(q(x).getDishName(g.data)),1)]),default:y(()=>[e[2]||(e[2]=z(" > ",-1))]),_:1,__:[2]},8,["header"]),n(u,{field:"price",header:o.$t("tablesPage.price")},null,8,["header"]),n(u,{field:"quantity",header:o.$t("tablesPage.quantity")},{body:y(g=>[w.value?S("",!0):(T(),O("label",Ze,C(g.data.quantity),1)),w.value?(T(),j(D,{key:1,modelValue:g.data.quantity,"onUpdate:modelValue":_=>g.data.quantity=_,inputId:"minmax-buttons",mode:"decimal",showButtons:"",min:0,style:{width:"5rem"},fluid:"",inputStyle:{cursor:"not-allowed","background-color":"#f5f5f5"},readonly:""},{incrementbuttonicon:y(()=>e[3]||(e[3]=[r("span",{style:{display:"none"}},null,-1)])),decrementbuttonicon:y(()=>[r("span",{class:"p-inputnumber-button-icon",disabled:g.data.quantity<=0,onClick:_=>R(g.data)},e[4]||(e[4]=[r("i",{class:"pi pi-angle-down"},null,-1)]),8,Ge)]),_:2},1032,["modelValue","onUpdate:modelValue"])):S("",!0)]),_:1},8,["header"]),n(u,{header:o.$t("tablesPage.totalPrice")},{body:y(g=>[z(C(s([g.data])),1)]),default:y(()=>[e[5]||(e[5]=z(" > ",-1))]),_:1,__:[5]},8,["header"])]),_:1},8,["value"])]),r("div",Xe,[r("label",Ye,C(`${o.$t("tablesPage.total")}: ${p.value.length>0?s(p.value):0}`),1),r("label",null,[n(t,{modelValue:M.value,"onUpdate:modelValue":e[0]||(e[0]=g=>M.value=g)},null,8,["modelValue"]),z(" "+C(o.$t("tablesPage.showNonZero")),1)]),n(m,{label:w.value?o.$t("common.save"):o.$t("common.edit"),onClick:e[1]||(e[1]=g=>A())},null,8,["label"])])],64)}}},ll={class:"flex flex-wrap justify-content-between align-items-center m-1"},Cl={__name:"TablesPage",setup(E){const{t:b}=H(),a=K(),P=$("Todos"),v=$(!1),f=$(!1),p=$({id:0}),c=$(!1),w=$({}),M=Q(()=>P.value==="Todos"?x.tables.value:x.tables.value.filter(l=>l.status===P.value));function s(){v.value=!0}function A(){v.value==!0&&(v.value=!1)}function R(l){a.require({message:b("tablesPage.removeTableMsg.1")+l+b("tablesPage.removeTableMsg.2"),header:b("tablesPage.removeTableHeader"),icon:"pi pi-trash",rejectProps:{label:b("common.cancel"),severity:"secondary",outlined:!0},acceptProps:{label:b("common.confirm"),severity:"danger"},accept:()=>{const t=x.deleteTable(l);t!=null?u.add({severity:"error",summary:t.title,detail:t.message,life:3e3}):u.add({severity:"info",summary:b("common.success"),detail:b("tablesPage.removeSucMsg.1")+l+b("tablesPage.removeSucMsg.2"),life:3e3})},reject:()=>{}})}async function F(l){l<10&&(l="0"+l);const t=await x.addNewTable(l);t!==void 0?u.add({severity:"error",summary:t.title,detail:t.message,life:3e3}):u.add({severity:"info",summary:b("common.success"),detail:b("tablesPage.createSucMsg.1")+l+b("tablesPage.createSucMsg.2"),life:3e3})}function d(l){const t=x.tables.value.find(m=>m.id===l);p.value={...t,order:(t==null?void 0:t.order)||[]}}function i(l,t){const m=x.tables.value.find(g=>g.id===l);p.value={...m,order:(m==null?void 0:m.order)||[]},t(p.value)}function h(l){d(l),f.value=!0}function B(l,t){const m={id:l.id,status:l.status,peopleType:{adults:l.peopleType.adults,children:l.peopleType.children}},g=x.updateTable(m);d(l.id),t(g?{success:!1,message:b("tablesPage.updateFailMsg")}:{success:!0,message:b("tablesPage.updateSucMsg")})}function V(l,t){const m=x.tableClean(l);m?(console.log("cleanTable Error:",m),t({success:!1,message:b("tablesPage.updateFailMsg")})):(f.value=!1,t({success:!0,message:b("tablesPage.updateSucMsg")}))}function U(){const l=p.value.id;d(l),c.value=!0}function o(l){x.deleteOrders(p.value.id,l),w.value.order&&(x.deleteOrder(w.value),w.value={})}function e(){x.refreshTables()}const u=le();function D(l,t,m,g){u.add({severity:l||"",summary:t||"",detail:m||"",life:g||3e3})}return(l,t)=>{const m=J,g=ee,_=G;return T(),O(L,null,[r("div",ll,[n(Te,{filterStatu:P.value,"onUpdate:filterStatu":t[0]||(t[0]=N=>P.value=N)},null,8,["filterStatu"]),v.value?S("",!0):(T(),j(m,{key:0,icon:"pi pi-pencil",label:l.$t("tablesPage.editTables"),class:"mr-3",onClick:s},null,8,["label"])),v.value?(T(),j(m,{key:1,label:l.$t("tablesPage.closeEdit"),class:"mr-3",onClick:A},null,8,["label"])):S("",!0)]),n(g,{class:"m-0"}),n(Ve,{filteredTables:M.value,"onUpdate:filteredTables":t[1]||(t[1]=N=>M.value=N),editMode:v.value,"onUpdate:editMode":t[2]||(t[2]=N=>v.value=N),onOpenTableDetail:h,onRemoveTable:R,onAddNewTable:F},null,8,["filteredTables","editMode"]),n(_,{visible:f.value,"onUpdate:visible":t[3]||(t[3]=N=>f.value=N),header:l.$t("tablesPage.tableNum")+": "+p.value.id,modal:!0,dismissableMask:!0,style:{"min-width":"350px","max-width":"550px"}},{default:y(()=>[n(Ie,{selectedTable:p.value,onTableEditConfirm:B,onCleanTable:V,onShowTableOrders:U,onOnEdit:i},null,8,["selectedTable"])]),_:1},8,["visible","header"]),n(_,{visible:c.value,"onUpdate:visible":t[4]||(t[4]=N=>c.value=N),modal:!0,dismissableMask:!0,header:l.$t("tablesPage.orderDetails"),style:{"min-width":"350px","max-width":"550px"},onHide:t[5]||(t[5]=N=>e())},{default:y(()=>[n(el,{selectedTable:p.value,onSaveOrder:o,onCancelOrderEdit:e,onShowToast:D},null,8,["selectedTable"])]),_:1},8,["visible","header"])],64)}}};export{Cl as default};
