import{s as at}from"./index-DBhCPcL6.js";import{a as ot}from"./index-pReq0o0k.js";import{s as it}from"./index-uicRKwTw.js";import{s as rt}from"./index-tA76lLVW.js";import{s as ut}from"./index-D2PLJXwn.js";import{s as dt}from"./index-B2IO5ARL.js";import{s as ct}from"./index-Cq5TUBBZ.js";import{s as mt}from"./index-CrWB72Eu.js";import{a as vt}from"./index-jQSn6wE3.js";import{s as ft}from"./index-Cc2BcqY1.js";import{s as pt}from"./index-Bc1y4J8F.js";import{_ as gt}from"./default_image-wmO2RpFB.js";import{x as bt,q as yt,u as ht,h,n as m,s as J,i as _t,c as p,a as s,b as l,w as f,l as o,F as $,o as r,f as k,e as g,t as i,C as re,E as O}from"./index-DItrfIFX.js";import"./index-Dc4MBohI.js";import"./index-CFWp7HJN.js";import"./index-DFUbn_JF.js";import"./index-C3U23PVe.js";import"./index-BnESU5Sq.js";import"./index-Bhn68xaS.js";import"./index-DN3JXELv.js";const wt={class:"w-full h-full flex justify-content-center overflow-auto"},xt={class:"text-5xl ml-3"},Pt={class:"flex flex-column justify-content-center gap-3 p-3 h-full"},kt={class:"flex flex-wrap justify-content-between align-items-center"},Vt={class:"flex flex-wrap justify-content-between align-items-center"},Dt={class:"flex flex-wrap justify-content-between align-items-center"},It={class:"flex flex-wrap justify-content-between align-items-center"},Ct={class:"font-bold text-lg"},Ut={style:{"max-width":"75%"}},Ft={style:{"max-width":"75%"}},$t={style:{"max-width":"75%"}},St={style:{"max-width":"75%"}},jt={style:{"max-width":"75%"}},Et={style:{"max-width":"75%"}},Rt={class:"flex flex-wrap justify-content-between align-items-center"},At={class:"font-bold text-lg"},Tt={class:"font-bold"},Ot={class:"flex flex-wrap justify-content-between align-items-center"},Nt={class:"font-bold text-lg"},Bt={style:{"max-width":"75%"}},Mt={style:{"max-width":"75%"}},Wt={class:"flex flex-wrap justify-content-between align-items-center"},Ht={class:"font-bold text-lg"},Lt={style:{"max-width":"75%"}},Kt={style:{"max-width":"75%"}},zt={style:{"max-width":"75%"}},qt={class:"flex flex-wrap justify-content-between align-items-center"},Yt={class:"font-bold text-lg"},Xt={class:"font-bold"},Gt={class:"flex flex-wrap justify-content-between align-items-center"},Jt={class:"font-bold text-lg"},Qt={style:{"max-width":"75%"}},Zt={style:{"max-width":"75%"}},el={style:{"max-width":"75%"}},tl={style:{"max-width":"75%"}},ll={style:{"max-width":"75%"}},nl={class:"flex flex-wrap justify-content-between align-items-center"},sl={class:"font-bold text-lg"},al={class:"font-bold"},ol={key:0,class:"mt-3 flex flex-column gap-2"},il={class:"flex flex-wrap justify-content-between align-items-center"},rl={class:"font-bold text-lg"},ul={class:"flex flex-wrap justify-content-between align-items-center"},dl={class:"font-bold text-lg"},cl={key:0},ml={class:"flex flex-row justify-content-between align-items-center"},vl={class:"gap-3 flex flex-row align-items-center"},fl={class:"flex flex-wrap justify-content-between align-items-center"},pl={class:"font-bold text-lg"},gl={class:"flex flex-wrap justify-content-between align-items-center"},bl={class:"font-bold text-lg"},yl={class:"flex flex-wrap justify-content-between align-items-center"},hl={class:"font-bold text-lg"},_l={style:{"max-width":"75%"}},wl={class:"flex flex-column"},xl={class:"font-bold"},Pl={for:"on_label"},kl={for:"on_label"},Vl={class:"flex flex-column"},Dl={class:"font-bold"},Il={for:"on_label"},Cl={for:"on_label"},Ul={key:1,class:"flex justify-content-between align-items-center m-1 gap-2"},Fl={class:"font-bold"},$l={for:"on_label"},Sl={class:"flex flex-column"},jl={key:0,class:"flex justify-content-between align-items-center m-1 gap-2"},El={for:"on_label"},Rl={key:1,class:"flex justify-content-between align-items-center m-1 gap-2"},Al={class:"flex flex-column justify-content-center align-items-center m-1 gap-2"},Tl={class:"flex flex-wrap justify-content-center align-items-center m-1 gap-2"},Ol={class:"gap-2"},Nl={key:0,class:"font-bold m-1"},Bl={key:2,class:"font-bold m-1"},Ml={key:2,class:"flex justify-content-between align-items-center m-1 gap-2"},Wl={class:"flex flex-column justify-content-center align-items-center m-1 gap-2"},Hl={class:"flex flex-wrap justify-content-center align-items-center m-1 gap-2"},Ll={class:"gap-2"},Kl={key:0,class:"font-bold m-1"},zl={key:1,class:"m-1"},ql={class:"font-bold"},Yl={key:3,class:"flex flex-column gap-2"},Xl={class:"flex flex-column gap-1"},Gl={class:"flex flex-column gap-1"},Jl={key:4,class:"flex flex-column"},Ql={key:0,class:"mt-3"},Zl={for:"on_label"},en={key:1,class:"mt-3"},tn={for:"on_label"},ln={key:2,class:"mt-3"},nn={class:"w-full grid"},sn={for:"on_label"},an={for:"on_label"},on={for:"on_label"},rn={for:"on_label"},un={for:"on_label"},dn={key:3,class:"mt-3"},cn={for:"on_label"},mn={key:4,class:"mt-3 flex flex-column align-items-center justify-content-center gap-2",style:{"max-width":"500px","max-height":"600px"}},vn=["src"],fn={key:5,class:"flex justify-content-between align-items-center mt-3 gap-2"},pn={for:"on_label"},gn={for:"on_label"},bn={class:"mt-2 w-full flex flex-wrap"},Nn={__name:"SettingPage",setup(yn){const ye=bt(),{t}=yt(),S=ht(),L=h(!1),q=h(!1),Y=h(!1),Q=h(),Z=h(),X=h(),he=h(Array.from({length:7},(a,e)=>({value:e,label:t("settingPage.week."+m.getCurrentWeekDayName(e))}))),ue=h(Array.from({length:31},(a,e)=>(e+1).toString().padStart(2,"0"))),_e=["order","delivery","reserver","isFestiveDay","checkIP","useChildrenDiscount","useFandays"],y=J(()=>{const a={};for(const e of _e)a[e]=m.getSettingsValue(e);return a}),we=J(()=>m.customDishApi.getSimplyCustomDishes()),ee=m.developerMode;function N(a,e){m.updateSetting(a,e,F)}const xe=a=>a.includes("Aleatória®")?t("common.Sushi"):a.includes("MY BOX")?t("common.my_box"):a.includes("Poke Bowl")?t("common.Poke"):t(`common.${a}`);function Pe(){L.value=!0,Q.value=m.getPriceDataValue("weekPrice")}function ke(){q.value=!0,Z.value=m.getPriceDataValue("childrenWeekPrice"),X.value=m.getPriceDataValue("childrenPricePercentage")}function j(a,e){switch(K.value=a,R.value=e,a){case"delivery":V.value=m.getPickupDataValue(e);break;case"homeDelivery":V.value=m.getHomeDeliveryValue(e);break;case"reserver":e==="intervalDiscount"&&(e="beginEndInterval"),V.value=m.getReserverDataValue(e);break;default:return}G.value=!0}function de(a,e){B.value=a,e==="editPickupReserverBeginEndInterval"?te.value=!0:le.value=!0}const E=h(),w=h();function H(a){switch(a){case"restaurantName":case"phoneNumber":case"location":case"latitudeAndLongitude":case"instagramUrl":case"logoPath":E.value=a,w.value=m.getShopInfoValue(a);break;default:console.log("showEditShopInfoDialog unknown key:",a)}Y.value=!0}function Ve(){m.customDishApi.reloadReforceDefaultCustomDishData(a=>{a.success?F(!0,"重置","自定义菜重置成功"):F(!1,"重置","自定义菜重置失败")})}function De(){ce(Q)?(m.updatePricesData("weekPrice",F),L.value=!1):F(!1,"设置价格","价格不能为负")}function Ie(){ce(Z)&&X.value>=0?(y.value.useChildrenDiscount?m.updatePricesData("childrenPricePercentage",F):m.updatePricesData("childrenWeekPrice",F),q.value=!1,L.value=!1):F(!1,"设置价格","价格/折扣不能为负")}function ce(a){for(const e in a.value)for(const u in a.value[e])if(a.value[e][u]<0)return!1;return!0}function Ce(a,e){if(a=="beginEndInterval"&&!u(e)){console.log("valid false");return}switch(K.value){case"delivery":m.updatePickupData(a,e,F);break;case"homeDelivery":m.updateHomeDeliveryData(a,e,F);break;case"reserver":a==="intervalDiscount"&&(a="beginEndInterval"),m.updateReserverData(a,e,F);break;default:console.log("savePickupReserverData switch default case")}G.value=!1;function u(U){if(c(U)||!I(U))return!1;return!0;function c(d){for(const v in d)for(const x in d[v])if(d[v][x]&&(b(d[v][x].begin)||b(d[v][x].end)))return S.add({severity:"error",summary:t("common.error"),detail:t("settingPage.week."+v)+" "+t("settingPage.isEmpty"),life:2e3}),!0;return!1}function b(d){for(const v in d)if(d[v]===void 0||d[v]==="")return console.log(d,v,d[v]),!0;return!1}function I(d){for(const v in d)if(A(d[v]))return S.add({severity:"error",summary:t("common.error"),detail:t("settingPage.week."+v)+" "+t("settingPage.isErrorValues"),life:2e3}),!1;return!0}function A(d){if(Object.keys(d).length==0)return!1;for(let D=0;D<d.length-1;D++)if(x(d[D].begin)>x(d[D].end)||x(d[D].end)>x(d[D+1].begin))return!0;const v=d[d.length-1];return x(v.begin)>x(v.end);function x(D){return Number(D.hour)*60+Number(D.minute)}}}}function Ue(a,e){m.updateShopInfo(a,e,F),Y.value=!1}function Fe(){m.refreshPickupReserverData(K.value)}function F(a,e,u=""){S.add({severity:a?"success":"error",summary:t(a?"common.success":"common.error"),detail:t("common.edit")+t("settingPage."+$e(e))+t("common."+(a?"success":"failed")+u),life:1e3})}function $e(a){switch(a){case"delivery":return"takeAwayFeature";case"reserver":return"reserverFeature";case"isFestiveDay":return"useHolidayPrice";case"hasBibimbap":return"showBibimbap";case"hasBox":return"showBow";case"checkIP":return"wifiOrder";case"useChildrenDiscount":case"childrenPricePercentage":return"setChildrenPriceOn1";default:return a}}const G=h(!1),K=h(),R=h(),B=h(),te=h(!1),le=h(!1),V=h();function Se(){const a=V.value[B.value];a[a.length]={begin:{hour:void 0,minute:void 0},end:{hour:void 0,minute:void 0}}}function je(a){ye.require({message:t("settingPage.removeInterval"),header:t("settingPage.removeIntervalHeader"),icon:"pi pi-trash",rejectProps:{label:t("common.cancel"),severity:"secondary",outlined:!0},acceptProps:{label:t("common.confirm"),severity:"danger"},accept:()=>{V.value[B.value].splice(a,1)},reject:()=>{}})}const me=h(null),ne=h(null),ve=h(null),fe=h(null),se=h(null),pe=h(null),ae=h(null),oe=h(null);function Ee(a){ae.value=a.target.files[0],Be()}function Re(){var a;(a=pe.value)==null||a.click()}function Ae(){var a;(a=fe.value)==null||a.click()}function Te(){m.dictionarApi.resetDictionary()}function Oe(a){oe.value=a.target.files[0],Ne()}function Ne(){if(!oe.value)return alert("请选择文件");const a=new FormData;a.append("page",oe.value),m.dataTransfer.pageUserDatas(a)}function Be(){if(!ae.value)return alert("请选择文件");const a=new FormData;a.append("file",ae.value),m.dataTransfer.importUserDatas(a)}function Me(a){ne.value=a.target.files[0],ze()}function We(){var a;(a=me.value)==null||a.click()}function He(a){se.value=a.target.files[0],Ke()}function Le(){var a;(a=ve.value)==null||a.click()}function Ke(){if(!se.value)return alert("请选择文件");const a=new FormData;a.append("file",se.value),m.dataTransfer.importMenuDatas(a)}function ze(){if(!ne.value)return alert("请选择文件");const a=new FormData;a.append("file",ne.value),m.dataTransfer.importAppStateDatas(a)}function qe(){m.dataTransfer.downloadFromServer()}function Ye(a){m.customDishApi.updateCustomDishEnable(a,e=>{e.success?S.add({severity:"success",summary:"success",detail:t("notification.updateSuccess")}):S.add({severity:"warn",summary:"warn",detail:t("notification.updateFailed")})})}const Xe=J(()=>{const a=m.permissionsControl.value,e="点餐:"+(a.order?"开":"关"),u="外卖:"+(a.delivery?"开":"关"),U="订台:"+(a.reserver?"开":"关"),c="VIP:"+(a.vip?"开":"关"),b=" | ";return e+b+u+b+U+b+c}),Ge=h([{label:t("settingPage.filterOptions.all"),icon:"pi pi-cog",command:()=>{z("all")}},{label:t("settingPage.filterOptions.shopInfo"),icon:"pi pi-shop",command:()=>{z("shopInfo")}},{label:t("settingPage.filterOptions.order"),icon:"pi pi-pencil",command:()=>{z("order")}},{label:t("settingPage.filterOptions.deliveryReserver"),icon:"pi pi-shopping-bag",command:()=>{z("deliveryReserver")}},{label:t("settingPage.filterOptions.others"),icon:"pi pi-circle",command:()=>{z("others")}}]),Je=["all","deliveryReserver","order","shopInfo","others"],M=h({});_t(()=>{Qe()});function Qe(){for(const a of Je)M.value[a]=!1;M.value.all=!0}function z(a){for(const e in M.value)M.value[e]=!1;M.value[a]=!0}function C(a){return M.value.all||M.value[a]}const Ze=J(()=>[{name:t("menuPage.dineIn")+" & "+t("menuPage.takeAway"),code:"DINEIN&TAKEAWAY"},{name:t("menuPage.takeAway"),code:"TAKEAWAY"},{name:t("menuPage.dineIn"),code:"DINEIN"}]);function et(a,e){m.customDishApi.updateCustomDishSellType(e.id,a,u=>{u.success?S.add({severity:"success",summary:"success",detail:t("notification.updateSuccess")}):S.add({severity:"warn",summary:"warn",detail:t("notification.updateFailed")})})}const ge=h(null);function be(){ge.value.click()}function tt(a){const e=a.target.files[0];e&&lt(e)}async function lt(a){let e;e="/upload_image";const U=new FormData,c=await nt(a);U.append("image",c);let b=a.size/1e3;b=b.toFixed(2);let I=c.size/1e3;I=I.toFixed(2),console.log("file size: "+b+"k"),console.log("compressed size: "+I+"k");try{const A=await fetch(e,{method:"POST",body:U});if(!A.ok)throw new Error(t("common.uploadFailed"));const d=await A.json();w.value=d.imageUrl,S.add({severity:"success",summary:t("common.success"),detail:t("menuPage.uploadSucMsg"),life:3e3})}catch(A){console.error("上传错误",A),S.add({severity:"error",summary:t("common.error"),detail:t("menuPage.uploadFailMsg"),life:3e3})}}async function nt(a){return new Promise((e,u)=>{const U=new FileReader;U.onload=c=>{const b=new Image;b.onload=()=>{let d=b.width,v=b.height;d>v?d>512&&(v*=512/d,d=512):v>512&&(d*=512/v,v=512);const x=document.createElement("canvas"),D=x.getContext("2d");x.width=d,x.height=v,a.type==="image/png"&&(D.fillStyle="#ffffff",D.fillRect(0,0,x.width,x.height)),D.drawImage(b,0,0,d,v);const W=a.type==="image/png"?"image/png":"image/jpeg",n=W==="image/png"?.9:.7;x.toBlob(P=>{e(new File([P],a.name,{type:W,lastModified:Date.now()}))},W,n)},b.onerror=u,b.src=c.target.result},U.onerror=u,U.readAsDataURL(a)})}function st(){w.value="/icons/main.png"}return(a,e)=>{const u=pt,U=ft,c=vt,b=mt,I=ct,A=dt,d=ut,v=rt,x=it,D=ot,W=at;return r(),p($,null,[s("div",wt,[l(b,{class:"flex flex-column h-full mt-1 lg:p-5 shadow-none",style:{"max-width":"1000px"}},{title:f(()=>[s("label",xt,i(o(t)("settingPage.settings")),1),l(u),l(U,{class:"border-none p-0",model:Ge.value,breakpoint:"369px"},null,8,["model"]),l(u)]),content:f(()=>[s("div",Pt,[o(ee)?(r(),k(b,{key:0,class:"shadow-5"},{content:f(()=>[s("div",kt,[e[63]||(e[63]=s("label",{class:"font-bold text-lg"},i("数据导入导出"),-1)),l(u),e[64]||(e[64]=s("label",null,i("导出所有数据"),-1)),l(c,{label:"导出",onClick:e[0]||(e[0]=n=>qe()),class:"unchange_white_text_button"}),l(u),s("input",{type:"file",onChange:Me,accept:".json",style:{display:"none"},ref_key:"appStatefileInput",ref:me},null,544),e[65]||(e[65]=s("label",null,i("导入AppState数据"),-1)),l(c,{label:"导入",onClick:We,class:"unchange_white_text_button"}),l(u),s("input",{type:"file",onChange:He,accept:".json",style:{display:"none"},ref_key:"menufileInput",ref:ve},null,544),e[66]||(e[66]=s("label",null,i("导入Menu数据"),-1)),l(c,{label:"导入",onClick:Le,class:"unchange_white_text_button"}),l(u),s("input",{type:"file",onChange:Ee,accept:".json",style:{display:"none"},ref_key:"usersfileInput",ref:pe},null,544),e[67]||(e[67]=s("label",null,i("导入Users数据"),-1)),l(c,{label:"导入",onClick:Re,class:"unchange_white_text_button"}),l(u),s("input",{type:"file",onChange:Oe,accept:".zip",style:{display:"none"},ref_key:"pagefileInput",ref:fe},null,544),e[68]||(e[68]=s("label",null,i("导入主页数据"),-1)),l(c,{label:"导入",onClick:Ae,class:"unchange_white_text_button"}),l(u),e[69]||(e[69]=s("label",null,i("重置字典数据"),-1)),l(c,{label:"重置",onClick:Te,class:"unchange_white_text_button"}),l(u),s("label",null,i(Xe.value),1)])]),_:1})):g("",!0),o(ee)?(r(),k(b,{key:1,class:"shadow-5"},{title:f(()=>[e[70]||(e[70]=re(i("恢复按钮")+" ",-1)),l(u)]),content:f(()=>[s("div",Vt,[e[71]||(e[71]=s("label",null,i("重新恢复菜品默认排序"),-1)),l(c,{label:"恢复",onClick:e[1]||(e[1]=n=>o(m).menuApi.defaultMenuOrder()),class:"unchange_white_text_button"})]),l(u),s("div",Dt,[e[72]||(e[72]=s("label",null,i("重新恢复自定义菜初始数据"),-1)),l(c,{label:"恢复",onClick:e[2]||(e[2]=n=>Ve()),class:"unchange_white_text_button"})])]),_:1})):g("",!0),C("shopInfo")?(r(),k(b,{key:2,class:"shadow-5"},{content:f(()=>[s("div",It,[s("label",Ct,i(o(t)("settingPage.shopInformation.title")),1),l(u),s("label",Ut,i(o(t)("settingPage.shopInformation.restaurantName")),1),l(c,{label:o(t)("common.edit"),onClick:e[3]||(e[3]=n=>H("restaurantName")),class:"unchange_white_text_button"},null,8,["label"]),l(u),s("label",Ft,i(o(t)("settingPage.shopInformation.location")),1),l(c,{label:o(t)("common.edit"),onClick:e[4]||(e[4]=n=>H("location")),class:"unchange_white_text_button"},null,8,["label"]),l(u),s("label",$t,i(o(t)("settingPage.shopInformation.phoneNumber")),1),l(c,{label:o(t)("common.edit"),onClick:e[5]||(e[5]=n=>H("phoneNumber")),class:"unchange_white_text_button"},null,8,["label"]),l(u),s("label",St,i(o(t)("settingPage.shopInformation.logoPath")),1),l(c,{label:o(t)("common.edit"),onClick:e[6]||(e[6]=n=>H("logoPath")),class:"unchange_white_text_button"},null,8,["label"]),l(u),s("label",jt,i(o(t)("settingPage.shopInformation.instagramUrl")),1),l(c,{label:o(t)("common.edit"),onClick:e[7]||(e[7]=n=>H("instagramUrl")),class:"unchange_white_text_button"},null,8,["label"]),l(u),s("label",Et,i(o(t)("settingPage.shopInformation.latitudeAndLongitude")),1),l(c,{label:o(t)("common.edit"),onClick:e[8]||(e[8]=n=>H("latitudeAndLongitude")),class:"unchange_white_text_button"},null,8,["label"])])]),_:1})):g("",!0),C("deliveryReserver")?(r(),k(b,{key:3,class:"shadow-5"},{content:f(()=>[s("div",Rt,[s("label",At,i(o(t)("settingPage.takeAwayFeature")),1),l(I,{modelValue:y.value.delivery,"onUpdate:modelValue":[e[9]||(e[9]=n=>y.value.delivery=n),e[10]||(e[10]=n=>N("delivery",y.value.delivery))],disabled:!o(m).permissionsControl.value.delivery},null,8,["modelValue","disabled"]),l(u),s("div",null,[s("label",null,i(o(t)("settingPage.takeAwayFeatureOn")),1),s("label",Tt,i(" "+(o(m).permissionsControl.value.delivery?"":o(t)("settingPage.permissionReminder"))),1)])]),y.value.delivery&&o(m).permissionsControl.value.delivery&&C("deliveryReserver")?(r(),k(b,{key:0,class:"shadow-5 mt-3"},{content:f(()=>[s("div",Ot,[s("label",Nt,i(o(t)("settingPage.delivery.title")),1),l(u),s("label",Bt,i(o(t)("settingPage.delivery.timeInterval")),1),l(c,{label:o(t)("common.edit"),onClick:e[11]||(e[11]=n=>j("delivery","timeInterval")),class:"unchange_white_text_button"},null,8,["label"]),l(u),s("label",Mt,i(o(t)("settingPage.delivery.beginEndInterval")),1),l(c,{label:o(t)("common.edit"),onClick:e[12]||(e[12]=n=>j("delivery","beginEndInterval")),class:"unchange_white_text_button"},null,8,["label"])])]),_:1})):g("",!0),y.value.delivery&&o(m).permissionsControl.value.delivery&&C("deliveryReserver")?(r(),k(b,{key:1,class:"shadow-5 mt-3"},{content:f(()=>[s("div",Wt,[s("label",Ht,i(o(t)("settingPage.homeDelivery.title")),1),l(u),s("label",Lt,i(o(t)("settingPage.homeDelivery.deliveryFeatureOn")),1),l(I,{modelValue:y.value.homeDelivery,"onUpdate:modelValue":[e[13]||(e[13]=n=>y.value.homeDelivery=n),e[14]||(e[14]=n=>N("homeDelivery",y.value.homeDelivery))]},null,8,["modelValue"]),l(u),s("label",Kt,i(o(t)("settingPage.homeDelivery.timeInterval")),1),l(c,{label:o(t)("common.edit"),onClick:e[15]||(e[15]=n=>j("homeDelivery","timeInterval")),class:"unchange_white_text_button"},null,8,["label"]),l(u),s("label",zt,i(o(t)("settingPage.homeDelivery.beginEndInterval")),1),l(c,{label:o(t)("common.edit"),onClick:e[16]||(e[16]=n=>j("homeDelivery","beginEndInterval")),class:"unchange_white_text_button"},null,8,["label"])])]),_:1})):g("",!0)]),_:1})):g("",!0),C("deliveryReserver")?(r(),k(b,{key:4,class:"shadow-5"},{content:f(()=>[s("div",qt,[s("label",Yt,i(o(t)("settingPage.reserverFeature")),1),l(I,{modelValue:y.value.reserver,"onUpdate:modelValue":[e[17]||(e[17]=n=>y.value.reserver=n),e[18]||(e[18]=n=>N("reserver",y.value.reserver))],disabled:!o(m).permissionsControl.value.reserver},null,8,["modelValue","disabled"]),l(u),s("div",null,[s("label",null,i(o(t)("settingPage.reserverFeatureOn")),1),s("label",Xt,i(" "+(o(m).permissionsControl.value.reserver?"":o(t)("settingPage.permissionReminder"))),1)])]),y.value.reserver&&o(m).permissionsControl.value.reserver&&C("deliveryReserver")?(r(),k(b,{key:0,class:"shadow-5 mt-3"},{content:f(()=>[s("div",Gt,[s("label",Jt,i(o(t)("settingPage.reserver.title")),1),l(u),s("label",Qt,i(o(t)("settingPage.reserver.timeInterval")),1),l(c,{label:o(t)("common.edit"),onClick:e[19]||(e[19]=n=>j("reserver","timeInterval")),class:"unchange_white_text_button"},null,8,["label"]),l(u),s("label",Zt,i(o(t)("settingPage.reserver.beginEndInterval")),1),l(c,{label:o(t)("common.edit"),onClick:e[20]||(e[20]=n=>j("reserver","beginEndInterval")),class:"unchange_white_text_button"},null,8,["label"]),l(u),s("label",el,i(o(t)("settingPage.reserver.intervalDiscount")),1),l(c,{label:o(t)("common.edit"),onClick:e[21]||(e[21]=n=>j("reserver","intervalDiscount")),class:"unchange_white_text_button"},null,8,["label"]),l(u),s("label",tl,i(o(t)("settingPage.reserver.excludeDates")),1),l(c,{label:o(t)("common.edit"),onClick:e[22]||(e[22]=n=>j("reserver","excludeDates")),class:"unchange_white_text_button"},null,8,["label"]),l(u),s("label",ll,i(o(t)("settingPage.reserver.excludeDiscountDates")),1),l(c,{label:o(t)("common.edit"),onClick:e[23]||(e[23]=n=>j("reserver","excludeDiscountDates")),class:"unchange_white_text_button"},null,8,["label"])])]),_:1})):g("",!0)]),_:1})):g("",!0),C("order")?(r(),k(b,{key:5,class:"shadow-5"},{content:f(()=>[s("div",nl,[s("label",sl,i(o(t)("settingPage.orderFeature")),1),l(I,{modelValue:y.value.order,"onUpdate:modelValue":[e[24]||(e[24]=n=>y.value.order=n),e[25]||(e[25]=n=>N("order",y.value.order))],disabled:!o(m).permissionsControl.value.order},null,8,["modelValue","disabled"]),l(u),s("div",null,[s("label",null,i(o(t)("settingPage.orderFeatureOn")),1),s("label",al,i(" "+(o(m).permissionsControl.value.order?"":o(t)("settingPage.permissionReminder"))),1)])]),y.value.order&&o(m).permissionsControl.value.order&&C("order")?(r(),p("div",ol,[C("order")?(r(),k(b,{key:0,class:"shadow-5"},{content:f(()=>[s("div",il,[s("label",rl,i(o(t)("settingPage.useHolidayPrice")),1),l(I,{modelValue:y.value.isFestiveDay,"onUpdate:modelValue":[e[26]||(e[26]=n=>y.value.isFestiveDay=n),e[27]||(e[27]=n=>N("isFestiveDay",y.value.isFestiveDay))]},null,8,["modelValue"]),l(u),s("label",null,i(o(t)("settingPage.useHolidayPriceOn")),1)])]),_:1})):g("",!0),o(m).permissionsControl.value.fandays&&C("order")?(r(),k(b,{key:1,class:"shadow-5"},{content:f(()=>[s("div",ul,[s("label",dl,i(o(t)("settingPage.useFandays")),1),l(I,{modelValue:y.value.useFandays,"onUpdate:modelValue":[e[28]||(e[28]=n=>y.value.useFandays=n),e[29]||(e[29]=n=>N("useFandays",y.value.useFandays))]},null,8,["modelValue"]),l(u),s("label",null,i(o(t)("settingPage.useFandaysOn")),1)])]),_:1})):g("",!0),C("order")?(r(),k(b,{key:2,class:"shadow-5"},{title:f(()=>[e[73]||(e[73]=re(" 自定义菜单 ",-1)),l(u)]),content:f(()=>[(r(!0),p($,null,O(we.value,n=>{var P;return r(),p("div",null,[(P=o(m).customDishApi.getCustomDishesControl()[n.id])!=null&&P.enabled?(r(),p("div",cl,[s("div",ml,[s("span",null,i(xe(n.name)),1),s("div",vl,[l(A,{modelValue:n.sellType,"onUpdate:modelValue":[_=>n.sellType=_,_=>et(_,n)],options:Ze.value,optionLabel:"name",optionValue:"code"},null,8,["modelValue","onUpdate:modelValue","options"]),l(I,{modelValue:n.enable,"onUpdate:modelValue":[_=>n.enable=_,_=>Ye(n)]},null,8,["modelValue","onUpdate:modelValue"])])]),l(u)])):g("",!0)])}),256))]),_:1})):g("",!0),C("order")?(r(),k(b,{key:3,class:"shadow-5"},{content:f(()=>[s("div",fl,[s("label",pl,i(o(t)("settingPage.wifiOrder")),1),l(I,{modelValue:y.value.checkIP,"onUpdate:modelValue":[e[30]||(e[30]=n=>y.value.checkIP=n),e[31]||(e[31]=n=>N("checkIP",y.value.checkIP))]},null,8,["modelValue"]),l(u),s("label",null,i(o(t)("settingPage.wifiOrderOn")),1)])]),_:1})):g("",!0),C("order")?(r(),k(b,{key:4,class:"shadow-5"},{content:f(()=>[s("div",gl,[s("label",bl,i(o(t)("settingPage.setPrice")),1),l(u),s("label",null,i(o(t)("settingPage.setPriceOn")),1),l(c,{label:o(t)("common.edit"),onClick:e[32]||(e[32]=n=>Pe()),class:"unchange_white_text_button"},null,8,["label"])])]),_:1})):g("",!0),C("order")?(r(),k(b,{key:5,class:"shadow-5"},{content:f(()=>[s("div",yl,[s("label",hl,i(o(t)("settingPage.setChildrenPrice")),1),l(u),s("label",null,i(o(t)("settingPage.setChildrenPriceOn1")),1),l(I,{modelValue:y.value.useChildrenDiscount,"onUpdate:modelValue":[e[33]||(e[33]=n=>y.value.useChildrenDiscount=n),e[34]||(e[34]=n=>N("useChildrenDiscount",y.value.useChildrenDiscount))]},null,8,["modelValue"]),l(u),s("label",_l,i(o(t)("settingPage.setChildrenPriceOn2")),1),l(c,{label:o(t)("common.edit"),onClick:e[35]||(e[35]=n=>ke()),class:"unchange_white_text_button"},null,8,["label"])])]),_:1})):g("",!0)])):g("",!0)]),_:1})):g("",!0)])]),_:1})]),l(x,{visible:L.value,"onUpdate:visible":e[37]||(e[37]=n=>L.value=n),header:o(t)("settingPage.editWeekPrice")},{default:f(()=>[s("div",wl,[(r(!0),p($,null,O(Q.value,(n,P)=>(r(),p("div",{key:P,class:"flex justify-content-between m-1 gap-2"},[s("div",null,[s("label",xl,i(o(t)("settingPage.week."+P))+":",1)]),s("div",null,[l(v,{variant:"on"},{default:f(()=>[l(d,{type:"number",modelValue:n.lunch,"onUpdate:modelValue":_=>n.lunch=_,class:"w-full"},null,8,["modelValue","onUpdate:modelValue"]),s("label",Pl,i(o(t)("settingPage.lunch")),1)]),_:2},1024)]),s("div",null,[l(v,{variant:"on"},{default:f(()=>[l(d,{type:"number",modelValue:n.dinner,"onUpdate:modelValue":_=>n.dinner=_,class:"w-full"},null,8,["modelValue","onUpdate:modelValue"]),s("label",kl,i(o(t)("settingPage.dinner")),1)]),_:2},1024)])]))),128)),l(c,{label:o(t)("common.save"),onClick:e[36]||(e[36]=n=>De()),class:"unchange_white_text_button"},null,8,["label"])])]),_:1},8,["visible","header"]),l(x,{visible:q.value,"onUpdate:visible":e[40]||(e[40]=n=>q.value=n),header:o(t)("settingPage.editChildrenWeekPrice")},{default:f(()=>[s("div",Vl,[y.value.useChildrenDiscount?g("",!0):(r(!0),p($,{key:0},O(Z.value,(n,P)=>(r(),p("div",{key:P,class:"flex justify-content-between align-items-center m-1 gap-2"},[s("div",null,[s("label",Dl,i(o(t)("settingPage.week."+P))+":",1)]),s("div",null,[l(v,{variant:"on"},{default:f(()=>[l(d,{type:"number",modelValue:n.lunch,"onUpdate:modelValue":_=>n.lunch=_,class:"w-full"},null,8,["modelValue","onUpdate:modelValue"]),s("label",Il,i(o(t)("settingPage.lunch")),1)]),_:2},1024)]),s("div",null,[l(v,{variant:"on"},{default:f(()=>[l(d,{type:"number",modelValue:n.dinner,"onUpdate:modelValue":_=>n.dinner=_,class:"w-full"},null,8,["modelValue","onUpdate:modelValue"]),s("label",Cl,i(o(t)("settingPage.dinner")),1)]),_:2},1024)])]))),128)),y.value.useChildrenDiscount?(r(),p("div",Ul,[s("div",null,[s("label",Fl,i(o(t)("settingPage.childrenPricePercentage"))+":",1)]),s("div",null,[l(v,{variant:"on"},{default:f(()=>[l(D,{type:"number",modelValue:X.value,"onUpdate:modelValue":e[38]||(e[38]=n=>X.value=n),class:"w-full",suffix:" %"},null,8,["modelValue"]),s("label",$l,i(o(t)("settingPage.childrenPricePercentage")),1)]),_:1})])])):g("",!0),l(c,{class:"unchange_white_text_button",label:o(t)("common.save"),onClick:e[39]||(e[39]=n=>Ie())},null,8,["label"])])]),_:1},8,["visible","header"]),l(x,{visible:G.value,"onUpdate:visible":e[49]||(e[49]=n=>G.value=n),modal:!0,dismissableMask:!0,header:o(t)("settingPage."+K.value+"."+R.value),onHide:e[50]||(e[50]=n=>Fe()),style:{"max-height":"80%","max-width":"90%","min-width":"30%"}},{default:f(()=>[s("div",Sl,[R.value==="timeInterval"?(r(),p("div",jl,[l(v,{variant:"on"},{default:f(()=>[l(D,{inputId:"minmax",min:0,max:60,modelValue:V.value,"onUpdate:modelValue":e[41]||(e[41]=n=>V.value=n),fluid:""},null,8,["modelValue"]),s("label",El,i(o(t)("settingPage."+K.value+"."+R.value)),1)]),_:1})])):g("",!0),R.value==="beginEndInterval"?(r(),p("div",Rl,[(r(!0),p($,null,O(V.value,(n,P)=>(r(),k(c,{key:P,label:o(t)("settingPage.week."+P),onClick:_=>de(P,"editPickupReserverBeginEndInterval"),class:"unchange_white_text_button"},null,8,["label","onClick"]))),128)),l(x,{visible:te.value,"onUpdate:visible":e[43]||(e[43]=n=>te.value=n),header:o(t)("settingPage.week."+B.value),modal:!0,dismissableMask:!0},{default:f(()=>[s("div",Al,[(r(!0),p($,null,O(V.value[B.value],(n,P)=>(r(),p("div",Tl,[(r(!0),p($,null,O(n,(_,T)=>(r(),p("div",Ol,[T!=="discount"?(r(),p("label",Nl,i(o(t)("settingPage."+T)),1)):g("",!0),T!=="discount"?(r(),k(D,{key:1,inputId:"minmax",min:0,max:23,fluid:"",modelValue:_.hour,"onUpdate:modelValue":ie=>_.hour=ie,style:{width:"4rem"}},null,8,["modelValue","onUpdate:modelValue"])):g("",!0),T!=="discount"?(r(),p("label",Bl,":")):g("",!0),T!=="discount"?(r(),k(D,{key:3,inputId:"minmax",min:0,max:59,fluid:"",modelValue:_.minute,"onUpdate:modelValue":ie=>_.minute=ie,style:{width:"4rem"}},null,8,["modelValue","onUpdate:modelValue"])):g("",!0)]))),256)),l(c,{icon:"pi pi-trash",severity:"danger",onClick:_=>je(P)},null,8,["onClick"])]))),256)),l(c,{label:"+",class:"w-full unchange_white_text_button",onClick:e[42]||(e[42]=n=>Se())})])]),_:1},8,["visible","header"])])):g("",!0),R.value==="intervalDiscount"?(r(),p("div",Ml,[(r(!0),p($,null,O(V.value,(n,P)=>(r(),k(c,{key:P,label:o(t)("settingPage.week."+P),onClick:_=>de(P)},null,8,["label","onClick"]))),128)),l(x,{visible:le.value,"onUpdate:visible":e[44]||(e[44]=n=>le.value=n),header:o(t)("settingPage.week."+B.value),modal:!0,dismissableMask:!0},{default:f(()=>[s("div",Wl,[(r(!0),p($,null,O(V.value[B.value],(n,P)=>(r(),p("div",Hl,[(r(!0),p($,null,O(n,(_,T)=>(r(),p("div",Ll,[T!=="discount"?(r(),p("label",Kl,i(o(t)("settingPage."+T)),1)):g("",!0),T!=="discount"?(r(),p("label",zl,i(_.hour+":"+_.minute.toString().padStart(2,"0")),1)):g("",!0)]))),256)),s("label",ql,i(o(t)("menuPage.discount"))+":",1),l(d,{type:"number",modelValue:n.discount,"onUpdate:modelValue":_=>n.discount=_,style:{width:"4rem"},min:0,max:100},null,8,["modelValue","onUpdate:modelValue"]),e[74]||(e[74]=re("% ",-1))]))),256))])]),_:1},8,["visible","header"])])):g("",!0),R.value==="excludeDates"?(r(),p("div",Yl,[s("div",Xl,[e[75]||(e[75]=s("label",{class:""},"每周:",-1)),l(W,{modelValue:V.value.week,"onUpdate:modelValue":e[45]||(e[45]=n=>V.value.week=n),options:he.value,optionLabel:"label",optionValue:"value",class:"w-full",filter:"",fluid:""},null,8,["modelValue","options"])]),s("div",Gl,[e[76]||(e[76]=s("label",{class:""},"每月:",-1)),l(W,{modelValue:V.value.month,"onUpdate:modelValue":e[46]||(e[46]=n=>V.value.month=n),options:ue.value,class:"w-full",fluid:""},null,8,["modelValue","options"])])])):g("",!0),R.value==="excludeDiscountDates"?(r(),p("div",Jl,[l(W,{modelValue:V.value,"onUpdate:modelValue":e[47]||(e[47]=n=>V.value=n),options:ue.value,filter:"",fluid:""},null,8,["modelValue","options"]),e[77]||(e[77]=s("div",{class:"flex justify-content-end"},[s("small",null,i("(注: 每个月固定排除)"))],-1))])):g("",!0),l(c,{class:"mt-2",label:o(t)("common.save"),onClick:e[48]||(e[48]=n=>Ce(R.value,V.value))},null,8,["label"])])]),_:1},8,["visible","header"]),l(x,{visible:Y.value,"onUpdate:visible":e[62]||(e[62]=n=>Y.value=n),header:o(t)("settingPage.shopInformation."+E.value),style:{width:"90%","max-width":"450px"}},{default:f(()=>[E.value==="restaurantName"?(r(),p("div",Ql,[l(v,{variant:"on"},{default:f(()=>[l(d,{type:"text",modelValue:w.value,"onUpdate:modelValue":e[51]||(e[51]=n=>w.value=n),class:"w-full"},null,8,["modelValue"]),s("label",Zl,i(o(t)("settingPage.shopInformation.restaurantName")),1)]),_:1})])):g("",!0),E.value==="instagramUrl"?(r(),p("div",en,[l(v,{variant:"on"},{default:f(()=>[l(d,{type:"text",modelValue:w.value,"onUpdate:modelValue":e[52]||(e[52]=n=>w.value=n),class:"w-full",placeholder:"https://www.instagram.com/"},null,8,["modelValue"]),s("label",tn,i(o(t)("settingPage.shopInformation.instagramUrl")),1)]),_:1})])):g("",!0),E.value==="location"?(r(),p("div",ln,[s("div",nn,[l(v,{class:"col-12",variant:"on"},{default:f(()=>[l(d,{type:"text",modelValue:w.value.street,"onUpdate:modelValue":e[53]||(e[53]=n=>w.value.street=n),class:"w-full"},null,8,["modelValue"]),s("label",sn,i(o(t)("settingPage.shopInformation.location1.street")),1)]),_:1}),l(v,{class:"col-6",variant:"on"},{default:f(()=>[l(d,{type:"text",modelValue:w.value.postcode,"onUpdate:modelValue":e[54]||(e[54]=n=>w.value.postcode=n),class:"w-full"},null,8,["modelValue"]),s("label",an,i(o(t)("settingPage.shopInformation.location1.postcode")),1)]),_:1}),l(v,{class:"col-6",variant:"on"},{default:f(()=>[l(d,{type:"text",modelValue:w.value.city,"onUpdate:modelValue":e[55]||(e[55]=n=>w.value.city=n),class:"w-full"},null,8,["modelValue"]),s("label",on,i(o(t)("settingPage.shopInformation.location1.city")),1)]),_:1}),l(v,{class:"col-6",variant:"on"},{default:f(()=>[l(d,{type:"text",modelValue:w.value.region,"onUpdate:modelValue":e[56]||(e[56]=n=>w.value.region=n),class:"w-full"},null,8,["modelValue"]),s("label",rn,i(o(t)("settingPage.shopInformation.location1.region")),1)]),_:1}),l(v,{class:"col-6",variant:"on"},{default:f(()=>[l(d,{type:"text",modelValue:w.value.country,"onUpdate:modelValue":e[57]||(e[57]=n=>w.value.country=n),class:"w-full"},null,8,["modelValue"]),s("label",un,i(o(t)("settingPage.shopInformation.location1.country")),1)]),_:1})])])):g("",!0),E.value==="phoneNumber"?(r(),p("div",dn,[l(v,{variant:"on"},{default:f(()=>[l(d,{type:"text",modelValue:w.value,"onUpdate:modelValue":e[58]||(e[58]=n=>w.value=n),class:"w-full"},null,8,["modelValue"]),s("label",cn,i(o(t)("settingPage.shopInformation.phoneNumber")),1)]),_:1})])):g("",!0),E.value==="logoPath"?(r(),p("div",mn,[w.value?(r(),p("img",{key:0,src:w.value,class:"border-1 border-round",style:{"max-width":"90%"},onClick:be},null,8,vn)):(r(),p("img",{key:1,src:gt,class:"border-1 border-round",style:{"max-width":"90%"},onClick:be})),s("input",{type:"file",ref_key:"fileInput",ref:ge,accept:"image/*",style:{display:"none"},onChange:tt},null,544),o(ee)?(r(),k(c,{key:2,class:"w-full",label:"恢复默认logo",onClick:st})):g("",!0)])):g("",!0),E.value==="latitudeAndLongitude"?(r(),p("div",fn,[l(v,{variant:"on"},{default:f(()=>[l(d,{type:"text",modelValue:w.value.longitude,"onUpdate:modelValue":e[59]||(e[59]=n=>w.value.longitude=n),class:"w-full"},null,8,["modelValue"]),s("label",pn,i(o(t)("settingPage.shopInformation.longitude")),1)]),_:1}),l(v,{variant:"on"},{default:f(()=>[l(d,{type:"text",modelValue:w.value.latitude,"onUpdate:modelValue":e[60]||(e[60]=n=>w.value.latitude=n),class:"w-full"},null,8,["modelValue"]),s("label",gn,i(o(t)("settingPage.shopInformation.latitude")),1)]),_:1})])):g("",!0),s("div",bn,[l(c,{class:"w-full",label:o(t)("common.save"),onClick:e[61]||(e[61]=n=>Ue(E.value,w.value))},null,8,["label"])])]),_:1},8,["visible","header"])],64)}}};export{Nn as default};
