import{s as D}from"./index-zFxrylFU.js";import{b as q}from"./index-CuUU_rbT.js";import{s as $}from"./index-CQMKdJMy.js";import{s as E}from"./index-DuZRgCR-.js";import{C as h,Q as k}from"./CodeMaker-IOgtdCDu.js";import{q as U,h as i,u as B,c as w,a,d as n,t as u,l,e as x,f as N,w as Q,F as S,o as _}from"./index-B4JcL17m.js";import"./index-BWeSIUww.js";import"./_commonjsHelpers-gnU0ypJ3.js";const j={class:"flex flex-wrap align-items-center"},F={class:"font-bold"},L={class:"flex flex-wrap justify-content-center w-full mt-2"},M={key:0,class:"flex flex-column align-items-center justify-content-center"},A={class:"font-bold"},I={key:1,class:"flex flex-column align-items-center justify-content-center gap-3"},O={class:"font-bold"},G={class:"flex flex-row gap-3"},z={for:"on_label"},H={for:"on_label"},ae={__name:"QCodePage",setup(J){const{t:o}=U(),m=i(!1),y=B(),g=i(0);i("");const b=i(0),s=i(""),p=i(null),C=i(!1);async function V(){const t=document.createElement("canvas");for(let e=g.value;e<=b.value;e++){const f=e<10?`0${e}`:`${e}`,d=window.env.QR_ADDR+h.SimpleEncode(f);console.log("生成二维码数据: ",d),await k.toCanvas(t,d,{width:300});const r=document.createElement("a");r.download=`${f}.png`,r.href=t.toDataURL("image/png"),r.click(),await new Promise(v=>setTimeout(v,300))}console.log("全部二维码下载完毕")}const P=()=>{if(s.value){let t=window.env.QR_ADDR+h.SimpleEncode(s.value);console.log("The qrcode data: ",t),k.toCanvas(p.value,t,{width:300},e=>{e?console.error(e):C.value=!0})}},R=()=>{if(p.value){const t=document.createElement("a");t.download=`座号-${s.value}-二维码.png`,t.href=p.value.toDataURL("image/png"),t.click()}};function T(){if(!s.value){y.add({severity:"error",summary:o("common.error"),detail:o("optionPages.emptyTableMsg"),life:3e3});return}P(),y.add({severity:"success",summary:o("common.success"),detail:o("optionPages.createQrMsg")+s.value,life:3e3})}return(t,e)=>{const f=E,d=$,r=q,v=D;return _(),w(S,null,[a("div",j,[n(f,{modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=c=>m.value=c),class:"m-4"},null,8,["modelValue"]),a("p",F,u(l(o)("optionPages.createQrOne")),1)]),a("div",L,[m.value?x("",!0):(_(),w("div",M,[a("h1",A,u(l(o)("optionPages.tableQr")),1),n(d,{type:"text",modelValue:s.value,"onUpdate:modelValue":e[1]||(e[1]=c=>s.value=c),placeholder:l(o)("optionPages.enterTable"),class:"m-3"},null,8,["modelValue","placeholder"]),n(r,{label:l(o)("optionPages.createQr"),onClick:T},null,8,["label"]),a("div",null,[a("canvas",{ref_key:"qrCanvas",ref:p},null,512)]),C.value?(_(),N(r,{key:0,label:l(o)("optionPages.downloadQr"),icon:"pi pi-download",onClick:R},null,8,["label"])):x("",!0)])),m.value?(_(),w("div",I,[a("h2",O,u(l(o)("optionPages.tableQrOne")),1),a("div",G,[n(v,{variant:"on"},{default:Q(()=>[n(d,{type:"number",modelValue:g.value,"onUpdate:modelValue":e[2]||(e[2]=c=>g.value=c),style:{"max-width":"100px"}},null,8,["modelValue"]),a("label",z,u(l(o)("optionPages.startTable")),1)]),_:1}),n(v,{variant:"on"},{default:Q(()=>[n(d,{type:"number",modelValue:b.value,"onUpdate:modelValue":e[3]||(e[3]=c=>b.value=c),style:{"max-width":"100px"}},null,8,["modelValue"]),a("label",H,u(l(o)("optionPages.endTable")),1)]),_:1})]),n(r,{label:l(o)("optionPages.createDownloadQr"),onClick:V},null,8,["label"])])):x("",!0)])],64)}}};export{ae as default};
