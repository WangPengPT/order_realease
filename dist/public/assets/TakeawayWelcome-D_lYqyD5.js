import{_ as oe,P as ne}from"./pagination-BMK1f9ll.js";import{c as a,g as ie,m as P}from"./index-CqHK_XIN.js";import{a as re,B as ue,b as _,D as ce,d as de,f as me,g as fe,h as pe}from"./primevue-CBPQtTnk.js";import{c as I,S as ve,a as ge}from"./cookie-B5yvvDQV.js";import{Q as E,b as v,C as g,w as V,e as he,R as we,U as _e,f as c,v as m,a as k,h as l,s as d,M as o,F as h,y as x,S as xe,o as n,t as p,A as j,c as M,B as W}from"./vue-Dca0Sd-v.js";import{c as be}from"./vendor-BwD4SF-p.js";import{_ as ye}from"./_plugin-vue_export-helper-DlAUqK2U.js";be();const ke=["src"],Ce=["onClick"],$e=["src"],Le={class:"flex flex-column w-full"},Pe={class:"w-full"},Ie={class:"flex flex-row justify-content-center align-items-center"},Be={class:"flex flex-row justify-content-center align-items-center"},Te={key:0,class:"pr-1 w-2rem h-auto"},Ne=["src"],Ae={key:0,class:"w-full"},Se={class:"w-full bg-black-alpha-90 h-3rem flex flex-row justify-content-between"},je={class:"flex align-content-center"},Me={style:{position:"relative",width:"100%",height:"350px",overflow:"hidden","border-radius":"10px","margin-left":"1rem","margin-right":"1rem","margin-top":"1rem"}},ze=["src","alt"],Fe={class:"w-full h-full text-center p-3 flex flex-column justify-content-end",style:{position:"absolute",inset:"0","z-index":"1"}},De={class:"text-white font-bold m-0"},Ue={key:0,class:"text-white mt-2"},Oe={class:"text-white mt-2"},Re={class:"p-4"},Ee={class:"flex justify-content-center flex-row pb-5 gap-2"},Ve={class:"flex w-full"},We={key:0,class:"w-full text-sm break-words px-2",style:{"white-space":"pre-wrap"}},Ge={key:1,class:"flex flex-column w-full"},He={class:"w-full text-sm break-words px-2",style:{"white-space":"pre-wrap"}},qe=["src"],Xe={class:"border-400 border-round border-1 p-3"},Je={class:"text-center font-bold"},Qe={key:0,class:"w-full overflow-hidden"},Ke=["src"],Ye={class:"w-full overflow-hidden",style:{"aspect-ratio":"2 / 1.5"}},Ze=["src"],et={class:"font-bold"},tt={class:"flex flex-column"},st={class:"flex flex-row justify-content-between w-full"},lt=["innerHTML"],at=["innerHTML"],ot={class:"m-1 max-w-screen flex flex-column flex align-items-center"},nt={key:1,class:"fixed right-0 bottom-0 p-4",style:{"z-index":"2"}},it={__name:"TakeawayWelcome",props:["switchTo"],setup(rt){const b=[{label:"pt",imagePath:"flags/pt.png"},{label:"en",imagePath:"flags/en.png"},{label:"zh",imagePath:"flags/zh.png"}],z=_e();xe();const{locale:w}=E(),{t:f}=E(),C=v(null),F=v(void 0),B=v(!0),T=v(!1);v([]),v();const G=g(()=>a.getPickupDate("restaurantName")),i=v({}),H=v(""),N=v("");function q(){const e=I.getCookie("language");e&&(w.value=e)}function X(){T.value=!0}let $=null;V(()=>[a.currentTakeAwayPage.value,a.addr.value],([e,t])=>{var s,u,r;i.value=e,(u=(s=i.value)==null?void 0:s.data)!=null&&u.logoPath&&((r=i.value)!=null&&r.imagesPath)&&(H.value=a.pathFormated(i.value.data.logoPath,i.value.imagesPath))},{immediate:!0}),he(async()=>{var e;a.initMenu(!0),q(),N.value=await ie(),$=new IntersectionObserver(t=>{t.forEach(s=>{s.isIntersecting?B.value=!0:B.value=!1})},{threshold:.1}),(e=C.value)!=null&&e.$el&&$.observe(C.value.$el)}),we(()=>{var e;$&&((e=C.value)!=null&&e.$el)&&$.unobserve(C.value.$el)}),V(()=>a.currentTakeAwayPage.value,e=>{e&&(i.value=e)},{immediate:!0});const J=g(()=>{const e="/";switch(w.value.toLowerCase()){case"pt":return e+b[0].imagePath;case"en":return e+b[1].imagePath;case"zh":return e+b[2].imagePath;default:return e+b[1].imagePath}});function y(e){const t=`text_${w.value.toLowerCase()}`;return e[t]}const Q=Date.now(),D=I.getCookie("login_time");let A;D&&(A=JSON.parse(D));const K=g(()=>b.filter(e=>e.label!==w.value.toLowerCase()).map(e=>({...e,command:()=>{w.value=e.label,Y(e.label)}})));function Y(e){I.setCookie("language",e)}A&&(Q-A>60*5*1e3?I.clearAllCookies():S());function S(){if(!a.settings.value.delivery||!a.permissionsControl.value.delivery){P.show_warn(f("notification.deliveryClosed"));return}z.push("/table")}function Z(){if(!a.settings.value.reserver||!a.permissionsControl.value.reserver){P.show_warn(f("notification.reserverClosed"));return}z.push("/reservePage")}function U(e){window.open(e,"_blank")}g(()=>[{label:f("common.options"),items:[{label:f("common.pay"),icon:"pi pi-wallet",command:()=>{a.send_cmd(a.getTable(),"pay"),P.show_info(f("notification.pay_msg"))}},{label:f("common.call"),icon:"pi pi-user-plus",command:()=>{a.send_cmd(a.getTable(),"call"),P.show_info(f("notification.call_msg"))}}]}]);const ee=g(()=>[{name:f("home.mapNavigationButton"),image:"/images/xiaoxiongmarketLogo.png",onclick:()=>{window.open("https://xiaoxiongmarket.com/","_blank")}}]);function O(e){return i.value.data.options[e]?"font-bold":""}function R(e){const t=e[`text_${w.value.toLowerCase()}`];return t?t.replace(/\[\[(.*?)\|(.*?)\]\]/g,(s,u,r)=>`<a href="${r.startsWith("http")?r:`https://${r}`}" target="_blank" rel="noopener noreferrer" class="text-blue-500 underline cursor-pointer">${u}</a>`):""}g(()=>{const e=a.getShopInfo("location");let t="";e&&(t+=(e.street?f("common.location")+": "+e.street:"")+(e.postcode?e.postcode:"")+(e.city?", "+e.city:""));const s=a.getShopInfo("phoneNumber");return s&&(t+=`
`+f("common.contact")+": "+s),t});const te=g(()=>{var t,s,u;return(((u=(s=(t=i.value)==null?void 0:t.data)==null?void 0:s.backgrounds)==null?void 0:u.filter(r=>r.src!==""))||[]).length===0}),se=g(()=>{var t,s,u;const e=((u=(s=(t=i.value)==null?void 0:t.data)==null?void 0:s.backgrounds)==null?void 0:u.filter(r=>r.src!==""))||[];return e.length>0?e.map(r=>r.src):N.value?[N.value]:[]});function le(){const e=a.shopInfo.value,t=e.location,s=`${t.street}, ${t.postcode}, ${t.city}, ${t.region}, ${t.country}`,u=e.phoneNumber;return`${s} 
${u}`}return(e,t)=>(n(),c(h,null,[m(o(re),{model:K.value,direction:"down",transitionDelay:80,class:"absolute bottom-1 right-0"},{button:d(({toggleCallback:s})=>[m(o(_),{outlined:"",onClick:s,class:"custom-clean-button",style:{"padding-top":"11px","padding-right":"14px"}},{default:d(()=>[l("img",{src:J.value,style:{width:"1.7rem",height:"1.7rem"}},null,8,ke)]),_:2},1032,["onClick"])]),item:d(({item:s,toggleCallback:u})=>[l("div",{class:"flex flex-col items-center justify-between",onClick:u},[l("img",{src:s.imagePath,alt:"lang",style:{width:"1.7rem",height:"1.7rem"}},null,8,$e)],8,Ce)]),_:1},8,["model"]),m(o(ue),{visible:T.value,"onUpdate:visible":t[0]||(t[0]=s=>T.value=s),position:"left",class:"max-w-12rem",pt:{content:{class:"p-0"},header:{class:"p-2"}}},{default:d(()=>[l("div",Le,[(n(!0),c(h,null,x(ee.value,(s,u)=>(n(),c("div",Pe,[l("div",Ie,[m(o(_),{label:s.name,onClick:s.onclick,text:"",class:"w-full text-sm text-center"},{default:d(()=>[l("div",Be,[s.image?(n(),c("div",Te,[l("img",{src:s.image,class:"w-full h-full"},null,8,Ne)])):k("",!0),l("span",null,p(s.name),1)])]),_:2},1032,["label","onClick"])])]))),256))])]),_:1},8,["visible"]),i.value&&i.value.data?(n(),c("div",Ae,[l("div",Se,[l("div",je,[m(o(_),{icon:"pi pi-bars text-xl",class:"",onClick:X})])]),m(o(ce),{value:se.value,showThumbnails:!1,showIndicators:!0,autoPlay:!0,circular:!0,transitionInterval:4e3,class:"w-full h-full",containerStyle:"position:relative;",pt:{root:{style:{border:"none",boxShadow:"none"}},indicatorButton:{style:{width:"10px",height:"10px"}},indicatorList:{style:{padding:"5px"}}}},{item:d(s=>[l("div",Me,[l("img",{src:te.value?s.item:o(a).pathFormated(s.item,i.value.imagesPath),alt:s.item.alt,style:{width:"100%",height:"100%","object-fit":"cover","object-position":"center",display:"block"}},null,8,ze),t[8]||(t[8]=l("div",{style:{position:"absolute",inset:"0",background:"linear-gradient(to top, rgba(0,0,0,0.8), rgba(0,0,0,0.2) 50%, transparent)","pointer-events":"none","z-index":"1"}},null,-1)),l("div",Fe,[l("h3",De,p(i.value.data.title||G.value),1),o(a).testEnvironment.value?(n(),c("div",Ue,[t[7]||(t[7]=l("h2",{class:"m-0"},"DEMO",-1)),l("span",null,p(o(f)("home.demoDescription")),1)])):k("",!0),l("div",null,[l("span",Oe,p(y(i.value.data.subtitle)),1)])])])]),_:1},8,["value"]),l("div",Re,[l("div",Ee,[m(o(_),{onClick:t[1]||(t[1]=s=>S()),class:"w-full font-bold",style:{"border-radius":"20px",width:"120px"}},{default:d(()=>[j(p(e.$t("home.takeAway")),1)]),_:1}),m(o(_),{onClick:t[2]||(t[2]=s=>Z()),class:"w-full font-bold",style:{"border-radius":"20px",width:"120px"}},{default:d(()=>[j(p(e.$t("home.reserve")),1)]),_:1})]),l("div",Ve,[m(o(de),{value:F.value,"onUpdate:value":t[3]||(t[3]=s=>F.value=s),class:"w-full max-w-xl mx-auto"},{default:d(()=>[(n(!0),c(h,null,x(i.value.data.titles,(s,u)=>(n(),M(o(me),{value:u},{default:d(()=>[m(o(fe),null,{default:d(()=>[j(p(y(s.title)),1)]),_:2},1024),m(o(pe),{class:"p-1"},{default:d(()=>[s.title.text_zh.includes("餐厅信息")?(n(),c("div",We,p(le()),1)):(n(),c("div",Ge,[l("div",He,p(y(s.description)),1),l("img",{src:o(a).pathFormated(s.image.src,i.value.imagesPath),class:"max-w-5rem h-auto block mr-auto p-1 invert-image"},null,8,qe)]))]),_:2},1024)]),_:2},1032,["value"]))),256))]),_:1},8,["value"])]),t[10]||(t[10]=l("div",{class:"p-4"},null,-1)),i.value.data?(n(!0),c(h,{key:0},x(i.value.data.frames,(s,u)=>(n(),c("div",null,[l("div",Xe,[(n(!0),c(h,null,x(s,(r,ae)=>(n(),c("div",null,[l("h1",Je,p(y(r.title)),1),r.images.length<=1?(n(),c("div",Qe,[l("img",{src:o(a).pathFormated(r.images[0].src,i.value.imagesPath),class:"w-full"},null,8,Ke)])):(n(),M(o(ge),{key:1,"slides-per-view":1,loop:!0,class:"w-full",modules:[o(ne)],pagination:{clickable:!0}},{default:d(()=>[(n(!0),c(h,null,x(r.images,(L,ut)=>(n(),M(o(ve),null,{default:d(()=>[l("div",Ye,[l("img",{src:o(a).pathFormated(L.src,i.value.imagesPath),class:"w-full h-full",style:{"object-fit":"cover"}},null,8,Ze)])]),_:2},1024))),256))]),_:2},1032,["modules"])),l("h4",et,p(y(r.subtitle)),1),(n(!0),c(h,null,x(r.descriptions,L=>(n(),c("div",null,[l("div",tt,[l("div",st,[l("span",{class:W([O(0),"break-words text-left"]),innerHTML:R(L.left),style:{"white-space":"pre-wrap"}},null,10,lt),l("span",{class:W([O(1),"break-words text-right"]),innerHTML:R(L.right),style:{"white-space":"pre-wrap"}},null,10,at)])])]))),256))]))),256))]),t[9]||(t[9]=l("div",{class:"p-4"},null,-1))]))),256)):k("",!0)])])):k("",!0),l("div",ot,[l("div",{class:"absoluto top-0 text-center text-xs p-2 underline cursor-pointer",onClick:t[4]||(t[4]=s=>U("https://5am3eq-wc.myshopify.com/"))}," ©2025 XIAOXIONG® v1.1.114 "),l("div",{class:"absoluto top-0 text-center text-xs p-2",onClick:t[5]||(t[5]=s=>U("https://5am3eq-wc.myshopify.com/"))},t[11]||(t[11]=[l("img",{src:oe,style:{width:"7rem"}},null,-1)]))]),B.value?k("",!0):(n(),c("div",nt,[m(o(_),{rounded:"","aria-label":"Star",onClick:t[6]||(t[6]=s=>S()),class:"w-full font-bold p-button-lg shadow-6"},{default:d(()=>t[12]||(t[12]=[l("span",{class:"material-icons text-5xl"},"restaurant",-1)])),_:1,__:[12]})]))],64))}},ht=ye(it,[["__scopeId","data-v-ff2d6544"]]);export{ht as default};
