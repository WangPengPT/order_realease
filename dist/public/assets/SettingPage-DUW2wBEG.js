import{s as Be}from"./index-Bou3Cgws.js";import{s as Oe}from"./index-DckPBD-d.js";import{s as Ae}from"./index-C6V-m699.js";import{s as Ne}from"./index-CpzADLlJ.js";import{s as Me}from"./index-BaZKHvpY.js";import{s as We}from"./index-DhhTiiKr.js";import{b as He}from"./index-C1oAa5y9.js";import{s as Le}from"./index-Dp9deW1k.js";import{s as Ke}from"./index-D9bOPsaC.js";import{x as qe,q as ze,u as Xe,s as Y,h as c,n as f,c as p,a as t,d as l,w as u,l as i,F,o as r,f as _,e as g,t as o,E as j,C as Ye}from"./index-C9KhHCGU.js";import"./index-B-wnw_76.js";import"./index-ZulOyDZ-.js";import"./index-CbK8zVea.js";import"./index-F3fzRR24.js";const Ge={class:"w-full h-full flex justify-content-center overflow-auto"},Je={class:"text-5xl ml-3"},Qe={class:"flex flex-column justify-content-center gap-3 p-3 h-full"},Ze={class:"flex flex-wrap justify-content-between align-items-center"},el={class:"flex flex-wrap justify-content-between align-items-center"},ll={class:"font-bold text-lg"},tl={class:"flex flex-wrap justify-content-between align-items-center"},nl={class:"font-bold text-lg"},al={style:{"max-width":"75%"}},sl={style:{"max-width":"75%"}},il={class:"flex flex-wrap justify-content-between align-items-center"},ol={class:"font-bold text-lg"},rl={class:"flex flex-wrap justify-content-between align-items-center"},ul={class:"font-bold text-lg"},dl={style:{"max-width":"75%"}},cl={style:{"max-width":"75%"}},vl={class:"flex flex-wrap justify-content-between align-items-center"},ml={class:"font-bold text-lg"},fl={style:{"max-width":"75%"}},pl={style:{"max-width":"75%"}},gl={style:{"max-width":"75%"}},bl={class:"flex flex-wrap justify-content-between align-items-center"},yl={class:"font-bold text-lg"},Pl={class:"flex justify-content-between"},kl={class:"flex flex-wrap justify-content-between align-items-center"},_l={class:"font-bold text-lg"},wl={class:"flex flex-wrap justify-content-between align-items-center"},hl={class:"font-bold text-lg"},xl={class:"flex flex-wrap justify-content-between align-items-center"},Vl={class:"font-bold text-lg"},Dl={style:{"max-width":"75%"}},Cl={class:"flex flex-column"},Il={class:"font-bold"},Fl={for:"on_label"},Ul={for:"on_label"},$l={class:"flex flex-column"},jl={class:"font-bold"},Sl={for:"on_label"},Tl={for:"on_label"},Rl={key:1,class:"flex justify-content-between align-items-center m-1 gap-2"},El={class:"font-bold"},Bl={for:"on_label"},Ol={class:"flex flex-column"},Al={key:0,class:"flex justify-content-between align-items-center m-1 gap-2"},Nl={for:"on_label"},Ml={key:1,class:"flex justify-content-between align-items-center m-1 gap-2"},Wl={class:"flex flex-column justify-content-center align-items-center m-1 gap-2"},Hl={class:"flex flex-wrap justify-content-center align-items-center m-1 gap-2"},Ll={class:"gap-2"},Kl={class:"font-bold m-1"},ql={key:2,class:"mt-3"},zl={for:"on_label"},Xl={key:3,class:"mt-3"},Yl={for:"on_label"},Gl={key:4,class:"flex justify-content-between align-items-center mt-3 gap-2"},Jl={for:"on_label"},Ql={for:"on_label"},ft={__name:"SettingPage",setup(Zl){const ne=qe(),{t:a}=ze(),ae=Xe(),G=Y(()=>!0),S=c(!1),R=c(!1),M=c(),W=c(),E=c(),se=["delivery","reserver","isFestiveDay","checkIP","useChildrenDiscount"],v=Y(()=>{const n={};for(const e of se)n[e]=f.getSettingsValue(e);return n}),ie=Y(()=>f.customDishApi.getSimplyCustomDishes()),oe=f.developerMode;function T(n,e){f.updateSetting(n,e,D)}const re=n=>n.includes("Aleatória®")?a("common.Sushi"):n.includes("MY BOX")?a("common.my_box"):a(`common.${n}`);function ue(){S.value=!0,M.value=f.getPriceDataValue("weekPrice")}function de(){R.value=!0,W.value=f.getPriceDataValue("childrenWeekPrice"),E.value=f.getPriceDataValue("childrenPricePercentage")}function C(n,e){switch(U.value=n,w.value=e,n){case"delivery":b.value=f.getPickupDataValue(e);break;case"reserver":b.value=f.getReserverDataValue(e);break}B.value=!0}function ce(n){O.value=n,A.value=!0}function ve(){J(M)?(f.updatePricesData("weekPrice",D),S.value=!1):D(!1,"设置价格","价格不能为负")}function me(){J(W)&&E.value>=0?(v.value.useChildrenDiscount?f.updatePricesData("childrenPricePercentage",D):f.updatePricesData("childrenWeekPrice",D),R.value=!1,S.value=!1):D(!1,"设置价格","价格/折扣不能为负")}function J(n){for(const e in n.value)for(const d in n.value[e])if(n.value[e][d]<0)return!1;return!0}function fe(n,e){switch(U.value){case"delivery":f.updatePickupData(n,e,D);break;case"reserver":f.updateReserverData(n,e,D);break}B.value=!1}function D(n,e,d=""){ae.add({severity:n?"success":"error",summary:a(n?"common.success":"common.error"),detail:a("common.edit")+a("settingPage."+pe(e))+a("common."+(n?"success":"failed")+d),life:1e3})}function pe(n){switch(n){case"delivery":return"takeAwayFeature";case"reserver":return"reserverFeature";case"isFestiveDay":return"useHolidayPrice";case"hasBibimbap":return"showBibimbap";case"hasBox":return"showBow";case"checkIP":return"wifiOrder";case"useChildrenDiscount":case"childrenPricePercentage":return"setChildrenPriceOn1"}}const B=c(!1),U=c(),w=c(),O=c(),A=c(!1),b=c();function ge(){const n=b.value[O.value];n[n.length]={begin:{hour:void 0,minute:void 0},end:{hour:void 0,minute:void 0}}}function be(n){ne.require({message:a("settingPage.removeInterval"),header:a("settingPage.removeIntervalHeader"),icon:"pi pi-trash",rejectProps:{label:a("common.cancel"),severity:"secondary",outlined:!0},acceptProps:{label:a("common.confirm"),severity:"danger"},accept:()=>{b.value[A.value].splice(n,1)},reject:()=>{}})}const Q=c(null),H=c(null),Z=c(null),ee=c(null),L=c(null),le=c(null),K=c(null),q=c(null);function ye(n){K.value=n.target.files[0],he()}function Pe(){var n;(n=le.value)==null||n.click()}function ke(){var n;(n=ee.value)==null||n.click()}function _e(n){q.value=n.target.files[0],we()}function we(){if(!q.value)return alert("请选择文件");const n=new FormData;n.append("page",q.value),f.dataTransfer.pageUserDatas(n)}function he(){if(!K.value)return alert("请选择文件");const n=new FormData;n.append("file",K.value),f.dataTransfer.importUserDatas(n)}function xe(n){H.value=n.target.files[0],Fe()}function Ve(){var n;(n=Q.value)==null||n.click()}function De(n){L.value=n.target.files[0],Ie()}function Ce(){var n;(n=Z.value)==null||n.click()}function Ie(){if(!L.value)return alert("请选择文件");const n=new FormData;n.append("file",L.value),f.dataTransfer.importMenuDatas(n)}function Fe(){if(!H.value)return alert("请选择文件");const n=new FormData;n.append("file",H.value),f.dataTransfer.importAppStateDatas(n)}function Ue(){f.dataTransfer.downloadFromServer()}function $e(n){f.customDishApi.updateCustomDishEnable(n)}const je=c([{label:"全部",icon:"pi pi-cog",command:()=>{z("all")}},{label:"外卖/订台",icon:"pi pi-shopping-bag",command:()=>{z("deliveryReserver")}},{label:"其他",icon:"pi pi-circle",command:()=>{z("others")}}]),Se=["all","deliveryReserver","others"],I=c({});Te();function Te(){for(const n of Se)I.value[n]=!1;I.value.all=!0}function z(n){for(const e in I.value)I.value[e]=!1;I.value[n]=!0}function h(n){return I.value.all||I.value[n]}return(n,e)=>{const d=Ke,Re=Le,m=He,k=We,$=Me,x=Ne,V=Ae,N=Oe,te=Be;return r(),p(F,null,[t("div",Ge,[l(k,{class:"flex flex-column h-full mt-1 lg:p-5 shadow-none",style:{"max-width":"1000px"}},{title:u(()=>[t("label",Je,o(i(a)("settingPage.settings")),1),l(d),l(Re,{class:"border-none p-0",model:je.value,breakpoint:"369px"},null,8,["model"]),l(d)]),content:u(()=>[t("div",Qe,[i(oe)?(r(),_(k,{key:0,class:"shadow-5"},{content:u(()=>[t("div",Ze,[e[34]||(e[34]=t("label",{class:"font-bold text-lg"},o("数据导入导出"),-1)),l(d),e[35]||(e[35]=t("label",null,o("导出所有数据"),-1)),l(m,{label:"导出",onClick:e[0]||(e[0]=s=>Ue())}),l(d),t("input",{type:"file",onChange:xe,accept:".json",style:{display:"none"},ref_key:"appStatefileInput",ref:Q},null,544),e[36]||(e[36]=t("label",null,o("导入AppState数据"),-1)),l(m,{label:"导入",onClick:Ve}),l(d),t("input",{type:"file",onChange:De,accept:".json",style:{display:"none"},ref_key:"menufileInput",ref:Z},null,544),e[37]||(e[37]=t("label",null,o("导入Menu数据"),-1)),l(m,{label:"导入",onClick:Ce}),l(d),t("input",{type:"file",onChange:ye,accept:".json",style:{display:"none"},ref_key:"usersfileInput",ref:le},null,544),e[38]||(e[38]=t("label",null,o("导入Users数据"),-1)),l(m,{label:"导入",onClick:Pe}),l(d),t("input",{type:"file",onChange:_e,accept:".zip",style:{display:"none"},ref_key:"pagefileInput",ref:ee},null,544),e[39]||(e[39]=t("label",null,o("导入主页数据"),-1)),l(m,{label:"导入",onClick:ke})])]),_:1})):g("",!0),h("deliveryReserver")?(r(),_(k,{key:1,class:"shadow-5"},{content:u(()=>[t("div",el,[t("label",ll,o(i(a)("settingPage.takeAwayFeature")),1),l($,{modelValue:v.value.delivery,"onUpdate:modelValue":[e[1]||(e[1]=s=>v.value.delivery=s),e[2]||(e[2]=s=>T("delivery",v.value.delivery))],disabled:G.value},null,8,["modelValue","disabled"]),l(d),t("label",null,o(i(a)("settingPage.takeAwayFeatureOn")),1)])]),_:1})):g("",!0),v.value.delivery&&h("deliveryReserver")?(r(),_(k,{key:2,class:"shadow-5"},{content:u(()=>[t("div",tl,[t("label",nl,o(i(a)("settingPage.delivery.title")),1),l(d),t("label",al,o(i(a)("settingPage.delivery.timeInterval")),1),l(m,{label:i(a)("common.edit"),onClick:e[3]||(e[3]=s=>C("delivery","timeInterval"))},null,8,["label"]),l(d),t("label",sl,o(i(a)("settingPage.delivery.beginEndInterval")),1),l(m,{label:i(a)("common.edit"),onClick:e[4]||(e[4]=s=>C("delivery","beginEndInterval"))},null,8,["label"])])]),_:1})):g("",!0),h("deliveryReserver")?(r(),_(k,{key:3,class:"shadow-5"},{content:u(()=>[t("div",il,[t("label",ol,o(i(a)("settingPage.reserverFeature")),1),l($,{modelValue:v.value.reserver,"onUpdate:modelValue":[e[5]||(e[5]=s=>v.value.reserver=s),e[6]||(e[6]=s=>T("reserver",v.value.reserver))],disabled:G.value},null,8,["modelValue","disabled"]),l(d),t("label",null,o(i(a)("settingPage.reserverFeatureOn")),1)])]),_:1})):g("",!0),v.value.reserver&&h("deliveryReserver")?(r(),_(k,{key:4,class:"shadow-5"},{content:u(()=>[t("div",rl,[t("label",ul,o(i(a)("settingPage.reserver.title")),1),l(d),t("label",dl,o(i(a)("settingPage.reserver.timeInterval")),1),l(m,{label:i(a)("common.edit"),onClick:e[7]||(e[7]=s=>C("reserver","timeInterval"))},null,8,["label"]),l(d),t("label",cl,o(i(a)("settingPage.reserver.beginEndInterval")),1),l(m,{label:i(a)("common.edit"),onClick:e[8]||(e[8]=s=>C("reserver","beginEndInterval"))},null,8,["label"])])]),_:1})):g("",!0),h("others")?(r(),_(k,{key:5,class:"shadow-5"},{content:u(()=>[t("div",vl,[t("label",ml,o(i(a)("settingPage.shopInformation")),1),l(d),t("label",fl,o(i(a)("settingPage.delivery.restaurantName")),1),l(m,{label:i(a)("common.edit"),onClick:e[9]||(e[9]=s=>C("delivery","restaurantName"))},null,8,["label"]),l(d),t("label",pl,o(i(a)("settingPage.delivery.pickupLocation")),1),l(m,{label:i(a)("common.edit"),onClick:e[10]||(e[10]=s=>C("delivery","pickupLocation"))},null,8,["label"]),l(d),t("label",gl,o(i(a)("settingPage.delivery.latitudeAndLongitude")),1),l(m,{label:i(a)("common.edit"),onClick:e[11]||(e[11]=s=>C("delivery","latitudeAndLongitude"))},null,8,["label"])])]),_:1})):g("",!0),h("others")?(r(),_(k,{key:6,class:"shadow-5"},{content:u(()=>[t("div",bl,[t("label",yl,o(i(a)("settingPage.useHolidayPrice")),1),l($,{modelValue:v.value.isFestiveDay,"onUpdate:modelValue":[e[12]||(e[12]=s=>v.value.isFestiveDay=s),e[13]||(e[13]=s=>T("isFestiveDay",v.value.isFestiveDay))]},null,8,["modelValue"]),l(d),t("label",null,o(i(a)("settingPage.useHolidayPriceOn")),1)])]),_:1})):g("",!0),h("others")?(r(),_(k,{key:7,class:"shadow-5"},{title:u(()=>[e[40]||(e[40]=Ye(" 自定义菜单 ",-1)),l(d)]),content:u(()=>[(r(!0),p(F,null,j(ie.value,s=>(r(),p("div",null,[t("div",Pl,[t("span",null,o(re(s.name)),1),l($,{modelValue:s.enable,"onUpdate:modelValue":[y=>s.enable=y,y=>$e(s)]},null,8,["modelValue","onUpdate:modelValue"])]),l(d)]))),256))]),_:1})):g("",!0),h("others")?(r(),_(k,{key:8,class:"shadow-5"},{content:u(()=>[t("div",kl,[t("label",_l,o(i(a)("settingPage.wifiOrder")),1),l($,{modelValue:v.value.checkIP,"onUpdate:modelValue":[e[14]||(e[14]=s=>v.value.checkIP=s),e[15]||(e[15]=s=>T("checkIP",v.value.checkIP))]},null,8,["modelValue"]),l(d),t("label",null,o(i(a)("settingPage.wifiOrderOn")),1)])]),_:1})):g("",!0),h("others")?(r(),_(k,{key:9,class:"shadow-5"},{content:u(()=>[t("div",wl,[t("label",hl,o(i(a)("settingPage.setPrice")),1),l(d),t("label",null,o(i(a)("settingPage.setPriceOn")),1),l(m,{label:i(a)("common.edit"),onClick:e[16]||(e[16]=s=>ue())},null,8,["label"])])]),_:1})):g("",!0),h("others")?(r(),_(k,{key:10,class:"shadow-5"},{content:u(()=>[t("div",xl,[t("label",Vl,o(i(a)("settingPage.setChildrenPrice")),1),l(d),t("label",null,o(i(a)("settingPage.setChildrenPriceOn1")),1),l($,{modelValue:v.value.useChildrenDiscount,"onUpdate:modelValue":[e[17]||(e[17]=s=>v.value.useChildrenDiscount=s),e[18]||(e[18]=s=>T("useChildrenDiscount",v.value.useChildrenDiscount))]},null,8,["modelValue"]),l(d),t("label",Dl,o(i(a)("settingPage.setChildrenPriceOn2")),1),l(m,{label:i(a)("common.edit"),onClick:e[19]||(e[19]=s=>de())},null,8,["label"])])]),_:1})):g("",!0)])]),_:1})]),l(N,{visible:S.value,"onUpdate:visible":e[21]||(e[21]=s=>S.value=s),header:i(a)("settingPage.editWeekPrice")},{default:u(()=>[t("div",Cl,[(r(!0),p(F,null,j(M.value,(s,y)=>(r(),p("div",{key:y,class:"flex justify-content-between m-1 gap-2"},[t("div",null,[t("label",Il,o(i(a)("settingPage.week."+y))+":",1)]),t("div",null,[l(V,{variant:"on"},{default:u(()=>[l(x,{type:"number",modelValue:s.lunch,"onUpdate:modelValue":P=>s.lunch=P,class:"w-full"},null,8,["modelValue","onUpdate:modelValue"]),t("label",Fl,o(i(a)("settingPage.lunch")),1)]),_:2},1024)]),t("div",null,[l(V,{variant:"on"},{default:u(()=>[l(x,{type:"number",modelValue:s.dinner,"onUpdate:modelValue":P=>s.dinner=P,class:"w-full"},null,8,["modelValue","onUpdate:modelValue"]),t("label",Ul,o(i(a)("settingPage.dinner")),1)]),_:2},1024)])]))),128)),l(m,{label:i(a)("common.save"),onClick:e[20]||(e[20]=s=>ve())},null,8,["label"])])]),_:1},8,["visible","header"]),l(N,{visible:R.value,"onUpdate:visible":e[24]||(e[24]=s=>R.value=s),header:i(a)("settingPage.editChildrenWeekPrice")},{default:u(()=>[t("div",$l,[v.value.useChildrenDiscount?g("",!0):(r(!0),p(F,{key:0},j(W.value,(s,y)=>(r(),p("div",{key:y,class:"flex justify-content-between align-items-center m-1 gap-2"},[t("div",null,[t("label",jl,o(i(a)("settingPage.week."+y))+":",1)]),t("div",null,[l(V,{variant:"on"},{default:u(()=>[l(x,{type:"number",modelValue:s.lunch,"onUpdate:modelValue":P=>s.lunch=P,class:"w-full"},null,8,["modelValue","onUpdate:modelValue"]),t("label",Sl,o(i(a)("settingPage.lunch")),1)]),_:2},1024)]),t("div",null,[l(V,{variant:"on"},{default:u(()=>[l(x,{type:"number",modelValue:s.dinner,"onUpdate:modelValue":P=>s.dinner=P,class:"w-full"},null,8,["modelValue","onUpdate:modelValue"]),t("label",Tl,o(i(a)("settingPage.dinner")),1)]),_:2},1024)])]))),128)),v.value.useChildrenDiscount?(r(),p("div",Rl,[t("div",null,[t("label",El,o(i(a)("settingPage.childrenPricePercentage"))+":",1)]),t("div",null,[l(V,{variant:"on"},{default:u(()=>[l(te,{type:"number",modelValue:E.value,"onUpdate:modelValue":e[22]||(e[22]=s=>E.value=s),class:"w-full",suffix:" %"},null,8,["modelValue"]),t("label",Bl,o(i(a)("settingPage.childrenPricePercentage")),1)]),_:1})])])):g("",!0),l(m,{class:"mt-2",label:i(a)("common.save"),onClick:e[23]||(e[23]=s=>me())},null,8,["label"])])]),_:1},8,["visible","header"]),l(N,{visible:B.value,"onUpdate:visible":e[33]||(e[33]=s=>B.value=s),header:i(a)("settingPage."+U.value+"."+w.value),style:{"max-height":"80%","max-width":"100%"},modal:!0,dismissableMask:!0},{default:u(()=>[t("div",Ol,[w.value==="timeInterval"?(r(),p("div",Al,[l(V,{variant:"on"},{default:u(()=>[l(te,{type:"number",modelValue:b.value,"onUpdate:modelValue":e[25]||(e[25]=s=>b.value=s),class:"w-full"},null,8,["modelValue"]),t("label",Nl,o(i(a)("settingPage."+U.value+"."+w.value)),1)]),_:1})])):g("",!0),w.value==="beginEndInterval"?(r(),p("div",Ml,[(r(!0),p(F,null,j(b.value,(s,y)=>(r(),_(m,{key:y,label:i(a)("settingPage.week."+y),onClick:P=>ce(y)},null,8,["label","onClick"]))),128)),l(N,{visible:A.value,"onUpdate:visible":e[27]||(e[27]=s=>A.value=s),header:i(a)("settingPage.week."+O.value),modal:!0,dismissableMask:!0},{default:u(()=>[t("div",Wl,[(r(!0),p(F,null,j(b.value[O.value],(s,y)=>(r(),p("div",Hl,[(r(!0),p(F,null,j(s,(P,Ee)=>(r(),p("div",Ll,[t("label",Kl,o(i(a)("settingPage."+Ee)),1),l(x,{type:"number",modelValue:P.hour,"onUpdate:modelValue":X=>P.hour=X,style:{width:"4rem"},min:0,max:23},null,8,["modelValue","onUpdate:modelValue"]),e[41]||(e[41]=t("label",{class:"font-bold m-1"},":",-1)),l(x,{type:"number",modelValue:P.minute,"onUpdate:modelValue":X=>P.minute=X,style:{width:"4rem"},min:0,max:59},null,8,["modelValue","onUpdate:modelValue"])]))),256)),l(m,{icon:"pi pi-trash",severity:"danger",onClick:P=>be(y)},null,8,["onClick"])]))),256)),l(m,{label:"+",class:"w-full",onClick:e[26]||(e[26]=s=>ge())})])]),_:1},8,["visible","header"])])):g("",!0),w.value==="restaurantName"?(r(),p("div",ql,[l(V,{variant:"on"},{default:u(()=>[l(x,{type:"text",modelValue:b.value,"onUpdate:modelValue":e[28]||(e[28]=s=>b.value=s),class:"w-full"},null,8,["modelValue"]),t("label",zl,o(i(a)("settingPage."+U.value+"."+w.value)),1)]),_:1})])):g("",!0),w.value==="pickupLocation"?(r(),p("div",Xl,[l(V,{variant:"on"},{default:u(()=>[l(x,{type:"text",modelValue:b.value,"onUpdate:modelValue":e[29]||(e[29]=s=>b.value=s),class:"w-full"},null,8,["modelValue"]),t("label",Yl,o(i(a)("settingPage."+U.value+"."+w.value)),1)]),_:1})])):g("",!0),w.value==="latitudeAndLongitude"?(r(),p("div",Gl,[l(V,{variant:"on"},{default:u(()=>[l(x,{type:"text",modelValue:b.value.longitude,"onUpdate:modelValue":e[30]||(e[30]=s=>b.value.longitude=s),class:"w-full"},null,8,["modelValue"]),t("label",Jl,o(i(a)("settingPage.delivery.longitude")),1)]),_:1}),l(V,{variant:"on"},{default:u(()=>[l(x,{type:"text",modelValue:b.value.latitude,"onUpdate:modelValue":e[31]||(e[31]=s=>b.value.latitude=s),class:"w-full"},null,8,["modelValue"]),t("label",Ql,o(i(a)("settingPage.delivery.latitude")),1)]),_:1})])):g("",!0),l(m,{class:"mt-2",label:i(a)("common.save"),onClick:e[32]||(e[32]=s=>fe(w.value,b.value))},null,8,["label"])])]),_:1},8,["visible","header"])],64)}}};export{ft as default};
