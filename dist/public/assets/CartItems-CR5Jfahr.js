import{b as u,C as c}from"./vue-Dca0Sd-v.js";const a=u([]),o=u([]),f=n=>{a.value.length=0;for(let t=0;t<n.length;t++)a.value.push(n[t])};function h(){const n=[];for(const t of o.value)if(t.name!="Descontos")for(const s of t.mainDishes){s.dish.quantity>0&&n.push(s.dish);for(const i of s.subItems)i.quantity>0&&(i.name=s.dish.name,i.image=s.dish.image,n.push(i))}return n}function d(n){const t=[];for(const s of n)t.push({id:s.id,quantity:s.quantity});return t}function m(n){if(Array.isArray(n))for(const t of n)for(const s of o.value)for(const i of s.mainDishes){i.dish.id===t.id&&i.subItems.length===0&&(i.dish.quantity=t.quantity);for(const r of i.subItems)r.id===t.id&&(r.quantity=t.quantity)}}function l(){for(const n of o.value)for(const t of n.mainDishes){t.dish.quantity=0;for(const s of t.subItems)s.quantity=0}}const y={dishDatas:o,dishes:a,showDishList:f,getAllIncrementedDish:h,updateDishDataQty:m,cleanDishDataQty:l,getIdsAndQuantity:d},e=u([]),D=c(()=>{const n=e.value.length,t=y.dishDatas.value.flatMap(s=>s.name=="Descontos"?[]:s.mainDishes).flatMap(s=>[s.dish,...s.subItems.map(i=>({...i,parentName:s.dish.name,parentImage:s.dish.image}))]).filter(s=>s.quantity>0).reduce((s,i)=>s+i.quantity,0);return n+t});function g(n){n.id=q(),e.value.push(n)}function p(n){for(let t=0;t<e.value.length;t++)if(e.value[t].id==n.id){e.value.splice(t,1);break}}function q(){const n=Date.now().toString(36),t=Math.random().toString(36).substring(2,5);return`${n}-${t}`}function v(){e.value=[]}const b={addItem:g,removeItem:p,cartDishs:e,cartItemCount:D,cleanAll:v};export{y as D,b as c};
