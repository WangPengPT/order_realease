import{s as O}from"./index-D33WLcMb.js";import{b as R}from"./index-BHpV6CJL.js";import{s as F}from"./index-BEOUu9CN.js";import{s as q}from"./index-BtkiwNtn.js";import{s as E,a as H,c as L,b as G}from"./index-BMZqjaQD.js";import{s as J}from"./index-DK5yXI6G.js";import{s as K}from"./index-BWVT6lUQ.js";import{q as Q,h as u,i as W,n as y,c as X,d as i,w as b,l as a,F as Y,o as z,C as Z,t as d,a as l,f as D,e as T}from"./index-BqYKOEDP.js";import"./index-C6x4OaDA.js";import"./index-DbAqWS-N.js";import"./index-C3SMEwjy.js";import"./index-DlRJ0q3z.js";import"./index-DQiu4Nmc.js";import"./index-Cdu0Twzs.js";import"./index-CKlwDvK9.js";import"./index-Cl3udPmc.js";import"./index-n-q_jCGA.js";import"./index-pc1pkD07.js";const ee={class:"flex flex-wrap justify-content-center py-5"},te={class:"m-3 text-gray-500"},le={class:"flex flex-column gap-1 mt-2 mb-2"},oe={class:"flex flex-wrap justify-content-between"},ne={class:"flex align-items-center gap-2 mb-1 mr-2"},ae={class:"flex flex-column gap-2 mt-2 mb-2"},se={class:"flex align-items-center"},ie={class:"ml-1"},re={class:"flex align-items-center"},ue={class:"ml-1"},pe={class:"mt-2 mb-2"},me={class:"mt-2 mb-2"},ce={class:"flex flex-wrap justify-content-between align-items-center m-3"},Ue={__name:"PrintersPage",setup(de){const{t:n}=Q(),v=u(null),S=u([]),f=u([]),g=u([]),$=u([]),P=u(!1),x=u(null),w=u(!1),V=u(!1),k=u(14),h=u(!0);function U(){x.value=null}function B(t){const e=t.data,p=[""].concat(e.printers);if(S.value=p,h.value=S.value.length>1,v.value=e.curPrinter,k.value=e.fontSize||14,g.value.length==0){const m={},c=y.customDishApi.getSimplyCustomDishes().filter(r=>r.enable).map(r=>r.name);for(let r=0;r<y.menuApi.menuData.value.length;r++){const s=y.menuApi.menuData.value[r];s.category&&s.category!=""&&(m[s.category]||(m[s.category]=!0,c.push(s.category))),s.tags&&s.tags!=""&&(m[s.tags]||(m[s.tags]=!0,c.push(s.tags)))}g.value=c,console.log(g.value)}if(e.menu){const m=[];for(let c=0;c<e.menu.length;c++){const r=e.menu[c];let s=!1;for(let _=0;_<g.value.length;_++)g.value[_]==r&&(s=!0);s&&m.push(r)}f.value=m}else f.value=[];console.log(f.value),x.value=e,w.value=e.every_one=="true",V.value=e.print_takeaway=="true",P.value=!0}function I(){const t=x.value,e=v.value,p=f.value;t.curPrinter=e,t.menu=[...p],console.log(w.value),w.value==!0?t.every_one="true":t.every_one="false",t.print_takeaway=V.value?"true":"false",t.fontSize=k.value,console.log(t.id,e,p,t.print_takeaway,t.every_one,t.fontSize),y.selectPrinter(t.id,e,p,t.print_takeaway,t.every_one,t.fontSize),P.value=!1}function M(){const t=x.value;y.printTestPage(t.id)}return W(()=>{y.getPrinters(t=>{$.value=t,console.log("printers",$.value.length)})}),u(""),(t,e)=>{const p=H,m=E,c=K,r=L,s=J,_=G,N=q,j=F,C=R,A=O;return z(),X(Y,null,[i(m,{value:$.value,onRowClick:B},{empty:b(()=>[l("div",ee,[e[10]||(e[10]=l("i",{class:"pi pi-search",style:{"font-size":"3rem",color:"#ccc"}},null,-1)),l("p",te,d(a(n)("optionPages.noPrinter")),1)])]),default:b(()=>[i(p,{field:"id",header:a(n)("optionPages.printerId"),sortable:"",style:{width:"10%"}},null,8,["header"]),i(p,{field:"curPrinter",header:a(n)("optionPages.printer"),sortable:"",style:{width:"20%"}},null,8,["header"]),i(p,{field:"menu",header:a(n)("optionPages.menu"),sortable:"",style:{width:"50%"}},{body:b(({data:o})=>[Z(d(o.menu.toString()),1)]),_:1},8,["header"]),i(p,{field:"every_one",header:a(n)("optionPages.oneByOne"),sortable:"",style:{width:"10%"}},null,8,["header"]),i(p,{field:"fontSize",header:a(n)("optionPages.fontSize"),sortable:"",style:{width:"10%"}},null,8,["header"])]),_:1},8,["value"]),i(A,{visible:P.value,"onUpdate:visible":e[9]||(e[9]=o=>P.value=o),header:a(n)("optionPages.printerSettings"),style:{"max-width":"500px","min-width":"300px"},modal:!0,dismissableMask:!0,onHide:U},{default:b(()=>[l("div",le,[l("div",oe,[l("label",null,d(a(n)("optionPages.printer"))+"ï¼š ",1),l("div",ne,[i(c,{modelValue:h.value,"onUpdate:modelValue":e[0]||(e[0]=o=>h.value=o)},null,8,["modelValue"]),l("label",null,d(a(n)("optionPages.usePrinterIP")),1)])]),h.value?T("",!0):(z(),D(r,{key:0,modelValue:v.value,"onUpdate:modelValue":e[1]||(e[1]=o=>v.value=o),class:"w-full md:w-56",placeholder:a(n)("optionPages.selectPrinter"),options:S.value,filter:""},null,8,["modelValue","placeholder","options"])),h.value?(z(),D(s,{key:1,type:"text",modelValue:v.value,"onUpdate:modelValue":e[2]||(e[2]=o=>v.value=o)},null,8,["modelValue"])):T("",!0)]),l("div",ae,[l("div",se,[i(_,{modelValue:w.value,"onUpdate:modelValue":e[3]||(e[3]=o=>w.value=o),binary:""},null,8,["modelValue"]),l("label",ie,d(a(n)("optionPages.printOne")),1)]),l("div",re,[i(_,{modelValue:V.value,"onUpdate:modelValue":e[4]||(e[4]=o=>V.value=o),binary:""},null,8,["modelValue"]),l("label",ue,d(a(n)("optionPages.printTakeawayOrder")),1)])]),l("div",pe,[l("label",null,d(a(n)("optionPages.printMenu")),1),i(N,{modelValue:f.value,"onUpdate:modelValue":e[5]||(e[5]=o=>f.value=o),options:g.value,class:"w-full md:w-56",filter:""},null,8,["modelValue","options"])]),l("div",me,[l("label",null,d(a(n)("optionPages.fontSize"))+": ",1),i(j,{modelValue:k.value,"onUpdate:modelValue":e[6]||(e[6]=o=>k.value=o),class:"w-full md:w-56",showButtons:"",buttonLayout:"horizontal",min:12,max:20,fluid:""},{incrementbuttonicon:b(()=>e[11]||(e[11]=[l("span",{class:"pi pi-plus"},null,-1)])),decrementbuttonicon:b(()=>e[12]||(e[12]=[l("span",{class:"pi pi-minus"},null,-1)])),_:1},8,["modelValue"])]),l("div",ce,[i(C,{onClick:e[7]||(e[7]=o=>M()),icon:"pi pi-print",color:"primary",label:a(n)("optionPages.printTest")},null,8,["label"]),i(C,{onClick:e[8]||(e[8]=o=>I()),color:"primary",label:a(n)("common.save")},null,8,["label"])])]),_:1},8,["visible","header"])],64)}}};export{Ue as default};
