import{s as le,_ as se,S as ae,P as oe,a as ne}from"./pagination-CKnysd2l.js";import{u as q,r as p,c as N,a as u,o as ie,b as re,w as ue,d as ce,e as de,m as S,f as n,g as r,h as l,i as V,j as c,k as a,n as T,t as d,F as g,l as y,p as o,q as O,s as E}from"./index-C5iz7lYN.js";import{s as me}from"./index-CBWuw7jD.js";import{s as h}from"./index-gX-T9372.js";import{_ as pe,s as fe,a as ve,b as ge,c as he}from"./_plugin-vue_export-helper-BoWCACVw.js";import{s as _e,a as be}from"./index-BOs_Hdu3.js";import{s as we}from"./index-CuT5IJZt.js";import"./index-JK5UEZAc.js";import"./index-C9ysALLz.js";const xe=["src"],ye=["onClick"],ke=["src"],Pe={class:"absolute top-0 border-0 right-0 p-2 flex flex-column flex align-items-center"},$e={class:"m-3 max-w-screen"},Ce={key:0,class:T(["w-full","p-4"])},Ie=["src"],Ne={key:0,class:"text-center p-1"},Se={key:1,class:"text-center p-1"},Fe={key:2},Be={class:"flex w-full"},Le={class:"flex flex-column"},Ve={class:"w-full text-sm break-words whitespace-pre-wrap px-2"},Oe=["src"],Te={class:"pt-5 pb-5"},je={class:"border-400 border-round border-1 p-3"},ze={class:"text-center font-bold"},Ae={key:0,class:"w-full overflow-hidden"},De=["src"],qe={class:"w-full overflow-hidden",style:{"aspect-ratio":"2 / 1.5"}},Ee=["src"],Re={class:"font-bold"},Ue={class:"flex flex-column"},Ge={class:"flex flex-row justify-content-between w-full"},Me={key:0,class:"fixed right-0 bottom-0 p-4",style:{"z-index":"2"}},We={class:"mt-2"},Xe={class:"flex justify-content-end mt-2"},He={__name:"Welcome",props:["switchTo"],setup(Je){const _=[{label:"pt",imagePath:"flags/pt.png"},{label:"en",imagePath:"flags/en.png"},{label:"zh",imagePath:"flags/zh.png"}],R=de(),U=ce(),{locale:b}=q(),{t:m}=q(),w=p(null),F=p(!0);p([]);const j=p(),G=N(()=>u.getPickupDate("restaurantName")),i=p({});function M(){const e=localStorage.getItem("language");e&&(b.value=e)}let k=null;function W(){return new Promise(e=>{let t=()=>{const s=u.currentPage.value;s&&Object.keys(s).length>0?e(s):setTimeout(t,200)};t()})}ie(async()=>{var e;M(),await W(),i.value=u.currentPage.value,console.log("page :",i.value),k=new IntersectionObserver(t=>{t.forEach(s=>{s.isIntersecting?F.value=!0:F.value=!1})},{threshold:.1}),(e=w.value)!=null&&e.$el&&k.observe(w.value.$el)}),re(()=>{var e;k&&((e=w.value)!=null&&e.$el)&&k.unobserve(w.value.$el)}),ue(()=>u.currentPage.value,e=>{e&&(i.value=e)},{immediate:!0});const X=N(()=>{const e="/";switch(b.value.toLowerCase()){case"pt":return e+_[0].imagePath;case"en":return e+_[1].imagePath;case"zh":return e+_[2].imagePath;default:return e+_[1].imagePath}});function f(e){return e[`text_${b.value.toLowerCase()}`]}const H=Date.now(),z=localStorage.getItem("login_time");let B;z&&(B=JSON.parse(z));const J=N(()=>_.filter(e=>e.label!==b.value.toLowerCase()).map(e=>({...e,command:()=>{b.value=e.label,K(e.label)}})));function K(e){localStorage.setItem("language",e)}function A(e){window.open(e,"_blank")}const Q=e=>{j.value.toggle(e)};B&&(H-B>60*5*1e3?localStorage.clear():L());function L(){const e=U.query.table;R.push({path:"/table",query:{table:e}})}const Y=N(()=>[{label:m("common.options"),items:[{label:m("common.pay"),icon:"pi pi-wallet",command:()=>{Z()}},{label:m("common.call"),icon:"pi pi-user-plus",command:()=>{u.send_cmd(u.getTable(),{cmd:"call"}),S.show_info(m("notification.call_msg"))}}]}]);function D(e){return i.value.data.options[e]?"font-bold":""}const P=p(!1),$=p(),x=p();function Z(){P.value=!0}function ee(){e($.value)?u.send_cmd(u.getTable(),{cmd:"pay",nif:$.value,note:x.value},t=>{t.success?(S.show_info(m("notification.pay_msg")),P.value=!1):S.show_error(m("common.failed"))}):S.show_warn(m("notification.cancel_msg"));function e(t){return!t||t.toString().length===9||t.toString().length===0}}function te(){x.value&&(x.value=void 0)}return(e,t)=>(o(),n(g,null,[r(a(le),{model:J.value,direction:"down",transitionDelay:80,class:"absolute top-0 left-0 border-0"},{button:c(({toggleCallback:s})=>[r(a(h),{outlined:"",onClick:s,class:"custom-clean-button"},{default:c(()=>[l("img",{src:X.value,style:{width:"38px",height:"38px"}},null,8,xe)]),_:2},1032,["onClick"])]),item:c(({item:s,toggleCallback:C})=>[l("div",{class:"flex flex-col items-center justify-between",onClick:C},[l("img",{src:s.imagePath,alt:"lang",style:{width:"38px",height:"38px"}},null,8,ke)],8,ye)]),_:1},8,["model"]),l("div",Pe,[l("div",null,[r(a(h),{icon:"pi pi-bell",rounded:"","aria-label":"Filter",onClick:Q,"aria-haspopup":"true","aria-controls":"overlay_menu",size:"small",style:{width:"42px",height:"42px"}}),r(a(me),{ref_key:"menu",ref:j,id:"overlay_menu",model:Y.value,popup:!0},null,8,["model"])]),l("div",null,[r(a(h),{icon:"pi pi-instagram",class:"custom-clean-button",onClick:t[0]||(t[0]=()=>{})})])]),l("div",$e,[i.value?(o(),n("div",Ce,[l("img",{src:a(u).pathFormated(i.value.data.logoPath,i.value.imagesPath),alt:"Logo",class:"max-w-6rem h-auto w-full mx-auto block"},null,8,Ie),i.value.data.restaurantName?(o(),n("h3",Ne,d(i.value.data.restaurantName),1)):(o(),n("h3",Se,d(G.value),1)),a(u).testEnvironment.value=="true"?(o(),n("h1",Fe,"DEMO")):V("",!0)])):V("",!0),l("div",Be,[r(a(fe),{class:"w-full max-w-xl mx-auto"},{default:c(()=>[(o(!0),n(g,null,y(i.value.data.titles,(s,C)=>(o(),O(a(ve),{value:C},{default:c(()=>[r(a(ge),null,{default:c(()=>[E(d(f(s.title)),1)]),_:2},1024),r(a(he),{class:"p-1"},{default:c(()=>[l("div",Le,[l("div",Ve,d(f(s.description)),1),l("img",{src:a(u).pathFormated(s.image.src,i.value.imagesPath),class:"max-w-5rem h-auto block mr-auto p-1 invert-image"},null,8,Oe)])]),_:2},1024)]),_:2},1032,["value"]))),256))]),_:1})]),l("div",Te,[r(a(h),{ref_key:"orderButtonRef",ref:w,onClick:t[1]||(t[1]=s=>L()),class:"w-full font-bold",style:{"border-radius":"20px"}},{default:c(()=>[E(d(e.$t("home.orderNow")),1)]),_:1},512)]),(o(!0),n(g,null,y(i.value.data.frames,(s,C)=>(o(),n("div",null,[l("div",je,[(o(!0),n(g,null,y(s,(v,Ke)=>(o(),n("div",null,[l("h1",ze,d(f(v.title)),1),v.images.length<=1?(o(),n("div",Ae,[l("img",{src:a(u).pathFormated(v.images[0].src,i.value.imagesPath),class:"w-full"},null,8,De)])):(o(),O(a(ne),{key:1,"slides-per-view":1,loop:!0,class:"w-full",modules:[a(oe)],pagination:{clickable:!0}},{default:c(()=>[(o(!0),n(g,null,y(v.images,(I,Qe)=>(o(),O(a(ae),null,{default:c(()=>[l("div",qe,[l("img",{src:a(u).pathFormated(I.src,i.value.imagesPath),class:"w-full h-full",style:{"object-fit":"cover"}},null,8,Ee)])]),_:2},1024))),256))]),_:2},1032,["modules"])),l("h4",Re,d(f(v.subtitle)),1),(o(!0),n(g,null,y(v.descriptions,I=>(o(),n("div",null,[l("div",Ue,[l("div",Ge,[l("span",{class:T(D(0))},d(f(I.left)),3),l("span",{class:T(D(1))},d(f(I.right)),3)])])]))),256))]))),256))]),t[9]||(t[9]=l("div",{class:"p-4"},null,-1))]))),256)),l("div",{class:"absoluto top-0 text-center text-xs p-2 underline cursor-pointer",onClick:t[2]||(t[2]=s=>A("https://5am3eq-wc.myshopify.com/"))}," ©2025 XIAOXIONG® v2.0.7 "),l("div",{class:"absoluto top-0 text-center text-xs p-2",onClick:t[3]||(t[3]=s=>A("https://5am3eq-wc.myshopify.com/"))},t[10]||(t[10]=[l("img",{src:se,style:{width:"7rem"}},null,-1)]))]),F.value?V("",!0):(o(),n("div",Me,[r(a(h),{rounded:"","aria-label":"Star",onClick:t[4]||(t[4]=s=>L()),class:"w-full font-bold p-button-lg shadow-6"},{default:c(()=>t[11]||(t[11]=[l("span",{class:"material-icons text-5xl"},"restaurant",-1)])),_:1,__:[11]})])),r(a(_e),{visible:P.value,"onUpdate:visible":t[8]||(t[8]=s=>P.value=s),header:"结账",class:"flex flex-column",modal:!0,dismissableMask:!0,onHide:te},{default:c(()=>[l("div",null,[t[12]||(t[12]=l("label",null,"NIF:",-1)),r(a(we),{modelValue:$.value,"onUpdate:modelValue":t[5]||(t[5]=s=>$.value=s),inputId:"withoutgrouping",useGrouping:!1,fluid:"",class:"w-full m-1"},null,8,["modelValue"])]),l("div",We,[l("label",null,d(e.$t("common.note"))+":",1),r(a(be),{type:"text",modelValue:x.value,"onUpdate:modelValue":t[6]||(t[6]=s=>x.value=s),class:"w-full m-1"},null,8,["modelValue"])]),l("div",Xe,[r(a(h),{label:a(m)("common.send"),onClick:t[7]||(t[7]=s=>ee())},null,8,["label"])])]),_:1},8,["visible"])],64))}},it=pe(He,[["__scopeId","data-v-e11f27b4"]]);export{it as default};
