import{s as xe,a as be,b as we,c as ye,d as ke,e as Ce,f as $e,g as Ie,h as Pe,i as Le}from"./primevue-DzNNCCVj.js";import{_ as Ne,P as Be}from"./pagination-BO-ad-kk.js";import{S as Se,a as Me}from"./pagination-C-oWYlPG.js";import{O as te,r as g,y as I,w as Te,o as se,n as Fe,P as Oe,Q as Ve,R as De,c as n,z as r,e as s,s as P,q as c,v as z,t as m,S as u,F as w,D as L,d as a,p as U,h as R}from"./vue-BhQbBSxl.js";import{c as l,C as Ue,a as F,m as Re}from"./index-CkQFOLy4.js";import{_ as ze}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-DYQJwaLu.js";const Ae=["src"],Ee=["onClick"],je=["src"],He={class:"absolute top-0 border-0 right-0 p-2 flex flex-column flex align-items-center"},qe={key:0},Ge={class:"m-3 max-w-screen"},We={class:z(["w-full","p-4"])},Qe=["src"],Xe={key:0,class:"text-center p-1"},Je={key:1,class:"text-center p-1"},Ke={class:"flex flex-column justify-center"},Ye={key:0,class:"text-center"},Ze={key:1,class:"text-center"},et={class:"flex w-full"},tt={class:"flex flex-column"},st={class:"w-full text-sm break-words px-2",style:{"white-space":"pre-wrap"}},lt=["src"],ot={key:0,class:"flex justify-content-end"},at={class:"flex flex-row"},nt={class:"underline text-blue-600 text-sm"},it={class:"pt-3 pb-3"},rt={class:"flex flex-row gap-2"},ut={class:"border-400 border-round border-1 p-3"},ct={class:"text-center font-bold"},dt={key:0,class:"w-full overflow-hidden"},mt=["src"],pt={class:"w-full overflow-hidden",style:{"aspect-ratio":"2 / 1.5"}},ft=["src"],vt={class:"font-bold"},gt={class:"flex flex-column"},_t={class:"flex flex-row justify-content-between w-full"},ht=["innerHTML"],xt=["innerHTML"],bt={key:0,class:"fixed right-0 bottom-0 p-4",style:{"z-index":"2"}},wt={class:"mt-2"},yt={class:"flex justify-content-end mt-2"},kt={__name:"Welcome",setup(Ct){const y=[{label:"pt",imagePath:"flags/pt.png"},{label:"en",imagePath:"flags/en.png"},{label:"zh",imagePath:"flags/zh.png"}],A=De(),le=Ve(),{locale:h}=te(),{t:p}=te(),_=g(null),N=g(!0),E=g(),j=g(""),oe=I(()=>l.getShopInfo("restaurantName")),d=g(void 0),O=I(()=>l.shopInfo.value.instagramUrl);function ae(){const e=F.getCookie("language");e&&(h.value=e)}let x=null;Te(()=>[l.currentPage.value,l.addr.value],([e,t])=>{var i,b,v;d.value=e,(b=(i=d.value)==null?void 0:i.data)!=null&&b.logoPath&&((v=d.value)!=null&&v.imagesPath)&&(j.value=l.pathFormated(d.value.data.logoPath.src,d.value.imagesPath))},{immediate:!0}),se(async()=>{var e;await Fe(),x=new IntersectionObserver(t=>{t.forEach(i=>{N.value=i.isIntersecting})},{threshold:.1}),(e=_.value)!=null&&e.$el&&x.observe(_.value.$el)}),se(async()=>{var e;l.params=l.getQueryParams(),l.params.table?l.params.table=Ue.SimpleDecode(l.params.table):l.params.table=void 0,ae(),l.initMenu(!0),x=new IntersectionObserver(t=>{t.forEach(i=>{i.isIntersecting?N.value=!0:N.value=!1})},{threshold:.1}),(e=_.value)!=null&&e.$el&&x.observe(_.value.$el)}),Oe(()=>{var e;x&&((e=_.value)!=null&&e.$el)&&x.unobserve(_.value.$el)});const ne=I(()=>{const e="/";switch(h.value.toLowerCase()){case"pt":return e+y[0].imagePath;case"en":return e+y[1].imagePath;case"zh":return e+y[2].imagePath;default:return e+y[1].imagePath}});function B(e){return e[`text_${h.value.toLowerCase()}`]}function H(e){const t=e[`text_${h.value.toLowerCase()}`];return t?t.replace(/\[\[(.*?)\|(.*?)\]\]/g,(i,b,v)=>`<a href="${v.startsWith("http")?v:`https://${v}`}" target="_blank" rel="noopener noreferrer" class="text-blue-500 underline cursor-pointer">${b}</a>`):""}const ie=Date.now(),q=F.getCookie("login_time");let V;q&&(V=JSON.parse(q));const re=I(()=>y.filter(e=>e.label!==h.value.toLowerCase()).map(e=>({...e,command:()=>{h.value=e.label,ue(e.label)}})));function ue(e){F.setCookie("language",e)}function S(e){typeof e=="string"&&/^(https?:\/\/)/i.test(e)?window.open(e,"_blank"):console.warn("无效的 URL:",e)}function ce(){S(O.value)}const de=e=>{E.value.toggle(e)};V&&(ie-V>60*5*1e3?F.clearAllCookies():D());function D(){const e=le.query.table;if(!l.permissionsControl.value.order||!l.settings.value.order){Re.show_warn(p("notification.orderClosed"));return}A.push({path:"/table",query:{table:e}})}function me(){l.currentTableId.value=void 0,l.params.table=void 0,A.push("/takeReserve")}const pe=I(()=>[{label:p("common.options"),items:[{label:p("common.pay"),icon:"pi pi-wallet",command:()=>{fe()}},{label:p("common.call"),icon:"pi pi-user-plus",command:()=>{l.send_cmd(l.getTable(),{cmd:"call"},e=>{e.success?MsgBox.show_info(p("notification.call_msg")):MsgBox.show_info(e.data)})}}]}]);function G(e){return d.value.data.options[e]?"font-bold":""}const M=g(!1),T=g(),k=g();function fe(){M.value=!0}function ve(){e(T.value)?l.send_cmd(l.getTable(),{cmd:"pay",nif:T.value,note:k.value},t=>{t.success?(MsgBox.show_info(p("notification.pay_msg")),M.value=!1):MsgBox.show_error(p("common.failed"))}):MsgBox.show_warn(p("notification.cancel_msg"));function e(t){return!t||t.toString().length===9||t.toString().length===0}}function ge(){k.value&&(k.value=void 0)}return(e,t)=>{var Q,X,J,K,Y,Z;const i=be,b=xe,v=we,W=Pe,_e=Le,he=ke;return a(),n(w,null,[r(b,{model:re.value,direction:"down",transitionDelay:80,class:"absolute top-0 left-0 border-0"},{button:c(({toggleCallback:o})=>[r(i,{outlined:"",onClick:o,class:"custom-clean-button"},{default:c(()=>[s("img",{src:ne.value,style:{width:"38px",height:"38px"}},null,8,Ae)]),_:2},1032,["onClick"])]),item:c(({item:o,toggleCallback:C})=>[s("div",{class:"flex flex-col items-center justify-between",onClick:C},[s("img",{src:o.imagePath,alt:"lang",style:{width:"38px",height:"38px"}},null,8,je)],8,Ee)]),_:1},8,["model"]),s("div",He,[s("div",null,[r(i,{icon:"pi pi-bell",rounded:"","aria-label":"Filter",onClick:de,"aria-haspopup":"true","aria-controls":"overlay_menu",size:"small",style:{width:"42px",height:"42px"}}),r(v,{ref_key:"menu",ref:E,id:"overlay_menu",model:pe.value,popup:!0},null,8,["model"])]),O.value&&O.value.trim()!==""?(a(),n("div",qe,[r(i,{icon:"pi pi-instagram",class:"custom-clean-button",onClick:ce})])):P("",!0)]),s("div",Ge,[s("div",We,[s("img",{src:j.value,alt:"Logo",class:"max-w-6rem h-auto w-full mx-auto block"},null,8,Qe),(X=(Q=d.value)==null?void 0:Q.data)!=null&&X.restaurantName?(a(),n("h3",Xe,m((K=(J=d.value)==null?void 0:J.data)==null?void 0:K.restaurantName),1)):(a(),n("h3",Je,m(oe.value),1)),s("div",Ke,[u(l).testEnvironment.value?(a(),n("h2",Ye,m("DEMO"))):P("",!0),u(l).testEnvironment.value?(a(),n("span",Ze,m(u(p)("home.demoDescription")),1)):P("",!0)])]),s("div",et,[r(u(ye),{class:"w-full max-w-xl mx-auto"},{default:c(()=>{var o,C;return[(a(!0),n(w,null,L((C=(o=d.value)==null?void 0:o.data)==null?void 0:C.titles,(f,ee)=>(a(),U(u(Ce),{value:ee},{default:c(()=>[r(u($e),null,{default:c(()=>[R(m(B(f.title)),1)]),_:2},1024),r(u(Ie),{class:"p-1"},{default:c(()=>[s("div",tt,[s("div",st,m(B(f.description)),1),s("img",{src:u(l).pathFormated(f.image.src,d.value.imagesPath),class:"max-w-5rem h-auto block mr-auto p-1 invert-image"},null,8,lt),f.title.text_zh.includes("怎么获得学生优惠")?(a(),n("div",ot,[r(i,{onClick:t[0]||(t[0]=$=>S("https://xiaoxiongmarket.com/activity/29ca8401-6cd5-4bac-94f8-d5511c463e26")),text:""},{default:c(()=>[s("div",at,[s("span",nt,m(u(p)("home.eventPage")),1),t[10]||(t[10]=s("i",{class:"pi pi-external-link text-blue-600 text-sm p-1"},null,-1))])]),_:1})])):P("",!0)])]),_:2},1024)]),_:2},1032,["value"]))),256))]}),_:1})]),s("div",it,[s("div",rt,[r(i,{onClick:t[1]||(t[1]=o=>D()),class:"w-full font-bold",style:{"border-radius":"20px"},ref_key:"orderButtonRef",ref:_},{default:c(()=>[R(m(e.$t("common.eatHere")),1)]),_:1},512),r(i,{onClick:t[2]||(t[2]=o=>me()),class:"w-full font-bold",style:{"border-radius":"20px"}},{default:c(()=>[R(m(e.$t("common.takeOrReserve")),1)]),_:1})])]),(a(!0),n(w,null,L((Z=(Y=d.value)==null?void 0:Y.data)==null?void 0:Z.frames,(o,C)=>(a(),n("div",null,[s("div",ut,[(a(!0),n(w,null,L(o,(f,ee)=>(a(),n("div",null,[s("h1",ct,m(B(f.title)),1),f.images.length<=1?(a(),n("div",dt,[s("img",{src:u(l).pathFormated(f.images[0].src,d.value.imagesPath),class:"w-full"},null,8,mt)])):(a(),U(u(Me),{key:1,"slides-per-view":1,loop:!0,class:"w-full",modules:[u(Be)],pagination:{clickable:!0}},{default:c(()=>[(a(!0),n(w,null,L(f.images,($,$t)=>(a(),U(u(Se),null,{default:c(()=>[s("div",pt,[s("img",{src:u(l).pathFormated($.src,d.value.imagesPath),class:"w-full h-full",style:{"object-fit":"cover"}},null,8,ft)])]),_:2},1024))),256))]),_:2},1032,["modules"])),s("h4",vt,m(B(f.subtitle)),1),(a(!0),n(w,null,L(f.descriptions,$=>(a(),n("div",null,[s("div",gt,[s("div",_t,[s("span",{class:z([G(0),"break-words text-left"]),innerHTML:H($.left),style:{"white-space":"pre-wrap"}},null,10,ht),s("span",{class:z([G(1),"break-words text-right"]),innerHTML:H($.right),style:{"white-space":"pre-wrap"}},null,10,xt)])])]))),256))]))),256))]),t[11]||(t[11]=s("div",{class:"p-4"},null,-1))]))),256))]),s("div",{class:"absoluto top-0 text-center text-xs p-2 underline cursor-pointer",onClick:t[3]||(t[3]=o=>S("https://5am3eq-wc.myshopify.com/"))}," ©2025 XIAOXIONG® v1.1.114 "),s("div",{class:"absoluto top-0 text-center text-xs p-2",onClick:t[4]||(t[4]=o=>S("https://5am3eq-wc.myshopify.com/"))},t[12]||(t[12]=[s("img",{src:Ne,style:{width:"7rem"}},null,-1)])),N.value?P("",!0):(a(),n("div",bt,[r(i,{rounded:"","aria-label":"Star",onClick:t[5]||(t[5]=o=>D()),class:"w-full font-bold p-button-lg shadow-6"},{default:c(()=>t[13]||(t[13]=[s("span",{class:"material-icons text-5xl"},"restaurant",-1)])),_:1,__:[13]})])),r(he,{visible:M.value,"onUpdate:visible":t[9]||(t[9]=o=>M.value=o),header:"结账",class:"flex flex-column",modal:!0,dismissableMask:!0,onHide:ge},{default:c(()=>[s("div",null,[t[14]||(t[14]=s("label",null,"NIF:",-1)),r(W,{modelValue:T.value,"onUpdate:modelValue":t[6]||(t[6]=o=>T.value=o),inputId:"withoutgrouping",useGrouping:!1,fluid:"",class:"w-full m-1"},null,8,["modelValue"])]),s("div",wt,[s("label",null,m(e.$t("common.note"))+":",1),r(_e,{type:"text",modelValue:k.value,"onUpdate:modelValue":t[7]||(t[7]=o=>k.value=o),class:"w-full m-1"},null,8,["modelValue"])]),s("div",yt,[r(i,{label:u(p)("common.send"),onClick:t[8]||(t[8]=o=>ve())},null,8,["label"])])]),_:1},8,["visible"])],64)}}},Tt=ze(kt,[["__scopeId","data-v-85442206"]]);export{Tt as default};
