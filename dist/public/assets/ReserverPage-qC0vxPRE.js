import{a as S}from"./index-lMWl1nWC.js";import{s as T,a as V}from"./index-BWz4_Xsp.js";import{s as B,a as $}from"./index-DbXj_eJL.js";import{s as j}from"./index-BHNkP6pe.js";import{q as z,x as O,n as w,h as b,s as q,c as f,a as s,b as o,w as i,l as t,F as E,o as _,z as G,t as l,C as U,e as A,G as H}from"./index-BARnaOF9.js";import{s as K}from"./index-BS-y5Zav.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-CEyPI6Et.js";import"./index-D8J7wxjR.js";import"./index-sOD4sJtv.js";import"./index-DDxTKFjc.js";import"./index-DwGuRPmg.js";import"./index-_8BI16aA.js";import"./index-CEYC9wpm.js";const J={class:"card h-full",style:{display:"flex","flex-direction":"column"}},Q={class:"flex flex-wrap gap-2 justify-content-between align-items-center"},W={class:"flex flex-column"},X={class:"m-0 font-bold text-2xl text-left flex-grow-1"},Y={class:"flex flex-row gap-2 align-items-center"},Z={class:"font-bold"},ee={class:"font-bold text-green-800"},te={class:"font-bold text-blue-800"},se={class:"font-bold text-red-800"},ae={key:0},le={key:1},re={class:"text-center py-5"},oe={class:"mt-3 text-gray-500"},ne={class:"flex flex-column gap-2"},ce={key:0,class:"text-red-600"},ie={class:"font-bold text-lg"},de={class:"font-bold text-lg"},ue={class:"font-bold text-lg"},me={class:"font-bold text-lg"},ve={class:"flex justify-content-end"},pe={__name:"ReserverPage",setup(ge){const{t:e}=z(),y=O(),m=w.tableReserves,a=b(),v=b(!1);function C(r){a.value=r.data,v.value=!0,console.log(a.value)}const h=b({global:{value:null,matchMode:H.CONTAINS}}),P=q(()=>{const r=a.value.status;return r=="processing"?{label:e("reserverPage.processing")+"...",outlined:!0}:r=="voided"?{label:e("orderPage.voided"),outlined:!0}:{label:e("reserverPage.cancelReserve"),outlined:!1}});function N(){a.value.status=="processing"||a.value.status=="voided"||y.require({message:e("reserverPage.reserveCancellationMSG"),header:e("reserverPage.cancelReserve")+":"+a.value.name,rejectProps:{label:e("common.cancel"),severity:"secondary",outlined:!0},acceptProps:{label:e("common.confirm"),severity:"danger"},accept:()=>{w.cancelReserve({...a.value,status:"processing"},r=>{r.success?(a.value.status=r.data.status,v.value=!1):console.log("Cancellation Error:",r.data)})},reject:()=>{}})}function p(r){const n=m.value.filter(u=>u.financial_status==="voided"||u.status==="voided").length,g=m.value.filter(u=>u.status==="new"||u.status==="confirmed").length;switch(r){case"completed":return m.value.length-n-g;case"voided":return n;case"unCompleted":return g;default:return m.value.length}}const R=r=>({completed:"status-completed",confirmed:"status-confirmed",processing:"status-processing",new:"status-new",voided:"status-voided"})[r]||"",D=r=>({completed:e("orderPage.completed"),confirmed:e("orderPage.confirmed"),processing:e("reserverPage.processing"),new:e("orderPage.new"),voided:e("orderPage.voided")})[r]||r,k=r=>new Date(r).toLocaleString(void 0,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1});return(r,n)=>{var x;const g=$,u=j,I=B,d=V,M=T,F=S;return _(),f(E,null,[s("div",J,[o(M,{value:t(m),tableStyle:"min-width: 50rem",dataKey:"id",paginator:"",rows:10,rowsPerPageOptions:[10,20,50],stripedRows:"",scrollable:"",scrollHeight:"flex",filters:h.value,selectionMode:"single",onRowClick:C},{header:i(()=>[s("div",Q,[s("div",W,[s("h4",X,l(t(e)("reserverPage.header")),1),s("div",Y,[s("small",Z,l(t(e)("reserverPage.reserveNumber.total"))+":"+l(p("all")),1),s("small",ee,l(t(e)("reserverPage.reserveNumber.success"))+":"+l(p("completed")),1),s("small",te,l(t(e)("reserverPage.reserveNumber.unfinished"))+":"+l(p("unCompleted")),1),s("small",se,l(t(e)("reserverPage.reserveNumber.canceled"))+":"+l(p("voided")),1)])]),o(I,null,{default:i(()=>[o(g,null,{default:i(()=>n[2]||(n[2]=[s("i",{class:"pi pi-search"},null,-1)])),_:1,__:[2]}),o(u,{modelValue:h.value.global.value,"onUpdate:modelValue":n[0]||(n[0]=c=>h.value.global.value=c),placeholder:t(e)("orderPage.find")},null,8,["modelValue","placeholder"])]),_:1})])]),empty:i(()=>[s("div",re,[n[3]||(n[3]=s("i",{class:"pi pi-search",style:{"font-size":"3rem",color:"#ccc"}},null,-1)),s("p",oe,l(t(e)("orderPage.notFound")),1)])]),default:i(()=>[o(d,{header:t(e)("orderPage.status")},{body:i(({data:c})=>[s("span",{class:G(["status-badge",R(c.status||"new")])},l(D(c.status||"new")),3)]),_:1},8,["header"]),o(d,{field:"name",header:"ID",sortable:""}),o(d,{field:"date",header:t(e)("reserverPage.dateTime"),sortable:""},{body:i(({data:c})=>[U(l(c.date+" "+c.time),1)]),_:1},8,["header"]),o(d,{field:"discount",header:t(e)("reserverPage.discount")},{body:i(({data:c})=>[c.discount?(_(),f("label",ae,l(c.discount)+"%",1)):(_(),f("label",le))]),_:1},8,["header"]),o(d,{field:"customerName",header:t(e)("reserverPage.customerName")},null,8,["header"]),o(d,{field:"numberPeople",header:t(e)("reserverPage.numberPeople")},null,8,["header"]),o(d,{field:"phone",header:t(e)("reserverPage.phone")},null,8,["header"]),o(d,{field:"note",header:t(e)("reserverPage.note")},null,8,["header"])]),_:1},8,["value","filters"])]),o(t(K),{visible:v.value,"onUpdate:visible":n[1]||(n[1]=c=>v.value=c),header:t(e)("reserverPage.reserveDetails")+" (ID: "+((x=a.value)==null?void 0:x.name)+")",modal:"",style:{width:"450px"}},{default:i(()=>[s("div",ne,[a.value.financial_status||a.value.status==="voided"?(_(),f("label",ce,l(a.value.financial_status?t(e)("reserverPage.cancelForClient"):t(e)("reserverPage.cancelForRestaurant")),1)):A("",!0),s("label",ie,l(t(e)("reserverPage.dateTime")+": "+a.value.date+" "+a.value.time),1),s("label",de,l(t(e)("reserverPage.discount")+": "+(a.value.discount?a.value.discount+"%":"")),1),s("label",ue,l(t(e)("reserverPage.customerName")+": "+a.value.customerName),1),s("label",me,l(t(e)("reserverPage.numberPeople")+": "+a.value.numberPeople),1),s("label",null,l(t(e)("reserverPage.phone")+": "+a.value.phone),1),s("label",null,l(t(e)("reserverPage.email")+": "+a.value.email),1),s("label",null,l(t(e)("reserverPage.creationDate")+": "+(a.value.creationDate?k(a.value.creationDate):"")),1),s("label",null,l(t(e)("reserverPage.note")+": "+a.value.note),1),s("div",ve,[o(F,{label:P.value.label,outlined:P.value.outlined,onClick:N},null,8,["label","outlined"])])])]),_:1},8,["visible","header"])],64)}}},Me=L(pe,[["__scopeId","data-v-d39b8c3c"]]);export{Me as default};
