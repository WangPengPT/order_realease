import{g as _t}from"./_commonjsHelpers-CqkleIqs.js";import{v as ze,B as be,x as $e,y as Ee,f as g,q as c,l as Y,i as E,z as fe,A as J,D as _e,h as a,t as h,n as le,u as de,r as j,g as A,F as Z,p as se,k as i,j as V,E as Le,a as L,s as he,m as ne,e as ot,G as wt,H as kt,c as ue,I as we,J as xt,R as it,K as je,L as $t,M as Ve,N as Tt,O as Ne,P as Ct,Q as Ze,S as qe,T as It,U as Dt,V as Be,o as lt,w as St,b as At,W as Nt,d as Bt}from"./index-CkiBf1nw.js";import{s as me,a as rt}from"./index-BqarY8LI.js";import{s as W,a as ct}from"./index-BEjGcdeJ.js";import{D as oe,c as re,s as Xe}from"./index-rZe0QKSB.js";import{_ as Te,b as He,c as Ke,a as Ue,s as We}from"./_plugin-vue_export-helper-C8qhpqBM.js";import{s as Pt}from"./index-BEt5s15o.js";import{s as Ye,a as Lt}from"./index-Catb3-2b.js";import{c as ce}from"./cookie-CTJN0GZu.js";import{s as qt}from"./index-CTRk0DHj.js";import{s as et}from"./index-DluHk25u.js";import{s as zt}from"./index-BuIKtP89.js";var Fe={exports:{}},tt;function Et(){return tt||(tt=1,function(e){var t=function(){var s=String.fromCharCode,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",p={};function T(l,_){if(!p[l]){p[l]={};for(var I=0;I<l.length;I++)p[l][l.charAt(I)]=I}return p[l][_]}var O={compressToBase64:function(l){if(l==null)return"";var _=O._compress(l,6,function(I){return u.charAt(I)});switch(_.length%4){default:case 0:return _;case 1:return _+"===";case 2:return _+"==";case 3:return _+"="}},decompressFromBase64:function(l){return l==null?"":l==""?null:O._decompress(l.length,32,function(_){return T(u,l.charAt(_))})},compressToUTF16:function(l){return l==null?"":O._compress(l,15,function(_){return s(_+32)})+" "},decompressFromUTF16:function(l){return l==null?"":l==""?null:O._decompress(l.length,16384,function(_){return l.charCodeAt(_)-32})},compressToUint8Array:function(l){for(var _=O.compress(l),I=new Uint8Array(_.length*2),y=0,b=_.length;y<b;y++){var C=_.charCodeAt(y);I[y*2]=C>>>8,I[y*2+1]=C%256}return I},decompressFromUint8Array:function(l){if(l==null)return O.decompress(l);for(var _=new Array(l.length/2),I=0,y=_.length;I<y;I++)_[I]=l[I*2]*256+l[I*2+1];var b=[];return _.forEach(function(C){b.push(s(C))}),O.decompress(b.join(""))},compressToEncodedURIComponent:function(l){return l==null?"":O._compress(l,6,function(_){return w.charAt(_)})},decompressFromEncodedURIComponent:function(l){return l==null?"":l==""?null:(l=l.replace(/ /g,"+"),O._decompress(l.length,32,function(_){return T(w,l.charAt(_))}))},compress:function(l){return O._compress(l,16,function(_){return s(_)})},_compress:function(l,_,I){if(l==null)return"";var y,b,C={},K={},R="",G="",M="",q=2,S=3,N=2,f=[],o=0,n=0,k;for(k=0;k<l.length;k+=1)if(R=l.charAt(k),Object.prototype.hasOwnProperty.call(C,R)||(C[R]=S++,K[R]=!0),G=M+R,Object.prototype.hasOwnProperty.call(C,G))M=G;else{if(Object.prototype.hasOwnProperty.call(K,M)){if(M.charCodeAt(0)<256){for(y=0;y<N;y++)o=o<<1,n==_-1?(n=0,f.push(I(o)),o=0):n++;for(b=M.charCodeAt(0),y=0;y<8;y++)o=o<<1|b&1,n==_-1?(n=0,f.push(I(o)),o=0):n++,b=b>>1}else{for(b=1,y=0;y<N;y++)o=o<<1|b,n==_-1?(n=0,f.push(I(o)),o=0):n++,b=0;for(b=M.charCodeAt(0),y=0;y<16;y++)o=o<<1|b&1,n==_-1?(n=0,f.push(I(o)),o=0):n++,b=b>>1}q--,q==0&&(q=Math.pow(2,N),N++),delete K[M]}else for(b=C[M],y=0;y<N;y++)o=o<<1|b&1,n==_-1?(n=0,f.push(I(o)),o=0):n++,b=b>>1;q--,q==0&&(q=Math.pow(2,N),N++),C[G]=S++,M=String(R)}if(M!==""){if(Object.prototype.hasOwnProperty.call(K,M)){if(M.charCodeAt(0)<256){for(y=0;y<N;y++)o=o<<1,n==_-1?(n=0,f.push(I(o)),o=0):n++;for(b=M.charCodeAt(0),y=0;y<8;y++)o=o<<1|b&1,n==_-1?(n=0,f.push(I(o)),o=0):n++,b=b>>1}else{for(b=1,y=0;y<N;y++)o=o<<1|b,n==_-1?(n=0,f.push(I(o)),o=0):n++,b=0;for(b=M.charCodeAt(0),y=0;y<16;y++)o=o<<1|b&1,n==_-1?(n=0,f.push(I(o)),o=0):n++,b=b>>1}q--,q==0&&(q=Math.pow(2,N),N++),delete K[M]}else for(b=C[M],y=0;y<N;y++)o=o<<1|b&1,n==_-1?(n=0,f.push(I(o)),o=0):n++,b=b>>1;q--,q==0&&(q=Math.pow(2,N),N++)}for(b=2,y=0;y<N;y++)o=o<<1|b&1,n==_-1?(n=0,f.push(I(o)),o=0):n++,b=b>>1;for(;;)if(o=o<<1,n==_-1){f.push(I(o));break}else n++;return f.join("")},decompress:function(l){return l==null?"":l==""?null:O._decompress(l.length,32768,function(_){return l.charCodeAt(_)})},_decompress:function(l,_,I){var y=[],b=4,C=4,K=3,R="",G=[],M,q,S,N,f,o,n,k={val:I(0),position:_,index:1};for(M=0;M<3;M+=1)y[M]=M;for(S=0,f=Math.pow(2,2),o=1;o!=f;)N=k.val&k.position,k.position>>=1,k.position==0&&(k.position=_,k.val=I(k.index++)),S|=(N>0?1:0)*o,o<<=1;switch(S){case 0:for(S=0,f=Math.pow(2,8),o=1;o!=f;)N=k.val&k.position,k.position>>=1,k.position==0&&(k.position=_,k.val=I(k.index++)),S|=(N>0?1:0)*o,o<<=1;n=s(S);break;case 1:for(S=0,f=Math.pow(2,16),o=1;o!=f;)N=k.val&k.position,k.position>>=1,k.position==0&&(k.position=_,k.val=I(k.index++)),S|=(N>0?1:0)*o,o<<=1;n=s(S);break;case 2:return""}for(y[3]=n,q=n,G.push(n);;){if(k.index>l)return"";for(S=0,f=Math.pow(2,K),o=1;o!=f;)N=k.val&k.position,k.position>>=1,k.position==0&&(k.position=_,k.val=I(k.index++)),S|=(N>0?1:0)*o,o<<=1;switch(n=S){case 0:for(S=0,f=Math.pow(2,8),o=1;o!=f;)N=k.val&k.position,k.position>>=1,k.position==0&&(k.position=_,k.val=I(k.index++)),S|=(N>0?1:0)*o,o<<=1;y[C++]=s(S),n=C-1,b--;break;case 1:for(S=0,f=Math.pow(2,16),o=1;o!=f;)N=k.val&k.position,k.position>>=1,k.position==0&&(k.position=_,k.val=I(k.index++)),S|=(N>0?1:0)*o,o<<=1;y[C++]=s(S),n=C-1,b--;break;case 2:return G.join("")}if(b==0&&(b=Math.pow(2,K),K++),y[n])R=y[n];else if(n===C)R=q+q.charAt(0);else return null;G.push(R),y[C++]=q+R.charAt(0),b--,q=R,b==0&&(b=Math.pow(2,K),K++)}}};return O}();e!=null?e.exports=t:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return t})}(Fe)),Fe.exports}var Ot=Et();const at=_t(Ot);var Rt=ze`
    .p-tag {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        background: dt('tag.primary.background');
        color: dt('tag.primary.color');
        font-size: dt('tag.font.size');
        font-weight: dt('tag.font.weight');
        padding: dt('tag.padding');
        border-radius: dt('tag.border.radius');
        gap: dt('tag.gap');
    }

    .p-tag-icon {
        font-size: dt('tag.icon.size');
        width: dt('tag.icon.size');
        height: dt('tag.icon.size');
    }

    .p-tag-rounded {
        border-radius: dt('tag.rounded.border.radius');
    }

    .p-tag-success {
        background: dt('tag.success.background');
        color: dt('tag.success.color');
    }

    .p-tag-info {
        background: dt('tag.info.background');
        color: dt('tag.info.color');
    }

    .p-tag-warn {
        background: dt('tag.warn.background');
        color: dt('tag.warn.color');
    }

    .p-tag-danger {
        background: dt('tag.danger.background');
        color: dt('tag.danger.color');
    }

    .p-tag-secondary {
        background: dt('tag.secondary.background');
        color: dt('tag.secondary.color');
    }

    .p-tag-contrast {
        background: dt('tag.contrast.background');
        color: dt('tag.contrast.color');
    }
`,Mt={root:function(t){var s=t.props;return["p-tag p-component",{"p-tag-info":s.severity==="info","p-tag-success":s.severity==="success","p-tag-warn":s.severity==="warn","p-tag-danger":s.severity==="danger","p-tag-secondary":s.severity==="secondary","p-tag-contrast":s.severity==="contrast","p-tag-rounded":s.rounded}]},icon:"p-tag-icon",label:"p-tag-label"},jt=be.extend({name:"tag",style:Rt,classes:Mt}),Ft={name:"BaseTag",extends:$e,props:{value:null,severity:null,rounded:Boolean,icon:String},style:jt,provide:function(){return{$pcTag:this,$parentInstance:this}}};function ke(e){"@babel/helpers - typeof";return ke=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ke(e)}function Vt(e,t,s){return(t=Ht(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Ht(e){var t=Kt(e,"string");return ke(t)=="symbol"?t:t+""}function Kt(e,t){if(ke(e)!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var u=s.call(e,t);if(ke(u)!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ye={name:"Tag",extends:Ft,inheritAttrs:!1,computed:{dataP:function(){return Ee(Vt({rounded:this.rounded},this.severity,this.severity))}}},Ut=["data-p"];function Wt(e,t,s,u,w,p){return c(),g("span",J({class:e.cx("root"),"data-p":p.dataP},e.ptmi("root")),[e.$slots.icon?(c(),Y(_e(e.$slots.icon),J({key:0,class:e.cx("icon")},e.ptm("icon")),null,16,["class"])):e.icon?(c(),g("span",J({key:1,class:[e.cx("icon"),e.icon]},e.ptm("icon")),null,16)):E("",!0),e.value!=null||e.$slots.default?fe(e.$slots,"default",{key:2},function(){return[a("span",J({class:e.cx("label")},e.ptm("label")),h(e.value),17)]}):E("",!0)],16,Ut)}ye.render=Wt;var Qt=ze`
    .p-avatar {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: dt('avatar.width');
        height: dt('avatar.height');
        font-size: dt('avatar.font.size');
        background: dt('avatar.background');
        color: dt('avatar.color');
        border-radius: dt('avatar.border.radius');
    }

    .p-avatar-image {
        background: transparent;
    }

    .p-avatar-circle {
        border-radius: 50%;
    }

    .p-avatar-circle img {
        border-radius: 50%;
    }

    .p-avatar-icon {
        font-size: dt('avatar.icon.size');
        width: dt('avatar.icon.size');
        height: dt('avatar.icon.size');
    }

    .p-avatar img {
        width: 100%;
        height: 100%;
    }

    .p-avatar-lg {
        width: dt('avatar.lg.width');
        height: dt('avatar.lg.width');
        font-size: dt('avatar.lg.font.size');
    }

    .p-avatar-lg .p-avatar-icon {
        font-size: dt('avatar.lg.icon.size');
        width: dt('avatar.lg.icon.size');
        height: dt('avatar.lg.icon.size');
    }

    .p-avatar-xl {
        width: dt('avatar.xl.width');
        height: dt('avatar.xl.width');
        font-size: dt('avatar.xl.font.size');
    }

    .p-avatar-xl .p-avatar-icon {
        font-size: dt('avatar.xl.icon.size');
        width: dt('avatar.xl.icon.size');
        height: dt('avatar.xl.icon.size');
    }

    .p-avatar-group {
        display: flex;
        align-items: center;
    }

    .p-avatar-group .p-avatar + .p-avatar {
        margin-inline-start: dt('avatar.group.offset');
    }

    .p-avatar-group .p-avatar {
        border: 2px solid dt('avatar.group.border.color');
    }

    .p-avatar-group .p-avatar-lg + .p-avatar-lg {
        margin-inline-start: dt('avatar.lg.group.offset');
    }

    .p-avatar-group .p-avatar-xl + .p-avatar-xl {
        margin-inline-start: dt('avatar.xl.group.offset');
    }
`,Jt={root:function(t){var s=t.props;return["p-avatar p-component",{"p-avatar-image":s.image!=null,"p-avatar-circle":s.shape==="circle","p-avatar-lg":s.size==="large","p-avatar-xl":s.size==="xlarge"}]},label:"p-avatar-label",icon:"p-avatar-icon"},Gt=be.extend({name:"avatar",style:Qt,classes:Jt}),Zt={name:"BaseAvatar",extends:$e,props:{label:{type:String,default:null},icon:{type:String,default:null},image:{type:String,default:null},size:{type:String,default:"normal"},shape:{type:String,default:"square"},ariaLabelledby:{type:String,default:null},ariaLabel:{type:String,default:null}},style:Gt,provide:function(){return{$pcAvatar:this,$parentInstance:this}}};function xe(e){"@babel/helpers - typeof";return xe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xe(e)}function st(e,t,s){return(t=Xt(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Xt(e){var t=Yt(e,"string");return xe(t)=="symbol"?t:t+""}function Yt(e,t){if(xe(e)!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var u=s.call(e,t);if(xe(u)!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Qe={name:"Avatar",extends:Zt,inheritAttrs:!1,emits:["error"],methods:{onError:function(t){this.$emit("error",t)}},computed:{dataP:function(){return Ee(st(st({},this.shape,this.shape),this.size,this.size))}}},ea=["aria-labelledby","aria-label","data-p"],ta=["data-p"],aa=["data-p"],sa=["src","alt","data-p"];function na(e,t,s,u,w,p){return c(),g("div",J({class:e.cx("root"),"aria-labelledby":e.ariaLabelledby,"aria-label":e.ariaLabel},e.ptmi("root"),{"data-p":p.dataP}),[fe(e.$slots,"default",{},function(){return[e.label?(c(),g("span",J({key:0,class:e.cx("label")},e.ptm("label"),{"data-p":p.dataP}),h(e.label),17,ta)):e.$slots.icon?(c(),Y(_e(e.$slots.icon),{key:1,class:le(e.cx("icon"))},null,8,["class"])):e.icon?(c(),g("span",J({key:2,class:[e.cx("icon"),e.icon]},e.ptm("icon"),{"data-p":p.dataP}),null,16,aa)):e.image?(c(),g("img",J({key:3,src:e.image,alt:e.ariaLabel,onError:t[0]||(t[0]=function(){return p.onError&&p.onError.apply(p,arguments)})},e.ptm("image"),{"data-p":p.dataP}),null,16,sa)):E("",!0)]})],16,ea)}Qe.render=na;const oa={class:"grid"},ia={class:"flex flex-column"},la=["onClick"],ra={class:"p-1 flex-shrink-0 w-7rem h-7rem flex align-items-center justify-content-center overflow-hidden"},ca=["src","alt"],ua={class:"flex flex-column justify-content-center"},da={class:"font-bold"},fa={class:"flex flex-wrap gap-2"},pa={class:"flex gap-1 align-items-center"},va={class:"text-color-secondary line2"},ha={key:0,class:"text-xl font-bold text-primary"},ma={key:1,class:"flex align-items-center gap-1"},ba={class:"text-l font-bold text-color-secondary"},ga={class:"text-sm line-through text-500"},ya={key:2,class:"flex gap-2 mr-2",id:"card-quantity"},_a={class:"w-2rem text-xl text-center"},wa={key:3,class:"flex gap-2 mr-2"},ka={key:0,class:"m-2 mt-0"},xa={class:"flex flex-row justify-content-between align-content-center"},$a={class:"flex flex-column"},Ta={class:"text-l font-bold"},Ca={key:0,class:"text-l font-bold text-color-secondary"},Ia={key:1,class:"flex align-items-center gap-1"},Da={class:"text-l font-bold text-color-secondary"},Sa={class:"text-sm line-through text-500"},Aa={key:0,class:"flex ml-2 mr-2"},Na={class:"w-2rem text-xl text-center"},Ba={key:1,class:"flex gap-2 mr-3 pt-2 pb-2"},Pa={class:"max-w-5rem flex align-items-center"},La={class:"font-bold whitespace-nowrap"},qa={class:"mb-2 flex justify-content-center"},za={class:"font-bold text-center"},Ea={class:"mb-2"},Oa={class:"text-color-secondary m-0 line-height-3 line2 text-center"},Ra={class:"mb-2"},Ma={class:"flex justify-content-center"},ja=["src","alt"],Fa={class:"flex align-items-center gap-2"},Va=["src","alt"],Ha={class:"flex align-items-center gap-3 ml-auto"},Ka={__name:"DishList",props:{rateDish:{type:Function,required:!0},likedItemsRef:Array,dislikedItemsRef:Array},setup(e){const{t}=de(),s=oe.dishes;let u={rated:!1,id:null,like:0,rate:0};function w(){var n;const f=L.currentPage.value,o=(n=f==null?void 0:f.data)==null?void 0:n.logoPath;return o?L.pathFormated(o,f.imagesPath):"/images/logo_logo.png"}const p=f=>oe.dishDatas.value[f]?oe.dishDatas.value[f].quantity:0,T=f=>{if(!l())return!1;const o=f.quantity;let n=3;if(f.price>0&&(n=9),f.limit){const k=f.id,ee=l(),d=(ee.peopleType.adults+ee.peopleType.children)*f.limit,D=ee.order.find(H=>H.dishid==k);let z=0;if(f.subitem)for(const H of f.subitem){z+=p(H);const m=ee.order.find(x=>x.dishid==O(H));m&&(z+=m.quantity)}else z+=f.quantity,D&&(z+=D.quantity);return o>=n||d&&z>=d}return o>=n},O=f=>oe.dishDatas.value[f]?oe.dishDatas.value[f].id:0,l=()=>L.getTableValue(),_=f=>{let o="absolute origin-top-left mt-1 ml-1 border-round-lg pl-1 pr-1 text-xs text-white font-bold ";switch(f){case"new":o+="bg-red-600";break;case"recommended":case"special":o+="bg-orange-600";break;default:o+="bg-blue-600"}return o};function I(){C.rateDish(u.id,u.like,u.rate,u.rated),u.id=null,u.like=0,u.rate=0,u.rated=!1}const y=f=>{const o=C.likedItemsRef.indexOf(f);if(u.id=f.id,o!==-1)C.likedItemsRef.splice(o,1),u.like+=-1,u.rate+=-1,u.rated=!1;else{u.rated=!0,C.likedItemsRef.push(f);const n=C.dislikedItemsRef.indexOf(f);n!==-1?(C.dislikedItemsRef.splice(n,1),u.like+=1):(u.like+=1,u.rate+=1)}},b=f=>{const o=C.dislikedItemsRef.indexOf(f);if(u.id=f.id,o!==-1)C.dislikedItemsRef.splice(o,1),u.rate+=-1,u.rated=!1;else{u.rated=!0,C.dislikedItemsRef.push(f);const n=C.likedItemsRef.indexOf(f);n!==-1?(C.likedItemsRef.splice(n,1),u.like+=-1):u.rate+=1}},C=e,K=j(!1),R=j({}),G=f=>{K.value=!0,R.value=f},M=f=>{f.target.src="/images/default.png"};function q(f){N(f.target,300)}function S(f){N(f.target,110)}function N(f,o){const n=f.naturalWidth,k=f.naturalHeight,ee=Math.min(n,o),d=ee/n,D=k*d;f.style.width=`${ee}px`,f.style.height=`${D}px`}return(f,o)=>(c(),g(Z,null,[a("div",oa,[(c(!0),g(Z,null,se(i(s),(n,k)=>{var ee;return c(),g("div",{key:k,class:"col-12 sm:col-12 md:col-6 lg:col-4 border-round surface-section shadow-1 p-2"},[a("div",ia,[a("div",{class:le(["flex flex-row",n.subItems.length!==0?"flex-grow-1":""]),onClick:d=>G(n.dish)},[((ee=n.dish.etiquette)==null?void 0:ee.length)>0?(c(),g("div",{key:0,class:le(_(n.dish.etiquette))},h(i(t)("common.etiquette."+n.dish.etiquette)),3)):E("",!0),a("div",ra,[a("img",{src:n.dish.image||"/images/default.png",alt:n.dish.name,class:"w-full h-full",style:{"object-fit":"cover"},onError:M,onLoad:S},null,40,ca)]),a("div",ua,[a("div",da,h(n.dish.name),1),a("div",null,[a("div",fa,[a("div",pa,[(c(),g(Z,null,se(5,d=>a("i",{key:d,class:le(["pi invert-star",d<=Math.floor(n.dish.likes/n.dish.rates*5)?"pi-star-fill":d-.5<=n.dish.likes/n.dish.rates*5?"pi-star-half-fill":"pi-star"]),style:{color:"black"}},null,2)),64)),a("p",null,"("+h(n.dish.rates?n.dish.rates:0)+")",1)])])]),a("div",null,[a("p",va,h(n.dish.note),1)])])],10,la),n.subItems.length==0?(c(),g("div",{key:0,class:le(["flex ml-2 mr-2 mb-2",Number(n.dish.price)>0?"justify-content-between":"justify-content-end"])},[!n.dish.discount&&Number(n.dish.price)>0?(c(),g("span",ha,"€"+h(n.dish.price),1)):E("",!0),n.dish.discount?(c(),g("div",ma,[a("span",ba,"€"+h(n.dish.dis_price),1),a("span",ga,"€"+h(n.dish.price),1),A(i(ye),{severity:"danger",value:"-"+n.dish.discount+"%"},null,8,["value"])])):E("",!0),n.dish.soldout?E("",!0):(c(),g("div",ya,[A(i(W),{icon:"pi pi-minus",rounded:"",disabled:n.dish.quantity<=0,onClick:d=>n.dish.quantity--,class:"w-2rem h-2rem"},null,8,["disabled","onClick"]),a("span",_a,h(n.dish.quantity),1),A(i(W),{icon:"pi pi-plus",rounded:"",disabled:T(n.dish),onClick:d=>n.dish.quantity++,class:"w-2rem h-2rem"},null,8,["disabled","onClick"])])),n.dish.soldout?(c(),g("div",wa,[A(i(ye),{severity:"danger",value:f.$t("common.soldout")},null,8,["value"])])):E("",!0)],2)):E("",!0),n.subItems.length!==0?(c(!0),g(Z,{key:1},se(n.subItems,(d,D)=>(c(),g(Z,{key:"index"},[d.disable?E("",!0):(c(),g("div",ka,[a("div",xa,[a("div",$a,[a("span",Ta,h(d.subname),1),!d.discount&&d.price!=="0.00"&&d.price!=="0"?(c(),g("span",Ca,"€"+h(d.price),1)):E("",!0),d.discount?(c(),g("div",Ia,[a("span",Da,"€"+h(d.dis_price),1),a("span",Sa,"€"+h(d.price),1),A(i(ye),{severity:"danger",value:"-"+d.discount+"%"},null,8,["value"])])):E("",!0)]),d.soldout?E("",!0):(c(),g("div",Aa,[A(i(W),{icon:"pi pi-minus",rounded:"",disabled:d.quantity<=0,onClick:z=>d.quantity--,class:"w-2rem h-2rem"},null,8,["disabled","onClick"]),a("span",Na,h(d.quantity),1),A(i(W),{icon:"pi pi-plus",rounded:"",onClick:z=>d.quantity++,class:"w-2rem h-2rem",disabled:T(d)},null,8,["onClick","disabled"])])),d.soldout?(c(),g("div",Ba,[A(i(ye),{severity:"danger",value:f.$t("common.soldout")},null,8,["value"])])):E("",!0)])]))],64))),128)):E("",!0)])])}),128))]),A(i(me),{visible:K.value,"onUpdate:visible":o[2]||(o[2]=n=>K.value=n),modal:"",header:"dish",style:Le([{width:"23rem"},{width:"80vw","max-width":"700px"}]),onHide:o[3]||(o[3]=n=>I())},{header:V(()=>[a("div",Pa,[A(i(Qe),{image:w(),class:"w-full"},null,8,["image"])]),a("span",La,h(f.$t("common.details")),1)]),default:V(()=>[a("div",qa,[a("span",za,h(R.value.name),1)]),a("div",Ea,[a("span",Oa,h(R.value.note),1)]),a("div",Ra,[a("div",Ma,[a("img",{class:"w-full h-auto object-contain",src:R.value.image,alt:R.value.name,onError:M,onLoad:q},null,40,ja)])]),a("div",Fa,[(c(!0),g(Z,null,se(R.value.allergies,(n,k)=>(c(),g("img",{src:"images/"+n+".png",alt:n,class:"w-2rem h-2rem border-round flex-shrink-0",style:{"object-fit":"cover","min-width":"2rem"}},null,8,Va))),256)),a("div",Ha,[a("button",{onClick:o[0]||(o[0]=n=>y(R.value)),class:"p-0 border-none bg-transparent cursor-pointer"},[a("i",{class:le(["pi pi-thumbs-up text-xl",C.likedItemsRef.includes(R.value)?"text-green-500":"text-gray-400"])},null,2)]),a("button",{onClick:o[1]||(o[1]=n=>b(R.value)),class:"p-0 border-none bg-transparent cursor-pointer"},[a("i",{class:le(["pi pi-thumbs-down text-xl",C.dislikedItemsRef.includes(R.value)?"text-red-500":"text-gray-400"])},null,2)])])])]),_:1},8,["visible"])],64))}},Ua=Te(Ka,[["__scopeId","data-v-77a0e338"]]),Wa={key:0,class:"text-3xl font-bold"},Qa={class:"flex flex-column gap-3 p-1"},Ja={key:0,class:"flex flex-column gap-1"},Ga={key:0,class:"m-0"},Za={key:0,class:"m-0"},Xa={class:"flex justify-content-between gap-4 mt-1"},Ya={class:"flex align-items-center gap-2"},es=["src","alt"],ts={class:"flex-grow-1 min-width-0 max-w-18rem"},as={class:"flex flex-column gap-1"},ss={class:"flex align-items-center gap-2"},ns={class:"text-xl font-bold line1 whitespace-nowrap overflow-hidden text-overflow-ellipsis",style:{"max-width":"20rem"}},os={class:"flex align-items-end gap-1"},is={key:0,class:"text-xl font-bold text-primary"},ls={key:1,class:"text-xl font-bold text-primary"},rs={key:2,class:"text-sm text-color-secondary"},cs={key:0,class:"text-xs text-primary"},us={class:"flex-shrink-0 flex flex-wrap justify-content-between align-items-center gap-1"},ds={class:"flex flex-wrap justify-content-between align-content-center"},fs={class:"flex align-items-center gap-1"},ps={class:"w-2rem text-center"},vs={key:1,class:"flex flex-column gap-2 mt-2"},hs={for:"in_label"},ms={for:"in_label"},bs={class:"bottom-0 left-0 mt-2"},gs={class:"text-2xl font-bold"},ys={class:"text-2xl font-bold text-primary pl-2"},_s={class:"flex justify-content-between"},ws={__name:"Cart",props:{checkout:{type:Function,required:!0},isTakeaway:Boolean},setup(e,{expose:t}){const{locale:s}=de(),u=ot(),{t:w}=de(),p=re.cartDishs;L.freeCounts;const T=j([]),O=j(),l=j(),_=j(!1),I=j(!1),y=j(!0),b=j(""),C=j("");function K(m,x,$){let te="";const ae=s.value,ie=L.customDishAPI.getCustomDishByName(m);for(const Oe of $){const pe=ie.types[x].dishes.find(Ce=>Ce.dishid===Oe.id)[`name_${ae}`];te=te+pe+"/"}return te}function R(m,x){const $=s.value;return L.customDishAPI.getCustomDishByName(m).types[x][`typeName_${$}`]}const G=(m,x)=>{const $=T.value[m].quantity+x;$>=0&&(T.value[m].quantity=$)};function M(m){m&&O.value&&(O.value.dishNote=l.value?l.value:void 0),I.value=!1}function q(){l.value&&(l.value=void 0),O.value&&(O.value=void 0)}function S(m){O.value=m,l.value=O.value.dishNote?O.value.dishNote:void 0,I.value=!0}const N=e;t({showDishList:m=>{_.value=!0,T.value.length=0;for(let x=0;x<m.length;x++)T.value.push(m[x]);y.value=T.value.length==0&&p.length==0}});function o(m){re.removeItem(m)}function n(){N.isTakeaway?k():ee()}function k(){const m=[];p.value.forEach(x=>{m.push(x)}),T.value.forEach(x=>{x.quantity>0&&m.push(x)}),m.length<=0?ne.show_warn(w("notification.select_at_least_one")):(_.value=!1,u.push({path:"/paymentPage"}))}function ee(){N.checkout({name:b.value,note:C.value},m=>{m.success&&(p.value.forEach(x=>{x.dishNote=void 0}),T.value.forEach(x=>{x.dishNote=void 0}),C.value="",oe.cleanDishDataQty(),ce.deleteCookie("cartDish_normal"),re.cleanAll(),ce.deleteCookie("cartDish_custom"))})&&(_.value=!1)}function d(m){return m.subname!=""&&m.subname!="Default Title"?m.name+" "+m.subname:m.name}function D(){let m=0;return p.value.forEach(x=>{m+=x.discount?x.dis_price*x.count:x.price*x.count}),T.value.forEach(x=>{m+=x.discount?x.dis_price*x.quantity:x.price*x.quantity}),"€"+m.toFixed(2)}const z=m=>{m.target.src="/images/default.png"},H=m=>{const x=m.quantity;let $=3;return m.price>0&&($=9),x>=$};return(m,x)=>(c(),g(Z,null,[A(i(me),{class:"bg-primary-reverse text-sm md:text-lg lg:text-xl",visible:_.value,"onUpdate:visible":x[2]||(x[2]=$=>_.value=$),modal:"",header:m.$t("common.cart"),style:Le([{backgroundColor:"rgba(250, 250, 250, 1)",height:"100%",minWidth:"24rem"},{width:"80vw","max-width":"700px"}]),dismissableMask:!0},{footer:V(()=>[a("div",bs,[a("span",gs,h(m.$t("common.total"))+": ",1),a("span",ys,h(D()),1),A(i(W),{icon:e.isTakeaway?"pi pi-wallet":"pi pi-plus",class:"p-button-success p-button-rounded ml-3",onClick:n,label:e.isTakeaway?i(w)("common.pay"):i(w)("common.send")},null,8,["icon","label"])])]),default:V(()=>[y.value?(c(),g("h2",Wa,"Cart is empty.")):E("",!0),a("div",Qa,[(c(!0),g(Z,null,se(i(p),($,te)=>(c(),Y(i(Pt),{style:{overflow:"hidden"},key:te},{title:V(()=>[he(h(m.$t(`common.${$.name.replace(/[^a-zA-Z0-9\s]/g,"").toLowerCase().replace(/\s+/g,"")}`)),1)]),subtitle:V(()=>[he(h(m.$t("common.price"))+" : "+h($.price)+"€",1)]),content:V(()=>[i(L).customDishAPI.customDishes.value.find(ae=>ae.name==$.name)?(c(),g("div",Ja,[(c(!0),g(Z,null,se($.notesAndId,(ae,ie)=>(c(),g("div",null,[$.notesAndId[ie].length!==0?(c(),g("span",Ga,h(R($.name,ie))+": "+h(K($.name,ie,ae)),1)):E("",!0)]))),256)),a("div",null,[$.dishNote?(c(),g("span",Za,h(m.$t("common.note"))+": "+h($.dishNote),1)):E("",!0)])])):E("",!0)]),footer:V(()=>[a("div",Xa,[e.isTakeaway?E("",!0):(c(),Y(i(W),{key:0,label:i(w)("common.edit")+" "+i(w)("common.note"),severity:"contrast",onClick:ae=>S($)},null,8,["label","onClick"])),A(i(W),{label:i(w)("common.remove"),severity:"danger",onClick:ae=>o($)},null,8,["label","onClick"])])]),_:2},1024))),128)),(c(!0),g(Z,null,se(T.value,($,te)=>(c(),g("div",{key:te,class:"p-2 border-round shadow-1 transition-all transition-duration-200 hover:shadow-3 flex flex-column gap-1"},[a("div",Ya,[a("img",{src:$.image,alt:$.name,class:"w-4rem h-4rem border-round flex-shrink-0",onError:z,style:{"object-fit":"cover","min-width":"4rem"}},null,40,es),a("div",ts,[a("div",as,[a("div",ss,[a("span",ns,h(d($)),1)])]),a("div",os,[$.discount?(c(),g("span",is,"€"+h($.dis_price),1)):E("",!0),$.discount?E("",!0):(c(),g("span",ls,"€"+h($.price),1)),$.price>0?(c(),g("span",rs,"/uni.")):E("",!0)])])]),a("div",null,[$.dishNote?(c(),g("span",cs,h(i(w)("common.note")+": "+$.dishNote),1)):E("",!0)]),a("div",us,[a("div",ds,[e.isTakeaway?E("",!0):(c(),Y(i(W),{key:0,label:i(w)("common.edit")+" "+i(w)("common.note"),severity:"contrast",class:"w-3.5rem h-2rem",onClick:ae=>S($)},null,8,["label","onClick"]))]),a("div",fs,[A(i(W),{icon:"pi pi-minus",rounded:"",disabled:$.quantity<=0,onClick:ae=>G(te,-1),class:"w-2rem h-2rem"},null,8,["disabled","onClick"]),a("span",ps,h($.quantity),1),A(i(W),{icon:"pi pi-plus",rounded:"",disabled:H($),onClick:ae=>G(te,1),class:"w-2rem h-2rem"},null,8,["disabled","onClick"])])])]))),128))]),e.isTakeaway?E("",!0):(c(),g("div",vs,[A(i(Ye),{variant:"in"},{default:V(()=>[A(i(rt),{id:"in_label",modelValue:b.value,"onUpdate:modelValue":x[0]||(x[0]=$=>b.value=$),variant:"filled",maxlength:"20"},null,8,["modelValue"]),a("label",hs,h(i(w)("common.name")),1)]),_:1}),A(i(Ye),{variant:"in"},{default:V(()=>[A(i(Xe),{id:"in_label",class:"min-w-full",rows:"5",modelValue:C.value,"onUpdate:modelValue":x[1]||(x[1]=$=>C.value=$),variant:"filled",maxlength:"200"},null,8,["modelValue"]),a("label",ms,h(i(w)("common.observation")),1)]),_:1})]))]),_:1},8,["visible","header"]),A(i(me),{visible:I.value,"onUpdate:visible":x[6]||(x[6]=$=>I.value=$),header:i(w)("common.note"),onHide:x[7]||(x[7]=$=>q()),modal:"",dismissableMask:!0},{default:V(()=>[A(i(Xe),{modelValue:l.value,"onUpdate:modelValue":x[3]||(x[3]=$=>l.value=$),rows:"5",cols:"30",placeholder:i(w)("common.edit")+" "+i(w)("common.note")+"...",maxlength:"100"},null,8,["modelValue","placeholder"]),a("div",_s,[A(i(W),{label:i(w)("common.cancel"),severity:"danger",onClick:x[4]||(x[4]=$=>M(!1))},null,8,["label"]),A(i(W),{label:i(w)("common.save"),severity:"primary",size:"sm",onClick:x[5]||(x[5]=$=>M(!0))},null,8,["label"])])]),_:1},8,["visible","header"])],64))}},ks=Te(ws,[["__scopeId","data-v-fb257e9c"]]);var xs=ze`
    .p-overlaybadge {
        position: relative;
    }

    .p-overlaybadge .p-badge {
        position: absolute;
        inset-block-start: 0;
        inset-inline-end: 0;
        transform: translate(50%, -50%);
        transform-origin: 100% 0;
        margin: 0;
        outline-width: dt('overlaybadge.outline.width');
        outline-style: solid;
        outline-color: dt('overlaybadge.outline.color');
    }

    .p-overlaybadge .p-badge:dir(rtl) {
        transform: translate(-50%, -50%);
    }
`,$s={root:"p-overlaybadge"},Ts=be.extend({name:"overlaybadge",style:xs,classes:$s}),Cs={name:"OverlayBadge",extends:ct,style:Ts,provide:function(){return{$pcOverlayBadge:this,$parentInstance:this}}},ut={name:"OverlayBadge",extends:Cs,inheritAttrs:!1,components:{Badge:ct}};function Is(e,t,s,u,w,p){var T=wt("Badge");return c(),g("div",J({class:e.cx("root")},e.ptmi("root")),[fe(e.$slots,"default"),A(T,J(e.$props,{pt:e.ptm("pcBadge")}),null,16,["pt"])],16)}ut.render=Is;j([]);j("iniImages()");const Ds={class:"m-3"},Ss={class:"flex flex-column gap-2"},As={class:"w-full flex justify-content-center"},Ns={key:0,class:"max-w-19rem"},Bs=["src"],Ps={style:{width:"300px",height:"300px",background:"url(/boxImage/box.png)"}},Ls={key:0,class:"flex align-items-center justify-content-center text-4xl font-bold text-white w-full h-full"},qs={key:1,class:"grid m-0 p-2"},zs=["onClick"],Es={class:"flex align-items-center justify-content-center font-bold m-0 p-0",style:{width:"94px",height:"94px"}},Os=["src"],Rs={class:"flex flex-wrap justify-content-between align-items-center m-1"},Ms={class:"flex gap-1 align-items-center"},js={key:0},Fs={class:"font-bold mb-2"},Vs={key:1,class:"flex justify-content-between gap-2 mt-3"},Hs={class:"font-bold mb-2"},Ks={class:"flex mr-2"},Us={class:"w-3rem text-xl text-center"},Ws={class:"font-bold block mb-2"},Qs={class:"flex flex-wrap"},Js={key:2,class:"flex flex-wrap gap-2 mt-3"},Gs={class:"font-bold block mb-2"},Zs={class:"font-bold block mb-2 text-center"},Xs={class:"flex flex-wrap gap-2 mt-3"},Ys={__name:"CustomDish",props:{currentCustomDish:Object},emits:["typeClick"],setup(e,{emit:t}){const{locale:s}=de(),u=e,w=kt(),{t:p}=de(),T=ue(()=>u.currentCustomDish),O=ue(()=>T.boxImages),l=j(0),_=ue(()=>{let d=T.value.initialPrice;for(const D of T.value.types??[])for(const z of D.dishes??[])z.selected&&(d+=z.price);return Number(d).toFixed(2)}),I=t,y=j(null),b=ue(()=>{const d=s.value,D=`title_${d}`,z=`description_${d}`;return T.value.descriptions.map(H=>({title:H[D],descriptions:H.descriptions.map(m=>m[z]),image:H==null?void 0:H.image}))}),C=ue(()=>{var z,H;const d=Number(((z=T.value)==null?void 0:z.like)??0),D=Number(((H=T.value)==null?void 0:H.rate)??0);return D?d/D*5:0});function K(d,D){const z=s.value;return d[`${D}_${z}`]}function R(d,D,z){const H=d[D];if(H.selected){H.selected=!1;return}else{const x=d.filter($=>$.selected).length;if(z===1){n(d),H.selected=!0;return}x<z&&(H.selected=!0)}}function G(d,D,z){const H=d.dishes;I("typeClick",d,D,H[D].selected),R(H,D,z)}function M(d){return d.selected}function q(){if(!k(T.value.types))return;const d=N(T.value.types),D=f(T.value.types);re.addItem({dishid:-1,name:T.value.name,category:u.currentCustomDish.category,count:l.value!==0?l.value:1,price:_.value,notes:d,notesAndId:D}),console.log("CART: ",re.cartDishs),o(T.value.types),ne.show({severity:"info",summary:"info",detail:p("customDishBibimbapVue.addToCartSuccessBibimbap")})}function S(d){return!d||!d.dishes?"":d.dishes.filter(z=>z.selected).map(z=>z.name).join(",")}function N(d){return d?d.map(D=>S(D)):[]}function f(d){return d?d.map(D=>D.dishes?D.dishes.filter(z=>z.selected).map(z=>({id:z.dishid,name:z.name})):[]):[]}function o(d){d&&d.forEach(D=>{D.dishes&&D.dishes.forEach(z=>{z.selected=!1})})}function n(d){d.forEach(D=>D.selected=!1)}function k(d){if(T.value.options.quantity&&l.value<=0)return ne.show({severity:"warn",detail:p("notification.quantity_must_be_positive")}),!1;for(const D of d)if(D.dishes.filter(H=>H.selected).length<D.minQuantity){const H=D.typeName;return ne.show({severity:"warn",detail:p("notification.select_type_of",{name:H})}),!1}return!0}function ee(d){d?L.customDishAPI.like(T.value.id)&&(y.value="like",w.add({severity:"success",summary:p("common.success"),detail:p("common.rate")+" "+p("common.success"),life:750})):L.customDishAPI.unLike(T.value.id)&&(y.value="unlike",w.add({severity:"success",summary:p("common.success"),detail:p("common.rate")+" "+p("common.success"),life:750}))}return(d,D)=>{var z,H;return c(),g("div",Ds,[a("div",Ss,[A(i(We),{class:"w-full max-w-xl mx-auto"},{default:V(()=>[(c(!0),g(Z,null,se(b.value,(m,x)=>(c(),Y(i(Ue),{key:x,value:x},{default:V(()=>[A(i(He),null,{default:V(()=>[he(h(m.title),1)]),_:2},1024),A(i(Ke),null,{default:V(()=>{var $;return[(c(!0),g(Z,null,se(m.descriptions,(te,ae)=>(c(),g("p",{key:ae},h(te),1))),128)),a("div",As,[($=m.image)!=null&&$.src?(c(),g("div",Ns,[a("img",{src:m.image.src,class:"w-full"},null,8,Bs)])):E("",!0)])]}),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1}),((H=(z=T.value)==null?void 0:z.value)==null?void 0:H.name)==="MY BOX"?(c(),Y(i(We),{key:0,class:"w-full max-w-xl mx-auto"},{default:V(()=>[A(i(Ue),{value:"0"},{default:V(()=>[A(i(He),null,{default:V(()=>[he(" 🥩 "+h(d.$t("common.showMybox")),1)]),_:1}),A(i(Ke),null,{default:V(()=>[a("div",Ps,[d.isEmptyArray(O.value)?(c(),g("div",Ls,h(d.$t("common.myboxAlarm")),1)):E("",!0),d.isEmptyArray(O.value)?E("",!0):(c(),g("div",qs,[(c(!0),g(Z,null,se(O.value,m=>(c(),g("div",{class:"col-4 p-0",onClick:x=>d.imageSelectAction(m)},[a("div",Es,[m?(c(),g("img",{key:0,class:"m-0 p-0",src:d.imagePath(m),style:{width:"82px",height:"82px"}},null,8,Os)):E("",!0)])],8,zs))),256))]))])]),_:1})]),_:1})]),_:1})):E("",!0)]),a("div",Rs,[a("div",Ms,[(c(),g(Z,null,se(5,m=>a("i",{key:m,class:le(["pi invert-star",m<=Math.floor(C.value)?"pi-star-fill":m-.5<=C.value?"pi-star-half":"pi-star"]),style:{color:"black"}},null,2)),64)),a("p",null,"("+h(T.value.rate?T.value.rate:0)+")",1)]),a("div",null,[A(i(W),{text:"",icon:"pi pi-thumbs-up",severity:y.value==="like"?"success":"",onClick:D[0]||(D[0]=m=>ee(!0))},null,8,["severity"]),A(i(W),{text:"",icon:"pi pi-thumbs-down",severity:y.value==="unlike"?"danger":"",onClick:D[1]||(D[1]=m=>ee(!1))},null,8,["severity"])])]),T.value.options.extraInfo?(c(),g("div",js,[a("label",Fs,h(T.value.options.extraInfo),1)])):E("",!0),T.value.options.quantity?(c(),g("div",Vs,[a("div",null,[a("label",Hs,h(d.$t("common.quantity"))+" / "+h(d.$t("common.pieces")),1)]),a("div",Ks,[A(i(W),{icon:"pi pi-minus",disabled:l.value<=0,onClick:D[2]||(D[2]=m=>l.value-=T.value.options.quantitySetp),class:"w-2rem h-2rem"},null,8,["disabled"]),a("span",Us,h(l.value),1),A(i(W),{icon:"pi pi-plus",disabled:l.value>=T.value.options.maxQuantity,onClick:D[3]||(D[3]=m=>l.value+=T.value.options.quantitySetp),class:"w-2rem h-2rem"},null,8,["disabled"])])])):E("",!0),(c(!0),g(Z,null,se(T.value.types,(m,x)=>(c(),g("div",{key:m.id},[we(a("div",null,[a("label",Ws,h(x+1)+". "+h(K(m,"typeName")),1),a("div",Qs,[(c(!0),g(Z,null,se(m.dishes,($,te)=>(c(),Y(i(W),{key:te,onClick:ae=>G(m,te,l.value==0?m.maxQuantity:m.maxQuantity*l.value),class:le([{"p-button-primary":M($),"p-button-outlined":!M($)},"m-1"])},{default:V(()=>[a("p",{class:le({"text-gray-700":!M($)})},h(K($,"name")),3)]),_:2},1032,["onClick","class"]))),128))])],512),[[xt,m.enable]])]))),128)),e.currentCustomDish.initialPrice!==0?(c(),g("div",Js,[a("label",Gs,h(d.$t("common.price"))+":",1),a("label",Zs,h(_.value+"€"),1)])):E("",!0),a("div",Xs,[A(i(W),{icon:"pi pi-shopping-cart",onClick:D[4]||(D[4]=m=>q()),label:d.$t("common.addToCart"),class:"m-3",severity:"primary",raised:""},null,8,["label"])])])}}},en=Te(Ys,[["__scopeId","data-v-1bbb17dd"]]);var tn=ze`
    .p-tabs {
        display: flex;
        flex-direction: column;
    }

    .p-tablist {
        display: flex;
        position: relative;
    }

    .p-tabs-scrollable > .p-tablist {
        overflow: hidden;
    }

    .p-tablist-viewport {
        overflow-x: auto;
        overflow-y: hidden;
        scroll-behavior: smooth;
        scrollbar-width: none;
        overscroll-behavior: contain auto;
    }

    .p-tablist-viewport::-webkit-scrollbar {
        display: none;
    }

    .p-tablist-tab-list {
        position: relative;
        display: flex;
        background: dt('tabs.tablist.background');
        border-style: solid;
        border-color: dt('tabs.tablist.border.color');
        border-width: dt('tabs.tablist.border.width');
    }

    .p-tablist-content {
        flex-grow: 1;
    }

    .p-tablist-nav-button {
        all: unset;
        position: absolute !important;
        flex-shrink: 0;
        inset-block-start: 0;
        z-index: 2;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        background: dt('tabs.nav.button.background');
        color: dt('tabs.nav.button.color');
        width: dt('tabs.nav.button.width');
        transition:
            color dt('tabs.transition.duration'),
            outline-color dt('tabs.transition.duration'),
            box-shadow dt('tabs.transition.duration');
        box-shadow: dt('tabs.nav.button.shadow');
        outline-color: transparent;
        cursor: pointer;
    }

    .p-tablist-nav-button:focus-visible {
        z-index: 1;
        box-shadow: dt('tabs.nav.button.focus.ring.shadow');
        outline: dt('tabs.nav.button.focus.ring.width') dt('tabs.nav.button.focus.ring.style') dt('tabs.nav.button.focus.ring.color');
        outline-offset: dt('tabs.nav.button.focus.ring.offset');
    }

    .p-tablist-nav-button:hover {
        color: dt('tabs.nav.button.hover.color');
    }

    .p-tablist-prev-button {
        inset-inline-start: 0;
    }

    .p-tablist-next-button {
        inset-inline-end: 0;
    }

    .p-tablist-prev-button:dir(rtl),
    .p-tablist-next-button:dir(rtl) {
        transform: rotate(180deg);
    }

    .p-tab {
        flex-shrink: 0;
        cursor: pointer;
        user-select: none;
        position: relative;
        border-style: solid;
        white-space: nowrap;
        gap: dt('tabs.tab.gap');
        background: dt('tabs.tab.background');
        border-width: dt('tabs.tab.border.width');
        border-color: dt('tabs.tab.border.color');
        color: dt('tabs.tab.color');
        padding: dt('tabs.tab.padding');
        font-weight: dt('tabs.tab.font.weight');
        transition:
            background dt('tabs.transition.duration'),
            border-color dt('tabs.transition.duration'),
            color dt('tabs.transition.duration'),
            outline-color dt('tabs.transition.duration'),
            box-shadow dt('tabs.transition.duration');
        margin: dt('tabs.tab.margin');
        outline-color: transparent;
    }

    .p-tab:not(.p-disabled):focus-visible {
        z-index: 1;
        box-shadow: dt('tabs.tab.focus.ring.shadow');
        outline: dt('tabs.tab.focus.ring.width') dt('tabs.tab.focus.ring.style') dt('tabs.tab.focus.ring.color');
        outline-offset: dt('tabs.tab.focus.ring.offset');
    }

    .p-tab:not(.p-tab-active):not(.p-disabled):hover {
        background: dt('tabs.tab.hover.background');
        border-color: dt('tabs.tab.hover.border.color');
        color: dt('tabs.tab.hover.color');
    }

    .p-tab-active {
        background: dt('tabs.tab.active.background');
        border-color: dt('tabs.tab.active.border.color');
        color: dt('tabs.tab.active.color');
    }

    .p-tabpanels {
        background: dt('tabs.tabpanel.background');
        color: dt('tabs.tabpanel.color');
        padding: dt('tabs.tabpanel.padding');
        outline: 0 none;
    }

    .p-tabpanel:focus-visible {
        box-shadow: dt('tabs.tabpanel.focus.ring.shadow');
        outline: dt('tabs.tabpanel.focus.ring.width') dt('tabs.tabpanel.focus.ring.style') dt('tabs.tabpanel.focus.ring.color');
        outline-offset: dt('tabs.tabpanel.focus.ring.offset');
    }

    .p-tablist-active-bar {
        z-index: 1;
        display: block;
        position: absolute;
        inset-block-end: dt('tabs.active.bar.bottom');
        height: dt('tabs.active.bar.height');
        background: dt('tabs.active.bar.background');
        transition: 250ms cubic-bezier(0.35, 0, 0.25, 1);
    }
`,an={root:function(t){var s=t.props;return["p-tabs p-component",{"p-tabs-scrollable":s.scrollable}]}},sn=be.extend({name:"tabs",style:tn,classes:an}),nn={name:"BaseTabs",extends:$e,props:{value:{type:[String,Number],default:void 0},lazy:{type:Boolean,default:!1},scrollable:{type:Boolean,default:!1},showNavigators:{type:Boolean,default:!0},tabindex:{type:Number,default:0},selectOnFocus:{type:Boolean,default:!1}},style:sn,provide:function(){return{$pcTabs:this,$parentInstance:this}}},dt={name:"Tabs",extends:nn,inheritAttrs:!1,emits:["update:value"],data:function(){return{d_value:this.value}},watch:{value:function(t){this.d_value=t}},methods:{updateValue:function(t){this.d_value!==t&&(this.d_value=t,this.$emit("update:value",t))},isVertical:function(){return this.orientation==="vertical"}}};function on(e,t,s,u,w,p){return c(),g("div",J({class:e.cx("root")},e.ptmi("root")),[fe(e.$slots,"default")],16)}dt.render=on;var ln={root:"p-tablist",content:function(t){var s=t.instance;return["p-tablist-content",{"p-tablist-viewport":s.$pcTabs.scrollable}]},tabList:"p-tablist-tab-list",activeBar:"p-tablist-active-bar",prevButton:"p-tablist-prev-button p-tablist-nav-button",nextButton:"p-tablist-next-button p-tablist-nav-button"},rn=be.extend({name:"tablist",classes:ln}),cn={name:"BaseTabList",extends:$e,props:{},style:rn,provide:function(){return{$pcTabList:this,$parentInstance:this}}},ft={name:"TabList",extends:cn,inheritAttrs:!1,inject:["$pcTabs"],data:function(){return{isPrevButtonEnabled:!1,isNextButtonEnabled:!0}},resizeObserver:void 0,watch:{showNavigators:function(t){t?this.bindResizeObserver():this.unbindResizeObserver()},activeValue:{flush:"post",handler:function(){this.updateInkBar()}}},mounted:function(){var t=this;setTimeout(function(){t.updateInkBar()},150),this.showNavigators&&(this.updateButtonState(),this.bindResizeObserver())},updated:function(){this.showNavigators&&this.updateButtonState()},beforeUnmount:function(){this.unbindResizeObserver()},methods:{onScroll:function(t){this.showNavigators&&this.updateButtonState(),t.preventDefault()},onPrevButtonClick:function(){var t=this.$refs.content,s=this.getVisibleButtonWidths(),u=je(t)-s,w=Math.abs(t.scrollLeft),p=u*.8,T=w-p,O=Math.max(T,0);t.scrollLeft=Ze(t)?-1*O:O},onNextButtonClick:function(){var t=this.$refs.content,s=this.getVisibleButtonWidths(),u=je(t)-s,w=Math.abs(t.scrollLeft),p=u*.8,T=w+p,O=t.scrollWidth-u,l=Math.min(T,O);t.scrollLeft=Ze(t)?-1*l:l},bindResizeObserver:function(){var t=this;this.resizeObserver=new ResizeObserver(function(){return t.updateButtonState()}),this.resizeObserver.observe(this.$refs.list)},unbindResizeObserver:function(){var t;(t=this.resizeObserver)===null||t===void 0||t.unobserve(this.$refs.list),this.resizeObserver=void 0},updateInkBar:function(){var t=this.$refs,s=t.content,u=t.inkbar,w=t.tabs;if(u){var p=Ve(s,'[data-pc-name="tab"][data-p-active="true"]');this.$pcTabs.isVertical()?(u.style.height=Tt(p)+"px",u.style.top=Ne(p).top-Ne(w).top+"px"):(u.style.width=Ct(p)+"px",u.style.left=Ne(p).left-Ne(w).left+"px")}},updateButtonState:function(){var t=this.$refs,s=t.list,u=t.content,w=u.scrollTop,p=u.scrollWidth,T=u.scrollHeight,O=u.offsetWidth,l=u.offsetHeight,_=Math.abs(u.scrollLeft),I=[je(u),$t(u)],y=I[0],b=I[1];this.$pcTabs.isVertical()?(this.isPrevButtonEnabled=w!==0,this.isNextButtonEnabled=s.offsetHeight>=l&&parseInt(w)!==T-b):(this.isPrevButtonEnabled=_!==0,this.isNextButtonEnabled=s.offsetWidth>=O&&parseInt(_)!==p-y)},getVisibleButtonWidths:function(){var t=this.$refs,s=t.prevButton,u=t.nextButton,w=0;return this.showNavigators&&(w=((s==null?void 0:s.offsetWidth)||0)+((u==null?void 0:u.offsetWidth)||0)),w}},computed:{templates:function(){return this.$pcTabs.$slots},activeValue:function(){return this.$pcTabs.d_value},showNavigators:function(){return this.$pcTabs.scrollable&&this.$pcTabs.showNavigators},prevButtonAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.previous:void 0},nextButtonAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.next:void 0},dataP:function(){return Ee({scrollable:this.$pcTabs.scrollable})}},components:{ChevronLeftIcon:Lt,ChevronRightIcon:qt},directives:{ripple:it}},un=["data-p"],dn=["aria-label","tabindex"],fn=["data-p"],pn=["aria-orientation"],vn=["aria-label","tabindex"];function hn(e,t,s,u,w,p){var T=qe("ripple");return c(),g("div",J({ref:"list",class:e.cx("root"),"data-p":p.dataP},e.ptmi("root")),[p.showNavigators&&w.isPrevButtonEnabled?we((c(),g("button",J({key:0,ref:"prevButton",type:"button",class:e.cx("prevButton"),"aria-label":p.prevButtonAriaLabel,tabindex:p.$pcTabs.tabindex,onClick:t[0]||(t[0]=function(){return p.onPrevButtonClick&&p.onPrevButtonClick.apply(p,arguments)})},e.ptm("prevButton"),{"data-pc-group-section":"navigator"}),[(c(),Y(_e(p.templates.previcon||"ChevronLeftIcon"),J({"aria-hidden":"true"},e.ptm("prevIcon")),null,16))],16,dn)),[[T]]):E("",!0),a("div",J({ref:"content",class:e.cx("content"),onScroll:t[1]||(t[1]=function(){return p.onScroll&&p.onScroll.apply(p,arguments)}),"data-p":p.dataP},e.ptm("content")),[a("div",J({ref:"tabs",class:e.cx("tabList"),role:"tablist","aria-orientation":p.$pcTabs.orientation||"horizontal"},e.ptm("tabList")),[fe(e.$slots,"default"),a("span",J({ref:"inkbar",class:e.cx("activeBar"),role:"presentation","aria-hidden":"true"},e.ptm("activeBar")),null,16)],16,pn)],16,fn),p.showNavigators&&w.isNextButtonEnabled?we((c(),g("button",J({key:1,ref:"nextButton",type:"button",class:e.cx("nextButton"),"aria-label":p.nextButtonAriaLabel,tabindex:p.$pcTabs.tabindex,onClick:t[2]||(t[2]=function(){return p.onNextButtonClick&&p.onNextButtonClick.apply(p,arguments)})},e.ptm("nextButton"),{"data-pc-group-section":"navigator"}),[(c(),Y(_e(p.templates.nexticon||"ChevronRightIcon"),J({"aria-hidden":"true"},e.ptm("nextIcon")),null,16))],16,vn)),[[T]]):E("",!0)],16,un)}ft.render=hn;var mn={root:function(t){var s=t.instance,u=t.props;return["p-tab",{"p-tab-active":s.active,"p-disabled":u.disabled}]}},bn=be.extend({name:"tab",classes:mn}),gn={name:"BaseTab",extends:$e,props:{value:{type:[String,Number],default:void 0},disabled:{type:Boolean,default:!1},as:{type:[String,Object],default:"BUTTON"},asChild:{type:Boolean,default:!1}},style:bn,provide:function(){return{$pcTab:this,$parentInstance:this}}},pt={name:"Tab",extends:gn,inheritAttrs:!1,inject:["$pcTabs","$pcTabList"],methods:{onFocus:function(){this.$pcTabs.selectOnFocus&&this.changeActiveValue()},onClick:function(){this.changeActiveValue()},onKeydown:function(t){switch(t.code){case"ArrowRight":this.onArrowRightKey(t);break;case"ArrowLeft":this.onArrowLeftKey(t);break;case"Home":this.onHomeKey(t);break;case"End":this.onEndKey(t);break;case"PageDown":this.onPageDownKey(t);break;case"PageUp":this.onPageUpKey(t);break;case"Enter":case"NumpadEnter":case"Space":this.onEnterKey(t);break}},onArrowRightKey:function(t){var s=this.findNextTab(t.currentTarget);s?this.changeFocusedTab(t,s):this.onHomeKey(t),t.preventDefault()},onArrowLeftKey:function(t){var s=this.findPrevTab(t.currentTarget);s?this.changeFocusedTab(t,s):this.onEndKey(t),t.preventDefault()},onHomeKey:function(t){var s=this.findFirstTab();this.changeFocusedTab(t,s),t.preventDefault()},onEndKey:function(t){var s=this.findLastTab();this.changeFocusedTab(t,s),t.preventDefault()},onPageDownKey:function(t){this.scrollInView(this.findLastTab()),t.preventDefault()},onPageUpKey:function(t){this.scrollInView(this.findFirstTab()),t.preventDefault()},onEnterKey:function(t){this.changeActiveValue(),t.preventDefault()},findNextTab:function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,u=s?t:t.nextElementSibling;return u?Be(u,"data-p-disabled")||Be(u,"data-pc-section")==="activebar"?this.findNextTab(u):Ve(u,'[data-pc-name="tab"]'):null},findPrevTab:function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,u=s?t:t.previousElementSibling;return u?Be(u,"data-p-disabled")||Be(u,"data-pc-section")==="activebar"?this.findPrevTab(u):Ve(u,'[data-pc-name="tab"]'):null},findFirstTab:function(){return this.findNextTab(this.$pcTabList.$refs.tabs.firstElementChild,!0)},findLastTab:function(){return this.findPrevTab(this.$pcTabList.$refs.tabs.lastElementChild,!0)},changeActiveValue:function(){this.$pcTabs.updateValue(this.value)},changeFocusedTab:function(t,s){Dt(s),this.scrollInView(s)},scrollInView:function(t){var s;t==null||(s=t.scrollIntoView)===null||s===void 0||s.call(t,{block:"nearest"})}},computed:{active:function(){var t;return It((t=this.$pcTabs)===null||t===void 0?void 0:t.d_value,this.value)},id:function(){var t;return"".concat((t=this.$pcTabs)===null||t===void 0?void 0:t.$id,"_tab_").concat(this.value)},ariaControls:function(){var t;return"".concat((t=this.$pcTabs)===null||t===void 0?void 0:t.$id,"_tabpanel_").concat(this.value)},attrs:function(){return J(this.asAttrs,this.a11yAttrs,this.ptmi("root",this.ptParams))},asAttrs:function(){return this.as==="BUTTON"?{type:"button",disabled:this.disabled}:void 0},a11yAttrs:function(){return{id:this.id,tabindex:this.active?this.$pcTabs.tabindex:-1,role:"tab","aria-selected":this.active,"aria-controls":this.ariaControls,"data-pc-name":"tab","data-p-disabled":this.disabled,"data-p-active":this.active,onFocus:this.onFocus,onKeydown:this.onKeydown}},ptParams:function(){return{context:{active:this.active}}},dataP:function(){return Ee({active:this.active})}},directives:{ripple:it}};function yn(e,t,s,u,w,p){var T=qe("ripple");return e.asChild?fe(e.$slots,"default",{key:1,dataP:p.dataP,class:le(e.cx("root")),active:p.active,a11yAttrs:p.a11yAttrs,onClick:p.onClick}):we((c(),Y(_e(e.as),J({key:0,class:e.cx("root"),"data-p":p.dataP,onClick:p.onClick},p.attrs),{default:V(function(){return[fe(e.$slots,"default")]}),_:3},16,["class","data-p","onClick"])),[[T]])}pt.render=yn;const _n={class:"fixed top-0 left-0 w-full bg-primary-reverse",style:{"z-index":"10"}},wn={class:"grid mt-1 ml-1"},kn={class:"max-w-3rem flex align-items-center"},xn=["src"],$n={class:"flex align-items-center"},Tn={key:0,class:"text-color font-bold p-1"},Cn={key:1,class:"text-color font-bold p-1"},In={class:"card flex mr-3 flex align-items-center",style:{"margin-left":"auto"}},Dn={style:{display:"flex","align-items":"center"}},Sn={style:{"flex-grow":"1",width:"0",overflow:"hidden"}},An={class:"mt-2"},Nn={class:"flex justify-content-end mt-2"},Bn={class:"flex inline-flex items-center justify-center gap-2"},Pn={class:"flex align-items-center"},Ln={class:"flex flex-column"},qn={class:"text-sm p-2"},zn={class:"text-sm p-2"},En={class:"flex items-center gap-4 mb-4 p-2"},On={class:"flex flex-column gap-3"},Rn={__name:"HeaderTabs",props:{types:Array,typeIndex:Number,tableId:String,tabItems:Array},emits:["clickType","switchToWelcome"],setup(e,{emit:t}){const{t:s}=de(),u=j(!1);function w(){var N;const q=L.currentPage.value,S=(N=q==null?void 0:q.data)==null?void 0:N.logoPath;return S?L.pathFormated(S,q.imagesPath):"/images/logo_logo.png"}function p(){return L.getTable()}const T=j(),O=ue(()=>[{label:s("common.options"),items:[{label:s("common.pay"),icon:"pi pi-wallet",command:()=>{K()}},{label:s("common.call"),icon:"pi pi-user-plus",command:()=>{L.send_cmd(p(),{cmd:"call"},q=>{q.success?ne.show_info(s("notification.call_msg")):ne.show_warn(q.data)})}}]}]),l=q=>{T.value.toggle(q)},_=q=>{I.value.toggle(q)},I=j(),y=j(!1),b=j(),C=j();function K(){y.value=!0}function R(){q(b.value)?L.send_cmd(p(),{cmd:"pay",nif:b.value,note:C.value},S=>{S.success?(ne.show_info(s("notification.pay_msg")),y.value=!1):ne.show_error(s("common.failed"))}):ne.show_warn(s("notification.cancel_msg"));function q(S){return!S||S.toString().length===9||S.toString().length===0}}function G(){C.value&&(C.value=void 0)}function M(){u.value=!0}return(q,S)=>(c(),g(Z,null,[a("div",_n,[a("div",wn,[a("div",kn,[a("img",{src:w(),class:"w-full",clickble:"",onClick:S[0]||(S[0]=()=>q.$emit("switchToWelcome"))},null,8,xn)]),a("div",$n,[e.tableId?(c(),g("p",Tn,h(q.$t("common.table"))+": "+h(e.tableId),1)):E("",!0),e.tableId?E("",!0):(c(),g("p",Cn,h(q.$t("common.takeAway")),1))]),a("div",In,[e.tableId?(c(),Y(i(W),{key:0,icon:"pi pi-bell",rounded:"","aria-label":"Filter",onClick:l,"aria-haspopup":"true","aria-controls":"overlay_menu"})):(c(),Y(i(W),{key:1,icon:"pi pi-question",rounded:"",onClick:M})),A(i(et),{ref_key:"menu",ref:T,id:"overlay_menu",model:O.value,popup:!0},null,8,["model"])])]),a("div",Dn,[a("div",null,[A(i(W),{icon:"pi pi-bars",variant:"text",rounded:"","aria-label":"Filter",onClick:_,"aria-haspopup":"true","aria-controls":"tab_menu"}),A(i(et),{ref_key:"tabMenu",ref:I,id:"tab_menu",model:e.tabItems,popup:!0},null,8,["model"])]),a("div",Sn,[A(i(dt),{value:e.typeIndex,scrollable:"",showNavigators:!1},{default:V(()=>[A(i(ft),null,{default:V(()=>[(c(!0),g(Z,null,se(e.types,(N,f)=>(c(),Y(i(pt),{value:f,onClick:()=>q.$emit("clickType",f),class:"text-sm md:text-lg lg:text-xl"},{default:V(()=>[he(h(N),1)]),_:2},1032,["value","onClick"]))),256))]),_:1})]),_:1},8,["value"])])])]),A(i(me),{visible:y.value,"onUpdate:visible":S[4]||(S[4]=N=>y.value=N),header:"结账",class:"flex flex-column",modal:!0,dismissableMask:!0,onHide:G},{default:V(()=>[a("div",null,[S[6]||(S[6]=a("label",null,"NIF:",-1)),A(i(zt),{modelValue:b.value,"onUpdate:modelValue":S[1]||(S[1]=N=>b.value=N),inputId:"withoutgrouping",useGrouping:!1,fluid:"",class:"w-full m-1"},null,8,["modelValue"])]),a("div",An,[a("label",null,h(q.$t("common.note"))+":",1),A(i(rt),{type:"text",modelValue:C.value,"onUpdate:modelValue":S[2]||(S[2]=N=>C.value=N),class:"w-full m-1"},null,8,["modelValue"])]),a("div",Nn,[A(i(W),{label:i(s)("common.send"),onClick:S[3]||(S[3]=N=>R())},null,8,["label"])])]),_:1},8,["visible"]),A(i(me),{visible:u.value,"onUpdate:visible":S[5]||(S[5]=N=>u.value=N),modal:"",dismissableMask:"",class:"h-full",style:{width:"90vw",maxWidth:"40rem",minWidth:"20rem"},draggable:!1},{header:V(()=>[a("div",Bn,[A(i(Qe),{icon:"pi pi-question",shape:"circle"}),a("span",Pn,h(i(s)("takeawayHelper.dialogTitle")),1)])]),default:V(()=>[a("div",Ln,[a("span",qn,h(i(s)("takeawayHelper.introduction")),1),a("span",zn,h(i(s)("takeawayHelper.note_t"))+" "+h(i(s)("takeawayHelper.note_1")),1),a("div",En,[A(i(We),{class:"w-full max-w-xl mx-auto"},{default:V(()=>[A(i(Ue),{value:"0"},{default:V(()=>[A(i(He),{class:"text-sm"},{default:V(()=>[he(h(i(s)("takeawayHelper.question_1")),1)]),_:1}),A(i(Ke),{class:"p-1"},{default:V(()=>[a("div",On,[a("span",null,h(i(s)("takeawayHelper.q_1_request_1")),1),a("span",null,h(i(s)("takeawayHelper.q_1_request_2")),1),a("span",null,h(i(s)("takeawayHelper.q_1_request_3")),1),a("span",null,h(i(s)("takeawayHelper.q_1_request_4")),1),a("span",null,h(i(s)("takeawayHelper.q_1_request_5")),1)])]),_:1})]),_:1})]),_:1})])])]),_:1},8,["visible"])],64))}},Mn={__name:"SwipeHint",props:{size:{type:String,default:"8rem"},duration:{type:Number,default:6e3},position:{type:String,default:"bottom"}},setup(e){const t=e,s=j(!0);lt(()=>{t.duration>0&&setTimeout(()=>{s.value=!1},t.duration);const w=()=>{s.value=!1,window.removeEventListener("touchstart",w)};window.addEventListener("touchstart",w)});const u=ue(()=>{let w={left:"50%",transform:"translateX(-50%)",zIndex:99999,opacity:.5,pointerEvents:"none",textAlign:"center",position:"fixed"};return t.position==="top"?w.top="15%":t.position==="center"?(w.top="50%",w.transform="translate(-50%, -50%)"):w.bottom="15%",w});return(w,p)=>s.value?(c(),g("div",{key:0,class:"swipe-hint",style:Le(u.value)},[a("div",{class:"hand",style:Le({width:e.size,height:e.size,backgroundImage:"url(/images/hand_finger.png)"})},null,4)],4)):E("",!0)}},jn=Te(Mn,[["__scopeId","data-v-e5f3ff45"]]),Fn={class:"w-full h-full flex flex-column"},Vn={style:{"overflow-x":"hidden","touch-action":"pan-y"},class:"h-full"},Hn={class:"fixed bottom-0 left-0 w-full h-3rem bg-primary-reverse p-3"},Kn={class:"h-full flex align-items-center justify-content-between w-full"},Un={class:"m-2"},Wn={class:"m-2"},Qn={style:{"max-height":"60vh","overflow-y":"auto","padding-bottom":"60px"}},Jn={class:"flex flex-column border-bottom-1"},Gn={key:0,class:"flex justify-content-between"},Zn={class:"flex flex-column"},Xn={class:"font-bold"},Yn={class:"text-right"},eo={key:1,class:"flex justify-content-between"},to={class:"flex flex-column"},ao={class:"font-bold"},so={class:"text-right"},no={key:0},oo={key:1,class:"flex flex-column"},io={class:"flex flex-column"},lo={class:"font-bold"},ro={class:"text-right"},co={class:"total-footer bg-primary-reverse"},nt=5,Pe="order_time_key",uo={__name:"HomePage",setup(e){const t=ot(),s=Bt(),{t:u}=de(),{locale:w}=de(),p=j(0),T=j(!1),O=j([""]),l=j(0),_=re.cartItemCount,I=j(!1),y=j([]),b=j(0),C=j({}),K=j(!1),R=oe.dishDatas,G=j(L.orderMenuTab),M=j(null),q=j(null),S=j([]),N=j([]),f=j([]),o=()=>{l.value<O.value.length-1&&(l.value++,pe(),z(l.value))},n=()=>{l.value>0&&(l.value--,pe(),z(l.value))},k=(r,v,P,B)=>{L.rateDish(r,v,P),B&&ne.show_success(u("notification.rating_submitted"))},ee=(r,v,P)=>{if(C.value.name=="XIAOXIONG® RAMEN"&&r.id===1){const B=r.dishes[v];let F;B.dishid==47?P?F=d(3,!0,1):F=d(3,!1,1):F=d(3,!0,1),F!==void 0&&D(F)}if(C.value.name=="Menu Almoço"&&r.id===3){const B=r.dishes[v];let F;[1427,41].includes(B.dishid)?P?F=d(4,!0,0):F=d(4,!1,0):F=d(4,!0,0),F!==void 0&&D(F)}};function d(r,v,P){if(C.value={...C.value,types:C.value.types.map(B=>B.id===r?{...B,enable:v,minQuantity:v?P:0}:B)},v===!1)return r}function D(r){!C.value||!Array.isArray(C.value.types)||(C.value={...C.value,types:C.value.types.map(v=>v.id===r?{...v,dishes:v.dishes.map(P=>({...P,selected:!1}))}:v)})}function z(r){let v=L.getOrderMenuTab()[r];if(L.customDishAPI.customDishes.value.map(U=>U.name).includes(v)?(K.value=!0,C.value=L.customDishAPI.customDishes.value.find(U=>U.name==v)):K.value=!1,L.getMenu().length==0){console.log("exit");return}let F=R.value[r].mainDishes;oe.showDishList(F)}const H=()=>{L.refreshTableFromServer(),L.getTableTotalAmount(b),I.value=!0},m=(r,v,P)=>{console.log("update rating changed");const B=L.formatedMenu.value;for(const F of B)for(const U of F.dishes){if(U.dish.id===r){U.dish.likes=v,U.dish.rates=P,console.log("updated inside formatedMenu");return}for(const X of U.subItems)if(X.id===r){X.likes=v,X.rates=P,console.log("updated inside subItem");return}}},x=r=>{let v=r.id;r.org_id&&(v=r.org_id);for(let P=0;P<R.value.length;P++)if(R.value[P].id==v)for(const B in r){let F=B;B.startsWith("note")&&(F=F.replace("note","description")),R.value[P][F]=r[B]}};function $(){return new Promise(r=>{let v=()=>{const P=L.formatedMenu.value;P.length>0?r(P):setTimeout(v,200)};v()})}function te(){return new Promise(r=>{let v=()=>{const P=L.getOrderMenuTab();P.length>0?r(P):setTimeout(v,200)};v()})}const ae=ue(()=>r=>{const v=L.dictinaryAPI.dictinary.value[r];return v?v[`text_${w.value.toLowerCase()}`]:r});St([()=>L.formatedMenu.value,()=>w.value,()=>L.orderMenuTab],([r,v])=>{if(!r||r.length===0){f.value=[];return}const P={},B=L.orderMenuTab,F=r.map(U=>({...U,mainDishes:U.dishes.map(X=>{const Q=X.dish;if(P[Q.id])return P[Q.id];const ve={...Q,defaultName:Q.name,name:ie(Q,"name",v),note:ie(Q,"note",v),subname:ie(Q,"subname",v),quantity:0},ge=X.subItems.map(Ge=>{const Me=Ge;return{...Ge,defaultName:Q.name,name:ie(Me,"name",v),note:ie(Me,"note",v),subname:ie(Me,"subname",v),quantity:0}}),Re={...X,dish:ve,subItems:ge};return P[Re.id]=Re,Re})}));Se(!0),f.value=F,R.value=f.value,O.value=L.orderMenuTab,G.value=B.map(U=>{const X=L.dictinaryAPI.dictinary.value[U];return X?X[`text_${w.value.toLowerCase()}`]:U}),console.log("languagedMenu updated via watch:",f.value)},{immediate:!0,deep:!0});function ie(r,v,P){return r?P==="en"?r[`${v}_en`]||r[v]:P==="zh"&&r[`${v}_cn`]||r[v]:""}async function Oe(){await $();const r=await te();L.isTakeaway(),L.onMenuItemChanged=x,L.onRatingChanged=m,yt();for(let v=0;v<r.length;v++){const P=v;y.value.push({label:ae.value(r[v]),command:()=>{Ce(P),pe()}})}p.value++}const pe=()=>{Nt(()=>{const r=document.querySelector(".p-tablist-viewport"),v=document.querySelector(".p-tab.p-tab-active");if(r&&v){const P=v.offsetLeft-r.offsetWidth/2+v.offsetWidth/2;r.scrollTo({left:P,behavior:"smooth"})}})},Ce=r=>{z(r),l.value=r,pe()},vt=()=>{var r=oe.getAllIncrementedDish();q.value.showDishList(r)};function Ie(){return L.getTable()}L.params.port,M.value=L.table.value.order;function ht(r){var v=u("notification.too_fast",{remainTime:r});ne.show_warn(v)}const mt=(r,v)=>{const P=[];for(let Q=0;Q<re.cartDishs.value.length;Q++){var B=re.cartDishs.value[Q];const ve=L.formateCustomDishNotes(B),ge=B.dis_count?B.dis_price:B.price;P.push({dishid:B.dishid,name:B.name,quantity:B.count,notes:ve,limit:B.limit,price:ge,dishNote:B.dishNote,category:B.category})}const F=oe.getAllIncrementedDish();for(let Q=0;Q<F.length;Q++){var B=F[Q];if(console.log("id cartDishs ;  ; : ",B),B.quantity>0){const ge=B.dis_count?B.dis_price:B.price;P.push({dishid:B.id,name:B.defaultName,quantity:B.quantity,limit:B.limit,price:ge,dishNote:B.dishNote})}}if(P.length===0)return ne.show_warn(u("notification.select_at_least_one")),!1;console.log("cart item:",P);const U=JSON.parse(ce.getCookie(Pe)||"{}"),X=Date.now();if(!U.startTime||X-U.startTime>nt*1e3)U.startTime=X,U.uniCode||(U.uniCode=Date.now().toString(36)+Math.random().toString(36).substring(2,5));else{const Q=nt-parseInt((X-U.startTime)/1e3);ht(Q);return}return ce.setCookie(Pe,JSON.stringify(U)),T.value=!0,L.submit_order({uniCode:U.uniCode,name:r.name,note:r.note,table:Ie(),items:P},Q=>{const ve=JSON.parse(ce.getCookie(Pe)||"{}");ve.uniCode=void 0,ce.setCookie(Pe,JSON.stringify(ve)),v(Q)}),!0};function bt(){const r=ce.getCookie("language");r&&(w.value=r)}function Je(){for(let r=0;r<R.value.length;r++){const v=R.value[r];v.quantity=0}T.value=!1,re.cleanAll()}lt(async()=>{bt(),await Oe(),z(l.value),L.clear_order_data=()=>{Je()},L.setOnOrderConfirmed(r=>{Je();const v=r;ne.show_success(u("notification.order_submitted",{id:v}))}),L.setOnShowError(r=>{T.value=!1,ne.show_error(r)})});function gt(){ce.deleteCookie("login_time");const r=s.query.table;r?t.push({path:"/",query:{table:r}}):t.push({path:"/takeReserve"})}function De(r,v=!0,P=!1){const B=v?re.cartDishs.value:oe.getIdsAndQuantity(oe.getAllIncrementedDish());if(P&&B.length===0)return;const F=at.compressToEncodedURIComponent(JSON.stringify(B));ce.setCookie(r,F)}function Se(r=!1){L.isTakeaway()?(De("take_cartDish_normal",!1,r),De("take_cartDish_custom",!0,r)):(De("cartDish_normal",!1,r),De("cartDish_custom",!0,r))}function Ae(r,v=!0){const P=ce.getCookie(r);if(!P)return;const B=JSON.parse(at.decompressFromEncodedURIComponent(P));if(B&&B!=="undefined")try{v?re.cartDishs.value=B:oe.updateDishDataQty(B)}catch(F){console.error("解析菜失败:",F)}}function yt(){L.isTakeaway()?(Ae("take_cartDish_normal",!1),Ae("take_cartDish_custom")):(Ae("cartDish_normal",!1),Ae("cartDish_custom"))}return At(()=>{Se()}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&Se()}),window.addEventListener("beforeunload",r=>{Se(),L.cleanup()}),(r,v)=>{const P=qe("touch"),B=qe("touch-options");return c(),g(Z,null,[a("div",Fn,[(c(),Y(Rn,{key:p.value,types:G.value,typeIndex:l.value,tabItems:y.value,tableId:Ie(),onClickType:Ce,onSwitchToWelcome:gt},null,8,["types","typeIndex","tabItems","tableId"])),v[2]||(v[2]=a("div",{class:"pb-8"},null,-1)),v[3]||(v[3]=a("div",{class:"pb-4 sm:pb-5 md:pb-5 lg:pb-5"},null,-1)),A(jn,{duration:3e3,position:"center",size:"3rem"}),we((c(),g("div",Vn,[K.value?(c(),Y(en,{key:0,currentCustomDish:C.value,onTypeClick:ee},null,8,["currentCustomDish"])):(c(),Y(Ua,{key:1,rateDish:k,likedItemsRef:S.value,dislikedItemsRef:N.value},null,8,["likedItemsRef","dislikedItemsRef"]))])),[[P,o,"swipe",{left:!0,passive:!0}],[P,n,"swipe",{right:!0,passive:!0}],[B,{swipeTolerance:100}]]),v[4]||(v[4]=a("div",{class:"pb-6"},null,-1)),a("div",Hn,[a("div",Kn,[a("div",Un,[Ie()?(c(),Y(i(W),{key:0,label:r.$t("common.orders"),icon:"pi pi-list",class:"p-button-secondary",onClick:H},null,8,["label"])):E("",!0)]),a("div",Wn,[A(i(ut),{value:i(_),severity:"danger",onClick:vt},{default:V(()=>v[1]||(v[1]=[a("i",{class:"pi pi-shopping-cart",style:{"font-size":"2rem"}},null,-1)])),_:1,__:[1]},8,["value"])])])])]),A(ks,{ref_key:"cartRef",ref:q,checkout:mt,isTakeaway:!Ie()},null,8,["isTakeaway"]),A(i(me),{visible:I.value,"onUpdate:visible":v[0]||(v[0]=F=>I.value=F),header:r.$t("common.completedOrders"),modal:"",style:{width:"80vw","max-width":"700px"}},{default:V(()=>{var F,U;return[a("div",Qn,[a("div",Jn,[(F=b.value.adultPrice)!=null&&F.quantity&&b.value.adultPrice.quantity!=0?(c(),g("div",Gn,[a("div",Zn,[a("span",Xn,h(r.$t("common.adult")),1),a("small",null,h(r.$t("common.quantity"))+": "+h(b.value.adultPrice.quantity),1)]),a("div",Yn,[a("span",null,"€"+h((Number(b.value.adultPrice.price)*b.value.adultPrice.quantity).toFixed(2)),1)])])):E("",!0),(U=b.value.childrenPrice)!=null&&U.quantity&&b.value.childrenPrice.quantity!=0?(c(),g("div",eo,[a("div",to,[a("span",ao,h(r.$t("common.children")),1),a("small",null,h(r.$t("common.quantity"))+": "+h(b.value.childrenPrice.quantity),1)]),a("div",so,[a("span",null,"€"+h((Number(b.value.childrenPrice.price)*b.value.childrenPrice.quantity).toFixed(2)),1)])])):E("",!0)]),i(L).table.value.order.length===0?(c(),g("div",no,h(r.$t("common.noOrders")),1)):(c(),g("div",oo,[(c(!0),g(Z,null,se(i(L).table.value.order,(X,Q)=>(c(),g("div",{key:Q,class:"flex justify-content-between border-bottom-1 pb-2"},[a("div",io,[a("span",lo,h(i(L).getDishName(X)),1),a("small",null,h(r.$t("common.quantity"))+": "+h(X.quantity),1)]),a("div",ro,[a("span",null,"€"+h((X.price*X.quantity).toFixed(2)),1)])]))),128))]))]),a("div",co,h(r.$t("common.total"))+": €"+h(b.value.total),1)]}),_:1},8,["visible","header"])],64)}}},$o=Te(uo,[["__scopeId","data-v-d5d12009"]]);export{$o as default};
