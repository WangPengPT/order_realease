import{g as Dt,D as ee,c as re,s as nt,a as Ct,l as ot}from"./localforage-CTV9jTlC.js";import{y as Oe,B as _e,z as Ce,A as Ee,g as y,s as l,v as Z,j as M,D as be,E as X,G as xe,i as a,t as p,p as ce,u as de,r as q,o as $e,a as L,h as S,F as G,q as oe,l as i,k as V,H as qe,x as ye,m as ne,f as ft,d as ve,I as It,J as St,w as me,c as ue,K as ze,L as At,R as pt,M as Ue,N as Nt,O as Je,P as Bt,Q as Be,S as Lt,T as it,U as vt,V as Pt,W as qt,X as Le,Y as zt,Z as Mt,n as lt,b as Ot,e as Et}from"./index-Dv27XAJ9.js";import{s as he,a as et}from"./index-DTq3ZKaf.js";import{s as Q,a as ht}from"./index-PrG2fYnq.js";import{_ as Ie}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{s as Rt,a as jt}from"./index-BRli8TYc.js";import{s as rt}from"./index-BDGxV8Qn.js";import{a as Ge,b as Ze,c as Xe,s as Ye,d as Vt,S as Ft}from"./pagination-DmwoNm1p.js";import{s as Wt}from"./index-CFrOQms2.js";import{s as Ut}from"./index-4jI4tPv-.js";import{s as Ke}from"./index-DvNXzszI.js";import{s as Kt}from"./index-oNleGAN2.js";var He={exports:{}},ut;function Ht(){return ut||(ut=1,function(e){var t=function(){var n=String.fromCharCode,_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",d={};function c(s,g){if(!d[s]){d[s]={};for(var A=0;A<s.length;A++)d[s][s.charAt(A)]=A}return d[s][g]}var z={compressToBase64:function(s){if(s==null)return"";var g=z._compress(s,6,function(A){return _.charAt(A)});switch(g.length%4){default:case 0:return g;case 1:return g+"===";case 2:return g+"==";case 3:return g+"="}},decompressFromBase64:function(s){return s==null?"":s==""?null:z._decompress(s.length,32,function(g){return c(_,s.charAt(g))})},compressToUTF16:function(s){return s==null?"":z._compress(s,15,function(g){return n(g+32)})+" "},decompressFromUTF16:function(s){return s==null?"":s==""?null:z._decompress(s.length,16384,function(g){return s.charCodeAt(g)-32})},compressToUint8Array:function(s){for(var g=z.compress(s),A=new Uint8Array(g.length*2),k=0,f=g.length;k<f;k++){var P=g.charCodeAt(k);A[k*2]=P>>>8,A[k*2+1]=P%256}return A},decompressFromUint8Array:function(s){if(s==null)return z.decompress(s);for(var g=new Array(s.length/2),A=0,k=g.length;A<k;A++)g[A]=s[A*2]*256+s[A*2+1];var f=[];return g.forEach(function(P){f.push(n(P))}),z.decompress(f.join(""))},compressToEncodedURIComponent:function(s){return s==null?"":z._compress(s,6,function(g){return h.charAt(g)})},decompressFromEncodedURIComponent:function(s){return s==null?"":s==""?null:(s=s.replace(/ /g,"+"),z._decompress(s.length,32,function(g){return c(h,s.charAt(g))}))},compress:function(s){return z._compress(s,16,function(g){return n(g)})},_compress:function(s,g,A){if(s==null)return"";var k,f,P={},W={},H="",J="",O="",U=2,F=3,E=2,R=[],v=0,o=0,b;for(b=0;b<s.length;b+=1)if(H=s.charAt(b),Object.prototype.hasOwnProperty.call(P,H)||(P[H]=F++,W[H]=!0),J=O+H,Object.prototype.hasOwnProperty.call(P,J))O=J;else{if(Object.prototype.hasOwnProperty.call(W,O)){if(O.charCodeAt(0)<256){for(k=0;k<E;k++)v=v<<1,o==g-1?(o=0,R.push(A(v)),v=0):o++;for(f=O.charCodeAt(0),k=0;k<8;k++)v=v<<1|f&1,o==g-1?(o=0,R.push(A(v)),v=0):o++,f=f>>1}else{for(f=1,k=0;k<E;k++)v=v<<1|f,o==g-1?(o=0,R.push(A(v)),v=0):o++,f=0;for(f=O.charCodeAt(0),k=0;k<16;k++)v=v<<1|f&1,o==g-1?(o=0,R.push(A(v)),v=0):o++,f=f>>1}U--,U==0&&(U=Math.pow(2,E),E++),delete W[O]}else for(f=P[O],k=0;k<E;k++)v=v<<1|f&1,o==g-1?(o=0,R.push(A(v)),v=0):o++,f=f>>1;U--,U==0&&(U=Math.pow(2,E),E++),P[J]=F++,O=String(H)}if(O!==""){if(Object.prototype.hasOwnProperty.call(W,O)){if(O.charCodeAt(0)<256){for(k=0;k<E;k++)v=v<<1,o==g-1?(o=0,R.push(A(v)),v=0):o++;for(f=O.charCodeAt(0),k=0;k<8;k++)v=v<<1|f&1,o==g-1?(o=0,R.push(A(v)),v=0):o++,f=f>>1}else{for(f=1,k=0;k<E;k++)v=v<<1|f,o==g-1?(o=0,R.push(A(v)),v=0):o++,f=0;for(f=O.charCodeAt(0),k=0;k<16;k++)v=v<<1|f&1,o==g-1?(o=0,R.push(A(v)),v=0):o++,f=f>>1}U--,U==0&&(U=Math.pow(2,E),E++),delete W[O]}else for(f=P[O],k=0;k<E;k++)v=v<<1|f&1,o==g-1?(o=0,R.push(A(v)),v=0):o++,f=f>>1;U--,U==0&&(U=Math.pow(2,E),E++)}for(f=2,k=0;k<E;k++)v=v<<1|f&1,o==g-1?(o=0,R.push(A(v)),v=0):o++,f=f>>1;for(;;)if(v=v<<1,o==g-1){R.push(A(v));break}else o++;return R.join("")},decompress:function(s){return s==null?"":s==""?null:z._decompress(s.length,32768,function(g){return s.charCodeAt(g)})},_decompress:function(s,g,A){var k=[],f=4,P=4,W=3,H="",J=[],O,U,F,E,R,v,o,b={val:A(0),position:g,index:1};for(O=0;O<3;O+=1)k[O]=O;for(F=0,R=Math.pow(2,2),v=1;v!=R;)E=b.val&b.position,b.position>>=1,b.position==0&&(b.position=g,b.val=A(b.index++)),F|=(E>0?1:0)*v,v<<=1;switch(F){case 0:for(F=0,R=Math.pow(2,8),v=1;v!=R;)E=b.val&b.position,b.position>>=1,b.position==0&&(b.position=g,b.val=A(b.index++)),F|=(E>0?1:0)*v,v<<=1;o=n(F);break;case 1:for(F=0,R=Math.pow(2,16),v=1;v!=R;)E=b.val&b.position,b.position>>=1,b.position==0&&(b.position=g,b.val=A(b.index++)),F|=(E>0?1:0)*v,v<<=1;o=n(F);break;case 2:return""}for(k[3]=o,U=o,J.push(o);;){if(b.index>s)return"";for(F=0,R=Math.pow(2,W),v=1;v!=R;)E=b.val&b.position,b.position>>=1,b.position==0&&(b.position=g,b.val=A(b.index++)),F|=(E>0?1:0)*v,v<<=1;switch(o=F){case 0:for(F=0,R=Math.pow(2,8),v=1;v!=R;)E=b.val&b.position,b.position>>=1,b.position==0&&(b.position=g,b.val=A(b.index++)),F|=(E>0?1:0)*v,v<<=1;k[P++]=n(F),o=P-1,f--;break;case 1:for(F=0,R=Math.pow(2,16),v=1;v!=R;)E=b.val&b.position,b.position>>=1,b.position==0&&(b.position=g,b.val=A(b.index++)),F|=(E>0?1:0)*v,v<<=1;k[P++]=n(F),o=P-1,f--;break;case 2:return J.join("")}if(f==0&&(f=Math.pow(2,W),W++),k[o])H=k[o];else if(o===P)H=U+U.charAt(0);else return null;J.push(H),k[P++]=U+H.charAt(0),f--,U=H,f==0&&(f=Math.pow(2,W),W++)}}};return z}();e!=null?e.exports=t:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return t})}(He)),He.exports}var Qt=Ht();const Qe=Dt(Qt);var Jt=Oe`
    .p-tag {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        background: dt('tag.primary.background');
        color: dt('tag.primary.color');
        font-size: dt('tag.font.size');
        font-weight: dt('tag.font.weight');
        padding: dt('tag.padding');
        border-radius: dt('tag.border.radius');
        gap: dt('tag.gap');
    }

    .p-tag-icon {
        font-size: dt('tag.icon.size');
        width: dt('tag.icon.size');
        height: dt('tag.icon.size');
    }

    .p-tag-rounded {
        border-radius: dt('tag.rounded.border.radius');
    }

    .p-tag-success {
        background: dt('tag.success.background');
        color: dt('tag.success.color');
    }

    .p-tag-info {
        background: dt('tag.info.background');
        color: dt('tag.info.color');
    }

    .p-tag-warn {
        background: dt('tag.warn.background');
        color: dt('tag.warn.color');
    }

    .p-tag-danger {
        background: dt('tag.danger.background');
        color: dt('tag.danger.color');
    }

    .p-tag-secondary {
        background: dt('tag.secondary.background');
        color: dt('tag.secondary.color');
    }

    .p-tag-contrast {
        background: dt('tag.contrast.background');
        color: dt('tag.contrast.color');
    }
`,Gt={root:function(t){var n=t.props;return["p-tag p-component",{"p-tag-info":n.severity==="info","p-tag-success":n.severity==="success","p-tag-warn":n.severity==="warn","p-tag-danger":n.severity==="danger","p-tag-secondary":n.severity==="secondary","p-tag-contrast":n.severity==="contrast","p-tag-rounded":n.rounded}]},icon:"p-tag-icon",label:"p-tag-label"},Zt=_e.extend({name:"tag",style:Jt,classes:Gt}),Xt={name:"BaseTag",extends:Ce,props:{value:null,severity:null,rounded:Boolean,icon:String},style:Zt,provide:function(){return{$pcTag:this,$parentInstance:this}}};function Te(e){"@babel/helpers - typeof";return Te=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Te(e)}function Yt(e,t,n){return(t=ea(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ea(e){var t=ta(e,"string");return Te(t)=="symbol"?t:t+""}function ta(e,t){if(Te(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var _=n.call(e,t);if(Te(_)!="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ke={name:"Tag",extends:Xt,inheritAttrs:!1,computed:{dataP:function(){return Ee(Yt({rounded:this.rounded},this.severity,this.severity))}}},aa=["data-p"];function sa(e,t,n,_,h,d){return l(),y("span",X({class:e.cx("root"),"data-p":d.dataP},e.ptmi("root")),[e.$slots.icon?(l(),Z(xe(e.$slots.icon),X({key:0,class:e.cx("icon")},e.ptm("icon")),null,16,["class"])):e.icon?(l(),y("span",X({key:1,class:[e.cx("icon"),e.icon]},e.ptm("icon")),null,16)):M("",!0),e.value!=null||e.$slots.default?be(e.$slots,"default",{key:2},function(){return[a("span",X({class:e.cx("label")},e.ptm("label")),p(e.value),17)]}):M("",!0)],16,aa)}ke.render=sa;var na=Oe`
    .p-avatar {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: dt('avatar.width');
        height: dt('avatar.height');
        font-size: dt('avatar.font.size');
        background: dt('avatar.background');
        color: dt('avatar.color');
        border-radius: dt('avatar.border.radius');
    }

    .p-avatar-image {
        background: transparent;
    }

    .p-avatar-circle {
        border-radius: 50%;
    }

    .p-avatar-circle img {
        border-radius: 50%;
    }

    .p-avatar-icon {
        font-size: dt('avatar.icon.size');
        width: dt('avatar.icon.size');
        height: dt('avatar.icon.size');
    }

    .p-avatar img {
        width: 100%;
        height: 100%;
    }

    .p-avatar-lg {
        width: dt('avatar.lg.width');
        height: dt('avatar.lg.width');
        font-size: dt('avatar.lg.font.size');
    }

    .p-avatar-lg .p-avatar-icon {
        font-size: dt('avatar.lg.icon.size');
        width: dt('avatar.lg.icon.size');
        height: dt('avatar.lg.icon.size');
    }

    .p-avatar-xl {
        width: dt('avatar.xl.width');
        height: dt('avatar.xl.width');
        font-size: dt('avatar.xl.font.size');
    }

    .p-avatar-xl .p-avatar-icon {
        font-size: dt('avatar.xl.icon.size');
        width: dt('avatar.xl.icon.size');
        height: dt('avatar.xl.icon.size');
    }

    .p-avatar-group {
        display: flex;
        align-items: center;
    }

    .p-avatar-group .p-avatar + .p-avatar {
        margin-inline-start: dt('avatar.group.offset');
    }

    .p-avatar-group .p-avatar {
        border: 2px solid dt('avatar.group.border.color');
    }

    .p-avatar-group .p-avatar-lg + .p-avatar-lg {
        margin-inline-start: dt('avatar.lg.group.offset');
    }

    .p-avatar-group .p-avatar-xl + .p-avatar-xl {
        margin-inline-start: dt('avatar.xl.group.offset');
    }
`,oa={root:function(t){var n=t.props;return["p-avatar p-component",{"p-avatar-image":n.image!=null,"p-avatar-circle":n.shape==="circle","p-avatar-lg":n.size==="large","p-avatar-xl":n.size==="xlarge"}]},label:"p-avatar-label",icon:"p-avatar-icon"},ia=_e.extend({name:"avatar",style:na,classes:oa}),la={name:"BaseAvatar",extends:Ce,props:{label:{type:String,default:null},icon:{type:String,default:null},image:{type:String,default:null},size:{type:String,default:"normal"},shape:{type:String,default:"square"},ariaLabelledby:{type:String,default:null},ariaLabel:{type:String,default:null}},style:ia,provide:function(){return{$pcAvatar:this,$parentInstance:this}}};function De(e){"@babel/helpers - typeof";return De=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},De(e)}function ct(e,t,n){return(t=ra(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ra(e){var t=ua(e,"string");return De(t)=="symbol"?t:t+""}function ua(e,t){if(De(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var _=n.call(e,t);if(De(_)!="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Me={name:"Avatar",extends:la,inheritAttrs:!1,emits:["error"],methods:{onError:function(t){this.$emit("error",t)}},computed:{dataP:function(){return Ee(ct(ct({},this.shape,this.shape),this.size,this.size))}}},ca=["aria-labelledby","aria-label","data-p"],da=["data-p"],fa=["data-p"],pa=["src","alt","data-p"];function va(e,t,n,_,h,d){return l(),y("div",X({class:e.cx("root"),"aria-labelledby":e.ariaLabelledby,"aria-label":e.ariaLabel},e.ptmi("root"),{"data-p":d.dataP}),[be(e.$slots,"default",{},function(){return[e.label?(l(),y("span",X({key:0,class:e.cx("label")},e.ptm("label"),{"data-p":d.dataP}),p(e.label),17,da)):e.$slots.icon?(l(),Z(xe(e.$slots.icon),{key:1,class:ce(e.cx("icon"))},null,8,["class"])):e.icon?(l(),y("span",X({key:2,class:[e.cx("icon"),e.icon]},e.ptm("icon"),{"data-p":d.dataP}),null,16,fa)):e.image?(l(),y("img",X({key:3,src:e.image,alt:e.ariaLabel,onError:t[0]||(t[0]=function(){return d.onError&&d.onError.apply(d,arguments)})},e.ptm("image"),{"data-p":d.dataP}),null,16,pa)):M("",!0)]})],16,ca)}Me.render=va;const ha={class:"grid"},ma={key:0,class:"col-12 sm:col-12 md:col-6 lg:col-4 border-round surface-section shadow-1 p-2"},ba={class:"flex flex-column"},ga=["onClick"],ya={class:"p-1 flex-shrink-0 w-7rem h-7rem flex align-items-center justify-content-center overflow-hidden"},_a=["src","alt"],wa={class:"flex flex-column justify-content-center"},ka={class:"font-bold"},xa={class:"flex flex-wrap gap-2"},$a={class:"flex gap-1 align-items-center"},Ta={class:"text-color-secondary line2"},Da={key:0,class:"text-xl font-bold text-primary"},Ca={key:1,class:"flex align-items-center gap-1"},Ia={class:"text-l font-bold text-color-secondary"},Sa={class:"text-sm line-through text-500"},Aa={key:2,class:"flex gap-2 mr-2",id:"card-quantity"},Na={class:"w-2rem text-xl text-center"},Ba={key:3,class:"flex gap-2 mr-2"},La={key:0,class:"m-2 mt-0"},Pa={class:"flex flex-row justify-content-between align-content-center"},qa={class:"flex flex-column"},za={class:"text-l font-bold"},Ma={key:0,class:"text-l font-bold text-color-secondary"},Oa={key:1,class:"flex align-items-center gap-1"},Ea={class:"text-l font-bold text-color-secondary"},Ra={class:"text-sm line-through text-500"},ja={key:0,class:"flex ml-2 mr-2"},Va={class:"w-2rem text-xl text-center"},Fa={key:1,class:"flex gap-2 mr-3 pt-2 pb-2"},Wa={class:"mb-2 flex justify-content-center"},Ua={class:"font-bold text-center"},Ka={class:"mb-2"},Ha={class:"text-color-secondary m-0 line-height-3 line2 text-center"},Qa={class:"mb-2"},Ja={class:"flex justify-content-center"},Ga=["src","alt"],Za={class:"flex align-items-center gap-2"},Xa=["src","alt"],Ya={class:"flex align-items-center gap-3 ml-auto"},es={__name:"DishList",props:{rateDish:{type:Function,required:!0},likedItemsRef:Array,dislikedItemsRef:Array,tabIndex:Number,onlyVeg:Boolean},setup(e){const{t}=de(),n=ee.dishDatas,_=q(null),h=e,d=(o,b=!0)=>{if(!h.onlyVeg)return!0;if(b)return o.vegetable;if(o.subItems.length>0){for(const T of o.subItems)if(T.vegetable)return!0}else return o.dish.vegetable;return!1};$e(()=>{let o=L.getOrderMenuTab()[h.tabIndex];if(L.customDishAPI.customDishes.value.map(x=>x.name),L.getMenu().length==0){console.log("exit");return}_.value=n.value[T(n.value,o)].mainDishes,ee.showDishList(_.value);function T(x,N){for(const r in x)if(x[r].name==N)return r;console.error("Can not find tab index in menu")}});let c={rated:!1,id:null,like:0,rate:0};const z=o=>ee.dishDatas.value[o]?ee.dishDatas.value[o].quantity:0,s=o=>{if(!A())return!1;const b=o.quantity;let T=3;if(o.price>0&&(T=9),o.limit){const x=o.id,N=A(),r=(N.peopleType.adults+N.peopleType.children)*o.limit,$=N.order.find(D=>D.dishid==x);let w=0;if(o.subitem)for(const D of o.subitem){w+=z(D);const B=N.order.find(te=>te.dishid==g(D));B&&(w+=B.quantity)}else w+=o.quantity,$&&(w+=$.quantity);return b>=T||r&&w>=r}return b>=T},g=o=>ee.dishDatas.value[o]?ee.dishDatas.value[o].id:0,A=()=>L.getTableValue(),k=o=>{let b="absolute origin-top-left mt-1 ml-1 border-round-lg pl-1 pr-1 text-xs text-white font-bold ";switch(o){case"new":b+="bg-red-600";break;case"recommended":case"special":b+="bg-orange-600";break;default:b+="bg-blue-600"}return b};function f(o){h.rateDish(c.id,c.like,c.rate,c.rated),W(o,c.rate,c.like),c.id=null,c.like=0,c.rate=0,c.rated=!1}const P=o=>{const b=h.likedItemsRef.indexOf(o);if(c.id=o.id,b!==-1)h.likedItemsRef.splice(b,1),c.like+=-1,c.rate+=-1,c.rated=!1;else{c.rated=!0,h.likedItemsRef.push(o);const T=h.dislikedItemsRef.indexOf(o);T!==-1?(h.dislikedItemsRef.splice(T,1),c.like+=1):(c.like+=1,c.rate+=1)}f(o)};function W(o,b=0,T=0){o.rates=(o.rates||0)+b,o.likes=(o.likes||0)+T}const H=o=>{const b=h.dislikedItemsRef.indexOf(o);if(c.id=o.id,b!==-1)h.dislikedItemsRef.splice(b,1),c.rate+=-1,c.rated=!1;else{c.rated=!0,h.dislikedItemsRef.push(o);const T=h.likedItemsRef.indexOf(o);T!==-1?(h.likedItemsRef.splice(T,1),c.like+=-1):c.rate+=1}f(o)},J=q(!1),O=q({}),U=o=>{J.value=!0,O.value=o},F=o=>{o.target.src="/images/default.png"};function E(o){v(o.target,300)}function R(o){v(o.target,110)}function v(o,b){const T=o.naturalWidth,x=o.naturalHeight,N=Math.min(T,b),r=N/T,$=x*r;o.style.width=`${N}px`,o.style.height=`${$}px`}return(o,b)=>(l(),y(G,null,[a("div",ha,[(l(!0),y(G,null,oe(_.value,(T,x)=>{var N;return l(),y(G,{key:x},[d(T,!1)?(l(),y("div",ma,[a("div",ba,[a("div",{class:ce(["flex flex-row",T.subItems.length!==0?"flex-grow-1":""]),onClick:r=>U(T.dish)},[((N=T.dish.etiquette)==null?void 0:N.length)>0?(l(),y("div",{key:0,class:ce(k(T.dish.etiquette))},p(i(t)("common.etiquette."+T.dish.etiquette)),3)):M("",!0),a("div",ya,[a("img",{src:T.dish.image||"/images/default.png",alt:T.dish.name,class:"w-full h-full",style:{"object-fit":"cover"},onError:F,onLoad:R},null,40,_a)]),a("div",wa,[a("div",ka,p(T.dish.name),1),a("div",null,[a("div",xa,[a("div",$a,[(l(),y(G,null,oe(5,r=>a("i",{key:r,class:ce(["pi invert-star",r<=Math.floor(T.dish.likes/T.dish.rates*5)?"pi-star-fill":r-.5<=T.dish.likes/T.dish.rates*5?"pi-star-half-fill":"pi-star"]),style:{color:"black"}},null,2)),64)),a("p",null,"("+p(T.dish.rates?T.dish.rates:0)+")",1)])])]),a("div",null,[a("p",Ta,p(T.dish.note),1)])])],10,ga),T.subItems.length==0?(l(),y("div",{key:0,class:ce(["flex ml-2 mr-2 mb-2",Number(T.dish.price)>0?"justify-content-between":"justify-content-end"])},[!T.dish.discount&&Number(T.dish.price)>0?(l(),y("span",Da,"â‚¬"+p(T.dish.price),1)):M("",!0),T.dish.discount?(l(),y("div",Ca,[a("span",Ia,"â‚¬"+p(T.dish.dis_price),1),a("span",Sa,"â‚¬"+p(T.dish.price),1),S(i(ke),{severity:"danger",value:"-"+T.dish.discount+"%"},null,8,["value"])])):M("",!0),T.dish.soldout?M("",!0):(l(),y("div",Aa,[S(i(Q),{icon:"pi pi-minus",rounded:"",disabled:T.dish.quantity<=0,onClick:r=>T.dish.quantity--,class:"w-2rem h-2rem"},null,8,["disabled","onClick"]),a("span",Na,p(T.dish.quantity),1),S(i(Q),{icon:"pi pi-plus",rounded:"",disabled:s(T.dish),onClick:r=>T.dish.quantity++,class:"w-2rem h-2rem"},null,8,["disabled","onClick"])])),T.dish.soldout?(l(),y("div",Ba,[S(i(ke),{severity:"danger",value:o.$t("common.soldout")},null,8,["value"])])):M("",!0)],2)):M("",!0),T.subItems.length!==0?(l(!0),y(G,{key:1},oe(T.subItems,(r,$)=>(l(),y(G,{key:"index"},[!r.disable&&d(r)?(l(),y("div",La,[a("div",Pa,[a("div",qa,[a("span",za,p(r.subname),1),!r.discount&&r.price!=="0.00"&&r.price!=="0"?(l(),y("span",Ma,"â‚¬"+p(r.price),1)):M("",!0),r.discount?(l(),y("div",Oa,[a("span",Ea,"â‚¬"+p(r.dis_price),1),a("span",Ra,"â‚¬"+p(r.price),1),S(i(ke),{severity:"danger",value:"-"+r.discount+"%"},null,8,["value"])])):M("",!0)]),r.soldout?M("",!0):(l(),y("div",ja,[S(i(Q),{icon:"pi pi-minus",rounded:"",disabled:r.quantity<=0,onClick:w=>r.quantity--,class:"w-2rem h-2rem"},null,8,["disabled","onClick"]),a("span",Va,p(r.quantity),1),S(i(Q),{icon:"pi pi-plus",rounded:"",onClick:w=>r.quantity++,class:"w-2rem h-2rem",disabled:s(r)},null,8,["onClick","disabled"])])),r.soldout?(l(),y("div",Fa,[S(i(ke),{severity:"danger",value:o.$t("common.soldout")},null,8,["value"])])):M("",!0)])])):M("",!0)],64))),128)):M("",!0)])])):M("",!0)],64)}),128))]),S(i(he),{visible:J.value,"onUpdate:visible":b[2]||(b[2]=T=>J.value=T),modal:"",header:" ",style:qe([{width:"23rem"},{width:"80vw","max-width":"700px"}]),pt:{header:{class:"p-1"}}},{default:V(()=>[a("div",Wa,[a("span",Ua,p(O.value.name),1)]),a("div",Ka,[a("span",Ha,p(O.value.note),1)]),a("div",Qa,[a("div",Ja,[a("img",{class:"w-full h-auto object-contain",src:O.value.image,alt:O.value.name,onError:F,onLoad:E},null,40,Ga)])]),a("div",Za,[(l(!0),y(G,null,oe(O.value.allergies,(T,x)=>(l(),y("img",{src:"images/"+T+".png",alt:T,class:"w-2rem h-2rem border-round flex-shrink-0",style:{"object-fit":"cover","min-width":"2rem"}},null,8,Xa))),256)),a("div",Ya,[a("button",{onClick:b[0]||(b[0]=T=>P(O.value)),class:"p-0 border-none bg-transparent cursor-pointer"},[a("i",{class:ce(["pi pi-thumbs-up text-xl",h.likedItemsRef.includes(O.value)?"text-green-500":"text-gray-400"])},null,2)]),a("button",{onClick:b[1]||(b[1]=T=>H(O.value)),class:"p-0 border-none bg-transparent cursor-pointer"},[a("i",{class:ce(["pi pi-thumbs-down text-xl",h.dislikedItemsRef.includes(O.value)?"text-red-500":"text-gray-400"])},null,2)])])])]),_:1},8,["visible"])],64))}},ts=Ie(es,[["__scopeId","data-v-e1c6bd92"]]),as={key:0,class:"text-3xl font-bold"},ss={class:"flex flex-column gap-3 p-1"},ns={key:0,class:"flex flex-column gap-1"},os={key:0,class:"m-0"},is={key:0,class:"m-0"},ls={class:"flex justify-content-between gap-4 mt-1"},rs={class:"flex align-items-center gap-2"},us=["src","alt"],cs={class:"flex-grow-1 min-width-0 max-w-18rem"},ds={class:"flex flex-column gap-1"},fs={class:"flex align-items-center gap-2"},ps={class:"text-xl font-bold line1 whitespace-nowrap overflow-hidden text-overflow-ellipsis",style:{"max-width":"20rem"}},vs={class:"flex align-items-end gap-1"},hs={key:0,class:"text-xl font-bold text-primary"},ms={key:1,class:"text-xl font-bold text-primary"},bs={key:2,class:"text-sm text-color-secondary"},gs={key:0,class:"text-xs text-primary"},ys={class:"flex-shrink-0 flex flex-wrap justify-content-between align-items-center gap-1"},_s={class:"flex flex-wrap justify-content-between align-content-center"},ws={class:"flex align-items-center gap-1"},ks={class:"w-2rem text-center"},xs={key:1,class:"flex flex-column gap-2 mt-2"},$s={for:"in_label"},Ts={for:"in_label"},Ds={class:"bottom-0 left-0 mt-2"},Cs={class:"text-2xl font-bold"},Is={class:"text-2xl font-bold text-primary pl-2"},Ss={class:"flex justify-content-between"},As={__name:"Cart",props:{checkout:{type:Function,required:!0},isTakeaway:Boolean},setup(e,{expose:t}){const{locale:n}=de(),_=ft(),{t:h}=de(),d=re.cartDishs,c=q([]),z=q(),s=q(),g=q(!1),A=q(!1),k=q(!0),f=q(""),P=q("");function W(w,D,B){let te="";const j=n.value,Y=L.customDishAPI.getCustomDishByName(w);for(const se of B){const fe=Y.types[D].dishes.find(pe=>pe.dishid===se.id)[`name_${j}`];te=te+fe+"/"}return te}function H(w,D){const B=n.value;return L.customDishAPI.getCustomDishByName(w).types[D][`typeName_${B}`]}const J=(w,D)=>{const B=c.value[w].quantity+D;B>=0&&(c.value[w].quantity=B)};function O(w){w&&z.value&&(z.value.dishNote=s.value?s.value:void 0),A.value=!1}function U(){s.value&&(s.value=void 0),z.value&&(z.value=void 0)}function F(w){z.value=w,s.value=z.value.dishNote?z.value.dishNote:void 0,A.value=!0}const E=e;t({showDishList:w=>{g.value=!0,c.value.length=0;for(let D=0;D<w.length;D++)c.value.push(w[D]);k.value=c.value.length==0&&d.length==0}});function v(w){re.removeItem(w)}function o(){E.isTakeaway?b():T()}function b(){const w=[];d.value.forEach(D=>{w.push(D)}),c.value.forEach(D=>{D.quantity>0&&w.push(D)}),w.length<=0?ne.show_warn(h("notification.select_at_least_one")):(g.value=!1,_.push({path:"/paymentPage"}))}function T(){E.checkout({name:f.value,note:P.value},w=>{w.success&&(d.value.forEach(D=>{D.dishNote=void 0}),c.value.forEach(D=>{D.dishNote=void 0}),P.value="",ee.cleanDishDataQty(),ve.deleteCookie("cartDish_normal"),re.cleanAll(),ve.deleteCookie("cartDish_custom"))})&&(g.value=!1)}function x(w){return w.subname!=""&&w.subname!="Default Title"?w.name+" "+w.subname:w.name}function N(){let w=0;return d.value.forEach(D=>{w+=D.discount?(D.dis_price?D.dis_price:0)*D.count:(D.price?D.price:0)*D.count}),c.value.forEach(D=>{w+=D.discount?(D.dis_price?D.dis_price:0)*D.quantity:(D.price?D.price:0)*D.quantity}),"â‚¬"+w.toFixed(2)}const r=w=>{w.target.src="/images/default.png"},$=w=>{const D=w.quantity;let B=3;return w.price>0&&(B=9),D>=B};return(w,D)=>(l(),y(G,null,[S(i(he),{class:"bg-primary-reverse text-sm md:text-lg lg:text-xl",visible:g.value,"onUpdate:visible":D[2]||(D[2]=B=>g.value=B),modal:"",header:w.$t("common.cart"),style:qe([{backgroundColor:"rgba(250, 250, 250, 1)",height:"100%",minWidth:"24rem"},{width:"80vw","max-width":"700px"}]),dismissableMask:!0},{footer:V(()=>[a("div",Ds,[a("span",Cs,p(w.$t("common.total"))+": ",1),a("span",Is,p(N()),1),S(i(Q),{icon:e.isTakeaway?"pi pi-wallet":"pi pi-plus",class:"p-button-success p-button-rounded ml-3",onClick:o,label:e.isTakeaway?i(h)("common.pay"):i(h)("common.send")},null,8,["icon","label"])])]),default:V(()=>[k.value?(l(),y("h2",as,"Cart is empty.")):M("",!0),a("div",ss,[(l(!0),y(G,null,oe(i(d),(B,te)=>(l(),Z(i(Rt),{style:{overflow:"hidden"},key:te},{title:V(()=>[ye(p(w.$t(`common.${B.name}`)),1)]),subtitle:V(()=>[ye(p(w.$t("common.price"))+" : "+p(B.price)+"â‚¬",1)]),content:V(()=>[i(L).customDishAPI.customDishes.value.find(j=>j.name==B.name)?(l(),y("div",ns,[(l(!0),y(G,null,oe(B.notesAndId,(j,Y)=>(l(),y("div",null,[B.notesAndId[Y].length!==0?(l(),y("span",os,p(H(B.name,Y))+": "+p(W(B.name,Y,j)),1)):M("",!0)]))),256)),a("div",null,[B.dishNote?(l(),y("span",is,p(w.$t("common.note"))+": "+p(B.dishNote),1)):M("",!0)])])):M("",!0)]),footer:V(()=>[a("div",ls,[e.isTakeaway?M("",!0):(l(),Z(i(Q),{key:0,label:i(h)("common.edit")+" "+i(h)("common.note"),severity:"contrast",onClick:j=>F(B)},null,8,["label","onClick"])),S(i(Q),{label:i(h)("common.remove"),severity:"danger",onClick:j=>v(B)},null,8,["label","onClick"])])]),_:2},1024))),128)),(l(!0),y(G,null,oe(c.value,(B,te)=>(l(),y("div",{key:te,class:"p-2 border-round shadow-1 transition-all transition-duration-200 hover:shadow-3 flex flex-column gap-1"},[a("div",rs,[a("img",{src:B.image,alt:B.name,class:"w-4rem h-4rem border-round flex-shrink-0",onError:r,style:{"object-fit":"cover","min-width":"4rem"}},null,40,us),a("div",cs,[a("div",ds,[a("div",fs,[a("span",ps,p(x(B)),1)])]),a("div",vs,[B.discount?(l(),y("span",hs,"â‚¬"+p(Number(B.dis_price?B.dis_price:0).toFixed(2)),1)):M("",!0),B.discount?M("",!0):(l(),y("span",ms,"â‚¬"+p(Number(B.price?B.price:0).toFixed(2)),1)),B.price>0?(l(),y("span",bs,"/uni.")):M("",!0)])])]),a("div",null,[B.dishNote?(l(),y("span",gs,p(i(h)("common.note")+": "+B.dishNote),1)):M("",!0)]),a("div",ys,[a("div",_s,[e.isTakeaway?M("",!0):(l(),Z(i(Q),{key:0,label:i(h)("common.edit")+" "+i(h)("common.note"),severity:"contrast",class:"w-3.5rem h-2rem",onClick:j=>F(B)},null,8,["label","onClick"]))]),a("div",ws,[S(i(Q),{icon:"pi pi-minus",rounded:"",disabled:B.quantity<=0,onClick:j=>J(te,-1),class:"w-2rem h-2rem"},null,8,["disabled","onClick"]),a("span",ks,p(B.quantity),1),S(i(Q),{icon:"pi pi-plus",rounded:"",disabled:$(B),onClick:j=>J(te,1),class:"w-2rem h-2rem"},null,8,["disabled","onClick"])])])]))),128))]),e.isTakeaway?M("",!0):(l(),y("div",xs,[S(i(rt),{variant:"in"},{default:V(()=>[S(i(et),{id:"in_label",modelValue:f.value,"onUpdate:modelValue":D[0]||(D[0]=B=>f.value=B),variant:"filled",maxlength:"20"},null,8,["modelValue"]),a("label",$s,p(i(h)("common.name")),1)]),_:1}),S(i(rt),{variant:"in"},{default:V(()=>[S(i(nt),{id:"in_label",class:"min-w-full",rows:"5",modelValue:P.value,"onUpdate:modelValue":D[1]||(D[1]=B=>P.value=B),variant:"filled",maxlength:"200"},null,8,["modelValue"]),a("label",Ts,p(i(h)("common.observation")),1)]),_:1})]))]),_:1},8,["visible","header"]),S(i(he),{visible:A.value,"onUpdate:visible":D[6]||(D[6]=B=>A.value=B),header:i(h)("common.note"),onHide:D[7]||(D[7]=B=>U()),modal:"",dismissableMask:!0},{default:V(()=>[S(i(nt),{modelValue:s.value,"onUpdate:modelValue":D[3]||(D[3]=B=>s.value=B),rows:"5",cols:"30",placeholder:i(h)("common.edit")+" "+i(h)("common.note")+"...",maxlength:"100"},null,8,["modelValue","placeholder"]),a("div",Ss,[S(i(Q),{label:i(h)("common.cancel"),severity:"danger",onClick:D[4]||(D[4]=B=>O(!1))},null,8,["label"]),S(i(Q),{label:i(h)("common.save"),severity:"primary",size:"sm",onClick:D[5]||(D[5]=B=>O(!0))},null,8,["label"])])]),_:1},8,["visible","header"])],64))}},Ns=Ie(As,[["__scopeId","data-v-0e3055df"]]);var Bs=Oe`
    .p-overlaybadge {
        position: relative;
    }

    .p-overlaybadge .p-badge {
        position: absolute;
        inset-block-start: 0;
        inset-inline-end: 0;
        transform: translate(50%, -50%);
        transform-origin: 100% 0;
        margin: 0;
        outline-width: dt('overlaybadge.outline.width');
        outline-style: solid;
        outline-color: dt('overlaybadge.outline.color');
    }

    .p-overlaybadge .p-badge:dir(rtl) {
        transform: translate(-50%, -50%);
    }
`,Ls={root:"p-overlaybadge"},Ps=_e.extend({name:"overlaybadge",style:Bs,classes:Ls}),qs={name:"OverlayBadge",extends:ht,style:Ps,provide:function(){return{$pcOverlayBadge:this,$parentInstance:this}}},mt={name:"OverlayBadge",extends:qs,inheritAttrs:!1,components:{Badge:ht}};function zs(e,t,n,_,h,d){var c=It("Badge");return l(),y("div",X({class:e.cx("root")},e.ptmi("root")),[be(e.$slots,"default"),S(c,X(e.$props,{pt:e.ptm("pcBadge")}),null,16,["pt"])],16)}mt.render=zs;q([]);q("iniImages()");const Ms={class:"m-3"},Os={class:"flex flex-column gap-2"},Es={class:"w-full flex justify-content-center"},Rs={key:0,class:"max-w-19rem"},js=["src"],Vs={style:{width:"300px",height:"300px",background:"url(/boxImage/box.png)"}},Fs={key:0,class:"flex align-items-center justify-content-center text-4xl font-bold text-white w-full h-full"},Ws={key:1,class:"grid m-0 p-2"},Us=["onClick"],Ks={class:"flex align-items-center justify-content-center font-bold m-0 p-0",style:{width:"94px",height:"94px"}},Hs=["src"],Qs={class:"flex flex-wrap justify-content-between align-items-center m-1"},Js={class:"flex gap-1 align-items-center"},Gs={key:0},Zs={class:"font-bold mb-2"},Xs={key:1,class:"flex justify-content-between gap-2 mt-3"},Ys={class:"font-bold mb-2"},en={class:"flex mr-2"},tn={class:"w-3rem text-xl text-center"},an={class:"font-bold block mb-2"},sn={class:"flex flex-wrap"},nn={key:2,class:"flex flex-wrap gap-2 mt-3"},on={class:"font-bold block mb-2"},ln={class:"font-bold block mb-2 text-center"},rn={class:"flex flex-wrap gap-2 mt-3"},un={__name:"CustomDish",props:{currentCustomDish:Object,tabindex:Number},emits:["typeClick"],setup(e,{emit:t}){const{locale:n}=de(),_=e,h=St(),{t:d}=de(),c=q(null);me(()=>_.currentCustomDish,x=>{x&&(c.value=x)},{immediate:!0,deep:!0});const z=ue(()=>c.boxImages),s=q(0),g=ue(()=>{var N;if(c.value==null)return 0;let x=(N=c.value)==null?void 0:N.initialPrice;for(const r of c.value.types??[])for(const $ of r.dishes??[])$.selected&&(x+=$.price);return Number(x).toFixed(2)}),A=t,k=q(null),f=ue(()=>{const x=n.value,N=`title_${x}`,r=`description_${x}`;return c.value==null?{}:c.value.descriptions.map($=>({title:$[N],descriptions:$.descriptions.map(w=>w[r]),image:$==null?void 0:$.image}))}),P=ue(()=>{var r,$;const x=Number(((r=c.value)==null?void 0:r.like)??0),N=Number((($=c.value)==null?void 0:$.rate)??0);return N?x/N*5:0});function W(x,N){const r=n.value;return x[`${N}_${r}`]}function H(x,N,r){const $=x[N];if($.selected){$.selected=!1;return}else{const D=x.filter(B=>B.selected).length;if(r===1){o(x),$.selected=!0;return}D<r&&($.selected=!0)}}function J(x,N,r){const $=x.dishes;A("typeClick",x,N,$[N].selected),H($,N,r)}function O(x){return x.selected}function U(){if(!b(c.value.types))return;const x=E(c.value.types),N=R(c.value.types);re.addItem({dishid:-1,name:c.value.name,category:_.currentCustomDish.category,count:s.value!==0?s.value:1,price:g.value,notes:x,notesAndId:N}),console.log("CART: ",re.cartDishs),v(c.value.types),ne.show({severity:"info",summary:"info",detail:d("customDishBibimbapVue.addToCartSuccessBibimbap")})}function F(x){return!x||!x.dishes?"":x.dishes.filter(r=>r.selected).map(r=>r.name).join(",")}function E(x){return x?x.map(N=>F(N)):[]}function R(x){return x?x.map(N=>N.dishes?N.dishes.filter(r=>r.selected).map(r=>({id:r.dishid,name:r.name})):[]):[]}function v(x){x&&x.forEach(N=>{N.dishes&&N.dishes.forEach(r=>{r.selected=!1})})}function o(x){x.forEach(N=>N.selected=!1)}function b(x){if(c.value.options.quantity&&s.value<=0)return ne.show({severity:"warn",detail:d("notification.quantity_must_be_positive")}),!1;for(const N of x)if(N.dishes.filter($=>$.selected).length<N.minQuantity){const $=N.typeName;return ne.show({severity:"warn",detail:d("notification.select_type_of",{name:$})}),!1}return!0}function T(x){x?L.customDishAPI.like(c.value.id)&&(k.value="like",h.add({severity:"success",summary:d("common.success"),detail:d("common.rate")+" "+d("common.success"),life:750})):L.customDishAPI.unLike(c.value.id)&&(k.value="unlike",h.add({severity:"success",summary:d("common.success"),detail:d("common.rate")+" "+d("common.success"),life:750}))}return(x,N)=>{var r,$,w,D,B,te;return l(),y("div",Ms,[a("div",Os,[S(i(Ye),{class:"w-full max-w-xl mx-auto"},{default:V(()=>[(l(!0),y(G,null,oe(f.value,(j,Y)=>(l(),Z(i(Ge),{key:Y,value:Y},{default:V(()=>[S(i(Ze),null,{default:V(()=>[ye(p(j.title),1)]),_:2},1024),S(i(Xe),null,{default:V(()=>{var se;return[(l(!0),y(G,null,oe(j.descriptions,(fe,pe)=>(l(),y("p",{key:pe},p(fe),1))),128)),a("div",Es,[(se=j.image)!=null&&se.src?(l(),y("div",Rs,[a("img",{src:j.image.src,class:"w-full"},null,8,js)])):M("",!0)])]}),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1}),(($=(r=c.value)==null?void 0:r.value)==null?void 0:$.name)==="MY BOX"?(l(),Z(i(Ye),{key:0,class:"w-full max-w-xl mx-auto"},{default:V(()=>[S(i(Ge),{value:"0"},{default:V(()=>[S(i(Ze),null,{default:V(()=>[ye(" ðŸ¥© "+p(x.$t("common.showMybox")),1)]),_:1}),S(i(Xe),null,{default:V(()=>[a("div",Vs,[x.isEmptyArray(z.value)?(l(),y("div",Fs,p(x.$t("common.myboxAlarm")),1)):M("",!0),x.isEmptyArray(z.value)?M("",!0):(l(),y("div",Ws,[(l(!0),y(G,null,oe(z.value,j=>(l(),y("div",{class:"col-4 p-0",onClick:Y=>x.imageSelectAction(j)},[a("div",Ks,[j?(l(),y("img",{key:0,class:"m-0 p-0",src:x.imagePath(j),style:{width:"82px",height:"82px"}},null,8,Hs)):M("",!0)])],8,Us))),256))]))])]),_:1})]),_:1})]),_:1})):M("",!0)]),a("div",Qs,[a("div",Js,[(l(),y(G,null,oe(5,j=>a("i",{key:j,class:ce(["pi invert-star",j<=Math.floor(P.value)?"pi-star-fill":j-.5<=P.value?"pi-star-half":"pi-star"]),style:{color:"black"}},null,2)),64)),a("p",null,"("+p((w=c.value)!=null&&w.rate?c.value.rate:0)+")",1)]),a("div",null,[S(i(Q),{text:"",icon:"pi pi-thumbs-up",severity:k.value==="like"?"success":"",onClick:N[0]||(N[0]=j=>T(!0))},null,8,["severity"]),S(i(Q),{text:"",icon:"pi pi-thumbs-down",severity:k.value==="unlike"?"danger":"",onClick:N[1]||(N[1]=j=>T(!1))},null,8,["severity"])])]),(D=c.value)!=null&&D.options.extraInfo?(l(),y("div",Gs,[a("label",Zs,p(c.value.options.extraInfo),1)])):M("",!0),(B=c.value)!=null&&B.options.quantity?(l(),y("div",Xs,[a("div",null,[a("label",Ys,p(x.$t("common.quantity"))+" / "+p(x.$t("common.pieces")),1)]),a("div",en,[S(i(Q),{icon:"pi pi-minus",disabled:s.value<=0,onClick:N[2]||(N[2]=j=>{var Y;return s.value-=(Y=c.value)==null?void 0:Y.options.quantitySetp}),class:"w-2rem h-2rem"},null,8,["disabled"]),a("span",tn,p(s.value),1),S(i(Q),{icon:"pi pi-plus",disabled:s.value>=c.value.options.maxQuantity,onClick:N[3]||(N[3]=j=>{var Y;return s.value+=(Y=c.value)==null?void 0:Y.options.quantitySetp}),class:"w-2rem h-2rem"},null,8,["disabled"])])])):M("",!0),(l(!0),y(G,null,oe((te=c.value)==null?void 0:te.types,(j,Y)=>(l(),y("div",{key:j.id},[ze(a("div",null,[a("label",an,p(Y+1)+". "+p(W(j,"typeName")),1),a("div",sn,[(l(!0),y(G,null,oe(j.dishes,(se,fe)=>(l(),Z(i(Q),{key:fe,onClick:pe=>J(j,fe,s.value==0?j.maxQuantity:j.maxQuantity*s.value),class:ce([{"p-button-primary":O(se),"p-button-outlined":!O(se)},"m-1"])},{default:V(()=>[a("p",{class:ce({"text-gray-700":!O(se)})},p(W(se,"name")),3)]),_:2},1032,["onClick","class"]))),128))])],512),[[At,j.enable]])]))),128)),e.currentCustomDish.initialPrice!==0?(l(),y("div",nn,[a("label",on,p(x.$t("common.price"))+":",1),a("label",ln,p(g.value+"â‚¬"),1)])):M("",!0),a("div",rn,[S(i(Q),{icon:"pi pi-shopping-cart",onClick:N[4]||(N[4]=j=>U()),label:x.$t("common.addToCart"),class:"m-3",severity:"primary",raised:""},null,8,["label"])])])}}},cn=Ie(un,[["__scopeId","data-v-e37fc872"]]);var dn=Oe`
    .p-tabs {
        display: flex;
        flex-direction: column;
    }

    .p-tablist {
        display: flex;
        position: relative;
    }

    .p-tabs-scrollable > .p-tablist {
        overflow: hidden;
    }

    .p-tablist-viewport {
        overflow-x: auto;
        overflow-y: hidden;
        scroll-behavior: smooth;
        scrollbar-width: none;
        overscroll-behavior: contain auto;
    }

    .p-tablist-viewport::-webkit-scrollbar {
        display: none;
    }

    .p-tablist-tab-list {
        position: relative;
        display: flex;
        background: dt('tabs.tablist.background');
        border-style: solid;
        border-color: dt('tabs.tablist.border.color');
        border-width: dt('tabs.tablist.border.width');
    }

    .p-tablist-content {
        flex-grow: 1;
    }

    .p-tablist-nav-button {
        all: unset;
        position: absolute !important;
        flex-shrink: 0;
        inset-block-start: 0;
        z-index: 2;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        background: dt('tabs.nav.button.background');
        color: dt('tabs.nav.button.color');
        width: dt('tabs.nav.button.width');
        transition:
            color dt('tabs.transition.duration'),
            outline-color dt('tabs.transition.duration'),
            box-shadow dt('tabs.transition.duration');
        box-shadow: dt('tabs.nav.button.shadow');
        outline-color: transparent;
        cursor: pointer;
    }

    .p-tablist-nav-button:focus-visible {
        z-index: 1;
        box-shadow: dt('tabs.nav.button.focus.ring.shadow');
        outline: dt('tabs.nav.button.focus.ring.width') dt('tabs.nav.button.focus.ring.style') dt('tabs.nav.button.focus.ring.color');
        outline-offset: dt('tabs.nav.button.focus.ring.offset');
    }

    .p-tablist-nav-button:hover {
        color: dt('tabs.nav.button.hover.color');
    }

    .p-tablist-prev-button {
        inset-inline-start: 0;
    }

    .p-tablist-next-button {
        inset-inline-end: 0;
    }

    .p-tablist-prev-button:dir(rtl),
    .p-tablist-next-button:dir(rtl) {
        transform: rotate(180deg);
    }

    .p-tab {
        flex-shrink: 0;
        cursor: pointer;
        user-select: none;
        position: relative;
        border-style: solid;
        white-space: nowrap;
        gap: dt('tabs.tab.gap');
        background: dt('tabs.tab.background');
        border-width: dt('tabs.tab.border.width');
        border-color: dt('tabs.tab.border.color');
        color: dt('tabs.tab.color');
        padding: dt('tabs.tab.padding');
        font-weight: dt('tabs.tab.font.weight');
        transition:
            background dt('tabs.transition.duration'),
            border-color dt('tabs.transition.duration'),
            color dt('tabs.transition.duration'),
            outline-color dt('tabs.transition.duration'),
            box-shadow dt('tabs.transition.duration');
        margin: dt('tabs.tab.margin');
        outline-color: transparent;
    }

    .p-tab:not(.p-disabled):focus-visible {
        z-index: 1;
        box-shadow: dt('tabs.tab.focus.ring.shadow');
        outline: dt('tabs.tab.focus.ring.width') dt('tabs.tab.focus.ring.style') dt('tabs.tab.focus.ring.color');
        outline-offset: dt('tabs.tab.focus.ring.offset');
    }

    .p-tab:not(.p-tab-active):not(.p-disabled):hover {
        background: dt('tabs.tab.hover.background');
        border-color: dt('tabs.tab.hover.border.color');
        color: dt('tabs.tab.hover.color');
    }

    .p-tab-active {
        background: dt('tabs.tab.active.background');
        border-color: dt('tabs.tab.active.border.color');
        color: dt('tabs.tab.active.color');
    }

    .p-tabpanels {
        background: dt('tabs.tabpanel.background');
        color: dt('tabs.tabpanel.color');
        padding: dt('tabs.tabpanel.padding');
        outline: 0 none;
    }

    .p-tabpanel:focus-visible {
        box-shadow: dt('tabs.tabpanel.focus.ring.shadow');
        outline: dt('tabs.tabpanel.focus.ring.width') dt('tabs.tabpanel.focus.ring.style') dt('tabs.tabpanel.focus.ring.color');
        outline-offset: dt('tabs.tabpanel.focus.ring.offset');
    }

    .p-tablist-active-bar {
        z-index: 1;
        display: block;
        position: absolute;
        inset-block-end: dt('tabs.active.bar.bottom');
        height: dt('tabs.active.bar.height');
        background: dt('tabs.active.bar.background');
        transition: 250ms cubic-bezier(0.35, 0, 0.25, 1);
    }
`,fn={root:function(t){var n=t.props;return["p-tabs p-component",{"p-tabs-scrollable":n.scrollable}]}},pn=_e.extend({name:"tabs",style:dn,classes:fn}),vn={name:"BaseTabs",extends:Ce,props:{value:{type:[String,Number],default:void 0},lazy:{type:Boolean,default:!1},scrollable:{type:Boolean,default:!1},showNavigators:{type:Boolean,default:!0},tabindex:{type:Number,default:0},selectOnFocus:{type:Boolean,default:!1}},style:pn,provide:function(){return{$pcTabs:this,$parentInstance:this}}},bt={name:"Tabs",extends:vn,inheritAttrs:!1,emits:["update:value"],data:function(){return{d_value:this.value}},watch:{value:function(t){this.d_value=t}},methods:{updateValue:function(t){this.d_value!==t&&(this.d_value=t,this.$emit("update:value",t))},isVertical:function(){return this.orientation==="vertical"}}};function hn(e,t,n,_,h,d){return l(),y("div",X({class:e.cx("root")},e.ptmi("root")),[be(e.$slots,"default")],16)}bt.render=hn;var mn={root:"p-tablist",content:function(t){var n=t.instance;return["p-tablist-content",{"p-tablist-viewport":n.$pcTabs.scrollable}]},tabList:"p-tablist-tab-list",activeBar:"p-tablist-active-bar",prevButton:"p-tablist-prev-button p-tablist-nav-button",nextButton:"p-tablist-next-button p-tablist-nav-button"},bn=_e.extend({name:"tablist",classes:mn}),gn={name:"BaseTabList",extends:Ce,props:{},style:bn,provide:function(){return{$pcTabList:this,$parentInstance:this}}},gt={name:"TabList",extends:gn,inheritAttrs:!1,inject:["$pcTabs"],data:function(){return{isPrevButtonEnabled:!1,isNextButtonEnabled:!0}},resizeObserver:void 0,watch:{showNavigators:function(t){t?this.bindResizeObserver():this.unbindResizeObserver()},activeValue:{flush:"post",handler:function(){this.updateInkBar()}}},mounted:function(){var t=this;setTimeout(function(){t.updateInkBar()},150),this.showNavigators&&(this.updateButtonState(),this.bindResizeObserver())},updated:function(){this.showNavigators&&this.updateButtonState()},beforeUnmount:function(){this.unbindResizeObserver()},methods:{onScroll:function(t){this.showNavigators&&this.updateButtonState(),t.preventDefault()},onPrevButtonClick:function(){var t=this.$refs.content,n=this.getVisibleButtonWidths(),_=Ue(t)-n,h=Math.abs(t.scrollLeft),d=_*.8,c=h-d,z=Math.max(c,0);t.scrollLeft=it(t)?-1*z:z},onNextButtonClick:function(){var t=this.$refs.content,n=this.getVisibleButtonWidths(),_=Ue(t)-n,h=Math.abs(t.scrollLeft),d=_*.8,c=h+d,z=t.scrollWidth-_,s=Math.min(c,z);t.scrollLeft=it(t)?-1*s:s},bindResizeObserver:function(){var t=this;this.resizeObserver=new ResizeObserver(function(){return t.updateButtonState()}),this.resizeObserver.observe(this.$refs.list)},unbindResizeObserver:function(){var t;(t=this.resizeObserver)===null||t===void 0||t.unobserve(this.$refs.list),this.resizeObserver=void 0},updateInkBar:function(){var t=this.$refs,n=t.content,_=t.inkbar,h=t.tabs;if(_){var d=Je(n,'[data-pc-name="tab"][data-p-active="true"]');this.$pcTabs.isVertical()?(_.style.height=Bt(d)+"px",_.style.top=Be(d).top-Be(h).top+"px"):(_.style.width=Lt(d)+"px",_.style.left=Be(d).left-Be(h).left+"px")}},updateButtonState:function(){var t=this.$refs,n=t.list,_=t.content,h=_.scrollTop,d=_.scrollWidth,c=_.scrollHeight,z=_.offsetWidth,s=_.offsetHeight,g=Math.abs(_.scrollLeft),A=[Ue(_),Nt(_)],k=A[0],f=A[1];this.$pcTabs.isVertical()?(this.isPrevButtonEnabled=h!==0,this.isNextButtonEnabled=n.offsetHeight>=s&&parseInt(h)!==c-f):(this.isPrevButtonEnabled=g!==0,this.isNextButtonEnabled=n.offsetWidth>=z&&parseInt(g)!==d-k)},getVisibleButtonWidths:function(){var t=this.$refs,n=t.prevButton,_=t.nextButton,h=0;return this.showNavigators&&(h=((n==null?void 0:n.offsetWidth)||0)+((_==null?void 0:_.offsetWidth)||0)),h}},computed:{templates:function(){return this.$pcTabs.$slots},activeValue:function(){return this.$pcTabs.d_value},showNavigators:function(){return this.$pcTabs.scrollable&&this.$pcTabs.showNavigators},prevButtonAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.previous:void 0},nextButtonAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.next:void 0},dataP:function(){return Ee({scrollable:this.$pcTabs.scrollable})}},components:{ChevronLeftIcon:Wt,ChevronRightIcon:Ut},directives:{ripple:pt}},yn=["data-p"],_n=["aria-label","tabindex"],wn=["data-p"],kn=["aria-orientation"],xn=["aria-label","tabindex"];function $n(e,t,n,_,h,d){var c=vt("ripple");return l(),y("div",X({ref:"list",class:e.cx("root"),"data-p":d.dataP},e.ptmi("root")),[d.showNavigators&&h.isPrevButtonEnabled?ze((l(),y("button",X({key:0,ref:"prevButton",type:"button",class:e.cx("prevButton"),"aria-label":d.prevButtonAriaLabel,tabindex:d.$pcTabs.tabindex,onClick:t[0]||(t[0]=function(){return d.onPrevButtonClick&&d.onPrevButtonClick.apply(d,arguments)})},e.ptm("prevButton"),{"data-pc-group-section":"navigator"}),[(l(),Z(xe(d.templates.previcon||"ChevronLeftIcon"),X({"aria-hidden":"true"},e.ptm("prevIcon")),null,16))],16,_n)),[[c]]):M("",!0),a("div",X({ref:"content",class:e.cx("content"),onScroll:t[1]||(t[1]=function(){return d.onScroll&&d.onScroll.apply(d,arguments)}),"data-p":d.dataP},e.ptm("content")),[a("div",X({ref:"tabs",class:e.cx("tabList"),role:"tablist","aria-orientation":d.$pcTabs.orientation||"horizontal"},e.ptm("tabList")),[be(e.$slots,"default"),a("span",X({ref:"inkbar",class:e.cx("activeBar"),role:"presentation","aria-hidden":"true"},e.ptm("activeBar")),null,16)],16,kn)],16,wn),d.showNavigators&&h.isNextButtonEnabled?ze((l(),y("button",X({key:1,ref:"nextButton",type:"button",class:e.cx("nextButton"),"aria-label":d.nextButtonAriaLabel,tabindex:d.$pcTabs.tabindex,onClick:t[2]||(t[2]=function(){return d.onNextButtonClick&&d.onNextButtonClick.apply(d,arguments)})},e.ptm("nextButton"),{"data-pc-group-section":"navigator"}),[(l(),Z(xe(d.templates.nexticon||"ChevronRightIcon"),X({"aria-hidden":"true"},e.ptm("nextIcon")),null,16))],16,xn)),[[c]]):M("",!0)],16,yn)}gt.render=$n;var Tn={root:function(t){var n=t.instance,_=t.props;return["p-tab",{"p-tab-active":n.active,"p-disabled":_.disabled}]}},Dn=_e.extend({name:"tab",classes:Tn}),Cn={name:"BaseTab",extends:Ce,props:{value:{type:[String,Number],default:void 0},disabled:{type:Boolean,default:!1},as:{type:[String,Object],default:"BUTTON"},asChild:{type:Boolean,default:!1}},style:Dn,provide:function(){return{$pcTab:this,$parentInstance:this}}},yt={name:"Tab",extends:Cn,inheritAttrs:!1,inject:["$pcTabs","$pcTabList"],methods:{onFocus:function(){this.$pcTabs.selectOnFocus&&this.changeActiveValue()},onClick:function(){this.changeActiveValue()},onKeydown:function(t){switch(t.code){case"ArrowRight":this.onArrowRightKey(t);break;case"ArrowLeft":this.onArrowLeftKey(t);break;case"Home":this.onHomeKey(t);break;case"End":this.onEndKey(t);break;case"PageDown":this.onPageDownKey(t);break;case"PageUp":this.onPageUpKey(t);break;case"Enter":case"NumpadEnter":case"Space":this.onEnterKey(t);break}},onArrowRightKey:function(t){var n=this.findNextTab(t.currentTarget);n?this.changeFocusedTab(t,n):this.onHomeKey(t),t.preventDefault()},onArrowLeftKey:function(t){var n=this.findPrevTab(t.currentTarget);n?this.changeFocusedTab(t,n):this.onEndKey(t),t.preventDefault()},onHomeKey:function(t){var n=this.findFirstTab();this.changeFocusedTab(t,n),t.preventDefault()},onEndKey:function(t){var n=this.findLastTab();this.changeFocusedTab(t,n),t.preventDefault()},onPageDownKey:function(t){this.scrollInView(this.findLastTab()),t.preventDefault()},onPageUpKey:function(t){this.scrollInView(this.findFirstTab()),t.preventDefault()},onEnterKey:function(t){this.changeActiveValue(),t.preventDefault()},findNextTab:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,_=n?t:t.nextElementSibling;return _?Le(_,"data-p-disabled")||Le(_,"data-pc-section")==="activebar"?this.findNextTab(_):Je(_,'[data-pc-name="tab"]'):null},findPrevTab:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,_=n?t:t.previousElementSibling;return _?Le(_,"data-p-disabled")||Le(_,"data-pc-section")==="activebar"?this.findPrevTab(_):Je(_,'[data-pc-name="tab"]'):null},findFirstTab:function(){return this.findNextTab(this.$pcTabList.$refs.tabs.firstElementChild,!0)},findLastTab:function(){return this.findPrevTab(this.$pcTabList.$refs.tabs.lastElementChild,!0)},changeActiveValue:function(){this.$pcTabs.updateValue(this.value)},changeFocusedTab:function(t,n){qt(n),this.scrollInView(n)},scrollInView:function(t){var n;t==null||(n=t.scrollIntoView)===null||n===void 0||n.call(t,{block:"nearest"})}},computed:{active:function(){var t;return Pt((t=this.$pcTabs)===null||t===void 0?void 0:t.d_value,this.value)},id:function(){var t;return"".concat((t=this.$pcTabs)===null||t===void 0?void 0:t.$id,"_tab_").concat(this.value)},ariaControls:function(){var t;return"".concat((t=this.$pcTabs)===null||t===void 0?void 0:t.$id,"_tabpanel_").concat(this.value)},attrs:function(){return X(this.asAttrs,this.a11yAttrs,this.ptmi("root",this.ptParams))},asAttrs:function(){return this.as==="BUTTON"?{type:"button",disabled:this.disabled}:void 0},a11yAttrs:function(){return{id:this.id,tabindex:this.active?this.$pcTabs.tabindex:-1,role:"tab","aria-selected":this.active,"aria-controls":this.ariaControls,"data-pc-name":"tab","data-p-disabled":this.disabled,"data-p-active":this.active,onFocus:this.onFocus,onKeydown:this.onKeydown}},ptParams:function(){return{context:{active:this.active}}},dataP:function(){return Ee({active:this.active})}},directives:{ripple:pt}};function In(e,t,n,_,h,d){var c=vt("ripple");return e.asChild?be(e.$slots,"default",{key:1,dataP:d.dataP,class:ce(e.cx("root")),active:d.active,a11yAttrs:d.a11yAttrs,onClick:d.onClick}):ze((l(),Z(xe(e.as),X({key:0,class:e.cx("root"),"data-p":d.dataP,onClick:d.onClick},d.attrs),{default:V(function(){return[be(e.$slots,"default")]}),_:3},16,["class","data-p","onClick"])),[[c]])}yt.render=In;const Sn={class:"flex flex-column gap-3"},An={class:"flex flex-column gap-2"},Nn={for:"email"},Bn={class:"flex flex-column gap-2"},Ln={for:"password"},Pn={key:0,class:"text-red-500 text-sm"},qn={class:"flex justify-content-end gap-2"},zn={__name:"LoginDialog",props:{visible:{type:Boolean,default:!1}},emits:["update:visible","login-success"],setup(e,{emit:t}){const{t:n}=de(),_=e,h=t,d=q(""),c=q(""),z=q(!1),s=q("");me(()=>_.visible,f=>{f&&g()});function g(){d.value="",c.value="",s.value="",z.value=!1}function A(){h("update:visible",!1),g()}async function k(){if(!d.value||!c.value){s.value=n("common.auth.emailPasswordRequired");return}z.value=!0,s.value="";try{const f=await L.login(d.value,c.value);f.success?(h("login-success"),h("update:visible",!1)):s.value=f.error||n("common.auth.loginFailed")}catch(f){s.value=n("common.auth.loginFailed"),console.error("Login error:",f)}finally{z.value=!1}}return(f,P)=>(l(),Z(i(he),{visible:e.visible,"onUpdate:visible":P[2]||(P[2]=W=>f.$emit("update:visible",W)),header:f.$t("common.auth.login"),modal:!0,dismissableMask:!0,style:{width:"90vw",maxWidth:"25rem"},onHide:g},{footer:V(()=>[a("div",qn,[S(i(Q),{label:f.$t("common.cancel"),severity:"secondary",onClick:A,disabled:z.value},null,8,["label","disabled"]),S(i(Q),{label:f.$t("common.auth.login"),onClick:k,loading:z.value},null,8,["label","loading"])])]),default:V(()=>[a("div",Sn,[a("div",An,[a("label",Nn,p(f.$t("common.auth.email")),1),S(i(et),{id:"email",modelValue:d.value,"onUpdate:modelValue":P[0]||(P[0]=W=>d.value=W),type:"email",placeholder:f.$t("common.auth.emailPlaceholder"),class:"w-full",disabled:z.value},null,8,["modelValue","placeholder","disabled"])]),a("div",Bn,[a("label",Ln,p(f.$t("common.auth.password")),1),S(i(jt),{id:"password",modelValue:c.value,"onUpdate:modelValue":P[1]||(P[1]=W=>c.value=W),placeholder:f.$t("common.auth.passwordPlaceholder"),feedback:!1,toggleMask:"",class:"w-full",disabled:z.value,onKeyup:zt(k,["enter"]),fluid:""},null,8,["modelValue","placeholder","disabled"])]),s.value?(l(),y("div",Pn,p(s.value),1)):M("",!0)])]),_:1},8,["visible","header"]))}},Mn={key:0,class:"flex flex-column gap-4"},On={class:"flex justify-content-center"},En={class:"flex flex-column gap-3"},Rn={class:"flex flex-column gap-1"},jn={class:"text-sm text-color-secondary"},Vn={class:"text-lg font-semibold"},Fn={class:"flex flex-column gap-1"},Wn={class:"text-sm text-color-secondary"},Un={class:"text-lg"},Kn={class:"flex flex-column gap-1"},Hn={class:"text-sm text-color-secondary"},Qn={class:"text-lg"},Jn={key:0,class:"flex flex-column gap-1"},Gn={class:"text-sm text-color-secondary"},Zn={class:"text-sm text-color-secondary"},Xn={__name:"UserInfoDialog",props:{visible:{type:Boolean,default:!1},user:{type:Object,default:null}},emits:["update:visible"],setup(e,{emit:t}){const{t:n}=de(),_=e,h=t,d=q(!1),c=ue(()=>{var g;if(!((g=_.user)!=null&&g.avatar_url))return null;const s=_.user.avatar_url;return s&&(s.startsWith("http://")||s.startsWith("https://")||s.startsWith("/"))?s:null});me(()=>_.user,s=>{if(d.value=!1,s!=null&&s.avatar_url&&c.value){const g=new Image;g.onload=()=>{d.value=!1},g.onerror=()=>{d.value=!0,console.warn("Avatar image failed to load:",s.avatar_url)},g.src=c.value}},{immediate:!0});function z(){h("update:visible",!1)}return(s,g)=>(l(),Z(i(he),{visible:e.visible,"onUpdate:visible":g[0]||(g[0]=A=>s.$emit("update:visible",A)),header:s.$t("common.auth.userInfo"),modal:!0,dismissableMask:!0,style:{width:"90vw",maxWidth:"30rem"}},{footer:V(()=>[S(i(Q),{label:s.$t("common.cancel"),severity:"secondary",onClick:z},null,8,["label"])]),default:V(()=>[e.user?(l(),y("div",Mn,[a("div",On,[S(i(Me),{image:c.value&&!d.value?c.value:void 0,shape:"circle",size:"xlarge",class:"mb-3"},null,8,["image"])]),a("div",En,[a("div",Rn,[a("label",jn,p(s.$t("common.auth.displayName")),1),a("div",Vn,p(e.user.display_name||"-"),1)]),a("div",Fn,[a("label",Wn,p(s.$t("common.auth.email")),1),a("div",Un,p(e.user.email||"-"),1)]),a("div",Kn,[a("label",Hn,p(s.$t("common.auth.role")),1),a("div",Qn,p(e.user.role||"-"),1)]),e.user.id?(l(),y("div",Jn,[a("label",Gn,p(s.$t("common.auth.userId")),1),a("div",Zn,p(e.user.id),1)])):M("",!0)])])):M("",!0)]),_:1},8,["visible","header"]))}},Yn={class:"fixed top-0 left-0 w-full bg-primary-reverse",style:{"z-index":"10"}},eo={class:"grid mt-1 ml-1"},to={class:"h-3rem w-3rem flex align-items-center"},ao=["src"],so={class:"flex align-items-center"},no={key:0,class:"text-color font-bold p-1"},oo={key:1,class:"text-color font-bold p-1"},io={class:"card flex mr-3 flex align-items-center gap-2",style:{"margin-left":"auto"}},lo={key:0},ro={key:1},uo={style:{display:"flex","align-items":"center"}},co={style:{"flex-grow":"1",width:"0",overflow:"hidden"}},fo={class:"mt-2"},po={class:"flex justify-content-end mt-2"},vo={class:"flex inline-flex items-center justify-center gap-2"},ho={class:"flex align-items-center"},mo={class:"flex flex-column"},bo={class:"text-sm p-2"},go={class:"text-sm p-2"},yo={class:"flex items-center gap-4 mb-4 p-2"},_o={class:"flex flex-column gap-3"},wo={__name:"HeaderTabs",props:{types:Array,typeIndex:Number,tableId:String,tabItems:Array},emits:["clickType","switchToWelcome"],setup(e,{emit:t}){const{t:n}=de(),_=q(!1),h=q(!1),d=q(!1),c=q(""),z=q(),s=q(!1),g=ue(()=>L.isAuthenticated()),A=ue(()=>L.authUser.value),k=ue(()=>{var $;if(!(($=A.value)!=null&&$.avatar_url))return null;const r=A.value.avatar_url;return r&&(r.startsWith("http://")||r.startsWith("https://")||r.startsWith("/"))?r:null});me(A,r=>{if(s.value=!1,r!=null&&r.avatar_url&&k.value){const $=new Image;$.onload=()=>{s.value=!1},$.onerror=()=>{s.value=!0,console.warn("Avatar image failed to load:",r.avatar_url)},$.src=k.value}},{immediate:!0});function f(){return L.getTable()}$e(async()=>{c.value=await Mt()});const P=q(),W=ue(()=>[{label:n("common.options"),items:[{label:n("common.pay"),icon:"pi pi-wallet",command:()=>{R()}},{label:n("common.call"),icon:"pi pi-user-plus",command:()=>{L.send_cmd(f(),{cmd:"call"},r=>{r.success?ne.show_info(n("notification.call_msg")):ne.show_warn(r.data)})}}]}]),H=r=>{P.value.toggle(r)},J=r=>{O.value.toggle(r)},O=q(),U=q(!1),F=q(),E=q();function R(){U.value=!0}function v(){r(F.value)?L.send_cmd(f(),{cmd:"pay",nif:F.value,note:E.value},$=>{$.success?(ne.show_info(n("notification.pay_msg")),U.value=!1):ne.show_error(n("common.failed"))}):ne.show_warn(n("notification.cancel_msg"));function r($){return!$||$.toString().length===9||$.toString().length===0}}function o(){E.value&&(E.value=void 0)}function b(){_.value=!0}const T=ue(()=>[{label:n("common.auth.userInfo"),icon:"pi pi-user",command:()=>{d.value=!0}},{separator:!0},{label:n("common.auth.logout"),icon:"pi pi-sign-out",command:()=>{L.logout(),ne.show_info(n("common.auth.logoutSuccess"))}}]);function x(r){z.value.toggle(r)}function N(){var r;h.value=!1,ne.show_info(n("common.auth.loginSuccess")),console.log("Login success, user:",L.authUser.value),console.log("Avatar URL:",(r=L.authUser.value)==null?void 0:r.avatar_url)}return(r,$)=>(l(),y(G,null,[a("div",Yn,[a("div",eo,[a("div",to,[a("img",{src:c.value,class:"h-full w-full",onClick:$[0]||($[0]=()=>r.$emit("switchToWelcome"))},null,8,ao)]),a("div",so,[e.tableId?(l(),y("p",no,p(r.$t("common.table"))+": "+p(e.tableId),1)):M("",!0),e.tableId?M("",!0):(l(),y("p",oo,p(r.$t("common.takeAway")),1))]),a("div",io,[g.value?A.value?(l(),y("div",ro,[S(i(Me),{image:k.value,shape:"circle",size:"large",onClick:x,style:{cursor:"pointer"}},null,8,["image"]),S(i(Ke),{ref_key:"userMenu",ref:z,id:"user_menu",model:T.value,popup:!0},null,8,["model"])])):M("",!0):(l(),y("div",lo,[S(i(Q),{label:i(n)("common.auth.login"),icon:"pi pi-sign-in",onClick:$[1]||($[1]=w=>h.value=!0)},null,8,["label"])])),e.tableId?(l(),Z(i(Q),{key:2,icon:"pi pi-bell",rounded:"","aria-label":"Filter",onClick:H,"aria-haspopup":"true","aria-controls":"overlay_menu"})):(l(),Z(i(Q),{key:3,icon:"pi pi-question",rounded:"",onClick:b})),S(i(Ke),{ref_key:"menu",ref:P,id:"overlay_menu",model:W.value,popup:!0},null,8,["model"])])]),a("div",uo,[a("div",null,[S(i(Q),{icon:"pi pi-bars",variant:"text",rounded:"","aria-label":"Filter",onClick:J,"aria-haspopup":"true","aria-controls":"tab_menu"}),S(i(Ke),{ref_key:"tabMenu",ref:O,id:"tab_menu",model:e.tabItems,popup:!0},null,8,["model"])]),a("div",co,[S(i(bt),{value:e.typeIndex,scrollable:"",showNavigators:!1},{default:V(()=>[S(i(gt),null,{default:V(()=>[(l(!0),y(G,null,oe(e.types,(w,D)=>(l(),Z(i(yt),{value:D,onClick:()=>r.$emit("clickType",D),class:"text-sm md:text-lg lg:text-xl"},{default:V(()=>[ye(p(w),1)]),_:2},1032,["value","onClick"]))),256))]),_:1})]),_:1},8,["value"])])])]),S(i(he),{visible:U.value,"onUpdate:visible":$[5]||($[5]=w=>U.value=w),header:"ç»“è´¦",class:"flex flex-column",modal:!0,dismissableMask:!0,onHide:o},{default:V(()=>[a("div",null,[$[9]||($[9]=a("label",null,"NIF:",-1)),S(i(Kt),{modelValue:F.value,"onUpdate:modelValue":$[2]||($[2]=w=>F.value=w),inputId:"withoutgrouping",useGrouping:!1,fluid:"",class:"w-full m-1"},null,8,["modelValue"])]),a("div",fo,[a("label",null,p(r.$t("common.note"))+":",1),S(i(et),{type:"text",modelValue:E.value,"onUpdate:modelValue":$[3]||($[3]=w=>E.value=w),class:"w-full m-1"},null,8,["modelValue"])]),a("div",po,[S(i(Q),{label:i(n)("common.send"),onClick:$[4]||($[4]=w=>v())},null,8,["label"])])]),_:1},8,["visible"]),S(i(he),{visible:_.value,"onUpdate:visible":$[6]||($[6]=w=>_.value=w),modal:"",dismissableMask:"",class:"h-full",style:{width:"90vw",maxWidth:"40rem",minWidth:"20rem"},draggable:!1},{header:V(()=>[a("div",vo,[S(i(Me),{icon:"pi pi-question",shape:"circle"}),a("span",ho,p(i(n)("takeawayHelper.dialogTitle")),1)])]),default:V(()=>[a("div",mo,[a("span",bo,p(i(n)("takeawayHelper.introduction")),1),a("span",go,p(i(n)("takeawayHelper.note_t"))+" "+p(i(n)("takeawayHelper.note_1")),1),a("div",yo,[S(i(Ye),{class:"w-full max-w-xl mx-auto"},{default:V(()=>[S(i(Ge),{value:"0"},{default:V(()=>[S(i(Ze),{class:"text-sm"},{default:V(()=>[ye(p(i(n)("takeawayHelper.question_1")),1)]),_:1}),S(i(Xe),{class:"p-1"},{default:V(()=>[a("div",_o,[a("span",null,p(i(n)("takeawayHelper.q_1_request_1")),1),a("span",null,p(i(n)("takeawayHelper.q_1_request_2")),1),a("span",null,p(i(n)("takeawayHelper.q_1_request_3")),1),a("span",null,p(i(n)("takeawayHelper.q_1_request_4")),1),a("span",null,p(i(n)("takeawayHelper.q_1_request_5")),1)])]),_:1})]),_:1})]),_:1})])])]),_:1},8,["visible"]),S(zn,{visible:h.value,"onUpdate:visible":$[7]||($[7]=w=>h.value=w),onLoginSuccess:N},null,8,["visible"]),S(Xn,{visible:d.value,"onUpdate:visible":$[8]||($[8]=w=>d.value=w),user:A.value},null,8,["visible","user"])],64))}},ko={__name:"SwipeHint",props:{size:{type:String,default:"8rem"},duration:{type:Number,default:6e3},position:{type:String,default:"bottom"}},setup(e){const t=e,n=q(!0);$e(()=>{t.duration>0&&setTimeout(()=>{n.value=!1},t.duration);const h=()=>{n.value=!1,window.removeEventListener("touchstart",h)};window.addEventListener("touchstart",h)});const _=ue(()=>{let h={left:"50%",transform:"translateX(-50%)",zIndex:99999,opacity:.5,pointerEvents:"none",textAlign:"center",position:"fixed"};return t.position==="top"?h.top="15%":t.position==="center"?(h.top="50%",h.transform="translate(-50%, -50%)"):h.bottom="15%",h});return(h,d)=>n.value?(l(),y("div",{key:0,class:"swipe-hint",style:qe(_.value)},[a("div",{class:"hand",style:qe({width:e.size,height:e.size,backgroundImages:"url(/images/hand_finger.png)"})},null,4)],4)):M("",!0)}},xo=Ie(ko,[["__scopeId","data-v-30a48de8"]]),$o={class:"w-full h-full flex flex-column p-1"},To={class:"swiper-container-wrapper"},Do={class:"fixed bottom-0 left-0 w-full h-3rem bg-primary-reverse p-3 z-[9999]"},Co={class:"h-full flex align-items-center justify-content-between w-full"},Io={class:"m-2"},So={class:"m-2"},Ao={class:"m-2"},No={style:{"max-height":"60vh","overflow-y":"auto","padding-bottom":"60px"}},Bo={class:"flex flex-column border-bottom-1"},Lo={key:0,class:"flex justify-content-between"},Po={class:"flex flex-column"},qo={class:"font-bold"},zo={class:"text-right"},Mo={key:1,class:"flex justify-content-between"},Oo={class:"flex flex-column"},Eo={class:"font-bold"},Ro={class:"text-right"},jo={key:0},Vo={key:1,class:"flex flex-column"},Fo={class:"flex flex-column"},Wo={class:"font-bold"},Uo={class:"text-right"},Ko={class:"total-footer bg-primary-reverse"},dt=5,Pe="order_time_key",Ho={__name:"HomePage",setup(e){const t=ft(),n=Et(),{t:_}=de(),{locale:h}=de(),d=q(0),c=q(!1),z=q([""]),s=q(0),g=re.cartItemCount,A=q(!1),k=q([]),f=q(0),P=q({}),W=q(!1),H=ee.dishDatas,J=q(L.getOrderMenuTab()),O=q(null),U=q(null),F=q([]),E=q([]),R=q([]),v=q(!1);let o=null;const b=u=>{s.value=u.activeIndex,Re()},T=u=>{o=u};me(s,u=>{o&&o.activeIndex!==u&&o.slideTo(u);let m=L.getOrderMenuTab()[u];L.customDishAPI.customDishes.value.map(I=>I.name).includes(m)?(W.value=!0,P.value=L.customDishAPI.customDishes.value.find(I=>I.name==m)):W.value=!1});const x=(u,m,C,I)=>{L.rateDish(u,m,C),I&&ne.show_success(_("notification.rating_submitted"))},N=(u,m,C)=>{if(P.value.name=="XIAOXIONGÂ® RAMEN"&&u.id===1){const I=u.dishes[m];let K;I.dishid==47?C?K=r(3,!0,1):K=r(3,!1,1):K=r(3,!0,1),K!==void 0&&$(K)}if(P.value.name=="Menu AlmoÃ§o"&&u.id===3){const I=u.dishes[m];let K;[1427,41].includes(I.dishid)?C?K=r(4,!0,0):K=r(4,!1,0):K=r(4,!0,0),K!==void 0&&$(K)}};function r(u,m,C){if(P.value={...P.value,types:P.value.types.map(I=>I.id===u?{...I,enable:m,minQuantity:m?C:0}:I)},m===!1)return u}function $(u){!P.value||!Array.isArray(P.value.types)||(P.value={...P.value,types:P.value.types.map(m=>m.id===u?{...m,dishes:m.dishes.map(C=>({...C,selected:!1}))}:m)})}function w(u){let m=L.getOrderMenuTab()[u];if(L.customDishAPI.customDishes.value.map(ae=>ae.name).includes(m)?(W.value=!0,P.value=L.customDishAPI.customDishes.value.find(ae=>ae.name==m)):W.value=!1,L.getMenu().length==0){console.log("exit");return}let K=H.value[u].mainDishes;ee.showDishList(K)}const D=()=>{L.refreshTableFromServer(),L.getTableTotalAmount(f),A.value=!0},B=u=>{let m=u.id;u.org_id&&(m=u.org_id);for(let C=0;C<H.value.length;C++)if(H.value[C].id==m)for(const I in u){let K=I;I.startsWith("note")&&(K=K.replace("note","description")),H.value[C][K]=u[I]}};function te(){return new Promise(u=>{let m=()=>{const C=L.formatedMenu.value;C.length>0?u(C):setTimeout(m,200)};m()})}function j(){return new Promise(u=>{let m=()=>{const C=L.getOrderMenuTab();C.length>0?u(C):setTimeout(m,200)};m()})}const Y=ue(()=>u=>{const m=L.dictinaryAPI.dictinary.value.find(C=>C.refName===u);return m?m[`text_${h.value.toLowerCase()}`]:u});me([()=>L.formatedMenu.value,()=>h.value],([u,m])=>{if(!u||u.length===0){R.value=[];return}const C={};L.orderMenuTab.value;const I=u.map(ge=>({...ge,mainDishes:ge.dishes.map(ie=>{const le=ie.dish;if(C[le.id])return C[le.id];const we={...le,defaultName:le.name,defaultSubname:le.subname,name:se(le,"name",m),note:se(le,"note",m),subname:se(le,"subname",m),quantity:0},Fe=ie.subItems.map(st=>{const Ne=st;return{...st,defaultName:le.name,defaultSubname:Ne.subname,name:se(Ne,"name",m),note:se(Ne,"note",m),subname:se(Ne,"subname",m),quantity:0}}),We={...ie,dish:we,subItems:Fe};return C[We.id]=We,We})}));H.value.length;const K=ee.getAllIncrementedDish();ee.getIdsAndQuantity(K);const ae=re.cartDishs.value;Qe.compressToEncodedURIComponent(JSON.stringify(ae)),R.value=I,H.value=R.value,z.value=L.orderMenuTab.value,(K.length>0||ae.length>0)&&(ee.cleanDishDataQty(),ee.updateDishDataQty(K)),L.filterMenuTabs(v.value),console.log("languagedMenu updated via watch:",R.value),lt(()=>{d.value++,o&&typeof o.updateDictionaryWord=="function"&&(o.updateDictionaryWord(),o.slideTo(s.value))})},{immediate:!0,deep:!0}),me(()=>L.orderMenuTab.value,u=>{J.value=u.map(m=>{const C=L.dictinaryAPI.dictinary.value.find(I=>I.refName===m);return C?C[`text_${h.value.toLowerCase()}`]:m}),k.value=pe(u),s.value=0}),$e(()=>{const u=L.orderMenuTab.value;J.value=u.map(m=>{const C=L.dictinaryAPI.dictinary.value.find(I=>I.refName===m);return C?C[`text_${h.value.toLowerCase()}`]:m}),k.value=pe(u),s.value=0});function se(u,m,C){return u?C==="en"?u[`${m}_en`]||u[m]:C==="zh"&&u[`${m}_cn`]||u[m]:""}async function fe(){await te();const u=await j();L.onMenuItemChanged=B,Tt(),k.value=pe(u)}function pe(u){const m=[];for(let C=0;C<u.length;C++){const I=C;m.push({label:Y.value(u[C]),command:()=>{tt(I),Re()}})}return m}const Re=()=>{lt(()=>{const u=document.querySelector(".p-tablist-viewport"),m=document.querySelector(".p-tab.p-tab-active");if(u&&m){const C=m.offsetLeft-u.offsetWidth/2+m.offsetWidth/2;u.scrollTo({left:C,behavior:"smooth"})}window.scrollTo({top:0,behavior:"smooth"})})},tt=u=>{w(u),s.value=u,Re()},_t=()=>{var u=ee.getAllIncrementedDish();U.value.showDishList(u)};function je(){return L.getTable()}L.params.port,O.value=L.table.value.order;function wt(u){var m=_("notification.too_fast",{remainTime:u});ne.show_warn(m)}const kt=(u,m)=>{const C=[];for(let ie=0;ie<re.cartDishs.value.length;ie++){var I=re.cartDishs.value[ie];const le=L.formateCustomDishNotes(I),we=I.dis_count?I.dis_price:I.price;C.push({dishid:I.dishid,name:I.name,quantity:I.count,notes:le,limit:I.limit,price:we,dishNote:I.dishNote,category:I.category})}const K=ee.getAllIncrementedDish();for(let ie=0;ie<K.length;ie++){var I=K[ie];if(I.quantity>0){const we=I.dis_count?I.dis_price:I.price,Fe=L.getDishNameDefaultName(I);C.push({dishid:I.id,name:Fe,quantity:I.quantity,limit:I.limit,price:we,dishNote:I.dishNote})}}if(C.length===0)return ne.show_warn(_("notification.select_at_least_one")),!1;console.log("cart item:",C);const ae=JSON.parse(ve.getCookie(Pe)||"{}"),ge=Date.now();if(!ae.startTime||ge-ae.startTime>dt*1e3)ae.startTime=ge,ae.uniCode||(ae.uniCode=Date.now().toString(36)+Math.random().toString(36).substring(2,5));else{const ie=dt-parseInt((ge-ae.startTime)/1e3);wt(ie);return}return ve.setCookie(Pe,JSON.stringify(ae)),c.value=!0,L.submit_order({uniCode:ae.uniCode,name:u.name,note:u.note,table:je(),items:C},ie=>{const le=JSON.parse(ve.getCookie(Pe)||"{}");le.uniCode=void 0,ve.setCookie(Pe,JSON.stringify(le)),m(ie)}),!0};function xt(){const u=ve.getCookie("language");u&&(h.value=u)}function at(){for(let u=0;u<H.value.length;u++){const m=H.value[u];m.quantity=0}c.value=!1,re.cleanAll()}$e(async()=>{xt(),await fe(),w(s.value),L.clear_order_data=()=>{at()},L.setOnOrderConfirmed(u=>{at();const m=u;ne.show_success(_("notification.order_submitted",{id:m}))}),L.setOnShowError(u=>{c.value=!1,ne.show_error(u)})});function $t(){ve.deleteCookie("login_time");const u=n.query.table;u?t.push({path:"/",query:{table:u}}):t.push({path:"/takeReserve"})}async function Se(u,m=!0){const C=m?re.cartDishs.value:ee.getIdsAndQuantity(ee.getAllIncrementedDish()),I=Qe.compressToEncodedURIComponent(JSON.stringify(C));try{await ot.setItem(u,I)}catch(K){console.error("ä¿å­˜åˆ° localForage å¤±è´¥:",K)}}function Ve(){L.isTakeaway()?(Se("take_cartDish_normal",!1),Se("take_cartDish_custom",!0)):(Se("cartDish_normal",!1),Se("cartDish_custom",!0))}async function Ae(u,m=!0){try{const C=await ot.getItem(u);if(!C)return;const I=JSON.parse(Qe.decompressFromEncodedURIComponent(C));I&&I!=="undefined"&&(m?re.cartDishs.value=I:ee.updateDishDataQty(I))}catch(C){console.error("ä»Ž localForage è¯»å–å¤±è´¥æˆ–è§£æžå¤±è´¥:",C)}}function Tt(){L.isTakeaway()?(Ae("take_cartDish_normal",!1),Ae("take_cartDish_custom")):(Ae("cartDish_normal",!1),Ae("cartDish_custom"))}return Ot(()=>{Ve()}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&Ve()}),window.addEventListener("beforeunload",u=>{Ve(),L.cleanup()}),(u,m)=>(l(),y(G,null,[a("div",$o,[(l(),Z(wo,{key:d.value,types:J.value,typeIndex:s.value,tabItems:k.value,tableId:je(),onClickType:tt,onSwitchToWelcome:$t},null,8,["types","typeIndex","tabItems","tableId"])),m[4]||(m[4]=a("div",{class:"pb-8"},null,-1)),m[5]||(m[5]=a("div",{class:"pb-4 sm:pb-5 md:pb-5 lg:pb-5"},null,-1)),S(xo,{duration:3e3,position:"center",size:"3rem"}),a("div",To,[(l(),Z(i(Vt),{key:`swiper-${J.value.length}-${d.value}`,"space-between":20,"centered-slides":"","grab-cursor":!0,class:"w-full",autoHeight:!0,onSlideChange:b,onSwiper:T,"initial-slide":s.value},{default:V(()=>[(l(!0),y(G,null,oe(J.value,(C,I)=>(l(),Z(i(Ft),{key:I},{default:V(()=>[Math.abs(s.value-I)<=1&&(!W.value||s.value!==I)?(l(),Z(ts,{key:0,rateDish:x,likedItemsRef:F.value,dislikedItemsRef:E.value,tabIndex:I,onlyVeg:v.value},null,8,["likedItemsRef","dislikedItemsRef","tabIndex","onlyVeg"])):Math.abs(s.value-I)<=1&&W.value&&s.value===I?(l(),Z(cn,{key:1,currentCustomDish:P.value,onTypeClick:N,tabindex:I},null,8,["currentCustomDish","tabindex"])):M("",!0)]),_:2},1024))),128))]),_:1},8,["initial-slide"]))]),m[6]||(m[6]=a("div",{style:{height:"60px"}},null,-1)),a("div",Do,[a("div",Co,[a("div",Io,[i(L).isTakeaway()?M("",!0):(l(),Z(i(Q),{key:0,label:u.$t("common.orders"),icon:"pi pi-list",class:"p-button-secondary",onClick:D},null,8,["label"]))]),a("div",So,[S(i(Ct),{class:"text-sm",modelValue:v.value,"onUpdate:modelValue":m[0]||(m[0]=C=>v.value=C),onLabel:i(_)("common.showAll"),offLabel:i(_)("common.showOnlyVegetables"),onClick:m[1]||(m[1]=C=>i(L).filterMenuTabs(v.value))},null,8,["modelValue","onLabel","offLabel"])]),a("div",Ao,[S(i(mt),{value:i(g),severity:"danger",onClick:_t},{default:V(()=>m[3]||(m[3]=[a("i",{class:"pi pi-shopping-cart",style:{"font-size":"2rem"}},null,-1)])),_:1,__:[3]},8,["value"])])])])]),S(Ns,{ref_key:"cartRef",ref:U,checkout:kt,isTakeaway:!je()},null,8,["isTakeaway"]),S(i(he),{visible:A.value,"onUpdate:visible":m[2]||(m[2]=C=>A.value=C),header:u.$t("common.completedOrders"),modal:"",style:{width:"80vw","max-width":"700px"}},{default:V(()=>{var C,I;return[a("div",No,[a("div",Bo,[(C=f.value.adultPrice)!=null&&C.quantity&&f.value.adultPrice.quantity!=0?(l(),y("div",Lo,[a("div",Po,[a("span",qo,p(u.$t("common.adult")),1),a("small",null,p(u.$t("common.quantity"))+": "+p(f.value.adultPrice.quantity),1)]),a("div",zo,[a("span",null,"â‚¬"+p((Number(f.value.adultPrice.price)*f.value.adultPrice.quantity).toFixed(2)),1)])])):M("",!0),(I=f.value.childrenPrice)!=null&&I.quantity&&f.value.childrenPrice.quantity!=0?(l(),y("div",Mo,[a("div",Oo,[a("span",Eo,p(u.$t("common.children")),1),a("small",null,p(u.$t("common.quantity"))+": "+p(f.value.childrenPrice.quantity),1)]),a("div",Ro,[a("span",null,"â‚¬"+p((Number(f.value.childrenPrice.price)*f.value.childrenPrice.quantity).toFixed(2)),1)])])):M("",!0)]),i(L).table.value.order.length===0?(l(),y("div",jo,p(u.$t("common.noOrders")),1)):(l(),y("div",Vo,[(l(!0),y(G,null,oe(i(L).table.value.order,(K,ae)=>(l(),y("div",{key:ae,class:"flex justify-content-between border-bottom-1 pb-2"},[a("div",Fo,[a("span",Wo,p(i(L).getDishName(K)),1),a("small",null,p(u.$t("common.quantity"))+": "+p(K.quantity),1)]),a("div",Uo,[a("span",null,"â‚¬"+p((K.price*K.quantity).toFixed(2)),1)])]))),128))]))]),a("div",Ko,p(u.$t("common.total"))+": â‚¬"+p(f.value.total),1)]}),_:1},8,["visible","header"])],64))}},ii=Ie(Ho,[["__scopeId","data-v-018d3c89"]]);export{ii as default};
