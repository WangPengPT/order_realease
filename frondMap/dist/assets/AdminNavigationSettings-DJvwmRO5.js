import{j as e}from"./vendor-ui-DAmPMpEA.js";import{r as o}from"./vendor-react-iAJ0IrSD.js";import{cy as K,g as B,t as D,T,v as z,aT as A,B as h,cz as ee,aE as se,az as c,aM as p,aN as _,aO as v,aP as b,aQ as r,D as ae,aC as le,aS as ne,a as ie,b as ce,c as re,I as N,bX as H,bY as M,o as R,bZ as de,aV as te,aU as oe,bS as he,b2 as xe,cA as me}from"./index-CWo17YGZ.js";import{S as x}from"./switch-BMqfuL90.js";import{S as je}from"./slider-B9U779fC.js";import{T as ge,a as ue,b as $,c as m,d as pe,e as j}from"./table-C1rAoeYP.js";import{u as _e}from"./vendor-i18n-DxKeo2S1.js";import"./vendor-charts-Bz7hPIBd.js";import"./vendor-query-BlSVl3IQ.js";import"./vendor-supabase-KNAP0qdW.js";const ve=["MapPin","List","Calendar","Map","Store","Home","Search","User","Settings","Heart","Star","Bell","ShoppingCart","Gift","Info","HelpCircle"],Te=()=>{const{t:a,i18n:U}=_e(),{settings:n,buttons:f,isLoading:G,updateSettings:k,createButton:L,updateButton:E,deleteButton:W}=K(),[C,V]=o.useState(null),[F,w]=o.useState(!1),[l,d]=o.useState({label_zh:"",label_en:"",label_pt:"",link:"",icon:"Circle",visible:!0,show_on_desktop:!0,show_on_tablet:!0,show_on_mobile:!0,show_when_logged_in:!0,show_when_logged_out:!0}),[i,y]=o.useState({}),[Q,S]=o.useState(!1);o.useEffect(()=>{n&&y({background_opacity:n.background_opacity,background_color:n.background_color,text_color:n.text_color,hover_bg_color:n.hover_bg_color,hover_text_color:n.hover_text_color,shadow_enabled:n.shadow_enabled})},[n]);const g=o.useCallback((s,t)=>{y(u=>({...u,[s]:t})),S(!0)},[]),X=o.useCallback(()=>{k.mutate(i),S(!1)},[i,k]),Y=o.useCallback(()=>{n&&(y({background_opacity:n.background_opacity,background_color:n.background_color,text_color:n.text_color,hover_bg_color:n.hover_bg_color,hover_text_color:n.hover_text_color,shadow_enabled:n.shadow_enabled}),S(!1))},[n]),I=s=>{s?(V(s),d(s)):(V(null),d({label_zh:"",label_en:"",label_pt:"",link:"",icon:"Circle",visible:!0,show_on_desktop:!0,show_on_tablet:!0,show_on_mobile:!0,show_when_logged_in:!0,show_when_logged_out:!0})),w(!0)},Z=async()=>{C?await E.mutateAsync({id:C.id,...l}):await L.mutateAsync({...l,sort_order:(f?.length||0)+1}),w(!1)},q=async s=>{confirm(a("admin.confirmDelete"))&&await W.mutateAsync(s)},O=s=>{const t=me[s];return t?e.jsx(t,{className:"w-4 h-4"}):null},P=s=>{const t=U.language;return t==="zh"?s.label_zh:t==="pt"?s.label_pt:s.label_en},J=o.useMemo(()=>{const s=Number(i.background_opacity||0),t=i.background_color||"transparent";let u="transparent";return t==="white"?u=`rgba(255,255,255,${s})`:t==="black"?u=`rgba(0,0,0,${s})`:t==="primary"&&(u=`rgba(var(--primary-rgb, 0,0,0),${s})`),{backgroundColor:u}},[i.background_opacity,i.background_color]);return G?e.jsx("div",{className:"p-6",children:a("common.loading")}):e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:a("admin.navigationSettings")}),e.jsx("p",{className:"text-muted-foreground",children:a("admin.navigationSettingsDescription")})]}),e.jsxs(B,{children:[e.jsx(D,{children:e.jsx(T,{children:a("admin.preview")})}),e.jsx(z,{children:e.jsx("div",{className:"rounded-lg border overflow-hidden",style:{backgroundColor:"#f0f0f0"},children:e.jsxs("div",{className:`h-14 px-4 flex items-center justify-between ${i.shadow_enabled?"shadow-[0_2px_4px_rgba(0,0,0,0.15)]":""}`,style:J,children:[e.jsx("div",{className:"w-8 h-8 rounded bg-primary/20"}),e.jsx("div",{className:"flex gap-4",children:f?.slice(0,4).map(s=>e.jsx("span",{className:`px-3 py-1 rounded text-sm ${i.text_color==="white"?"text-white":i.text_color==="black"?"text-black":"text-primary"}`,children:P(s)},s.id))}),e.jsx("div",{className:"w-8 h-8 rounded-full bg-muted"})]})})})]}),e.jsxs(B,{children:[e.jsxs(D,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(T,{children:a("admin.navBarStyle")}),e.jsx(A,{children:a("admin.navBarStyleDescription")})]}),Q&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(h,{variant:"outline",size:"sm",onClick:Y,children:[e.jsx(ee,{className:"w-4 h-4 mr-2"}),a("common.reset")]}),e.jsxs(h,{size:"sm",onClick:X,disabled:k.isPending,children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),a("common.save")]})]})]}),e.jsx(z,{className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:a("admin.backgroundOpacity")}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(je,{value:[Number(i.background_opacity||0)*100],onValueChange:s=>g("background_opacity",s[0]/100),max:100,step:5,className:"flex-1"}),e.jsxs("span",{className:"w-12 text-right",children:[Math.round(Number(i.background_opacity||0)*100),"%"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:a("admin.backgroundColor")}),e.jsxs(p,{value:i.background_color||"transparent",onValueChange:s=>g("background_color",s),children:[e.jsx(_,{children:e.jsx(v,{})}),e.jsxs(b,{children:[e.jsx(r,{value:"transparent",children:a("admin.transparent")}),e.jsx(r,{value:"white",children:a("admin.white")}),e.jsx(r,{value:"black",children:a("admin.black")}),e.jsx(r,{value:"primary",children:a("admin.primary")})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:a("admin.textColor")}),e.jsxs(p,{value:i.text_color||"primary",onValueChange:s=>g("text_color",s),children:[e.jsx(_,{children:e.jsx(v,{})}),e.jsxs(b,{children:[e.jsx(r,{value:"primary",children:a("admin.primary")}),e.jsx(r,{value:"white",children:a("admin.white")}),e.jsx(r,{value:"black",children:a("admin.black")})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:a("admin.hoverBgColor")}),e.jsxs(p,{value:i.hover_bg_color||"black",onValueChange:s=>g("hover_bg_color",s),children:[e.jsx(_,{children:e.jsx(v,{})}),e.jsxs(b,{children:[e.jsx(r,{value:"black",children:a("admin.black")}),e.jsx(r,{value:"white",children:a("admin.white")}),e.jsx(r,{value:"primary",children:a("admin.primary")})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:a("admin.hoverTextColor")}),e.jsxs(p,{value:i.hover_text_color||"white",onValueChange:s=>g("hover_text_color",s),children:[e.jsx(_,{children:e.jsx(v,{})}),e.jsxs(b,{children:[e.jsx(r,{value:"white",children:a("admin.white")}),e.jsx(r,{value:"black",children:a("admin.black")}),e.jsx(r,{value:"primary",children:a("admin.primary")})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(c,{children:a("admin.shadowEnabled")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a("admin.shadowEnabledDescription")})]}),e.jsx(x,{checked:i.shadow_enabled??!0,onCheckedChange:s=>g("shadow_enabled",s)})]})]})})]}),e.jsxs(B,{children:[e.jsxs(D,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(T,{children:a("admin.navButtons")}),e.jsx(A,{children:a("admin.navButtonsDescription")})]}),e.jsxs(ae,{open:F,onOpenChange:w,children:[e.jsx(le,{asChild:!0,children:e.jsxs(h,{onClick:()=>I(),children:[e.jsx(ne,{className:"w-4 h-4 mr-2"}),a("admin.addButton")]})}),e.jsxs(ie,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ce,{children:e.jsx(re,{children:a(C?"admin.editButton":"admin.addButton")})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:a("admin.labelChinese")}),e.jsx(N,{value:l.label_zh||"",onChange:s=>d({...l,label_zh:s.target.value}),placeholder:"中文标签"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:a("admin.labelEnglish")}),e.jsx(N,{value:l.label_en||"",onChange:s=>d({...l,label_en:s.target.value}),placeholder:"English Label"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:a("admin.labelPortuguese")}),e.jsx(N,{value:l.label_pt||"",onChange:s=>d({...l,label_pt:s.target.value}),placeholder:"Rótulo Português"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:a("admin.link")}),e.jsx(N,{value:l.link||"",onChange:s=>d({...l,link:s.target.value}),placeholder:"/path"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:a("admin.icon")}),e.jsxs(p,{value:l.icon||"Circle",onValueChange:s=>d({...l,icon:s}),children:[e.jsx(_,{children:e.jsx(v,{})}),e.jsx(b,{children:ve.map(s=>e.jsx(r,{value:s,children:e.jsxs("div",{className:"flex items-center gap-2",children:[O(s),e.jsx("span",{children:s})]})},s))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:a("admin.deviceVisibility")}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{checked:l.show_on_desktop??!0,onCheckedChange:s=>d({...l,show_on_desktop:s})}),e.jsx(H,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:a("admin.desktop")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{checked:l.show_on_tablet??!0,onCheckedChange:s=>d({...l,show_on_tablet:s})}),e.jsx(M,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:a("admin.tablet")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{checked:l.show_on_mobile??!0,onCheckedChange:s=>d({...l,show_on_mobile:s})}),e.jsx(R,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:a("admin.mobile")})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:a("admin.loginStateVisibility")}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{checked:l.show_when_logged_in??!0,onCheckedChange:s=>d({...l,show_when_logged_in:s})}),e.jsx("span",{className:"text-sm",children:a("admin.showWhenLoggedIn")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{checked:l.show_when_logged_out??!0,onCheckedChange:s=>d({...l,show_when_logged_out:s})}),e.jsx("span",{className:"text-sm",children:a("admin.showWhenLoggedOut")})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{checked:l.visible??!0,onCheckedChange:s=>d({...l,visible:s})}),e.jsx(c,{children:a("admin.visible")})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(h,{variant:"outline",onClick:()=>w(!1),children:a("common.cancel")}),e.jsx(h,{onClick:Z,disabled:L.isPending||E.isPending,children:a("common.save")})]})]})]})]})]}),e.jsx(z,{children:e.jsxs(ge,{children:[e.jsx(ue,{children:e.jsxs($,{children:[e.jsx(m,{className:"w-12"}),e.jsx(m,{children:a("admin.icon")}),e.jsx(m,{children:a("admin.label")}),e.jsx(m,{children:a("admin.link")}),e.jsx(m,{children:a("admin.devices")}),e.jsx(m,{children:a("admin.visible")}),e.jsx(m,{className:"text-right",children:a("admin.actions")})]})}),e.jsx(pe,{children:f?.map(s=>e.jsxs($,{children:[e.jsx(j,{children:e.jsx(de,{className:"w-4 h-4 text-muted-foreground cursor-move"})}),e.jsx(j,{children:O(s.icon)}),e.jsx(j,{className:"font-medium",children:P(s)}),e.jsx(j,{className:"text-muted-foreground",children:s.link}),e.jsx(j,{children:e.jsxs("div",{className:"flex gap-1",children:[s.show_on_desktop&&e.jsx(H,{className:"w-4 h-4"}),s.show_on_tablet&&e.jsx(M,{className:"w-4 h-4"}),s.show_on_mobile&&e.jsx(R,{className:"w-4 h-4"})]})}),e.jsx(j,{children:s.visible?e.jsx(te,{className:"w-4 h-4 text-green-500"}):e.jsx(oe,{className:"w-4 h-4 text-muted-foreground"})}),e.jsx(j,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>I(s),children:e.jsx(he,{className:"w-4 h-4"})}),e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>q(s.id),children:e.jsx(xe,{className:"w-4 h-4 text-destructive"})})]})})]},s.id))})]})})]})]})};export{Te as default};
//# sourceMappingURL=AdminNavigationSettings-DJvwmRO5.js.map
