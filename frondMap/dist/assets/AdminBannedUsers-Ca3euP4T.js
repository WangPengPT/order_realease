import{j as e}from"./vendor-ui-DAmPMpEA.js";import{r as i}from"./vendor-react-iAJ0IrSD.js";import{C as l,j as m,I as N,B as d,X as b,Y as v,Z as w,_ as y,q as p,an as C}from"./index-BcrfGQEh.js";import{z as U,w as k}from"./useAdmin-jXgzqV2H.js";import{U as B}from"./UserProfileDialog-nQaU7EW9.js";import{u as _}from"./vendor-i18n-DxKeo2S1.js";import{B as c}from"./ban-BgXjBYQA.js";import{S as R}from"./search-DYCHfSrp.js";import{E as S}from"./eye-CrXJhp4G.js";import{U as I}from"./user-check-Ccn1SqRm.js";import{U as A}from"./users-B1UqT5l5.js";import{B as z}from"./briefcase-B385EK3a.js";import{f as D}from"./format-C1rHoFdk.js";import"./vendor-charts-Bz7hPIBd.js";import"./vendor-query-BlSVl3IQ.js";import"./vendor-supabase-KNAP0qdW.js";import"./separator-CM8vz3w9.js";import"./useLocalizedContent-tJ7i_ycU.js";import"./arrow-left-4K88mBFI.js";import"./clock-DGED8Oob.js";import"./heart-ClAJibHi.js";import"./star-DqKRai6M.js";import"./external-link-C5GWMUy2.js";import"./startOfDay-CJ0Nm-E7.js";const oe=()=>{const{t:s}=_(),{data:n,isLoading:g}=U(),u=k(),[r,x]=i.useState(""),[t,h]=i.useState({open:!1,userId:"",userName:"",userRole:""}),o=i.useMemo(()=>n?n.filter(a=>r===""||a.display_name.toLowerCase().includes(r.toLowerCase())||a.ban_reason?.toLowerCase().includes(r.toLowerCase())):[],[n,r]),j=a=>{switch(a){case"admin":return"bg-primary text-primary-foreground";case"supervisor":return"bg-blue-500 text-white";case"merchant":return"bg-emerald-500 text-white";default:return"bg-muted text-muted-foreground"}},f=a=>{switch(a){case"admin":case"supervisor":return e.jsx(C,{className:"h-3.5 w-3.5"});case"merchant":return e.jsx(z,{className:"h-3.5 w-3.5"});default:return e.jsx(A,{className:"h-3.5 w-3.5"})}};return g?e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"text-muted-foreground",children:s("common.loading")})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:e.jsx(c,{className:"h-6 w-6 text-orange-500"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:s("admin.bannedManagement")}),e.jsx("p",{className:"text-muted-foreground",children:s("admin.bannedManagementDesc")})]})]})}),e.jsx(l,{className:"bg-gradient-to-br from-orange-50 to-orange-100 border-orange-200 dark:from-orange-950/20 dark:to-orange-900/20 dark:border-orange-900/30",children:e.jsx(m,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:s("admin.totalBanned")}),e.jsx("p",{className:"text-2xl font-bold",children:n?.length||0})]}),e.jsx(c,{className:"h-8 w-8 text-orange-500"})]})})}),e.jsx(l,{children:e.jsx(m,{className:"pt-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(R,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(N,{placeholder:s("admin.searchBannedUserPlaceholder"),value:r,onChange:a=>x(a.target.value),className:"pl-10 pr-10"}),r&&e.jsx(d,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-7 w-7 p-0",onClick:()=>x(""),children:e.jsx(b,{className:"h-4 w-4"})})]})})}),o&&o.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map(a=>e.jsx(l,{className:"border-orange-300 bg-orange-50/50 dark:bg-orange-950/20",children:e.jsxs(m,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs(v,{className:"h-12 w-12",children:[e.jsx(w,{src:a.avatar_url,alt:a.display_name}),e.jsx(y,{children:a.display_name.charAt(0).toUpperCase()})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold truncate",children:a.display_name}),e.jsx(p,{variant:"outline",className:"text-xs text-orange-500 border-orange-300",children:s("admin.banned")})]}),e.jsxs(p,{className:`${j(a.role)} text-xs mt-1`,children:[f(a.role),e.jsx("span",{className:"ml-1 capitalize",children:a.role})]})]})]}),a.ban_reason&&e.jsxs("div",{className:"mt-3 p-2 bg-orange-100 dark:bg-orange-900/30 rounded text-sm",children:[e.jsxs("p",{className:"font-medium text-orange-700 dark:text-orange-300",children:[s("admin.banReason"),":"]}),e.jsx("p",{className:"text-orange-600 dark:text-orange-400",children:a.ban_reason})]}),a.banned_at&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:[s("admin.bannedAt"),": ",D(new Date(a.banned_at),"yyyy-MM-dd HH:mm")]}),e.jsxs("div",{className:"flex gap-2 mt-4 pt-3 border-t",children:[e.jsxs(d,{variant:"outline",size:"sm",onClick:()=>h({open:!0,userId:a.id,userName:a.display_name,userRole:a.role}),children:[e.jsx(S,{className:"h-4 w-4 mr-1"}),s("admin.viewProfile")]}),e.jsxs(d,{variant:"outline",size:"sm",className:"text-green-600 border-green-300 hover:bg-green-50",onClick:()=>u.mutate(a.id),children:[e.jsx(I,{className:"h-4 w-4 mr-1"}),s("admin.unban")]})]})]})},a.id))}):e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(c,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:s(r?"admin.noSearchResults":"admin.noBannedUsers")})]}),e.jsx(B,{open:t.open,onOpenChange:a=>h({...t,open:a}),userId:t.userId,userName:t.userName,userRole:t.userRole})]})};export{oe as default};
//# sourceMappingURL=AdminBannedUsers-Ca3euP4T.js.map
