{"version":3,"file":"AdminBrands-CbYTE_dj.js","sources":["../../src/components/admin/BrandContentBlocksEditor.tsx","../../src/components/admin/BrandFormDialog.tsx","../../src/pages/admin/AdminBrands.tsx"],"sourcesContent":["import { useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\nimport { \r\n  Plus, \r\n  Trash2, \r\n  GripVertical, \r\n  Image as ImageIcon, \r\n  Type,\r\n  ChevronUp,\r\n  ChevronDown,\r\n  Upload\r\n} from \"lucide-react\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { toast } from \"sonner\";\r\nimport ReactQuill from \"react-quill\";\r\nimport \"react-quill/dist/quill.snow.css\";\r\n\r\nexport interface ContentBlock {\r\n  id: string;\r\n  type: \"text\" | \"image\";\r\n  content_zh?: string;\r\n  content_en?: string;\r\n  content_pt?: string;\r\n  url?: string;\r\n  alt?: string;\r\n}\r\n\r\ninterface BrandContentBlocksEditorProps {\r\n  blocks: ContentBlock[];\r\n  onChange: (blocks: ContentBlock[]) => void;\r\n}\r\n\r\nconst generateId = () => Math.random().toString(36).substring(2, 9);\r\n\r\nconst quillModules = {\r\n  toolbar: [\r\n    [{ header: [1, 2, 3, false] }],\r\n    [\"bold\", \"italic\", \"underline\"],\r\n    [{ list: \"ordered\" }, { list: \"bullet\" }],\r\n    [\"link\"],\r\n    [\"clean\"],\r\n  ],\r\n};\r\n\r\nexport const BrandContentBlocksEditor = ({ blocks, onChange }: BrandContentBlocksEditorProps) => {\r\n  const { t, i18n } = useTranslation();\r\n  const [uploadingId, setUploadingId] = useState<string | null>(null);\r\n\r\n  const addBlock = (type: \"text\" | \"image\") => {\r\n    const newBlock: ContentBlock = {\r\n      id: generateId(),\r\n      type,\r\n      ...(type === \"text\" ? { content_zh: \"\", content_en: \"\", content_pt: \"\" } : { url: \"\", alt: \"\" }),\r\n    };\r\n    onChange([...blocks, newBlock]);\r\n  };\r\n\r\n  const removeBlock = (id: string) => {\r\n    onChange(blocks.filter((b) => b.id !== id));\r\n  };\r\n\r\n  const moveBlock = (index: number, direction: \"up\" | \"down\") => {\r\n    const newBlocks = [...blocks];\r\n    const targetIndex = direction === \"up\" ? index - 1 : index + 1;\r\n    if (targetIndex < 0 || targetIndex >= blocks.length) return;\r\n    [newBlocks[index], newBlocks[targetIndex]] = [newBlocks[targetIndex], newBlocks[index]];\r\n    onChange(newBlocks);\r\n  };\r\n\r\n  const updateBlock = (id: string, updates: Partial<ContentBlock>) => {\r\n    onChange(blocks.map((b) => (b.id === id ? { ...b, ...updates } : b)));\r\n  };\r\n\r\n  const handleImageUpload = async (id: string, file: File) => {\r\n    if (!file.type.startsWith(\"image/\")) {\r\n      toast.error(t(\"admin.brand.invalidImageType\"));\r\n      return;\r\n    }\r\n\r\n    setUploadingId(id);\r\n    try {\r\n      const fileExt = file.name.split(\".\").pop();\r\n      const fileName = `brand-content-${Date.now()}.${fileExt}`;\r\n\r\n      const { error: uploadError } = await supabase.storage\r\n        .from(\"restaurant-images\")\r\n        .upload(fileName, file);\r\n\r\n      if (uploadError) throw uploadError;\r\n\r\n      const { data: { publicUrl } } = supabase.storage\r\n        .from(\"restaurant-images\")\r\n        .getPublicUrl(fileName);\r\n\r\n      updateBlock(id, { url: publicUrl });\r\n      toast.success(t(\"admin.brand.imageUploaded\"));\r\n    } catch (error: any) {\r\n      console.error(\"Upload error:\", error);\r\n      toast.error(error.message || t(\"admin.brand.uploadError\"));\r\n    } finally {\r\n      setUploadingId(null);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <Label>{t(\"admin.brand.contentBlocks\")}</Label>\r\n        <div className=\"flex gap-2\">\r\n          <Button\r\n            type=\"button\"\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={() => addBlock(\"text\")}\r\n          >\r\n            <Type className=\"h-4 w-4 mr-1\" />\r\n            {t(\"admin.brand.addText\")}\r\n          </Button>\r\n          <Button\r\n            type=\"button\"\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={() => addBlock(\"image\")}\r\n          >\r\n            <ImageIcon className=\"h-4 w-4 mr-1\" />\r\n            {t(\"admin.brand.addImage\")}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {blocks.length === 0 && (\r\n        <Card className=\"border-dashed\">\r\n          <CardContent className=\"py-8 text-center text-muted-foreground\">\r\n            <p>{t(\"admin.brand.noBlocks\")}</p>\r\n            <p className=\"text-sm mt-1\">{t(\"admin.brand.addBlockHint\")}</p>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      <div className=\"space-y-3\">\r\n        {blocks.map((block, index) => (\r\n          <Card key={block.id} className=\"relative\">\r\n            <CardContent className=\"pt-4\">\r\n              <div className=\"flex items-start gap-2\">\r\n                {/* Move buttons */}\r\n                <div className=\"flex flex-col gap-1 pt-2\">\r\n                  <Button\r\n                    type=\"button\"\r\n                    variant=\"ghost\"\r\n                    size=\"icon\"\r\n                    className=\"h-6 w-6\"\r\n                    disabled={index === 0}\r\n                    onClick={() => moveBlock(index, \"up\")}\r\n                  >\r\n                    <ChevronUp className=\"h-4 w-4\" />\r\n                  </Button>\r\n                  <div className=\"flex items-center justify-center h-6 w-6 text-muted-foreground\">\r\n                    <GripVertical className=\"h-4 w-4\" />\r\n                  </div>\r\n                  <Button\r\n                    type=\"button\"\r\n                    variant=\"ghost\"\r\n                    size=\"icon\"\r\n                    className=\"h-6 w-6\"\r\n                    disabled={index === blocks.length - 1}\r\n                    onClick={() => moveBlock(index, \"down\")}\r\n                  >\r\n                    <ChevronDown className=\"h-4 w-4\" />\r\n                  </Button>\r\n                </div>\r\n\r\n                {/* Block content */}\r\n                <div className=\"flex-1 min-w-0\">\r\n                  {block.type === \"text\" ? (\r\n                    <Tabs defaultValue=\"zh\" className=\"w-full\">\r\n                      <TabsList className=\"mb-2\">\r\n                        <TabsTrigger value=\"zh\">中文</TabsTrigger>\r\n                        <TabsTrigger value=\"en\">English</TabsTrigger>\r\n                        <TabsTrigger value=\"pt\">Português</TabsTrigger>\r\n                      </TabsList>\r\n                      <TabsContent value=\"zh\">\r\n                        <ReactQuill\r\n                          theme=\"snow\"\r\n                          value={block.content_zh || \"\"}\r\n                          onChange={(val) => updateBlock(block.id, { content_zh: val })}\r\n                          modules={quillModules}\r\n                          placeholder={t(\"admin.brand.textPlaceholder\")}\r\n                        />\r\n                      </TabsContent>\r\n                      <TabsContent value=\"en\">\r\n                        <ReactQuill\r\n                          theme=\"snow\"\r\n                          value={block.content_en || \"\"}\r\n                          onChange={(val) => updateBlock(block.id, { content_en: val })}\r\n                          modules={quillModules}\r\n                          placeholder={t(\"admin.brand.textPlaceholder\")}\r\n                        />\r\n                      </TabsContent>\r\n                      <TabsContent value=\"pt\">\r\n                        <ReactQuill\r\n                          theme=\"snow\"\r\n                          value={block.content_pt || \"\"}\r\n                          onChange={(val) => updateBlock(block.id, { content_pt: val })}\r\n                          modules={quillModules}\r\n                          placeholder={t(\"admin.brand.textPlaceholder\")}\r\n                        />\r\n                      </TabsContent>\r\n                    </Tabs>\r\n                  ) : (\r\n                    <div className=\"space-y-3\">\r\n                      {block.url ? (\r\n                        <div className=\"relative group\">\r\n                          <img\r\n                            src={block.url}\r\n                            alt={block.alt || \"\"}\r\n                            className=\"w-full max-h-48 object-contain rounded-lg bg-muted\"\r\n                          />\r\n                          <div className=\"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center rounded-lg\">\r\n                            <label className=\"cursor-pointer\">\r\n                              <Input\r\n                                type=\"file\"\r\n                                accept=\"image/*\"\r\n                                className=\"hidden\"\r\n                                onChange={(e) => {\r\n                                  const file = e.target.files?.[0];\r\n                                  if (file) handleImageUpload(block.id, file);\r\n                                }}\r\n                              />\r\n                              <Button type=\"button\" variant=\"secondary\" size=\"sm\">\r\n                                {t(\"common.replace\")}\r\n                              </Button>\r\n                            </label>\r\n                          </div>\r\n                        </div>\r\n                      ) : (\r\n                        <label className=\"cursor-pointer\">\r\n                          <Input\r\n                            type=\"file\"\r\n                            accept=\"image/*\"\r\n                            className=\"hidden\"\r\n                            onChange={(e) => {\r\n                              const file = e.target.files?.[0];\r\n                              if (file) handleImageUpload(block.id, file);\r\n                            }}\r\n                          />\r\n                          <div className=\"border-2 border-dashed rounded-lg p-8 text-center hover:border-primary transition-colors\">\r\n                            {uploadingId === block.id ? (\r\n                              <div className=\"animate-pulse text-muted-foreground\">\r\n                                {t(\"common.uploading\")}...\r\n                              </div>\r\n                            ) : (\r\n                              <>\r\n                                <Upload className=\"h-8 w-8 mx-auto text-muted-foreground mb-2\" />\r\n                                <p className=\"text-sm text-muted-foreground\">\r\n                                  {t(\"admin.brand.clickToUpload\")}\r\n                                </p>\r\n                              </>\r\n                            )}\r\n                          </div>\r\n                        </label>\r\n                      )}\r\n                      <Input\r\n                        placeholder={t(\"admin.brand.imageAlt\")}\r\n                        value={block.alt || \"\"}\r\n                        onChange={(e) => updateBlock(block.id, { alt: e.target.value })}\r\n                      />\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Delete button */}\r\n                <Button\r\n                  type=\"button\"\r\n                  variant=\"ghost\"\r\n                  size=\"icon\"\r\n                  className=\"h-8 w-8 text-destructive hover:text-destructive\"\r\n                  onClick={() => removeBlock(block.id)}\r\n                >\r\n                  <Trash2 className=\"h-4 w-4\" />\r\n                </Button>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import { useState, useEffect } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\nimport { Upload, X, Building2, Globe } from \"lucide-react\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { useCreateBrand, useUpdateBrand, Brand } from \"@/hooks/useBrands\";\r\nimport { BrandContentBlocksEditor, ContentBlock } from \"@/components/admin/BrandContentBlocksEditor\";\r\n\r\ninterface BrandFormDialogProps {\r\n  brand?: Brand;\r\n  trigger: React.ReactNode;\r\n}\r\n\r\nexport function BrandFormDialog({ brand, trigger }: BrandFormDialogProps) {\r\n  const { t } = useTranslation();\r\n  const { toast } = useToast();\r\n  const createBrand = useCreateBrand();\r\n  const updateBrand = useUpdateBrand();\r\n  \r\n  const [open, setOpen] = useState(false);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  \r\n  // Form fields\r\n  const [name, setName] = useState(brand?.name || \"\");\r\n  const [nameEn, setNameEn] = useState(brand?.name_en || \"\");\r\n  const [namePt, setNamePt] = useState(brand?.name_pt || \"\");\r\n  \r\n  // Content blocks for flexible content ordering\r\n  const [contentBlocks, setContentBlocks] = useState<ContentBlock[]>([]);\r\n  \r\n  // Logo upload\r\n  const [logoFile, setLogoFile] = useState<File | null>(null);\r\n  const [logoPreview, setLogoPreview] = useState<string | null>(brand?.logo_url || null);\r\n\r\n  // Reset form when dialog opens with brand data\r\n  useEffect(() => {\r\n    if (open && brand) {\r\n      setName(brand.name || \"\");\r\n      setNameEn(brand.name_en || \"\");\r\n      setNamePt(brand.name_pt || \"\");\r\n      setLogoPreview(brand.logo_url || null);\r\n      // Parse content blocks from brand data\r\n      const blocks = (brand.content_blocks as ContentBlock[]) || [];\r\n      setContentBlocks(blocks);\r\n    } else if (open && !brand) {\r\n      // Reset for new brand\r\n      setName(\"\");\r\n      setNameEn(\"\");\r\n      setNamePt(\"\");\r\n      setLogoPreview(null);\r\n      setLogoFile(null);\r\n      setContentBlocks([]);\r\n    }\r\n  }, [open, brand]);\r\n\r\n  const handleLogoChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (file) {\r\n      setLogoFile(file);\r\n      const reader = new FileReader();\r\n      reader.onloadend = () => {\r\n        setLogoPreview(reader.result as string);\r\n      };\r\n      reader.readAsDataURL(file);\r\n    }\r\n  };\r\n\r\n\r\n  const uploadFile = async (file: File, prefix: string): Promise<string | null> => {\r\n    const fileExt = file.name.split(\".\").pop();\r\n    const fileName = `${prefix}_${Math.random()}.${fileExt}`;\r\n    \r\n    const { error: uploadError } = await supabase.storage\r\n      .from(\"restaurant-images\")\r\n      .upload(fileName, file);\r\n\r\n    if (uploadError) throw uploadError;\r\n\r\n    const { data: { publicUrl } } = supabase.storage\r\n      .from(\"restaurant-images\")\r\n      .getPublicUrl(fileName);\r\n\r\n    return publicUrl;\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (!name.trim()) {\r\n      toast({\r\n        title: t(\"common.error\"),\r\n        description: t(\"admin.brand.nameRequired\"),\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    try {\r\n      let logoUrl = brand?.logo_url || null;\r\n\r\n      if (logoFile) {\r\n        logoUrl = await uploadFile(logoFile, \"brand_logo\");\r\n      }\r\n\r\n      const brandData = {\r\n        name,\r\n        name_en: nameEn || null,\r\n        name_pt: namePt || null,\r\n        logo_url: logoUrl,\r\n        content_blocks: contentBlocks,\r\n      };\r\n\r\n      if (brand) {\r\n        await updateBrand.mutateAsync({ id: brand.id, ...brandData });\r\n      } else {\r\n        await createBrand.mutateAsync(brandData);\r\n      }\r\n\r\n      setOpen(false);\r\n    } catch (error: any) {\r\n      toast({\r\n        title: t(\"common.error\"),\r\n        description: error.message,\r\n        variant: \"destructive\",\r\n      });\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={setOpen}>\r\n      <DialogTrigger asChild>{trigger}</DialogTrigger>\r\n      <DialogContent className=\"max-w-[95vw] sm:max-w-4xl max-h-[95vh] overflow-hidden flex flex-col p-0\">\r\n        <DialogHeader className=\"px-6 pt-6 pb-4 border-b bg-muted/30\">\r\n          <DialogTitle className=\"text-2xl flex items-center gap-2\">\r\n            <Building2 className=\"w-6 h-6 text-primary\" />\r\n            {brand ? t(\"admin.brand.edit\") : t(\"admin.brand.create\")}\r\n          </DialogTitle>\r\n          <DialogDescription className=\"text-base\">\r\n            {brand ? t(\"admin.brand.editDesc\") : t(\"admin.brand.createDesc\")}\r\n          </DialogDescription>\r\n        </DialogHeader>\r\n\r\n        <ScrollArea className=\"px-6 h-[calc(95vh-220px)]\">\r\n          <form onSubmit={handleSubmit} className=\"space-y-6 py-6\">\r\n            {/* Brand Name */}\r\n            <Card className=\"border-primary/20 bg-gradient-to-br from-background to-muted/20\">\r\n              <CardContent className=\"p-6\">\r\n                <Label className=\"text-base font-semibold flex items-center gap-2 mb-4\">\r\n                  <Globe className=\"w-5 h-5 text-primary\" />\r\n                  {t(\"admin.brand.name\")}\r\n                </Label>\r\n                <Tabs defaultValue=\"zh\" className=\"w-full\">\r\n                  <TabsList className=\"grid w-full grid-cols-3\">\r\n                    <TabsTrigger value=\"zh\">中文</TabsTrigger>\r\n                    <TabsTrigger value=\"en\">EN</TabsTrigger>\r\n                    <TabsTrigger value=\"pt\">PT</TabsTrigger>\r\n                  </TabsList>\r\n                  <TabsContent value=\"zh\" className=\"mt-4\">\r\n                    <Input\r\n                      value={name}\r\n                      onChange={(e) => setName(e.target.value)}\r\n                      placeholder={t(\"admin.brand.namePlaceholder\")}\r\n                    />\r\n                  </TabsContent>\r\n                  <TabsContent value=\"en\" className=\"mt-4\">\r\n                    <Input\r\n                      value={nameEn}\r\n                      onChange={(e) => setNameEn(e.target.value)}\r\n                      placeholder={t(\"admin.brand.namePlaceholderEn\")}\r\n                    />\r\n                  </TabsContent>\r\n                  <TabsContent value=\"pt\" className=\"mt-4\">\r\n                    <Input\r\n                      value={namePt}\r\n                      onChange={(e) => setNamePt(e.target.value)}\r\n                      placeholder={t(\"admin.brand.namePlaceholderPt\")}\r\n                    />\r\n                  </TabsContent>\r\n                </Tabs>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Logo */}\r\n            <Card className=\"border-primary/20 bg-gradient-to-br from-background to-muted/20\">\r\n              <CardContent className=\"p-6\">\r\n                <Label className=\"text-base font-semibold flex items-center gap-2 mb-4\">\r\n                  <Upload className=\"w-5 h-5 text-primary\" />\r\n                  {t(\"admin.brand.logo\")}\r\n                </Label>\r\n                <div className=\"flex items-center gap-4\">\r\n                  {logoPreview && (\r\n                    <div className=\"relative group\">\r\n                      <img\r\n                        src={logoPreview}\r\n                        alt=\"Logo Preview\"\r\n                        className=\"w-24 h-24 object-contain rounded-lg shadow-lg ring-2 ring-primary/20 bg-muted\"\r\n                      />\r\n                      <Button\r\n                        type=\"button\"\r\n                        variant=\"destructive\"\r\n                        size=\"icon\"\r\n                        className=\"absolute -top-2 -right-2 h-6 w-6 shadow-lg opacity-0 group-hover:opacity-100 transition-opacity\"\r\n                        onClick={() => {\r\n                          setLogoFile(null);\r\n                          setLogoPreview(null);\r\n                        }}\r\n                      >\r\n                        <X className=\"h-3 w-3\" />\r\n                      </Button>\r\n                    </div>\r\n                  )}\r\n                  <Label htmlFor=\"logo-upload\" className=\"cursor-pointer\">\r\n                    <div className=\"flex flex-col items-center gap-2 px-6 py-4 border-2 border-dashed border-primary/30 rounded-lg hover:border-primary hover:bg-primary/5 transition-all duration-200\">\r\n                      <Upload className=\"h-6 w-6 text-primary\" />\r\n                      <p className=\"font-medium text-xs\">{t(\"admin.uploadImage\")}</p>\r\n                    </div>\r\n                    <Input\r\n                      id=\"logo-upload\"\r\n                      type=\"file\"\r\n                      accept=\"image/*\"\r\n                      className=\"hidden\"\r\n                      onChange={handleLogoChange}\r\n                    />\r\n                  </Label>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Brand Content Blocks */}\r\n            <Card className=\"border-primary/20 bg-gradient-to-br from-background to-muted/20\">\r\n              <CardContent className=\"p-6\">\r\n                <BrandContentBlocksEditor\r\n                  blocks={contentBlocks}\r\n                  onChange={setContentBlocks}\r\n                />\r\n              </CardContent>\r\n            </Card>\r\n          </form>\r\n        </ScrollArea>\r\n\r\n        <div className=\"flex justify-end gap-3 p-6 border-t bg-muted/30\">\r\n          <Button type=\"button\" variant=\"outline\" onClick={() => setOpen(false)}>\r\n            {t(\"common.cancel\")}\r\n          </Button>\r\n          <Button onClick={handleSubmit} disabled={isSubmitting}>\r\n            {isSubmitting ? t(\"common.saving\") : (brand ? t(\"common.save\") : t(\"common.create\"))}\r\n          </Button>\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n","import { useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport {\r\n  AlertDialog,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n  AlertDialogContent,\r\n  AlertDialogDescription,\r\n  AlertDialogFooter,\r\n  AlertDialogHeader,\r\n  AlertDialogTitle,\r\n  AlertDialogTrigger,\r\n} from \"@/components/ui/alert-dialog\";\r\nimport { Plus, Search, Building2, Trash2, Edit } from \"lucide-react\";\r\nimport { useBrands, useDeleteBrand } from \"@/hooks/useBrands\";\r\nimport { BrandFormDialog } from \"@/components/admin/BrandFormDialog\";\r\nimport { useLocalizedContent } from \"@/hooks/useLocalizedContent\";\r\n\r\nconst AdminBrands = () => {\r\n  const { t } = useTranslation();\r\n  const { data: brands, isLoading } = useBrands();\r\n  const deleteBrand = useDeleteBrand();\r\n  const { getLocalizedField } = useLocalizedContent();\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n\r\n  const filteredBrands = brands?.filter((brand) =>\r\n    brand.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n    brand.name_en?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n    brand.name_pt?.toLowerCase().includes(searchQuery.toLowerCase())\r\n  );\r\n\r\n  if (isLoading) {\r\n    return <div className=\"text-center\">{t(\"common.loading\")}</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4\">\r\n        <div>\r\n          <h1 className=\"text-2xl md:text-3xl font-bold mb-2\">{t(\"admin.brand.title\")}</h1>\r\n          <p className=\"text-muted-foreground\">{t(\"admin.brand.subtitle\")}</p>\r\n        </div>\r\n        <BrandFormDialog\r\n          trigger={\r\n            <Button>\r\n              <Plus className=\"mr-2 h-4 w-4\" />\r\n              {t(\"admin.brand.create\")}\r\n            </Button>\r\n          }\r\n        />\r\n      </div>\r\n\r\n      {/* Search */}\r\n      <Card>\r\n        <CardContent className=\"pt-6\">\r\n          <div className=\"relative\">\r\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n            <Input\r\n              placeholder={t(\"admin.brand.search\")}\r\n              value={searchQuery}\r\n              onChange={(e) => setSearchQuery(e.target.value)}\r\n              className=\"pl-9\"\r\n            />\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Brand List */}\r\n      <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\r\n        {filteredBrands?.map((brand) => (\r\n          <Card key={brand.id} className=\"overflow-hidden\">\r\n            {brand.image_url && (\r\n              <div className=\"aspect-video overflow-hidden\">\r\n                <img\r\n                  src={brand.image_url}\r\n                  alt={brand.name}\r\n                  className=\"w-full h-full object-cover\"\r\n                />\r\n              </div>\r\n            )}\r\n            <CardHeader className=\"pb-2\">\r\n              <div className=\"flex items-start justify-between gap-2\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  {brand.logo_url ? (\r\n                    <img\r\n                      src={brand.logo_url}\r\n                      alt={`${brand.name} logo`}\r\n                      className=\"w-10 h-10 object-contain rounded-lg bg-muted p-1\"\r\n                    />\r\n                  ) : (\r\n                    <div className=\"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center\">\r\n                      <Building2 className=\"w-5 h-5 text-primary\" />\r\n                    </div>\r\n                  )}\r\n                  <div>\r\n                    <CardTitle className=\"text-lg\">{getLocalizedField(brand, \"name\")}</CardTitle>\r\n                    <CardDescription className=\"text-xs\">\r\n                      {brand.name !== brand.name_en && brand.name_en && (\r\n                        <span className=\"mr-2\">{brand.name_en}</span>\r\n                      )}\r\n                    </CardDescription>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </CardHeader>\r\n            <CardContent className=\"pt-0\">\r\n              {(brand.intro_zh || brand.intro_en || brand.intro_pt) && (\r\n                <div \r\n                  className=\"text-sm text-muted-foreground line-clamp-2 mb-4 prose prose-sm max-w-none\r\n                    [&_p]:m-0 [&_*]:text-muted-foreground\"\r\n                  dangerouslySetInnerHTML={{ \r\n                    __html: getLocalizedField(brand, \"intro\") || \"\" \r\n                  }}\r\n                />\r\n              )}\r\n              <div className=\"flex gap-2\">\r\n                <BrandFormDialog\r\n                  brand={brand}\r\n                  trigger={\r\n                    <Button variant=\"outline\" size=\"sm\" className=\"flex-1\">\r\n                      <Edit className=\"mr-2 h-4 w-4\" />\r\n                      {t(\"common.edit\")}\r\n                    </Button>\r\n                  }\r\n                />\r\n                <AlertDialog>\r\n                  <AlertDialogTrigger asChild>\r\n                    <Button variant=\"outline\" size=\"sm\">\r\n                      <Trash2 className=\"h-4 w-4\" />\r\n                    </Button>\r\n                  </AlertDialogTrigger>\r\n                  <AlertDialogContent>\r\n                    <AlertDialogHeader>\r\n                      <AlertDialogTitle>{t(\"admin.brand.deleteConfirm\")}</AlertDialogTitle>\r\n                      <AlertDialogDescription>\r\n                        {t(\"admin.brand.deleteWarning\")}\r\n                      </AlertDialogDescription>\r\n                    </AlertDialogHeader>\r\n                    <AlertDialogFooter>\r\n                      <AlertDialogCancel>{t(\"common.cancel\")}</AlertDialogCancel>\r\n                      <AlertDialogAction onClick={() => deleteBrand.mutate(brand.id)}>\r\n                        {t(\"common.delete\")}\r\n                      </AlertDialogAction>\r\n                    </AlertDialogFooter>\r\n                  </AlertDialogContent>\r\n                </AlertDialog>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        ))}\r\n      </div>\r\n\r\n      {filteredBrands?.length === 0 && (\r\n        <Card>\r\n          <CardContent className=\"py-12 text-center\">\r\n            <Building2 className=\"mx-auto h-12 w-12 text-muted-foreground/50 mb-4\" />\r\n            <p className=\"text-muted-foreground\">{t(\"admin.brand.empty\")}</p>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminBrands;\r\n"],"names":["generateId","quillModules","BrandContentBlocksEditor","blocks","onChange","i18n","useTranslation","uploadingId","setUploadingId","useState","addBlock","type","newBlock","removeBlock","id","b","moveBlock","index","direction","newBlocks","targetIndex","updateBlock","updates","handleImageUpload","file","toast","fileExt","fileName","uploadError","supabase","publicUrl","error","jsxs","jsx","Label","Button","Type","ImageIcon","Card","CardContent","block","ChevronUp","GripVertical","ChevronDown","Tabs","TabsList","TabsTrigger","TabsContent","ReactQuill","val","Input","e","Fragment","Upload","Trash2","BrandFormDialog","brand","trigger","useToast","createBrand","useCreateBrand","updateBrand","useUpdateBrand","open","setOpen","isSubmitting","setIsSubmitting","name","setName","nameEn","setNameEn","namePt","setNamePt","contentBlocks","setContentBlocks","logoFile","setLogoFile","logoPreview","setLogoPreview","useEffect","handleLogoChange","reader","uploadFile","prefix","handleSubmit","logoUrl","brandData","Dialog","DialogTrigger","DialogContent","DialogHeader","DialogTitle","Building2","DialogDescription","ScrollArea","Globe","X","AdminBrands","t","brands","isLoading","useBrands","deleteBrand","useDeleteBrand","getLocalizedField","useLocalizedContent","searchQuery","setSearchQuery","filteredBrands","Plus","Search","CardHeader","CardTitle","CardDescription","Edit","AlertDialog","AlertDialogTrigger","AlertDialogContent","AlertDialogHeader","AlertDialogTitle","AlertDialogDescription","AlertDialogFooter","AlertDialogCancel","AlertDialogAction"],"mappings":"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"}