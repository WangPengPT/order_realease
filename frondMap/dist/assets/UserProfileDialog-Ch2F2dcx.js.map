{"version":3,"file":"UserProfileDialog-Ch2F2dcx.js","sources":["../../src/components/admin/UserProfileDialog.tsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from \"@/components/ui/dialog\";\r\nimport {\r\n  AlertDialog,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n  AlertDialogContent,\r\n  AlertDialogDescription,\r\n  AlertDialogFooter,\r\n  AlertDialogHeader,\r\n  AlertDialogTitle,\r\n  AlertDialogTrigger,\r\n} from \"@/components/ui/alert-dialog\";\r\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Skeleton } from \"@/components/ui/skeleton\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\r\nimport { toast } from \"sonner\";\r\nimport { \r\n  Users, \r\n  Briefcase, \r\n  Shield, \r\n  Mail, \r\n  Phone, \r\n  Calendar,\r\n  Clock,\r\n  MapPin,\r\n  Star,\r\n  Heart,\r\n  MessageSquare,\r\n  Store,\r\n  ChevronRight,\r\n  ArrowLeft,\r\n  ExternalLink,\r\n  FileText,\r\n  User,\r\n  Trash2\r\n} from \"lucide-react\";\r\nimport { useLocalizedContent } from \"@/hooks/useLocalizedContent\";\r\nimport { formatDistanceToNow } from \"date-fns\";\r\n\r\ninterface UserProfileDialogProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  userId: string;\r\n  userName: string;\r\n  userRole: string;\r\n}\r\n\r\n// Predefined badge definitions\r\nconst BADGE_DEFINITIONS = [\r\n  { key: \"food_expert\", emoji: \"üçú\", labelZh: \"ÁæéÈ£üËææ‰∫∫\", labelEn: \"Food Expert\" },\r\n  { key: \"active_user\", emoji: \"‚ö°\", labelZh: \"Ê¥ªË∑ÉÁî®Êà∑\", labelEn: \"Active User\" },\r\n  { key: \"recipe_creator\", emoji: \"üë®‚Äçüç≥\", labelZh: \"È£üË∞±Âàõ‰ΩúËÄÖ\", labelEn: \"Recipe Creator\" },\r\n  { key: \"vip\", emoji: \"üëë\", labelZh: \"VIP\", labelEn: \"VIP\" },\r\n  { key: \"trusted\", emoji: \"‚úÖ\", labelZh: \"ËÆ§ËØÅÁî®Êà∑\", labelEn: \"Verified\" },\r\n  { key: \"early_bird\", emoji: \"üê¶\", labelZh: \"Êó©ÊúüÁî®Êà∑\", labelEn: \"Early Bird\" },\r\n  { key: \"super_fan\", emoji: \"üåü\", labelZh: \"Ë∂ÖÁ∫ßÁ≤â‰∏ù\", labelEn: \"Super Fan\" },\r\n  { key: \"influencer\", emoji: \"üì¢\", labelZh: \"ÊÑèËßÅÈ¢ÜË¢ñ\", labelEn: \"Influencer\" },\r\n] as const;\r\n\r\ntype BadgeKey = typeof BADGE_DEFINITIONS[number][\"key\"];\r\n\r\ninterface UserProfileData {\r\n  id: string;\r\n  display_name: string;\r\n  avatar_url: string | null;\r\n  phone: string | null;\r\n  created_at: string;\r\n  language_preference: string | null;\r\n  activity_terms_agreed: boolean | null;\r\n  activity_terms_agreed_at: string | null;\r\n  is_banned: boolean | null;\r\n  ban_reason: string | null;\r\n  badges: string[];\r\n  // Invitation code application fields\r\n  full_name: string | null;\r\n  nif: string | null;\r\n  contact: string | null;\r\n  address: string | null;\r\n}\r\n\r\ninterface UserStats {\r\n  favoriteRestaurants: number;\r\n  favoriteActivities: number;\r\n  comments: number;\r\n  ratings: number;\r\n  addresses: number;\r\n  restaurants: number;\r\n}\r\n\r\ntype DetailView = null | \"restaurants\" | \"activities\" | \"comments\" | \"ratings\" | \"addresses\" | \"managedRestaurants\";\r\n\r\nexport function UserProfileDialog({\r\n  open,\r\n  onOpenChange,\r\n  userId,\r\n  userName,\r\n  userRole,\r\n}: UserProfileDialogProps) {\r\n  const { t } = useTranslation();\r\n  const { getLocalizedField } = useLocalizedContent();\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [profile, setProfile] = useState<UserProfileData | null>(null);\r\n  const [email, setEmail] = useState<string | null>(null);\r\n  const [stats, setStats] = useState<UserStats>({\r\n    favoriteRestaurants: 0,\r\n    favoriteActivities: 0,\r\n    comments: 0,\r\n    ratings: 0,\r\n    addresses: 0,\r\n    restaurants: 0,\r\n  });\r\n  const [detailView, setDetailView] = useState<DetailView>(null);\r\n  const [detailData, setDetailData] = useState<any[]>([]);\r\n  const [detailLoading, setDetailLoading] = useState(false);\r\n  const [isClearingAvatar, setIsClearingAvatar] = useState(false);\r\n  const [isSavingBadges, setIsSavingBadges] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (open && userId) {\r\n      fetchUserProfile();\r\n    }\r\n  }, [open, userId]);\r\n\r\n  const fetchUserProfile = async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      // Fetch profile data\r\n      const { data: profileData, error: profileError } = await supabase\r\n        .from(\"profiles\")\r\n        .select(\"*\")\r\n        .eq(\"id\", userId)\r\n        .maybeSingle();\r\n\r\n      if (profileError) throw profileError;\r\n      setProfile(profileData);\r\n\r\n      // Fetch email using edge function\r\n      try {\r\n        const { data: emailData } = await supabase.functions.invoke(\"get-user-emails\", {\r\n          body: { userIds: [userId] },\r\n        });\r\n        if (emailData?.emails?.[userId]) {\r\n          setEmail(emailData.emails[userId]);\r\n        }\r\n      } catch (e) {\r\n        console.error(\"Error fetching email:\", e);\r\n      }\r\n\r\n      // Fetch stats in parallel\r\n      const [\r\n        favoritesResult,\r\n        subscriptionsResult,\r\n        commentsResult,\r\n        ratingsResult,\r\n        addressesResult,\r\n        restaurantsResult,\r\n      ] = await Promise.all([\r\n        supabase.from(\"favorites\").select(\"id\", { count: \"exact\", head: true }).eq(\"user_id\", userId),\r\n        supabase.from(\"subscriptions\").select(\"id\", { count: \"exact\", head: true }).eq(\"user_id\", userId),\r\n        supabase.from(\"comments\").select(\"id\", { count: \"exact\", head: true }).eq(\"user_id\", userId),\r\n        supabase.from(\"ratings\").select(\"id\", { count: \"exact\", head: true }).eq(\"user_id\", userId),\r\n        supabase.from(\"user_addresses\").select(\"id\", { count: \"exact\", head: true }).eq(\"user_id\", userId),\r\n        supabase.from(\"merchant_restaurants\").select(\"id\", { count: \"exact\", head: true }).eq(\"user_id\", userId),\r\n      ]);\r\n\r\n      setStats({\r\n        favoriteRestaurants: favoritesResult.count || 0,\r\n        favoriteActivities: subscriptionsResult.count || 0,\r\n        comments: commentsResult.count || 0,\r\n        ratings: ratingsResult.count || 0,\r\n        addresses: addressesResult.count || 0,\r\n        restaurants: restaurantsResult.count || 0,\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Error fetching user profile:\", error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleClearAvatar = async () => {\r\n    setIsClearingAvatar(true);\r\n    try {\r\n      const { error } = await supabase\r\n        .from(\"profiles\")\r\n        .update({ avatar_url: null })\r\n        .eq(\"id\", userId);\r\n      if (error) throw error;\r\n      setProfile(prev => prev ? { ...prev, avatar_url: null } : prev);\r\n      toast.success(t(\"admin.avatarCleared\", \"Â§¥ÂÉèÂ∑≤Ê∏ÖÈô§\"));\r\n    } catch (err) {\r\n      console.error(\"Clear avatar error:\", err);\r\n      toast.error(t(\"admin.avatarClearFailed\", \"Ê∏ÖÈô§Â§¥ÂÉèÂ§±Ë¥•\"));\r\n    } finally {\r\n      setIsClearingAvatar(false);\r\n    }\r\n  };\r\n\r\n  const handleToggleBadge = async (badgeKey: string) => {\r\n    if (!profile) return;\r\n    const currentBadges = profile.badges || [];\r\n    const newBadges = currentBadges.includes(badgeKey)\r\n      ? currentBadges.filter((b) => b !== badgeKey)\r\n      : [...currentBadges, badgeKey];\r\n\r\n    setIsSavingBadges(true);\r\n    try {\r\n      const { error } = await supabase\r\n        .from(\"profiles\")\r\n        .update({ badges: newBadges })\r\n        .eq(\"id\", userId);\r\n      if (error) throw error;\r\n      setProfile(prev => prev ? { ...prev, badges: newBadges } : prev);\r\n      toast.success(\r\n        newBadges.includes(badgeKey)\r\n          ? t(\"admin.badges.granted\", \"Â∑≤Êéà‰∫àÂããÁ´†\")\r\n          : t(\"admin.badges.revoked\", \"Â∑≤Êí§ÈîÄÂããÁ´†\")\r\n      );\r\n    } catch (err) {\r\n      console.error(\"Toggle badge error:\", err);\r\n      toast.error(t(\"admin.badges.saveFailed\", \"‰øùÂ≠òÂããÁ´†Â§±Ë¥•\"));\r\n    } finally {\r\n      setIsSavingBadges(false);\r\n    }\r\n  };\r\n\r\n  const fetchDetailData = async (type: DetailView) => {\r\n    if (!type) return;\r\n    setDetailLoading(true);\r\n    setDetailView(type);\r\n    \r\n    try {\r\n      switch (type) {\r\n        case \"restaurants\": {\r\n          const { data } = await supabase\r\n            .from(\"favorites\")\r\n            .select(\"created_at, restaurants(id, name, name_en, name_pt, image_url, rating, type, type_en, type_pt)\")\r\n            .eq(\"user_id\", userId)\r\n            .order(\"created_at\", { ascending: false });\r\n          setDetailData(data?.map(d => ({ ...d.restaurants, favorited_at: d.created_at })) || []);\r\n          break;\r\n        }\r\n        case \"activities\": {\r\n          const { data } = await supabase\r\n            .from(\"subscriptions\")\r\n            .select(\"created_at, activities(id, title_zh, title_en, title_pt, image_url, start_date, end_date)\")\r\n            .eq(\"user_id\", userId)\r\n            .order(\"created_at\", { ascending: false });\r\n          setDetailData(data?.map(d => ({ ...d.activities, subscribed_at: d.created_at })) || []);\r\n          break;\r\n        }\r\n        case \"comments\": {\r\n          const { data } = await supabase\r\n            .from(\"comments\")\r\n            .select(\"id, content, target_type, target_id, rating_value, created_at\")\r\n            .eq(\"user_id\", userId)\r\n            .order(\"created_at\", { ascending: false });\r\n          \r\n          // Fetch target names\r\n          if (data) {\r\n            const restaurantIds = data.filter(c => c.target_type === \"restaurant\").map(c => c.target_id);\r\n            const activityIds = data.filter(c => c.target_type === \"activity\").map(c => c.target_id);\r\n            \r\n            const [restaurantsRes, activitiesRes] = await Promise.all([\r\n              restaurantIds.length > 0 \r\n                ? supabase.from(\"restaurants\").select(\"id, name, name_en, name_pt\").in(\"id\", restaurantIds) \r\n                : { data: [] },\r\n              activityIds.length > 0 \r\n                ? supabase.from(\"activities\").select(\"id, title_zh, title_en, title_pt\").in(\"id\", activityIds) \r\n                : { data: [] },\r\n            ]);\r\n            \r\n            const restaurantMap = Object.fromEntries((restaurantsRes.data || []).map(r => [r.id, r]));\r\n            const activityMap = Object.fromEntries((activitiesRes.data || []).map(a => [a.id, a]));\r\n            \r\n            setDetailData(data.map(c => ({\r\n              ...c,\r\n              target: c.target_type === \"restaurant\" ? restaurantMap[c.target_id] : activityMap[c.target_id]\r\n            })));\r\n          }\r\n          break;\r\n        }\r\n        case \"ratings\": {\r\n          const { data } = await supabase\r\n            .from(\"ratings\")\r\n            .select(\"id, rating_value, price_range, created_at, restaurants(id, name, name_en, name_pt)\")\r\n            .eq(\"user_id\", userId)\r\n            .order(\"created_at\", { ascending: false });\r\n          setDetailData(data?.map(d => ({ ...d, restaurant: d.restaurants })) || []);\r\n          break;\r\n        }\r\n        case \"addresses\": {\r\n          const { data } = await supabase\r\n            .from(\"user_addresses\")\r\n            .select(\"*\")\r\n            .eq(\"user_id\", userId)\r\n            .order(\"is_default\", { ascending: false });\r\n          setDetailData(data || []);\r\n          break;\r\n        }\r\n        case \"managedRestaurants\": {\r\n          const { data } = await supabase\r\n            .from(\"merchant_restaurants\")\r\n            .select(\"created_at, restaurants(id, name, name_en, name_pt, image_url, address)\")\r\n            .eq(\"user_id\", userId)\r\n            .order(\"created_at\", { ascending: false });\r\n          setDetailData(data?.map(d => ({ ...d.restaurants, assigned_at: d.created_at })) || []);\r\n          break;\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error fetching detail data:\", error);\r\n      setDetailData([]);\r\n    } finally {\r\n      setDetailLoading(false);\r\n    }\r\n  };\r\n\r\n  const getDetailTitle = (type: DetailView) => {\r\n    switch (type) {\r\n      case \"restaurants\": return t(\"admin.restaurantFavorites\");\r\n      case \"activities\": return t(\"admin.activityFavorites\");\r\n      case \"comments\": return t(\"admin.commentsCount\");\r\n      case \"ratings\": return t(\"admin.ratingsCount\");\r\n      case \"addresses\": return t(\"admin.addressesCount\");\r\n      case \"managedRestaurants\": return t(\"admin.managedRestaurants\");\r\n      default: return \"\";\r\n    }\r\n  };\r\n\r\n  const getRoleBadgeColor = (role: string) => {\r\n    switch (role) {\r\n      case \"admin\":\r\n        return \"bg-primary text-primary-foreground\";\r\n      case \"supervisor\":\r\n        return \"bg-blue-500 text-white\";\r\n      case \"merchant\":\r\n        return \"bg-emerald-500 text-white\";\r\n      default:\r\n        return \"bg-muted text-muted-foreground\";\r\n    }\r\n  };\r\n\r\n  const getRoleIcon = (role: string) => {\r\n    switch (role) {\r\n      case \"admin\":\r\n        return <Shield className=\"h-3.5 w-3.5\" />;\r\n      case \"supervisor\":\r\n        return <Shield className=\"h-3.5 w-3.5\" />;\r\n      case \"merchant\":\r\n        return <Briefcase className=\"h-3.5 w-3.5\" />;\r\n      default:\r\n        return <Users className=\"h-3.5 w-3.5\" />;\r\n    }\r\n  };\r\n\r\n  const formatDate = (dateString: string | null) => {\r\n    if (!dateString) return \"-\";\r\n    return new Date(dateString).toLocaleDateString(\"zh-CN\", {\r\n      year: \"numeric\",\r\n      month: \"long\",\r\n      day: \"numeric\",\r\n    });\r\n  };\r\n\r\n  const handleDialogClose = (open: boolean) => {\r\n    if (!open) {\r\n      setDetailView(null);\r\n      setDetailData([]);\r\n    }\r\n    onOpenChange(open);\r\n  };\r\n\r\n  const renderDetailView = () => {\r\n    if (detailLoading) {\r\n      return (\r\n        <div className=\"space-y-3\">\r\n          {[1, 2, 3].map(i => (\r\n            <Skeleton key={i} className=\"h-16 w-full\" />\r\n          ))}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    if (detailData.length === 0) {\r\n      return (\r\n        <div className=\"text-center py-8 text-muted-foreground\">\r\n          {t(\"common.noDataFound\")}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    switch (detailView) {\r\n      case \"restaurants\":\r\n        return (\r\n          <div className=\"space-y-2\">\r\n            {detailData.map((restaurant) => (\r\n              <Link \r\n                key={restaurant.id}\r\n                to={`/restaurant/${restaurant.id}`}\r\n                target=\"_blank\"\r\n                className=\"flex items-center gap-3 p-3 rounded-lg border hover:bg-muted/50 transition-colors\"\r\n              >\r\n                <img \r\n                  src={restaurant.image_url || \"https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=100&q=80\"} \r\n                  alt={getLocalizedField(restaurant, \"name\")}\r\n                  className=\"w-12 h-12 rounded-lg object-cover flex-shrink-0\"\r\n                />\r\n                <div className=\"flex-1 min-w-0\">\r\n                  <p className=\"font-medium truncate\">{getLocalizedField(restaurant, \"name\")}</p>\r\n                  <p className=\"text-xs text-muted-foreground truncate\">{getLocalizedField(restaurant, \"type\")}</p>\r\n                </div>\r\n                {restaurant.rating && (\r\n                  <div className=\"flex items-center gap-1 text-sm\">\r\n                    <Star className=\"h-3.5 w-3.5 fill-yellow-500 text-yellow-500\" />\r\n                    {restaurant.rating.toFixed(1)}\r\n                  </div>\r\n                )}\r\n                <ExternalLink className=\"h-4 w-4 text-muted-foreground flex-shrink-0\" />\r\n              </Link>\r\n            ))}\r\n          </div>\r\n        );\r\n\r\n      case \"activities\":\r\n        return (\r\n          <div className=\"space-y-2\">\r\n            {detailData.map((activity) => (\r\n              <Link \r\n                key={activity.id}\r\n                to={`/activity/${activity.id}`}\r\n                target=\"_blank\"\r\n                className=\"flex items-center gap-3 p-3 rounded-lg border hover:bg-muted/50 transition-colors\"\r\n              >\r\n                {activity.image_url && (\r\n                  <img \r\n                    src={activity.image_url} \r\n                    alt={getLocalizedField(activity, \"title\")}\r\n                    className=\"w-12 h-12 rounded-lg object-cover flex-shrink-0\"\r\n                  />\r\n                )}\r\n                <div className=\"flex-1 min-w-0\">\r\n                  <p className=\"font-medium truncate\">{getLocalizedField(activity, \"title\")}</p>\r\n                  <p className=\"text-xs text-muted-foreground\">\r\n                    {new Date(activity.start_date).toLocaleDateString()}\r\n                    {activity.end_date && ` - ${new Date(activity.end_date).toLocaleDateString()}`}\r\n                  </p>\r\n                </div>\r\n                <ExternalLink className=\"h-4 w-4 text-muted-foreground flex-shrink-0\" />\r\n              </Link>\r\n            ))}\r\n          </div>\r\n        );\r\n\r\n      case \"comments\":\r\n        return (\r\n          <div className=\"space-y-2\">\r\n            {detailData.map((comment) => (\r\n              <Link \r\n                key={comment.id}\r\n                to={`/${comment.target_type}/${comment.target_id}`}\r\n                target=\"_blank\"\r\n                className=\"block p-3 rounded-lg border hover:bg-muted/50 transition-colors\"\r\n              >\r\n                <div className=\"flex items-center justify-between mb-1\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <Badge variant=\"outline\" className=\"text-xs\">\r\n                      {comment.target_type === \"restaurant\" ? t(\"common.restaurant\") : t(\"common.activity\")}\r\n                    </Badge>\r\n                    <span className=\"text-sm font-medium truncate\">\r\n                      {comment.target && (comment.target_type === \"restaurant\" \r\n                        ? getLocalizedField(comment.target, \"name\")\r\n                        : getLocalizedField(comment.target, \"title\"))}\r\n                    </span>\r\n                  </div>\r\n                  {comment.rating_value && (\r\n                    <div className=\"flex items-center gap-1 text-sm\">\r\n                      <Star className=\"h-3.5 w-3.5 fill-yellow-500 text-yellow-500\" />\r\n                      {comment.rating_value}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n                <p className=\"text-sm text-muted-foreground line-clamp-2\">{comment.content}</p>\r\n                <p className=\"text-xs text-muted-foreground mt-1\">\r\n                  {formatDistanceToNow(new Date(comment.created_at), { addSuffix: true })}\r\n                </p>\r\n              </Link>\r\n            ))}\r\n          </div>\r\n        );\r\n\r\n      case \"ratings\":\r\n        return (\r\n          <div className=\"space-y-2\">\r\n            {detailData.map((rating) => (\r\n              <Link \r\n                key={rating.id}\r\n                to={`/restaurant/${rating.restaurant?.id}`}\r\n                target=\"_blank\"\r\n                className=\"flex items-center gap-3 p-3 rounded-lg border hover:bg-muted/50 transition-colors\"\r\n              >\r\n                <div className=\"flex-1 min-w-0\">\r\n                  <p className=\"font-medium truncate\">{getLocalizedField(rating.restaurant, \"name\")}</p>\r\n                  <p className=\"text-xs text-muted-foreground\">\r\n                    {formatDistanceToNow(new Date(rating.created_at), { addSuffix: true })}\r\n                  </p>\r\n                </div>\r\n                <div className=\"flex items-center gap-1\">\r\n                  <Star className=\"h-4 w-4 fill-yellow-500 text-yellow-500\" />\r\n                  <span className=\"font-semibold\">{rating.rating_value}</span>\r\n                </div>\r\n                <ExternalLink className=\"h-4 w-4 text-muted-foreground flex-shrink-0\" />\r\n              </Link>\r\n            ))}\r\n          </div>\r\n        );\r\n\r\n      case \"addresses\":\r\n        return (\r\n          <div className=\"space-y-2\">\r\n            {detailData.map((address) => (\r\n              <div key={address.id} className=\"p-3 rounded-lg border\">\r\n                <div className=\"flex items-center gap-2 mb-1\">\r\n                  <span className=\"font-medium\">{address.label}</span>\r\n                  {address.is_default && (\r\n                    <Badge variant=\"secondary\" className=\"text-xs\">{t(\"profile.defaultAddress\")}</Badge>\r\n                  )}\r\n                </div>\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                  {address.street}, {address.district && `${address.district}, `}{address.city}\r\n                </p>\r\n                <p className=\"text-xs text-muted-foreground\">\r\n                  {address.postal_code && `${address.postal_code}, `}{address.country}\r\n                </p>\r\n                {address.phone && (\r\n                  <p className=\"text-xs text-muted-foreground mt-1\">\r\n                    {address.phone_code} {address.phone}\r\n                  </p>\r\n                )}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        );\r\n\r\n      case \"managedRestaurants\":\r\n        return (\r\n          <div className=\"space-y-2\">\r\n            {detailData.map((restaurant) => (\r\n              <Link \r\n                key={restaurant.id}\r\n                to={`/restaurant/${restaurant.id}`}\r\n                target=\"_blank\"\r\n                className=\"flex items-center gap-3 p-3 rounded-lg border hover:bg-muted/50 transition-colors\"\r\n              >\r\n                {restaurant.image_url && (\r\n                  <img \r\n                    src={restaurant.image_url} \r\n                    alt={getLocalizedField(restaurant, \"name\")}\r\n                    className=\"w-12 h-12 rounded-lg object-cover flex-shrink-0\"\r\n                  />\r\n                )}\r\n                <div className=\"flex-1 min-w-0\">\r\n                  <p className=\"font-medium truncate\">{getLocalizedField(restaurant, \"name\")}</p>\r\n                  <p className=\"text-xs text-muted-foreground truncate\">{restaurant.address}</p>\r\n                </div>\r\n                <ExternalLink className=\"h-4 w-4 text-muted-foreground flex-shrink-0\" />\r\n              </Link>\r\n            ))}\r\n          </div>\r\n        );\r\n\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={handleDialogClose}>\r\n      <DialogContent className=\"sm:max-w-[500px] max-h-[90vh] overflow-y-auto\">\r\n        {detailView ? (\r\n          // Detail View\r\n          <>\r\n            <DialogHeader>\r\n              <div className=\"flex items-center gap-2\">\r\n                <Button \r\n                  variant=\"ghost\" \r\n                  size=\"icon\" \r\n                  className=\"h-8 w-8\"\r\n                  onClick={() => {\r\n                    setDetailView(null);\r\n                    setDetailData([]);\r\n                  }}\r\n                >\r\n                  <ArrowLeft className=\"h-4 w-4\" />\r\n                </Button>\r\n                <div>\r\n                  <DialogTitle>{getDetailTitle(detailView)}</DialogTitle>\r\n                  <DialogDescription>\r\n                    {profile?.display_name} - {detailData.length} {t(\"common.items\")}\r\n                  </DialogDescription>\r\n                </div>\r\n              </div>\r\n            </DialogHeader>\r\n            <ScrollArea className=\"max-h-[60vh] pr-4\">\r\n              {renderDetailView()}\r\n            </ScrollArea>\r\n          </>\r\n        ) : (\r\n          // Main Profile View\r\n          <>\r\n            <DialogHeader>\r\n              <DialogTitle>{t(\"admin.viewProfile\")}</DialogTitle>\r\n              <DialogDescription>\r\n                {t(\"admin.userProfileDetails\")}\r\n              </DialogDescription>\r\n            </DialogHeader>\r\n\r\n            {isLoading ? (\r\n              <div className=\"space-y-4\">\r\n                <div className=\"flex items-center gap-4\">\r\n                  <Skeleton className=\"h-16 w-16 rounded-full\" />\r\n                  <div className=\"space-y-2\">\r\n                    <Skeleton className=\"h-5 w-32\" />\r\n                    <Skeleton className=\"h-4 w-24\" />\r\n                  </div>\r\n                </div>\r\n                <Skeleton className=\"h-20 w-full\" />\r\n                <Skeleton className=\"h-32 w-full\" />\r\n              </div>\r\n            ) : profile ? (\r\n              <div className=\"space-y-6\">\r\n                {/* User Header */}\r\n                <div className=\"flex items-center gap-4\">\r\n                  <div className=\"flex flex-col items-center gap-1.5\">\r\n                    <Avatar className=\"h-16 w-16 border-2 border-primary/20\">\r\n                      <AvatarImage src={profile.avatar_url || \"\"} alt={profile.display_name} />\r\n                      <AvatarFallback className=\"text-xl bg-primary/10 text-primary\">\r\n                        {profile.display_name.charAt(0).toUpperCase()}\r\n                      </AvatarFallback>\r\n                    </Avatar>\r\n                    {profile.avatar_url && (\r\n                      <AlertDialog>\r\n                        <AlertDialogTrigger asChild>\r\n                          <button\r\n                            className=\"text-xs text-destructive hover:text-destructive/80 flex items-center gap-0.5 transition-colors\"\r\n                            title={t(\"admin.clearAvatar\", \"Ê∏ÖÈô§Â§¥ÂÉè\")}\r\n                          >\r\n                            <Trash2 className=\"h-3 w-3\" />\r\n                            {t(\"admin.clearAvatar\", \"Ê∏ÖÈô§Â§¥ÂÉè\")}\r\n                          </button>\r\n                        </AlertDialogTrigger>\r\n                        <AlertDialogContent>\r\n                          <AlertDialogHeader>\r\n                            <AlertDialogTitle>{t(\"admin.clearAvatarTitle\", \"Ê∏ÖÈô§Áî®Êà∑Â§¥ÂÉè\")}</AlertDialogTitle>\r\n                            <AlertDialogDescription>\r\n                              {t(\"admin.clearAvatarDesc\", \"Á°ÆÂÆöË¶ÅÊ∏ÖÈô§ËØ•Áî®Êà∑ÁöÑÂ§¥ÂÉèÂêóÔºüÁî®Êà∑Â∞ÜÊòæÁ§∫ÈªòËÆ§Â§¥ÂÉèÔºåÊ≠§Êìç‰Ωú‰∏çÂèØÊí§ÈîÄ„ÄÇ\")}\r\n                            </AlertDialogDescription>\r\n                          </AlertDialogHeader>\r\n                          <AlertDialogFooter>\r\n                            <AlertDialogCancel>{t(\"common.cancel\", \"ÂèñÊ∂à\")}</AlertDialogCancel>\r\n                            <AlertDialogAction\r\n                              onClick={handleClearAvatar}\r\n                              disabled={isClearingAvatar}\r\n                              className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\r\n                            >\r\n                              {isClearingAvatar ? t(\"common.processing\", \"Â§ÑÁêÜ‰∏≠‚Ä¶\") : t(\"admin.clearAvatar\", \"Ê∏ÖÈô§Â§¥ÂÉè\")}\r\n                            </AlertDialogAction>\r\n                          </AlertDialogFooter>\r\n                        </AlertDialogContent>\r\n                      </AlertDialog>\r\n                    )}\r\n                  </div>\r\n                  <div className=\"space-y-1\">\r\n                    <h3 className=\"text-xl font-semibold\">{profile.display_name}</h3>\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <Badge className={`${getRoleBadgeColor(userRole)} gap-1`}>\r\n                        {getRoleIcon(userRole)}\r\n                        <span className=\"capitalize\">{userRole}</span>\r\n                      </Badge>\r\n                      {profile.is_banned && (\r\n                        <Badge variant=\"destructive\">{t(\"admin.banned\")}</Badge>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <Separator />\r\n\r\n                {/* Contact Info */}\r\n                <div className=\"space-y-3\">\r\n                  <h4 className=\"font-medium text-sm text-muted-foreground\">{t(\"admin.contactInfo\")}</h4>\r\n                  <div className=\"grid grid-cols-1 gap-3\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <Mail className=\"h-4 w-4 text-muted-foreground\" />\r\n                      <span className=\"text-sm\">{email || \"-\"}</span>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <Phone className=\"h-4 w-4 text-muted-foreground\" />\r\n                      <span className=\"text-sm\">{profile.phone || \"-\"}</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Application Info - Only shown if user has invitation code data */}\r\n                {(profile.full_name || profile.nif || profile.contact || profile.address) && (\r\n                  <>\r\n                    <Separator />\r\n                    <div className=\"space-y-3\">\r\n                      <h4 className=\"font-medium text-sm text-muted-foreground\">{t(\"admin.applicationInfo\")}</h4>\r\n                      <div className=\"grid grid-cols-1 gap-3\">\r\n                        {profile.full_name && (\r\n                          <div className=\"flex items-center gap-3\">\r\n                            <User className=\"h-4 w-4 text-muted-foreground\" />\r\n                            <div className=\"text-sm\">\r\n                              <p className=\"text-muted-foreground text-xs\">{t(\"admin.fullName\")}</p>\r\n                              <p>{profile.full_name}</p>\r\n                            </div>\r\n                          </div>\r\n                        )}\r\n                        {profile.nif && (\r\n                          <div className=\"flex items-center gap-3\">\r\n                            <FileText className=\"h-4 w-4 text-muted-foreground\" />\r\n                            <div className=\"text-sm\">\r\n                              <p className=\"text-muted-foreground text-xs\">{t(\"admin.nif\")}</p>\r\n                              <p>{profile.nif}</p>\r\n                            </div>\r\n                          </div>\r\n                        )}\r\n                        {profile.contact && (\r\n                          <div className=\"flex items-center gap-3\">\r\n                            <Phone className=\"h-4 w-4 text-muted-foreground\" />\r\n                            <div className=\"text-sm\">\r\n                              <p className=\"text-muted-foreground text-xs\">{t(\"admin.contactMethod\")}</p>\r\n                              <p>{profile.contact}</p>\r\n                            </div>\r\n                          </div>\r\n                        )}\r\n                        {profile.address && (\r\n                          <div className=\"flex items-center gap-3\">\r\n                            <MapPin className=\"h-4 w-4 text-muted-foreground\" />\r\n                            <div className=\"text-sm\">\r\n                              <p className=\"text-muted-foreground text-xs\">{t(\"admin.address\")}</p>\r\n                              <p>{profile.address}</p>\r\n                            </div>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </>\r\n                )}\r\n\r\n                <Separator />\r\n\r\n                {/* Account Info */}\r\n                <div className=\"space-y-3\">\r\n                  <h4 className=\"font-medium text-sm text-muted-foreground\">{t(\"admin.accountInfo\")}</h4>\r\n                  <div className=\"grid grid-cols-2 gap-3\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <Calendar className=\"h-4 w-4 text-muted-foreground\" />\r\n                      <div className=\"text-sm\">\r\n                        <p className=\"text-muted-foreground text-xs\">{t(\"admin.registrationTime\")}</p>\r\n                        <p>{formatDate(profile.created_at)}</p>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <Clock className=\"h-4 w-4 text-muted-foreground\" />\r\n                      <div className=\"text-sm\">\r\n                        <p className=\"text-muted-foreground text-xs\">{t(\"admin.languagePreference\")}</p>\r\n                        <p>{profile.language_preference || \"en\"}</p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  {profile.activity_terms_agreed && (\r\n                    <div className=\"flex items-center gap-2 text-sm text-emerald-600\">\r\n                      <Shield className=\"h-4 w-4\" />\r\n                      <span>{t(\"admin.agreedActivityTerms\")} ({formatDate(profile.activity_terms_agreed_at)})</span>\r\n                    </div>\r\n                  )}\r\n                  {profile.is_banned && profile.ban_reason && (\r\n                    <div className=\"p-3 bg-destructive/10 rounded-lg\">\r\n                      <p className=\"text-sm text-destructive font-medium\">{t(\"admin.banReason\")}:</p>\r\n                      <p className=\"text-sm text-destructive/80\">{profile.ban_reason}</p>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                <Separator />\r\n\r\n                {/* Statistics - Clickable */}\r\n                <div className=\"space-y-3\">\r\n                  <h4 className=\"font-medium text-sm text-muted-foreground\">{t(\"admin.userStats\")}</h4>\r\n                  <div className=\"grid grid-cols-3 gap-2\">\r\n                    <Card \r\n                      className={`bg-muted/30 transition-colors ${stats.favoriteRestaurants > 0 ? 'cursor-pointer hover:bg-muted/50' : ''}`}\r\n                      onClick={() => stats.favoriteRestaurants > 0 && fetchDetailData(\"restaurants\")}\r\n                    >\r\n                      <CardContent className=\"p-3 text-center relative\">\r\n                        <Heart className=\"h-4 w-4 mx-auto mb-1 text-red-500\" />\r\n                        <p className=\"text-lg font-semibold\">{stats.favoriteRestaurants}</p>\r\n                        <p className=\"text-xs text-muted-foreground\">{t(\"admin.restaurantFavorites\")}</p>\r\n                        {stats.favoriteRestaurants > 0 && (\r\n                          <ChevronRight className=\"h-3 w-3 absolute top-2 right-2 text-muted-foreground\" />\r\n                        )}\r\n                      </CardContent>\r\n                    </Card>\r\n                    <Card \r\n                      className={`bg-muted/30 transition-colors ${stats.favoriteActivities > 0 ? 'cursor-pointer hover:bg-muted/50' : ''}`}\r\n                      onClick={() => stats.favoriteActivities > 0 && fetchDetailData(\"activities\")}\r\n                    >\r\n                      <CardContent className=\"p-3 text-center relative\">\r\n                        <Heart className=\"h-4 w-4 mx-auto mb-1 text-primary\" />\r\n                        <p className=\"text-lg font-semibold\">{stats.favoriteActivities}</p>\r\n                        <p className=\"text-xs text-muted-foreground\">{t(\"admin.activityFavorites\")}</p>\r\n                        {stats.favoriteActivities > 0 && (\r\n                          <ChevronRight className=\"h-3 w-3 absolute top-2 right-2 text-muted-foreground\" />\r\n                        )}\r\n                      </CardContent>\r\n                    </Card>\r\n                    <Card \r\n                      className={`bg-muted/30 transition-colors ${stats.comments > 0 ? 'cursor-pointer hover:bg-muted/50' : ''}`}\r\n                      onClick={() => stats.comments > 0 && fetchDetailData(\"comments\")}\r\n                    >\r\n                      <CardContent className=\"p-3 text-center relative\">\r\n                        <MessageSquare className=\"h-4 w-4 mx-auto mb-1 text-blue-500\" />\r\n                        <p className=\"text-lg font-semibold\">{stats.comments}</p>\r\n                        <p className=\"text-xs text-muted-foreground\">{t(\"admin.commentsCount\")}</p>\r\n                        {stats.comments > 0 && (\r\n                          <ChevronRight className=\"h-3 w-3 absolute top-2 right-2 text-muted-foreground\" />\r\n                        )}\r\n                      </CardContent>\r\n                    </Card>\r\n                    <Card \r\n                      className={`bg-muted/30 transition-colors ${stats.ratings > 0 ? 'cursor-pointer hover:bg-muted/50' : ''}`}\r\n                      onClick={() => stats.ratings > 0 && fetchDetailData(\"ratings\")}\r\n                    >\r\n                      <CardContent className=\"p-3 text-center relative\">\r\n                        <Star className=\"h-4 w-4 mx-auto mb-1 text-yellow-500\" />\r\n                        <p className=\"text-lg font-semibold\">{stats.ratings}</p>\r\n                        <p className=\"text-xs text-muted-foreground\">{t(\"admin.ratingsCount\")}</p>\r\n                        {stats.ratings > 0 && (\r\n                          <ChevronRight className=\"h-3 w-3 absolute top-2 right-2 text-muted-foreground\" />\r\n                        )}\r\n                      </CardContent>\r\n                    </Card>\r\n                    <Card \r\n                      className={`bg-muted/30 transition-colors ${stats.addresses > 0 ? 'cursor-pointer hover:bg-muted/50' : ''}`}\r\n                      onClick={() => stats.addresses > 0 && fetchDetailData(\"addresses\")}\r\n                    >\r\n                      <CardContent className=\"p-3 text-center relative\">\r\n                        <MapPin className=\"h-4 w-4 mx-auto mb-1 text-emerald-500\" />\r\n                        <p className=\"text-lg font-semibold\">{stats.addresses}</p>\r\n                        <p className=\"text-xs text-muted-foreground\">{t(\"admin.addressesCount\")}</p>\r\n                        {stats.addresses > 0 && (\r\n                          <ChevronRight className=\"h-3 w-3 absolute top-2 right-2 text-muted-foreground\" />\r\n                        )}\r\n                      </CardContent>\r\n                    </Card>\r\n                    {(userRole === \"merchant\" || userRole === \"supervisor\") && (\r\n                      <Card \r\n                        className={`bg-muted/30 transition-colors ${stats.restaurants > 0 ? 'cursor-pointer hover:bg-muted/50' : ''}`}\r\n                        onClick={() => stats.restaurants > 0 && fetchDetailData(\"managedRestaurants\")}\r\n                      >\r\n                        <CardContent className=\"p-3 text-center relative\">\r\n                          <Store className=\"h-4 w-4 mx-auto mb-1 text-orange-500\" />\r\n                          <p className=\"text-lg font-semibold\">{stats.restaurants}</p>\r\n                          <p className=\"text-xs text-muted-foreground\">{t(\"admin.managedRestaurants\")}</p>\r\n                          {stats.restaurants > 0 && (\r\n                            <ChevronRight className=\"h-3 w-3 absolute top-2 right-2 text-muted-foreground\" />\r\n                          )}\r\n                        </CardContent>\r\n                      </Card>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div className=\"text-center py-8 text-muted-foreground\">\r\n                {t(\"common.noDataFound\")}\r\n              </div>\r\n            )}\r\n          </>\r\n        )}\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n"],"names":["UserProfileDialog","open","onOpenChange","userId","userName","userRole","t","useTranslation","getLocalizedField","useLocalizedContent","isLoading","setIsLoading","useState","profile","setProfile","email","setEmail","stats","setStats","detailView","setDetailView","detailData","setDetailData","detailLoading","setDetailLoading","isClearingAvatar","setIsClearingAvatar","useEffect","fetchUserProfile","profileData","profileError","supabase","emailData","e","favoritesResult","subscriptionsResult","commentsResult","ratingsResult","addressesResult","restaurantsResult","error","handleClearAvatar","prev","toast","err","fetchDetailData","type","data","restaurantIds","c","activityIds","restaurantsRes","activitiesRes","restaurantMap","r","activityMap","a","getDetailTitle","getRoleBadgeColor","role","getRoleIcon","jsx","Shield","Briefcase","Users","formatDate","dateString","handleDialogClose","renderDetailView","Skeleton","i","restaurant","jsxs","Link","Star","ExternalLink","activity","comment","Badge","rating","address","Dialog","DialogContent","Fragment","DialogHeader","Button","ArrowLeft","DialogTitle","DialogDescription","ScrollArea","Avatar","AvatarImage","AvatarFallback","AlertDialog","AlertDialogTrigger","Trash2","AlertDialogContent","AlertDialogHeader","AlertDialogTitle","AlertDialogDescription","AlertDialogFooter","AlertDialogCancel","AlertDialogAction","Separator","Mail","Phone","User","FileText","MapPin","Calendar","Clock","Card","CardContent","Heart","ChevronRight","MessageSquare","Store"],"mappings":"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"}