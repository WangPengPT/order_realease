{"version":3,"file":"SavedRecipeDetail-Ba6MHEAG.js","sources":["../../src/components/skeletons/PageSkeleton.tsx","../../src/pages/SavedRecipeDetail.tsx"],"sourcesContent":["import { Skeleton } from \"@/components/ui/skeleton\";\r\n\r\ninterface PageSkeletonProps {\r\n  showHeader?: boolean;\r\n  showFilters?: boolean;\r\n  children?: React.ReactNode;\r\n}\r\n\r\nconst PageSkeleton = ({ showHeader = true, showFilters = true, children }: PageSkeletonProps) => {\r\n  return (\r\n    <div className=\"container mx-auto px-4 py-6 sm:py-8 animate-fade-in\">\r\n      {showHeader && (\r\n        <div className=\"mb-6 sm:mb-8\">\r\n          {/* Page title */}\r\n          <Skeleton className=\"h-8 sm:h-10 w-48 mb-2\" />\r\n          {/* Page description */}\r\n          <Skeleton className=\"h-4 sm:h-5 w-72\" />\r\n        </div>\r\n      )}\r\n      \r\n      {showFilters && (\r\n        <div className=\"flex flex-col sm:flex-row gap-3 sm:gap-4 mb-6\">\r\n          {/* Search bar */}\r\n          <Skeleton className=\"h-10 flex-1 max-w-md rounded-md\" />\r\n          {/* Filter buttons */}\r\n          <div className=\"flex gap-2\">\r\n            <Skeleton className=\"h-10 w-28 rounded-md\" />\r\n            <Skeleton className=\"h-10 w-24 rounded-md\" />\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PageSkeleton;\r\n","import { useParams, useNavigate } from \"react-router-dom\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { useAuth } from \"@/contexts/AuthContext\";\r\nimport { AIRecipeSuggestion, useAIRecipe } from \"@/hooks/useAIRecipe\";\r\nimport { useState, useEffect, useRef } from \"react\";\r\nimport { ArrowLeft, Clock, Users, ChefHat, PlayCircle, List, Utensils, Trash2, Sparkles, Image } from \"lucide-react\";\r\nimport { Skeleton } from \"@/components/ui/skeleton\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader } from \"@/components/ui/card\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\nimport RecipeCookingMode from \"@/components/community/recipe/RecipeCookingMode\";\r\nimport { PageSkeleton } from \"@/components/skeletons\";\r\nimport { useSavedRecipes } from \"@/hooks/useSavedRecipes\";\r\nimport { useCreateRecipe } from \"@/hooks/useCreateRecipe\";\r\nimport ResultPhotoStep from \"@/components/ai-recipe/ResultPhotoStep\";\r\nimport PublishConfirmStep from \"@/components/ai-recipe/PublishConfirmStep\";\r\nimport { toast } from \"sonner\";\r\n\r\ntype ViewMode = \"guided\" | \"full\";\r\ntype GuidedPhase = \"overview\" | \"cooking\" | \"result\" | \"publish\";\r\n\r\nconst SavedRecipeDetail = () => {\r\n  const { id } = useParams<{ id: string }>();\r\n  const navigate = useNavigate();\r\n  const { t, i18n } = useTranslation();\r\n  const { user } = useAuth();\r\n  const { deleteRecipe } = useSavedRecipes();\r\n  const createRecipe = useCreateRecipe();\r\n  const { uploadImage, verifyResultPhoto, isVerifying } = useAIRecipe();\r\n  const [viewMode, setViewMode] = useState<ViewMode>(\"guided\");\r\n  const [guidedPhase, setGuidedPhase] = useState<GuidedPhase>(\"overview\");\r\n  const [resultImageUrl, setResultImageUrl] = useState(\"\");\r\n  const [photoVerified, setPhotoVerified] = useState(false);\r\n  const [recipeImageUrl, setRecipeImageUrl] = useState<string | null>(null);\r\n  const [recipeImageLoading, setRecipeImageLoading] = useState(false);\r\n  const imageFetchedRef = useRef<string | null>(null);\r\n\r\n  const handleCookingComplete = () => {\r\n    setGuidedPhase(\"result\");\r\n  };\r\n\r\n  const handlePhotoVerified = (url: string, verified: boolean) => {\r\n    setResultImageUrl(url);\r\n    setPhotoVerified(verified);\r\n    if (verified) {\r\n      setGuidedPhase(\"publish\");\r\n    }\r\n  };\r\n\r\n  const handlePublish = async (notes?: string) => {\r\n    if (!recipeData || !resultImageUrl) return;\r\n    try {\r\n      await createRecipe.mutateAsync({\r\n        recipe_name: recipeData.recipe_name,\r\n        subtitle: recipeData.subtitle,\r\n        cook_time: recipeData.cook_time,\r\n        difficulty: recipeData.difficulty,\r\n        servings: recipeData.servings,\r\n        ingredients: recipeData.ingredients,\r\n        steps: recipeData.steps.map((s, i) => ({ ...s, order: i + 1 })),\r\n        cover_image: resultImageUrl,\r\n        introduction: notes?.trim() || recipeData.introduction,\r\n        ai_recipe_source: {\r\n          source: \"saved_recipe\",\r\n          saved_recipe_id: id,\r\n          result_image: resultImageUrl,\r\n          photo_verified: photoVerified,\r\n        },\r\n      });\r\n      toast.success(t(\"aiRecipe.allPublished\", \"È£üË∞±Â∑≤ÂèëÂ∏ÉÂà∞Á§æÂå∫ÔºÅ\"));\r\n      navigate(\"/community\");\r\n    } catch {}\r\n  };\r\n\r\n  const handleSkipPublish = () => {\r\n    setGuidedPhase(\"overview\");\r\n    toast.success(t(\"aiRecipe.cookingComplete\", \"Â§™Ê£í‰∫ÜÔºÅÁÉπÈ•™ÂÆåÊàêÔºÅ\"));\r\n  };\r\n\r\n  const { data: recipe, isLoading } = useQuery({\r\n    queryKey: [\"saved-recipe\", id],\r\n    queryFn: async () => {\r\n      const { data, error } = await supabase\r\n        .from(\"saved_recipes\")\r\n        .select(\"*\")\r\n        .eq(\"id\", id!)\r\n        .single();\r\n      if (error) throw error;\r\n      return data as unknown as { id: string; recipe_name: string; recipe_data: AIRecipeSuggestion; created_at: string };\r\n    },\r\n    enabled: !!id && !!user,\r\n  });\r\n\r\n  // Fetch recipe image async (same logic as SavedRecipeDetailDialog)\r\n  useEffect(() => {\r\n    if (!recipe) return;\r\n    const recipeData = recipe.recipe_data;\r\n    if ((recipeData as any).image_url) {\r\n      setRecipeImageUrl((recipeData as any).image_url);\r\n      return;\r\n    }\r\n    if (imageFetchedRef.current === recipe.recipe_name) return;\r\n    imageFetchedRef.current = recipe.recipe_name;\r\n    setRecipeImageLoading(true);\r\n    const IMAGE_URL = `${import.meta.env.VITE_SUPABASE_URL}/functions/v1/ai-recipe/generate-images`;\r\n    fetch(IMAGE_URL, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${import.meta.env.VITE_SUPABASE_PUBLISHABLE_KEY}`,\r\n      },\r\n      body: JSON.stringify({\r\n        recipes: [{ recipe_name: recipeData.recipe_name, recipe_name_en: recipeData.recipe_name_en }],\r\n      }),\r\n    })\r\n      .then((r) => r.json())\r\n      .then((data) => setRecipeImageUrl(data.images?.[0]?.image_url ?? null))\r\n      .catch(() => setRecipeImageUrl(null))\r\n      .finally(() => setRecipeImageLoading(false));\r\n  }, [recipe]);\r\n\r\n  if (isLoading) return <PageSkeleton />;\r\n\r\n  if (!recipe) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center min-h-[50vh] gap-4\">\r\n        <p className=\"text-muted-foreground\">{t(\"aiRecipe.recipeNotFound\", \"È£üË∞±Êú™ÊâæÂà∞\")}</p>\r\n        <Button variant=\"outline\" onClick={() => navigate(\"/profile\")}>\r\n          <ArrowLeft className=\"h-4 w-4 mr-2\" />\r\n          {t(\"common.back\", \"ËøîÂõû\")}\r\n        </Button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const recipeData = recipe.recipe_data;\r\n\r\n  const getName = () => {\r\n    if (i18n.language === \"en\" && recipeData.recipe_name_en) return recipeData.recipe_name_en;\r\n    if (i18n.language === \"pt\" && recipeData.recipe_name_pt) return recipeData.recipe_name_pt;\r\n    return recipeData.recipe_name;\r\n  };\r\n\r\n  const getDifficultyColor = (d: string) => {\r\n    switch (d) {\r\n      case \"easy\": return \"bg-green-500/20 text-green-700 dark:text-green-400 border-green-500/30\";\r\n      case \"medium\": return \"bg-yellow-500/20 text-yellow-700 dark:text-yellow-400 border-yellow-500/30\";\r\n      case \"hard\": return \"bg-red-500/20 text-red-700 dark:text-red-400 border-red-500/30\";\r\n      default: return \"bg-muted text-muted-foreground\";\r\n    }\r\n  };\r\n\r\n  const getDifficultyLabel = (d: string) => {\r\n    switch (d) {\r\n      case \"easy\": return t(\"recipe.difficulty.easy\", \"ÁÆÄÂçï\");\r\n      case \"medium\": return t(\"recipe.difficulty.medium\", \"‰∏≠Á≠â\");\r\n      case \"hard\": return t(\"recipe.difficulty.hard\", \"Âõ∞Èöæ\");\r\n      default: return d;\r\n    }\r\n  };\r\n\r\n  const steps = recipeData.steps?.map((s, i) => ({\r\n    ...s,\r\n    order: s.order || i + 1,\r\n  })) || [];\r\n\r\n  const hasSteps = steps.length > 0;\r\n\r\n  const handleDelete = async () => {\r\n    try {\r\n      await deleteRecipe(recipe.id);\r\n      navigate(\"/profile\");\r\n    } catch {}\r\n  };\r\n\r\n  const getPageTitle = () => {\r\n    if (guidedPhase === \"result\") return t(\"aiRecipe.resultPhotoTitle\", \"ÊãçÊëÑÊàêÂìÅ\");\r\n    if (guidedPhase === \"publish\") return t(\"aiRecipe.confirmPublish\", \"Á°ÆËÆ§ÂèëÂ∏É\");\r\n    return recipe.recipe_name;\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background\">\r\n      {/* Header */}\r\n      <div className=\"sticky top-14 z-10 bg-background border-b px-4 py-3\">\r\n        <div className=\"flex items-center justify-between max-w-lg mx-auto\">\r\n          <button\r\n            onClick={() => {\r\n              if (guidedPhase === \"result\") setGuidedPhase(\"cooking\");\r\n              else if (guidedPhase === \"publish\") setGuidedPhase(\"result\");\r\n              else navigate(-1);\r\n            }}\r\n            className=\"p-1 -ml-1 hover:bg-muted rounded-md\"\r\n          >\r\n            <ArrowLeft className=\"h-5 w-5\" />\r\n          </button>\r\n          <h2 className=\"font-medium text-sm line-clamp-1 flex-1 text-center mx-4\">{getPageTitle()}</h2>\r\n          {guidedPhase === \"overview\" ? (\r\n            <Button variant=\"ghost\" size=\"icon\" className=\"h-8 w-8 text-muted-foreground hover:text-destructive\" onClick={handleDelete}>\r\n              <Trash2 className=\"h-4 w-4\" />\r\n            </Button>\r\n          ) : (\r\n            <div className=\"w-8\" />\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"max-w-lg mx-auto p-4\">\r\n\r\n        {/* Result photo step */}\r\n        {guidedPhase === \"result\" && (\r\n          <Card className=\"overflow-hidden\">\r\n            <CardContent className=\"pt-6\">\r\n              <ResultPhotoStep\r\n                onPhotoVerified={handlePhotoVerified}\r\n                uploadImage={uploadImage}\r\n                verifyPhoto={verifyResultPhoto}\r\n                recipeName={recipeData.recipe_name}\r\n                isVerifying={isVerifying}\r\n              />\r\n              <div className=\"mt-4\">\r\n                <Button variant=\"ghost\" className=\"w-full text-muted-foreground\" onClick={handleSkipPublish}>\r\n                  {t(\"aiRecipe.noThanks\", \"ÊöÇÊó∂‰∏çÂàÜ‰∫´\")}\r\n                </Button>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        )}\r\n\r\n        {/* Publish confirmation step */}\r\n        {guidedPhase === \"publish\" && resultImageUrl && (\r\n          <Card className=\"overflow-hidden\">\r\n            <CardContent className=\"pt-6\">\r\n              <PublishConfirmStep\r\n                resultImageUrl={resultImageUrl}\r\n                recipeName={getName()}\r\n                onPublish={handlePublish}\r\n                onSkip={handleSkipPublish}\r\n                isPublishing={createRecipe.isPending}\r\n              />\r\n            </CardContent>\r\n          </Card>\r\n        )}\r\n\r\n        {/* Cooking mode */}\r\n        {guidedPhase === \"cooking\" && viewMode === \"guided\" && hasSteps && (\r\n          <Card className=\"overflow-hidden\">\r\n            <RecipeCookingMode\r\n              steps={steps}\r\n              onExit={() => setGuidedPhase(\"overview\")}\r\n              onComplete={handleCookingComplete}\r\n            />\r\n          </Card>\r\n        )}\r\n\r\n        {/* Overview / full mode */}\r\n        {(guidedPhase === \"overview\" || viewMode === \"full\") && guidedPhase !== \"result\" && guidedPhase !== \"publish\" && (\r\n          <>\r\n            {/* Mode toggle */}\r\n            {guidedPhase !== \"cooking\" && (\r\n              <div className=\"flex justify-end mb-4\">\r\n                <div className=\"inline-flex h-9 items-center rounded-md bg-muted p-1 text-muted-foreground\">\r\n                  <button\r\n                    onClick={() => { setViewMode(\"guided\"); setGuidedPhase(\"overview\"); }}\r\n                    className={`inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium transition-all gap-1.5 ${\r\n                      viewMode === \"guided\" ? \"bg-background text-foreground shadow-sm\" : \"\"\r\n                    }`}\r\n                  >\r\n                    <PlayCircle className=\"h-4 w-4\" />\r\n                    {t(\"recipe.guidedMode\", \"ÊµÅÁ®ãÊ®°Âºè\")}\r\n                  </button>\r\n                  <button\r\n                    onClick={() => setViewMode(\"full\")}\r\n                    className={`inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium transition-all gap-1.5 ${\r\n                      viewMode === \"full\" ? \"bg-background text-foreground shadow-sm\" : \"\"\r\n                    }`}\r\n                  >\r\n                    <List className=\"h-4 w-4\" />\r\n                    {t(\"recipe.fullMode\", \"ÂÆåÊï¥Ê®°Âºè\")}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            <Card className=\"overflow-hidden\">\r\n              {/* Recipe Image */}\r\n              <div className=\"relative w-full aspect-[16/9] bg-muted overflow-hidden\">\r\n                {recipeImageLoading ? (\r\n                  <>\r\n                    <Skeleton className=\"absolute inset-0 w-full h-full rounded-none\" />\r\n                    <div className=\"absolute inset-0 flex flex-col items-center justify-center gap-1.5 z-10\">\r\n                      <Sparkles className=\"h-4 w-4 text-primary animate-pulse\" />\r\n                      <span className=\"text-xs text-muted-foreground\">\r\n                        {t(\"aiRecipe.generatingImage\", \"AI Ê≠£Âú®ÁîüÊàêÂõæÁâá...\")}\r\n                      </span>\r\n                    </div>\r\n                  </>\r\n                ) : recipeImageUrl ? (\r\n                  <img src={recipeImageUrl} alt={getName()} className=\"w-full h-full object-cover\" />\r\n                ) : (\r\n                  <div className=\"absolute inset-0 flex items-center justify-center\">\r\n                    <Image className=\"h-10 w-10 text-muted-foreground/30\" />\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <CardHeader className=\"pb-3\">\r\n                <div className=\"flex items-center gap-2 mb-2\">\r\n                  <Badge className=\"bg-primary text-primary-foreground gap-1\">\r\n                    <Utensils className=\"h-3 w-3\" />\r\n                    {t(\"recipe.badge\", \"È£üË∞±\")}\r\n                  </Badge>\r\n                </div>\r\n                <h2 className=\"text-xl font-bold\">{getName()}</h2>\r\n                <div className=\"flex flex-wrap items-center gap-3 mt-3\">\r\n                  {recipeData.cook_time && (\r\n                    <div className=\"flex items-center gap-1.5 text-sm text-muted-foreground\">\r\n                      <Clock className=\"h-4 w-4\" />\r\n                      <span>{recipeData.cook_time} {t(\"recipe.minutes\", \"ÂàÜÈíü\")}</span>\r\n                    </div>\r\n                  )}\r\n                  {recipeData.servings && (\r\n                    <div className=\"flex items-center gap-1.5 text-sm text-muted-foreground\">\r\n                      <Users className=\"h-4 w-4\" />\r\n                      <span>{recipeData.servings} {t(\"recipe.servingsUnit\", \"‰∫∫‰ªΩ\")}</span>\r\n                    </div>\r\n                  )}\r\n                  {recipeData.difficulty && (\r\n                    <Badge variant=\"outline\" className={getDifficultyColor(recipeData.difficulty)}>\r\n                      <ChefHat className=\"h-3 w-3 mr-1\" />\r\n                      {getDifficultyLabel(recipeData.difficulty)}\r\n                    </Badge>\r\n                  )}\r\n                </div>\r\n              </CardHeader>\r\n\r\n              <CardContent className=\"space-y-6\">\r\n                {(() => {\r\n                  const intro = i18n.language === \"en\" && recipeData.introduction_en ? recipeData.introduction_en\r\n                    : i18n.language === \"pt\" && recipeData.introduction_pt ? recipeData.introduction_pt\r\n                    : recipeData.introduction;\r\n                  return intro && <p className=\"text-sm text-muted-foreground whitespace-pre-line\">{intro}</p>;\r\n                })()}\r\n\r\n                <Separator />\r\n\r\n                {recipeData.ingredients && recipeData.ingredients.length > 0 && (\r\n                  <div>\r\n                    <h3 className=\"font-semibold text-sm mb-3\">\r\n                      {t(\"recipe.ingredients\", \"È£üÊùê\")} ({recipeData.ingredients.length})\r\n                    </h3>\r\n                    <div className=\"flex items-center text-xs text-muted-foreground font-medium px-2 py-1.5 bg-muted/50 rounded-t-md border border-border/50\">\r\n                      <span className=\"flex-1\">{t(\"recipe.ingredientName\", \"ÂêçÁß∞\")}</span>\r\n                      <span className=\"w-24 text-right\">{t(\"recipe.amount\", \"Áî®Èáè\")}</span>\r\n                    </div>\r\n                    <ul className=\"border border-t-0 border-border/50 rounded-b-md divide-y divide-border/50\">\r\n                      {recipeData.ingredients.map((ing, i) => {\r\n                        const localName = i18n.language === \"en\" && ing.name_en ? ing.name_en\r\n                          : i18n.language === \"pt\" && ing.name_pt ? ing.name_pt\r\n                          : ing.name;\r\n                        return (\r\n                          <li key={i} className=\"flex items-center text-sm px-2 py-2\">\r\n                            <span className=\"flex-1 min-w-0 truncate\">{localName}</span>\r\n                            <span className=\"w-24 text-right text-muted-foreground shrink-0\">\r\n                              {ing.amount} {ing.unit}\r\n                            </span>\r\n                          </li>\r\n                        );\r\n                      })}\r\n                    </ul>\r\n                  </div>\r\n                )}\r\n\r\n                {viewMode === \"guided\" && hasSteps && (\r\n                  <Button\r\n                    size=\"lg\"\r\n                    className=\"w-full gap-2 h-14 text-lg\"\r\n                    onClick={() => setGuidedPhase(\"cooking\")}\r\n                  >\r\n                    <PlayCircle className=\"h-6 w-6\" />\r\n                    {t(\"recipe.startCooking\", \"ÂºÄÂßãÁÉπÈ•™\")}\r\n                    <Badge variant=\"secondary\" className=\"ml-2\">\r\n                      {steps.length} {t(\"recipe.stepsCount\", \"Ê≠•\")}\r\n                    </Badge>\r\n                  </Button>\r\n                )}\r\n\r\n                {viewMode === \"full\" && hasSteps && (\r\n                  <>\r\n                    <Separator />\r\n                    <div>\r\n                      <h3 className=\"font-semibold text-sm mb-3\">\r\n                        {t(\"recipe.steps\", \"Ê≠•È™§\")} ({steps.length})\r\n                      </h3>\r\n                      <ol className=\"space-y-4\">\r\n                        {steps.map((step, index) => {\r\n                          const localDesc = i18n.language === \"en\" && step.description_en ? step.description_en\r\n                            : i18n.language === \"pt\" && step.description_pt ? step.description_pt\r\n                            : step.description;\r\n                          return (\r\n                            <li key={index} className=\"flex gap-3\">\r\n                              <div className=\"flex-shrink-0 w-6 h-6 rounded-full bg-primary text-primary-foreground flex items-center justify-center text-xs font-bold\">\r\n                                {step.order}\r\n                              </div>\r\n                              <p className=\"text-sm flex-1\">{localDesc}</p>\r\n                            </li>\r\n                          );\r\n                        })}\r\n                      </ol>\r\n                    </div>\r\n                    <Separator />\r\n                    <Button\r\n                      size=\"lg\"\r\n                      className=\"w-full gap-2 h-14 text-base\"\r\n                      onClick={() => setGuidedPhase(\"result\")}\r\n                    >\r\n                      üéâ {t(\"aiRecipe.finishAndShare\", \"ÂÆåÊàêÂπ∂ÂàÜ‰∫´Âà∞Á§æÂå∫\")}\r\n                    </Button>\r\n                  </>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SavedRecipeDetail;\r\n"],"names":["PageSkeleton","showHeader","showFilters","children","jsxs","jsx","Skeleton","SavedRecipeDetail","id","useParams","navigate","useNavigate","t","i18n","useTranslation","user","useAuth","deleteRecipe","useSavedRecipes","createRecipe","useCreateRecipe","uploadImage","verifyResultPhoto","isVerifying","useAIRecipe","viewMode","setViewMode","useState","guidedPhase","setGuidedPhase","resultImageUrl","setResultImageUrl","photoVerified","setPhotoVerified","recipeImageUrl","setRecipeImageUrl","recipeImageLoading","setRecipeImageLoading","imageFetchedRef","useRef","handleCookingComplete","handlePhotoVerified","url","verified","handlePublish","notes","recipeData","s","i","toast","handleSkipPublish","recipe","isLoading","useQuery","data","error","supabase","useEffect","r","Button","ArrowLeft","getName","getDifficultyColor","d","getDifficultyLabel","steps","hasSteps","handleDelete","getPageTitle","Trash2","Card","CardContent","ResultPhotoStep","PublishConfirmStep","RecipeCookingMode","Fragment","PlayCircle","List","Sparkles","Image","CardHeader","Badge","Utensils","Clock","Users","ChefHat","intro","Separator","ing","localName","step","index","localDesc"],"mappings":"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"}