import{c as p,u as h,y as x,x as S,r as f,b as m,S as c,aK as v,aL as R,aq as k,P as N,j as e,aM as C,q as L,L as M,B as P,k as q,aN as B,aO as A,K as G}from"./index-BhKr6WLa.js";import{u as T,S as U,a as z,b as F,c as O,d as I,e as D,f as V,g as E,h as H,P as K,i as W,j as Q}from"./sidebar-dy1PddYU.js";import{C as X,a as $,b as J}from"./collapsible-B2BkGrsg.js";import{L as Y,I as Z}from"./layout-dashboard-C26-j7nR.js";import{C as _}from"./chart-column-R7GnoHD8.js";import{S as ee}from"./shopping-bag-T3zOfmQT.js";import{C as ae,a as se}from"./clipboard-list-CdIFzOy-.js";import{S as ie}from"./shield-alert-DWcw-o5v.js";import{B as te}from"./ban-BcJVQMNc.js";import{V as le}from"./volume-x-Cl7rUXhK.js";import{F as ne}from"./flag-e7HRrWTr.js";import{U as oe}from"./users-1HOhJBNm.js";import{U as re}from"./utensils-crossed-Cq_B0xlb.js";import{T as de}from"./ticket-BCOHwwSi.js";import{S as me}from"./search-3lYbxiWm.js";import{S as ce}from"./settings-FFzGPyk6.js";import{F as ue}from"./file-text-DZGsQEIE.js";import{B as pe}from"./book-open-Bc6IVtPA.js";import{S as he}from"./star-CO0Zpxym.js";import"./use-mobile-CZDjQ3gK.js";import"./separator-Do2sCLBh.js";import"./index-CAYKEq4q.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u=p("MessageSquarePlus",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M12 7v6",key:"lw1j43"}],["path",{d:"M9 10h6",key:"9gxzsh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=p("PanelLeftClose",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]]),fe=()=>{const{t:a}=h(),{state:i,toggleSidebar:l}=T(),{role:n}=x(),r=S().pathname,[d,j]=f.useState({statistics:!0,security:!0,daily:!0,announcement:!0,appearance:!0,development:!0,help:!0}),w=s=>{j(t=>({...t,[s]:!t[s]}))},g=[{key:"statistics",label:a("admin.groups.statistics"),items:[{title:a("admin.dashboard"),url:"/admin",icon:Y,allowedRoles:["admin","supervisor"]},{title:a("admin.analytics"),url:"/admin/analytics",icon:_,allowedRoles:["admin"]},{title:a("admin.orderStats","外卖订台统计"),url:"/admin/order-stats",icon:ee,allowedRoles:["admin"]},{title:a("admin.activityStatistics"),url:"/admin/activity-stats",icon:m,allowedRoles:["admin"]},{title:a("admin.restaurantStatistics"),url:"/admin/restaurant-stats",icon:c,allowedRoles:["admin"]}]},{key:"security",label:a("admin.groups.security"),items:[{title:a("admin.activityRequests"),url:"/admin/activity-requests",icon:ae,allowedRoles:["admin","supervisor"]},{title:a("admin.userSecurity"),url:"/admin/user-security",icon:ie,allowedRoles:["admin"]},{title:a("admin.bannedManagement"),url:"/admin/banned-users",icon:te,allowedRoles:["admin"]},{title:a("admin.mutedManagement"),url:"/admin/muted-users",icon:le,allowedRoles:["admin"]},{title:a("admin.reports"),url:"/admin/reports",icon:ne,allowedRoles:["admin"]},{title:a("joinUs.adminTitle"),url:"/admin/join-requests",icon:c,allowedRoles:["admin"]},{title:a("admin.sensitiveWords.title"),url:"/admin/sensitive-words",icon:v,allowedRoles:["admin"]}]},{key:"daily",label:a("admin.groups.daily"),items:[{title:a("admin.users"),url:"/admin/users",icon:oe,allowedRoles:["admin","supervisor"]},{title:a("admin.restaurants"),url:"/admin/restaurants",icon:re,allowedRoles:["admin","supervisor"]},{title:a("admin.activities"),url:"/admin/activities",icon:m,allowedRoles:["admin"]},{title:a("admin.coupons"),url:"/admin/coupons",icon:de,allowedRoles:["admin"]},{title:a("nav.couponQuery"),url:"/admin/coupon-query",icon:me,allowedRoles:["admin","supervisor"]}]},{key:"announcement",label:a("admin.groups.announcement","公告管理"),items:[{title:a("admin.notifications","发送通知"),url:"/admin/notifications",icon:R,allowedRoles:["admin"]},{title:a("admin.emails","发送邮件"),url:"/admin/emails",icon:k,allowedRoles:["admin"]},{title:a("admin.feedback","用户反馈"),url:"/admin/feedback",icon:u,allowedRoles:["admin"]}]},{key:"appearance",label:a("admin.groups.appearance"),items:[{title:a("admin.homepageTemplates"),url:"/admin/homepage-templates",icon:Z,allowedRoles:["admin"]},{title:a("admin.siteSettings"),url:"/admin/site-settings",icon:ce,allowedRoles:["admin"]},{title:a("admin.joinUsSettings"),url:"/admin/site-settings#join-us",icon:u,allowedRoles:["admin"]},{title:a("admin.contactSettings"),url:"/admin/site-settings#contact-info",icon:N,allowedRoles:["admin"]}]},{key:"development",label:a("admin.groups.development"),items:[{title:a("admin.logs"),url:"/admin/logs",icon:ue,allowedRoles:["admin"]},{title:a("admin.apiDocs"),url:"/admin/api-docs",icon:pe,allowedRoles:["admin"]},{title:a("admin.batchRatings"),url:"/admin/ratings",icon:he,allowedRoles:["admin"]}]},{key:"help",label:a("admin.groups.help","帮助"),items:[{title:a("admin.userManual","使用手册"),url:"/admin/user-manual",icon:se,allowedRoles:["admin","supervisor","merchant"]}]}],b=s=>s==="/admin"?r===s:r.startsWith(s),y=g.map(s=>({...s,items:s.items.filter(t=>t.allowedRoles.includes(n))})).filter(s=>s.items.length>0);return e.jsxs(U,{collapsible:"icon",className:i==="collapsed"?"w-14":"w-60",children:[e.jsx(z,{className:"pt-14",children:e.jsxs(F,{children:[e.jsx(O,{className:i==="collapsed"?"text-center":"",children:i==="collapsed"?e.jsx(C,{className:"h-4 w-4"}):a("admin.management")}),e.jsx(I,{children:e.jsx("div",{className:"mt-4 space-y-2 my-0",children:y.map(s=>e.jsxs(X,{open:i==="collapsed"?!0:d[s.key],onOpenChange:()=>i!=="collapsed"&&w(s.key),children:[i!=="collapsed"&&e.jsxs($,{className:"flex w-full items-center justify-between px-3 py-2 text-sm font-medium text-muted-foreground hover:text-foreground transition-colors",children:[e.jsx("span",{children:s.label}),e.jsx(L,{className:`h-4 w-4 transition-transform ${d[s.key]?"rotate-180":""}`})]}),e.jsx(J,{children:e.jsx(D,{children:s.items.map(t=>e.jsx(V,{children:e.jsx(E,{asChild:!0,isActive:b(t.url),children:e.jsxs(M,{to:t.url,children:[e.jsx(t.icon,{className:"h-4 w-4"}),i!=="collapsed"&&e.jsx("span",{children:t.title})]})})},t.url))})})]},s.key))})})]})}),e.jsx(H,{className:"border-t",children:e.jsx(P,{variant:"ghost",size:"sm",onClick:l,className:"w-full justify-center",children:i==="collapsed"?e.jsx(K,{className:"h-4 w-4"}):e.jsxs(e.Fragment,{children:[e.jsx(xe,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:a("common.collapse","收起")})]})})})]})},je=()=>e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(G,{className:"h-8 w-8 animate-spin text-muted-foreground"})}),Ie=()=>{const{t:a}=h(),{user:i}=q(),{isAdmin:l,isSupervisor:n,isLoading:o}=x();return o?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:a("common.loading")})}):!i||!l&&!n?e.jsx(B,{to:"/",replace:!0}):e.jsx(W,{children:e.jsxs("div",{className:"min-h-screen flex w-full overflow-hidden",children:[e.jsx(fe,{}),e.jsxs("main",{className:"flex-1 flex flex-col bg-secondary/20 overflow-auto min-w-0",children:[e.jsxs("header",{className:"md:hidden sticky top-0 z-10 flex items-center h-14 px-4 border-b bg-background",children:[e.jsx(Q,{}),e.jsx("span",{className:"ml-3 font-semibold",children:a("admin.management")})]}),e.jsx("div",{className:"flex-1 p-3 md:p-6 w-full max-w-full overflow-x-hidden",children:e.jsx(f.Suspense,{fallback:e.jsx(je,{}),children:e.jsx(A,{})})})]})]})})};export{Ie as default};
