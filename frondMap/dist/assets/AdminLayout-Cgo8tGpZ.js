import{p as w,aO as S,r as x,ci as k,cj as C,aW as N,a_ as u,b3 as p,c3 as M,c4 as L,by as h,ck as A,bm as G,cl as P,ao as q,cm as d,bC as B,cn as T,a$ as U,bs as I,an as O,aZ as F,co as D,cb as W,cp as z,bT as r,ai as E,M as V,cq as $,cr as H,cs as Q,aq as g,y as X,bN as Z,bG as _,ba as J,c5 as K,j as i,aw as Y,L as ee,ct as ie,cu as ae,cv as se,cw as ne,aM as le}from"./vendor-react-DrIUZWbh.js";import{u as te,S as oe,a as de,b as re,c as me,d as ce,e as ue,f as pe,g as he,h as ge,i as we,j as xe}from"./sidebar-BUb2DFjq.js";import{G as b,h as be,u as fe}from"./index-DBaPCe8F.js";import{C as je,a as ye,b as Re}from"./collapsible-BZCqde1b.js";import"./vendor-i18n-jtdHZIRR.js";import"./vendor-editor-B1vH4T8i.js";import"./vendor-utils-vwQGbBim.js";import"./separator-ZSE7vLuz.js";import"./vendor-supabase-CcV0KC8v.js";const ve=()=>{const{t:e}=w(),{state:s,toggleSidebar:l}=te(),{role:t}=b(),o=S().pathname,[c,f]=x.useState({statistics:!0,security:!0,daily:!0,community:!0,points:!0,announcement:!0,ads:!0,ai:!0,appearance:!0,development:!0,help:!0}),j=a=>{f(n=>({...n,[a]:!n[a]}))},y=[{key:"statistics",label:e("admin.groups.statistics"),items:[{title:e("admin.dashboard"),url:"/admin",icon:k,allowedRoles:["admin","supervisor"]},{title:e("admin.analytics"),url:"/admin/analytics",icon:C,allowedRoles:["admin"]},{title:e("admin.orderStats","外卖订台统计"),url:"/admin/order-stats",icon:N,allowedRoles:["admin"]},{title:e("admin.activityStatistics"),url:"/admin/activity-stats",icon:u,allowedRoles:["admin"]},{title:e("admin.restaurantStatistics"),url:"/admin/restaurant-stats",icon:p,allowedRoles:["admin"]}]},{key:"security",label:e("admin.groups.security"),items:[{title:e("admin.activityRequests"),url:"/admin/activity-requests",icon:M,allowedRoles:["admin","supervisor"]},{title:e("admin.invitationCodes","邀请码审核"),url:"/admin/invitation-codes",icon:L,allowedRoles:["admin"]},{title:e("admin.userSecurity"),url:"/admin/user-security",icon:h,allowedRoles:["admin"]},{title:e("admin.bannedManagement"),url:"/admin/banned-users",icon:A,allowedRoles:["admin"]},{title:e("admin.mutedManagement"),url:"/admin/muted-users",icon:G,allowedRoles:["admin"]},{title:e("admin.reports"),url:"/admin/reports",icon:P,allowedRoles:["admin"]},{title:e("joinUs.adminTitle"),url:"/admin/join-requests",icon:p,allowedRoles:["admin"]},{title:e("admin.sensitiveWords.title"),url:"/admin/sensitive-words",icon:q,allowedRoles:["admin"]},{title:e("admin.comments.title","评论管理"),url:"/admin/comments",icon:d,allowedRoles:["admin"]}]},{key:"daily",label:e("admin.groups.daily"),items:[{title:e("admin.users"),url:"/admin/users",icon:B,allowedRoles:["admin","supervisor"]},{title:e("admin.emailVerification","邮箱验证"),url:"/admin/email-verification",icon:T,allowedRoles:["admin"]},{title:e("admin.restaurants"),url:"/admin/restaurants",icon:U,allowedRoles:["admin","supervisor"]},{title:e("admin.brand.title","品牌管理"),url:"/admin/brands",icon:I,allowedRoles:["admin"]},{title:e("admin.activities"),url:"/admin/activities",icon:u,allowedRoles:["admin"]},{title:e("admin.coupons"),url:"/admin/coupons",icon:O,allowedRoles:["admin"]},{title:e("nav.couponQuery"),url:"/admin/coupon-query",icon:F,allowedRoles:["admin","supervisor"]}]},{key:"community",label:e("admin.groups.community","社区管理"),items:[{title:e("admin.communityModeration.title","社区审核"),url:"/admin/community-moderation",icon:h,allowedRoles:["admin"]},{title:e("admin.communityPosts.title","帖子管理"),url:"/admin/community-posts",icon:D,allowedRoles:["admin"]}]},{key:"points",label:e("admin.groups.points","积分管理"),items:[{title:e("admin.points.title","积分管理"),url:"/admin/points",icon:W,allowedRoles:["admin"]},{title:e("admin.shop.title"),url:"/admin/shop-items",icon:z,allowedRoles:["admin"]},{title:e("admin.pointsSettings.title"),url:"/admin/points-settings",icon:r,allowedRoles:["admin"]}]},{key:"announcement",label:e("admin.groups.announcement","公告管理"),items:[{title:e("admin.notifications","发送通知"),url:"/admin/notifications",icon:E,allowedRoles:["admin"]},{title:e("admin.emails","发送邮件"),url:"/admin/emails",icon:V,allowedRoles:["admin"]},{title:e("admin.feedback","用户反馈"),url:"/admin/feedback",icon:d,allowedRoles:["admin"]}]},{key:"ads",label:e("admin.groups.ads","广告管理"),items:[{title:e("admin.ads.title","广告管理"),url:"/admin/ads",icon:$,allowedRoles:["admin"]}]},{key:"ai",label:e("admin.groups.ai","AI聊天"),items:[{title:e("admin.aiSettings","AI管理"),url:"/admin/ai-settings",icon:H,allowedRoles:["admin"]},{title:e("admin.aiConfig","AI配置管理"),url:"/admin/ai-config",icon:r,allowedRoles:["admin"]}]},{key:"appearance",label:e("admin.groups.appearance"),items:[{title:e("admin.homepageTemplates"),url:"/admin/homepage-templates",icon:Q,allowedRoles:["admin"]},{title:e("admin.navigationSettings"),url:"/admin/navigation-settings",icon:g,allowedRoles:["admin"]},{title:e("admin.siteSettings"),url:"/admin/site-settings",icon:r,allowedRoles:["admin"]},{title:e("admin.joinUsSettings"),url:"/admin/site-settings#join-us",icon:d,allowedRoles:["admin"]},{title:e("admin.contactSettings"),url:"/admin/site-settings#contact-info",icon:X,allowedRoles:["admin"]}]},{key:"development",label:e("admin.groups.development"),items:[{title:e("admin.logs"),url:"/admin/logs",icon:Z,allowedRoles:["admin"]},{title:e("admin.apiDocs"),url:"/admin/api-docs",icon:_,allowedRoles:["admin"]},{title:e("admin.batchRatings"),url:"/admin/ratings",icon:J,allowedRoles:["admin"]}]},{key:"help",label:e("admin.groups.help","帮助"),items:[{title:e("admin.userManual","使用手册"),url:"/admin/user-manual",icon:K,allowedRoles:["admin","supervisor","merchant"]}]}],R=a=>a==="/admin"||a==="/admin/points"||a==="/admin/points-settings"||a==="/admin/shop-items"?o===a:o.startsWith(a),v=y.map(a=>({...a,items:a.items.filter(n=>n.allowedRoles.includes(t))})).filter(a=>a.items.length>0);return i.jsxs(oe,{collapsible:"icon",className:s==="collapsed"?"w-14":"w-60",children:[i.jsx(de,{className:"pt-14",children:i.jsxs(re,{children:[i.jsx(me,{className:s==="collapsed"?"text-center":"",children:s==="collapsed"?i.jsx(g,{className:"h-4 w-4"}):e("admin.management")}),i.jsx(ce,{children:i.jsx("div",{className:"mt-4 space-y-2 my-0",children:v.map(a=>i.jsxs(je,{open:s==="collapsed"?!0:c[a.key],onOpenChange:()=>s!=="collapsed"&&j(a.key),children:[s!=="collapsed"&&i.jsxs(ye,{className:"flex w-full items-center justify-between px-3 py-2 text-sm font-medium text-muted-foreground hover:text-foreground transition-colors",children:[i.jsx("span",{children:a.label}),i.jsx(Y,{className:`h-4 w-4 transition-transform ${c[a.key]?"rotate-180":""}`})]}),i.jsx(Re,{children:i.jsx(ue,{children:a.items.map(n=>i.jsx(pe,{children:i.jsx(he,{asChild:!0,isActive:R(n.url),children:i.jsxs(ee,{to:n.url,children:[i.jsx(n.icon,{className:"h-4 w-4"}),s!=="collapsed"&&i.jsx("span",{children:n.title})]})})},n.url))})})]},a.key))})})]})}),i.jsx(ge,{className:"border-t",children:i.jsx(be,{variant:"ghost",size:"sm",onClick:l,className:"w-full justify-center",children:s==="collapsed"?i.jsx(ie,{className:"h-4 w-4"}):i.jsxs(i.Fragment,{children:[i.jsx(ae,{className:"h-4 w-4 mr-2"}),i.jsx("span",{children:e("common.collapse","收起")})]})})})]})},Se=()=>i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx(le,{className:"h-8 w-8 animate-spin text-muted-foreground"})}),Be=()=>{const{t:e}=w(),{user:s}=fe(),{isAdmin:l,isSupervisor:t,isLoading:m}=b();return m?i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsx("div",{className:"text-center",children:e("common.loading")})}):!s||!l&&!t?i.jsx(se,{to:"/",replace:!0}):i.jsx(we,{children:i.jsxs("div",{className:"min-h-screen flex w-full overflow-hidden",children:[i.jsx(ve,{}),i.jsxs("main",{className:"flex-1 flex flex-col bg-secondary/20 overflow-auto min-w-0",children:[i.jsxs("header",{className:"md:hidden sticky top-0 z-10 flex items-center h-14 px-4 border-b bg-background",children:[i.jsx(xe,{}),i.jsx("span",{className:"ml-3 font-semibold",children:e("admin.management")})]}),i.jsx("div",{className:"flex-1 p-3 md:p-6 w-full max-w-full overflow-x-hidden",children:i.jsx(x.Suspense,{fallback:i.jsx(Se,{}),children:i.jsx(ne,{})})})]})]})})};export{Be as default};
//# sourceMappingURL=AdminLayout-Cgo8tGpZ.js.map
