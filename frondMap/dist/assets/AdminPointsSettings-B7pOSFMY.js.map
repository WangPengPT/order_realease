{"version":3,"file":"AdminPointsSettings-B7pOSFMY.js","sources":["../../src/pages/admin/AdminPointsSettings.tsx"],"sourcesContent":["import { useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Settings, Save, Info, RefreshCw, Search, User } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { usePointsSettings, useUpdatePointsSetting } from \"@/hooks/usePoints\";\r\nimport { toast } from \"sonner\";\r\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\n\r\nconst AdminPointsSettings = () => {\r\n  const { t } = useTranslation();\r\n  const { data: settings, isLoading } = usePointsSettings();\r\n  const updateSetting = useUpdatePointsSetting();\r\n  \r\n  const [commentPoints, setCommentPoints] = useState<string>(\"\");\r\n  const [minCommentLength, setMinCommentLength] = useState<string>(\"\");\r\n  const [postPoints, setPostPoints] = useState<string>(\"\");\r\n  const [hasChanges, setHasChanges] = useState(false);\r\n  const [resetUserInput, setResetUserInput] = useState(\"\");\r\n  const [isResetting, setIsResetting] = useState(false);\r\n  const [isResettingPost, setIsResettingPost] = useState(false);\r\n  const [isSearching, setIsSearching] = useState(false);\r\n  const [foundUser, setFoundUser] = useState<{ id: string; email: string; display_name: string } | null>(null);\r\n\r\n  // Initialize values when settings load\r\n  useState(() => {\r\n    if (settings) {\r\n      const commentPointsSetting = settings.find(s => s.key === \"comment_points\");\r\n      const minLengthSetting = settings.find(s => s.key === \"min_comment_length\");\r\n      const postPointsSetting = settings.find(s => s.key === \"post_points\");\r\n      if (commentPointsSetting) setCommentPoints(commentPointsSetting.value);\r\n      if (minLengthSetting) setMinCommentLength(minLengthSetting.value);\r\n      if (postPointsSetting) setPostPoints(postPointsSetting.value);\r\n    }\r\n  });\r\n\r\n  // Update state when settings change\r\n  if (settings && !commentPoints && !minCommentLength && !postPoints) {\r\n    const commentPointsSetting = settings.find(s => s.key === \"comment_points\");\r\n    const minLengthSetting = settings.find(s => s.key === \"min_comment_length\");\r\n    const postPointsSetting = settings.find(s => s.key === \"post_points\");\r\n    if (commentPointsSetting && !commentPoints) setCommentPoints(commentPointsSetting.value);\r\n    if (minLengthSetting && !minCommentLength) setMinCommentLength(minLengthSetting.value);\r\n    if (postPointsSetting && !postPoints) setPostPoints(postPointsSetting.value);\r\n  }\r\n\r\n  const handleSave = async () => {\r\n    try {\r\n      await Promise.all([\r\n        updateSetting.mutateAsync({ key: \"comment_points\", value: commentPoints }),\r\n        updateSetting.mutateAsync({ key: \"min_comment_length\", value: minCommentLength }),\r\n        updateSetting.mutateAsync({ key: \"post_points\", value: postPoints }),\r\n      ]);\r\n      toast.success(t(\"admin.pointsSettings.saveSuccess\"));\r\n      setHasChanges(false);\r\n    } catch (error) {\r\n      toast.error(t(\"admin.pointsSettings.saveFailed\"));\r\n    }\r\n  };\r\n\r\n  const handleValueChange = (setter: (value: string) => void, value: string) => {\r\n    setter(value);\r\n    setHasChanges(true);\r\n  };\r\n\r\n  const handleSearchUser = async () => {\r\n    if (!resetUserInput.trim()) {\r\n      toast.error(t(\"admin.pointsSettings.enterEmailOrId\"));\r\n      return;\r\n    }\r\n\r\n    setIsSearching(true);\r\n    setFoundUser(null);\r\n    \r\n    try {\r\n      const input = resetUserInput.trim();\r\n      const isEmail = input.includes('@');\r\n      \r\n      if (isEmail) {\r\n        // Search by email using edge function\r\n        const { data, error } = await supabase.functions.invoke('get-user-emails');\r\n        \r\n        if (error) throw error;\r\n        \r\n        // Find user by email in the returned emails map\r\n        const emailsMap = data?.emails || {};\r\n        const userId = Object.keys(emailsMap).find(id => emailsMap[id]?.toLowerCase() === input.toLowerCase());\r\n        \r\n        if (userId) {\r\n          // Get profile info\r\n          const { data: profile } = await supabase\r\n            .from('profiles')\r\n            .select('display_name')\r\n            .eq('id', userId)\r\n            .single();\r\n          \r\n          setFoundUser({\r\n            id: userId,\r\n            email: emailsMap[userId],\r\n            display_name: profile?.display_name || t(\"common.unknownUser\", \"Unknown User\")\r\n          });\r\n          toast.success(t(\"admin.pointsSettings.userFound\"));\r\n        } else {\r\n          toast.error(t(\"admin.pointsSettings.userNotFound\"));\r\n        }\r\n      } else {\r\n        // Assume it's a user ID, verify it exists\r\n        const { data: profile, error } = await supabase\r\n          .from('profiles')\r\n          .select('id, display_name')\r\n          .eq('id', input)\r\n          .single();\r\n        \r\n        if (error || !profile) {\r\n          toast.error(t(\"admin.pointsSettings.userNotFound\"));\r\n          return;\r\n        }\r\n        \r\n        setFoundUser({\r\n          id: profile.id,\r\n          email: t(\"admin.pointsSettings.foundById\", \"(Found by ID)\"),\r\n          display_name: profile.display_name || t(\"common.unknownUser\", \"Unknown User\")\r\n        });\r\n        toast.success(t(\"admin.pointsSettings.userFound\"));\r\n      }\r\n    } catch (error) {\r\n      console.error('Search error:', error);\r\n      toast.error(t(\"admin.pointsSettings.searchFailed\"));\r\n    } finally {\r\n      setIsSearching(false);\r\n    }\r\n  };\r\n\r\n  const handleResetDailyComment = async () => {\r\n    if (!foundUser) {\r\n      toast.error(t(\"admin.pointsSettings.searchUserFirst\"));\r\n      return;\r\n    }\r\n\r\n    setIsResetting(true);\r\n    try {\r\n      // Delete today's comment transaction for the user\r\n      const today = new Date().toISOString().split('T')[0];\r\n      const { error, count } = await supabase\r\n        .from('points_transactions')\r\n        .delete()\r\n        .eq('user_id', foundUser.id)\r\n        .eq('type', 'comment')\r\n        .gte('created_at', today)\r\n        .lt('created_at', `${today}T23:59:59.999Z`);\r\n\r\n      if (error) throw error;\r\n\r\n      if (count === 0) {\r\n        toast.info(t(\"admin.pointsSettings.noRecordFound\"));\r\n      } else {\r\n        toast.success(t(\"admin.pointsSettings.resetSuccess\"));\r\n      }\r\n      setResetUserInput(\"\");\r\n      setFoundUser(null);\r\n    } catch (error) {\r\n      console.error('Reset error:', error);\r\n      toast.error(t(\"admin.pointsSettings.resetFailed\"));\r\n    } finally {\r\n      setIsResetting(false);\r\n    }\r\n  };\r\n\r\n  const handleResetDailyPost = async () => {\r\n    if (!foundUser) {\r\n      toast.error(t(\"admin.pointsSettings.searchUserFirst\"));\r\n      return;\r\n    }\r\n\r\n    setIsResettingPost(true);\r\n    try {\r\n      // Delete today's post transaction for the user\r\n      const today = new Date().toISOString().split('T')[0];\r\n      const { error, count } = await supabase\r\n        .from('points_transactions')\r\n        .delete()\r\n        .eq('user_id', foundUser.id)\r\n        .eq('type', 'post')\r\n        .gte('created_at', today)\r\n        .lt('created_at', `${today}T23:59:59.999Z`);\r\n\r\n      if (error) throw error;\r\n\r\n      if (count === 0) {\r\n        toast.info(t(\"admin.pointsSettings.noPostRecordFound\"));\r\n      } else {\r\n        toast.success(t(\"admin.pointsSettings.resetPostSuccess\"));\r\n      }\r\n      setResetUserInput(\"\");\r\n      setFoundUser(null);\r\n    } catch (error) {\r\n      console.error('Reset post error:', error);\r\n      toast.error(t(\"admin.pointsSettings.resetFailed\"));\r\n    } finally {\r\n      setIsResettingPost(false);\r\n    }\r\n  };\r\n\r\n  if (isLoading) {\r\n    return <div className=\"p-6\">{t(\"common.loading\")}</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h1 className=\"text-2xl font-bold\">{t(\"admin.pointsSettings.title\")}</h1>\r\n          <p className=\"text-muted-foreground\">{t(\"admin.pointsSettings.description\")}</p>\r\n        </div>\r\n        <Button onClick={handleSave} disabled={!hasChanges || updateSetting.isPending}>\r\n          <Save className=\"h-4 w-4 mr-2\" />\r\n          {t(\"common.save\")}\r\n        </Button>\r\n      </div>\r\n\r\n      <Alert>\r\n        <Info className=\"h-4 w-4\" />\r\n        <AlertDescription>\r\n          {t(\"admin.pointsSettings.info\")}\r\n        </AlertDescription>\r\n      </Alert>\r\n\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle className=\"flex items-center gap-2\">\r\n            <Settings className=\"h-5 w-5\" />\r\n            {t(\"admin.pointsSettings.commentSettings\")}\r\n          </CardTitle>\r\n          <CardDescription>\r\n            {t(\"admin.pointsSettings.commentSettingsDesc\")}\r\n          </CardDescription>\r\n        </CardHeader>\r\n        <CardContent className=\"space-y-6\">\r\n          <div className=\"grid gap-4 md:grid-cols-2\">\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"commentPoints\">\r\n                {t(\"admin.pointsSettings.commentPoints\")}\r\n              </Label>\r\n              <Input\r\n                id=\"commentPoints\"\r\n                type=\"number\"\r\n                min=\"0\"\r\n                value={commentPoints}\r\n                onChange={(e) => handleValueChange(setCommentPoints, e.target.value)}\r\n                placeholder=\"5\"\r\n              />\r\n              <p className=\"text-sm text-muted-foreground\">\r\n                {t(\"admin.pointsSettings.commentPointsHelp\")}\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"minCommentLength\">\r\n                {t(\"admin.pointsSettings.minCommentLength\")}\r\n              </Label>\r\n              <Input\r\n                id=\"minCommentLength\"\r\n                type=\"number\"\r\n                min=\"0\"\r\n                value={minCommentLength}\r\n                onChange={(e) => handleValueChange(setMinCommentLength, e.target.value)}\r\n                placeholder=\"10\"\r\n              />\r\n              <p className=\"text-sm text-muted-foreground\">\r\n                {t(\"admin.pointsSettings.minCommentLengthHelp\")}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle className=\"flex items-center gap-2\">\r\n            <Settings className=\"h-5 w-5\" />\r\n            {t(\"admin.pointsSettings.postSettings\")}\r\n          </CardTitle>\r\n          <CardDescription>\r\n            {t(\"admin.pointsSettings.postSettingsDesc\")}\r\n          </CardDescription>\r\n        </CardHeader>\r\n        <CardContent className=\"space-y-6\">\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"postPoints\">\r\n              {t(\"admin.pointsSettings.postPoints\")}\r\n            </Label>\r\n            <Input\r\n              id=\"postPoints\"\r\n              type=\"number\"\r\n              min=\"0\"\r\n              value={postPoints}\r\n              onChange={(e) => handleValueChange(setPostPoints, e.target.value)}\r\n              placeholder=\"10\"\r\n              className=\"max-w-xs\"\r\n            />\r\n            <p className=\"text-sm text-muted-foreground\">\r\n              {t(\"admin.pointsSettings.postPointsHelp\")}\r\n            </p>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle>{t(\"admin.pointsSettings.rulesPreview\")}</CardTitle>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <div className=\"space-y-2 text-sm\">\r\n            <p>\r\n              • {t(\"admin.pointsSettings.rule1\")} <strong>{minCommentLength || \"10\"}</strong> {t(\"admin.pointsSettings.characters\")}\r\n            </p>\r\n            <p>\r\n              • {t(\"admin.pointsSettings.rule2\")} <strong>{commentPoints || \"5\"}</strong> {t(\"admin.pointsSettings.points\")}\r\n            </p>\r\n            <p>\r\n              • {t(\"admin.pointsSettings.rule3\")}\r\n            </p>\r\n            <p>\r\n              • {t(\"admin.pointsSettings.postRule\")} <strong>{postPoints || \"10\"}</strong> {t(\"admin.pointsSettings.points\")}\r\n            </p>\r\n            <p>\r\n              • {t(\"admin.pointsSettings.rule4\")}\r\n            </p>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle className=\"flex items-center gap-2\">\r\n            <RefreshCw className=\"h-5 w-5\" />\r\n            {t(\"admin.pointsSettings.testTools\")}\r\n          </CardTitle>\r\n          <CardDescription>\r\n            {t(\"admin.pointsSettings.testToolsDesc\")}\r\n          </CardDescription>\r\n        </CardHeader>\r\n        <CardContent className=\"space-y-4\">\r\n          <div className=\"space-y-3\">\r\n            <Label>\r\n              {t(\"admin.pointsSettings.resetDailyComment\")}\r\n            </Label>\r\n            <div className=\"flex gap-2\">\r\n              <Input\r\n                value={resetUserInput}\r\n                onChange={(e) => {\r\n                  setResetUserInput(e.target.value);\r\n                  setFoundUser(null);\r\n                }}\r\n                placeholder={t(\"admin.pointsSettings.emailOrIdPlaceholder\")}\r\n                className=\"flex-1\"\r\n              />\r\n              <Button \r\n                onClick={handleSearchUser} \r\n                disabled={isSearching || !resetUserInput.trim()}\r\n                variant=\"outline\"\r\n              >\r\n                <Search className={`h-4 w-4 mr-2 ${isSearching ? 'animate-spin' : ''}`} />\r\n                {t(\"admin.pointsSettings.search\")}\r\n              </Button>\r\n            </div>\r\n            \r\n            {foundUser && (\r\n              <div className=\"p-3 bg-muted rounded-lg space-y-3\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <User className=\"h-4 w-4 text-muted-foreground\" />\r\n                  <div>\r\n                    <p className=\"font-medium\">{foundUser.display_name}</p>\r\n                    <p className=\"text-sm text-muted-foreground\">{foundUser.email}</p>\r\n                    <p className=\"text-xs text-muted-foreground font-mono\">{foundUser.id}</p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex gap-2\">\r\n                  <Button \r\n                    onClick={handleResetDailyComment} \r\n                    disabled={isResetting}\r\n                    variant=\"destructive\"\r\n                    size=\"sm\"\r\n                  >\r\n                    <RefreshCw className={`h-4 w-4 mr-2 ${isResetting ? 'animate-spin' : ''}`} />\r\n                    {t(\"admin.pointsSettings.reset\")}\r\n                  </Button>\r\n                  <Button \r\n                    onClick={handleResetDailyPost} \r\n                    disabled={isResettingPost}\r\n                    variant=\"destructive\"\r\n                    size=\"sm\"\r\n                  >\r\n                    <RefreshCw className={`h-4 w-4 mr-2 ${isResettingPost ? 'animate-spin' : ''}`} />\r\n                    {t(\"admin.pointsSettings.resetPost\")}\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            )}\r\n            \r\n            <p className=\"text-sm text-muted-foreground\">\r\n              {t(\"admin.pointsSettings.resetHelp\")}\r\n            </p>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminPointsSettings;\r\n"],"names":["AdminPointsSettings","t","useTranslation","settings","isLoading","usePointsSettings","updateSetting","useUpdatePointsSetting","commentPoints","setCommentPoints","useState","minCommentLength","setMinCommentLength","postPoints","setPostPoints","hasChanges","setHasChanges","resetUserInput","setResetUserInput","isResetting","setIsResetting","isResettingPost","setIsResettingPost","isSearching","setIsSearching","foundUser","setFoundUser","commentPointsSetting","s","minLengthSetting","postPointsSetting","handleSave","toast","handleValueChange","setter","value","handleSearchUser","input","data","error","supabase","emailsMap","userId","id","profile","handleResetDailyComment","today","count","handleResetDailyPost","jsxs","jsx","Button","Save","Alert","Info","AlertDescription","Card","CardHeader","CardTitle","Settings","CardDescription","CardContent","Label","Input","e","RefreshCw","Search","User"],"mappings":"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"}