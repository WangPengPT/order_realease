import{j as e}from"./vendor-ui-DAmPMpEA.js";import{r as t}from"./vendor-react-iAJ0IrSD.js";import{an as K,B as n,C as L,j as Q,t as z,ac as F,I as u,k as M,ag as U,D as S,a as y,b,d as A,$ as J,a2 as T,J as V,K as _,N as $,O as q,Q as G,R as X,T as Y,V as Z}from"./index-Do1W_89N.js";import{T as ee,a as se,b as k,c as j,d as ie,e as p}from"./table-Bc8sHo2y.js";import{u as te,a as ne,b as ae,c as re}from"./useSensitiveWords-0R7frj4O.js";import{u as oe}from"./vendor-i18n-DxKeo2S1.js";import{P as de}from"./plus-D-VZe8Eb.js";import{S as le}from"./search-DsePuv7P.js";import{P as ce}from"./pencil-B15ZyftV.js";import{f as me}from"./format-DMNSJgyu.js";import"./vendor-charts-Bz7hPIBd.js";import"./vendor-query-BlSVl3IQ.js";import"./vendor-supabase-KNAP0qdW.js";import"./startOfDay-D6pD3B6q.js";const ye=()=>{const{t:s}=oe(),{data:g,isLoading:O}=te(),v=ne(),f=ae(),P=re(),[l,E]=t.useState(""),[H,r]=t.useState(!1),[I,o]=t.useState(!1),[R,c]=t.useState(!1),[d,D]=t.useState(""),[a,m]=t.useState(null),[h,W]=t.useState(null),x=g?.filter(i=>i.word.toLowerCase().includes(l.toLowerCase())),w=()=>{d.trim()&&v.mutate(d,{onSuccess:()=>{D(""),r(!1)}})},C=()=>{!a||!a.word.trim()||f.mutate({id:a.id,word:a.word},{onSuccess:()=>{m(null),o(!1)}})},B=()=>{h&&P.mutate(h.id,{onSuccess:()=>{W(null),c(!1)}})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(K,{className:"h-6 w-6"}),s("admin.sensitiveWords.title","敏感词管理")]}),e.jsx("p",{className:"text-muted-foreground",children:s("admin.sensitiveWords.description","管理评论内容过滤的敏感词列表")})]}),e.jsxs(n,{onClick:()=>r(!0),children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),s("admin.sensitiveWords.add","添加敏感词")]})]}),e.jsxs(L,{children:[e.jsx(Q,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx(z,{children:s("admin.sensitiveWords.list","敏感词列表")}),e.jsx(F,{children:s("admin.sensitiveWords.total","共 {{count}} 个敏感词",{count:g?.length||0})})]}),e.jsxs("div",{className:"relative w-full sm:w-64",children:[e.jsx(le,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(u,{placeholder:s("admin.sensitiveWords.search","搜索敏感词..."),value:l,onChange:i=>E(i.target.value),className:"pl-9"})]})]})}),e.jsx(M,{children:O?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:s("common.loading","加载中...")}):x&&x.length>0?e.jsxs(ee,{children:[e.jsx(se,{children:e.jsxs(k,{children:[e.jsx(j,{children:s("admin.sensitiveWords.word","敏感词")}),e.jsx(j,{children:s("admin.sensitiveWords.createdAt","创建时间")}),e.jsx(j,{className:"text-right",children:s("common.actions.actions","操作")})]})}),e.jsx(ie,{children:x.map(i=>e.jsxs(k,{children:[e.jsx(p,{className:"font-medium",children:i.word}),e.jsx(p,{children:me(new Date(i.created_at),"yyyy-MM-dd HH:mm")}),e.jsxs(p,{className:"text-right",children:[e.jsx(n,{variant:"ghost",size:"icon",onClick:()=>{m(i),o(!0)},children:e.jsx(ce,{className:"h-4 w-4"})}),e.jsx(n,{variant:"ghost",size:"icon",onClick:()=>{W(i),c(!0)},children:e.jsx(U,{className:"h-4 w-4 text-destructive"})})]})]},i.id))})]}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:l?s("admin.sensitiveWords.noResults","没有找到匹配的敏感词"):s("admin.sensitiveWords.empty","暂无敏感词")})})]}),e.jsx(S,{open:H,onOpenChange:r,children:e.jsxs(y,{children:[e.jsxs(b,{children:[e.jsx(A,{children:s("admin.sensitiveWords.add","添加敏感词")}),e.jsx(J,{children:s("admin.sensitiveWords.addDescription","添加新的敏感词到过滤列表")})]}),e.jsx(u,{placeholder:s("admin.sensitiveWords.inputPlaceholder","输入敏感词"),value:d,onChange:i=>D(i.target.value),onKeyDown:i=>i.key==="Enter"&&w()}),e.jsxs(T,{children:[e.jsx(n,{variant:"outline",onClick:()=>r(!1),children:s("common.actions.cancel","取消")}),e.jsx(n,{onClick:w,disabled:v.isPending||!d.trim(),children:s("common.actions.add","添加")})]})]})}),e.jsx(S,{open:I,onOpenChange:o,children:e.jsxs(y,{children:[e.jsx(b,{children:e.jsx(A,{children:s("admin.sensitiveWords.edit","编辑敏感词")})}),e.jsx(u,{placeholder:s("admin.sensitiveWords.inputPlaceholder","输入敏感词"),value:a?.word||"",onChange:i=>m(N=>N?{...N,word:i.target.value}:null),onKeyDown:i=>i.key==="Enter"&&C()}),e.jsxs(T,{children:[e.jsx(n,{variant:"outline",onClick:()=>o(!1),children:s("common.actions.cancel","取消")}),e.jsx(n,{onClick:C,disabled:f.isPending||!a?.word.trim(),children:s("common.actions.save","保存")})]})]})}),e.jsx(V,{open:R,onOpenChange:c,children:e.jsxs(_,{children:[e.jsxs($,{children:[e.jsx(q,{children:s("admin.sensitiveWords.deleteTitle","确认删除")}),e.jsx(G,{children:s("admin.sensitiveWords.deleteDescription",'确定要删除敏感词 "{{word}}" 吗？',{word:h?.word})})]}),e.jsxs(X,{children:[e.jsx(Y,{children:s("common.actions.cancel","取消")}),e.jsx(Z,{onClick:B,className:"bg-destructive text-destructive-foreground",children:s("common.actions.delete","删除")})]})]})})]})};export{ye as default};
//# sourceMappingURL=AdminSensitiveWords-VZpkBe0r.js.map
