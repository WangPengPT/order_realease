import{r as x,j as a}from"./vendor-react-core-BErlw7p5.js";import{u as v,S,a as N,b as k,c as C,d as L,e as M,f as A,g as B,h as G,i as P,j as T}from"./sidebar-BXstndiI.js";import{r as w,B as q,n as F}from"./index-kEIDKiMZ.js";import{a as O,L as U,N as D,O as z}from"./vendor-router-CLK0c9aH.js";import{C as E,a as I,b as W}from"./collapsible-BCjzQpTW.js";import{u as g}from"./vendor-i18n-CqcxoxDo.js";import{av as H,aw as Q,r as V,e as c,w as u,ax as X,Y,ay as $,az as J,aA as K,h as Z,aB as r,a2 as _,a1 as ee,g as ae,t as se,as as ie,aC as ne,ah as p,B as te,M as le,aD as oe,j as h,P as re,ab as de,a5 as me,u as ce,aE as ue,l as pe,aF as he,aG as xe,o as we}from"./vendor-icons-C2Bicc1E.js";import"./vendor-editor-BdQcs4B3.js";import"./vendor-misc-DH4LiFnZ.js";import"./vendor-date-fYlqblcl.js";import"./vendor-ui-other-CPTlx-W2.js";import"./separator-D7qWLlVy.js";import"./vendor-query-BS0wY7WL.js";import"./vendor-supabase-Clrw0GhO.js";import"./vendor-ui-dialog-Sv_VEL0d.js";import"./vendor-ui-dropdown-DwTcg2UT.js";const ge=()=>{const{t:e}=g(),{state:i,toggleSidebar:t}=v(),{role:l}=w(),o=O().pathname,[m,j]=x.useState({statistics:!0,security:!0,daily:!0,points:!0,announcement:!0,appearance:!0,development:!0,help:!0}),f=s=>{j(n=>({...n,[s]:!n[s]}))},b=[{key:"statistics",label:e("admin.groups.statistics"),items:[{title:e("admin.dashboard"),url:"/admin",icon:H,allowedRoles:["admin","supervisor"]},{title:e("admin.analytics"),url:"/admin/analytics",icon:Q,allowedRoles:["admin"]},{title:e("admin.orderStats","外卖订台统计"),url:"/admin/order-stats",icon:V,allowedRoles:["admin"]},{title:e("admin.activityStatistics"),url:"/admin/activity-stats",icon:c,allowedRoles:["admin"]},{title:e("admin.restaurantStatistics"),url:"/admin/restaurant-stats",icon:u,allowedRoles:["admin"]}]},{key:"security",label:e("admin.groups.security"),items:[{title:e("admin.activityRequests"),url:"/admin/activity-requests",icon:X,allowedRoles:["admin","supervisor"]},{title:e("admin.userSecurity"),url:"/admin/user-security",icon:Y,allowedRoles:["admin"]},{title:e("admin.bannedManagement"),url:"/admin/banned-users",icon:$,allowedRoles:["admin"]},{title:e("admin.mutedManagement"),url:"/admin/muted-users",icon:J,allowedRoles:["admin"]},{title:e("admin.reports"),url:"/admin/reports",icon:K,allowedRoles:["admin"]},{title:e("joinUs.adminTitle"),url:"/admin/join-requests",icon:u,allowedRoles:["admin"]},{title:e("admin.sensitiveWords.title"),url:"/admin/sensitive-words",icon:Z,allowedRoles:["admin"]},{title:e("admin.comments.title","评论管理"),url:"/admin/comments",icon:r,allowedRoles:["admin"]}]},{key:"daily",label:e("admin.groups.daily"),items:[{title:e("admin.users"),url:"/admin/users",icon:_,allowedRoles:["admin","supervisor"]},{title:e("admin.restaurants"),url:"/admin/restaurants",icon:ee,allowedRoles:["admin","supervisor"]},{title:e("admin.activities"),url:"/admin/activities",icon:c,allowedRoles:["admin"]},{title:e("admin.coupons"),url:"/admin/coupons",icon:ae,allowedRoles:["admin"]},{title:e("nav.couponQuery"),url:"/admin/coupon-query",icon:se,allowedRoles:["admin","supervisor"]}]},{key:"points",label:e("admin.groups.points","积分管理"),items:[{title:e("admin.points.title","积分管理"),url:"/admin/points",icon:ie,allowedRoles:["admin"]},{title:e("admin.shop.title"),url:"/admin/shop-items",icon:ne,allowedRoles:["admin"]},{title:e("admin.pointsSettings.title"),url:"/admin/points-settings",icon:p,allowedRoles:["admin"]}]},{key:"announcement",label:e("admin.groups.announcement","公告管理"),items:[{title:e("admin.notifications","发送通知"),url:"/admin/notifications",icon:te,allowedRoles:["admin"]},{title:e("admin.emails","发送邮件"),url:"/admin/emails",icon:le,allowedRoles:["admin"]},{title:e("admin.feedback","用户反馈"),url:"/admin/feedback",icon:r,allowedRoles:["admin"]}]},{key:"appearance",label:e("admin.groups.appearance"),items:[{title:e("admin.homepageTemplates"),url:"/admin/homepage-templates",icon:oe,allowedRoles:["admin"]},{title:e("admin.navigationSettings"),url:"/admin/navigation-settings",icon:h,allowedRoles:["admin"]},{title:e("admin.siteSettings"),url:"/admin/site-settings",icon:p,allowedRoles:["admin"]},{title:e("admin.joinUsSettings"),url:"/admin/site-settings#join-us",icon:r,allowedRoles:["admin"]},{title:e("admin.contactSettings"),url:"/admin/site-settings#contact-info",icon:re,allowedRoles:["admin"]}]},{key:"development",label:e("admin.groups.development"),items:[{title:e("admin.logs"),url:"/admin/logs",icon:de,allowedRoles:["admin"]},{title:e("admin.apiDocs"),url:"/admin/api-docs",icon:me,allowedRoles:["admin"]},{title:e("admin.batchRatings"),url:"/admin/ratings",icon:ce,allowedRoles:["admin"]}]},{key:"help",label:e("admin.groups.help","帮助"),items:[{title:e("admin.userManual","使用手册"),url:"/admin/user-manual",icon:ue,allowedRoles:["admin","supervisor","merchant"]}]}],y=s=>s==="/admin"||s==="/admin/points"||s==="/admin/points-settings"||s==="/admin/shop-items"?o===s:o.startsWith(s),R=b.map(s=>({...s,items:s.items.filter(n=>n.allowedRoles.includes(l))})).filter(s=>s.items.length>0);return a.jsxs(S,{collapsible:"icon",className:i==="collapsed"?"w-14":"w-60",children:[a.jsx(N,{className:"pt-14",children:a.jsxs(k,{children:[a.jsx(C,{className:i==="collapsed"?"text-center":"",children:i==="collapsed"?a.jsx(h,{className:"h-4 w-4"}):e("admin.management")}),a.jsx(L,{children:a.jsx("div",{className:"mt-4 space-y-2 my-0",children:R.map(s=>a.jsxs(E,{open:i==="collapsed"?!0:m[s.key],onOpenChange:()=>i!=="collapsed"&&f(s.key),children:[i!=="collapsed"&&a.jsxs(I,{className:"flex w-full items-center justify-between px-3 py-2 text-sm font-medium text-muted-foreground hover:text-foreground transition-colors",children:[a.jsx("span",{children:s.label}),a.jsx(pe,{className:`h-4 w-4 transition-transform ${m[s.key]?"rotate-180":""}`})]}),a.jsx(W,{children:a.jsx(M,{children:s.items.map(n=>a.jsx(A,{children:a.jsx(B,{asChild:!0,isActive:y(n.url),children:a.jsxs(U,{to:n.url,children:[a.jsx(n.icon,{className:"h-4 w-4"}),i!=="collapsed"&&a.jsx("span",{children:n.title})]})})},n.url))})})]},s.key))})})]})}),a.jsx(G,{className:"border-t",children:a.jsx(q,{variant:"ghost",size:"sm",onClick:t,className:"w-full justify-center",children:i==="collapsed"?a.jsx(he,{className:"h-4 w-4"}):a.jsxs(a.Fragment,{children:[a.jsx(xe,{className:"h-4 w-4 mr-2"}),a.jsx("span",{children:e("common.collapse","收起")})]})})})]})},je=()=>a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx(we,{className:"h-8 w-8 animate-spin text-muted-foreground"})}),qe=()=>{const{t:e}=g(),{user:i}=F(),{isAdmin:t,isSupervisor:l,isLoading:d}=w();return d?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"text-center",children:e("common.loading")})}):!i||!t&&!l?a.jsx(D,{to:"/",replace:!0}):a.jsx(P,{children:a.jsxs("div",{className:"min-h-screen flex w-full overflow-hidden",children:[a.jsx(ge,{}),a.jsxs("main",{className:"flex-1 flex flex-col bg-secondary/20 overflow-auto min-w-0",children:[a.jsxs("header",{className:"md:hidden sticky top-0 z-10 flex items-center h-14 px-4 border-b bg-background",children:[a.jsx(T,{}),a.jsx("span",{className:"ml-3 font-semibold",children:e("admin.management")})]}),a.jsx("div",{className:"flex-1 p-3 md:p-6 w-full max-w-full overflow-x-hidden",children:a.jsx(x.Suspense,{fallback:a.jsx(je,{}),children:a.jsx(z,{})})})]})]})})};export{qe as default};
//# sourceMappingURL=AdminLayout-Bs0E0dkF.js.map
