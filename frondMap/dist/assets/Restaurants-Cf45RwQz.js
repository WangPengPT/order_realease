import{j as e,p as U,aW as M,u as Re,q as $e,r,bb as Ae,bc as Se,bd as Te,aX as De,X as z,be as Le,a$ as ze,a_ as Me,y as Fe,bf as Pe,L as _e,b0 as Ie}from"./vendor-react-DO-hMdHk.js";import{C as J,j as l,p as Y,q as Z,r as ee,A as qe,t as Ee,v as Be,w as Ve,x as We,y as Qe,z as Oe,E as He,f as Ke,a as Xe,u as Ge,I as Ue,B as x,g as w,s as Je}from"./index-N0FVPut9.js";import{P as se,a as te,b as ae}from"./popover-BAP6MeLx.js";import{u as Ye,b as Ze,a as es,c as ss}from"./useRestaurants-VAXzrD2O.js";import{c as ts,o as as,g as ls}from"./geolocation-DRm3QMsJ.js";import{u as ns,R as is,l as rs}from"./xiaoxiong-logo-clean-C7pKOUm-.js";import{u as os}from"./useLocalizedContent-SBVFuvBn.js";import{f as cs}from"./timeUtils-pgRxO0UB.js";import{u as ds}from"./useActivities-DMlbbuRH.js";import{u as ms}from"./useInfiniteScroll-B_hgAks-.js";import{L as xs}from"./LocationPermissionDialog-ksozAAOS.js";import{P as us}from"./PullToRefresh-BVN40AXl.js";import"./vendor-i18n-jtdHZIRR.js";import"./vendor-editor-B1vH4T8i.js";import"./vendor-utils-Z4kpnli5.js";import"./vendor-supabase-DUJEpEPV.js";import"./vendor-map-CvE3ASYw.js";const hs=({count:u=6})=>e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:u}).map((h,t)=>e.jsxs(J,{className:"overflow-hidden flex flex-col h-full",style:{animationDelay:`${t*100}ms`},children:[e.jsxs("div",{className:"relative h-48 overflow-hidden",children:[e.jsx(l,{className:"w-full h-full rounded-none"}),e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx(l,{className:"h-9 w-9 rounded-md"})})]}),e.jsx(Y,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(l,{className:"h-6 w-40"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(l,{className:"h-4 w-4 rounded-full"}),e.jsx(l,{className:"h-4 w-16"})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(l,{className:"h-5 w-5 rounded-full"}),e.jsx(l,{className:"h-5 w-8"})]})]})}),e.jsxs(Z,{className:"space-y-3 flex-grow",children:[e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx(l,{className:"h-5 w-16 rounded-full"}),e.jsx(l,{className:"h-5 w-20 rounded-full"}),e.jsx(l,{className:"h-5 w-14 rounded-full"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(l,{className:"h-4 w-4 rounded-full flex-shrink-0"}),e.jsx(l,{className:"h-4 w-full"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(l,{className:"h-4 w-4 rounded-full flex-shrink-0"}),e.jsx(l,{className:"h-4 w-32"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(l,{className:"h-4 w-4 rounded-full flex-shrink-0"}),e.jsx(l,{className:"h-4 w-40"})]})]}),e.jsxs(ee,{className:"gap-2 mt-auto",children:[e.jsx(l,{className:"h-10 flex-1 rounded-md"}),e.jsx(l,{className:"h-10 w-10 rounded-md"})]})]},t))}),fs=()=>e.jsxs("div",{className:"relative flex-1 min-h-[300px] sm:min-h-[400px] lg:mx-4 lg:mb-4 lg:rounded-lg overflow-hidden lg:shadow-lg bg-muted",children:[e.jsx(l,{className:"absolute inset-0 w-full h-full rounded-none"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:e.jsx(l,{className:"h-8 w-8 rounded-full"})}),e.jsx("div",{className:"absolute top-1/4 left-1/3",children:e.jsx(l,{className:"h-6 w-6 rounded-full"})}),e.jsx("div",{className:"absolute top-1/3 right-1/4",children:e.jsx(l,{className:"h-6 w-6 rounded-full"})}),e.jsx("div",{className:"absolute bottom-1/3 left-1/4",children:e.jsx(l,{className:"h-6 w-6 rounded-full"})}),e.jsx("div",{className:"absolute bottom-1/4 right-1/3",children:e.jsx(l,{className:"h-6 w-6 rounded-full"})})]})}),e.jsx("div",{className:"absolute bottom-4 left-4 z-10",children:e.jsx(l,{className:"h-10 w-36 rounded-full"})}),e.jsxs("div",{className:"absolute top-4 right-4 z-10 flex flex-col gap-2",children:[e.jsx(l,{className:"h-8 w-8 rounded-md"}),e.jsx(l,{className:"h-8 w-8 rounded-md"})]})]}),gs=()=>{const u=/iPad|iPhone|iPod/.test(navigator.userAgent),h=/Android/.test(navigator.userAgent);return u?"Apple Maps":"Google Maps"},ps=({open:u,onOpenChange:h,onConfirm:t,destinationName:f})=>{const{t:g}=U(),R=gs();return e.jsx(qe,{open:u,onOpenChange:h,children:e.jsxs(Ee,{className:"max-w-md",children:[e.jsxs(Be,{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 rounded-full bg-primary/10",children:e.jsx(M,{className:"w-5 h-5 text-primary"})}),e.jsx(Ve,{children:g("navigation.confirmTitle")})]}),e.jsx(We,{className:"text-left",children:g("navigation.confirmDescription",{appName:R,destination:f})})]}),e.jsxs(Qe,{className:"flex-col sm:flex-row gap-2",children:[e.jsx(Oe,{className:"w-full sm:w-auto",children:g("common.cancel")}),e.jsx(He,{onClick:t,className:"w-full sm:w-auto",children:g("navigation.openApp",{appName:R})})]})]})})},vs=({restaurant:u,language:h})=>{const[t,f]=r.useState(999),g=r.useRef(null),N=u.type.map((n,o)=>({key:`type-${o}`,label:n,variant:"secondary",color:void 0}));r.useEffect(()=>{const n=()=>{if(!g.current)return;const b=g.current,p=Array.from(b.querySelectorAll(".tag-badge"));if(p.length===0){setTimeout(n,50);return}const y=p[0]?.offsetTop;let i=p.length;for(let m=0;m<p.length;m++)if(p[m].offsetTop>y){i=m;break}if(i===p.length){f(p.length);return}const T=b.offsetWidth,k=40;let D=0,c=i;for(let m=0;m<i;m++)D+=p[m].offsetWidth+8;D+k>T&&(c=Math.max(1,i-1)),f(c)};f(999);const o=setTimeout(n,100);return window.addEventListener("resize",n),()=>{clearTimeout(o),window.removeEventListener("resize",n)}},[N.length,u.id]);const $=N.slice(0,t),S=N.slice(t),d=S.length>0;return e.jsxs("div",{className:"flex items-center gap-2 -mt-1",children:[e.jsx("div",{ref:g,className:"flex gap-2 flex-wrap flex-1",children:$.map(n=>e.jsx(w,{variant:n.variant,className:"text-xs whitespace-nowrap tag-badge",style:n.color?{backgroundColor:n.color,color:"white"}:void 0,children:n.label},n.key))}),d&&e.jsxs(se,{children:[e.jsx(te,{asChild:!0,children:e.jsx(x,{variant:"ghost",size:"sm",className:"h-6 px-2 text-muted-foreground hover:text-foreground flex-shrink-0",children:e.jsx(Ie,{className:"h-4 w-4"})})}),e.jsx(ae,{className:"w-auto max-w-80",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:S.map(n=>e.jsx(w,{variant:n.variant,className:"text-xs",style:n.color?{backgroundColor:n.color,color:"white"}:void 0,children:n.label},n.key))})})]})]})},Ps=()=>{const u=Re(),h=$e(),{t,i18n:f}=U(),{toast:g}=Ke(),{localizeRestaurant:R}=os(),N=Xe(),[$,S]=r.useState(""),[d,n]=r.useState([]),[o,b]=r.useState(null),[p,y]=r.useState([]),[i,T]=r.useState("list"),[k,D]=r.useState(()=>localStorage.getItem("restaurant-list-columns")==="1"?1:2),[c,m]=r.useState(null),[j,le]=r.useState(null),[ne,ie]=r.useState(!1),[F,re]=r.useState(!1),[P,oe]=r.useState(!1),[ce,_]=r.useState(!1),[de,I]=r.useState(!1),[A,me]=r.useState(null),{user:B}=Ge(),{data:V,isLoading:xe}=Ye($,d.length>0?d.join(","):void 0),{data:ue=[]}=Ze(),{data:q=[]}=es(),{data:he=[]}=ds(),{data:fe={}}=ns(),ge=r.useCallback(async()=>{await Promise.all([h.invalidateQueries({queryKey:["restaurants"]}),h.invalidateQueries({queryKey:["activities"]}),h.invalidateQueries({queryKey:["restaurantTypes"]})])},[h]),L=he.filter(s=>(fe[s.id]||0)>0),pe=ss(),ve=(s,a)=>{a.preventDefault(),a.stopPropagation(),B&&pe.mutate(s)},je=s=>{n(a=>a.includes(s)?a.filter(v=>v!==s):[...a,s])},Ne=()=>{I(!0)},W=async()=>{I(!1);try{const s=await ls();le({lat:s.coords.latitude,lng:s.coords.longitude}),ie(!0),g({title:t("restaurants.locationEnabled"),description:t("restaurants.sortByDistance")})}catch(s){console.error("Location error:",s)}},we=s=>{m(s),s&&!j&&W()},be=async s=>{if(o===s)b(null),y([]);else{b(s);const{data:a,error:v}=await Je.from("activity_restaurants").select("restaurant_id").eq("activity_id",s);v?(console.error("Error fetching activity restaurants:",v),y([])):y(a.map(E=>E.restaurant_id))}},Q=V?.map(s=>{const a=R(s);if(j){const v=ts(j.lat,j.lng,s.lat,s.lng);return{...a,distance:v}}return a})||[],O=o?Q.filter(s=>p.includes(s.id)):Q,H=c&&j?O.filter(s=>s.distance&&s.distance<=c):O,C=j?[...H].sort((s,a)=>(s.distance||0)-(a.distance||0)):[...H].sort((s,a)=>(a.rating||0)-(s.rating||0)),{displayedData:K,hasMore:ye,loadMore:ke,reset:X}=ms({data:C,initialItemsPerPage:12,incrementPerPage:12});r.useEffect(()=>{X()},[$,d,o,c,ne,X]);const Ce=s=>{u(`/restaurant/${s.id}`)},G=e.jsx("div",{className:`bg-secondary/20 animate-fade-in ${i==="map"?"h-screen flex flex-col overflow-hidden":"min-h-screen py-8 px-4"}`,children:e.jsxs("div",{className:`${i==="map"?"flex flex-col h-full":"container mx-auto max-w-7xl"}`,children:[e.jsxs("div",{className:`${i==="map"?"px-4 pt-4 pb-2 flex-shrink-0":"mb-8"}`,children:[e.jsx("h1",{className:`text-3xl sm:text-4xl font-medium text-primary ${i==="map"?"hidden md:block md:mb-4":"mb-4"}`,children:t("restaurants.title")}),e.jsx("div",{className:"flex flex-col gap-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 md:items-center",children:[e.jsx(Ue,{placeholder:t("restaurants.search"),value:$,onChange:s=>S(s.target.value),className:"w-full md:max-w-md"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(x,{variant:j?"default":"outline",size:"sm",onClick:Ne,className:"gap-1.5",children:[e.jsx(M,{className:"h-4 w-4"}),e.jsx("span",{children:t("restaurants.getLocation")})]}),e.jsxs("div",{className:"inline-flex h-9 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",children:[e.jsx("button",{onClick:()=>{if(i==="list"){if(N){const s=k===2?1:2;D(s),localStorage.setItem("restaurant-list-columns",String(s))}}else T("list")},title:i==="list"&&N?k===2?t("restaurants.singleColumn","单列布局"):t("restaurants.doubleColumn","双列布局"):t("restaurants.listView"),className:`inline-flex items-center justify-center whitespace-nowrap rounded-sm px-2.5 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 ${i==="list"?"bg-background text-foreground shadow-sm":""}`,children:i==="list"&&N&&k===1?e.jsx(Ae,{className:"h-3.5 w-3.5"}):e.jsx(Se,{className:"h-3.5 w-3.5"})}),e.jsx("button",{onClick:()=>T("map"),title:t("restaurants.mapView"),className:`inline-flex items-center justify-center whitespace-nowrap rounded-sm px-2.5 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 ${i==="map"?"bg-background text-foreground shadow-sm":""}`,children:e.jsx(Te,{className:"h-3.5 w-3.5"})}),e.jsxs(se,{children:[e.jsx(te,{asChild:!0,children:e.jsxs("button",{title:t("restaurants.filter"),className:`inline-flex items-center justify-center whitespace-nowrap rounded-sm px-2.5 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 relative ${d.length>0||o||c?"bg-background text-foreground shadow-sm":""}`,children:[e.jsx(De,{className:"h-3.5 w-3.5"}),(d.length>0||o||c)&&e.jsx(w,{variant:"secondary",className:"absolute -top-1 -right-1 h-4 w-4 p-0 flex items-center justify-center text-[10px]",children:(d.length>0?1:0)+(o?1:0)+(c?1:0)})]})}),e.jsx(ae,{className:"w-[90vw] max-w-sm p-0",align:"start",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border/50 bg-muted/30",children:[e.jsx("span",{className:"font-semibold text-foreground text-base",children:t("restaurants.filter")}),(d.length>0||o||c)&&e.jsxs(x,{variant:"ghost",size:"sm",className:"h-7 px-2 text-xs text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>{n([]),b(null),y([]),m(null)},children:[e.jsx(z,{className:"w-3 h-3 mr-1"}),t("common.actions.clearFilter")]})]}),e.jsxs("div",{className:"p-4 space-y-5",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:t("restaurants.restaurantTypes")}),e.jsxs("div",{className:"flex items-center gap-2",children:[d.length>0&&e.jsxs(x,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>n([]),children:[e.jsx(z,{className:"w-3 h-3 mr-1"}),t("common.actions.clear")]}),q.length>8&&e.jsx(x,{variant:"link",size:"sm",className:"h-auto p-0 text-xs text-primary hover:text-primary/80",onClick:()=>re(!F),children:t(F?"common.showLess":"common.showMore")})]})]}),e.jsx("div",{className:"flex gap-2 flex-wrap max-h-36 overflow-y-auto pr-1",children:(F?q:q.slice(0,8)).map(s=>e.jsx(w,{variant:d.includes(s)?"default":"outline",className:`cursor-pointer transition-all duration-200 px-3 py-1.5 text-xs font-normal whitespace-nowrap hover:bg-primary/10 ${d.includes(s)?"bg-primary text-primary-foreground shadow-sm":"bg-background hover:border-primary/50"}`,onClick:()=>je(s),children:s},s))})]}),L.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:t("nav.activities")}),e.jsxs("div",{className:"flex items-center gap-2",children:[o&&e.jsxs(x,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>{b(null),y([])},children:[e.jsx(z,{className:"w-3 h-3 mr-1"}),t("common.actions.clear")]}),L.length>8&&e.jsx(x,{variant:"link",size:"sm",className:"h-auto p-0 text-xs text-primary hover:text-primary/80",onClick:()=>oe(!P),children:t(P?"common.showLess":"common.showMore")})]})]}),e.jsx("div",{className:"flex gap-2 flex-wrap max-h-36 overflow-y-auto pr-1",children:(P?L:L.slice(0,8)).map(s=>{const a=f.language==="zh"?s.badge_text_zh||s.title_zh:f.language==="pt"?s.badge_text_pt||s.title_pt:s.badge_text_en||s.title_en;return e.jsx(w,{variant:o===s.id?"default":"outline",className:`cursor-pointer transition-all duration-200 px-3 py-1.5 text-xs font-normal whitespace-nowrap hover:bg-primary/10 ${o===s.id?"bg-primary text-primary-foreground shadow-sm":"bg-background hover:border-primary/50"}`,onClick:()=>be(s.id),children:a},s.id)})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:t("restaurants.radius")}),c&&e.jsxs(x,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>m(null),children:[e.jsx(z,{className:"w-3 h-3 mr-1"}),t("common.actions.clear")]})]}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:[{value:null,label:t("restaurants.allRestaurants")},{value:5,label:t("restaurants.radius5km")},{value:10,label:t("restaurants.radius10km")},{value:20,label:t("restaurants.radius20km")}].map(s=>e.jsx(w,{variant:c===s.value?"default":"outline",className:`cursor-pointer transition-all duration-200 px-3 py-1.5 text-xs font-normal whitespace-nowrap hover:bg-primary/10 ${c===s.value?"bg-primary text-primary-foreground shadow-sm":"bg-background hover:border-primary/50"}`,onClick:()=>we(s.value),children:s.label},s.value??"all"))})]})]})]})})]})]})]})]})})]}),xe||!V?i==="map"?e.jsx(fs,{}):e.jsx(hs,{count:6}):C.length===0?e.jsxs("div",{className:`text-center ${i==="map"?"flex-1 flex flex-col justify-center px-4":"py-20"}`,children:[e.jsx("p",{className:"text-xl text-muted-foreground",children:t("restaurants.noResults")}),e.jsx("p",{className:"text-muted-foreground mt-2",children:t("restaurants.noResultsDesc")})]}):e.jsxs(e.Fragment,{children:[i==="map"&&C.length>0&&e.jsxs("div",{className:"relative flex-1 min-h-[300px] sm:min-h-[400px] lg:mx-4 lg:mb-4 lg:rounded-lg overflow-hidden lg:shadow-lg",children:[e.jsx(is,{restaurants:C,onRestaurantClick:Ce,userLocation:j,radiusFilter:c,showViewDetailsButton:!0}),e.jsxs("div",{className:"absolute bottom-4 left-4 z-10 pointer-events-none flex items-center gap-2 bg-background/80 backdrop-blur-sm px-3 py-2 rounded-full shadow-lg",children:[e.jsx("img",{src:rs,alt:"Xiaoxiong Market Logo",className:"h-6 w-6 object-contain"}),e.jsx("span",{className:"text-sm font-semibold text-foreground whitespace-nowrap",children:f.language==="zh"?"小熊市场":"Xiaoxiong Market"})]})]}),i==="list"&&C.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`grid gap-6 ${k===1?"grid-cols-1":"grid-cols-2"} md:grid-cols-2 lg:grid-cols-3`,children:K.map(s=>{const a=N&&k===2;return e.jsxs(J,{className:`overflow-hidden hover:shadow-large transition-shadow flex flex-col h-full ${a?"gap-0":""}`,children:[e.jsxs("div",{className:`relative overflow-hidden ${a?"h-28":"h-48"}`,children:[e.jsx("img",{src:s.image_url||"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=600&q=80",alt:s.name,className:"w-full h-full object-cover transition-transform hover:scale-105"}),B&&e.jsx(x,{size:"icon",variant:"secondary",className:`absolute ${a?"top-1.5 right-1.5 h-7 w-7":"top-3 right-3"}`,onClick:v=>ve(s.id,v),children:e.jsx(Le,{className:`${a?"w-3.5 h-3.5":"w-5 h-5"} ${ue.includes(s.id)?"fill-destructive text-destructive":""}`})})]}),e.jsx(Y,{className:a?"p-2 pb-1":"mb-px pb-[15px]",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:`flex flex-col ${a?"gap-0.5":"gap-2"}`,children:[e.jsx("h3",{className:`font-semibold text-card-foreground ${a?"text-sm line-clamp-2":"text-xl"}`,children:s.name}),s.distance!==void 0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(M,{className:`text-primary ${a?"w-3 h-3":"w-4 h-4"}`}),e.jsxs("span",{className:`font-semibold text-foreground ${a?"text-xs":"text-sm"}`,children:[s.distance.toFixed(1)," km"]})]})]}),e.jsxs("div",{className:"flex items-center gap-0.5",children:[e.jsx(ze,{className:`${a?"w-3.5 h-3.5":"w-5 h-5"} ${s.rating?"fill-accent text-accent":"text-muted-foreground"}`}),s.rating?e.jsx("span",{className:`font-semibold text-card-foreground ${a?"text-xs":""}`,children:s.rating.toFixed(1)}):!a&&e.jsxs("span",{className:"text-xs text-muted-foreground text-center whitespace-nowrap",children:[t("restaurant.noRatingLine1"),e.jsx("br",{}),t("restaurant.noRatingLine2")]})]})]})}),e.jsxs(Z,{className:`flex-grow ${a?"p-2 pt-0 space-y-1":"space-y-2"}`,children:[e.jsx("div",{className:`flex items-center flex-wrap ${a?"gap-1":"gap-2"}`,children:a?s.type.slice(0,2).map((v,E)=>e.jsx(w,{variant:"secondary",className:"text-xs px-1.5 py-0.5",children:v},`type-${E}`)):e.jsxs(e.Fragment,{children:[e.jsx(vs,{restaurant:s,language:f.language}),s.template==="ghost"&&e.jsx(w,{variant:"outline",className:"text-xs",children:t("restaurants.ghostKitchen")})]})}),!a&&e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground text-sm",children:[e.jsx(Me,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"line-clamp-1",children:s.address})]}),!a&&s.phone&&e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground text-sm",children:[e.jsx(Fe,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{children:s.phone})]}),!a&&s.opening_hours&&e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground text-sm",children:[e.jsx(Pe,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{children:cs(s.opening_hours)})]})]}),e.jsxs(ee,{className:`mt-auto ${a?"p-2 pt-0":"gap-2"}`,children:[e.jsx(x,{asChild:!0,className:`flex-1 ${a?"h-7 text-xs":""}`,size:a?"sm":"default",children:e.jsx(_e,{to:`/restaurant/${s.id}`,children:t("restaurants.viewDetails")})}),!a&&j&&e.jsx(x,{variant:"outline",size:"icon",onClick:()=>{me({lat:s.lat,lng:s.lng,name:s.name}),_(!0)},title:t("restaurants.directions"),children:e.jsx(M,{className:"w-4 h-4"})})]})]},s.id)})}),ye&&e.jsx("div",{className:"flex justify-center mt-8",children:e.jsxs(x,{onClick:ke,size:"lg",variant:"outline",children:[t("common.loadMore")," (",K.length," / ",C.length,")"]})})]})]}),e.jsx(ps,{open:ce,onOpenChange:_,onConfirm:()=>{A&&as(A.lat,A.lng,A.name),_(!1)},destinationName:A?.name||""}),e.jsx(xs,{open:de,onOpenChange:I,onConfirm:W})]})});return i==="list"?e.jsx(us,{onRefresh:ge,children:G}):G};export{Ps as default};
//# sourceMappingURL=Restaurants-Cf45RwQz.js.map
