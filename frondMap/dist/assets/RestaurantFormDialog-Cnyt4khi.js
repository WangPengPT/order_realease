import{r as _,j as e}from"./vendor-react-core-BErlw7p5.js";import{o as we,s as j,a as J,n as de,b as pe,u as Ce,t as De}from"./vendor-forms-6GCG0Z6m.js";import{m as Z}from"./vendor-map-DWLu9L1V.js";import{s as D,n as Se,C as K,h as Ie,p as ke,a2 as Fe,j as G,B as $,A as Te,E as Ae,F as Re,G as Ee,J as ze,K as qe,m as Me,r as Pe,D as $e,U as Le,a as Ke,b as Ge,c as He,Q as Ue,S as Oe,R as l,I as c,a1 as ee}from"./index-kEIDKiMZ.js";import{C as O}from"./checkbox-eFOlcZpK.js";import{S as Be}from"./switch-DLggLZLa.js";import{T as Qe,a as We,b as se,c as te}from"./tabs-CIAMexK9.js";import{a as Ve,u as X,b as le}from"./vendor-query-BS0wY7WL.js";import{ah as B,ar as Xe,as as he,at as Ye,au as Je,av as Ze,aw as es,ax as ss,ay as ts,az as as,aA as ns,aB as is,aC as rs}from"./vendor-misc-DH4LiFnZ.js";import{i as b,u as fe}from"./vendor-i18n-CqcxoxDo.js";import{z as je,o as ae,ai as ie,a$ as ls,X as re,w as ue,G as xe,d as V,P as os,b5 as cs,x as ms}from"./vendor-icons-C2Bicc1E.js";import{R as ne}from"./RichTextEditor-DUm6nj-5.js";const ds=t=>Ve({queryKey:["dish-images",t],queryFn:async()=>{const{data:o,error:a}=await D.from("restaurant_dish_images").select("*").eq("restaurant_id",t).order("sort_order",{ascending:!0});if(a)throw a;return o},enabled:!!t}),ps=()=>{const{user:t}=Se(),o=X();return le({mutationFn:async({restaurantId:a,file:x})=>{if(!t)throw new Error("Must be logged in");const{data:g,error:d}=await D.from("restaurant_dish_images").select("id").eq("restaurant_id",a);if(d)throw d;if(g&&g.length>=10)throw new Error("MAX_IMAGES_REACHED");const E=x.name.split(".").pop(),T=`${a}/${Date.now()}-${Math.random().toString(36).substring(7)}.${E}`,{error:v}=await D.storage.from("dish-images").upload(T,x);if(v)throw v;const{data:{publicUrl:F}}=D.storage.from("dish-images").getPublicUrl(T),A=g?g.length:0,{data:L,error:S}=await D.from("restaurant_dish_images").insert({restaurant_id:a,image_url:F,sort_order:A,created_by:t.id}).select().single();if(S)throw S;return L},onSuccess:(a,x)=>{o.invalidateQueries({queryKey:["dish-images",x.restaurantId]}),B.success(b.t("dishImages.uploadSuccess"))},onError:a=>{a.message==="MAX_IMAGES_REACHED"?B.error(b.t("dishImages.maxImagesReached")):B.error(b.t("dishImages.uploadFailed"))}})},hs=()=>{const t=X();return le({mutationFn:async({imageId:o,restaurantId:a,imageUrl:x})=>{const g=x.split("/dish-images/");g[1]&&await D.storage.from("dish-images").remove([g[1]]);const{error:d}=await D.from("restaurant_dish_images").delete().eq("id",o);if(d)throw d;return{restaurantId:a}},onSuccess:o=>{t.invalidateQueries({queryKey:["dish-images",o.restaurantId]}),B.success(b.t("dishImages.deleteSuccess"))},onError:()=>{B.error(b.t("dishImages.deleteFailed"))}})},us=()=>{const t=X();return le({mutationFn:async({images:o,restaurantId:a})=>{const x=o.map(g=>D.from("restaurant_dish_images").update({sort_order:g.sort_order}).eq("id",g.id));return await Promise.all(x),{restaurantId:a}},onSuccess:o=>{t.invalidateQueries({queryKey:["dish-images",o.restaurantId]})}})};function xs({image:t,index:o,onDelete:a}){const{attributes:x,listeners:g,setNodeRef:d,transform:E,transition:T,isDragging:v}=ss({id:t.id}),F={transform:ts.Transform.toString(E),transition:T,zIndex:v?10:1,opacity:v?.8:1};return e.jsxs("div",{ref:d,style:F,className:`relative group aspect-square rounded-lg overflow-hidden border ${v?"ring-2 ring-primary shadow-lg":""}`,children:[e.jsx("div",{...x,...g,className:"absolute top-1 left-1 z-10 p-1 bg-black/60 rounded cursor-grab active:cursor-grabbing opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(ls,{className:"w-4 h-4 text-white"})}),e.jsx("img",{src:t.image_url,alt:`Dish ${o+1}`,className:"w-full h-full object-cover",draggable:!1}),e.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsx($,{type:"button",variant:"destructive",size:"icon",className:"h-8 w-8",onClick:A=>{A.preventDefault(),A.stopPropagation(),a(t.id,t.image_url)},children:e.jsx(re,{className:"w-4 h-4"})})}),e.jsx("div",{className:"absolute bottom-1 right-1 bg-black/60 text-white text-xs px-1.5 py-0.5 rounded",children:o+1})]})}function gs({restaurantId:t}){const{t:o}=fe(),a=_.useRef(null),{data:x=[],isLoading:g}=ds(t),d=ps(),E=hs(),T=us(),[v,F]=_.useState(null),[A,L]=_.useState([]),[S,U]=_.useState(!1),w=A.length>0?A:x,p=Xe(he(is,{activationConstraint:{distance:8}}),he(ns,{coordinateGetter:as})),z=r=>{const{active:C,over:u}=r;if(u&&C.id!==u.id){const f=w.findIndex(M=>M.id===C.id),q=w.findIndex(M=>M.id===u.id),Q=rs(w,f,q);L(Q);const Y=Q.map((M,k)=>({id:M.id,sort_order:k}));T.mutate({images:Y,restaurantId:t},{onSuccess:()=>{L([])},onError:()=>{L([])}})}},i=async r=>{const C=r.target.files?.[0];C&&(C.size>5*1024*1024||C.type.startsWith("image/")&&(await d.mutateAsync({restaurantId:t,file:C}),a.current&&(a.current.value="")))},h=async()=>{if(!v||S)return;const{id:r,url:C}=v;U(!0);try{await E.mutateAsync({imageId:r,restaurantId:t,imageUrl:C}),F(null)}catch(u){console.error("Delete failed:",u)}finally{U(!1)}},I=r=>{!r&&!S&&F(null)},H=w.length<10;return e.jsxs(K,{children:[e.jsxs(Ie,{className:"pb-3",children:[e.jsxs(ke,{className:"text-lg flex items-center gap-2",children:[e.jsx(je,{className:"w-5 h-5"}),o("dishImages.title")]}),e.jsxs(Fe,{children:[o("dishImages.description",{current:w.length,max:10}),w.length>1&&e.jsx("span",{className:"block mt-1 text-xs",children:o("dishImages.dragToReorder")})]})]}),e.jsxs(G,{children:[g?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(ae,{className:"w-6 h-6 animate-spin"})}):e.jsxs("div",{className:"space-y-4",children:[w.length>0&&e.jsx(Ye,{sensors:p,collisionDetection:Je,onDragEnd:z,children:e.jsx(Ze,{items:w.map(r=>r.id),strategy:es,children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:w.map((r,C)=>e.jsx(xs,{image:r,index:C,onDelete:(u,f)=>F({id:u,url:f})},r.id))})})}),H&&e.jsxs("div",{children:[e.jsx("input",{ref:a,type:"file",accept:"image/*",className:"hidden",onChange:i,disabled:d.isPending}),e.jsxs($,{type:"button",variant:"outline",className:"w-full",onClick:()=>a.current?.click(),disabled:d.isPending,children:[d.isPending?e.jsx(ae,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(ie,{className:"w-4 h-4 mr-2"}),o("dishImages.upload")]})]}),!H&&e.jsx("p",{className:"text-sm text-muted-foreground text-center",children:o("dishImages.maxReached")})]}),e.jsx(Te,{open:!!v,onOpenChange:I,children:e.jsx(Ae,{onClick:r=>r.stopPropagation(),onKeyDown:r=>{r.key==="Enter"&&(r.preventDefault(),r.stopPropagation())},children:e.jsxs("form",{onSubmit:r=>r.preventDefault(),children:[e.jsxs(Re,{children:[e.jsx(Ee,{children:o("dishImages.deleteConfirmTitle")}),e.jsx(ze,{children:o("dishImages.deleteConfirmDescription")})]}),e.jsxs(qe,{className:"mt-4",children:[e.jsx($,{type:"button",variant:"outline",onClick:r=>{r.preventDefault(),r.stopPropagation(),S||F(null)},disabled:S,children:o("common.cancel")}),e.jsxs($,{type:"button",variant:"destructive",onClick:r=>{r.preventDefault(),r.stopPropagation(),h()},disabled:S,children:[S?e.jsx(ae,{className:"w-4 h-4 mr-2 animate-spin"}):null,o("common.delete")]})]})]})})})]})]})}const fs=we({name:j().min(1,b.t("validation.nameRequired")),name_en:j().min(1,b.t("validation.nameRequired")),name_pt:j().min(1,b.t("validation.nameRequired")),key_id:j().optional(),type:J(j()).min(1,b.t("validation.typeRequired")).max(3,b.t("validation.typeMaximum")),type_en:J(j()).min(1,b.t("validation.typeRequired")).max(3,b.t("validation.typeMaximum")),type_pt:J(j()).min(1,b.t("validation.typeRequired")).max(3,b.t("validation.typeMaximum")),description:j().optional(),description_en:j().optional(),description_pt:j().optional(),announcement_zh:j().optional(),announcement_en:j().optional(),announcement_pt:j().optional(),address:j().min(1,b.t("validation.addressRequired")),lat:de(),lng:de(),phone:j().optional(),website_url:j().optional(),show_website_button:pe().default(!0),show_dish_gallery:pe().default(!0)}),ge=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];function Fs({restaurant:t,trigger:o}){const{t:a}=fe(),{toast:x}=Me(),g=X(),{isAdmin:d}=Pe(),[E,T]=_.useState(!1),[v,F]=_.useState(null),[A,L]=_.useState(t?.image_url||null),[S,U]=_.useState(!1),w=_.useRef(null),p=_.useRef(null),z=_.useRef(null),[i,h]=_.useState(()=>{const s={};return ge.forEach(n=>{s[n]={open:"12:00",close:"23:00",closed:!1,splitShift:!1,open2:"19:00",close2:"23:00"}}),t?.opening_hours?{...s,...t.opening_hours}:s}),[I,H]=_.useState(()=>t?.type&&Array.isArray(t.type)?t.type.map((s,n)=>({zh:s,en:t.type_en?.[n]||"",pt:t.type_pt?.[n]||""})):[{zh:"",en:"",pt:""}]),{register:r,handleSubmit:C,formState:{errors:u},setValue:f,watch:q}=Ce({resolver:De(fs),defaultValues:t?{name:t.name,name_en:t.name_en||"",name_pt:t.name_pt||"",key_id:t.key_id||"",type:Array.isArray(t.type)?t.type:[t.type],type_en:Array.isArray(t.type_en)?t.type_en:t.type_en?[t.type_en]:[""],type_pt:Array.isArray(t.type_pt)?t.type_pt:t.type_pt?[t.type_pt]:[""],description:t.description||"",description_en:t.description_en||"",description_pt:t.description_pt||"",announcement_zh:t.announcement_zh||"",announcement_en:t.announcement_en||"",announcement_pt:t.announcement_pt||"",address:t.address,lat:typeof t.lat=="number"&&!isNaN(t.lat)?t.lat:38.7223,lng:typeof t.lng=="number"&&!isNaN(t.lng)?t.lng:-9.1393,phone:t.phone||"",website_url:t.website_url||"",show_website_button:t.show_website_button??!0,show_dish_gallery:t.show_dish_gallery??!0}:{name:"",name_en:"",name_pt:"",key_id:"",type:[""],type_en:[""],type_pt:[""],description:"",description_en:"",description_pt:"",announcement_zh:"",announcement_en:"",announcement_pt:"",address:"",lat:38.7223,lng:-9.1393,phone:"",website_url:"",show_website_button:!0,show_dish_gallery:!0}}),Q=()=>{I.length<3&&H([...I,{zh:"",en:"",pt:""}])},Y=s=>{I.length>1&&H(I.filter((n,m)=>m!==s))},M=(s,n,m)=>{const N=[...I];N[s][n]=m,H(N),f("type",N.map(y=>y.zh).filter(Boolean)),f("type_en",N.map(y=>y.en).filter(Boolean)),f("type_pt",N.map(y=>y.pt).filter(Boolean))},k=q("lat"),R=q("lng"),Ne=q("show_website_button"),ye=q("show_dish_gallery"),W=(s,n)=>typeof s=="number"&&typeof n=="number"&&!isNaN(s)&&!isNaN(n)&&isFinite(s)&&isFinite(n);_.useEffect(()=>{if(!E){p.current&&(p.current.remove(),p.current=null,z.current=null);return}if(p.current)return;const s="pk.eyJ1IjoieGlhb3hpb25nMTIzIiwiYSI6ImNtNTFjOXliYjF1Y2IyaXM4bnNzMGxvdnkifQ.mPcWqH7ndIrjEqlWIJVk8g",m=setTimeout(()=>{if(!w.current){console.error("Map container not found");return}try{Z.accessToken=s;const N=W(k,R)?R:-9.1393,y=W(k,R)?k:38.7223;p.current=new Z.Map({container:w.current,style:"mapbox://styles/mapbox/light-v11",center:[N,y],zoom:15}),p.current.scrollZoom.disable(),p.current.on("load",()=>{p.current&&(W(k,R)&&(z.current=new Z.Marker({draggable:!0}).setLngLat([R,k]).addTo(p.current)),z.current.on("dragend",()=>{const P=z.current.getLngLat();f("lng",P.lng),f("lat",P.lat)}),setTimeout(()=>{p.current?.resize()},100))});const ve=P=>{P.ctrlKey||P.metaKey?p.current?.scrollZoom.enable():p.current?.scrollZoom.disable()};w.current.addEventListener("wheel",ve),p.current.on("click",P=>{const{lng:ce,lat:me}=P.lngLat;f("lng",ce),f("lat",me),z.current?.setLngLat([ce,me])}),p.current.on("error",P=>{console.error("Map error:",P)})}catch(N){console.error("Failed to initialize map:",N)}},500);return()=>{clearTimeout(m)}},[E,k,R]),_.useEffect(()=>{z.current&&p.current&&W(k,R)&&(z.current.setLngLat([R,k]),p.current.setCenter([R,k]))},[k,R]);const _e=s=>{const n=s.target.files?.[0];if(n){F(n);const m=new FileReader;m.onloadend=()=>{L(m.result)},m.readAsDataURL(n)}},be=async()=>{if(!v)return t?.image_url||null;const s=v.name.split(".").pop(),m=`${`${Math.random()}.${s}`}`,{error:N}=await D.storage.from("restaurant-images").upload(m,v);if(N)throw N;const{data:{publicUrl:y}}=D.storage.from("restaurant-images").getPublicUrl(m);return y},oe=async s=>{U(!0);try{const{data:{user:n}}=await D.auth.getUser();if(!n)throw new Error("Not authenticated");const m=await be(),N={name:s.name,name_en:s.name_en,name_pt:s.name_pt,key_id:s.key_id||null,type:s.type,type_en:s.type_en,type_pt:s.type_pt,description:s.description||null,description_en:s.description_en||null,description_pt:s.description_pt||null,announcement_zh:s.announcement_zh||null,announcement_en:s.announcement_en||null,announcement_pt:s.announcement_pt||null,address:s.address,lat:s.lat,lng:s.lng,phone:s.phone||null,website_url:s.website_url||null,show_website_button:s.show_website_button,show_dish_gallery:s.show_dish_gallery,image_url:m,opening_hours:i};if(t){const{error:y}=await D.from("restaurants").update({...N,updated_by:n.id}).eq("id",t.id);if(y)throw y;x({title:a("common.success"),description:a("admin.restaurantUpdated")})}else{const{error:y}=await D.from("restaurants").insert([{...N,created_by:n.id}]);if(y)throw y;x({title:a("common.success"),description:a("admin.restaurantCreated")})}g.invalidateQueries({queryKey:["restaurants"]}),T(!1)}catch(n){x({title:a("common.error"),description:n.message,variant:"destructive"})}finally{U(!1)}};return e.jsxs($e,{open:E,onOpenChange:T,children:[e.jsx(Le,{asChild:!0,children:o}),e.jsxs(Ke,{className:"max-w-[95vw] sm:max-w-6xl max-h-[95vh] overflow-hidden flex flex-col p-0",children:[e.jsxs(Ge,{className:"px-6 pt-6 pb-4 border-b bg-muted/30",children:[e.jsxs(He,{className:"text-2xl flex items-center gap-2",children:[e.jsx(ue,{className:"w-6 h-6 text-primary"}),a(t?"admin.editRestaurant":"admin.addRestaurant")]}),e.jsx(Ue,{className:"text-base",children:a(t?"admin.editRestaurantDetails":"admin.createRestaurantWithInfo")})]}),e.jsx(Oe,{className:"px-6 h-[calc(95vh-220px)]",children:e.jsxs("form",{onSubmit:C(oe),className:"space-y-6 py-6",children:[e.jsx(K,{className:"border-primary/20 bg-gradient-to-br from-background to-muted/20",children:e.jsxs(G,{className:"p-6",children:[e.jsxs(l,{className:"text-base font-semibold flex items-center gap-2 mb-4",children:[e.jsx(ie,{className:"w-5 h-5 text-primary"}),a("admin.restaurantImage")]}),e.jsxs("div",{className:"flex items-center gap-6",children:[A&&e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:A,alt:"Preview",className:"w-40 h-40 object-cover rounded-lg shadow-lg ring-2 ring-primary/20 transition-transform duration-200 group-hover:scale-105"}),e.jsx($,{type:"button",variant:"destructive",size:"icon",className:"absolute -top-2 -right-2 h-8 w-8 shadow-lg opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>{F(null),L(null)},children:e.jsx(re,{className:"h-4 w-4"})})]}),e.jsxs(l,{htmlFor:"image-upload",className:"cursor-pointer",children:[e.jsxs("div",{className:"flex flex-col items-center gap-3 px-8 py-6 border-2 border-dashed border-primary/30 rounded-lg hover:border-primary hover:bg-primary/5 transition-all duration-200",children:[e.jsx(ie,{className:"h-8 w-8 text-primary"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-medium text-sm",children:a("admin.uploadImage")}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:a("admin.imageMaxSize")})]})]}),e.jsx(c,{id:"image-upload",type:"file",accept:"image/*",className:"hidden",onChange:_e})]})]})]})}),t?.id&&e.jsx(K,{className:"border-primary/20",children:e.jsxs(G,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs(l,{className:"text-base font-semibold flex items-center gap-2",children:[e.jsx(je,{className:"w-5 h-5 text-primary"}),a("admin.dishGallery")]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(l,{htmlFor:"show-dish-gallery",className:"text-sm text-muted-foreground",children:a("admin.showDishGallery")}),e.jsx(Be,{id:"show-dish-gallery",checked:ye,onCheckedChange:s=>f("show_dish_gallery",s)})]})]}),e.jsx(gs,{restaurantId:t.id})]})}),e.jsx(K,{className:"border-primary/20",children:e.jsxs(G,{className:"p-6",children:[e.jsxs(l,{className:"text-base font-semibold flex items-center gap-2 mb-4",children:[e.jsx(xe,{className:"w-5 h-5 text-primary"}),a("admin.multilingualContent")]}),e.jsxs(Qe,{defaultValue:"zh",className:"w-full",children:[e.jsxs(We,{className:"grid w-full grid-cols-3 mb-6",children:[e.jsxs(se,{value:"zh",className:"gap-2",children:["ðŸ‡¨ðŸ‡³ ",a("admin.chinese")]}),e.jsxs(se,{value:"en",className:"gap-2",children:["ðŸ‡¬ðŸ‡§ ",a("admin.english")]}),e.jsxs(se,{value:"pt",className:"gap-2",children:["ðŸ‡µðŸ‡¹ ",a("admin.portuguese")]})]}),e.jsxs(te,{value:"zh",className:"space-y-4 mt-0",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"name",className:"text-sm font-medium",children:a("admin.restaurantName")}),e.jsx(c,{id:"name",...r("name"),placeholder:a("admin.enterRestaurantName"),className:"text-base"}),u.name&&e.jsx("p",{className:"text-sm text-destructive",children:u.name.message})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(l,{className:"text-sm font-medium",children:a("admin.restaurantType")}),I.length<3&&e.jsx($,{type:"button",variant:"outline",size:"sm",onClick:Q,children:a("admin.addType")})]}),I.map((s,n)=>e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(c,{placeholder:a("admin.typeExample"),value:s.zh,onChange:m=>M(n,"zh",m.target.value)}),e.jsx($,{type:"button",variant:"ghost",size:"icon",onClick:()=>Y(n),disabled:I.length===1,children:e.jsx(re,{className:"h-4 w-4"})})]},n)),u.type&&e.jsx("p",{className:"text-sm text-destructive",children:u.type.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"description",className:"text-sm font-medium",children:a("admin.description")}),e.jsx(ne,{value:q("description")||"",onChange:s=>f("description",s),placeholder:a("admin.enterDescription")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"announcement_zh",className:"text-sm font-medium",children:a("admin.announcement")}),e.jsx(ee,{id:"announcement_zh",...r("announcement_zh"),rows:2,placeholder:a("admin.enterAnnouncement")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a("admin.announcementHint")})]})]}),e.jsxs(te,{value:"en",className:"space-y-4 mt-0",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"name_en",className:"text-sm font-medium",children:"Restaurant Name"}),e.jsx(c,{id:"name_en",...r("name_en"),placeholder:"Enter restaurant name...",className:"text-base"}),u.name_en&&e.jsx("p",{className:"text-sm text-destructive",children:u.name_en.message})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(l,{className:"text-sm font-medium",children:"Restaurant Types (1-3 tags)"}),I.map((s,n)=>e.jsx("div",{className:"flex gap-2 items-center",children:e.jsx(c,{placeholder:"e.g. Cantonese",value:s.en,onChange:m=>M(n,"en",m.target.value)})},n))]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"description_en",className:"text-sm font-medium",children:"Description"}),e.jsx(ne,{value:q("description_en")||"",onChange:s=>f("description_en",s),placeholder:"Enter restaurant description..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"announcement_en",className:"text-sm font-medium",children:"Announcement"}),e.jsx(ee,{id:"announcement_en",...r("announcement_en"),rows:2,placeholder:"Enter announcement (optional)..."}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Display important notices at top of restaurant page"})]})]}),e.jsxs(te,{value:"pt",className:"space-y-4 mt-0",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"name_pt",className:"text-sm font-medium",children:"Nome do Restaurante"}),e.jsx(c,{id:"name_pt",...r("name_pt"),placeholder:"Digite o nome do restaurante...",className:"text-base"}),u.name_pt&&e.jsx("p",{className:"text-sm text-destructive",children:u.name_pt.message})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(l,{className:"text-sm font-medium",children:"Tipos de Restaurante (1-3 tags)"}),I.map((s,n)=>e.jsx("div",{className:"flex gap-2 items-center",children:e.jsx(c,{placeholder:"ex: Cantonesa",value:s.pt,onChange:m=>M(n,"pt",m.target.value)})},n))]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"description_pt",className:"text-sm font-medium",children:"DescriÃ§Ã£o"}),e.jsx(ne,{value:q("description_pt")||"",onChange:s=>f("description_pt",s),placeholder:"Digite a descriÃ§Ã£o do restaurante..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"announcement_pt",className:"text-sm font-medium",children:"AnÃºncio"}),e.jsx(ee,{id:"announcement_pt",...r("announcement_pt"),rows:2,placeholder:"Digite o anÃºncio (opcional)..."}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Exibir avisos importantes no topo da pÃ¡gina do restaurante"})]})]})]})]})}),e.jsx(K,{className:"border-primary/20",children:e.jsxs(G,{className:"p-6 space-y-4",children:[e.jsxs(l,{className:"text-base font-semibold flex items-center gap-2",children:[e.jsx(V,{className:"w-5 h-5 text-primary"}),a("admin.locationAndContact")]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{htmlFor:"address",className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(V,{className:"w-4 h-4"}),a("admin.address")]}),e.jsx(c,{id:"address",...r("address"),placeholder:a("admin.enterAddress")}),u.address&&e.jsx("p",{className:"text-sm text-destructive",children:u.address.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{htmlFor:"phone",className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(os,{className:"w-4 h-4"}),a("admin.phone")]}),e.jsx(c,{id:"phone",...r("phone"),placeholder:"+351..."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{htmlFor:"website_url",className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(xe,{className:"w-4 h-4"}),a("admin.website")]}),e.jsx(c,{id:"website_url",...r("website_url"),placeholder:"https://",readOnly:!d,disabled:!d,className:d?"":"bg-muted cursor-not-allowed"}),!d&&e.jsx("p",{className:"text-xs text-muted-foreground",children:a("admin.websiteReadOnly")})]}),d&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{htmlFor:"key_id",className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(cs,{className:"w-4 h-4"}),"Key ID (API)"]}),e.jsx(c,{id:"key_id",...r("key_id"),placeholder:"ä¾‹å¦‚: saldanha01"})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-8",children:[e.jsx(O,{id:"show_website_button",checked:Ne,onCheckedChange:s=>f("show_website_button",s)}),e.jsx(l,{htmlFor:"show_website_button",className:"cursor-pointer text-sm",children:a("admin.showWebsiteButton")})]})]})]})}),e.jsx(K,{className:"border-primary/20",children:e.jsxs(G,{className:"p-6 space-y-4",children:[e.jsxs(l,{className:"text-base font-semibold flex items-center gap-2",children:[e.jsx(V,{className:"w-5 h-5 text-primary"}),a("admin.location")]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"lat",className:"text-sm font-medium",children:a("admin.latitude")}),e.jsx(c,{id:"lat",type:"number",step:"any",...r("lat",{valueAsNumber:!0})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"lng",className:"text-sm font-medium",children:a("admin.longitude")}),e.jsx(c,{id:"lng",type:"number",step:"any",...r("lng",{valueAsNumber:!0})})]})]}),e.jsx("div",{ref:w,className:"h-96 w-full rounded-lg border-2 border-primary/20 shadow-sm",style:{minHeight:"384px"}}),e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[e.jsx(V,{className:"w-4 h-4"}),a("admin.clickOrDragToSetLocation")]})]})}),e.jsx(K,{className:"border-primary/20 overflow-hidden",children:e.jsxs(G,{className:"p-3 md:p-6 space-y-4",children:[e.jsxs(l,{className:"text-base font-semibold flex items-center gap-2",children:[e.jsx(ms,{className:"w-5 h-5 text-primary"}),a("admin.openingHours")]}),e.jsx("div",{className:"space-y-2",children:ge.map(s=>e.jsxs("div",{className:"space-y-2 p-2 md:p-3 rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"md:hidden space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{className:"capitalize font-semibold text-sm",children:a(`admin.day.${s}`)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(O,{id:`split-mobile-${s}`,checked:i[s].splitShift,onCheckedChange:n=>h({...i,[s]:{...i[s],splitShift:n}}),disabled:i[s].closed,className:"h-4 w-4"}),e.jsx(l,{htmlFor:`split-mobile-${s}`,className:"cursor-pointer text-xs",children:"åˆ†æ®µ"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(O,{id:`closed-mobile-${s}`,checked:i[s].closed,onCheckedChange:n=>h({...i,[s]:{...i[s],closed:n}}),className:"h-4 w-4"}),e.jsx(l,{htmlFor:`closed-mobile-${s}`,className:"cursor-pointer text-xs",children:a("admin.closed")})]})]})]}),!i[s].closed&&e.jsx("div",{className:"space-y-1.5",children:i[s].splitShift?e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"grid grid-cols-[32px_1fr_12px_1fr] gap-1 items-center",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"åˆé¤"}),e.jsx(c,{type:"time",value:i[s].open,onChange:n=>h({...i,[s]:{...i[s],open:n.target.value}}),className:"h-8 text-xs px-2 min-w-0"}),e.jsx("span",{className:"text-muted-foreground text-xs text-center",children:"-"}),e.jsx(c,{type:"time",value:i[s].close,onChange:n=>h({...i,[s]:{...i[s],close:n.target.value}}),className:"h-8 text-xs px-2 min-w-0"})]}),e.jsxs("div",{className:"grid grid-cols-[32px_1fr_12px_1fr] gap-1 items-center",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"æ™šé¤"}),e.jsx(c,{type:"time",value:i[s].open2||"19:00",onChange:n=>h({...i,[s]:{...i[s],open2:n.target.value}}),className:"h-8 text-xs px-2 min-w-0"}),e.jsx("span",{className:"text-muted-foreground text-xs text-center",children:"-"}),e.jsx(c,{type:"time",value:i[s].close2||"23:00",onChange:n=>h({...i,[s]:{...i[s],close2:n.target.value}}),className:"h-8 text-xs px-2 min-w-0"})]})]}):e.jsxs("div",{className:"grid grid-cols-[1fr_12px_1fr] gap-1 items-center",children:[e.jsx(c,{type:"time",value:i[s].open,onChange:n=>h({...i,[s]:{...i[s],open:n.target.value}}),className:"h-8 text-xs px-2 min-w-0"}),e.jsx("span",{className:"text-muted-foreground text-xs text-center",children:"-"}),e.jsx(c,{type:"time",value:i[s].close,onChange:n=>h({...i,[s]:{...i[s],close:n.target.value}}),className:"h-8 text-xs px-2 min-w-0"})]})})]}),e.jsxs("div",{className:"hidden md:block",children:[e.jsxs("div",{className:"grid grid-cols-[120px_1fr_auto] gap-4 items-center",children:[e.jsx(l,{className:"capitalize font-semibold",children:a(`admin.day.${s}`)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{id:`split-${s}`,checked:i[s].splitShift,onCheckedChange:n=>h({...i,[s]:{...i[s],splitShift:n}}),disabled:i[s].closed}),e.jsx(l,{htmlFor:`split-${s}`,className:"cursor-pointer text-sm",children:"åˆ†æ®µè¥ä¸š"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(O,{id:`closed-${s}`,checked:i[s].closed,onCheckedChange:n=>h({...i,[s]:{...i[s],closed:n}})}),e.jsx(l,{htmlFor:`closed-${s}`,className:"cursor-pointer",children:a("admin.closed")})]})]}),!i[s].closed&&e.jsx("div",{className:"ml-[120px] space-y-2 mt-2",children:i[s].splitShift?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground w-12",children:"åˆé¤"}),e.jsx(c,{type:"time",value:i[s].open,onChange:n=>h({...i,[s]:{...i[s],open:n.target.value}}),className:"w-32"}),e.jsx("span",{className:"text-muted-foreground",children:"-"}),e.jsx(c,{type:"time",value:i[s].close,onChange:n=>h({...i,[s]:{...i[s],close:n.target.value}}),className:"w-32"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground w-12",children:"æ™šé¤"}),e.jsx(c,{type:"time",value:i[s].open2||"19:00",onChange:n=>h({...i,[s]:{...i[s],open2:n.target.value}}),className:"w-32"}),e.jsx("span",{className:"text-muted-foreground",children:"-"}),e.jsx(c,{type:"time",value:i[s].close2||"23:00",onChange:n=>h({...i,[s]:{...i[s],close2:n.target.value}}),className:"w-32"})]})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{type:"time",value:i[s].open,onChange:n=>h({...i,[s]:{...i[s],open:n.target.value}}),className:"w-32"}),e.jsx("span",{className:"text-muted-foreground",children:"-"}),e.jsx(c,{type:"time",value:i[s].close,onChange:n=>h({...i,[s]:{...i[s],close:n.target.value}}),className:"w-32"})]})})]})]},s))})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-2 px-6 py-4 border-t bg-muted/30",children:[e.jsx($,{type:"button",variant:"outline",onClick:()=>T(!1),children:a("common.cancel")}),e.jsxs($,{type:"submit",disabled:S,onClick:C(oe),className:"gap-2",children:[e.jsx(ue,{className:"w-4 h-4"}),a(S?"common.saving":"common.save")]})]})]})]})}export{Fs as R,ds as u};
//# sourceMappingURL=RestaurantFormDialog-Cnyt4khi.js.map
