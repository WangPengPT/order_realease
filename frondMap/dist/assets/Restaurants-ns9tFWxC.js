import{j as e,p as U,aW as M,u as Re,q as $e,r as n,bb as Ae,bc as Se,bd as Te,aX as De,X as z,be as Le,a$ as ze,a_ as Me,y as qe,bf as Fe,L as Pe,b0 as _e}from"./vendor-react-Dd_5Sawp.js";import{C as J,j as l,p as Y,q as Z,r as ee,A as Qe,t as Ie,v as Ke,w as Ee,x as Be,y as Ve,z as We,E as Oe,f as He,a as Xe,u as Ge,I as Ue,B as x,g as w,s as Je}from"./index-BTawsUvj.js";import{P as se,a as te,b as ae}from"./popover-DEo1gqDn.js";import{u as Ye,b as Ze,a as es,c as ss}from"./useRestaurants-B9CCGo6C.js";import{c as ts,o as as,g as ls}from"./geolocation-DRm3QMsJ.js";import{u as is,R as rs,l as ns}from"./xiaoxiong-logo-clean-mZ583h23.js";import{u as os}from"./useLocalizedContent-N57tkM8u.js";import{f as cs}from"./timeUtils-pgRxO0UB.js";import{u as ds}from"./useActivities-CqdXqqts.js";import{u as ms}from"./useInfiniteScroll-BzPoJ8x7.js";import{L as us}from"./LocationPermissionDialog-376pRSlV.js";import{P as xs}from"./PullToRefresh-C5cS2eNQ.js";import"./vendor-i18n-jtdHZIRR.js";import"./vendor-editor-B1vH4T8i.js";import"./vendor-utils-vwQGbBim.js";import"./vendor-supabase-BnZwaL-Z.js";import"./vendor-map-CvE3ASYw.js";const hs=({count:h=6})=>e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:h}).map((o,t)=>e.jsxs(J,{className:"overflow-hidden flex flex-col h-full",style:{animationDelay:`${t*100}ms`},children:[e.jsxs("div",{className:"relative h-48 overflow-hidden",children:[e.jsx(l,{className:"w-full h-full rounded-none"}),e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx(l,{className:"h-9 w-9 rounded-md"})})]}),e.jsx(Y,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(l,{className:"h-6 w-40"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(l,{className:"h-4 w-4 rounded-full"}),e.jsx(l,{className:"h-4 w-16"})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(l,{className:"h-5 w-5 rounded-full"}),e.jsx(l,{className:"h-5 w-8"})]})]})}),e.jsxs(Z,{className:"space-y-3 flex-grow",children:[e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx(l,{className:"h-5 w-16 rounded-full"}),e.jsx(l,{className:"h-5 w-20 rounded-full"}),e.jsx(l,{className:"h-5 w-14 rounded-full"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(l,{className:"h-4 w-4 rounded-full flex-shrink-0"}),e.jsx(l,{className:"h-4 w-full"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(l,{className:"h-4 w-4 rounded-full flex-shrink-0"}),e.jsx(l,{className:"h-4 w-32"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(l,{className:"h-4 w-4 rounded-full flex-shrink-0"}),e.jsx(l,{className:"h-4 w-40"})]})]}),e.jsxs(ee,{className:"gap-2 mt-auto",children:[e.jsx(l,{className:"h-10 flex-1 rounded-md"}),e.jsx(l,{className:"h-10 w-10 rounded-md"})]})]},t))}),fs=()=>e.jsxs("div",{className:"relative flex-1 min-h-[300px] sm:min-h-[400px] lg:mx-4 lg:mb-4 lg:rounded-lg overflow-hidden lg:shadow-lg bg-muted",children:[e.jsx(l,{className:"absolute inset-0 w-full h-full rounded-none"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:e.jsx(l,{className:"h-8 w-8 rounded-full"})}),e.jsx("div",{className:"absolute top-1/4 left-1/3",children:e.jsx(l,{className:"h-6 w-6 rounded-full"})}),e.jsx("div",{className:"absolute top-1/3 right-1/4",children:e.jsx(l,{className:"h-6 w-6 rounded-full"})}),e.jsx("div",{className:"absolute bottom-1/3 left-1/4",children:e.jsx(l,{className:"h-6 w-6 rounded-full"})}),e.jsx("div",{className:"absolute bottom-1/4 right-1/3",children:e.jsx(l,{className:"h-6 w-6 rounded-full"})})]})}),e.jsx("div",{className:"absolute bottom-4 left-4 z-10",children:e.jsx(l,{className:"h-10 w-36 rounded-full"})}),e.jsxs("div",{className:"absolute top-4 right-4 z-10 flex flex-col gap-2",children:[e.jsx(l,{className:"h-8 w-8 rounded-md"}),e.jsx(l,{className:"h-8 w-8 rounded-md"})]})]}),gs=()=>{const h=/iPad|iPhone|iPod/.test(navigator.userAgent),o=/Android/.test(navigator.userAgent);return h?"Apple Maps":"Google Maps"},ps=({open:h,onOpenChange:o,onConfirm:t,destinationName:f})=>{const{t:g}=U(),R=gs();return e.jsx(Qe,{open:h,onOpenChange:o,children:e.jsxs(Ie,{className:"max-w-md",children:[e.jsxs(Ke,{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 rounded-full bg-primary/10",children:e.jsx(M,{className:"w-5 h-5 text-primary"})}),e.jsx(Ee,{children:g("navigation.confirmTitle")})]}),e.jsx(Be,{className:"text-left",children:g("navigation.confirmDescription",{appName:R,destination:f})})]}),e.jsxs(Ve,{className:"flex-col sm:flex-row gap-2",children:[e.jsx(We,{className:"w-full sm:w-auto",children:g("common.cancel")}),e.jsx(Oe,{onClick:t,className:"w-full sm:w-auto",children:g("navigation.openApp",{appName:R})})]})]})})},vs=({restaurant:h,language:o})=>{const[t,f]=n.useState(999),g=n.useRef(null),N=h.type.map((i,c)=>({key:`type-${c}`,label:i,variant:"secondary",color:void 0}));n.useEffect(()=>{const i=()=>{if(!g.current)return;const b=g.current,p=Array.from(b.querySelectorAll(".tag-badge"));if(p.length===0){setTimeout(i,50);return}const y=p[0]?.offsetTop;let r=p.length;for(let u=0;u<p.length;u++)if(p[u].offsetTop>y){r=u;break}if(r===p.length){f(p.length);return}const T=b.offsetWidth,k=40;let D=0,d=r;for(let u=0;u<r;u++)D+=p[u].offsetWidth+8;D+k>T&&(d=Math.max(1,r-1)),f(d)};f(999);const c=setTimeout(i,100);return window.addEventListener("resize",i),()=>{clearTimeout(c),window.removeEventListener("resize",i)}},[N.length,h.id]);const $=N.slice(0,t),S=N.slice(t),m=S.length>0;return e.jsxs("div",{className:"flex items-center gap-2 -mt-1",children:[e.jsx("div",{ref:g,className:"flex gap-2 flex-wrap flex-1",children:$.map(i=>e.jsx(w,{variant:i.variant,className:"text-xs whitespace-nowrap tag-badge",style:i.color?{backgroundColor:i.color,color:"white"}:void 0,children:i.label},i.key))}),m&&e.jsxs(se,{children:[e.jsx(te,{asChild:!0,children:e.jsx(x,{variant:"ghost",size:"sm",className:"h-6 px-2 text-muted-foreground hover:text-foreground flex-shrink-0",children:e.jsx(_e,{className:"h-4 w-4"})})}),e.jsx(ae,{className:"w-auto max-w-80",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:S.map(i=>e.jsx(w,{variant:i.variant,className:"text-xs",style:i.color?{backgroundColor:i.color,color:"white"}:void 0,children:i.label},i.key))})})]})]})},Fs=()=>{const h=Re(),o=$e(),{t,i18n:f}=U(),{toast:g}=He(),{localizeRestaurant:R}=os(),N=Xe(),[$,S]=n.useState(""),[m,i]=n.useState([]),[c,b]=n.useState(null),[p,y]=n.useState([]),[r,T]=n.useState("list"),[k,D]=n.useState(()=>localStorage.getItem("restaurant-list-columns")==="1"?1:2),[d,u]=n.useState(null),[j,le]=n.useState(null),[ie,re]=n.useState(!1),[q,ne]=n.useState(!1),[F,oe]=n.useState(!1),[ce,P]=n.useState(!1),[de,_]=n.useState(!1),[A,me]=n.useState(null),{user:K}=Ge(),{data:E,isLoading:ue}=Ye($,m.length>0?m.join(","):void 0),{data:xe=[]}=Ze(),{data:Q=[]}=es(),{data:he=[]}=ds(),{data:fe={}}=is(),ge=n.useCallback(async()=>{o.removeQueries({queryKey:["restaurants"]}),o.removeQueries({queryKey:["activities"]}),o.removeQueries({queryKey:["restaurantTypes"]}),o.removeQueries({queryKey:["favorites"]}),o.removeQueries({queryKey:["favorite-ids"]}),await Promise.all([o.invalidateQueries({queryKey:["restaurants"]}),o.invalidateQueries({queryKey:["activities"]}),o.invalidateQueries({queryKey:["restaurantTypes"]}),o.invalidateQueries({queryKey:["favorites"]}),o.invalidateQueries({queryKey:["favorite-ids"]})])},[o]),L=he.filter(s=>(fe[s.id]||0)>0),pe=ss(),ve=(s,a)=>{a.preventDefault(),a.stopPropagation(),K&&pe.mutate(s)},je=s=>{i(a=>a.includes(s)?a.filter(v=>v!==s):[...a,s])},Ne=()=>{_(!0)},B=async()=>{_(!1);try{const s=await ls();le({lat:s.coords.latitude,lng:s.coords.longitude}),re(!0),g({title:t("restaurants.locationEnabled"),description:t("restaurants.sortByDistance")})}catch(s){console.error("Location error:",s)}},we=s=>{u(s),s&&!j&&B()},be=async s=>{if(c===s)b(null),y([]);else{b(s);const{data:a,error:v}=await Je.from("activity_restaurants").select("restaurant_id").eq("activity_id",s);v?(console.error("Error fetching activity restaurants:",v),y([])):y(a.map(I=>I.restaurant_id))}},V=E?.map(s=>{const a=R(s);if(j){const v=ts(j.lat,j.lng,s.lat,s.lng);return{...a,distance:v}}return a})||[],W=c?V.filter(s=>p.includes(s.id)):V,O=d&&j?W.filter(s=>s.distance&&s.distance<=d):W,C=j?[...O].sort((s,a)=>(s.distance||0)-(a.distance||0)):[...O].sort((s,a)=>(a.rating||0)-(s.rating||0)),{displayedData:H,hasMore:ye,loadMore:ke,reset:X}=ms({data:C,initialItemsPerPage:12,incrementPerPage:12});n.useEffect(()=>{X()},[$,m,c,d,ie,X]);const Ce=s=>{h(`/restaurant/${s.id}`)},G=e.jsx("div",{className:`bg-secondary/20 animate-fade-in ${r==="map"?"h-screen flex flex-col overflow-hidden":"min-h-screen py-8 px-4"}`,children:e.jsxs("div",{className:`${r==="map"?"flex flex-col h-full":"container mx-auto max-w-7xl"}`,children:[e.jsxs("div",{className:`${r==="map"?"px-4 pt-4 pb-2 flex-shrink-0":"mb-8"}`,children:[e.jsx("h1",{className:`text-3xl sm:text-4xl font-medium text-primary ${r==="map"?"hidden md:block md:mb-4":"mb-4"}`,children:t("restaurants.title")}),e.jsx("div",{className:"flex flex-col gap-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 md:items-center",children:[e.jsx(Ue,{placeholder:t("restaurants.search"),value:$,onChange:s=>S(s.target.value),className:"w-full md:max-w-md"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(x,{variant:j?"default":"outline",size:"sm",onClick:Ne,className:"gap-1.5",children:[e.jsx(M,{className:"h-4 w-4"}),e.jsx("span",{children:t("restaurants.getLocation")})]}),e.jsxs("div",{className:"inline-flex h-9 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",children:[e.jsx("button",{onClick:()=>{if(r==="list"){if(N){const s=k===2?1:2;D(s),localStorage.setItem("restaurant-list-columns",String(s))}}else T("list")},title:r==="list"&&N?k===2?t("restaurants.singleColumn","单列布局"):t("restaurants.doubleColumn","双列布局"):t("restaurants.listView"),className:`inline-flex items-center justify-center whitespace-nowrap rounded-sm px-2.5 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 ${r==="list"?"bg-background text-foreground shadow-sm":""}`,children:r==="list"&&N&&k===1?e.jsx(Ae,{className:"h-3.5 w-3.5"}):e.jsx(Se,{className:"h-3.5 w-3.5"})}),e.jsx("button",{onClick:()=>T("map"),title:t("restaurants.mapView"),className:`inline-flex items-center justify-center whitespace-nowrap rounded-sm px-2.5 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 ${r==="map"?"bg-background text-foreground shadow-sm":""}`,children:e.jsx(Te,{className:"h-3.5 w-3.5"})}),e.jsxs(se,{children:[e.jsx(te,{asChild:!0,children:e.jsxs("button",{title:t("restaurants.filter"),className:`inline-flex items-center justify-center whitespace-nowrap rounded-sm px-2.5 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 relative ${m.length>0||c||d?"bg-background text-foreground shadow-sm":""}`,children:[e.jsx(De,{className:"h-3.5 w-3.5"}),(m.length>0||c||d)&&e.jsx(w,{variant:"secondary",className:"absolute -top-1 -right-1 h-4 w-4 p-0 flex items-center justify-center text-[10px]",children:(m.length>0?1:0)+(c?1:0)+(d?1:0)})]})}),e.jsx(ae,{className:"w-[90vw] max-w-sm p-0",align:"start",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border/50 bg-muted/30",children:[e.jsx("span",{className:"font-semibold text-foreground text-base",children:t("restaurants.filter")}),(m.length>0||c||d)&&e.jsxs(x,{variant:"ghost",size:"sm",className:"h-7 px-2 text-xs text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>{i([]),b(null),y([]),u(null)},children:[e.jsx(z,{className:"w-3 h-3 mr-1"}),t("common.actions.clearFilter")]})]}),e.jsxs("div",{className:"p-4 space-y-5",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:t("restaurants.restaurantTypes")}),e.jsxs("div",{className:"flex items-center gap-2",children:[m.length>0&&e.jsxs(x,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>i([]),children:[e.jsx(z,{className:"w-3 h-3 mr-1"}),t("common.actions.clear")]}),Q.length>8&&e.jsx(x,{variant:"link",size:"sm",className:"h-auto p-0 text-xs text-primary hover:text-primary/80",onClick:()=>ne(!q),children:t(q?"common.showLess":"common.showMore")})]})]}),e.jsx("div",{className:"flex gap-2 flex-wrap max-h-36 overflow-y-auto pr-1",children:(q?Q:Q.slice(0,8)).map(s=>e.jsx(w,{variant:m.includes(s)?"default":"outline",className:`cursor-pointer transition-all duration-200 px-3 py-1.5 text-xs font-normal whitespace-nowrap hover:bg-primary/10 ${m.includes(s)?"bg-primary text-primary-foreground shadow-sm":"bg-background hover:border-primary/50"}`,onClick:()=>je(s),children:s},s))})]}),L.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:t("nav.activities")}),e.jsxs("div",{className:"flex items-center gap-2",children:[c&&e.jsxs(x,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>{b(null),y([])},children:[e.jsx(z,{className:"w-3 h-3 mr-1"}),t("common.actions.clear")]}),L.length>8&&e.jsx(x,{variant:"link",size:"sm",className:"h-auto p-0 text-xs text-primary hover:text-primary/80",onClick:()=>oe(!F),children:t(F?"common.showLess":"common.showMore")})]})]}),e.jsx("div",{className:"flex gap-2 flex-wrap max-h-36 overflow-y-auto pr-1",children:(F?L:L.slice(0,8)).map(s=>{const a=f.language==="zh"?s.badge_text_zh||s.title_zh:f.language==="pt"?s.badge_text_pt||s.title_pt:s.badge_text_en||s.title_en;return e.jsx(w,{variant:c===s.id?"default":"outline",className:`cursor-pointer transition-all duration-200 px-3 py-1.5 text-xs font-normal whitespace-nowrap hover:bg-primary/10 ${c===s.id?"bg-primary text-primary-foreground shadow-sm":"bg-background hover:border-primary/50"}`,onClick:()=>be(s.id),children:a},s.id)})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:t("restaurants.radius")}),d&&e.jsxs(x,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>u(null),children:[e.jsx(z,{className:"w-3 h-3 mr-1"}),t("common.actions.clear")]})]}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:[{value:null,label:t("restaurants.allRestaurants")},{value:5,label:t("restaurants.radius5km")},{value:10,label:t("restaurants.radius10km")},{value:20,label:t("restaurants.radius20km")}].map(s=>e.jsx(w,{variant:d===s.value?"default":"outline",className:`cursor-pointer transition-all duration-200 px-3 py-1.5 text-xs font-normal whitespace-nowrap hover:bg-primary/10 ${d===s.value?"bg-primary text-primary-foreground shadow-sm":"bg-background hover:border-primary/50"}`,onClick:()=>we(s.value),children:s.label},s.value??"all"))})]})]})]})})]})]})]})]})})]}),ue||!E?r==="map"?e.jsx(fs,{}):e.jsx(hs,{count:6}):C.length===0?e.jsxs("div",{className:`text-center ${r==="map"?"flex-1 flex flex-col justify-center px-4":"py-20"}`,children:[e.jsx("p",{className:"text-xl text-muted-foreground",children:t("restaurants.noResults")}),e.jsx("p",{className:"text-muted-foreground mt-2",children:t("restaurants.noResultsDesc")})]}):e.jsxs(e.Fragment,{children:[r==="map"&&C.length>0&&e.jsxs("div",{className:"relative flex-1 min-h-[300px] sm:min-h-[400px] lg:mx-4 lg:mb-4 lg:rounded-lg overflow-hidden lg:shadow-lg",children:[e.jsx(rs,{restaurants:C,onRestaurantClick:Ce,userLocation:j,radiusFilter:d,showViewDetailsButton:!0}),e.jsxs("div",{className:"absolute bottom-4 left-4 z-10 pointer-events-none flex items-center gap-2 bg-background/80 backdrop-blur-sm px-3 py-2 rounded-full shadow-lg",children:[e.jsx("img",{src:ns,alt:"Xiaoxiong Market Logo",className:"h-6 w-6 object-contain"}),e.jsx("span",{className:"text-sm font-semibold text-foreground whitespace-nowrap",children:f.language==="zh"?"小熊市场":"Xiaoxiong Market"})]})]}),r==="list"&&C.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`grid gap-6 ${k===1?"grid-cols-1":"grid-cols-2"} md:grid-cols-2 lg:grid-cols-3`,children:H.map(s=>{const a=N&&k===2;return e.jsxs(J,{className:`overflow-hidden hover:shadow-large transition-shadow flex flex-col h-full ${a?"gap-0":""}`,children:[e.jsxs("div",{className:`relative overflow-hidden ${a?"h-28":"h-48"}`,children:[e.jsx("img",{src:s.image_url||"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=600&q=80",alt:s.name,className:"w-full h-full object-cover transition-transform hover:scale-105"}),K&&e.jsx(x,{size:"icon",variant:"secondary",className:`absolute ${a?"top-1.5 right-1.5 h-7 w-7":"top-3 right-3"}`,onClick:v=>ve(s.id,v),children:e.jsx(Le,{className:`${a?"w-3.5 h-3.5":"w-5 h-5"} ${xe.includes(s.id)?"fill-destructive text-destructive":""}`})})]}),e.jsx(Y,{className:a?"p-2 pb-1":"mb-px pb-[15px]",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:`flex flex-col ${a?"gap-0.5":"gap-2"}`,children:[e.jsx("h3",{className:`font-semibold text-card-foreground ${a?"text-sm line-clamp-2":"text-xl"}`,children:s.name}),s.distance!==void 0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(M,{className:`text-primary ${a?"w-3 h-3":"w-4 h-4"}`}),e.jsxs("span",{className:`font-semibold text-foreground ${a?"text-xs":"text-sm"}`,children:[s.distance.toFixed(1)," km"]})]})]}),e.jsxs("div",{className:"flex items-center gap-0.5",children:[e.jsx(ze,{className:`${a?"w-3.5 h-3.5":"w-5 h-5"} ${s.rating?"fill-accent text-accent":"text-muted-foreground"}`}),s.rating?e.jsx("span",{className:`font-semibold text-card-foreground ${a?"text-xs":""}`,children:s.rating.toFixed(1)}):!a&&e.jsxs("span",{className:"text-xs text-muted-foreground text-center whitespace-nowrap",children:[t("restaurant.noRatingLine1"),e.jsx("br",{}),t("restaurant.noRatingLine2")]})]})]})}),e.jsxs(Z,{className:`flex-grow ${a?"p-2 pt-0 space-y-1":"space-y-2"}`,children:[e.jsx("div",{className:`flex items-center flex-wrap ${a?"gap-1":"gap-2"}`,children:a?s.type.slice(0,2).map((v,I)=>e.jsx(w,{variant:"secondary",className:"text-xs px-1.5 py-0.5",children:v},`type-${I}`)):e.jsxs(e.Fragment,{children:[e.jsx(vs,{restaurant:s,language:f.language}),s.template==="ghost"&&e.jsx(w,{variant:"outline",className:"text-xs",children:t("restaurants.ghostKitchen")})]})}),!a&&e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground text-sm",children:[e.jsx(Me,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"line-clamp-1",children:s.address})]}),!a&&s.phone&&e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground text-sm",children:[e.jsx(qe,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{children:s.phone})]}),!a&&s.opening_hours&&e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground text-sm",children:[e.jsx(Fe,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{children:cs(s.opening_hours)})]})]}),e.jsxs(ee,{className:`mt-auto ${a?"p-2 pt-0":"gap-2"}`,children:[e.jsx(x,{asChild:!0,className:`flex-1 ${a?"h-7 text-xs":""}`,size:a?"sm":"default",children:e.jsx(Pe,{to:`/restaurant/${s.id}`,children:t("restaurants.viewDetails")})}),!a&&j&&e.jsx(x,{variant:"outline",size:"icon",onClick:()=>{me({lat:s.lat,lng:s.lng,name:s.name}),P(!0)},title:t("restaurants.directions"),children:e.jsx(M,{className:"w-4 h-4"})})]})]},s.id)})}),ye&&e.jsx("div",{className:"flex justify-center mt-8",children:e.jsxs(x,{onClick:ke,size:"lg",variant:"outline",children:[t("common.loadMore")," (",H.length," / ",C.length,")"]})})]})]}),e.jsx(ps,{open:ce,onOpenChange:P,onConfirm:()=>{A&&as(A.lat,A.lng,A.name),P(!1)},destinationName:A?.name||""}),e.jsx(us,{open:de,onOpenChange:_,onConfirm:B})]})});return r==="list"?e.jsx(xs,{onRefresh:ge,children:G}):G};export{Fs as default};
//# sourceMappingURL=Restaurants-ns9tFWxC.js.map
