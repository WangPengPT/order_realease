import{p as Ne,u as Ee,r as n,j as e,al as gt,aL as Ve,aV as ft,aW as bt,aM as wt,aX as Fe,aY as Se,aZ as yt,a_ as vt,a$ as jt,av as Be,ax as Pe,b0 as Ce,b1 as We,b2 as Nt,b3 as Re,b4 as Ke,b5 as Qe,b6 as Ye,b7 as kt,b8 as He,b9 as _t,q as St,ba as Ct,bb as At,L as Rt,bc as Tt}from"./vendor-react-BSaoOtGi.js";import{a as Ze,u as Dt,b as Ge,c as Lt,l as It,D as zt,d as Mt,e as $t,f as Et,S as et,g as B,A as Ot,h as Vt,i as Ft,j as Bt,I as Pt,B as se,k as F,C as Te,s as Wt,m as Ht,o as qt,n as Ie,p as Xt,H as Ut,q as tt,r as st,t as Jt}from"./index-BRGVr5Zj.js";import{c as Kt,g as Qt,m as at}from"./geolocation-DRm3QMsJ.js";import{a as Yt,g as Zt}from"./app-store-badge-CyCtXXOt.js";import{u as rt}from"./useHomepageTemplates-BmPIErgH.js";import{u as Gt}from"./usePageView-kqssSuM5.js";import{L as nt}from"./LocationPermissionDialog-DCm8xBr3.js";import{P as es}from"./PullToRefresh-M2I3-fM_.js";import{P as ts,a as ss,b as as}from"./popover-C5dGvnDK.js";import{u as rs,a as ns}from"./useRestaurants-COCkXyCd.js";import{u as os,R as is,l as ls}from"./xiaoxiong-logo-clean-Tcc5zC8x.js";import{u as ot}from"./useLocalizedContent-BmCUAvFh.js";import{u as it}from"./useActivities-DZh0wO5d.js";import{E as cs}from"./ExternalLinkConfirmDialog-B7jy5mCE.js";import{a as qe,f as ze,K as ds,L as Xe,M as ms,i as us}from"./vendor-utils-Z4kpnli5.js";import"./vendor-i18n-jtdHZIRR.js";import"./vendor-editor-B1vH4T8i.js";import"./vendor-supabase-AmDIt6e_.js";import"./vendor-map-CvE3ASYw.js";const hs=()=>!!(window.webkit?.messageHandlers?.VoiceBridge||window.VoiceBridge),Ue={start:()=>{const s=JSON.stringify({action:"start"});window.webkit?.messageHandlers?.VoiceBridge?window.webkit.messageHandlers.VoiceBridge.postMessage(s):window.VoiceBridge&&window.VoiceBridge.postMessage(s)},stop:()=>{const s=JSON.stringify({action:"stop"});window.webkit?.messageHandlers?.VoiceBridge?window.webkit.messageHandlers.VoiceBridge.postMessage(s):window.VoiceBridge&&window.VoiceBridge.postMessage(s)}},Me="https://tzdgqhwyzsxkxnncgzap.supabase.co",je="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR6ZGdxaHd5enN4a3hubmNnemFwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM2NTg2ODgsImV4cCI6MjA3OTIzNDY4OH0.D76C4OkjQVWyMxtjjdOofpD8X_hEEoTtrXHqi4XSYUw",xs=["最近","附近","离我","距离","远近","近的","周边","周围","最近的","附近的","nearest","closest","nearby","near me","close to me","distance","around me","mais perto","próximo","perto de mim","distância","mais próximo"],ps=()=>{const s="xiaoxiong_anonymous_user_id";let a=localStorage.getItem(s);return a||(a=`anon_${Date.now()}_${Math.random().toString(36).substring(2,11)}`,localStorage.setItem(s,a)),a},gs=({open:s,onOpenChange:a,provider:l="ask-xiaoxiong"})=>{const{i18n:c}=Ne(),o=Ee(),{settings:w}=Ze(),{user:x}=Dt(),g=Ge(),{data:d}=Lt(),h=w?.logo_url||It,[f,y]=n.useState(""),[A,N]=n.useState([]),[C,_]=n.useState(!1),[M,Y]=n.useState(null),[ne,q]=n.useState(!1),[P,$]=n.useState(null),[E,I]=n.useState(!1),[X,Z]=n.useState(!1),[U,b]=n.useState(!1),[R,oe]=n.useState("100%"),G=n.useRef(null),ie=n.useRef(null),W=n.useRef(null),he=n.useRef(null),le=()=>{if(!X&&!U)return!1;const r=typeof window<"u"?window.innerWidth:1024,m=r>=768&&r<1024,i=r>=1024;return g?w?.voice_input_mobile!==!1:m?w?.voice_input_tablet!==!1:i?w?.voice_input_desktop!==!1:!0},ve=()=>x?.id?x.id:ps();n.useEffect(()=>{const r=window.SpeechRecognition||window.webkitSpeechRecognition;return Z(!!r),b(hs()),window.onSpeechResult=m=>{y(m),I(!1)},()=>{window.onSpeechResult=void 0}},[]),n.useEffect(()=>{if(!s||!g)return;const r=window.visualViewport;if(!r){oe("100%");return}const m=()=>{const i=r.height;oe(`${i}px`)};return m(),r.addEventListener("resize",m),()=>{r.removeEventListener("resize",m)}},[s,g]),n.useEffect(()=>{s&&!M&&navigator.geolocation?.getCurrentPosition(r=>{Y({lat:r.coords.latitude,lng:r.coords.longitude})},r=>{console.log("Unable to get user location:",r.message)},{enableHighAccuracy:!1,timeout:5e3,maximumAge:3e5})},[s,M]),n.useEffect(()=>{!s&&W.current&&(W.current.stop(),I(!1))},[s]),n.useEffect(()=>{he.current?.scrollIntoView({behavior:"smooth"})},[A]);const xe=async(r,m)=>{const i=await fetch(`${Me}/functions/v1/ask-xiaoxiong`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${je}`,apikey:je},body:JSON.stringify({text:r.content,stream:!0,lat:M?.lat,lng:M?.lng}),signal:G.current?.signal});if(!i.ok)throw new Error(`Request failed with status: ${i.status}`);if(!i.body)throw new Error("No response body");const j=i.body.getReader(),u=new TextDecoder;let k="";for(;;){const{done:L,value:V}=await j.read();if(L)break;const ye=u.decode(V,{stream:!0});k+=ye;let z=k;z.startsWith('"')&&(z=z.slice(1)),z.endsWith('"')&&(z=z.slice(0,-1)),z=z.replace(/\\n/g,`
`),N(te=>te.map(Q=>Q.id===m?{...Q,content:z}:Q))}let S=k;S.startsWith('"')&&(S=S.slice(1)),S.endsWith('"')&&(S=S.slice(0,-1)),S=S.replace(/\\n/g,`
`),N(L=>L.map(V=>V.id===m?{...V,content:S,isStreaming:!1}:V))},pe=async(r,m)=>{const i=ve(),j=Date.now();console.log(`[前端-Agent] ⏱️ 开始发送请求: ${new Date().toISOString()}`);const u=await fetch(`${Me}/functions/v1/xiaoxiong-agent`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${je}`,apikey:je},body:JSON.stringify({message:r.content,userId:i}),signal:G.current?.signal}),k=Date.now()-j;if(console.log(`[前端-Agent] ⏱️ 收到响应头: ${new Date().toISOString()}, 耗时: ${k}ms`),!u.ok)throw new Error(`Request failed with status: ${u.status}`);if(!u.body)throw new Error("No response body");const S=u.body.getReader(),L=new TextDecoder;let V="",ye=!1,z=0;for(;;){const{done:te,value:Q}=await S.read();if(te){console.log(`[前端-Agent] ⏱️ 流结束: ${new Date().toISOString()}, 总耗时: ${Date.now()-j}ms, 共 ${z} 个数据块`);break}z++;const ee=L.decode(Q,{stream:!0});if(V+=ee,!ye){ye=!0;const ue=Date.now()-j;console.log(`[前端-Agent] ⏱️ 首个数据块 (TTFB): ${new Date().toISOString()}, 耗时: ${ue}ms, 大小: ${ee.length} 字符`)}Fe.flushSync(()=>{N(ue=>ue.map(_e=>_e.id===m?{..._e,content:V}:_e))}),await new Promise(ue=>requestAnimationFrame(ue))}N(te=>te.map(Q=>Q.id===m?{...Q,isStreaming:!1}:Q))},ge=async(r,m)=>{const i=Date.now();console.log(`[前端-LovableAI] ⏱️ 开始发送请求: ${new Date().toISOString()}`);const j=await fetch(`${Me}/functions/v1/lovable-chat`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${je}`,apikey:je},body:JSON.stringify({message:r.content,lat:M?.lat,lng:M?.lng,language:c.language}),signal:G.current?.signal}),u=Date.now()-i;if(console.log(`[前端-LovableAI] ⏱️ 收到响应头: ${new Date().toISOString()}, 耗时: ${u}ms`),!j.ok){const z=await j.json().catch(()=>({}));throw new Error(z.error||`Request failed with status: ${j.status}`)}if(!j.body)throw new Error("No response body");const k=j.body.getReader(),S=new TextDecoder;let L="",V="",ye=!1;for(;;){const{done:z,value:te}=await k.read();if(z){console.log(`[前端-LovableAI] ⏱️ 流结束: ${new Date().toISOString()}, 总耗时: ${Date.now()-i}ms`);break}if(V+=S.decode(te,{stream:!0}),!ye){ye=!0;const ee=Date.now()-i;console.log(`[前端-LovableAI] ⏱️ 首个数据块 (TTFB): ${new Date().toISOString()}, 耗时: ${ee}ms`)}let Q;for(;(Q=V.indexOf(`
`))!==-1;){let ee=V.slice(0,Q);if(V=V.slice(Q+1),ee.endsWith("\r")&&(ee=ee.slice(0,-1)),ee.startsWith(":")||ee.trim()===""||!ee.startsWith("data: "))continue;const ue=ee.slice(6).trim();if(ue==="[DONE]")break;try{const Oe=JSON.parse(ue).choices?.[0]?.delta?.content;Oe&&(L+=Oe,Fe.flushSync(()=>{N(De=>De.map(Le=>Le.id===m?{...Le,content:L}:Le))}),await new Promise(De=>requestAnimationFrame(De)))}catch{}}}N(z=>z.map(te=>te.id===m?{...te,isStreaming:!1}:te))},v=r=>{const m=r.toLowerCase();return xs.some(i=>m.includes(i))},T=async r=>{const m={id:Date.now().toString(),role:"user",content:r},i=(Date.now()+1).toString(),j={id:i,role:"assistant",content:"",isStreaming:!0};N(u=>[...u,m,j]),y(""),_(!0),G.current&&G.current.abort(),G.current=new AbortController;try{l==="lovable-ai"?await ge(m,i):l==="xiaoxiong-agent"?await pe(m,i):await xe(m,i)}catch(u){if(u instanceof Error&&u.name==="AbortError"){console.log("Request aborted");return}console.error("Ask API error:",u);const k=c.language==="zh"?"抱歉，暂时无法获取结果，请稍后再试":c.language==="pt"?"Desculpe, não foi possível obter resultados. Tente novamente mais tarde.":"Sorry, unable to get results. Please try again later.";N(S=>S.map(L=>L.id===i?{...L,content:k,isStreaming:!1}:L))}finally{_(!1)}},J=()=>{q(!1),navigator.geolocation?.getCurrentPosition(r=>{Y({lat:r.coords.latitude,lng:r.coords.longitude}),P&&setTimeout(()=>{T(P),$(null)},100)},r=>{console.log("Location permission denied:",r.message),P&&(T(P),$(null))},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})},D=async()=>{if(!f.trim()||C)return;const r=f.trim();if(!M&&v(r)){$(r),q(!0),y("");return}await T(r)},fe=r=>{r.key==="Enter"&&!r.shiftKey&&(r.preventDefault(),D())},ce=()=>{if(U){Ue.start(),I(!0);return}const r=window.SpeechRecognition||window.webkitSpeechRecognition;if(!r){console.log("Speech recognition not supported");return}W.current&&W.current.stop();const m=new r;W.current=m;const i={zh:"zh-CN",en:"en-US",pt:"pt-BR"};m.lang=i[c.language]||"zh-CN",m.continuous=!1,m.interimResults=!0,m.onstart=()=>{I(!0)},m.onresult=j=>{const u=Array.from(j.results).map(k=>k[0].transcript).join("");y(u)},m.onerror=j=>{console.log("Speech recognition error:",j.error),I(!1)},m.onend=()=>{I(!1)},m.start()},be=()=>{if(U){Ue.stop(),I(!1);return}W.current&&(W.current.stop(),I(!1))},ae=()=>{E?be():ce()},we=()=>{G.current&&G.current.abort(),a(!1)},de=r=>{we(),o(r)},O=r=>{const m=/\[([^\]]+)\]\(([^)]+)\)/g,i=[];let j=0,u,k=0;for(;(u=m.exec(r))!==null;){u.index>j&&i.push(e.jsx("span",{children:r.slice(j,u.index)},k++));const S=u[1],L=u[2];L.startsWith("/")?i.push(e.jsx("button",{onClick:()=>de(L),className:"text-primary hover:underline font-medium cursor-pointer",children:S},k++)):i.push(e.jsx("a",{href:L,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline font-medium",children:S},k++)),j=u.index+u[0].length}return j<r.length&&i.push(e.jsx("span",{children:r.slice(j)},k++)),i.length>0?i:[e.jsx("span",{children:r},"0")]},K=r=>r.replace(/\*\*(.*?)\*\*/g,"$1"),me=(r,m=20)=>r.length<=m?r:r.slice(0,m)+"...",re=(r,m)=>{const i=k=>k.split("|").slice(1,-1).map(S=>K(S.trim())),j=i(r[0]),u=r.slice(2).map(i);return e.jsx("div",{className:"overflow-x-auto my-2 max-w-full",children:e.jsxs("table",{className:"w-full text-xs border border-border rounded-md overflow-hidden table-fixed",children:[e.jsx("thead",{className:"bg-muted/60",children:e.jsx("tr",{children:j.map((k,S)=>e.jsx("th",{className:"px-2 py-2 text-left font-semibold border-b border-border truncate max-w-[100px]",title:k,children:O(me(k,15))},S))})}),e.jsx("tbody",{children:u.map((k,S)=>e.jsx("tr",{className:"border-b border-border last:border-0 hover:bg-muted/30 transition-colors",children:k.map((L,V)=>e.jsx("td",{className:"px-2 py-2 truncate max-w-[100px]",title:L,children:O(me(L,18))},V))},S))})]})},m)},ke=r=>{const m=r.split(`
`),i=[];let j=0;for(;j<m.length;){const u=m[j];if(u.trim().startsWith("|")&&u.split("|").length>2){const k=[];for(;j<m.length&&m[j].trim().startsWith("|");)k.push(m[j]),j++;k.length>=2&&i.push(re(k,i.length));continue}if(u.startsWith("### "))i.push(e.jsx("h3",{className:"text-base font-semibold mt-3 mb-1",children:O(u.slice(4))},i.length));else if(u.startsWith("## "))i.push(e.jsx("h2",{className:"text-lg font-bold mt-4 mb-2",children:O(u.slice(3))},i.length));else if(u.startsWith("# "))i.push(e.jsx("h1",{className:"text-xl font-bold mt-4 mb-2",children:O(u.slice(2))},i.length));else if(u.includes("**")){const k=u.split(/\*\*(.*?)\*\*/g);i.push(e.jsx("p",{className:"mb-1 leading-relaxed",children:k.map((S,L)=>L%2===1?e.jsx("strong",{className:"font-semibold",children:O(S)},L):O(S))},i.length))}else u.startsWith("- ")||u.startsWith("* ")?i.push(e.jsx("li",{className:"ml-4 mb-0.5 list-disc",children:O(u.slice(2))},i.length)):/^\d+\.\s/.test(u)?i.push(e.jsx("li",{className:"ml-4 mb-0.5 list-decimal",children:O(u.replace(/^\d+\.\s/,""))},i.length)):u.match(/^[-*_]{3,}$/)?i.push(e.jsx("hr",{className:"my-3 border-border"},i.length)):u.trim()===""?i.push(e.jsx("div",{className:"h-1"},i.length)):i.push(e.jsx("p",{className:"mb-1 leading-relaxed",children:O(u)},i.length));j++}return i},t=()=>c.language==="zh"?"小熊AI助手":c.language==="pt"?"Assistente IA Xiaoxiong":"Xiaoxiong AI Assistant",p=()=>c.language==="zh"?"告诉小熊，你想吃什么...":c.language==="pt"?"Diga ao Xiaoxiong o que você quer comer...":"Tell Xiaoxiong what you want to eat...",H=()=>c.language==="zh"?"你好，我是小熊，我来帮你推荐餐厅；比如：「我附近的寿司餐厅」":c.language==="pt"?"Olá, eu sou o Xiaoxiong, vou te ajudar a encontrar restaurantes; por exemplo: 「restaurantes de sushi perto de mim」":`Hi, I'm Xiaoxiong, I'll help you find restaurants; for example: "sushi restaurants near me"`;return e.jsx(zt,{open:s,onOpenChange:we,children:e.jsxs(Mt,{className:"w-full h-full max-w-full max-h-full sm:max-w-lg sm:h-[70vh] sm:max-h-[70vh] sm:rounded-lg rounded-none flex flex-col p-0 gap-0 overflow-hidden",style:g?{height:R,maxHeight:R,transition:"height 0.15s ease-out, max-height 0.15s ease-out"}:void 0,children:[e.jsx($t,{className:"px-4 py-3 shrink-0 bg-white/60 dark:bg-gray-900/60 backdrop-blur-md border-b border-white/30 dark:border-white/20 shadow-[0_1px_3px_rgba(0,0,0,0.05)]",children:e.jsxs(Et,{className:"flex items-center gap-3 text-base font-semibold",children:[e.jsx("div",{className:"w-11 h-11 rounded-full bg-white dark:bg-gray-800 flex items-center justify-center overflow-hidden shadow-sm border border-white/50 dark:border-white/30",children:e.jsx("img",{src:h,alt:"Logo",className:"w-8 h-8 object-contain"})}),e.jsx("span",{className:"text-foreground",children:t()})]})}),e.jsx(et,{className:"flex-1 h-0",ref:ie,children:e.jsxs("div",{className:"p-4 space-y-4",children:[A.length===0&&e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center shrink-0",children:e.jsx("img",{src:h,alt:"AI",className:"w-5 h-5 object-contain"})}),e.jsx("div",{className:"flex-1 bg-muted/50 rounded-2xl rounded-tl-sm px-4 py-3 text-sm",children:H()})]}),A.map(r=>e.jsxs("div",{className:B("flex gap-3",r.role==="user"&&"flex-row-reverse"),children:[r.role==="user"?e.jsxs(Ot,{className:"w-8 h-8 shrink-0",children:[d?.avatar_url?e.jsx(Vt,{src:d.avatar_url,alt:"User avatar"}):null,e.jsx(Ft,{className:"bg-secondary/50 text-foreground",children:e.jsx(gt,{className:"h-4 w-4"})})]}):e.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center shrink-0",children:e.jsx("img",{src:h,alt:"AI",className:"w-7 h-7 object-contain"})}),e.jsx("div",{className:B("flex-1 max-w-[85%] rounded-2xl px-4 py-3 text-sm",r.role==="user"?"bg-secondary/50 text-foreground rounded-tr-sm border border-border/50":"bg-muted/50 rounded-tl-sm"),children:r.role==="assistant"?e.jsxs(e.Fragment,{children:[r.content?e.jsx("div",{className:"prose-sm",children:ke(r.content)}):e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(Ve,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{children:c.language==="zh"?"思考中...":c.language==="pt"?"Pensando...":"Thinking..."})]}),r.isStreaming&&r.content&&e.jsx("span",{className:"inline-block w-1.5 h-4 bg-primary/50 animate-pulse ml-0.5 align-middle"})]}):r.content})]},r.id)),e.jsx("div",{ref:he})]})}),e.jsx("div",{className:"p-4 bg-background shrink-0",children:e.jsxs("div",{className:"group flex items-center gap-3 bg-secondary/50 backdrop-blur-sm px-5 py-3.5 rounded-full shadow-sm hover:shadow-md hover:bg-secondary/70 transition-all duration-300 border border-border/50",children:[le()&&e.jsx("button",{onClick:ae,disabled:C,className:B("shrink-0 transition-all duration-200",E&&"text-destructive animate-pulse"),title:c.language==="zh"?E?"停止录音":"语音输入":c.language==="pt"?E?"Parar gravação":"Entrada de voz":E?"Stop recording":"Voice input",children:E?e.jsx(ft,{className:"h-5 w-5"}):e.jsx(bt,{className:"h-5 w-5 text-muted-foreground group-hover:text-foreground transition-colors"})}),e.jsx("input",{value:f,onChange:r=>y(r.target.value),onKeyDown:fe,placeholder:E?c.language==="zh"?"正在聆听...":c.language==="pt"?"Ouvindo...":"Listening...":p(),disabled:C,className:"flex-1 bg-transparent border-0 outline-none text-sm text-foreground placeholder:text-muted-foreground group-hover:placeholder:text-foreground/60 transition-colors",autoFocus:!0}),e.jsx("button",{onClick:D,disabled:!f.trim()||C,className:B("shrink-0 transition-all duration-200",f.trim()&&!C?"text-primary hover:text-primary/80":"text-muted-foreground/60"),children:C?e.jsx(Ve,{className:"h-5 w-5 animate-spin"}):e.jsx(wt,{className:"h-5 w-5"})})]})}),e.jsx(nt,{open:ne,onOpenChange:r=>{q(r),!r&&P&&(T(P),$(null))},onConfirm:J})]})})},Je=({restaurant:s,language:a})=>{const[l,c]=n.useState(999),o=n.useRef(null),w=s.type.slice(0,3).map((d,h)=>({key:`type-${h}`,label:d,variant:"secondary",color:void 0}));n.useEffect(()=>{const d=()=>{if(!o.current)return;const f=o.current,y=Array.from(f.querySelectorAll(".tag-badge"));if(y.length===0){setTimeout(d,50);return}const A=y[0]?.offsetTop;let N=y.length;for(let C=0;C<y.length;C++)if(y[C].offsetTop>A){N=C;break}N<y.length&&(N=Math.max(1,N-1)),c(N)};c(999);const h=setTimeout(d,100);return window.addEventListener("resize",d),()=>{clearTimeout(h),window.removeEventListener("resize",d)}},[w.length,s.id]);const x=w.slice(0,l),g=w.length>l;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{ref:o,className:"flex gap-1.5 flex-wrap flex-1",children:x.map(d=>e.jsx(F,{variant:d.variant,className:"text-xs font-medium whitespace-nowrap tag-badge",style:d.color?{backgroundColor:d.color,color:"white"}:void 0,children:d.label},d.key))}),g&&e.jsxs(ts,{children:[e.jsx(ss,{asChild:!0,children:e.jsx(se,{variant:"ghost",size:"sm",className:"h-6 px-2 text-muted-foreground hover:text-foreground flex-shrink-0",children:e.jsx(Nt,{className:"h-4 w-4"})})}),e.jsx(as,{className:"w-80",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:w.map(d=>e.jsx(F,{variant:d.variant,className:"text-xs font-medium",style:d.color?{backgroundColor:d.color,color:"white"}:void 0,children:d.label},d.key))})})]})]})},fs=()=>{const s=Ee(),{t:a,i18n:l}=Ne(),{toast:c}=Bt(),{localizeRestaurant:o}=ot(),[w,x]=n.useState(""),[g,d]=n.useState([]),[h,f]=n.useState(null),[y,A]=n.useState([]),[N,C]=n.useState(null),[_,M]=n.useState(null),[Y,ne]=n.useState(!1),[q,P]=n.useState(!1),[$,E]=n.useState(!1),I=n.useRef(null),X=n.useRef(null),Z=n.useRef({}),[U,b]=n.useState(null),[R,oe]=n.useState(!1),[G,ie]=n.useState(!1),[W,he]=n.useState(!1),[le,ve]=n.useState(!1),xe=4,{data:pe,isLoading:ge}=rs(w,g.length>0?g.join(","):void 0),{data:v=[]}=ns(),{data:T=[]}=it(),{data:J={}}=os(),D=T.filter(t=>(J[t.id]||0)>0),fe=t=>{d(p=>p.includes(t)?p.filter(H=>H!==t):[...p,t])},ce=()=>{ie(!0)},be=async()=>{ie(!1);try{const t=await Qt();M({lat:t.coords.latitude,lng:t.coords.longitude}),c({title:a("restaurants.locationEnabled"),description:a("restaurants.sortByDistance")})}catch(t){console.error("Location error:",t)}},ae=t=>{C(t),t&&!_&&ce()},we=async t=>{if(h===t)f(null),A([]);else{f(t);const{data:p,error:H}=await Wt.from("activity_restaurants").select("restaurant_id").eq("activity_id",t);H?(console.error("Error fetching activity restaurants:",H),A([])):A(p.map(r=>r.restaurant_id))}},de=pe?.map(t=>{const p=o(t);if(_){const H=Kt(_.lat,_.lng,t.lat,t.lng);return{...p,distance:H}}return p})||[],O=h?de.filter(t=>y.includes(t.id)):de,K=N&&_?O.filter(t=>t.distance&&t.distance<=N).sort((t,p)=>(t.distance||0)-(p.distance||0)):_?O.sort((t,p)=>(t.distance||0)-(p.distance||0)):O.sort((t,p)=>(p.rating||0)-(t.rating||0)),me=t=>{s(`/restaurant/${t.id}`)},re=t=>{b(t.id);const p=Z.current[t.id];p&&p.scrollIntoView({behavior:"smooth",block:"center"})},ke=()=>{const t=document.getElementById("home-map-container");if(t)if(Y)document.exitFullscreen&&document.exitFullscreen();else{if(I.current){const p=I.current.getCenter(),H=I.current.getZoom();X.current={center:[p.lng,p.lat],zoom:H}}t.requestFullscreen&&t.requestFullscreen()}};return n.useEffect(()=>{const t=()=>{const p=!!document.fullscreenElement;ne(p),!p&&X.current&&I.current&&setTimeout(()=>{I.current?.jumpTo({center:X.current.center,zoom:X.current.zoom})},100)};return document.addEventListener("fullscreenchange",t),()=>{document.removeEventListener("fullscreenchange",t)}},[]),e.jsxs("div",{className:"animate-fade-in",children:[e.jsxs("div",{className:"text-left mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-foreground mb-2 sm:mb-3",children:a("nav.mapView")}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:a("map.subtitle")})]}),e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[e.jsx("div",{className:"flex-1 max-w-md",children:e.jsx(Pt,{placeholder:a("restaurants.search"),value:w,onChange:t=>x(t.target.value),className:"h-11 bg-background/60 backdrop-blur-sm border-primary/20 focus:border-primary"})}),e.jsxs("div",{className:"flex gap-2 md:contents",children:[e.jsxs(se,{variant:_?"default":"outline",onClick:_?void 0:ce,className:"flex-1 md:flex-initial gap-2 h-11 md:px-6",children:[e.jsx(Se,{className:`w-4 h-4 ${_?"animate-pulse":""}`}),e.jsx("span",{className:"md:hidden",children:a("restaurants.getLocationMobile")}),e.jsx("span",{className:"hidden md:inline",children:a(_?"restaurants.locationEnabled":"restaurants.getLocation")})]}),e.jsxs(se,{variant:R?"default":"outline",onClick:()=>oe(!R),className:"flex-1 md:flex-initial gap-2 h-11 md:px-6",children:[e.jsx(yt,{className:"w-4 h-4"}),a("restaurants.filter")]})]})]}),R&&e.jsxs("div",{className:"space-y-3 bg-card/50 backdrop-blur-sm rounded-lg p-4 border border-border/50 animate-fade-in",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("span",{className:"text-sm font-semibold text-foreground",children:[a("restaurants.restaurantTypes"),":"]}),g.length>0&&e.jsx(F,{variant:"outline",className:"cursor-pointer hover:bg-destructive hover:text-destructive-foreground hover:scale-105 transition-all duration-200 px-2 py-0 text-xs h-5",onClick:()=>d([]),children:a("common.actions.clearFilter")}),v.length>8&&e.jsx(se,{variant:"ghost",size:"sm",className:"h-5 px-2 text-xs text-primary hover:text-primary/80 ml-auto hidden sm:flex transition-all duration-200",onClick:()=>P(!q),children:a(q?"common.showLess":"common.showMore")})]}),e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsx("div",{className:`hidden sm:flex gap-2 flex-wrap transition-all duration-300 ease-out ${q?"animate-expand-height":""}`,children:(q?v:v.slice(0,8)).map((t,p)=>e.jsx(F,{variant:g.includes(t)?"default":"secondary",className:`cursor-pointer transition-all duration-200 px-3 py-1.5 text-xs whitespace-nowrap hover:scale-105 active:animate-tag-select ${g.includes(t)?"ring-2 ring-primary/30 shadow-sm":""}`,style:{animationDelay:`${p*30}ms`},onClick:()=>fe(t),children:t},t))}),e.jsxs("div",{className:"sm:hidden relative -mx-1 px-1",children:[e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide snap-x snap-mandatory scroll-smooth",children:v.map((t,p)=>e.jsx(F,{variant:g.includes(t)?"default":"secondary",className:`cursor-pointer transition-all duration-200 px-3 py-1.5 text-xs whitespace-nowrap flex-shrink-0 snap-start hover:scale-105 active:animate-tag-select ${g.includes(t)?"ring-2 ring-primary/30 shadow-sm":""}`,style:{animationDelay:`${p*30}ms`},onClick:()=>fe(t),children:t},t))}),e.jsx("div",{className:"absolute left-0 top-0 bottom-2 w-4 bg-gradient-to-r from-card via-card/60 to-transparent pointer-events-none"}),e.jsx("div",{className:"absolute right-0 top-0 bottom-2 w-4 bg-gradient-to-l from-card via-card/60 to-transparent pointer-events-none"})]})]})]}),D.length>0&&e.jsxs("div",{className:"space-y-2 pt-1 border-t border-border/30",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("span",{className:"text-sm font-semibold text-foreground",children:[a("nav.activities"),":"]}),h&&e.jsx(F,{variant:"outline",className:"cursor-pointer hover:bg-destructive hover:text-destructive-foreground hover:scale-105 transition-all duration-200 px-2 py-0 text-xs h-5",onClick:()=>{f(null),A([])},children:a("common.actions.clearFilter")}),D.length>8&&e.jsx(se,{variant:"ghost",size:"sm",className:"h-5 px-2 text-xs text-primary hover:text-primary/80 ml-auto hidden sm:flex transition-all duration-200",onClick:()=>E(!$),children:a($?"common.showLess":"common.showMore")})]}),e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsx("div",{className:`hidden sm:flex gap-2 flex-wrap transition-all duration-300 ease-out ${$?"animate-expand-height":""}`,children:($?D:D.slice(0,8)).map((t,p)=>{const H=l.language==="zh"?t.badge_text_zh||t.title_zh:l.language==="pt"?t.badge_text_pt||t.title_pt:t.badge_text_en||t.title_en;return e.jsx(F,{variant:h===t.id?"default":"secondary",className:`cursor-pointer transition-all duration-200 px-3 py-1.5 text-xs whitespace-nowrap hover:scale-105 active:animate-tag-select ${h===t.id?"ring-2 ring-primary/30 shadow-sm":""}`,style:{animationDelay:`${p*30}ms`},onClick:()=>we(t.id),children:H},t.id)})}),e.jsxs("div",{className:"sm:hidden relative -mx-1 px-1",children:[e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide snap-x snap-mandatory scroll-smooth",children:D.map((t,p)=>{const H=l.language==="zh"?t.badge_text_zh||t.title_zh:l.language==="pt"?t.badge_text_pt||t.title_pt:t.badge_text_en||t.title_en;return e.jsx(F,{variant:h===t.id?"default":"secondary",className:`cursor-pointer transition-all duration-200 px-3 py-1.5 text-xs whitespace-nowrap flex-shrink-0 snap-start hover:scale-105 active:animate-tag-select ${h===t.id?"ring-2 ring-primary/30 shadow-sm":""}`,style:{animationDelay:`${p*30}ms`},onClick:()=>we(t.id),children:H},t.id)})}),e.jsx("div",{className:"absolute left-0 top-0 bottom-2 w-4 bg-gradient-to-r from-card via-card/60 to-transparent pointer-events-none"}),e.jsx("div",{className:"absolute right-0 top-0 bottom-2 w-4 bg-gradient-to-l from-card via-card/60 to-transparent pointer-events-none"})]})]})]})]}),_&&e.jsxs("div",{className:"flex gap-2 flex-wrap items-center bg-muted/30 backdrop-blur-sm rounded-lg p-3 border border-primary/10",children:[e.jsxs("span",{className:"text-sm font-semibold text-primary",children:[a("restaurants.radius"),":"]}),e.jsx(F,{variant:N===null?"default":"secondary",className:"cursor-pointer hover:scale-105 transition-transform",onClick:()=>ae(null),children:a("restaurants.allRestaurants")}),e.jsx(F,{variant:N===5?"default":"secondary",className:"cursor-pointer hover:scale-105 transition-transform",onClick:()=>ae(5),children:a("restaurants.radius5km")}),e.jsx(F,{variant:N===10?"default":"secondary",className:"cursor-pointer hover:scale-105 transition-transform",onClick:()=>ae(10),children:a("restaurants.radius10km")}),e.jsx(F,{variant:N===20?"default":"secondary",className:"cursor-pointer hover:scale-105 transition-transform",onClick:()=>ae(20),children:a("restaurants.radius20km")})]})]}),!ge&&K&&e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsx("div",{className:`w-full lg:flex-1 transition-all duration-300 ease-in-out ${W?"h-0 overflow-hidden lg:h-[500px]":"h-[400px] lg:h-[500px]"}`,children:e.jsxs("div",{id:"home-map-container",className:`${Y?"fixed inset-0 z-50 bg-background":"w-full h-full"} rounded-xl overflow-hidden shadow-2xl border border-primary/10 relative group`,children:[e.jsx(se,{variant:"secondary",size:"icon",className:"absolute bottom-4 right-4 z-10 shadow-lg opacity-0 group-hover:opacity-100 transition-opacity",onClick:ke,children:Y?e.jsx(vt,{className:"w-5 h-5"}):e.jsx(jt,{className:"w-5 h-5"})}),e.jsxs("div",{className:"h-full relative",children:[e.jsx(is,{restaurants:K,onRestaurantClick:me,userLocation:_,radiusFilter:N,onMarkerClick:re,showViewDetailsButton:!0,onMapInit:t=>{I.current=t}}),e.jsxs("div",{className:"absolute bottom-4 left-4 z-10 pointer-events-none flex items-center gap-2 bg-background/80 backdrop-blur-sm px-3 py-2 rounded-full shadow-lg",children:[e.jsx("img",{src:ls,alt:"Xiaoxiong Market Logo",className:"h-6 w-6 object-contain"}),e.jsx("span",{className:"text-sm font-semibold text-foreground whitespace-nowrap",children:l.language==="zh"?"小熊市场":"Xiaoxiong Market"})]})]})]})}),e.jsx(se,{variant:"outline",size:"sm",className:"lg:hidden flex items-center justify-center gap-2 -mt-3 mb-1",onClick:()=>he(!W),children:W?e.jsxs(e.Fragment,{children:[e.jsx(Be,{className:"w-4 h-4"}),a("map.showMap")]}):e.jsxs(e.Fragment,{children:[e.jsx(Pe,{className:"w-4 h-4"}),a("map.hideMap")]})}),e.jsxs("div",{className:"w-full lg:w-[420px] flex flex-col",children:[e.jsxs("div",{className:"mb-4 pb-4 border-b border-border",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-foreground flex items-center gap-2",children:[e.jsx(Ce,{className:"w-6 h-6 text-primary"}),a("restaurants.title"),e.jsx(F,{variant:"secondary",className:"ml-2",children:K.length})]}),_&&e.jsxs("p",{className:"text-sm text-muted-foreground mt-2 flex items-center gap-1.5",children:[e.jsx(Se,{className:"w-4 h-4"}),a("restaurants.sortedByDistance")]})]}),K.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(Ce,{className:"w-16 h-16 text-muted-foreground/40 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:a("restaurants.noResults")}),e.jsx("p",{className:"text-muted-foreground max-w-xs",children:a("restaurants.noResultsDesc")})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"lg:hidden space-y-3 pb-4",children:[(le?K:K.slice(0,xe)).map(t=>e.jsx(Te,{ref:p=>Z.current[t.id]=p,className:`p-5 cursor-pointer hover:shadow-xl transition-all duration-300 hover:scale-[1.02] hover:border-primary/40 border-2 bg-gradient-to-br from-card to-card/50 backdrop-blur-sm ${U===t.id?"border-primary ring-2 ring-primary ring-offset-2":"border-transparent"}`,onClick:()=>me(t),children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h3",{className:"font-bold text-lg text-foreground line-clamp-1 flex-1",children:t.name}),t.distance!==void 0&&e.jsxs("div",{className:"flex items-center gap-1.5 bg-primary/10 px-2.5 py-1 rounded-full w-fit",children:[e.jsx(Se,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"font-bold text-sm text-primary",children:t.distance<1?`${(t.distance*1e3).toFixed(0)} m`:`${t.distance.toFixed(1)} km`})]})]}),t.rating>0&&e.jsxs("div",{className:"flex items-center gap-1.5 bg-primary/10 px-2.5 py-1 rounded-full flex-shrink-0",children:[e.jsx(We,{className:"w-4 h-4",style:{fill:"#016450",color:"#016450"}}),e.jsx("span",{className:"font-bold text-sm text-primary",children:t.rating})]})]}),t.type&&t.type.length>0&&e.jsx(Je,{restaurant:t,language:l.language}),e.jsxs("div",{className:"flex items-start gap-2 text-sm text-muted-foreground",children:[e.jsx(Ce,{className:"w-4 h-4 mt-0.5 flex-shrink-0 text-primary/60"}),e.jsx("span",{className:"line-clamp-2",children:t.address})]})]})},t.id)),K.length>xe&&e.jsx(se,{variant:"outline",className:"w-full mt-2 gap-2",onClick:()=>ve(!le),children:le?e.jsxs(e.Fragment,{children:[e.jsx(Pe,{className:"w-4 h-4"}),a("map.collapseList")]}):e.jsxs(e.Fragment,{children:[e.jsx(Be,{className:"w-4 h-4"}),a("map.showAllRestaurants",{count:K.length})]})})]}),e.jsx(et,{className:"hidden lg:block h-[420px] pr-4",children:e.jsx("div",{className:"space-y-3 pb-4",children:K.map(t=>e.jsx(Te,{ref:p=>Z.current[t.id]=p,className:`p-5 cursor-pointer hover:shadow-xl transition-all duration-300 hover:scale-[1.02] hover:border-primary/40 border-2 bg-gradient-to-br from-card to-card/50 backdrop-blur-sm ${U===t.id?"border-primary ring-2 ring-primary ring-offset-2":"border-transparent"}`,onClick:()=>me(t),children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h3",{className:"font-bold text-lg text-foreground line-clamp-1 flex-1",children:t.name}),t.distance!==void 0&&e.jsxs("div",{className:"flex items-center gap-1.5 bg-primary/10 px-2.5 py-1 rounded-full w-fit",children:[e.jsx(Se,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"font-bold text-sm text-primary",children:t.distance<1?`${(t.distance*1e3).toFixed(0)} m`:`${t.distance.toFixed(1)} km`})]})]}),t.rating>0&&e.jsxs("div",{className:"flex items-center gap-1.5 bg-primary/10 px-2.5 py-1 rounded-full flex-shrink-0",children:[e.jsx(We,{className:"w-4 h-4",style:{fill:"#016450",color:"#016450"}}),e.jsx("span",{className:"font-bold text-sm text-primary",children:t.rating})]})]}),t.type&&t.type.length>0&&e.jsx(Je,{restaurant:t,language:l.language}),e.jsxs("div",{className:"flex items-start gap-2 text-sm text-muted-foreground",children:[e.jsx(Ce,{className:"w-4 h-4 mt-0.5 flex-shrink-0 text-primary/60"}),e.jsx("span",{className:"line-clamp-2",children:t.address})]})]})},t.id))})})]})]})]}),e.jsx(nt,{open:G,onOpenChange:ie,onConfirm:be})]})},lt=n.memo(({stats:s,onAskXiaoxiong:a})=>{const{t:l,i18n:c}=Ne(),{data:o}=rt(),{buttons:w}=Ht(),x=c.language,[g,d]=n.useState(!1),h=w?.find(_=>_.label_zh==="演示"||_.link?.includes("v.xiaoxiong.pt"));h&&h.enabled!==!1&&h.visible!==!1&&h.show_on_mobile;const f=_=>!o||o.length===0?"":o[0][`${_}${x==="zh"?"_zh":x==="pt"?"_pt":"_en"}`]||"",y=f("title")||l("home.hero.title"),A=f("description")||l("home.hero.description"),N=f("subtitle_button_text")||l("home.hero.subtitle"),C=()=>{h?.link&&qt(h.link),d(!1)};return e.jsxs("section",{className:"min-h-[55vh] flex flex-col bg-secondary/20",children:[e.jsxs("div",{className:"pt-20 px-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xl font-bold text-foreground",children:l("home.hero.brandName")}),e.jsx("img",{src:at,alt:"map icon",width:28,height:28,loading:"eager",decoding:"async",className:"w-7 h-7 object-contain flex-shrink-0"})]})}),s&&e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(Re,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:l("home.stats.delivery")}),e.jsx("span",{className:"font-bold text-foreground text-sm",children:s.order_count})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(Ke,{className:"w-4 h-4 text-accent"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:l("home.stats.reservation")}),e.jsx("span",{className:"font-bold text-foreground text-sm",children:s.reserve_count})]})]})]}),e.jsx("div",{className:"flex-1 flex flex-col items-center justify-center px-4 py-8",children:e.jsxs("div",{className:"max-w-md mx-auto text-center space-y-4",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground leading-tight",children:y}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground max-w-sm mx-auto",children:A}),e.jsx("div",{className:"pt-4",children:e.jsxs("button",{onClick:a,className:"group flex items-center gap-3 bg-secondary/50 backdrop-blur-sm text-foreground px-5 py-3.5 rounded-full shadow-sm hover:shadow-md hover:bg-secondary/70 transition-all duration-300 cursor-text border border-border/50 mx-auto",children:[e.jsx(Qe,{className:"w-5 h-5 text-primary group-hover:text-primary/80 transition-colors"}),e.jsx("span",{className:"text-sm text-muted-foreground group-hover:text-foreground transition-colors",children:N}),e.jsx(Ye,{className:"w-4 h-4 text-muted-foreground/60 ml-2"})]})})]})}),e.jsx(cs,{open:g,onOpenChange:d,onConfirm:C,url:h?.link})]})});lt.displayName="MobileHeroSection";const bs=s=>!s||!Array.isArray(s)?!1:s.every(a=>typeof a=="object"&&a!==null&&"start"in a&&"end"in a&&typeof a.start=="number"&&typeof a.end=="number"),ws=(s,a)=>{const l=ze(new Date(s.start_date)),c=s.end_date?ze(new Date(s.end_date)):null,o=ze(a);if(o<l||c&&o>c)return!1;switch(s.repeat_mode||"none"){case"none":return us(l,o);case"daily":return!0;case"weekly":const x=ms(o);return s.repeat_weekday===x;case"monthly":const d=Xe(o),h=s.repeat_month_day;return bs(h)?h.some(C=>d>=C.start&&d<=C.end):!1;case"yearly":const f=ds(o)+1,y=Xe(o),A=s.repeat_yearly_month,N=s.repeat_yearly_day;return A===f&&N===y;default:return!1}},Ae=s=>{switch(s.repeat_mode||"none"){case"none":return 0;case"weekly":return 1;case"monthly":return 2;case"yearly":return 3;case"daily":return 4;default:return 5}},ys=()=>{const{data:s,isLoading:a}=it(),l=n.useMemo(()=>{if(!s)return{today:[],tomorrow:[],dayAfterTomorrow:[]};const o=new Date,w=qe(o,1),x=qe(o,2),g=d=>s.filter(h=>h.visible&&h.status==="published").filter(h=>ws(h,d)).sort((h,f)=>{const y=Ae(h)-Ae(f);return y!==0?y:h.pinned!==f.pinned?h.pinned?-1:1:(h.sort_order||0)-(f.sort_order||0)});return{today:g(o),tomorrow:g(w),dayAfterTomorrow:g(x)}},[s]),c=n.useMemo(()=>{const o=new Set,w=[];return l.today.forEach(x=>{o.has(x.id)||(o.add(x.id),w.push({...x,dayLabel:"today"}))}),l.tomorrow.forEach(x=>{o.has(x.id)||(o.add(x.id),w.push({...x,dayLabel:"tomorrow"}))}),l.dayAfterTomorrow.forEach(x=>{o.has(x.id)||(o.add(x.id),w.push({...x,dayLabel:"dayAfterTomorrow"}))}),w.sort((x,g)=>{const d=Ae(x)-Ae(g);return d!==0?d:x.pinned!==g.pinned?x.pinned?-1:1:(x.sort_order||0)-(g.sort_order||0)})},[l]);return{recentActivities:l,allRecentActivities:c,isLoading:a,hasActivities:c.length>0}},ct=()=>{const[s,a]=n.useState(4);return n.useEffect(()=>{const l=()=>{const c=window.innerWidth;c<640?a(2):c<1024?a(3):a(4)};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]),s},dt=n.memo(({activity:s,dayLabel:a})=>{const l=Ee(),{t:c}=Ne(),{getLocalizedField:o}=ot(),w=o(s,"title"),x=n.useMemo(()=>{switch(s.service_type){case"dine_in":return c("activities.serviceType.dine_in");case"takeaway":return c("activities.serviceType.takeaway");case"both":return c("activities.serviceType.both");default:return""}},[s.service_type,c]),g=()=>{l(`/activity/${s.id}`)};return e.jsxs(Te,{className:"group cursor-pointer overflow-hidden hover:shadow-lg transition-all duration-300 border-border/50 bg-card",onClick:g,children:[e.jsxs("div",{className:"relative aspect-[16/10] overflow-hidden bg-muted",children:[s.image_url?e.jsx("img",{src:s.image_url,alt:w,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",loading:"lazy"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-primary/20 to-primary/5",children:e.jsx(kt,{className:"w-12 h-12 text-primary/40"})}),e.jsx(F,{className:B("absolute top-2 left-2 text-xs font-medium",a===c("home.recentActivities.today")?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground"),children:a}),s.pinned&&e.jsx(F,{className:"absolute top-2 right-2 text-xs bg-accent text-accent-foreground",children:c("activities.pinned")})]}),e.jsxs("div",{className:"p-3 space-y-2",children:[e.jsx("h3",{className:"font-medium text-sm leading-tight line-clamp-2 text-foreground group-hover:text-primary transition-colors",children:w}),e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[s.service_type==="dine_in"&&e.jsx(He,{className:"w-3 h-3 flex-shrink-0"}),s.service_type==="takeaway"&&e.jsx(Re,{className:"w-3 h-3 flex-shrink-0"}),s.service_type==="both"&&e.jsxs(e.Fragment,{children:[e.jsx(He,{className:"w-3 h-3 flex-shrink-0"}),e.jsx(Re,{className:"w-3 h-3 flex-shrink-0"})]}),e.jsx("span",{className:"truncate",children:x})]})]})]})});dt.displayName="ActivityCard";const mt=n.memo(()=>{const s=ct();return e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:Array.from({length:s}).map((a,l)=>e.jsxs(Te,{className:"overflow-hidden",children:[e.jsx(Ie,{className:"aspect-[16/10] w-full"}),e.jsxs("div",{className:"p-3 space-y-2",children:[e.jsx(Ie,{className:"h-4 w-full"}),e.jsx(Ie,{className:"h-3 w-2/3"})]})]},l))})});mt.displayName="LoadingSkeleton";const ut=n.memo(()=>{const{t:s}=Ne(),{allRecentActivities:a,isLoading:l,hasActivities:c}=ys(),o=ct(),[w,x]=n.useState(!1),g=f=>{switch(f){case"today":return s("home.recentActivities.today");case"tomorrow":return s("home.recentActivities.tomorrow");case"dayAfterTomorrow":return s("home.recentActivities.dayAfterTomorrow");default:return""}},d=n.useMemo(()=>w?a:a.slice(0,o),[a,o,w]),h=a.length>o;return!l&&!c?null:e.jsx("section",{className:"py-8 sm:py-12 px-4 bg-secondary/20",children:e.jsxs("div",{className:"container mx-auto max-w-7xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-foreground",children:s("home.recentActivities.title")}),h&&!w&&e.jsx(se,{variant:"ghost",size:"sm",className:"text-primary hover:text-primary/80",onClick:()=>x(!0),children:e.jsxs("span",{className:"flex items-center gap-1",children:[s("home.recentActivities.viewAll"),e.jsx(_t,{className:"w-4 h-4"})]})}),w&&e.jsx(se,{variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-foreground",onClick:()=>x(!1),children:e.jsx("span",{className:"flex items-center gap-1",children:s("home.recentActivities.collapse")})})]}),l?e.jsx(mt,{}):e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:d.map(f=>e.jsx(dt,{activity:f,dayLabel:g(f.dayLabel)},f.id))})]})})});ut.displayName="RecentActivitiesSection";const $e="/images/sushi-ramen-hero.jpg",ht="/images/sushi-ramen-mobile.jpg",xt=n.memo(({stats:s,t:a})=>e.jsx("div",{className:"absolute top-16 sm:top-20 left-3 z-20",children:e.jsxs("div",{className:"gap-4 w-fit flex-col flex items-start justify-start",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Re,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"text-sm text-white/90 drop-shadow-md",children:a("home.stats.delivery")}),e.jsx("span",{className:"font-bold text-white text-sm drop-shadow-md",children:s.order_count})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ke,{className:"w-4 h-4 text-accent"}),e.jsx("span",{className:"text-sm text-white/90 drop-shadow-md",children:a("home.stats.reservation")}),e.jsx("span",{className:"font-bold text-white text-sm drop-shadow-md",children:s.reserve_count})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xl sm:text-2xl font-bold text-white drop-shadow-md",children:a("home.hero.brandName")}),e.jsx("img",{src:at,alt:"map icon",width:32,height:32,loading:"eager",decoding:"async",className:"w-7 sm:w-8 h-7 sm:h-8 object-contain flex-shrink-0"})]})]})}));xt.displayName="StatsDisplay";const vs=()=>{const s=window.innerWidth<640,a=window.innerWidth>=1024,l=navigator.connection,c=st(),o=tt();return a?!!l?.saveData:!!(o&&!c||l&&(l.saveData||l.effectiveType==="2g"||l.effectiveType==="slow-2g")||s&&navigator.deviceMemory&&navigator.deviceMemory<2)},pt=n.memo(({template:s,isActive:a,currentLang:l,t:c,onContentReady:o,onAskXiaoxiong:w})=>{const[x,g]=n.useState({}),[d,h]=n.useState({}),[f,y]=n.useState({}),[A,N]=n.useState({mobile:!0,tablet:!0,desktop:!0}),[C,_]=n.useState(!1),M=vs(),Y=n.useRef(null),ne=n.useRef(null),q=n.useRef(null),P=v=>s[`${v}${l==="zh"?"_zh":l==="pt"?"_pt":"_en"}`]||"",$=()=>window.innerWidth<640?"mobile":window.innerWidth<1024?"tablet":"desktop",E=()=>{const v=$();return v==="mobile"&&s.mobile_overlay_opacity!==null?s.mobile_overlay_opacity:v==="tablet"&&s.tablet_overlay_opacity!==null?s.tablet_overlay_opacity:v==="desktop"&&s.desktop_overlay_opacity!==null?s.desktop_overlay_opacity:s.overlay_opacity??30},I=()=>{const v=E(),T=s.overlay_gradient_direction||"to-b",J=(re,ke)=>re==null?ke/100:re>1?re/100:re,D=v>1?v/100:v,fe=J(s.overlay_gradient_from_opacity,30)*D,ce=J(s.overlay_gradient_via_opacity,25)*D,be=J(s.overlay_gradient_to_opacity,40)*D,we={"to-t":"to top","to-b":"to bottom","to-l":"to left","to-r":"to right","to-tl":"to top left","to-tr":"to top right","to-bl":"to bottom left","to-br":"to bottom right"}[T]||"to bottom",de={black:"0, 0, 0",white:"255, 255, 255",background:"0, 0, 0",foreground:"255, 255, 255",primary:"1, 100, 80",secondary:"240, 240, 240"},O=de[s.overlay_gradient_from||"black"]||"0, 0, 0",K=de[s.overlay_gradient_via||"black"]||"0, 0, 0",me=de[s.overlay_gradient_to||"black"]||"0, 0, 0";return{background:`linear-gradient(${we}, rgba(${O}, ${fe}), rgba(${K}, ${ce}), rgba(${me}, ${be}))`}},X=s.mobile_image_url||ht,Z=s.tablet_image_url||s.desktop_image_url||$e,U=s.desktop_image_url||$e,b=s.background_blur||0,R=s.desktop_media_type||s.media_type||"image",oe=s.tablet_media_type||s.media_type||"image",G=s.mobile_media_type||s.media_type||"image",ie=R==="video"&&!M,W=oe==="video"&&!M,he=G==="video"&&!M,le=he?s.mobile_video_url:null,ve=W?s.tablet_video_url||s.desktop_video_url:null,xe=ie?s.desktop_video_url:null;n.useEffect(()=>{const v=$(),T=v==="mobile"?X:v==="tablet"?Z:U;if(T){const J=new Image;J.onload=()=>{g(D=>({...D,[v]:!0})),N(D=>({...D,[v]:!0})),a&&(o?.(),setTimeout(()=>_(!0),100))},J.src=T}},[X,Z,U,a,o]),n.useEffect(()=>{a&&x[$()]&&_(!0)},[a,x]);const pe=v=>{h(T=>({...T,[v]:!0}))},ge=(v,T)=>{console.error(`[HeroSlide] Video error on ${v}:`,T),y(J=>({...J,[v]:!0}))};return n.useEffect(()=>{if(!C||!a||!Jt())return;const T=$(),D=(T==="mobile"?Y:T==="tablet"?ne:q).current;if(!D)return;const ce=setTimeout(async()=>{try{D.muted=!0,D.playsInline=!0,D.setAttribute("webkit-playsinline","true"),await D.play(),console.log(`[HeroSlide] iOS video play successful on ${T}`)}catch(be){console.error(`[HeroSlide] iOS video play failed on ${T}:`,be),y(ae=>({...ae,[T]:!0}))}},150);return()=>clearTimeout(ce)},[C,a]),e.jsxs("div",{className:B("absolute inset-0 w-full h-full transition-opacity duration-1000",a?"opacity-100 z-10":"opacity-0 z-0"),children:[e.jsxs("div",{className:"absolute inset-0 w-full h-full",children:[e.jsxs("div",{className:"absolute inset-0 w-full h-full sm:hidden",children:[!A.mobile&&e.jsx("div",{className:"absolute inset-0 w-full h-full bg-muted animate-pulse z-20"}),he&&le?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:X,alt:"Background",className:B("absolute inset-0 w-full h-full object-cover object-center z-10 transition-opacity duration-500",d.mobile&&!f.mobile?"opacity-0 pointer-events-none":"opacity-100"),style:{filter:b>0?`blur(${b}px)`:void 0}}),C&&!f.mobile&&e.jsx("video",{ref:Y,src:le,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,"webkit-playsinline":"true",preload:"auto",onCanPlay:()=>pe("mobile"),onError:v=>ge("mobile",v),className:"absolute inset-0 w-full h-full object-cover object-center",style:{filter:b>0?`blur(${b}px)`:void 0}})]}):e.jsx("img",{src:X,alt:"Background",className:B("absolute inset-0 w-full h-full object-cover object-center transition-opacity duration-500",A.mobile?"opacity-100":"opacity-0"),style:{filter:b>0?`blur(${b}px)`:void 0}})]}),e.jsxs("div",{className:"absolute inset-0 w-full h-full hidden sm:block lg:hidden",children:[!A.tablet&&e.jsx("div",{className:"absolute inset-0 w-full h-full bg-muted animate-pulse z-20"}),W&&ve?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:Z,alt:"Background",className:B("absolute inset-0 w-full h-full object-cover object-center z-10 transition-opacity duration-500",d.tablet&&!f.tablet?"opacity-0 pointer-events-none":"opacity-100"),style:{filter:b>0?`blur(${b}px)`:void 0}}),C&&!f.tablet&&e.jsx("video",{ref:ne,src:ve,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,"webkit-playsinline":"true",preload:"auto",onCanPlay:()=>pe("tablet"),onError:v=>ge("tablet",v),className:"absolute inset-0 w-full h-full object-cover object-center",style:{filter:b>0?`blur(${b}px)`:void 0}})]}):e.jsx("img",{src:Z,alt:"Background",className:B("absolute inset-0 w-full h-full object-cover object-center transition-opacity duration-500",A.tablet?"opacity-100":"opacity-0"),style:{filter:b>0?`blur(${b}px)`:void 0}})]}),e.jsxs("div",{className:"absolute inset-0 w-full h-full hidden lg:block",children:[!A.desktop&&e.jsx("div",{className:"absolute inset-0 w-full h-full bg-muted animate-pulse z-20"}),ie&&xe?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:U,alt:"Background",className:B("absolute inset-0 w-full h-full object-cover object-center z-10 transition-opacity duration-500",d.desktop&&!f.desktop?"opacity-0 pointer-events-none":"opacity-100"),style:{filter:b>0?`blur(${b}px)`:void 0}}),C&&!f.desktop&&e.jsx("video",{ref:q,src:xe,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,"webkit-playsinline":"true",preload:"auto",onCanPlay:()=>pe("desktop"),onError:v=>ge("desktop",v),className:"absolute inset-0 w-full h-full object-cover object-center",style:{filter:b>0?`blur(${b}px)`:void 0}})]}):e.jsx("img",{src:U,alt:"Background",fetchPriority:"high",loading:"eager",decoding:"async",className:B("absolute inset-0 w-full h-full object-cover object-center transition-opacity duration-500",A.desktop?"opacity-100":"opacity-0"),style:{filter:b>0?`blur(${b}px)`:void 0}})]}),e.jsx("div",{className:"absolute inset-0 w-full h-full",style:I()})]}),e.jsx("div",{className:"relative z-10 container mx-auto px-4 sm:px-6 flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center space-y-4 sm:space-y-8 animate-fade-in w-full",children:[e.jsx("h1",{className:"text-3xl sm:text-5xl md:text-7xl font-bold text-white leading-tight px-4 drop-shadow-[0_2px_8px_rgba(0,0,0,0.8)]",children:P("title")||c("home.hero.title")}),e.jsx("p",{className:"text-sm sm:text-xl md:text-2xl text-white/95 max-w-2xl mx-auto px-4 drop-shadow-[0_2px_6px_rgba(0,0,0,0.7)]",children:P("description")||c("home.hero.description")}),s.subtitle_button_text_zh&&e.jsx("div",{className:"flex justify-center",children:e.jsxs("button",{onClick:w,className:"group flex items-center gap-3 bg-white/20 backdrop-blur-xl text-white px-5 sm:px-7 py-3.5 sm:py-4 rounded-full shadow-[0_8px_32px_rgba(0,0,0,0.12)] hover:shadow-[0_16px_48px_rgba(0,0,0,0.2)] hover:bg-white/30 transition-all duration-300 cursor-text border border-white/40",children:[e.jsx(Qe,{className:"w-5 h-5 text-white/90 group-hover:text-white transition-colors drop-shadow-sm"}),e.jsx("span",{className:"text-sm sm:text-base text-primary group-hover:text-primary/80 transition-colors drop-shadow-sm font-medium",children:P("subtitle_button_text")||c("home.hero.subtitle")}),e.jsx(Ye,{className:"w-4 h-4 text-white/60 ml-2 drop-shadow-sm"})]})})]})})]})});pt.displayName="HeroSlide";const Bs=()=>{const{t:s,i18n:a}=Ne(),l=St(),{settings:c}=Ze(),{data:o,isLoading:w,refetch:x}=rt(),[g,d]=n.useState(0),[h,f]=n.useState(null),y=n.useRef(null),[A,N]=n.useState(!1),[C,_]=n.useState(!1),M=Ge(),{isWebView:Y}=Xt(),ne=M||Y,q=c?.ai_assistant_enabled!==!1,P=c?.ai_provider||"ask-xiaoxiong",$=n.useCallback(()=>{N(!0)},[]);Gt({pageType:"home"});const E=n.useCallback(async()=>{try{const R=await(await fetch("https://v.xiaoxiong.pt/api/get_info")).json();R&&f({order_count:R.order_count||0,reserve_count:R.reserve_count||0})}catch(b){console.error("Failed to fetch stats:",b)}},[]);n.useEffect(()=>{E()},[E]);const I=n.useCallback(async()=>{await Promise.all([x(),E(),l.invalidateQueries({queryKey:["restaurants"]}),l.invalidateQueries({queryKey:["activities"]})])},[x,E,l]);n.useEffect(()=>{if(!o||o.length<=1)return;const R=o[g]?.duration||5e3;return y.current=setTimeout(()=>{d(oe=>(oe+1)%o.length)},R),()=>{y.current&&clearTimeout(y.current)}},[o,g]);const X=n.useCallback(b=>{y.current&&clearTimeout(y.current),d(b)},[]);n.useCallback(()=>{o&&(y.current&&clearTimeout(y.current),d(b=>(b-1+o.length)%o.length))},[o]),n.useCallback(()=>{o&&(y.current&&clearTimeout(y.current),d(b=>(b+1)%o.length))},[o]);const Z=a.language,U=o&&o.length>1;return e.jsx(es,{onRefresh:I,children:e.jsxs("div",{className:"min-h-screen",children:[ne?e.jsx(lt,{stats:h,onAskXiaoxiong:()=>_(!0)}):e.jsxs("section",{className:"relative h-screen flex items-start overflow-hidden bg-background",children:[h&&e.jsx(xt,{stats:h,t:s}),e.jsx("div",{className:B("absolute inset-0 w-full h-full transition-opacity duration-500",A?"opacity-100":"opacity-0"),children:o?.map((b,R)=>e.jsx(pt,{template:b,isActive:R===g,currentLang:Z,t:s,onContentReady:R===0?$:void 0,onAskXiaoxiong:()=>_(!0)},b.id))}),e.jsx("div",{className:B("absolute inset-0 w-full h-full z-20 transition-opacity duration-500",w||!A?"opacity-100":"opacity-0 pointer-events-none"),children:e.jsx(Ut,{})}),!w&&(!o||o.length===0)&&e.jsxs("div",{className:"absolute inset-0 w-full h-full",children:[e.jsx("img",{src:ht,alt:"Background",fetchPriority:"high",loading:"eager",decoding:"async",className:"absolute inset-0 w-full h-full object-cover object-center sm:hidden"}),e.jsx("img",{src:$e,alt:"Background",fetchPriority:"high",loading:"eager",decoding:"async",className:"absolute inset-0 w-full h-full object-cover object-center hidden sm:block"}),e.jsx("div",{className:"absolute inset-0 w-full h-full bg-gradient-to-b from-black/30 via-black/25 to-black/40"}),e.jsx("div",{className:"relative z-10 container mx-auto px-4 sm:px-6 flex items-center min-h-screen",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center space-y-4 sm:space-y-8 animate-fade-in w-full",children:[e.jsx("h1",{className:"text-3xl sm:text-5xl md:text-7xl font-bold text-white leading-tight px-4 drop-shadow-[0_2px_8px_rgba(0,0,0,0.8)]",children:s("home.hero.title")}),e.jsx("p",{className:"text-sm sm:text-xl md:text-2xl text-white/95 max-w-2xl mx-auto px-4 drop-shadow-[0_2px_6px_rgba(0,0,0,0.7)]",children:s("home.hero.description")})]})})]}),U&&e.jsx("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 z-30 flex gap-2",children:o.map((b,R)=>e.jsx("button",{onClick:()=>X(R),className:B("w-3 h-3 rounded-full transition-all duration-300",R===g?"bg-white w-8":"bg-white/50 hover:bg-white/70"),"aria-label":`Go to slide ${R+1}`},R))})]}),e.jsx(ut,{}),e.jsx("section",{className:"py-12 sm:py-20 px-4 bg-secondary/20",children:e.jsx("div",{className:"container mx-auto max-w-7xl",children:e.jsx(fs,{})})}),!tt()&&!st()&&e.jsxs("section",{className:"py-16 sm:py-24 px-4 bg-gradient-to-br from-primary/5 via-background to-primary/10 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-1/4 w-72 h-72 bg-primary/10 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 right-1/4 w-96 h-96 bg-primary/5 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute top-1/2 left-0 w-32 h-32 bg-primary/20 rounded-full blur-2xl -translate-y-1/2"}),e.jsx("div",{className:"absolute top-1/2 right-0 w-32 h-32 bg-primary/20 rounded-full blur-2xl -translate-y-1/2"}),e.jsx("div",{className:"container mx-auto max-w-5xl relative z-10",children:e.jsx("div",{className:"flex flex-col items-center justify-center gap-8",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 bg-primary/10 text-primary text-sm font-medium px-4 py-2 rounded-full mb-4",children:[e.jsx(Ct,{className:"w-4 h-4"}),e.jsx("span",{children:"Mobile App"})]}),e.jsx("h3",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-foreground mb-4",children:s("home.app.title")}),e.jsx("p",{className:"text-base sm:text-lg text-muted-foreground mb-8 leading-relaxed",children:s("home.app.description")}),e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[e.jsxs("a",{href:"https://apps.apple.com/cn/app/xiaoxiong/id6755481369",target:"_blank",rel:"noopener noreferrer",className:"relative group",children:[e.jsx("div",{className:"absolute -inset-2 bg-gradient-to-r from-primary via-primary-glow to-primary rounded-2xl blur-lg opacity-40 group-hover:opacity-70 transition-opacity"}),e.jsx("div",{className:"relative bg-black hover:bg-gray-900 h-[52px] sm:h-[56px] w-[160px] sm:w-[180px] rounded-xl transition-all hover:scale-105 shadow-2xl hover:shadow-primary/30 border border-white/10 flex items-center justify-center",children:e.jsx("img",{src:Yt,alt:"Download on the App Store",className:"h-8 sm:h-9"})})]}),e.jsxs("a",{href:"https://play.google.com/store/apps/details?id=com.xiaoxiong.market",target:"_blank",rel:"noopener noreferrer",className:"relative group",children:[e.jsx("div",{className:"absolute -inset-2 bg-gradient-to-r from-primary via-primary-glow to-primary rounded-2xl blur-lg opacity-40 group-hover:opacity-70 transition-opacity"}),e.jsx("div",{className:"relative bg-black hover:bg-gray-900 h-[52px] sm:h-[56px] w-[160px] sm:w-[180px] rounded-xl transition-all hover:scale-105 shadow-2xl hover:shadow-primary/30 border border-white/10 flex items-center justify-center",children:e.jsx("img",{src:Zt,alt:"Get it on Google Play",className:"h-12 sm:h-14"})})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(At,{className:"w-4 h-4 animate-bounce"}),e.jsx("span",{children:s("home.app.downloadNow")})]})]})]})})})]}),e.jsxs("section",{className:"py-16 sm:py-20 px-4 bg-gradient-to-br from-primary via-primary-glow to-primary-light relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-grid-pattern opacity-10"}),e.jsx("div",{className:"absolute top-0 right-0 w-64 sm:w-96 h-64 sm:h-96 bg-white/5 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-64 sm:w-96 h-64 sm:h-96 bg-white/5 rounded-full blur-3xl"}),e.jsxs("div",{className:"container mx-auto max-w-4xl text-center relative z-10",children:[e.jsx("h2",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-primary-foreground mb-4 sm:mb-6 px-4",children:s("home.cta.title")}),e.jsx("p",{className:"text-base sm:text-xl text-primary-foreground/90 mb-6 sm:mb-8 max-w-2xl mx-auto px-4",children:s("home.cta.description")}),e.jsx("div",{className:"flex justify-center",children:e.jsx(se,{size:"lg",variant:"secondary",asChild:!0,className:"text-base sm:text-lg shadow-xl hover:shadow-2xl",children:e.jsxs(Rt,{to:"/join-us",children:[e.jsx(Tt,{className:"mr-2 w-4 sm:w-5 h-4 sm:h-5"}),s("home.cta.button")]})})})]})]}),q&&e.jsx(gs,{open:C,onOpenChange:_,provider:P})]})})};export{Bs as default};
//# sourceMappingURL=Home-BkJ1qsXn.js.map
