import{p as v,q as y,s as l,v as d,w as i}from"./vendor-react-87iFmKFJ.js";import{u as m,s as t}from"./index-C3xfGQgV.js";const w=()=>{const{user:a}=m(),{t:r}=v(),n=y(),c=l({queryKey:["saved-recipes",a?.id],queryFn:async()=>{const{data:s,error:e}=await t.from("saved_recipes").select("*").eq("user_id",a.id).order("created_at",{ascending:!1});if(e)throw e;return s},enabled:!!a}),o=d({mutationFn:async s=>{if(!a)throw new Error("Not authenticated");const{data:e,error:u}=await t.from("saved_recipes").insert({user_id:a.id,recipe_name:s.recipe_name,recipe_data:s}).select().single();if(u)throw u;return e},onSuccess:()=>{n.invalidateQueries({queryKey:["saved-recipes"]}),i.success(r("aiRecipe.recipeSaved","食谱已保存"))},onError:()=>{i.error(r("aiRecipe.saveError","保存失败"))}}),p=d({mutationFn:async s=>{const{error:e}=await t.from("saved_recipes").delete().eq("id",s);if(e)throw e},onSuccess:()=>{n.invalidateQueries({queryKey:["saved-recipes"]}),i.success(r("aiRecipe.recipeDeleted","食谱已删除"))}});return{savedRecipes:c.data||[],isLoading:c.isLoading,saveRecipe:o.mutateAsync,deleteRecipe:p.mutateAsync,isSaving:o.isPending}};export{w as u};
//# sourceMappingURL=useSavedRecipes-DmNDhRhv.js.map
