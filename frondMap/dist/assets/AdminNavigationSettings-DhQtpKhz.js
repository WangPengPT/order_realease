import{j as e}from"./vendor-ui-DmpovMYY.js";import{r as c}from"./vendor-react-iAJ0IrSD.js";import{cA as _e,i as O,w as H,R as M,x as R,aN as ee,B as b,cB as be,aF as ue,bX as $,bY as B,p as z,D as ge,aD as je,b1 as pe,b as ve,c as ke,d as we,aA as i,I as E,aV as N,aW as y,aX as C,aY as S,aZ as h,cC as W,cD as ae,bZ as fe,aP as Ne,aO as ye,bS as Ce,b0 as Se,cE as De}from"./index-Bc-ZO2b2.js";import{S as u}from"./switch-Bl6U6hYX.js";import{S as Te}from"./slider-CPBt5DUk.js";import{T as Be,a as ze,b as le,c as g,d as Ee,e as j}from"./table-DqXRn2HT.js";import{T as Ae,a as Ve,b as U,c as F}from"./tabs-DCXl0MzB.js";import{A as Le,a as Pe}from"./alert-BViu3rlG.js";import{u as Ie}from"./vendor-i18n-DxKeo2S1.js";import"./vendor-charts-Bz7hPIBd.js";import"./vendor-query-D82cqPtt.js";import"./vendor-supabase-6pZ9VDFn.js";const Oe=["MapPin","List","Calendar","Map","Store","Home","Search","User","Settings","Heart","Star","Bell","ShoppingCart","Gift","Info","HelpCircle"],Je=()=>{const{t:s,i18n:se}=Ie(),{settings:l,buttons:A,isLoading:oe,updateSettings:V,createButton:G,updateButton:X,deleteButton:te}=_e(),[L,Y]=c.useState(null),[ne,D]=c.useState(!1),[w,re]=c.useState("desktop"),[o,d]=c.useState({label_zh:"",label_en:"",label_pt:"",link:"",icon:"Circle",visible:!0,enabled:!0,show_on_desktop:!0,show_on_tablet:!0,show_on_mobile:!0,show_when_logged_in:!0,show_when_logged_out:!0}),[r,P]=c.useState({background_opacity:0,background_color:"transparent",text_color:"primary",hover_bg_color:"black",hover_text_color:"white",shadow_enabled:!0}),[x,p]=c.useState(null),[_,v]=c.useState(null),[ce,f]=c.useState(!1);c.useEffect(()=>{l&&(P({background_opacity:l.background_opacity??0,background_color:l.background_color||"transparent",text_color:l.text_color||"primary",hover_bg_color:l.hover_bg_color||"black",hover_text_color:l.hover_text_color||"white",shadow_enabled:l.shadow_enabled??!0}),l.background_opacity_tablet!==null||l.background_color_tablet!==null||l.text_color_tablet!==null||l.hover_bg_color_tablet!==null||l.hover_text_color_tablet!==null||l.shadow_enabled_tablet!==null?p({background_opacity:l.background_opacity_tablet??l.background_opacity??0,background_color:l.background_color_tablet||l.background_color||"transparent",text_color:l.text_color_tablet||l.text_color||"primary",hover_bg_color:l.hover_bg_color_tablet||l.hover_bg_color||"black",hover_text_color:l.hover_text_color_tablet||l.hover_text_color||"white",shadow_enabled:l.shadow_enabled_tablet??l.shadow_enabled??!0}):p(null),l.background_opacity_mobile!==null||l.background_color_mobile!==null||l.text_color_mobile!==null||l.hover_bg_color_mobile!==null||l.hover_text_color_mobile!==null||l.shadow_enabled_mobile!==null?v({background_opacity:l.background_opacity_mobile??l.background_opacity??0,background_color:l.background_color_mobile||l.background_color||"transparent",text_color:l.text_color_mobile||l.text_color||"primary",hover_bg_color:l.hover_bg_color_mobile||l.hover_bg_color||"black",hover_text_color:l.hover_text_color_mobile||l.hover_text_color||"white",shadow_enabled:l.shadow_enabled_mobile??l.shadow_enabled??!0}):v(null))},[l]);const k=c.useCallback((a,t,n)=>{a==="desktop"?P(m=>({...m,[t]:n})):a==="tablet"?p(m=>m?{...m,[t]:n}:{...r,[t]:n}):v(m=>m?{...m,[t]:n}:{...r,[t]:n}),f(!0)},[r]),Z=c.useCallback(a=>{a==="tablet"?p({...r}):a==="mobile"&&v({...r}),f(!0)},[r]),q=c.useCallback(a=>{a==="tablet"?p(null):a==="mobile"&&v(null),f(!0)},[]),ie=c.useCallback(()=>{const a={background_opacity:r.background_opacity,background_color:r.background_color,text_color:r.text_color,hover_bg_color:r.hover_bg_color,hover_text_color:r.hover_text_color,shadow_enabled:r.shadow_enabled,background_opacity_tablet:x?.background_opacity??null,background_color_tablet:x?.background_color??null,text_color_tablet:x?.text_color??null,hover_bg_color_tablet:x?.hover_bg_color??null,hover_text_color_tablet:x?.hover_text_color??null,shadow_enabled_tablet:x?.shadow_enabled??null,background_opacity_mobile:_?.background_opacity??null,background_color_mobile:_?.background_color??null,text_color_mobile:_?.text_color??null,hover_bg_color_mobile:_?.hover_bg_color??null,hover_text_color_mobile:_?.hover_text_color??null,shadow_enabled_mobile:_?.shadow_enabled??null};V.mutate(a),f(!1)},[r,x,_,V]),de=c.useCallback(()=>{l&&(P({background_opacity:l.background_opacity??0,background_color:l.background_color||"transparent",text_color:l.text_color||"primary",hover_bg_color:l.hover_bg_color||"black",hover_text_color:l.hover_text_color||"white",shadow_enabled:l.shadow_enabled??!0}),l.background_opacity_tablet!==null||l.background_color_tablet!==null?p({background_opacity:l.background_opacity_tablet??l.background_opacity??0,background_color:l.background_color_tablet||l.background_color||"transparent",text_color:l.text_color_tablet||l.text_color||"primary",hover_bg_color:l.hover_bg_color_tablet||l.hover_bg_color||"black",hover_text_color:l.hover_text_color_tablet||l.hover_text_color||"white",shadow_enabled:l.shadow_enabled_tablet??l.shadow_enabled??!0}):p(null),l.background_opacity_mobile!==null||l.background_color_mobile!==null?v({background_opacity:l.background_opacity_mobile??l.background_opacity??0,background_color:l.background_color_mobile||l.background_color||"transparent",text_color:l.text_color_mobile||l.text_color||"primary",hover_bg_color:l.hover_bg_color_mobile||l.hover_bg_color||"black",hover_text_color:l.hover_text_color_mobile||l.hover_text_color||"white",shadow_enabled:l.shadow_enabled_mobile??l.shadow_enabled??!0}):v(null),f(!1))},[l]),J=a=>{a?(Y(a),d(a)):(Y(null),d({label_zh:"",label_en:"",label_pt:"",link:"",icon:"Circle",visible:!0,enabled:!0,show_on_desktop:!0,show_on_tablet:!0,show_on_mobile:!0,show_when_logged_in:!0,show_when_logged_out:!0})),D(!0)},he=async()=>{L?await X.mutateAsync({id:L.id,...o}):await G.mutateAsync({...o,sort_order:(A?.length||0)+1}),D(!1)},me=async a=>{confirm(s("admin.confirmDelete"))&&await te.mutateAsync(a)},K=a=>{const t=De[a];return t?e.jsx(t,{className:"w-4 h-4"}):null},Q=a=>{const t=se.language;return t==="zh"?a.label_zh:t==="pt"?a.label_pt:a.label_en},T=c.useCallback(a=>a==="desktop"?r:a==="tablet"?x||r:_||r,[r,x,_]),xe=c.useCallback(a=>{const t=Number(a.background_opacity||0),n=a.background_color||"transparent";let m="transparent";return n==="white"?m=`rgba(255,255,255,${t})`:n==="black"?m=`rgba(0,0,0,${t})`:n==="primary"&&(m=`rgba(var(--primary-rgb, 0,0,0),${t})`),{backgroundColor:m}},[]),I=(a,t)=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:s("admin.backgroundOpacity")}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Te,{value:[Number(t.background_opacity||0)*100],onValueChange:n=>k(a,"background_opacity",n[0]/100),max:100,step:5,className:"flex-1"}),e.jsxs("span",{className:"w-12 text-right",children:[Math.round(Number(t.background_opacity||0)*100),"%"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:s("admin.backgroundColor")}),e.jsxs(N,{value:t.background_color||"transparent",onValueChange:n=>k(a,"background_color",n),children:[e.jsx(y,{children:e.jsx(C,{})}),e.jsxs(S,{children:[e.jsx(h,{value:"transparent",children:s("admin.transparent")}),e.jsx(h,{value:"white",children:s("admin.white")}),e.jsx(h,{value:"black",children:s("admin.black")}),e.jsx(h,{value:"primary",children:s("admin.primary")})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:s("admin.textColor")}),e.jsxs(N,{value:t.text_color||"primary",onValueChange:n=>k(a,"text_color",n),children:[e.jsx(y,{children:e.jsx(C,{})}),e.jsxs(S,{children:[e.jsx(h,{value:"primary",children:s("admin.primary")}),e.jsx(h,{value:"white",children:s("admin.white")}),e.jsx(h,{value:"black",children:s("admin.black")})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:s("admin.hoverBgColor")}),e.jsxs(N,{value:t.hover_bg_color||"black",onValueChange:n=>k(a,"hover_bg_color",n),children:[e.jsx(y,{children:e.jsx(C,{})}),e.jsxs(S,{children:[e.jsx(h,{value:"black",children:s("admin.black")}),e.jsx(h,{value:"white",children:s("admin.white")}),e.jsx(h,{value:"primary",children:s("admin.primary")})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:s("admin.hoverTextColor")}),e.jsxs(N,{value:t.hover_text_color||"white",onValueChange:n=>k(a,"hover_text_color",n),children:[e.jsx(y,{children:e.jsx(C,{})}),e.jsxs(S,{children:[e.jsx(h,{value:"white",children:s("admin.white")}),e.jsx(h,{value:"black",children:s("admin.black")}),e.jsx(h,{value:"primary",children:s("admin.primary")})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(i,{children:s("admin.shadowEnabled")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s("admin.shadowEnabledDescription")})]}),e.jsx(u,{checked:t.shadow_enabled??!0,onCheckedChange:n=>k(a,"shadow_enabled",n)})]})]});return oe?e.jsx("div",{className:"p-6",children:s("common.loading")}):e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:s("admin.navigationSettings")}),e.jsx("p",{className:"text-muted-foreground",children:s("admin.navigationSettingsDescription")})]}),e.jsxs(O,{children:[e.jsx(H,{children:e.jsx(M,{children:s("admin.preview")})}),e.jsx(R,{children:e.jsx("div",{className:"rounded-lg border overflow-hidden",style:{backgroundColor:"#f0f0f0"},children:e.jsxs("div",{className:`h-14 px-4 flex items-center justify-between ${T(w).shadow_enabled?"shadow-[0_2px_4px_rgba(0,0,0,0.15)]":""}`,style:xe(T(w)),children:[e.jsx("div",{className:"w-8 h-8 rounded bg-primary/20"}),e.jsx("div",{className:"flex gap-4",children:A?.slice(0,4).map(a=>e.jsx("span",{className:`px-3 py-1 rounded text-sm ${T(w).text_color==="white"?"text-white":T(w).text_color==="black"?"text-black":"text-primary"}`,children:Q(a)},a.id))}),e.jsx("div",{className:"w-8 h-8 rounded-full bg-muted"})]})})})]}),e.jsxs(O,{children:[e.jsxs(H,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(M,{children:s("admin.navBarStyle")}),e.jsx(ee,{children:s("admin.navBarStyleDescription")})]}),ce&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(b,{variant:"outline",size:"sm",onClick:de,children:[e.jsx(be,{className:"w-4 h-4 mr-2"}),s("common.reset")]}),e.jsxs(b,{size:"sm",onClick:ie,disabled:V.isPending,children:[e.jsx(ue,{className:"w-4 h-4 mr-2"}),s("common.save")]})]})]}),e.jsx(R,{children:e.jsxs(Ae,{value:w,onValueChange:a=>re(a),children:[e.jsxs(Ve,{className:"mb-4",children:[e.jsxs(U,{value:"desktop",className:"gap-2",children:[e.jsx($,{className:"w-4 h-4"}),s("admin.desktop")]}),e.jsxs(U,{value:"tablet",className:"gap-2",children:[e.jsx(B,{className:"w-4 h-4"}),s("admin.tablet")]}),e.jsxs(U,{value:"mobile",className:"gap-2",children:[e.jsx(z,{className:"w-4 h-4"}),s("admin.mobile")]})]}),e.jsx(F,{value:"desktop",children:I("desktop",r)}),e.jsx(F,{value:"tablet",children:x?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:s("admin.customTabletSettings")}),e.jsx(b,{variant:"outline",size:"sm",onClick:()=>q("tablet"),children:s("admin.useDesktopSettings")})]}),I("tablet",x)]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx(B,{className:"w-12 h-12 text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:s("admin.usingDesktopSettings")}),e.jsx(b,{onClick:()=>Z("tablet"),children:s("admin.customizeTabletSettings")})]})}),e.jsx(F,{value:"mobile",children:_?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:s("admin.customMobileSettings")}),e.jsx(b,{variant:"outline",size:"sm",onClick:()=>q("mobile"),children:s("admin.useDesktopSettings")})]}),I("mobile",_)]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx(z,{className:"w-12 h-12 text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:s("admin.usingDesktopSettings")}),e.jsx(b,{onClick:()=>Z("mobile"),children:s("admin.customizeMobileSettings")})]})})]})})]}),e.jsxs(O,{children:[e.jsxs(H,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(M,{children:s("admin.navButtons")}),e.jsx(ee,{children:s("admin.navButtonsDescription")})]}),e.jsxs(ge,{open:ne,onOpenChange:D,children:[e.jsx(je,{asChild:!0,children:e.jsxs(b,{onClick:()=>J(),children:[e.jsx(pe,{className:"w-4 h-4 mr-2"}),s("admin.addButton")]})}),e.jsxs(ve,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ke,{children:e.jsx(we,{children:s(L?"admin.editButton":"admin.addButton")})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:s("admin.labelChinese")}),e.jsx(E,{value:o.label_zh||"",onChange:a=>d({...o,label_zh:a.target.value}),placeholder:"中文标签"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:s("admin.labelEnglish")}),e.jsx(E,{value:o.label_en||"",onChange:a=>d({...o,label_en:a.target.value}),placeholder:"English Label"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:s("admin.labelPortuguese")}),e.jsx(E,{value:o.label_pt||"",onChange:a=>d({...o,label_pt:a.target.value}),placeholder:"Rótulo Português"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:s("admin.link")}),e.jsx(E,{value:o.link||"",onChange:a=>d({...o,link:a.target.value}),placeholder:"/path"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:s("admin.icon")}),e.jsxs(N,{value:o.icon||"Circle",onValueChange:a=>d({...o,icon:a}),children:[e.jsx(y,{children:e.jsx(C,{})}),e.jsx(S,{children:Oe.map(a=>e.jsx(h,{value:a,children:e.jsxs("div",{className:"flex items-center gap-2",children:[K(a),e.jsx("span",{children:a})]})},a))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:s("admin.deviceVisibility")}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{checked:o.show_on_desktop??!0,onCheckedChange:a=>d({...o,show_on_desktop:a})}),e.jsx($,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:s("admin.desktop")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{checked:o.show_on_tablet??!0,onCheckedChange:a=>d({...o,show_on_tablet:a})}),e.jsx(B,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:s("admin.tablet")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{checked:o.show_on_mobile??!0,onCheckedChange:a=>d({...o,show_on_mobile:a})}),e.jsx(z,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:s("admin.mobile")})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:s("admin.loginStateVisibility")}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{checked:o.show_when_logged_in??!0,onCheckedChange:a=>d({...o,show_when_logged_in:a})}),e.jsx("span",{className:"text-sm",children:s("admin.showWhenLoggedIn")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{checked:o.show_when_logged_out??!0,onCheckedChange:a=>d({...o,show_when_logged_out:a})}),e.jsx("span",{className:"text-sm",children:s("admin.showWhenLoggedOut")})]})]})]}),o.enabled===!1&&e.jsxs(Le,{className:"border-amber-200 bg-amber-50 dark:border-amber-900 dark:bg-amber-950",children:[e.jsx(W,{className:"h-4 w-4 text-amber-600"}),e.jsx(Pe,{className:"text-amber-800 dark:text-amber-200",children:s("admin.featureDisabledWarning","此功能已关闭，非管理员用户无法看到此导航按钮，也无法访问对应页面")})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-muted/30",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsxs(i,{className:"text-base font-medium flex items-center gap-2",children:[o.enabled!==!1?e.jsx(ae,{className:"w-4 h-4 text-green-500"}):e.jsx(W,{className:"w-4 h-4 text-amber-500"}),s("admin.featureEnabled","功能开关")]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:o.enabled!==!1?s("admin.featureEnabledDesc","功能正常开放，用户可访问"):s("admin.featureDisabledDesc","功能已关闭，仅管理员可访问")})]}),e.jsx(u,{checked:o.enabled!==!1,onCheckedChange:a=>d({...o,enabled:a})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{checked:o.visible??!0,onCheckedChange:a=>d({...o,visible:a})}),e.jsx(i,{children:s("admin.visible")})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(b,{variant:"outline",onClick:()=>D(!1),children:s("common.cancel")}),e.jsx(b,{onClick:he,disabled:G.isPending||X.isPending,children:s("common.save")})]})]})]})]})]}),e.jsx(R,{children:e.jsxs(Be,{children:[e.jsx(ze,{children:e.jsxs(le,{children:[e.jsx(g,{className:"w-12"}),e.jsx(g,{children:s("admin.status","状态")}),e.jsx(g,{children:s("admin.icon")}),e.jsx(g,{children:s("admin.label")}),e.jsx(g,{children:s("admin.link")}),e.jsx(g,{children:s("admin.devices")}),e.jsx(g,{children:s("admin.visible")}),e.jsx(g,{className:"text-right",children:s("admin.actions")})]})}),e.jsx(Ee,{children:A?.map(a=>e.jsxs(le,{className:a.enabled===!1?"opacity-60":"",children:[e.jsx(j,{children:e.jsx(fe,{className:"w-4 h-4 text-muted-foreground cursor-move"})}),e.jsx(j,{children:e.jsx("div",{title:a.enabled!==!1?s("admin.featureEnabled","功能开启"):s("admin.featureDisabled","功能关闭"),children:a.enabled!==!1?e.jsx(ae,{className:"w-4 h-4 text-green-500"}):e.jsx(W,{className:"w-4 h-4 text-amber-500"})})}),e.jsx(j,{children:K(a.icon)}),e.jsx(j,{className:"font-medium",children:Q(a)}),e.jsx(j,{className:"text-muted-foreground",children:a.link}),e.jsx(j,{children:e.jsxs("div",{className:"flex gap-1",children:[a.show_on_desktop&&e.jsx($,{className:"w-4 h-4"}),a.show_on_tablet&&e.jsx(B,{className:"w-4 h-4"}),a.show_on_mobile&&e.jsx(z,{className:"w-4 h-4"})]})}),e.jsx(j,{children:a.visible?e.jsx(Ne,{className:"w-4 h-4 text-green-500"}):e.jsx(ye,{className:"w-4 h-4 text-muted-foreground"})}),e.jsx(j,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(b,{variant:"ghost",size:"icon",onClick:()=>J(a),children:e.jsx(Ce,{className:"w-4 h-4"})}),e.jsx(b,{variant:"ghost",size:"icon",onClick:()=>me(a.id),children:e.jsx(Se,{className:"w-4 h-4 text-destructive"})})]})})]},a.id))})]})})]})]})};export{Je as default};
//# sourceMappingURL=AdminNavigationSettings-DhQtpKhz.js.map
