import{s as We,q as xe,v as Fe,w as ie,p as Xe,r as c,d6 as us,d7 as Be,j as e,bh as re,aM as ve,d8 as hs,d9 as xs,da as gs,db as fs,bN as De,dc as js,dd as Ns,cX as vs,X,de as bs,df as ys,dg as ws,dh as _s,a4 as Cs,bH as ks,bL as Ss,ba as be,ab as ye,bo as Le,a_ as he,y as Is,di as Ds,b1 as Fs,b6 as we,am as Ue,bf as Ts}from"./vendor-react-COnB1Bf9.js";import{m as _e}from"./vendor-map-CvE3ASYw.js";import{s as v,u as As,C as $,p as Es,F as Rs,$ as Ps,q as M,B as R,A as zs,t as qs,v as $s,w as Ms,x as Bs,y as Ls,I as p,i as Us,f as Os,G as Hs,D as Vs,W as Gs,c as Ks,d as Qs,e as Ws,T as Xs,S as Zs,U as i,a2 as Ys,a3 as Js,a4 as ea,a5 as sa,a6 as aa,a8 as J}from"./index-BPRrWp3s.js";import{C as ee}from"./checkbox-D2BQdPPM.js";import{S as Oe}from"./switch-BOAI8N5o.js";import{R as ta,a as He}from"./radio-group-DN4raSrt.js";import{T as Ve,a as Ge,b as se,c as ae}from"./tabs-D0j0jx2K.js";import{i as T}from"./vendor-i18n-jtdHZIRR.js";import{R as Ce}from"./RichTextEditor-rm76VJF3.js";import{a as na}from"./useBrands-Dcit5874.js";import{N as ra,O as D,P as ke,T as Ke,U as Se}from"./vendor-utils-Z4kpnli5.js";const ia=t=>We({queryKey:["dish-images",t],queryFn:async()=>{const{data:d,error:a}=await v.from("restaurant_dish_images").select("*").eq("restaurant_id",t).order("sort_order",{ascending:!0});if(a)throw a;return d},enabled:!!t}),la=()=>{const{user:t}=As(),d=xe();return Fe({mutationFn:async({restaurantId:a,file:g})=>{if(!t)throw new Error("Must be logged in");const{data:f,error:h}=await v.from("restaurant_dish_images").select("id").eq("restaurant_id",a);if(h)throw h;if(f&&f.length>=10)throw new Error("MAX_IMAGES_REACHED");const u=g.name.split(".").pop(),_=`${a}/${Date.now()}-${Math.random().toString(36).substring(7)}.${u}`,{error:j}=await v.storage.from("dish-images").upload(_,g);if(j)throw j;const{data:{publicUrl:N}}=v.storage.from("dish-images").getPublicUrl(_),y=f?f.length:0,{data:k,error:w}=await v.from("restaurant_dish_images").insert({restaurant_id:a,image_url:N,sort_order:y,created_by:t.id}).select().single();if(w)throw w;return k},onSuccess:(a,g)=>{d.invalidateQueries({queryKey:["dish-images",g.restaurantId]}),ie.success(T.t("dishImages.uploadSuccess"))},onError:a=>{a.message==="MAX_IMAGES_REACHED"?ie.error(T.t("dishImages.maxImagesReached")):ie.error(T.t("dishImages.uploadFailed"))}})},oa=()=>{const t=xe();return Fe({mutationFn:async({imageId:d,restaurantId:a,imageUrl:g})=>{const f=g.split("/dish-images/");f[1]&&await v.storage.from("dish-images").remove([f[1]]);const{error:h}=await v.from("restaurant_dish_images").delete().eq("id",d);if(h)throw h;return{restaurantId:a}},onSuccess:d=>{t.invalidateQueries({queryKey:["dish-images",d.restaurantId]}),ie.success(T.t("dishImages.deleteSuccess"))},onError:()=>{ie.error(T.t("dishImages.deleteFailed"))}})},ca=()=>{const t=xe();return Fe({mutationFn:async({images:d,restaurantId:a})=>{const g=d.map(f=>v.from("restaurant_dish_images").update({sort_order:f.sort_order}).eq("id",f.id));return await Promise.all(g),{restaurantId:a}},onSuccess:d=>{t.invalidateQueries({queryKey:["dish-images",d.restaurantId]})}})};function da({image:t,index:d,onDelete:a}){const{attributes:g,listeners:f,setNodeRef:h,transform:u,transition:_,isDragging:j}=js({id:t.id}),N={transform:Ns.Transform.toString(u),transition:_,zIndex:j?10:1,opacity:j?.8:1};return e.jsxs("div",{ref:h,style:N,className:`relative group aspect-square rounded-lg overflow-hidden border ${j?"ring-2 ring-primary shadow-lg":""}`,children:[e.jsx("div",{...g,...f,className:"absolute top-1 left-1 z-10 p-1 bg-black/60 rounded cursor-grab active:cursor-grabbing opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(vs,{className:"w-4 h-4 text-white"})}),e.jsx("img",{src:t.image_url,alt:`Dish ${d+1}`,className:"w-full h-full object-cover",draggable:!1}),e.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsx(R,{type:"button",variant:"destructive",size:"icon",className:"h-8 w-8",onClick:y=>{y.preventDefault(),y.stopPropagation(),a(t.id,t.image_url)},children:e.jsx(X,{className:"w-4 h-4"})})}),e.jsx("div",{className:"absolute bottom-1 right-1 bg-black/60 text-white text-xs px-1.5 py-0.5 rounded",children:d+1})]})}function ma({restaurantId:t}){const{t:d}=Xe(),a=c.useRef(null),{data:g=[],isLoading:f}=ia(t),h=la(),u=oa(),_=ca(),[j,N]=c.useState(null),[y,k]=c.useState([]),[w,q]=c.useState(!1),o=y.length>0?y:g,A=us(Be(ws,{activationConstraint:{distance:8}}),Be(ys,{coordinateGetter:bs})),le=m=>{const{active:F,over:B}=m;if(B&&F.id!==B.id){const Z=o.findIndex(V=>V.id===F.id),ce=o.findIndex(V=>V.id===B.id),Y=_s(o,Z,ce);k(Y);const de=Y.map((V,me)=>({id:V.id,sort_order:me}));_.mutate({images:de,restaurantId:t},{onSuccess:()=>{k([])},onError:()=>{k([])}})}},oe=async m=>{const F=m.target.files?.[0];F&&(F.size>5*1024*1024||F.type.startsWith("image/")&&(await h.mutateAsync({restaurantId:t,file:F}),a.current&&(a.current.value="")))},te=async()=>{if(!j||w)return;const{id:m,url:F}=j;q(!0);try{await u.mutateAsync({imageId:m,restaurantId:t,imageUrl:F}),N(null)}catch(B){console.error("Delete failed:",B)}finally{q(!1)}},ne=m=>{!m&&!w&&N(null)},Q=o.length<10;return e.jsxs($,{children:[e.jsxs(Es,{className:"pb-3",children:[e.jsxs(Rs,{className:"text-lg flex items-center gap-2",children:[e.jsx(re,{className:"w-5 h-5"}),d("dishImages.title")]}),e.jsxs(Ps,{children:[d("dishImages.description",{current:o.length,max:10}),o.length>1&&e.jsx("span",{className:"block mt-1 text-xs",children:d("dishImages.dragToReorder")})]})]}),e.jsxs(M,{children:[f?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(ve,{className:"w-6 h-6 animate-spin"})}):e.jsxs("div",{className:"space-y-4",children:[o.length>0&&e.jsx(hs,{sensors:A,collisionDetection:xs,onDragEnd:le,children:e.jsx(gs,{items:o.map(m=>m.id),strategy:fs,children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:o.map((m,F)=>e.jsx(da,{image:m,index:F,onDelete:(B,Z)=>N({id:B,url:Z})},m.id))})})}),Q&&e.jsxs("div",{children:[e.jsx("input",{ref:a,type:"file",accept:"image/*",className:"hidden",onChange:oe,disabled:h.isPending}),e.jsxs(R,{type:"button",variant:"outline",className:"w-full",onClick:()=>a.current?.click(),disabled:h.isPending,children:[h.isPending?e.jsx(ve,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(De,{className:"w-4 h-4 mr-2"}),d("dishImages.upload")]})]}),!Q&&e.jsx("p",{className:"text-sm text-muted-foreground text-center",children:d("dishImages.maxReached")})]}),e.jsx(zs,{open:!!j,onOpenChange:ne,children:e.jsx(qs,{onClick:m=>m.stopPropagation(),onKeyDown:m=>{m.key==="Enter"&&(m.preventDefault(),m.stopPropagation())},children:e.jsxs("form",{onSubmit:m=>m.preventDefault(),children:[e.jsxs($s,{children:[e.jsx(Ms,{children:d("dishImages.deleteConfirmTitle")}),e.jsx(Bs,{children:d("dishImages.deleteConfirmDescription")})]}),e.jsxs(Ls,{className:"mt-4",children:[e.jsx(R,{type:"button",variant:"outline",onClick:m=>{m.preventDefault(),m.stopPropagation(),w||N(null)},disabled:w,children:d("common.cancel")}),e.jsxs(R,{type:"button",variant:"destructive",onClick:m=>{m.preventDefault(),m.stopPropagation(),te()},disabled:w,children:[w?e.jsx(ve,{className:"w-4 h-4 mr-2 animate-spin"}):null,d("common.delete")]})]})]})})})]})]})}function Ie({value:t,onChange:d,suggestions:a,placeholder:g,className:f}){const[h,u]=c.useState(!1),[_,j]=c.useState(t),N=c.useRef(null),y=c.useRef(null),k=a.filter(o=>o.toLowerCase().includes(_.toLowerCase()));c.useEffect(()=>{j(t)},[t]),c.useEffect(()=>{const o=A=>{y.current&&!y.current.contains(A.target)&&N.current&&!N.current.contains(A.target)&&u(!1)};return document.addEventListener("mousedown",o),()=>document.removeEventListener("mousedown",o)},[]);const w=o=>{const A=o.target.value;j(A),d(A),u(!0)},q=o=>{j(o),d(o),u(!1),N.current?.focus()};return e.jsxs("div",{className:"relative",children:[e.jsx(p,{ref:N,value:_,onChange:w,onFocus:()=>u(!0),placeholder:g,className:f}),h&&k.length>0&&e.jsx("div",{ref:y,className:"absolute z-50 mt-1 w-full max-h-48 overflow-auto rounded-md border bg-popover p-1 shadow-md",children:k.map(o=>e.jsxs("div",{onClick:()=>q(o),className:Us("relative flex cursor-pointer select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none hover:bg-accent hover:text-accent-foreground",o===_&&"bg-accent"),children:[o===_&&e.jsx(Cs,{className:"mr-2 h-4 w-4"}),e.jsx("span",{className:o===_?"":"pl-6",children:o})]},o))})]})}const pa=()=>We({queryKey:["all-restaurant-types"],queryFn:async()=>{const{data:t,error:d}=await v.from("restaurants").select("type, type_en, type_pt");if(d)throw d;const a=new Map;t.forEach(u=>{const _=u.type||[],j=u.type_en||[],N=u.type_pt||[],y=Math.max(_.length,j.length,N.length);for(let k=0;k<y;k++){const w=_[k]||"",q=j[k]||"",o=N[k]||"",A=`${w}|${q}|${o}`;(w||q||o)&&(a.has(A)||a.set(A,{zh:w,en:q,pt:o}))}});const g=new Set,f=new Set,h=new Set;return a.forEach(u=>{u.zh&&g.add(u.zh),u.en&&f.add(u.en),u.pt&&h.add(u.pt)}),{typeSets:Array.from(a.values()),uniqueZh:Array.from(g).sort(),uniqueEn:Array.from(f).sort(),uniquePt:Array.from(h).sort()}}}),ua=ra({name:D().min(1,T.t("validation.nameRequired")),name_en:D().min(1,T.t("validation.nameRequired")),name_pt:D().min(1,T.t("validation.nameRequired")),key_id:D().optional(),type:ke(D()).min(1,T.t("validation.typeRequired")).max(3,T.t("validation.typeMaximum")),type_en:ke(D()).min(1,T.t("validation.typeRequired")).max(3,T.t("validation.typeMaximum")),type_pt:ke(D()).min(1,T.t("validation.typeRequired")).max(3,T.t("validation.typeMaximum")),description:D().optional(),description_en:D().optional(),description_pt:D().optional(),announcement_zh:D().optional(),announcement_en:D().optional(),announcement_pt:D().optional(),address:D().min(1,T.t("validation.addressRequired")),lat:Ke(),lng:Ke(),phone:D().optional(),website_url:D().optional(),visible:Se().default(!0),show_takeaway_button:Se().default(!0),show_booking_button:Se().default(!0)}),Qe=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];function ka({restaurant:t,trigger:d}){const{t:a}=Xe(),{toast:g}=Os(),f=xe(),{isAdmin:h}=Hs(),{data:u}=pa(),{data:_}=na(),[j,N]=c.useState(!1),[y,k]=c.useState(t?.is_chain||!1),[w,q]=c.useState(t?.brand_id||null),[o,A]=c.useState(null),[le,oe]=c.useState(t?.image_url||null),[te,ne]=c.useState(null),[Q,m]=c.useState(t?.cover_image_url||null),[F,B]=c.useState(null),[Z,ce]=c.useState(t?.owner_avatar_url||null),[Y,de]=c.useState(null),[V,me]=c.useState(t?.banner_url||null),[Te,Ze]=c.useState(t?.owner_bio||""),[Ae,Ye]=c.useState(t?.owner_bio_en||""),[Ee,Je]=c.useState(t?.owner_bio_pt||""),[Re,Pe]=c.useState(!1),pe=c.useRef(null),S=c.useRef(null),W=c.useRef(null),[r,I]=c.useState(()=>{const s={};return Qe.forEach(n=>{s[n]={open:"12:00",close:"23:00",closed:!1,splitShift:!1,open2:"19:00",close2:"23:00"}}),t?.opening_hours?{...s,...t.opening_hours}:s}),[L,ge]=c.useState(t?.template||"default"),[U,fe]=c.useState(()=>t?.type&&Array.isArray(t.type)?t.type.map((s,n)=>({zh:s,en:t.type_en?.[n]||"",pt:t.type_pt?.[n]||""})):[{zh:"",en:"",pt:""}]),{register:P,handleSubmit:ze,formState:{errors:b},setValue:E,watch:G,trigger:ha}=ks({resolver:Ss(ua),defaultValues:t?{name:t.name,name_en:t.name_en||"",name_pt:t.name_pt||"",key_id:t.key_id||"",type:Array.isArray(t.type)?t.type:[t.type],type_en:Array.isArray(t.type_en)?t.type_en:t.type_en?[t.type_en]:[""],type_pt:Array.isArray(t.type_pt)?t.type_pt:t.type_pt?[t.type_pt]:[""],description:t.description||"",description_en:t.description_en||"",description_pt:t.description_pt||"",announcement_zh:t.announcement_zh||"",announcement_en:t.announcement_en||"",announcement_pt:t.announcement_pt||"",address:t.address,lat:typeof t.lat=="number"&&!isNaN(t.lat)?t.lat:38.7223,lng:typeof t.lng=="number"&&!isNaN(t.lng)?t.lng:-9.1393,phone:t.phone||"",website_url:t.website_url||"",visible:t.visible??!0,show_takeaway_button:t.show_takeaway_button??!0,show_booking_button:t.show_booking_button??!0}:{name:"",name_en:"",name_pt:"",key_id:"",type:[""],type_en:[""],type_pt:[""],description:"",description_en:"",description_pt:"",announcement_zh:"",announcement_en:"",announcement_pt:"",address:"",lat:38.7223,lng:-9.1393,phone:"",website_url:"",visible:!0,show_takeaway_button:!0,show_booking_button:!0}}),es=()=>{const s=[];b.name&&s.push(a("admin.fieldName")+" (ä¸­æ–‡)"),b.name_en&&s.push(a("admin.fieldName")+" (EN)"),b.name_pt&&s.push(a("admin.fieldName")+" (PT)"),b.type&&s.push(a("admin.fieldType")+" (ä¸­æ–‡)"),b.type_en&&s.push(a("admin.fieldType")+" (EN)"),b.type_pt&&s.push(a("admin.fieldType")+" (PT)"),b.address&&s.push(a("admin.fieldAddress")),(b.lat||b.lng)&&s.push(a("admin.fieldLocation")),s.length>0&&g({title:a("admin.validationFailed"),description:a("admin.missingFields")+": "+s.join(", "),variant:"destructive"})},ss=()=>{U.length<3&&fe([...U,{zh:"",en:"",pt:""}])},as=s=>{U.length>1&&fe(U.filter((n,l)=>l!==s))},je=(s,n,l)=>{const x=[...U];x[s][n]=l,fe(x),E("type",x.map(C=>C.zh).filter(Boolean)),E("type_en",x.map(C=>C.en).filter(Boolean)),E("type_pt",x.map(C=>C.pt).filter(Boolean))},O=G("lat"),H=G("lng"),ts=G("visible"),ns=G("show_takeaway_button"),rs=G("show_booking_button"),ue=(s,n)=>typeof s=="number"&&typeof n=="number"&&!isNaN(s)&&!isNaN(n)&&isFinite(s)&&isFinite(n);c.useEffect(()=>{if(!j){S.current&&(S.current.remove(),S.current=null,W.current=null);return}if(S.current)return;const s="pk.eyJ1IjoieGlhb3hpb25nMTIzIiwiYSI6ImNtNTFjOXliYjF1Y2IyaXM4bnNzMGxvdnkifQ.mPcWqH7ndIrjEqlWIJVk8g",l=setTimeout(()=>{if(!pe.current){console.error("Map container not found");return}try{_e.accessToken=s;const x=ue(O,H)?H:-9.1393,C=ue(O,H)?O:38.7223;S.current=new _e.Map({container:pe.current,style:"mapbox://styles/mapbox/light-v11",center:[x,C],zoom:15}),S.current.scrollZoom.disable(),S.current.on("load",()=>{S.current&&(ue(O,H)&&(W.current=new _e.Marker({draggable:!0}).setLngLat([H,O]).addTo(S.current)),W.current.on("dragend",()=>{const z=W.current.getLngLat();E("lng",z.lng),E("lat",z.lat)}),setTimeout(()=>{S.current?.resize()},100))});const Ne=z=>{z.ctrlKey||z.metaKey?S.current?.scrollZoom.enable():S.current?.scrollZoom.disable()};pe.current.addEventListener("wheel",Ne),S.current.on("click",z=>{const{lng:K,lat:Me}=z.lngLat;E("lng",K),E("lat",Me),W.current?.setLngLat([K,Me])}),S.current.on("error",z=>{console.error("Map error:",z)})}catch(x){console.error("Failed to initialize map:",x)}},500);return()=>{clearTimeout(l)}},[j,O,H]),c.useEffect(()=>{W.current&&S.current&&ue(O,H)&&(W.current.setLngLat([H,O]),S.current.setCenter([H,O]))},[O,H]);const is=s=>{const n=s.target.files?.[0];if(n){A(n);const l=new FileReader;l.onloadend=()=>{oe(l.result)},l.readAsDataURL(n)}},qe=s=>{const n=s.target.files?.[0];if(n){ne(n);const l=new FileReader;l.onloadend=()=>{m(l.result)},l.readAsDataURL(n)}},ls=s=>{const n=s.target.files?.[0];if(n){B(n);const l=new FileReader;l.onloadend=()=>{ce(l.result)},l.readAsDataURL(n)}},os=s=>{const n=s.target.files?.[0];if(n){de(n);const l=new FileReader;l.onloadend=()=>{me(l.result)},l.readAsDataURL(n)}},cs=async()=>{if(!o)return t?.image_url||null;const s=o.name.split(".").pop(),l=`${`${Math.random()}.${s}`}`,{error:x}=await v.storage.from("restaurant-images").upload(l,o);if(x)throw x;const{data:{publicUrl:C}}=v.storage.from("restaurant-images").getPublicUrl(l);return C},ds=async()=>{if(!te)return t?.cover_image_url||null;const s=te.name.split(".").pop(),l=`${`cover_${Math.random()}.${s}`}`,{error:x}=await v.storage.from("restaurant-images").upload(l,te);if(x)throw x;const{data:{publicUrl:C}}=v.storage.from("restaurant-images").getPublicUrl(l);return C},ms=async()=>{if(!F)return t?.owner_avatar_url||null;const s=F.name.split(".").pop(),l=`${`owner_${Math.random()}.${s}`}`,{error:x}=await v.storage.from("restaurant-images").upload(l,F);if(x)throw x;const{data:{publicUrl:C}}=v.storage.from("restaurant-images").getPublicUrl(l);return C},ps=async()=>{if(!Y)return t?.banner_url||null;const s=Y.name.split(".").pop(),l=`${`banner_${Math.random()}.${s}`}`,{error:x}=await v.storage.from("restaurant-images").upload(l,Y);if(x)throw x;const{data:{publicUrl:C}}=v.storage.from("restaurant-images").getPublicUrl(l);return C},$e=async s=>{Pe(!0);try{const{data:{user:n}}=await v.auth.getUser();if(!n)throw new Error("Not authenticated");const l=await cs(),x=await ds(),C=await ms(),Ne=await ps(),z={name:s.name,name_en:s.name_en,name_pt:s.name_pt,key_id:s.key_id||null,type:s.type,type_en:s.type_en,type_pt:s.type_pt,description:s.description||null,description_en:s.description_en||null,description_pt:s.description_pt||null,announcement_zh:s.announcement_zh||null,announcement_en:s.announcement_en||null,announcement_pt:s.announcement_pt||null,address:s.address,lat:L==="ghost"?s.lat||38.7223:s.lat,lng:L==="ghost"?s.lng||-9.1393:s.lng,phone:s.phone||null,website_url:s.website_url||null,visible:s.visible,show_takeaway_button:s.show_takeaway_button,show_booking_button:L==="ghost"?!1:s.show_booking_button,image_url:l,cover_image_url:x,opening_hours:L==="ghost"?null:r,template:L,owner_avatar_url:C,banner_url:Ne,owner_bio:Te||null,owner_bio_en:Ae||null,owner_bio_pt:Ee||null,is_chain:y,brand_id:y?w:null};if(t){const{error:K}=await v.from("restaurants").update({...z,updated_by:n.id}).eq("id",t.id);if(K)throw K;g({title:a("common.success"),description:a("admin.restaurantUpdated")})}else{const{error:K}=await v.from("restaurants").insert([{...z,created_by:n.id}]);if(K)throw K;g({title:a("common.success"),description:a("admin.restaurantCreated")})}f.invalidateQueries({queryKey:["restaurants"]}),N(!1)}catch(n){g({title:a("common.error"),description:n.message,variant:"destructive"})}finally{Pe(!1)}};return e.jsxs(Vs,{open:j,onOpenChange:N,children:[e.jsx(Gs,{asChild:!0,children:d}),e.jsxs(Ks,{className:"max-w-[95vw] sm:max-w-6xl max-h-[95vh] overflow-hidden flex flex-col p-0",children:[e.jsxs(Qs,{className:"px-6 pt-6 pb-4 border-b bg-muted/30",children:[e.jsxs(Ws,{className:"text-2xl flex items-center gap-2",children:[e.jsx(be,{className:"w-6 h-6 text-primary"}),a(t?"admin.editRestaurant":"admin.addRestaurant")]}),e.jsx(Xs,{className:"text-base",children:a(t?"admin.editRestaurantDetails":"admin.createRestaurantWithInfo")})]}),e.jsx(Zs,{className:"px-6 h-[calc(95vh-220px)]",children:e.jsxs("form",{onSubmit:ze($e,es),className:"space-y-6 py-6",children:[e.jsx($,{className:"border-primary/20 bg-gradient-to-br from-primary/5 to-background",children:e.jsx(M,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:e.jsx(ye,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx(i,{className:"text-base font-semibold",children:a("admin.frontendDisplay")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a("admin.frontendDisplayDesc")})]})]}),e.jsx(Oe,{checked:ts,onCheckedChange:s=>E("visible",s)})]})})}),e.jsx($,{className:"border-primary/20 bg-gradient-to-br from-background to-muted/20",children:e.jsxs(M,{className:"p-6",children:[e.jsxs(i,{className:"text-base font-semibold flex items-center gap-2 mb-4",children:[e.jsx(be,{className:"w-5 h-5 text-primary"}),a("admin.restaurantTemplate")]}),e.jsxs(ta,{value:L,onValueChange:ge,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-start space-x-3 p-4 rounded-lg border border-border hover:border-primary/50 transition-colors cursor-pointer",onClick:()=>ge("default"),children:[e.jsx(He,{value:"default",id:"template-default",className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(i,{htmlFor:"template-default",className:"text-sm font-medium cursor-pointer",children:a("admin.templateDefault")}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:a("admin.templateDefaultDesc")})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 p-4 rounded-lg border border-border hover:border-primary/50 transition-colors cursor-pointer",onClick:()=>ge("ghost"),children:[e.jsx(He,{value:"ghost",id:"template-ghost",className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(i,{htmlFor:"template-ghost",className:"text-sm font-medium cursor-pointer",children:a("admin.templateGhost")}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:a("admin.templateGhostDesc")})]})]})]})]})}),e.jsx($,{className:"border-primary/20 bg-gradient-to-br from-background to-muted/20",children:e.jsxs(M,{className:"p-6",children:[e.jsxs(i,{className:"text-base font-semibold flex items-center gap-2 mb-4",children:[e.jsx(Le,{className:"w-5 h-5 text-primary"}),a("admin.restaurant.isChain")]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(i,{className:"text-sm font-medium",children:a("admin.restaurant.isChain")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a("admin.restaurant.isChainDesc")})]}),e.jsx(Oe,{checked:y,onCheckedChange:s=>{k(s),s||q(null)}})]}),y&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-sm font-medium",children:a("admin.restaurant.selectBrand")}),e.jsxs(Ys,{value:w||"",onValueChange:s=>q(s||null),children:[e.jsx(Js,{children:e.jsx(ea,{placeholder:a("admin.restaurant.selectBrandPlaceholder")})}),e.jsx(sa,{children:_?.map(s=>e.jsx(aa,{value:s.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[s.logo_url?e.jsx("img",{src:s.logo_url,alt:"",className:"w-5 h-5 object-contain rounded"}):e.jsx(Le,{className:"w-4 h-4 text-muted-foreground"}),s.name]})},s.id))})]})]})]})]})}),e.jsx($,{className:"border-primary/20 bg-gradient-to-br from-background to-muted/20",children:e.jsxs(M,{className:"p-6",children:[e.jsxs(i,{className:"text-base font-semibold flex items-center gap-2 mb-4",children:[e.jsx(De,{className:"w-5 h-5 text-primary"}),a("admin.restaurantImages")]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium",children:a("admin.cardImage")}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",a("admin.cardImageHint"),")"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[le&&e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:le,alt:"Card Preview",className:"w-32 h-32 object-cover rounded-lg shadow-lg ring-2 ring-primary/20 transition-transform duration-200 group-hover:scale-105"}),e.jsx(R,{type:"button",variant:"destructive",size:"icon",className:"absolute -top-2 -right-2 h-6 w-6 shadow-lg opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>{A(null),oe(null)},children:e.jsx(X,{className:"h-3 w-3"})})]}),e.jsxs(i,{htmlFor:"image-upload",className:"cursor-pointer",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2 px-6 py-4 border-2 border-dashed border-primary/30 rounded-lg hover:border-primary hover:bg-primary/5 transition-all duration-200",children:[e.jsx(De,{className:"h-6 w-6 text-primary"}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"font-medium text-xs",children:a("admin.uploadImage")})})]}),e.jsx(p,{id:"image-upload",type:"file",accept:"image/*",className:"hidden",onChange:is})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium",children:a("admin.coverImage")}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",a("admin.coverImageHint"),")"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[Q&&e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:Q,alt:"Cover Preview",className:"w-32 h-32 object-cover rounded-lg shadow-lg ring-2 ring-accent/20 transition-transform duration-200 group-hover:scale-105"}),e.jsx(R,{type:"button",variant:"destructive",size:"icon",className:"absolute -top-2 -right-2 h-6 w-6 shadow-lg opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>{ne(null),m(null)},children:e.jsx(X,{className:"h-3 w-3"})})]}),e.jsxs(i,{htmlFor:"cover-image-upload",className:"cursor-pointer",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2 px-6 py-4 border-2 border-dashed border-accent/30 rounded-lg hover:border-accent hover:bg-accent/5 transition-all duration-200",children:[e.jsx(re,{className:"h-6 w-6 text-accent"}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"font-medium text-xs",children:a("admin.uploadImage")})})]}),e.jsx(p,{id:"cover-image-upload",type:"file",accept:"image/*",className:"hidden",onChange:qe})]})]})]})]})]})}),t?.id&&e.jsx($,{className:"border-primary/20",children:e.jsxs(M,{className:"p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs(i,{className:"text-base font-semibold flex items-center gap-2",children:[e.jsx(re,{className:"w-5 h-5 text-primary"}),a("admin.dishGallery")]})}),e.jsx(ma,{restaurantId:t.id})]})}),e.jsx($,{className:"border-primary/20",children:e.jsxs(M,{className:"p-6",children:[e.jsxs(i,{className:"text-base font-semibold flex items-center gap-2 mb-4",children:[e.jsx(ye,{className:"w-5 h-5 text-primary"}),a("admin.multilingualContent")]}),e.jsxs(Ve,{defaultValue:"zh",className:"w-full",children:[e.jsxs(Ge,{className:"grid w-full grid-cols-3 mb-6",children:[e.jsxs(se,{value:"zh",className:"gap-2",children:["ðŸ‡¨ðŸ‡³ ",a("admin.chinese")]}),e.jsxs(se,{value:"en",className:"gap-2",children:["ðŸ‡¬ðŸ‡§ ",a("admin.english")]}),e.jsxs(se,{value:"pt",className:"gap-2",children:["ðŸ‡µðŸ‡¹ ",a("admin.portuguese")]})]}),e.jsxs(ae,{value:"zh",className:"space-y-4 mt-0",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"name",className:"text-sm font-medium",children:a("admin.restaurantName")}),e.jsx(p,{id:"name",...P("name"),placeholder:a("admin.enterRestaurantName"),className:"text-base"}),b.name&&e.jsx("p",{className:"text-sm text-destructive",children:b.name.message})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(i,{className:"text-sm font-medium",children:a("admin.restaurantType")}),U.length<3&&e.jsx(R,{type:"button",variant:"outline",size:"sm",onClick:ss,children:a("admin.addType")})]}),U.map((s,n)=>e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(Ie,{placeholder:a("admin.typeExample"),value:s.zh,onChange:l=>je(n,"zh",l),suggestions:u?.uniqueZh||[]}),e.jsx(R,{type:"button",variant:"ghost",size:"icon",onClick:()=>as(n),disabled:U.length===1,children:e.jsx(X,{className:"h-4 w-4"})})]},n)),b.type&&e.jsx("p",{className:"text-sm text-destructive",children:b.type.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"description",className:"text-sm font-medium",children:a("admin.description")}),e.jsx(Ce,{value:G("description")||"",onChange:s=>E("description",s),placeholder:a("admin.enterDescription")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"announcement_zh",className:"text-sm font-medium",children:a("admin.announcement")}),e.jsx(J,{id:"announcement_zh",...P("announcement_zh"),rows:2,placeholder:a("admin.enterAnnouncement")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a("admin.announcementHint")})]})]}),e.jsxs(ae,{value:"en",className:"space-y-4 mt-0",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"name_en",className:"text-sm font-medium",children:"Restaurant Name"}),e.jsx(p,{id:"name_en",...P("name_en"),placeholder:"Enter restaurant name...",className:"text-base"}),b.name_en&&e.jsx("p",{className:"text-sm text-destructive",children:b.name_en.message})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(i,{className:"text-sm font-medium",children:"Restaurant Types (1-3 tags)"}),U.map((s,n)=>e.jsx("div",{className:"flex gap-2 items-center",children:e.jsx(Ie,{placeholder:"e.g. Cantonese",value:s.en,onChange:l=>je(n,"en",l),suggestions:u?.uniqueEn||[]})},n))]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"description_en",className:"text-sm font-medium",children:"Description"}),e.jsx(Ce,{value:G("description_en")||"",onChange:s=>E("description_en",s),placeholder:"Enter restaurant description..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"announcement_en",className:"text-sm font-medium",children:"Announcement"}),e.jsx(J,{id:"announcement_en",...P("announcement_en"),rows:2,placeholder:"Enter announcement (optional)..."}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Display important notices at top of restaurant page"})]})]}),e.jsxs(ae,{value:"pt",className:"space-y-4 mt-0",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"name_pt",className:"text-sm font-medium",children:"Nome do Restaurante"}),e.jsx(p,{id:"name_pt",...P("name_pt"),placeholder:"Digite o nome do restaurante...",className:"text-base"}),b.name_pt&&e.jsx("p",{className:"text-sm text-destructive",children:b.name_pt.message})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(i,{className:"text-sm font-medium",children:"Tipos de Restaurante (1-3 tags)"}),U.map((s,n)=>e.jsx("div",{className:"flex gap-2 items-center",children:e.jsx(Ie,{placeholder:"ex: Cantonesa",value:s.pt,onChange:l=>je(n,"pt",l),suggestions:u?.uniquePt||[]})},n))]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"description_pt",className:"text-sm font-medium",children:"DescriÃ§Ã£o"}),e.jsx(Ce,{value:G("description_pt")||"",onChange:s=>E("description_pt",s),placeholder:"Digite a descriÃ§Ã£o do restaurante..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"announcement_pt",className:"text-sm font-medium",children:"AnÃºncio"}),e.jsx(J,{id:"announcement_pt",...P("announcement_pt"),rows:2,placeholder:"Digite o anÃºncio (opcional)..."}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Exibir avisos importantes no topo da pÃ¡gina do restaurante"})]})]})]})]})}),e.jsx($,{className:"border-primary/20",children:e.jsxs(M,{className:"p-6 space-y-4",children:[e.jsxs(i,{className:"text-base font-semibold flex items-center gap-2",children:[e.jsx(he,{className:"w-5 h-5 text-primary"}),a("admin.locationAndContact")]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(i,{htmlFor:"address",className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(he,{className:"w-4 h-4"}),a("admin.address")]}),e.jsx(p,{id:"address",...P("address"),placeholder:a("admin.enterAddress")}),b.address&&e.jsx("p",{className:"text-sm text-destructive",children:b.address.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(i,{htmlFor:"phone",className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(Is,{className:"w-4 h-4"}),a("admin.phone")]}),e.jsx(p,{id:"phone",...P("phone"),placeholder:"+351..."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(i,{htmlFor:"website_url",className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(ye,{className:"w-4 h-4"}),a("admin.websiteBaseUrl")]}),e.jsx(p,{id:"website_url",...P("website_url"),placeholder:"https://sushi.xiaoxiong.pt:6000",readOnly:!h,disabled:!h,className:h?"":"bg-muted cursor-not-allowed"}),!h&&e.jsx("p",{className:"text-xs text-muted-foreground",children:a("admin.websiteReadOnly")})]}),h&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(i,{htmlFor:"key_id",className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(Ds,{className:"w-4 h-4"}),"Key ID (API)"]}),e.jsx(p,{id:"key_id",...P("key_id"),placeholder:"ä¾‹å¦‚: saldanha01"})]})]}),e.jsxs("div",{className:"space-y-3 pt-2",children:[e.jsx(i,{className:"text-sm font-medium text-muted-foreground",children:a("admin.displaySettings")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg border bg-muted/30",children:[e.jsx(ee,{id:"show_takeaway_button",checked:ns,onCheckedChange:s=>E("show_takeaway_button",s)}),e.jsxs(i,{htmlFor:"show_takeaway_button",className:"cursor-pointer text-sm flex items-center gap-2",children:[e.jsx(Fs,{className:"w-4 h-4"}),a("admin.showTakeawayButton")]})]}),L!=="ghost"&&e.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg border bg-muted/30",children:[e.jsx(ee,{id:"show_booking_button",checked:rs,onCheckedChange:s=>E("show_booking_button",s)}),e.jsxs(i,{htmlFor:"show_booking_button",className:"cursor-pointer text-sm flex items-center gap-2",children:[e.jsx(we,{className:"w-4 h-4"}),a("admin.showBookingButton")]})]})]})]})]})}),L==="ghost"&&e.jsx($,{className:"border-primary/20 bg-gradient-to-br from-background to-muted/20",children:e.jsxs(M,{className:"p-6",children:[e.jsxs(i,{className:"text-base font-semibold flex items-center gap-2 mb-4",children:[e.jsx(Ue,{className:"w-5 h-5 text-primary"}),a("admin.ghostTemplateNote")]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"text-sm font-medium",children:a("admin.bannerImage","æ¨ªå¹…å›¾ç‰‡")})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a("admin.bannerImageDesc","æ­¤å›¾ç‰‡å°†æ˜¾ç¤ºåœ¨é¡µé¢é¡¶éƒ¨ä½œä¸ºæ¨ªå¹…èƒŒæ™¯ï¼Œå»ºè®®ä½¿ç”¨å®½å¹…å›¾ç‰‡")}),e.jsxs("div",{className:"flex items-start gap-4",children:[V&&e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:V,alt:"Banner Preview",className:"w-40 h-16 object-cover rounded-lg shadow-lg ring-2 ring-primary/20 transition-transform duration-200 group-hover:scale-105"}),e.jsx(R,{type:"button",variant:"destructive",size:"icon",className:"absolute -top-2 -right-2 h-6 w-6 shadow-lg opacity-0 group-hover:opacity-100 transition-opacity rounded-full",onClick:()=>{de(null),me(null)},children:e.jsx(X,{className:"h-3 w-3"})})]}),e.jsxs(i,{htmlFor:"ghost-banner-upload",className:"cursor-pointer",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2 px-6 py-4 border-2 border-dashed border-primary/30 rounded-lg hover:border-primary hover:bg-primary/5 transition-all duration-200",children:[e.jsx(re,{className:"h-6 w-6 text-primary"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-medium text-xs",children:a("admin.uploadImage")}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["21:9 / 16:9 ",a("admin.recommended","æŽ¨è")]})]})]}),e.jsx(p,{id:"ghost-banner-upload",type:"file",accept:"image/*",className:"hidden",onChange:os})]})]})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(we,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"text-sm font-medium",children:a("admin.foodImage","ç¾Žé£Ÿå›¾ç‰‡")})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a("admin.foodImageDesc","æ­¤å›¾ç‰‡å°†æ˜¾ç¤ºåœ¨è¯¦æƒ…é¡µå·¦ä¾§ï¼Œçªå‡ºå±•ç¤ºæ‚¨çš„æ‹›ç‰Œç¾Žé£Ÿ")}),e.jsxs("div",{className:"flex items-start gap-4",children:[Q&&e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:Q,alt:"Food Image Preview",className:"w-32 h-24 object-cover rounded-lg shadow-lg ring-2 ring-primary/20 transition-transform duration-200 group-hover:scale-105"}),e.jsx(R,{type:"button",variant:"destructive",size:"icon",className:"absolute -top-2 -right-2 h-6 w-6 shadow-lg opacity-0 group-hover:opacity-100 transition-opacity rounded-full",onClick:()=>{ne(null),m(null)},children:e.jsx(X,{className:"h-3 w-3"})})]}),e.jsxs(i,{htmlFor:"ghost-cover-image-upload",className:"cursor-pointer",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2 px-6 py-4 border-2 border-dashed border-primary/30 rounded-lg hover:border-primary hover:bg-primary/5 transition-all duration-200",children:[e.jsx(we,{className:"h-6 w-6 text-primary"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-medium text-xs",children:a("admin.uploadImage")}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["16:9 ",a("admin.recommended","æŽ¨è")]})]})]}),e.jsx(p,{id:"ghost-cover-image-upload",type:"file",accept:"image/*",className:"hidden",onChange:qe})]})]})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"text-sm font-medium",children:a("admin.ownerAvatar")})}),e.jsxs("div",{className:"flex items-center gap-4",children:[Z&&e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:Z,alt:"Owner Avatar Preview",className:"w-20 h-20 object-cover rounded-full shadow-lg ring-2 ring-primary/20 transition-transform duration-200 group-hover:scale-105"}),e.jsx(R,{type:"button",variant:"destructive",size:"icon",className:"absolute -top-2 -right-2 h-6 w-6 shadow-lg opacity-0 group-hover:opacity-100 transition-opacity rounded-full",onClick:()=>{B(null),ce(null)},children:e.jsx(X,{className:"h-3 w-3"})})]}),e.jsxs(i,{htmlFor:"owner-avatar-upload",className:"cursor-pointer",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2 px-6 py-4 border-2 border-dashed border-primary/30 rounded-lg hover:border-primary hover:bg-primary/5 transition-all duration-200",children:[e.jsx(Ue,{className:"h-6 w-6 text-primary"}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"font-medium text-xs",children:a("admin.uploadImage")})})]}),e.jsx(p,{id:"owner-avatar-upload",type:"file",accept:"image/*",className:"hidden",onChange:ls})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(i,{className:"text-sm font-medium",children:a("admin.ownerBio")}),e.jsxs(Ve,{defaultValue:"zh",className:"w-full",children:[e.jsxs(Ge,{className:"grid w-full grid-cols-3 mb-4",children:[e.jsx(se,{value:"zh",className:"gap-2 text-xs",children:"ðŸ‡¨ðŸ‡³ ä¸­æ–‡"}),e.jsx(se,{value:"en",className:"gap-2 text-xs",children:"ðŸ‡¬ðŸ‡§ EN"}),e.jsx(se,{value:"pt",className:"gap-2 text-xs",children:"ðŸ‡µðŸ‡¹ PT"})]}),e.jsx(ae,{value:"zh",children:e.jsx(J,{value:Te,onChange:s=>Ze(s.target.value),rows:4,placeholder:a("admin.ownerBioPlaceholder")})}),e.jsx(ae,{value:"en",children:e.jsx(J,{value:Ae,onChange:s=>Ye(s.target.value),rows:4,placeholder:"Share your story, philosophy and culinary passion..."})}),e.jsx(ae,{value:"pt",children:e.jsx(J,{value:Ee,onChange:s=>Je(s.target.value),rows:4,placeholder:"Compartilhe sua histÃ³ria, filosofia e paixÃ£o culinÃ¡ria..."})})]})]})]})}),L!=="ghost"&&e.jsx($,{className:"border-primary/20",children:e.jsxs(M,{className:"p-6 space-y-4",children:[e.jsxs(i,{className:"text-base font-semibold flex items-center gap-2",children:[e.jsx(he,{className:"w-5 h-5 text-primary"}),a("admin.location")]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"lat",className:"text-sm font-medium",children:a("admin.latitude")}),e.jsx(p,{id:"lat",type:"number",step:"any",...P("lat",{valueAsNumber:!0})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"lng",className:"text-sm font-medium",children:a("admin.longitude")}),e.jsx(p,{id:"lng",type:"number",step:"any",...P("lng",{valueAsNumber:!0})})]})]}),e.jsx("div",{ref:pe,className:"h-96 w-full rounded-lg border-2 border-primary/20 shadow-sm",style:{minHeight:"384px"}}),e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[e.jsx(he,{className:"w-4 h-4"}),a("admin.clickOrDragToSetLocation")]})]})}),L!=="ghost"&&e.jsx($,{className:"border-primary/20 overflow-hidden",children:e.jsxs(M,{className:"p-3 md:p-6 space-y-4",children:[e.jsxs(i,{className:"text-base font-semibold flex items-center gap-2",children:[e.jsx(Ts,{className:"w-5 h-5 text-primary"}),a("admin.openingHours")]}),e.jsx("div",{className:"space-y-2",children:Qe.map(s=>e.jsxs("div",{className:"space-y-2 p-2 md:p-3 rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"md:hidden space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(i,{className:"capitalize font-semibold text-sm",children:a(`admin.day.${s}`)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ee,{id:`split-mobile-${s}`,checked:r[s].splitShift,onCheckedChange:n=>I({...r,[s]:{...r[s],splitShift:n}}),disabled:r[s].closed,className:"h-4 w-4"}),e.jsx(i,{htmlFor:`split-mobile-${s}`,className:"cursor-pointer text-xs",children:"åˆ†æ®µ"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ee,{id:`closed-mobile-${s}`,checked:r[s].closed,onCheckedChange:n=>I({...r,[s]:{...r[s],closed:n}}),className:"h-4 w-4"}),e.jsx(i,{htmlFor:`closed-mobile-${s}`,className:"cursor-pointer text-xs",children:a("admin.closed")})]})]})]}),!r[s].closed&&e.jsx("div",{className:"space-y-1.5",children:r[s].splitShift?e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"grid grid-cols-[32px_1fr_12px_1fr] gap-1 items-center",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"åˆé¤"}),e.jsx(p,{type:"time",value:r[s].open,onChange:n=>I({...r,[s]:{...r[s],open:n.target.value}}),className:"h-8 text-xs px-2 min-w-0"}),e.jsx("span",{className:"text-muted-foreground text-xs text-center",children:"-"}),e.jsx(p,{type:"time",value:r[s].close,onChange:n=>I({...r,[s]:{...r[s],close:n.target.value}}),className:"h-8 text-xs px-2 min-w-0"})]}),e.jsxs("div",{className:"grid grid-cols-[32px_1fr_12px_1fr] gap-1 items-center",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"æ™šé¤"}),e.jsx(p,{type:"time",value:r[s].open2||"19:00",onChange:n=>I({...r,[s]:{...r[s],open2:n.target.value}}),className:"h-8 text-xs px-2 min-w-0"}),e.jsx("span",{className:"text-muted-foreground text-xs text-center",children:"-"}),e.jsx(p,{type:"time",value:r[s].close2||"23:00",onChange:n=>I({...r,[s]:{...r[s],close2:n.target.value}}),className:"h-8 text-xs px-2 min-w-0"})]})]}):e.jsxs("div",{className:"grid grid-cols-[1fr_12px_1fr] gap-1 items-center",children:[e.jsx(p,{type:"time",value:r[s].open,onChange:n=>I({...r,[s]:{...r[s],open:n.target.value}}),className:"h-8 text-xs px-2 min-w-0"}),e.jsx("span",{className:"text-muted-foreground text-xs text-center",children:"-"}),e.jsx(p,{type:"time",value:r[s].close,onChange:n=>I({...r,[s]:{...r[s],close:n.target.value}}),className:"h-8 text-xs px-2 min-w-0"})]})})]}),e.jsxs("div",{className:"hidden md:block",children:[e.jsxs("div",{className:"grid grid-cols-[120px_1fr_auto] gap-4 items-center",children:[e.jsx(i,{className:"capitalize font-semibold",children:a(`admin.day.${s}`)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{id:`split-${s}`,checked:r[s].splitShift,onCheckedChange:n=>I({...r,[s]:{...r[s],splitShift:n}}),disabled:r[s].closed}),e.jsx(i,{htmlFor:`split-${s}`,className:"cursor-pointer text-sm",children:"åˆ†æ®µè¥ä¸š"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ee,{id:`closed-${s}`,checked:r[s].closed,onCheckedChange:n=>I({...r,[s]:{...r[s],closed:n}})}),e.jsx(i,{htmlFor:`closed-${s}`,className:"cursor-pointer",children:a("admin.closed")})]})]}),!r[s].closed&&e.jsx("div",{className:"ml-[120px] space-y-2 mt-2",children:r[s].splitShift?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground w-12",children:"åˆé¤"}),e.jsx(p,{type:"time",value:r[s].open,onChange:n=>I({...r,[s]:{...r[s],open:n.target.value}}),className:"w-32"}),e.jsx("span",{className:"text-muted-foreground",children:"-"}),e.jsx(p,{type:"time",value:r[s].close,onChange:n=>I({...r,[s]:{...r[s],close:n.target.value}}),className:"w-32"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground w-12",children:"æ™šé¤"}),e.jsx(p,{type:"time",value:r[s].open2||"19:00",onChange:n=>I({...r,[s]:{...r[s],open2:n.target.value}}),className:"w-32"}),e.jsx("span",{className:"text-muted-foreground",children:"-"}),e.jsx(p,{type:"time",value:r[s].close2||"23:00",onChange:n=>I({...r,[s]:{...r[s],close2:n.target.value}}),className:"w-32"})]})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{type:"time",value:r[s].open,onChange:n=>I({...r,[s]:{...r[s],open:n.target.value}}),className:"w-32"}),e.jsx("span",{className:"text-muted-foreground",children:"-"}),e.jsx(p,{type:"time",value:r[s].close,onChange:n=>I({...r,[s]:{...r[s],close:n.target.value}}),className:"w-32"})]})})]})]},s))})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-2 px-6 py-4 border-t bg-muted/30",children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>N(!1),children:a("common.cancel")}),e.jsxs(R,{type:"submit",disabled:Re,onClick:ze($e),className:"gap-2",children:[e.jsx(be,{className:"w-4 h-4"}),a(Re?"common.saving":"common.save")]})]})]})]})}export{ka as R,ia as u};
//# sourceMappingURL=RestaurantFormDialog-B6DwVHmR.js.map
