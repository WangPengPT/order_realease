import{bw as l,p as u,u as x,q as d,r as y,j as t,aM as j,bR as i}from"./vendor-react-3frukg7q.js";import{B as m}from"./index-BvRf7moB.js";import{P as h}from"./PostCard-B14V1Ry1.js";import{R as f}from"./RecipeDetailContent-DoNPWJAB.js";import v from"./RestaurantComments-BIpiUwkv.js";import{j as N}from"./useCommunityPosts-ByuUJb7u.js";import{P as w}from"./PullToRefresh-CTZs7CRr.js";import"./vendor-i18n-jtdHZIRR.js";import"./vendor-editor-B1vH4T8i.js";import"./vendor-utils-vwQGbBim.js";import"./vendor-supabase-CcYybVOv.js";import"./carousel-N3rBzW8d.js";import"./useLocalizedContent-CqXl0rku.js";import"./TranslateButton-CYRmYCYX.js";import"./ShareDrawer-DnK4aRns.js";import"./drawer-CXpCZsJf.js";import"./separator-DDjVWXuL.js";import"./ImagePreviewModal-CHSx43g3.js";import"./progress-B_VpLi4I.js";import"./ReportDialog-DQxdwgG3.js";import"./input-otp-BSGVw-Cs.js";import"./useSensitiveWords-fx2E6Hzc.js";const J=()=>{const{id:e}=l(),{t:o}=u(),a=x(),s=d(),{data:r,isLoading:n,error:c}=N(e||""),p=y.useCallback(async()=>{s.removeQueries({queryKey:["community-post",e]}),s.removeQueries({queryKey:["comments",e]}),await Promise.all([s.invalidateQueries({queryKey:["community-post",e]}),s.invalidateQueries({queryKey:["comments",e]})])},[s,e]);return n?t.jsx("div",{className:"container max-w-2xl mx-auto py-6 px-4 flex justify-center",children:t.jsx(j,{className:"h-8 w-8 animate-spin"})}):c||!r?t.jsx("div",{className:"container max-w-2xl mx-auto py-6 px-4",children:t.jsxs("div",{className:"text-center py-12",children:[t.jsx("p",{className:"text-muted-foreground",children:o("community.postNotFound","帖子不存在或已被删除")}),t.jsxs(m,{variant:"outline",className:"mt-4",onClick:()=>a("/community"),children:[t.jsx(i,{className:"h-4 w-4 mr-2"}),o("community.backToList","返回社区")]})]})}):t.jsx(w,{onRefresh:p,children:t.jsxs("div",{className:"container max-w-2xl mx-auto py-6 px-4",children:[t.jsxs(m,{variant:"ghost",size:"sm",className:"mb-4",onClick:()=>a("/community"),children:[t.jsx(i,{className:"h-4 w-4 mr-2"}),o("community.backToList","返回社区")]}),r.post_type==="recipe"?t.jsx(f,{post:r}):t.jsx(h,{post:r,showActions:!0,isDetailPage:!0}),t.jsx("div",{className:"mt-6",children:t.jsx(v,{targetId:r.id,targetType:"post"})})]})})};export{J as default};
//# sourceMappingURL=PostDetail-DAzYzQmD.js.map
