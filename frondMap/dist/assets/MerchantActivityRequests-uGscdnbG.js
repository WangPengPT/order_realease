import{j as e}from"./vendor-ui-DmpovMYY.js";import{u as k,a2 as M,L as d,B as t,b0 as f,i as v,x as p,w as L,R as P,m as $,O as T,bW as z,ac as m,b$ as N,ag as B,b1 as H,a$ as F,ah as S,ai as E,aj as J,ak as O,al as U,am as W,an as G,J as l,ar as I}from"./index-CLDmU-vQ.js";import{d as K,e as Q,c as V}from"./useActivityRequests-BoxfpRBP.js";import{u as X,L as i}from"./vendor-react-iAJ0IrSD.js";import{u as Y}from"./useLocalizedContent-BN2IWylL.js";import{u as Z}from"./vendor-i18n-DxKeo2S1.js";import{f as o}from"./format-BAzco20a.js";import"./vendor-charts-Bz7hPIBd.js";import"./vendor-query-D82cqPtt.js";import"./vendor-supabase-6pZ9VDFn.js";import"./startOfDay-RbUOwUVQ.js";const me=()=>{k();const y=X(),{t:a}=Z(),{isMerchant:b,isSupervisor:w,isLoading:h}=M(),{data:x=[],isLoading:C}=K(),{localizeActivity:A}=Y(),r=Q(),D=V();if(!h&&!b&&!w)return y("/"),null;if(C||h)return e.jsx("div",{className:"flex justify-center items-center min-h-[50vh]",children:e.jsx(d,{className:"w-8 h-8 animate-spin text-primary"})});const R=s=>{if(s.status==="approved"&&s.activity_deleted)return e.jsxs(l,{variant:"outline",className:"border-orange-500 text-orange-500 flex items-center gap-1",children:[e.jsx(I,{className:"w-3 h-3"}),a("merchant.activityDeleted")]});switch(s.status){case"approved":return e.jsx(l,{className:"bg-green-500",children:a("merchant.statusApproved")});case"rejected":return e.jsx(l,{variant:"destructive",children:a("merchant.statusRejected")});default:return e.jsx(l,{variant:"secondary",children:a("merchant.statusPending")})}},j=s=>{r.mutate(s)},_=s=>{D.mutate(s)};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:a("merchant.myActivityRequests")}),e.jsx("p",{className:"text-muted-foreground",children:a("merchant.viewManageRequests")})]}),e.jsx(t,{asChild:!0,children:e.jsxs(i,{to:"/merchant/activity-request-form",children:[e.jsx(f,{className:"w-4 h-4 mr-2"}),a("merchant.createRequest")]})})]}),x.length===0?e.jsx(v,{children:e.jsxs(p,{className:"py-12 text-center",children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:a("merchant.noRequests")}),e.jsx(t,{asChild:!0,children:e.jsxs(i,{to:"/merchant/activity-request-form",children:[e.jsx(f,{className:"w-4 h-4 mr-2"}),a("merchant.createRequest")]})})]})}):e.jsx("div",{className:"grid grid-cols-1 gap-6",children:x.map(s=>{const n=A(s),c=s.status==="approved"&&s.activity_deleted,u=s.status==="pending",g=s.status==="rejected";return e.jsxs(v,{className:c?"border-orange-200 bg-orange-50/50 dark:border-orange-900 dark:bg-orange-950/20":"",children:[e.jsx(L,{children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsx(P,{className:"flex-1",children:n.title}),R(s)]})}),e.jsxs(p,{className:"space-y-4",children:[s.image_url&&e.jsx("div",{className:"relative h-48 rounded-lg overflow-hidden",children:e.jsx("img",{src:s.image_url,alt:n.title,className:"w-full h-full object-cover"})}),n.intro&&e.jsx("p",{className:"text-muted-foreground",children:n.intro}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:"w-4 h-4"}),e.jsxs("span",{children:[o(new Date(s.start_date),"yyyy-MM-dd"),s.end_date&&` - ${o(new Date(s.end_date),"yyyy-MM-dd")}`]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{className:"w-4 h-4"}),e.jsxs("span",{children:[a("merchant.submittedAt")," ",o(new Date(s.created_at),"yyyy-MM-dd HH:mm")]})]})]}),s.admin_notes&&e.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium mb-1",children:a("merchant.adminNotes")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.admin_notes})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[s.status==="approved"&&!s.activity_deleted&&s.created_activity_id&&e.jsx(t,{asChild:!0,variant:"outline",className:"flex-1 sm:flex-none",children:e.jsxs(i,{to:`/activity/${s.created_activity_id}`,children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),a("merchant.viewCreatedActivity")]})}),c&&e.jsxs(e.Fragment,{children:[e.jsx(t,{asChild:!0,variant:"outline",className:"flex-1 sm:flex-none",children:e.jsxs(i,{to:`/merchant/activity-request-form?edit=${s.id}`,children:[e.jsx(m,{className:"w-4 h-4 mr-2"}),a("merchant.edit")]})}),e.jsxs(t,{variant:"default",className:"flex-1 sm:flex-none",onClick:()=>j(s.id),disabled:r.isPending,children:[r.isPending?e.jsx(d,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(N,{className:"w-4 h-4 mr-2"}),a("merchant.resubmit")]})]}),u&&e.jsx(t,{asChild:!0,variant:"outline",className:"flex-1 sm:flex-none",children:e.jsxs(i,{to:`/merchant/activity-request-form?edit=${s.id}`,children:[e.jsx(m,{className:"w-4 h-4 mr-2"}),a("merchant.edit")]})}),g&&e.jsxs(e.Fragment,{children:[e.jsx(t,{asChild:!0,variant:"outline",className:"flex-1 sm:flex-none",children:e.jsxs(i,{to:`/merchant/activity-request-form?edit=${s.id}`,children:[e.jsx(m,{className:"w-4 h-4 mr-2"}),a("merchant.edit")]})}),e.jsxs(t,{variant:"default",className:"flex-1 sm:flex-none",onClick:()=>j(s.id),disabled:r.isPending,children:[r.isPending?e.jsx(d,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(N,{className:"w-4 h-4 mr-2"}),a("merchant.resubmit")]})]}),(u||g||c)&&e.jsxs(B,{children:[e.jsx(H,{asChild:!0,children:e.jsx(t,{variant:"destructive",size:"icon",className:"shrink-0",children:e.jsx(F,{className:"w-4 h-4"})})}),e.jsxs(S,{children:[e.jsxs(E,{children:[e.jsx(J,{children:a("merchant.confirmDelete")}),e.jsx(O,{children:a("merchant.confirmDeleteDesc")})]}),e.jsxs(U,{children:[e.jsx(W,{children:a("common.cancel")}),e.jsx(G,{onClick:()=>_(s.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:a("merchant.delete")})]})]})]})]})]})]},s.id)})})]})};export{me as default};
//# sourceMappingURL=MerchantActivityRequests-uGscdnbG.js.map
