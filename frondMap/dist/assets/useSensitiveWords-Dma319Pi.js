import{p as u,i as a,ad as d,ae as c,s as n}from"./index-DVul3rRI.js";const l=()=>u({queryKey:["sensitive-words"],queryFn:async()=>{const{data:e,error:t}=await n.from("sensitive_words").select("*").order("created_at",{ascending:!1});if(t)throw t;return e},staleTime:6e4}),v=()=>{const{data:e}=l();return{checkContent:r=>{if(!e||e.length===0)return{hasSensitive:!1,matchedWords:[]};const s=r.toLowerCase(),i=[];for(const o of e)s.includes(o.word.toLowerCase())&&i.push(o.word);return{hasSensitive:i.length>0,matchedWords:i}},isLoading:!e}},y=()=>{const{toast:e}=a(),t=d();return c({mutationFn:async r=>{const{data:s,error:i}=await n.from("sensitive_words").insert({word:r.trim().toLowerCase()}).select().single();if(i)throw i;return s},onSuccess:()=>{t.invalidateQueries({queryKey:["sensitive-words"]}),e({title:"Success",description:"Sensitive word added successfully"})},onError:r=>{var s;e({title:"Error",description:(s=r.message)!=null&&s.includes("duplicate")?"This word already exists":"Failed to add sensitive word",variant:"destructive"})}})},f=()=>{const{toast:e}=a(),t=d();return c({mutationFn:async({id:r,word:s})=>{const{data:i,error:o}=await n.from("sensitive_words").update({word:s.trim().toLowerCase()}).eq("id",r).select().single();if(o)throw o;return i},onSuccess:()=>{t.invalidateQueries({queryKey:["sensitive-words"]}),e({title:"Success",description:"Sensitive word updated successfully"})},onError:()=>{e({title:"Error",description:"Failed to update sensitive word",variant:"destructive"})}})},m=()=>{const{toast:e}=a(),t=d();return c({mutationFn:async r=>{const{error:s}=await n.from("sensitive_words").delete().eq("id",r);if(s)throw s},onSuccess:()=>{t.invalidateQueries({queryKey:["sensitive-words"]}),e({title:"Success",description:"Sensitive word deleted successfully"})},onError:()=>{e({title:"Error",description:"Failed to delete sensitive word",variant:"destructive"})}})};export{y as a,f as b,m as c,v as d,l as u};
