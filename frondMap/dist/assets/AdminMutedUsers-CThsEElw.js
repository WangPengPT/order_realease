import{u as w,r as o,j as e,C as n,f as i,I as v,B as d,X as b,a1 as C,a2 as U,a3 as k,o as p,aM as M}from"./index-DjxB8hoH.js";import{A as _,y as R}from"./useAdmin-AKXqQ7Zm.js";import{U as S}from"./UserProfileDialog-CIL6XNa6.js";import{V as c}from"./volume-x-A8d5SrpW.js";import{S as I}from"./search-CS9G3xHd.js";import{E as A}from"./eye-jy74Z629.js";import{V as B}from"./volume-2-D8u_KtaZ.js";import{U as D}from"./users-DZUmvgxk.js";import{B as L}from"./briefcase-DJXJb2A9.js";import{f as j}from"./format-0Ztyy0_D.js";import"./separator-TpSFdW8R.js";import"./useLocalizedContent-qVyUbtVE.js";import"./arrow-left-Bbx3pEYs.js";import"./clock-BQoUQVhd.js";import"./heart-CSEpI_yt.js";import"./star-BbfM7Axl.js";import"./external-link-DdhWAFTJ.js";import"./startOfDay-DwrePYsk.js";const se=()=>{const{t:a}=w(),{data:r,isLoading:g}=_(),f=R(),[t,x]=o.useState(""),[l,u]=o.useState({open:!1,userId:"",userName:"",userRole:""}),m=o.useMemo(()=>r?r.filter(s=>{var h;return t===""||s.display_name.toLowerCase().includes(t.toLowerCase())||((h=s.mute_reason)==null?void 0:h.toLowerCase().includes(t.toLowerCase()))}):[],[r,t]),y=s=>{switch(s){case"admin":return"bg-primary text-primary-foreground";case"supervisor":return"bg-blue-500 text-white";case"merchant":return"bg-emerald-500 text-white";default:return"bg-muted text-muted-foreground"}},N=s=>{switch(s){case"admin":case"supervisor":return e.jsx(M,{className:"h-3.5 w-3.5"});case"merchant":return e.jsx(L,{className:"h-3.5 w-3.5"});default:return e.jsx(D,{className:"h-3.5 w-3.5"})}};return g?e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"text-muted-foreground",children:a("common.loading")})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg",children:e.jsx(c,{className:"h-6 w-6 text-yellow-500"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:a("admin.mutedManagement")}),e.jsx("p",{className:"text-muted-foreground",children:a("admin.mutedManagementDesc")})]})]})}),e.jsx(n,{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 border-yellow-200 dark:from-yellow-950/20 dark:to-yellow-900/20 dark:border-yellow-900/30",children:e.jsx(i,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:a("admin.totalMuted")}),e.jsx("p",{className:"text-2xl font-bold",children:(r==null?void 0:r.length)||0})]}),e.jsx(c,{className:"h-8 w-8 text-yellow-500"})]})})}),e.jsx(n,{children:e.jsx(i,{className:"pt-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(I,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(v,{placeholder:a("admin.searchMutedUserPlaceholder"),value:t,onChange:s=>x(s.target.value),className:"pl-10 pr-10"}),t&&e.jsx(d,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-7 w-7 p-0",onClick:()=>x(""),children:e.jsx(b,{className:"h-4 w-4"})})]})})}),m&&m.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:m.map(s=>e.jsx(n,{className:"border-yellow-300 bg-yellow-50/50 dark:bg-yellow-950/20",children:e.jsxs(i,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs(C,{className:"h-12 w-12",children:[e.jsx(U,{src:s.avatar_url,alt:s.display_name}),e.jsx(k,{children:s.display_name.charAt(0).toUpperCase()})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold truncate",children:s.display_name}),e.jsx(p,{variant:"outline",className:"text-xs text-yellow-500 border-yellow-300",children:a("admin.muted")})]}),e.jsxs(p,{className:`${y(s.role)} text-xs mt-1`,children:[N(s.role),e.jsx("span",{className:"ml-1 capitalize",children:s.role})]})]})]}),s.mute_reason&&e.jsxs("div",{className:"mt-3 p-2 bg-yellow-100 dark:bg-yellow-900/30 rounded text-sm",children:[e.jsxs("p",{className:"font-medium text-yellow-700 dark:text-yellow-300",children:[a("admin.muteReason"),":"]}),e.jsx("p",{className:"text-yellow-600 dark:text-yellow-400",children:s.mute_reason})]}),e.jsxs("div",{className:"mt-2 space-y-1 text-xs text-muted-foreground",children:[s.muted_at&&e.jsxs("p",{children:[a("admin.mutedAt"),": ",j(new Date(s.muted_at),"yyyy-MM-dd HH:mm")]}),s.muted_until&&e.jsxs("p",{children:[a("admin.mutedUntil"),": ",j(new Date(s.muted_until),"yyyy-MM-dd HH:mm")]})]}),e.jsxs("div",{className:"flex gap-2 mt-4 pt-3 border-t",children:[e.jsxs(d,{variant:"outline",size:"sm",onClick:()=>u({open:!0,userId:s.id,userName:s.display_name,userRole:s.role}),children:[e.jsx(A,{className:"h-4 w-4 mr-1"}),a("admin.viewProfile")]}),e.jsxs(d,{variant:"outline",size:"sm",className:"text-green-600 border-green-300 hover:bg-green-50",onClick:()=>f.mutate(s.id),children:[e.jsx(B,{className:"h-4 w-4 mr-1"}),a("admin.unmute")]})]})]})},s.id))}):e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(c,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:a(t?"admin.noSearchResults":"admin.noMutedUsers")})]}),e.jsx(S,{open:l.open,onOpenChange:s=>u({...l,open:s}),userId:l.userId,userName:l.userName,userRole:l.userRole})]})};export{se as default};
