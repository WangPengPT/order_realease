{"version":3,"file":"AdminInvitationCodes-etQaJNFP.js","sources":["../../src/components/admin/ReviewInvitationCodeDialog.tsx","../../src/components/admin/InvitationCodeStatsDialog.tsx","../../src/pages/admin/AdminInvitationCodes.tsx"],"sourcesContent":["import { useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogFooter } from \"@/components/ui/dialog\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\r\nimport { Loader2, User, MapPin, FileText, Ticket, Calendar, Users, Check, X, Ban, RotateCcw, Phone } from \"lucide-react\";\r\nimport { useApproveInvitationCode, useRejectInvitationCode, useRevokeInvitationCode } from \"@/hooks/useInvitationCodes\";\r\nimport { format } from \"date-fns\";\r\n\r\ninterface ReviewInvitationCodeDialogProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  invitationCode: any;\r\n}\r\n\r\nexport const ReviewInvitationCodeDialog = ({\r\n  open,\r\n  onOpenChange,\r\n  invitationCode,\r\n}: ReviewInvitationCodeDialogProps) => {\r\n  const { t } = useTranslation();\r\n  const approveMutation = useApproveInvitationCode();\r\n  const rejectMutation = useRejectInvitationCode();\r\n  const revokeMutation = useRevokeInvitationCode();\r\n  const [rejectionReason, setRejectionReason] = useState(\"\");\r\n  const [revokeReason, setRevokeReason] = useState(\"\");\r\n  const [showRejectForm, setShowRejectForm] = useState(false);\r\n  const [showRevokeForm, setShowRevokeForm] = useState(false);\r\n\r\n  if (!invitationCode) return null;\r\n\r\n  const handleApprove = async () => {\r\n    await approveMutation.mutateAsync(invitationCode.id);\r\n    onOpenChange(false);\r\n  };\r\n\r\n  const handleReject = async () => {\r\n    if (!rejectionReason.trim()) return;\r\n    await rejectMutation.mutateAsync({ id: invitationCode.id, reason: rejectionReason });\r\n    onOpenChange(false);\r\n    setRejectionReason(\"\");\r\n    setShowRejectForm(false);\r\n  };\r\n\r\n  const handleRevoke = async () => {\r\n    if (!revokeReason.trim()) return;\r\n    await revokeMutation.mutateAsync({ id: invitationCode.id, reason: revokeReason });\r\n    onOpenChange(false);\r\n    setRevokeReason(\"\");\r\n    setShowRevokeForm(false);\r\n  };\r\n\r\n  const isPending = invitationCode.status === \"pending\";\r\n  const isApproved = invitationCode.status === \"approved\";\r\n  const isLoading = approveMutation.isPending || rejectMutation.isPending || revokeMutation.isPending;\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"sm:max-w-lg\">\r\n        <DialogHeader>\r\n          <DialogTitle className=\"flex items-center gap-2\">\r\n            <Ticket className=\"w-5 h-5 text-primary\" />\r\n            {t(\"admin.invitationCodes.reviewTitle\", \"审核邀请码申请\")}\r\n          </DialogTitle>\r\n          <DialogDescription>\r\n            {t(\"admin.invitationCodes.reviewDesc\", \"查看申请详情并决定是否通过\")}\r\n          </DialogDescription>\r\n        </DialogHeader>\r\n\r\n        <div className=\"space-y-4\">\r\n          {/* Applicant Info */}\r\n          <div className=\"flex items-center gap-4 p-4 bg-muted/50 rounded-lg\">\r\n            <Avatar className=\"w-12 h-12\">\r\n              <AvatarImage src={invitationCode.profiles?.avatar_url} />\r\n              <AvatarFallback>\r\n                {invitationCode.full_name?.charAt(0) || \"U\"}\r\n              </AvatarFallback>\r\n            </Avatar>\r\n            <div className=\"flex-1\">\r\n              <p className=\"font-semibold\">{invitationCode.full_name}</p>\r\n              <p className=\"text-sm text-muted-foreground\">\r\n                {invitationCode.profiles?.display_name}\r\n              </p>\r\n            </div>\r\n            <Badge variant={\r\n              invitationCode.status === \"approved\" ? \"default\" :\r\n              invitationCode.status === \"rejected\" ? \"destructive\" :\r\n              invitationCode.status === \"revoked\" ? \"outline\" : \"secondary\"\r\n            } className={invitationCode.status === \"revoked\" ? \"text-orange-600 border-orange-500\" : \"\"}>\r\n              {invitationCode.status === \"approved\" && t(\"admin.invitationCodes.approved\", \"已通过\")}\r\n              {invitationCode.status === \"rejected\" && t(\"admin.invitationCodes.rejected\", \"已拒绝\")}\r\n              {invitationCode.status === \"pending\" && t(\"admin.invitationCodes.pending\", \"待审核\")}\r\n              {invitationCode.status === \"revoked\" && t(\"admin.invitationCodes.revoked\", \"已收回\")}\r\n            </Badge>\r\n          </div>\r\n\r\n          <Separator />\r\n\r\n          {/* Application Details */}\r\n          <div className=\"space-y-3\">\r\n            <div className=\"flex items-start gap-3\">\r\n              <FileText className=\"w-4 h-4 text-muted-foreground mt-1\" />\r\n              <div className=\"flex-1\">\r\n                <p className=\"text-sm font-medium\">{t(\"admin.invitationCodes.nif\", \"NIF\")}</p>\r\n                <p className=\"text-sm text-muted-foreground\">{invitationCode.nif}</p>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex items-start gap-3\">\r\n              <Phone className=\"w-4 h-4 text-muted-foreground mt-1\" />\r\n              <div className=\"flex-1\">\r\n                <p className=\"text-sm font-medium\">{t(\"admin.invitationCodes.contact\", \"联系方式\")}</p>\r\n                <p className=\"text-sm text-muted-foreground\">{invitationCode.contact || \"-\"}</p>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex items-start gap-3\">\r\n              <MapPin className=\"w-4 h-4 text-muted-foreground mt-1\" />\r\n              <div className=\"flex-1\">\r\n                <p className=\"text-sm font-medium\">{t(\"admin.invitationCodes.address\", \"地址\")}</p>\r\n                <p className=\"text-sm text-muted-foreground\">{invitationCode.address}</p>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex items-start gap-3\">\r\n              <Ticket className=\"w-4 h-4 text-muted-foreground mt-1\" />\r\n              <div className=\"flex-1\">\r\n                <p className=\"text-sm font-medium\">{t(\"admin.invitationCodes.code\", \"邀请码\")}</p>\r\n                <code className=\"text-sm font-mono bg-primary/10 text-primary px-2 py-1 rounded\">\r\n                  {invitationCode.code}\r\n                </code>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex items-start gap-3\">\r\n              <Calendar className=\"w-4 h-4 text-muted-foreground mt-1\" />\r\n              <div className=\"flex-1\">\r\n                <p className=\"text-sm font-medium\">{t(\"admin.invitationCodes.createdAt\", \"申请时间\")}</p>\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                  {format(new Date(invitationCode.created_at), \"yyyy-MM-dd HH:mm:ss\")}\r\n                </p>\r\n              </div>\r\n            </div>\r\n\r\n            {invitationCode.status === \"approved\" && (\r\n              <div className=\"flex items-start gap-3\">\r\n                <Users className=\"w-4 h-4 text-muted-foreground mt-1\" />\r\n                <div className=\"flex-1\">\r\n                  <p className=\"text-sm font-medium\">{t(\"admin.invitationCodes.usageCount\", \"使用次数\")}</p>\r\n                  <p className=\"text-sm text-muted-foreground\">{invitationCode.usage_count}</p>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {invitationCode.rejection_reason && invitationCode.status === \"rejected\" && (\r\n              <div className=\"p-3 bg-destructive/10 rounded-lg\">\r\n                <p className=\"text-sm font-medium text-destructive\">\r\n                  {t(\"admin.invitationCodes.rejectionReason\", \"拒绝原因\")}\r\n                </p>\r\n                <p className=\"text-sm text-muted-foreground mt-1\">\r\n                  {invitationCode.rejection_reason}\r\n                </p>\r\n              </div>\r\n            )}\r\n\r\n            {invitationCode.rejection_reason && invitationCode.status === \"revoked\" && (\r\n              <div className=\"p-3 bg-orange-500/10 rounded-lg\">\r\n                <p className=\"text-sm font-medium text-orange-600\">\r\n                  {t(\"admin.invitationCodes.revokeReason\", \"收回原因\")}\r\n                </p>\r\n                <p className=\"text-sm text-muted-foreground mt-1\">\r\n                  {invitationCode.rejection_reason}\r\n                </p>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Reject Form */}\r\n          {showRejectForm && (\r\n            <div className=\"space-y-2 p-4 border rounded-lg bg-destructive/5\">\r\n              <Label>{t(\"admin.invitationCodes.rejectionReason\", \"拒绝原因\")}</Label>\r\n              <Textarea\r\n                value={rejectionReason}\r\n                onChange={(e) => setRejectionReason(e.target.value)}\r\n                placeholder={t(\"admin.invitationCodes.rejectionReasonPlaceholder\", \"请输入拒绝原因...\")}\r\n                className=\"resize-none\"\r\n                rows={3}\r\n              />\r\n            </div>\r\n          )}\r\n\r\n          {/* Revoke Form */}\r\n          {showRevokeForm && (\r\n            <div className=\"space-y-2 p-4 border rounded-lg bg-orange-500/5 border-orange-200\">\r\n              <Label className=\"text-orange-600\">{t(\"admin.invitationCodes.revokeReason\", \"收回原因\")}</Label>\r\n              <Textarea\r\n                value={revokeReason}\r\n                onChange={(e) => setRevokeReason(e.target.value)}\r\n                placeholder={t(\"admin.invitationCodes.revokeReasonPlaceholder\", \"请输入收回原因...\")}\r\n                className=\"resize-none\"\r\n                rows={3}\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {isPending && !showRevokeForm && (\r\n          <DialogFooter className=\"gap-2 sm:gap-0\">\r\n            {!showRejectForm ? (\r\n              <>\r\n                <Button\r\n                  variant=\"outline\"\r\n                  onClick={() => setShowRejectForm(true)}\r\n                  disabled={isLoading}\r\n                >\r\n                  <X className=\"w-4 h-4 mr-2\" />\r\n                  {t(\"admin.invitationCodes.reject\", \"拒绝\")}\r\n                </Button>\r\n                <Button\r\n                  onClick={handleApprove}\r\n                  disabled={isLoading}\r\n                  className=\"bg-green-600 hover:bg-green-700\"\r\n                >\r\n                  {isLoading && <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />}\r\n                  <Check className=\"w-4 h-4 mr-2\" />\r\n                  {t(\"admin.invitationCodes.approve\", \"通过\")}\r\n                </Button>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <Button\r\n                  variant=\"outline\"\r\n                  onClick={() => {\r\n                    setShowRejectForm(false);\r\n                    setRejectionReason(\"\");\r\n                  }}\r\n                  disabled={isLoading}\r\n                >\r\n                  {t(\"common.cancel\", \"取消\")}\r\n                </Button>\r\n                <Button\r\n                  variant=\"destructive\"\r\n                  onClick={handleReject}\r\n                  disabled={isLoading || !rejectionReason.trim()}\r\n                >\r\n                  {isLoading && <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />}\r\n                  {t(\"admin.invitationCodes.confirmReject\", \"确认拒绝\")}\r\n                </Button>\r\n              </>\r\n            )}\r\n          </DialogFooter>\r\n        )}\r\n\r\n        {isApproved && (\r\n          <DialogFooter className=\"gap-2 sm:gap-0\">\r\n            {!showRevokeForm ? (\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={() => setShowRevokeForm(true)}\r\n                className=\"text-orange-600 border-orange-300 hover:bg-orange-50\"\r\n              >\r\n                <RotateCcw className=\"w-4 h-4 mr-2\" />\r\n                {t(\"admin.invitationCodes.revoke\", \"收回邀请码\")}\r\n              </Button>\r\n            ) : (\r\n              <>\r\n                <Button\r\n                  variant=\"outline\"\r\n                  onClick={() => {\r\n                    setShowRevokeForm(false);\r\n                    setRevokeReason(\"\");\r\n                  }}\r\n                  disabled={isLoading}\r\n                >\r\n                  {t(\"common.cancel\", \"取消\")}\r\n                </Button>\r\n                <Button\r\n                  variant=\"default\"\r\n                  className=\"bg-orange-600 hover:bg-orange-700\"\r\n                  onClick={handleRevoke}\r\n                  disabled={isLoading || !revokeReason.trim()}\r\n                >\r\n                  {isLoading && <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />}\r\n                  <Ban className=\"w-4 h-4 mr-2\" />\r\n                  {t(\"admin.invitationCodes.confirmRevoke\", \"确认收回\")}\r\n                </Button>\r\n              </>\r\n            )}\r\n          </DialogFooter>\r\n        )}\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default ReviewInvitationCodeDialog;\r\n","import { useTranslation } from \"react-i18next\";\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\r\nimport { Skeleton } from \"@/components/ui/skeleton\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\r\nimport { \r\n  BarChart3, \r\n  Users, \r\n  CheckCircle, \r\n  Clock, \r\n  TrendingUp,\r\n  Building2,\r\n  UserCheck\r\n} from \"lucide-react\";\r\nimport { useInvitationCodeUsageDetails } from \"@/hooks/useInvitationCodes\";\r\nimport { format } from \"date-fns\";\r\n\r\ninterface InvitationCodeStatsDialogProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  invitationCode: string | null;\r\n  codeOwner?: string;\r\n}\r\n\r\nexport const InvitationCodeStatsDialog = ({\r\n  open,\r\n  onOpenChange,\r\n  invitationCode,\r\n  codeOwner,\r\n}: InvitationCodeStatsDialogProps) => {\r\n  const { t } = useTranslation();\r\n  const { data, isLoading } = useInvitationCodeUsageDetails(open ? invitationCode : null);\r\n\r\n  const getStatusBadge = (status: string) => {\r\n    switch (status) {\r\n      case \"completed\":\r\n        return (\r\n          <Badge variant=\"outline\" className=\"text-green-600 border-green-500 bg-green-50 dark:bg-green-950/30\">\r\n            <CheckCircle className=\"w-3 h-3 mr-1\" />\r\n            {t(\"admin.invitationCodes.stats.completed\", \"已完成\")}\r\n          </Badge>\r\n        );\r\n      case \"pending\":\r\n      case \"received\":\r\n        return (\r\n          <Badge variant=\"outline\" className=\"text-yellow-600 border-yellow-500 bg-yellow-50 dark:bg-yellow-950/30\">\r\n            <Clock className=\"w-3 h-3 mr-1\" />\r\n            {t(\"admin.invitationCodes.stats.pending\", \"进行中\")}\r\n          </Badge>\r\n        );\r\n      default:\r\n        return (\r\n          <Badge variant=\"secondary\">{status}</Badge>\r\n        );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"sm:max-w-2xl max-h-[85vh]\">\r\n        <DialogHeader>\r\n          <DialogTitle className=\"flex items-center gap-2\">\r\n            <BarChart3 className=\"w-5 h-5 text-primary\" />\r\n            {t(\"admin.invitationCodes.statsTitle\", \"邀请码统计详情\")}\r\n          </DialogTitle>\r\n          {invitationCode && (\r\n            <div className=\"flex items-center gap-2 mt-2\">\r\n              <code className=\"px-2 py-1 bg-primary/10 text-primary rounded font-mono text-sm\">\r\n                {invitationCode}\r\n              </code>\r\n              {codeOwner && (\r\n                <span className=\"text-sm text-muted-foreground\">\r\n                  {t(\"admin.invitationCodes.stats.owner\", \"所有者\")}: {codeOwner}\r\n                </span>\r\n              )}\r\n            </div>\r\n          )}\r\n        </DialogHeader>\r\n\r\n        <ScrollArea className=\"max-h-[calc(85vh-120px)]\">\r\n          {isLoading ? (\r\n            <div className=\"space-y-4 p-4\">\r\n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\r\n                {[1, 2, 3, 4].map((i) => (\r\n                  <Skeleton key={i} className=\"h-20\" />\r\n                ))}\r\n              </div>\r\n              <Skeleton className=\"h-32\" />\r\n              <Skeleton className=\"h-32\" />\r\n            </div>\r\n          ) : data ? (\r\n            <div className=\"space-y-6 p-1\">\r\n              {/* Stats Cards */}\r\n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\r\n                <Card>\r\n                  <CardContent className=\"pt-4 pb-3\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <div className=\"p-1.5 rounded-lg bg-primary/10\">\r\n                        <Users className=\"w-4 h-4 text-primary\" />\r\n                      </div>\r\n                      <div>\r\n                        <p className=\"text-xl font-bold\">{data.stats.totalUsed}</p>\r\n                        <p className=\"text-xs text-muted-foreground\">\r\n                          {t(\"admin.invitationCodes.stats.totalUsed\", \"总使用次数\")}\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                  </CardContent>\r\n                </Card>\r\n\r\n                <Card>\r\n                  <CardContent className=\"pt-4 pb-3\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <div className=\"p-1.5 rounded-lg bg-green-500/10\">\r\n                        <CheckCircle className=\"w-4 h-4 text-green-500\" />\r\n                      </div>\r\n                      <div>\r\n                        <p className=\"text-xl font-bold\">{data.stats.completedJoinRequests}</p>\r\n                        <p className=\"text-xs text-muted-foreground\">\r\n                          {t(\"admin.invitationCodes.stats.completed\", \"已完成\")}\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                  </CardContent>\r\n                </Card>\r\n\r\n                <Card>\r\n                  <CardContent className=\"pt-4 pb-3\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <div className=\"p-1.5 rounded-lg bg-yellow-500/10\">\r\n                        <Clock className=\"w-4 h-4 text-yellow-500\" />\r\n                      </div>\r\n                      <div>\r\n                        <p className=\"text-xl font-bold\">{data.stats.pendingJoinRequests}</p>\r\n                        <p className=\"text-xs text-muted-foreground\">\r\n                          {t(\"admin.invitationCodes.stats.inProgress\", \"进行中\")}\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                  </CardContent>\r\n                </Card>\r\n\r\n                <Card>\r\n                  <CardContent className=\"pt-4 pb-3\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <div className=\"p-1.5 rounded-lg bg-blue-500/10\">\r\n                        <TrendingUp className=\"w-4 h-4 text-blue-500\" />\r\n                      </div>\r\n                      <div>\r\n                        <p className=\"text-xl font-bold\">{data.stats.successRate}%</p>\r\n                        <p className=\"text-xs text-muted-foreground\">\r\n                          {t(\"admin.invitationCodes.stats.successRate\", \"成功率\")}\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                  </CardContent>\r\n                </Card>\r\n              </div>\r\n\r\n              {/* Join Requests List */}\r\n              <div>\r\n                <h3 className=\"text-sm font-semibold flex items-center gap-2 mb-3\">\r\n                  <Building2 className=\"w-4 h-4\" />\r\n                  {t(\"admin.invitationCodes.stats.joinRequests\", \"商家加入申请\")}\r\n                  <Badge variant=\"secondary\" className=\"ml-auto\">\r\n                    {data.joinRequests.length}\r\n                  </Badge>\r\n                </h3>\r\n                {data.joinRequests.length === 0 ? (\r\n                  <div className=\"text-sm text-muted-foreground text-center py-6 bg-muted/30 rounded-lg\">\r\n                    {t(\"admin.invitationCodes.stats.noJoinRequests\", \"暂无使用此邀请码的商家申请\")}\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"space-y-2\">\r\n                    {data.joinRequests.map((request: any) => (\r\n                      <div \r\n                        key={request.id}\r\n                        className=\"flex items-center justify-between p-3 bg-muted/30 rounded-lg\"\r\n                      >\r\n                        <div className=\"flex-1 min-w-0\">\r\n                          <p className=\"font-medium truncate\">{request.restaurant_name}</p>\r\n                          <p className=\"text-xs text-muted-foreground truncate\">\r\n                            {request.name} • {request.email}\r\n                          </p>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-3 ml-2\">\r\n                          <span className=\"text-xs text-muted-foreground hidden sm:block\">\r\n                            {format(new Date(request.created_at), \"yyyy-MM-dd\")}\r\n                          </span>\r\n                          {getStatusBadge(request.status)}\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              <Separator />\r\n\r\n              {/* Registered Users List */}\r\n              <div>\r\n                <h3 className=\"text-sm font-semibold flex items-center gap-2 mb-3\">\r\n                  <UserCheck className=\"w-4 h-4\" />\r\n                  {t(\"admin.invitationCodes.stats.registeredUsers\", \"已注册用户\")}\r\n                  <Badge variant=\"secondary\" className=\"ml-auto\">\r\n                    {data.invitedUsers.length}\r\n                  </Badge>\r\n                </h3>\r\n                {data.invitedUsers.length === 0 ? (\r\n                  <div className=\"text-sm text-muted-foreground text-center py-6 bg-muted/30 rounded-lg\">\r\n                    {t(\"admin.invitationCodes.stats.noUsers\", \"暂无使用此邀请码注册的用户\")}\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"space-y-2\">\r\n                    {data.invitedUsers.map((user: any) => (\r\n                      <div \r\n                        key={user.id}\r\n                        className=\"flex items-center gap-3 p-3 bg-muted/30 rounded-lg\"\r\n                      >\r\n                        <Avatar className=\"w-8 h-8\">\r\n                          <AvatarImage src={user.avatar_url} />\r\n                          <AvatarFallback>\r\n                            {user.display_name?.charAt(0) || \"U\"}\r\n                          </AvatarFallback>\r\n                        </Avatar>\r\n                        <div className=\"flex-1 min-w-0\">\r\n                          <p className=\"font-medium truncate\">{user.display_name}</p>\r\n                          <p className=\"text-xs text-muted-foreground\">\r\n                            {t(\"admin.invitationCodes.stats.registeredAt\", \"注册时间\")}: {\" \"}\r\n                            {format(new Date(user.invited_at || user.created_at), \"yyyy-MM-dd HH:mm\")}\r\n                          </p>\r\n                        </div>\r\n                        <Badge variant=\"outline\" className=\"text-green-600 border-green-500\">\r\n                          <CheckCircle className=\"w-3 h-3 mr-1\" />\r\n                          {t(\"admin.invitationCodes.stats.registered\", \"已注册\")}\r\n                        </Badge>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"text-center py-8 text-muted-foreground\">\r\n              {t(\"admin.invitationCodes.stats.noData\", \"暂无数据\")}\r\n            </div>\r\n          )}\r\n        </ScrollArea>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default InvitationCodeStatsDialog;\r\n","import { useState, useMemo } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Skeleton } from \"@/components/ui/skeleton\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\nimport { Search, UserPlus, Clock, CheckCircle, XCircle, Users, Eye, Check, X, BarChart3, TrendingUp, RotateCcw, Ban, Phone } from \"lucide-react\";\r\nimport { useAdminInvitationCodes, useInvitationCodeStats, useApproveInvitationCode, useRejectInvitationCode, useInvitationCodePerformanceStats, useRevokeInvitationCode } from \"@/hooks/useInvitationCodes\";\r\nimport { ReviewInvitationCodeDialog } from \"@/components/admin/ReviewInvitationCodeDialog\";\r\nimport { InvitationCodeStatsDialog } from \"@/components/admin/InvitationCodeStatsDialog\";\r\nimport { format } from \"date-fns\";\r\n\r\nconst AdminInvitationCodes = () => {\r\n  const { t } = useTranslation();\r\n  const { data: invitationCodes, isLoading } = useAdminInvitationCodes();\r\n  const { data: stats, isLoading: statsLoading } = useInvitationCodeStats();\r\n  const { data: performanceStats, isLoading: performanceLoading } = useInvitationCodePerformanceStats();\r\n  const approveMutation = useApproveInvitationCode();\r\n  const rejectMutation = useRejectInvitationCode();\r\n  const revokeMutation = useRevokeInvitationCode();\r\n\r\n  const [search, setSearch] = useState(\"\");\r\n  const [statusFilter, setStatusFilter] = useState<string>(\"all\");\r\n  const [selectedCode, setSelectedCode] = useState<any>(null);\r\n  const [reviewDialogOpen, setReviewDialogOpen] = useState(false);\r\n  const [statsDialogOpen, setStatsDialogOpen] = useState(false);\r\n  const [statsDialogCode, setStatsDialogCode] = useState<string | null>(null);\r\n  const [statsDialogOwner, setStatsDialogOwner] = useState<string | undefined>(undefined);\r\n\r\n  const filteredCodes = useMemo(() => {\r\n    if (!invitationCodes) return [];\r\n    \r\n    return invitationCodes.filter(code => {\r\n      const matchesSearch = \r\n        code.code.toLowerCase().includes(search.toLowerCase()) ||\r\n        code.full_name.toLowerCase().includes(search.toLowerCase()) ||\r\n        code.nif.toLowerCase().includes(search.toLowerCase()) ||\r\n        (code.contact || \"\").toLowerCase().includes(search.toLowerCase()) ||\r\n        (code.profiles as any)?.display_name?.toLowerCase().includes(search.toLowerCase());\r\n      \r\n      const matchesStatus = statusFilter === \"all\" || code.status === statusFilter;\r\n      \r\n      return matchesSearch && matchesStatus;\r\n    });\r\n  }, [invitationCodes, search, statusFilter]);\r\n\r\n  const handleQuickApprove = async (id: string) => {\r\n    await approveMutation.mutateAsync(id);\r\n  };\r\n\r\n  const handleViewDetails = (code: any) => {\r\n    setSelectedCode(code);\r\n    setReviewDialogOpen(true);\r\n  };\r\n\r\n  const handleViewStats = (code: any) => {\r\n    setStatsDialogCode(code.code);\r\n    setStatsDialogOwner(code.full_name);\r\n    setStatsDialogOpen(true);\r\n  };\r\n\r\n  const getStatusBadge = (status: string) => {\r\n    switch (status) {\r\n      case \"pending\":\r\n        return (\r\n          <Badge variant=\"outline\" className=\"text-yellow-600 border-yellow-500 bg-yellow-50 dark:bg-yellow-950/30\">\r\n            <Clock className=\"w-3 h-3 mr-1\" />\r\n            {t(\"admin.invitationCodes.pending\", \"待审核\")}\r\n          </Badge>\r\n        );\r\n      case \"approved\":\r\n        return (\r\n          <Badge variant=\"outline\" className=\"text-green-600 border-green-500 bg-green-50 dark:bg-green-950/30\">\r\n            <CheckCircle className=\"w-3 h-3 mr-1\" />\r\n            {t(\"admin.invitationCodes.approved\", \"已通过\")}\r\n          </Badge>\r\n        );\r\n      case \"rejected\":\r\n        return (\r\n          <Badge variant=\"outline\" className=\"text-red-600 border-red-500 bg-red-50 dark:bg-red-950/30\">\r\n            <XCircle className=\"w-3 h-3 mr-1\" />\r\n            {t(\"admin.invitationCodes.rejected\", \"已拒绝\")}\r\n          </Badge>\r\n        );\r\n      case \"revoked\":\r\n        return (\r\n          <Badge variant=\"outline\" className=\"text-orange-600 border-orange-500 bg-orange-50 dark:bg-orange-950/30\">\r\n            <Ban className=\"w-3 h-3 mr-1\" />\r\n            {t(\"admin.invitationCodes.revoked\", \"已收回\")}\r\n          </Badge>\r\n        );\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-4 md:p-6 space-y-6\">\r\n      {/* Header */}\r\n      <div>\r\n        <h1 className=\"text-2xl font-bold flex items-center gap-2\">\r\n          <UserPlus className=\"w-6 h-6 text-primary\" />\r\n          {t(\"admin.invitationCodes.title\", \"邀请码管理\")}\r\n        </h1>\r\n        <p className=\"text-muted-foreground mt-1\">\r\n          {t(\"admin.invitationCodes.description\", \"审核用户的邀请码申请，管理邀请码使用情况\")}\r\n        </p>\r\n      </div>\r\n\r\n      {/* Stats Cards - Application Stats */}\r\n      <div className=\"grid grid-cols-2 md:grid-cols-5 gap-4\">\r\n        <Card>\r\n          <CardContent className=\"pt-6\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"p-2 rounded-lg bg-primary/10\">\r\n                <UserPlus className=\"w-5 h-5 text-primary\" />\r\n              </div>\r\n              <div>\r\n                <p className=\"text-2xl font-bold\">\r\n                  {statsLoading ? <Skeleton className=\"h-8 w-12\" /> : stats?.total || 0}\r\n                </p>\r\n                <p className=\"text-xs text-muted-foreground\">\r\n                  {t(\"admin.invitationCodes.totalApplications\", \"总申请数\")}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card>\r\n          <CardContent className=\"pt-6\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"p-2 rounded-lg bg-yellow-500/10\">\r\n                <Clock className=\"w-5 h-5 text-yellow-500\" />\r\n              </div>\r\n              <div>\r\n                <p className=\"text-2xl font-bold\">\r\n                  {statsLoading ? <Skeleton className=\"h-8 w-12\" /> : stats?.pending || 0}\r\n                </p>\r\n                <p className=\"text-xs text-muted-foreground\">\r\n                  {t(\"admin.invitationCodes.pendingReview\", \"待审核\")}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card>\r\n          <CardContent className=\"pt-6\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"p-2 rounded-lg bg-green-500/10\">\r\n                <CheckCircle className=\"w-5 h-5 text-green-500\" />\r\n              </div>\r\n              <div>\r\n                <p className=\"text-2xl font-bold\">\r\n                  {statsLoading ? <Skeleton className=\"h-8 w-12\" /> : stats?.approved || 0}\r\n                </p>\r\n                <p className=\"text-xs text-muted-foreground\">\r\n                  {t(\"admin.invitationCodes.approvedCount\", \"已通过\")}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card>\r\n          <CardContent className=\"pt-6\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"p-2 rounded-lg bg-red-500/10\">\r\n                <XCircle className=\"w-5 h-5 text-red-500\" />\r\n              </div>\r\n              <div>\r\n                <p className=\"text-2xl font-bold\">\r\n                  {statsLoading ? <Skeleton className=\"h-8 w-12\" /> : stats?.rejected || 0}\r\n                </p>\r\n                <p className=\"text-xs text-muted-foreground\">\r\n                  {t(\"admin.invitationCodes.rejectedCount\", \"已拒绝\")}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card>\r\n          <CardContent className=\"pt-6\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"p-2 rounded-lg bg-orange-500/10\">\r\n                <Ban className=\"w-5 h-5 text-orange-500\" />\r\n              </div>\r\n              <div>\r\n                <p className=\"text-2xl font-bold\">\r\n                  {statsLoading ? <Skeleton className=\"h-8 w-12\" /> : stats?.revoked || 0}\r\n                </p>\r\n                <p className=\"text-xs text-muted-foreground\">\r\n                  {t(\"admin.invitationCodes.revokedCount\", \"已收回\")}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Performance Stats */}\r\n      <Card>\r\n        <CardHeader className=\"pb-3\">\r\n          <CardTitle className=\"text-base flex items-center gap-2\">\r\n            <BarChart3 className=\"w-4 h-4 text-primary\" />\r\n            {t(\"admin.invitationCodes.performanceStats\", \"邀请码效果统计\")}\r\n          </CardTitle>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n            <div className=\"text-center p-3 bg-muted/50 rounded-lg\">\r\n              <p className=\"text-2xl font-bold text-primary\">\r\n                {performanceLoading ? <Skeleton className=\"h-8 w-12 mx-auto\" /> : performanceStats?.totalUsage || 0}\r\n              </p>\r\n              <p className=\"text-xs text-muted-foreground mt-1\">\r\n                {t(\"admin.invitationCodes.stats.totalUsage\", \"总使用次数\")}\r\n              </p>\r\n            </div>\r\n            <div className=\"text-center p-3 bg-muted/50 rounded-lg\">\r\n              <p className=\"text-2xl font-bold text-green-600\">\r\n                {performanceLoading ? <Skeleton className=\"h-8 w-12 mx-auto\" /> : performanceStats?.activeCodesCount || 0}\r\n              </p>\r\n              <p className=\"text-xs text-muted-foreground mt-1\">\r\n                {t(\"admin.invitationCodes.stats.activeCodes\", \"有效使用码\")}\r\n              </p>\r\n            </div>\r\n            <div className=\"text-center p-3 bg-muted/50 rounded-lg\">\r\n              <p className=\"text-2xl font-bold text-blue-600\">\r\n                {performanceLoading ? <Skeleton className=\"h-8 w-12 mx-auto\" /> : performanceStats?.completedJoinRequests || 0}\r\n              </p>\r\n              <p className=\"text-xs text-muted-foreground mt-1\">\r\n                {t(\"admin.invitationCodes.stats.successfulInvites\", \"成功邀请\")}\r\n              </p>\r\n            </div>\r\n            <div className=\"text-center p-3 bg-muted/50 rounded-lg\">\r\n              <div className=\"flex items-center justify-center gap-1\">\r\n                <TrendingUp className=\"w-4 h-4 text-green-500\" />\r\n                <p className=\"text-2xl font-bold text-green-600\">\r\n                  {performanceLoading ? <Skeleton className=\"h-8 w-12\" /> : `${performanceStats?.overallSuccessRate || 0}%`}\r\n                </p>\r\n              </div>\r\n              <p className=\"text-xs text-muted-foreground mt-1\">\r\n                {t(\"admin.invitationCodes.stats.overallSuccessRate\", \"整体成功率\")}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Filters */}\r\n      <Card>\r\n        <CardContent className=\"pt-6\">\r\n          <div className=\"flex flex-col md:flex-row gap-4\">\r\n            <div className=\"relative flex-1\">\r\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4\" />\r\n              <Input\r\n                placeholder={t(\"admin.invitationCodes.searchPlaceholder\", \"搜索邀请码、姓名、NIF...\")}\r\n                value={search}\r\n                onChange={(e) => setSearch(e.target.value)}\r\n                className=\"pl-10\"\r\n              />\r\n            </div>\r\n            <Select value={statusFilter} onValueChange={setStatusFilter}>\r\n              <SelectTrigger className=\"w-full md:w-40\">\r\n                <SelectValue />\r\n              </SelectTrigger>\r\n              <SelectContent>\r\n                <SelectItem value=\"all\">{t(\"common.all\", \"全部\")}</SelectItem>\r\n                <SelectItem value=\"pending\">{t(\"admin.invitationCodes.pending\", \"待审核\")}</SelectItem>\r\n                <SelectItem value=\"approved\">{t(\"admin.invitationCodes.approved\", \"已通过\")}</SelectItem>\r\n                <SelectItem value=\"rejected\">{t(\"admin.invitationCodes.rejected\", \"已拒绝\")}</SelectItem>\r\n                <SelectItem value=\"revoked\">{t(\"admin.invitationCodes.revoked\", \"已收回\")}</SelectItem>\r\n              </SelectContent>\r\n            </Select>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Table */}\r\n      <Card>\r\n        <CardContent className=\"p-0\">\r\n          {isLoading ? (\r\n            <div className=\"p-6 space-y-4\">\r\n              {[1, 2, 3].map((i) => (\r\n                <Skeleton key={i} className=\"h-16 w-full\" />\r\n              ))}\r\n            </div>\r\n          ) : filteredCodes.length === 0 ? (\r\n            <div className=\"p-12 text-center\">\r\n              <UserPlus className=\"w-12 h-12 text-muted-foreground mx-auto mb-4\" />\r\n              <p className=\"text-muted-foreground\">\r\n                {t(\"admin.invitationCodes.noResults\", \"没有找到邀请码申请\")}\r\n              </p>\r\n            </div>\r\n          ) : (\r\n            <Table>\r\n              <TableHeader>\r\n                <TableRow>\r\n                  <TableHead>{t(\"admin.invitationCodes.applicant\", \"申请人\")}</TableHead>\r\n                  <TableHead>{t(\"admin.invitationCodes.code\", \"邀请码\")}</TableHead>\r\n                  <TableHead>{t(\"admin.invitationCodes.nif\", \"NIF\")}</TableHead>\r\n                  <TableHead>{t(\"admin.invitationCodes.contact\", \"联系方式\")}</TableHead>\r\n                  <TableHead>{t(\"admin.invitationCodes.status\", \"状态\")}</TableHead>\r\n                  <TableHead>{t(\"admin.invitationCodes.usageCount\", \"使用次数\")}</TableHead>\r\n                  <TableHead>{t(\"admin.invitationCodes.createdAt\", \"申请时间\")}</TableHead>\r\n                  <TableHead className=\"text-right\">{t(\"common.actions\", \"操作\")}</TableHead>\r\n                </TableRow>\r\n              </TableHeader>\r\n              <TableBody>\r\n                {filteredCodes.map((code) => (\r\n                  <TableRow key={code.id}>\r\n                    <TableCell>\r\n                      <div className=\"flex items-center gap-3\">\r\n                        <Avatar className=\"w-8 h-8\">\r\n                          <AvatarImage src={(code.profiles as any)?.avatar_url} />\r\n                          <AvatarFallback>\r\n                            {code.full_name?.charAt(0) || \"U\"}\r\n                          </AvatarFallback>\r\n                        </Avatar>\r\n                        <div>\r\n                          <p className=\"font-medium\">{code.full_name}</p>\r\n                          <p className=\"text-xs text-muted-foreground\">\r\n                            {(code.profiles as any)?.display_name}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <code className=\"px-2 py-1 bg-muted rounded text-sm font-mono\">\r\n                        {code.code}\r\n                      </code>\r\n                    </TableCell>\r\n                    <TableCell>{code.nif}</TableCell>\r\n                    <TableCell>\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <Phone className=\"w-3 h-3 text-muted-foreground\" />\r\n                        <span className=\"text-sm\">{code.contact || \"-\"}</span>\r\n                      </div>\r\n                    </TableCell>\r\n                    <TableCell>{getStatusBadge(code.status)}</TableCell>\r\n                    <TableCell>\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"sm\"\r\n                        className=\"h-auto p-1 gap-1\"\r\n                        onClick={() => handleViewStats(code)}\r\n                        disabled={code.status !== \"approved\"}\r\n                      >\r\n                        <Users className=\"w-4 h-4 text-muted-foreground\" />\r\n                        <span>{code.usage_count}</span>\r\n                        {code.status === \"approved\" && (\r\n                          <BarChart3 className=\"w-3 h-3 text-primary ml-1\" />\r\n                        )}\r\n                      </Button>\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      {format(new Date(code.created_at), \"yyyy-MM-dd HH:mm\")}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <div className=\"flex items-center justify-end gap-2\">\r\n                        <Button\r\n                          variant=\"ghost\"\r\n                          size=\"icon\"\r\n                          onClick={() => handleViewDetails(code)}\r\n                        >\r\n                          <Eye className=\"w-4 h-4\" />\r\n                        </Button>\r\n                        {code.status === \"pending\" && (\r\n                          <>\r\n                            <Button\r\n                              variant=\"ghost\"\r\n                              size=\"icon\"\r\n                              className=\"text-green-600 hover:text-green-700 hover:bg-green-50\"\r\n                              onClick={() => handleQuickApprove(code.id)}\r\n                              disabled={approveMutation.isPending}\r\n                            >\r\n                              <Check className=\"w-4 h-4\" />\r\n                            </Button>\r\n                            <Button\r\n                              variant=\"ghost\"\r\n                              size=\"icon\"\r\n                              className=\"text-red-600 hover:text-red-700 hover:bg-red-50\"\r\n                              onClick={() => handleViewDetails(code)}\r\n                            >\r\n                              <X className=\"w-4 h-4\" />\r\n                            </Button>\r\n                          </>\r\n                        )}\r\n                        {code.status === \"approved\" && (\r\n                          <Button\r\n                            variant=\"ghost\"\r\n                            size=\"icon\"\r\n                            className=\"text-orange-600 hover:text-orange-700 hover:bg-orange-50\"\r\n                            onClick={() => handleViewDetails(code)}\r\n                            title={t(\"admin.invitationCodes.revoke\", \"收回\")}\r\n                          >\r\n                            <RotateCcw className=\"w-4 h-4\" />\r\n                          </Button>\r\n                        )}\r\n                      </div>\r\n                    </TableCell>\r\n                  </TableRow>\r\n                ))}\r\n              </TableBody>\r\n            </Table>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Review Dialog */}\r\n      <ReviewInvitationCodeDialog\r\n        open={reviewDialogOpen}\r\n        onOpenChange={setReviewDialogOpen}\r\n        invitationCode={selectedCode}\r\n      />\r\n\r\n      {/* Stats Dialog */}\r\n      <InvitationCodeStatsDialog\r\n        open={statsDialogOpen}\r\n        onOpenChange={setStatsDialogOpen}\r\n        invitationCode={statsDialogCode}\r\n        codeOwner={statsDialogOwner}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminInvitationCodes;\r\n"],"names":["ReviewInvitationCodeDialog","open","onOpenChange","invitationCode","t","useTranslation","approveMutation","useApproveInvitationCode","rejectMutation","useRejectInvitationCode","revokeMutation","useRevokeInvitationCode","rejectionReason","setRejectionReason","useState","revokeReason","setRevokeReason","showRejectForm","setShowRejectForm","showRevokeForm","setShowRevokeForm","handleApprove","handleReject","handleRevoke","isPending","isApproved","isLoading","Dialog","jsxs","DialogContent","DialogHeader","DialogTitle","jsx","Ticket","DialogDescription","Avatar","AvatarImage","AvatarFallback","Badge","Separator","FileText","Phone","MapPin","Calendar","format","Users","Label","Textarea","e","DialogFooter","Fragment","Button","Loader2","X","Check","Ban","RotateCcw","InvitationCodeStatsDialog","codeOwner","data","useInvitationCodeUsageDetails","getStatusBadge","status","CheckCircle","Clock","BarChart3","ScrollArea","Skeleton","Card","CardContent","TrendingUp","Building2","request","UserCheck","user","AdminInvitationCodes","invitationCodes","useAdminInvitationCodes","stats","statsLoading","useInvitationCodeStats","performanceStats","performanceLoading","useInvitationCodePerformanceStats","search","setSearch","statusFilter","setStatusFilter","selectedCode","setSelectedCode","reviewDialogOpen","setReviewDialogOpen","statsDialogOpen","setStatsDialogOpen","statsDialogCode","setStatsDialogCode","statsDialogOwner","setStatsDialogOwner","filteredCodes","useMemo","code","matchesSearch","matchesStatus","handleQuickApprove","id","handleViewDetails","handleViewStats","XCircle","UserPlus","CardHeader","CardTitle","Search","Input","Select","SelectTrigger","SelectValue","SelectContent","SelectItem","i","Table","TableHeader","TableRow","TableHead","TableBody","TableCell","Eye"],"mappings":"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"}