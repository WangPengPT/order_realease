import{j as e}from"./vendor-ui-DmpovMYY.js";import{f as fe,r as t}from"./vendor-react-iAJ0IrSD.js";import{a as ve,L as u,l as Ne,p as x,K as g,Y as j,at as ye,aO as p,O as f,aB as c,$ as X,B as r,aV as ee,I as d,bd as _e,V as C,bi as S,a$ as we}from"./index-DsNZqemC.js";import{S as se}from"./slider-DVHbR2A7.js";import{S as be}from"./switch-DUHNMjdj.js";import{u as Ce}from"./vendor-i18n-DxKeo2S1.js";import"./vendor-charts-Bz7hPIBd.js";import"./vendor-query-D82cqPtt.js";import"./vendor-supabase-6pZ9VDFn.js";const Ae=()=>{const{t:s}=Ce(),v=fe(),{settings:n,isLoading:P,updateSettings:i,uploadLogo:I}=ve(),[E,k]=t.useState(!1),[T,L]=t.useState(!1),M=t.useRef(null),R=t.useRef(null),N=t.useRef(null),y=t.useRef(null),[m,_]=t.useState(35),[h,w]=t.useState(35),[A,D]=t.useState(""),[V,F]=t.useState(""),[H,U]=t.useState(""),[J,B]=t.useState(""),[W,O]=t.useState(""),[z,Z]=t.useState(""),[$,q]=t.useState(""),[K,Y]=t.useState(""),[G,Q]=t.useState("");t.useEffect(()=>{n&&(_(n.logo_width||35),w(n.logo_height||35),D(n.join_contact_phone||"968815050"),F(n.join_success_title_zh||"信息已提交成功！"),U(n.join_success_title_en||"Request Submitted!"),B(n.join_success_title_pt||"Informação Enviada com Sucesso!"),O(n.join_success_message_zh||"感谢您的信任！我们的专属顾问将在24小时工作日内通过电话与您联系。"),Z(n.join_success_message_en||"Thank you for your trust! Our dedicated consultant will contact you by phone within 24 business hours."),q(n.join_success_message_pt||"Obrigado pela sua confiança! Nosso consultor dedicado entrará em contato por telefone dentro de 24 horas úteis."),Y(n.contact_phone||""),Q(n.contact_email||""))},[n]),t.useEffect(()=>{v.hash==="#join-us"&&N.current?setTimeout(()=>{N.current?.scrollIntoView({behavior:"smooth",block:"start"})},100):v.hash==="#contact-info"&&y.current&&setTimeout(()=>{y.current?.scrollIntoView({behavior:"smooth",block:"start"})},100)},[v.hash,P]);const ae=async a=>{const l=a.target.files?.[0];if(l){k(!0);try{const o=await I(l);o&&await i.mutateAsync({logo_url:o})}finally{k(!1)}}},te=async a=>{const l=a.target.files?.[0];if(l){L(!0);try{const o=await I(l);o&&await i.mutateAsync({favicon_url:o})}finally{L(!1)}}},ne=a=>{_(a[0])},ie=a=>{w(a[0])},ce=async a=>{await i.mutateAsync({logo_width:a[0]})},le=async a=>{await i.mutateAsync({logo_height:a[0]})},oe=a=>{const l=parseInt(a.target.value)||20,o=Math.min(Math.max(l,20),100);_(o)},de=async()=>{await i.mutateAsync({logo_width:m})},re=a=>{const l=parseInt(a.target.value)||20,o=Math.min(Math.max(l,20),100);w(o)},me=async()=>{await i.mutateAsync({logo_height:h})},he=async()=>{await i.mutateAsync({logo_url:null})},ue=async()=>{await i.mutateAsync({favicon_url:null})},xe=async()=>{await i.mutateAsync({join_contact_phone:A,join_success_title_zh:V,join_success_title_en:H,join_success_title_pt:J,join_success_message_zh:W,join_success_message_en:z,join_success_message_pt:$})},ge=async()=>{await i.mutateAsync({contact_phone:K,contact_email:G})};if(P)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(u,{className:"h-8 w-8 animate-spin text-primary"})});const je=n?.logo_url||Ne,b=n?.community_enabled!==!1,pe=async()=>{await i.mutateAsync({community_enabled:!b})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:s("admin.siteSettings")}),e.jsx("p",{className:"text-muted-foreground",children:s("admin.siteSettingsDescription")})]}),e.jsxs(x,{children:[e.jsxs(g,{children:[e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(ye,{className:"h-5 w-5"}),s("admin.featureToggles","功能开关")]}),e.jsx(p,{children:s("admin.featureTogglesDescription","控制网站功能的显示与隐藏")})]}),e.jsx(f,{children:e.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted/30 rounded-lg",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(c,{htmlFor:"community-enabled",className:"text-base font-medium",children:s("admin.communityEnabled","社区功能")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:b?s("admin.communityEnabledDesc","社区入口在导航栏中显示"):s("admin.communityDisabledDesc","社区入口已隐藏")})]}),e.jsx(be,{id:"community-enabled",checked:b,onCheckedChange:pe,disabled:i.isPending})]})})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(x,{children:[e.jsxs(g,{children:[e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(X,{className:"h-5 w-5"}),s("admin.logoSettings")]}),e.jsx(p,{children:s("admin.logoSettingsDescription")})]}),e.jsxs(f,{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col items-center gap-4 p-6 border rounded-lg bg-muted/50",children:[e.jsx(c,{className:"text-sm text-muted-foreground",children:s("admin.logoPreview")}),e.jsx("div",{className:"bg-background p-4 rounded-lg shadow-sm border",children:e.jsx("img",{src:je,alt:"Logo Preview",style:{width:`${m}px`,height:`${h}px`},className:"object-contain"})}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[m,"px × ",h,"px"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:s("admin.uploadLogo")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{ref:M,type:"file",accept:"image/*",onChange:ae,className:"hidden"}),e.jsxs(r,{variant:"outline",onClick:()=>M.current?.click(),disabled:E,className:"flex-1",children:[E?e.jsx(u,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(ee,{className:"h-4 w-4 mr-2"}),s("admin.selectImage")]}),n?.logo_url&&e.jsx(r,{variant:"destructive",onClick:he,disabled:i.isPending,children:s("common.remove")})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(c,{children:s("admin.logoWidth")}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(d,{type:"number",value:m,onChange:oe,onBlur:de,min:20,max:100,className:"w-16 h-8 text-center text-sm"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"px"})]})]}),e.jsx(se,{value:[m],onValueChange:ne,onValueCommit:ce,min:20,max:100,step:1})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(c,{children:s("admin.logoHeight")}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(d,{type:"number",value:h,onChange:re,onBlur:me,min:20,max:100,className:"w-16 h-8 text-center text-sm"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"px"})]})]}),e.jsx(se,{value:[h],onValueChange:ie,onValueCommit:le,min:20,max:100,step:1})]})]})]}),e.jsxs(x,{children:[e.jsxs(g,{children:[e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(X,{className:"h-5 w-5"}),s("admin.faviconSettings")]}),e.jsx(p,{children:s("admin.faviconSettingsDescription")})]}),e.jsxs(f,{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col items-center gap-4 p-6 border rounded-lg bg-muted/50",children:[e.jsx(c,{className:"text-sm text-muted-foreground",children:s("admin.faviconPreview")}),e.jsx("div",{className:"bg-background p-4 rounded-lg shadow-sm border",children:e.jsx("img",{src:n?.favicon_url||"/favicon.png",alt:"Favicon Preview",className:"w-8 h-8 object-contain"})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"32px × 32px"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:s("admin.uploadFavicon")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{ref:R,type:"file",accept:"image/*",onChange:te,className:"hidden"}),e.jsxs(r,{variant:"outline",onClick:()=>R.current?.click(),disabled:T,className:"flex-1",children:[T?e.jsx(u,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(ee,{className:"h-4 w-4 mr-2"}),s("admin.selectImage")]}),n?.favicon_url&&e.jsx(r,{variant:"destructive",onClick:ue,disabled:i.isPending,children:s("common.remove")})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s("admin.faviconHint")})]})]})]})]}),e.jsxs(x,{ref:N,id:"join-us",children:[e.jsxs(g,{children:[e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(_e,{className:"h-5 w-5"}),s("admin.joinUsSettings")]}),e.jsx(p,{children:s("admin.joinUsSettingsDescription")})]}),e.jsxs(f,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-4 w-4"}),s("admin.joinContactPhone")]}),e.jsx(d,{value:A,onChange:a=>D(a.target.value),placeholder:"968815050"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(c,{children:s("admin.joinSuccessTitle")}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{className:"text-xs text-muted-foreground",children:"中文"}),e.jsx(d,{value:V,onChange:a=>F(a.target.value),placeholder:"信息已提交成功！"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{className:"text-xs text-muted-foreground",children:"English"}),e.jsx(d,{value:H,onChange:a=>U(a.target.value),placeholder:"Request Submitted!"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{className:"text-xs text-muted-foreground",children:"Português"}),e.jsx(d,{value:J,onChange:a=>B(a.target.value),placeholder:"Informação Enviada com Sucesso!"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(c,{children:s("admin.joinSuccessMessage")}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-1",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{className:"text-xs text-muted-foreground",children:"中文"}),e.jsx(S,{value:W,onChange:a=>O(a.target.value),placeholder:"感谢您的信任！我们的专属顾问将在24小时工作日内通过电话与您联系。",rows:2})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{className:"text-xs text-muted-foreground",children:"English"}),e.jsx(S,{value:z,onChange:a=>Z(a.target.value),placeholder:"Thank you for your trust! Our dedicated consultant will contact you by phone within 24 business hours.",rows:2})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{className:"text-xs text-muted-foreground",children:"Português"}),e.jsx(S,{value:$,onChange:a=>q(a.target.value),placeholder:"Obrigado pela sua confiança! Nosso consultor dedicado entrará em contato por telefone dentro de 24 horas úteis.",rows:2})]})]})]}),e.jsxs(r,{onClick:xe,disabled:i.isPending,className:"w-full md:w-auto",children:[i.isPending&&e.jsx(u,{className:"h-4 w-4 mr-2 animate-spin"}),s("common.save")]})]})]}),e.jsxs(x,{ref:y,id:"contact-info",children:[e.jsxs(g,{children:[e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-5 w-5"}),s("admin.contactSettings")]}),e.jsx(p,{children:s("admin.contactSettingsDescription")})]}),e.jsxs(f,{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-4 w-4"}),s("admin.contactPhone")]}),e.jsx(d,{value:K,onChange:a=>Y(a.target.value),placeholder:"+351 968 815 050"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(we,{className:"h-4 w-4"}),s("admin.contactEmail")]}),e.jsx(d,{type:"email",value:G,onChange:a=>Q(a.target.value),placeholder:"comercial@xiaoxiong.pt"})]})]}),e.jsxs(r,{onClick:ge,disabled:i.isPending,className:"w-full md:w-auto",children:[i.isPending&&e.jsx(u,{className:"h-4 w-4 mr-2 animate-spin"}),s("common.save")]})]})]})]})})};export{Ae as default};
//# sourceMappingURL=AdminSiteSettings-CIPhpZHc.js.map
