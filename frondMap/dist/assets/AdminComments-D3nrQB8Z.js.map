{"version":3,"file":"AdminComments-D3nrQB8Z.js","sources":["../../node_modules/lucide-react/dist/esm/icons/archive-restore.js","../../node_modules/lucide-react/dist/esm/icons/archive.js","../../node_modules/lucide-react/dist/esm/icons/bot.js","../../src/hooks/useCommentModeration.ts","../../src/pages/admin/AdminComments.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ArchiveRestore = createLucideIcon(\"ArchiveRestore\", [\n  [\"rect\", { width: \"20\", height: \"5\", x: \"2\", y: \"3\", rx: \"1\", key: \"1wp1u1\" }],\n  [\"path\", { d: \"M4 8v11a2 2 0 0 0 2 2h2\", key: \"tvwodi\" }],\n  [\"path\", { d: \"M20 8v11a2 2 0 0 1-2 2h-2\", key: \"1gkqxj\" }],\n  [\"path\", { d: \"m9 15 3-3 3 3\", key: \"1pd0qc\" }],\n  [\"path\", { d: \"M12 12v9\", key: \"192myk\" }]\n]);\n\nexport { ArchiveRestore as default };\n//# sourceMappingURL=archive-restore.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Archive = createLucideIcon(\"Archive\", [\n  [\"rect\", { width: \"20\", height: \"5\", x: \"2\", y: \"3\", rx: \"1\", key: \"1wp1u1\" }],\n  [\"path\", { d: \"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8\", key: \"1s80jp\" }],\n  [\"path\", { d: \"M10 12h4\", key: \"a56b0p\" }]\n]);\n\nexport { Archive as default };\n//# sourceMappingURL=archive.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Bot = createLucideIcon(\"Bot\", [\n  [\"path\", { d: \"M12 8V4H8\", key: \"hb8ula\" }],\n  [\"rect\", { width: \"16\", height: \"12\", x: \"4\", y: \"8\", rx: \"2\", key: \"enze0r\" }],\n  [\"path\", { d: \"M2 14h2\", key: \"vft8re\" }],\n  [\"path\", { d: \"M20 14h2\", key: \"4cs60a\" }],\n  [\"path\", { d: \"M15 13v2\", key: \"1xurst\" }],\n  [\"path\", { d: \"M9 13v2\", key: \"rq6x2g\" }]\n]);\n\nexport { Bot as default };\n//# sourceMappingURL=bot.js.map\n","import { useMutation, useQuery, useQueryClient } from \"@tanstack/react-query\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\n\r\nexport interface ModerationComment {\r\n  id: string;\r\n  user_id: string;\r\n  target_id: string;\r\n  target_type: string;\r\n  content: string;\r\n  rating_value?: number | null;\r\n  image_url?: string;\r\n  parent_id?: string;\r\n  created_at: string;\r\n  moderation_status: string;\r\n  risk_score: number;\r\n  risk_reasons: string[];\r\n  ai_reviewed_at?: string;\r\n  reviewed_by?: string;\r\n  reviewed_at?: string;\r\n  archived?: boolean;\r\n  profiles?: {\r\n    display_name: string;\r\n    avatar_url?: string;\r\n  };\r\n  target_name?: string;\r\n  target_name_en?: string;\r\n  target_name_pt?: string;\r\n}\r\n\r\nexport type CommentViewMode = \"pending\" | \"approved\" | \"rejected\" | \"archived\";\r\n\r\nexport const useAdminComments = (viewMode: CommentViewMode = \"pending\") => {\r\n  return useQuery({\r\n    queryKey: [\"admin-comments\", viewMode],\r\n    queryFn: async () => {\r\n      let query = supabase\r\n        .from(\"comments\")\r\n        .select(\"*\")\r\n        .is(\"parent_id\", null)\r\n        .order(\"created_at\", { ascending: false })\r\n        .limit(200);\r\n\r\n      // Filter based on view mode\r\n      if (viewMode === \"archived\") {\r\n        query = query.eq(\"archived\", true);\r\n      } else {\r\n        // Non-archived comments\r\n        query = query.or(\"archived.is.null,archived.eq.false\");\r\n        \r\n        if (viewMode === \"pending\") {\r\n          // Show pending and flagged (needs review)\r\n          query = query.in(\"moderation_status\", [\"pending\", \"flagged\"]);\r\n        } else if (viewMode === \"approved\") {\r\n          query = query.eq(\"moderation_status\", \"approved\");\r\n        } else if (viewMode === \"rejected\") {\r\n          query = query.eq(\"moderation_status\", \"rejected\");\r\n        }\r\n      }\r\n\r\n      const { data: comments, error } = await query;\r\n\r\n      if (error) throw error;\r\n      if (!comments || comments.length === 0) return [];\r\n\r\n      // Get unique user IDs\r\n      const userIds = [...new Set(comments.map((c) => c.user_id))];\r\n\r\n      // Get profiles\r\n      const { data: profiles } = await supabase.rpc(\"get_public_profiles\", {\r\n        user_ids: userIds,\r\n      });\r\n\r\n      const profileMap = new Map(\r\n        (profiles || []).map((p: { id: string; display_name: string; avatar_url: string }) => [\r\n          p.id,\r\n          { display_name: p.display_name, avatar_url: p.avatar_url },\r\n        ])\r\n      );\r\n\r\n      // Get restaurant names\r\n      const restaurantIds = comments\r\n        .filter((c) => c.target_type === \"restaurant\")\r\n        .map((c) => c.target_id);\r\n      const activityIds = comments\r\n        .filter((c) => c.target_type === \"activity\")\r\n        .map((c) => c.target_id);\r\n\r\n      const restaurantMap = new Map<string, { name: string; name_en?: string; name_pt?: string }>();\r\n      const activityMap = new Map<string, { title_zh: string; title_en?: string; title_pt?: string }>();\r\n\r\n      if (restaurantIds.length > 0) {\r\n        const { data: restaurants } = await supabase\r\n          .from(\"restaurants\")\r\n          .select(\"id, name, name_en, name_pt\")\r\n          .in(\"id\", restaurantIds);\r\n\r\n        restaurants?.forEach((r) => {\r\n          restaurantMap.set(r.id, { name: r.name, name_en: r.name_en || undefined, name_pt: r.name_pt || undefined });\r\n        });\r\n      }\r\n\r\n      if (activityIds.length > 0) {\r\n        const { data: activities } = await supabase\r\n          .from(\"activities\")\r\n          .select(\"id, title_zh, title_en, title_pt\")\r\n          .in(\"id\", activityIds);\r\n\r\n        activities?.forEach((a) => {\r\n          activityMap.set(a.id, { title_zh: a.title_zh, title_en: a.title_en, title_pt: a.title_pt });\r\n        });\r\n      }\r\n\r\n      return comments.map((comment) => {\r\n        let targetName = \"\";\r\n        let targetNameEn: string | undefined;\r\n        let targetNamePt: string | undefined;\r\n\r\n        if (comment.target_type === \"restaurant\") {\r\n          const restaurant = restaurantMap.get(comment.target_id);\r\n          targetName = restaurant?.name || \"Unknown Restaurant\";\r\n          targetNameEn = restaurant?.name_en;\r\n          targetNamePt = restaurant?.name_pt;\r\n        } else if (comment.target_type === \"activity\") {\r\n          const activity = activityMap.get(comment.target_id);\r\n          targetName = activity?.title_zh || \"Unknown Activity\";\r\n          targetNameEn = activity?.title_en;\r\n          targetNamePt = activity?.title_pt;\r\n        }\r\n\r\n        return {\r\n          ...comment,\r\n          risk_reasons: Array.isArray(comment.risk_reasons) ? comment.risk_reasons : [],\r\n          profiles: profileMap.get(comment.user_id),\r\n          target_name: targetName,\r\n          target_name_en: targetNameEn,\r\n          target_name_pt: targetNamePt,\r\n        } as ModerationComment;\r\n      });\r\n    },\r\n  });\r\n};\r\n\r\nexport const useModerateComment = () => {\r\n  const { toast } = useToast();\r\n  const queryClient = useQueryClient();\r\n\r\n  return useMutation({\r\n    mutationFn: async ({\r\n      commentId,\r\n      action,\r\n    }: {\r\n      commentId: string;\r\n      action: \"approve\" | \"reject\" | \"flag\";\r\n    }) => {\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      if (!user) throw new Error(\"Not authenticated\");\r\n\r\n      const statusMap = {\r\n        approve: \"approved\",\r\n        reject: \"rejected\",\r\n        flag: \"flagged\",\r\n      };\r\n\r\n      const { error } = await supabase\r\n        .from(\"comments\")\r\n        .update({\r\n          moderation_status: statusMap[action],\r\n          reviewed_by: user.id,\r\n          reviewed_at: new Date().toISOString(),\r\n        })\r\n        .eq(\"id\", commentId);\r\n\r\n      if (error) throw error;\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"admin-comments\"] });\r\n      toast({\r\n        title: \"审核完成\",\r\n        description: \"评论状态已更新\",\r\n      });\r\n    },\r\n    onError: () => {\r\n      toast({\r\n        title: \"操作失败\",\r\n        description: \"无法更新评论状态\",\r\n        variant: \"destructive\",\r\n      });\r\n    },\r\n  });\r\n};\r\n\r\nexport const useBatchModerateComments = () => {\r\n  const { toast } = useToast();\r\n  const queryClient = useQueryClient();\r\n\r\n  return useMutation({\r\n    mutationFn: async ({\r\n      commentIds,\r\n      action,\r\n    }: {\r\n      commentIds: string[];\r\n      action: \"approve\" | \"reject\";\r\n    }) => {\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      if (!user) throw new Error(\"Not authenticated\");\r\n\r\n      const statusMap = {\r\n        approve: \"approved\",\r\n        reject: \"rejected\",\r\n      };\r\n\r\n      const { error } = await supabase\r\n        .from(\"comments\")\r\n        .update({\r\n          moderation_status: statusMap[action],\r\n          reviewed_by: user.id,\r\n          reviewed_at: new Date().toISOString(),\r\n        })\r\n        .in(\"id\", commentIds);\r\n\r\n      if (error) throw error;\r\n    },\r\n    onSuccess: (_, variables) => {\r\n      queryClient.invalidateQueries({ queryKey: [\"admin-comments\"] });\r\n      toast({\r\n        title: \"批量审核完成\",\r\n        description: `已${variables.action === \"approve\" ? \"通过\" : \"拒绝\"} ${variables.commentIds.length} 条评论`,\r\n      });\r\n    },\r\n    onError: () => {\r\n      toast({\r\n        title: \"批量操作失败\",\r\n        description: \"无法更新评论状态\",\r\n        variant: \"destructive\",\r\n      });\r\n    },\r\n  });\r\n};\r\n\r\nexport const useTriggerAIModeration = () => {\r\n  return useMutation({\r\n    mutationFn: async ({\r\n      commentId,\r\n      content,\r\n      userId,\r\n      sensitiveWordDetected = false,\r\n    }: {\r\n      commentId: string;\r\n      content: string;\r\n      userId: string;\r\n      sensitiveWordDetected?: boolean;\r\n    }) => {\r\n      const { data, error } = await supabase.functions.invoke(\"moderate-comment\", {\r\n        body: {\r\n          comment_id: commentId,\r\n          content,\r\n          user_id: userId,\r\n          sensitive_word_detected: sensitiveWordDetected,\r\n        },\r\n      });\r\n\r\n      if (error) throw error;\r\n      return data;\r\n    },\r\n  });\r\n};\r\n\r\nexport const useArchiveComment = () => {\r\n  const { toast } = useToast();\r\n  const queryClient = useQueryClient();\r\n\r\n  return useMutation({\r\n    mutationFn: async ({\r\n      commentId,\r\n      archived,\r\n    }: {\r\n      commentId: string;\r\n      archived: boolean;\r\n    }) => {\r\n      const { error } = await supabase\r\n        .from(\"comments\")\r\n        .update({ archived })\r\n        .eq(\"id\", commentId);\r\n\r\n      if (error) throw error;\r\n    },\r\n    onSuccess: (_, variables) => {\r\n      queryClient.invalidateQueries({ queryKey: [\"admin-comments\"] });\r\n      toast({\r\n        title: variables.archived ? \"已归档\" : \"已取消归档\",\r\n        description: variables.archived ? \"评论已移至归档\" : \"评论已恢复到列表\",\r\n      });\r\n    },\r\n    onError: () => {\r\n      toast({\r\n        title: \"操作失败\",\r\n        description: \"无法更新归档状态\",\r\n        variant: \"destructive\",\r\n      });\r\n    },\r\n  });\r\n};\r\n\r\nexport const useBatchArchiveComments = () => {\r\n  const { toast } = useToast();\r\n  const queryClient = useQueryClient();\r\n\r\n  return useMutation({\r\n    mutationFn: async ({\r\n      commentIds,\r\n      archived,\r\n    }: {\r\n      commentIds: string[];\r\n      archived: boolean;\r\n    }) => {\r\n      const { error } = await supabase\r\n        .from(\"comments\")\r\n        .update({ archived })\r\n        .in(\"id\", commentIds);\r\n\r\n      if (error) throw error;\r\n    },\r\n    onSuccess: (_, variables) => {\r\n      queryClient.invalidateQueries({ queryKey: [\"admin-comments\"] });\r\n      toast({\r\n        title: variables.archived ? \"批量归档完成\" : \"批量取消归档完成\",\r\n        description: `已${variables.archived ? \"归档\" : \"恢复\"} ${variables.commentIds.length} 条评论`,\r\n      });\r\n    },\r\n    onError: () => {\r\n      toast({\r\n        title: \"批量操作失败\",\r\n        description: \"无法更新归档状态\",\r\n        variant: \"destructive\",\r\n      });\r\n    },\r\n  });\r\n};\r\n","import { useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { format } from \"date-fns\";\r\nimport {\r\n  MessageSquare,\r\n  Check,\r\n  X,\r\n  AlertTriangle,\r\n  Eye,\r\n  Search,\r\n  Bot,\r\n  User,\r\n  Star,\r\n  ExternalLink,\r\n  Archive,\r\n  ArchiveRestore,\r\n} from \"lucide-react\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Checkbox } from \"@/components/ui/checkbox\";\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableHeader,\r\n  TableRow,\r\n} from \"@/components/ui/table\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from \"@/components/ui/dialog\";\r\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\r\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\r\nimport { Link } from \"react-router-dom\";\r\nimport {\r\n  useAdminComments,\r\n  useModerateComment,\r\n  useBatchModerateComments,\r\n  useArchiveComment,\r\n  useBatchArchiveComments,\r\n  ModerationComment,\r\n  CommentViewMode,\r\n} from \"@/hooks/useCommentModeration\";\r\nimport { useLocalizedContent } from \"@/hooks/useLocalizedContent\";\r\n\r\nconst getRiskColor = (score: number) => {\r\n  if (score <= 30) return \"bg-green-500/10 text-green-600 border-green-500/20\";\r\n  if (score <= 60) return \"bg-yellow-500/10 text-yellow-600 border-yellow-500/20\";\r\n  return \"bg-red-500/10 text-red-600 border-red-500/20\";\r\n};\r\n\r\nconst getStatusBadge = (status: string) => {\r\n  switch (status) {\r\n    case \"approved\":\r\n      return <Badge variant=\"outline\" className=\"bg-green-500/10 text-green-600 border-green-500/20\">已通过</Badge>;\r\n    case \"pending\":\r\n      return <Badge variant=\"outline\" className=\"bg-yellow-500/10 text-yellow-600 border-yellow-500/20\">待审核</Badge>;\r\n    case \"flagged\":\r\n      return <Badge variant=\"outline\" className=\"bg-orange-500/10 text-orange-600 border-orange-500/20\">已标记</Badge>;\r\n    case \"rejected\":\r\n      return <Badge variant=\"outline\" className=\"bg-red-500/10 text-red-600 border-red-500/20\">已拒绝</Badge>;\r\n    default:\r\n      return <Badge variant=\"secondary\">{status}</Badge>;\r\n  }\r\n};\r\n\r\nconst getRiskReasonLabel = (reason: string) => {\r\n  const labels: Record<string, string> = {\r\n    spam: \"垃圾信息\",\r\n    offensive: \"不当言论\",\r\n    harassment: \"骚扰攻击\",\r\n    fake_review: \"虚假评论\",\r\n    flooding: \"刷屏\",\r\n    irrelevant: \"无关内容\",\r\n    sensitive_word_detected: \"敏感词\",\r\n    parse_error: \"解析错误\",\r\n  };\r\n  return labels[reason] || reason;\r\n};\r\n\r\nconst AdminComments = () => {\r\n  const { t, i18n } = useTranslation();\r\n  const { currentLang } = useLocalizedContent();\r\n  const [viewMode, setViewMode] = useState<CommentViewMode>(\"pending\");\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [selectedComments, setSelectedComments] = useState<string[]>([]);\r\n  const [detailComment, setDetailComment] = useState<ModerationComment | null>(null);\r\n\r\n  const { data: comments, isLoading } = useAdminComments(viewMode);\r\n  const moderateComment = useModerateComment();\r\n  const batchModerate = useBatchModerateComments();\r\n  const archiveComment = useArchiveComment();\r\n  const batchArchive = useBatchArchiveComments();\r\n\r\n  const filteredComments = comments?.filter((comment) => {\r\n    if (!searchQuery) return true;\r\n    const query = searchQuery.toLowerCase();\r\n    return (\r\n      comment.content.toLowerCase().includes(query) ||\r\n      comment.profiles?.display_name?.toLowerCase().includes(query) ||\r\n      comment.target_name?.toLowerCase().includes(query)\r\n    );\r\n  });\r\n\r\n  const handleSelectAll = (checked: boolean) => {\r\n    if (checked) {\r\n      setSelectedComments(filteredComments?.map((c) => c.id) || []);\r\n    } else {\r\n      setSelectedComments([]);\r\n    }\r\n  };\r\n\r\n  const handleSelectComment = (commentId: string, checked: boolean) => {\r\n    if (checked) {\r\n      setSelectedComments((prev) => [...prev, commentId]);\r\n    } else {\r\n      setSelectedComments((prev) => prev.filter((id) => id !== commentId));\r\n    }\r\n  };\r\n\r\n  const handleBatchAction = (action: \"approve\" | \"reject\") => {\r\n    if (selectedComments.length === 0) return;\r\n    batchModerate.mutate(\r\n      { commentIds: selectedComments, action },\r\n      { onSuccess: () => setSelectedComments([]) }\r\n    );\r\n  };\r\n\r\n  const handleBatchArchive = (archived: boolean) => {\r\n    if (selectedComments.length === 0) return;\r\n    batchArchive.mutate(\r\n      { commentIds: selectedComments, archived },\r\n      { onSuccess: () => setSelectedComments([]) }\r\n    );\r\n  };\r\n\r\n  const getTargetLink = (comment: ModerationComment) => {\r\n    if (comment.target_type === \"restaurant\") {\r\n      return `/restaurant/${comment.target_id}`;\r\n    } else if (comment.target_type === \"activity\") {\r\n      return `/activity/${comment.target_id}`;\r\n    }\r\n    return \"#\";\r\n  };\r\n\r\n  const getLocalizedTargetName = (comment: ModerationComment) => {\r\n    if (i18n.language === \"en\" && comment.target_name_en) {\r\n      return comment.target_name_en;\r\n    }\r\n    if (i18n.language === \"pt\" && comment.target_name_pt) {\r\n      return comment.target_name_pt;\r\n    }\r\n    return comment.target_name || \"\";\r\n  };\r\n\r\n  const stats = {\r\n    total: comments?.length || 0,\r\n    pending: comments?.filter((c) => c.moderation_status === \"pending\").length || 0,\r\n    flagged: comments?.filter((c) => c.moderation_status === \"flagged\").length || 0,\r\n    approved: comments?.filter((c) => c.moderation_status === \"approved\").length || 0,\r\n    rejected: comments?.filter((c) => c.moderation_status === \"rejected\").length || 0,\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\r\n        <div>\r\n          <h1 className=\"text-2xl font-bold flex items-center gap-2\">\r\n            <MessageSquare className=\"h-6 w-6\" />\r\n            {t(\"admin.comments.title\", \"评论管理\")}\r\n          </h1>\r\n          <p className=\"text-muted-foreground\">\r\n            {t(\"admin.comments.description\", \"审核和管理用户评论，防止恶意内容\")}\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Stats Cards */}\r\n      <div className=\"grid grid-cols-2 md:grid-cols-5 gap-4\">\r\n        <Card>\r\n          <CardContent className=\"pt-4\">\r\n            <div className=\"text-2xl font-bold\">{stats.total}</div>\r\n            <p className=\"text-xs text-muted-foreground\">总评论</p>\r\n          </CardContent>\r\n        </Card>\r\n        <Card className=\"border-yellow-500/20\">\r\n          <CardContent className=\"pt-4\">\r\n            <div className=\"text-2xl font-bold text-yellow-600\">{stats.pending}</div>\r\n            <p className=\"text-xs text-muted-foreground\">待审核</p>\r\n          </CardContent>\r\n        </Card>\r\n        <Card className=\"border-orange-500/20\">\r\n          <CardContent className=\"pt-4\">\r\n            <div className=\"text-2xl font-bold text-orange-600\">{stats.flagged}</div>\r\n            <p className=\"text-xs text-muted-foreground\">已标记</p>\r\n          </CardContent>\r\n        </Card>\r\n        <Card className=\"border-green-500/20\">\r\n          <CardContent className=\"pt-4\">\r\n            <div className=\"text-2xl font-bold text-green-600\">{stats.approved}</div>\r\n            <p className=\"text-xs text-muted-foreground\">已通过</p>\r\n          </CardContent>\r\n        </Card>\r\n        <Card className=\"border-red-500/20\">\r\n          <CardContent className=\"pt-4\">\r\n            <div className=\"text-2xl font-bold text-red-600\">{stats.rejected}</div>\r\n            <p className=\"text-xs text-muted-foreground\">已拒绝</p>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      <Tabs value={viewMode} onValueChange={(v) => { setViewMode(v as CommentViewMode); setSelectedComments([]); }} className=\"space-y-4\">\r\n        <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\r\n          <TabsList>\r\n            <TabsTrigger value=\"pending\" className=\"gap-1\">\r\n              <AlertTriangle className=\"h-4 w-4\" />\r\n              待审核\r\n              {stats.pending + stats.flagged > 0 && (\r\n                <Badge variant=\"secondary\" className=\"ml-1 h-5 px-1.5\">{stats.pending + stats.flagged}</Badge>\r\n              )}\r\n            </TabsTrigger>\r\n            <TabsTrigger value=\"approved\" className=\"gap-1\">\r\n              <Check className=\"h-4 w-4\" />\r\n              已通过\r\n            </TabsTrigger>\r\n            <TabsTrigger value=\"rejected\" className=\"gap-1\">\r\n              <X className=\"h-4 w-4\" />\r\n              已拒绝\r\n            </TabsTrigger>\r\n            <TabsTrigger value=\"archived\" className=\"gap-1\">\r\n              <Archive className=\"h-4 w-4\" />\r\n              已归档\r\n            </TabsTrigger>\r\n          </TabsList>\r\n          <div className=\"relative w-64\">\r\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n            <Input\r\n              placeholder={t(\"admin.comments.search\", \"搜索评论...\")}\r\n              value={searchQuery}\r\n              onChange={(e) => setSearchQuery(e.target.value)}\r\n              className=\"pl-9\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <Card>\r\n          <CardHeader>\r\n            <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2\">\r\n              <div>\r\n                <CardTitle>\r\n                  {viewMode === \"pending\" && \"审核评论列表\"}\r\n                  {viewMode === \"approved\" && \"已通过评论\"}\r\n                  {viewMode === \"rejected\" && \"已拒绝评论\"}\r\n                  {viewMode === \"archived\" && \"已归档评论\"}\r\n                </CardTitle>\r\n                <CardDescription>\r\n                  {viewMode === \"pending\" && \"待审核和已标记的评论，需要人工审核处理\"}\r\n                  {viewMode === \"approved\" && \"已审核通过的评论\"}\r\n                  {viewMode === \"rejected\" && \"已拒绝的评论，不会显示给用户\"}\r\n                  {viewMode === \"archived\" && \"已归档的评论，用于保持列表简洁\"}\r\n                </CardDescription>\r\n              </div>\r\n            </div>\r\n\r\n            {selectedComments.length > 0 && (\r\n              <div className=\"flex items-center gap-2 mt-4 p-2 bg-muted rounded-lg flex-wrap\">\r\n                <span className=\"text-sm\">已选择 {selectedComments.length} 项</span>\r\n                {viewMode === \"pending\" && (\r\n                  <>\r\n                    <Button\r\n                      size=\"sm\"\r\n                      variant=\"outline\"\r\n                      onClick={() => handleBatchAction(\"approve\")}\r\n                      disabled={batchModerate.isPending}\r\n                    >\r\n                      <Check className=\"h-4 w-4 mr-1\" />\r\n                      批量通过\r\n                    </Button>\r\n                    <Button\r\n                      size=\"sm\"\r\n                      variant=\"outline\"\r\n                      onClick={() => handleBatchAction(\"reject\")}\r\n                      disabled={batchModerate.isPending}\r\n                    >\r\n                      <X className=\"h-4 w-4 mr-1\" />\r\n                      批量拒绝\r\n                    </Button>\r\n                  </>\r\n                )}\r\n                <Button\r\n                  size=\"sm\"\r\n                  variant=\"outline\"\r\n                  onClick={() => handleBatchArchive(viewMode !== \"archived\")}\r\n                  disabled={batchArchive.isPending}\r\n                >\r\n                  {viewMode === \"archived\" ? (\r\n                    <>\r\n                      <ArchiveRestore className=\"h-4 w-4 mr-1\" />\r\n                      批量恢复\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <Archive className=\"h-4 w-4 mr-1\" />\r\n                      批量归档\r\n                    </>\r\n                  )}\r\n                </Button>\r\n                <Button size=\"sm\" variant=\"ghost\" onClick={() => setSelectedComments([])}>\r\n                  取消选择\r\n                </Button>\r\n              </div>\r\n            )}\r\n          </CardHeader>\r\n        <CardContent>\r\n          {isLoading ? (\r\n            <div className=\"text-center py-8 text-muted-foreground\">加载中...</div>\r\n          ) : filteredComments && filteredComments.length > 0 ? (\r\n            <div className=\"rounded-md border\">\r\n              <Table>\r\n                <TableHeader>\r\n                  <TableRow>\r\n                    <TableHead className=\"w-12\">\r\n                      <Checkbox\r\n                        checked={\r\n                          filteredComments.length > 0 &&\r\n                          selectedComments.length === filteredComments.length\r\n                        }\r\n                        onCheckedChange={handleSelectAll}\r\n                      />\r\n                    </TableHead>\r\n                    <TableHead className=\"w-16\">风险</TableHead>\r\n                    <TableHead>评论内容</TableHead>\r\n                    <TableHead>用户</TableHead>\r\n                    <TableHead>目标</TableHead>\r\n                    <TableHead>状态</TableHead>\r\n                    <TableHead>时间</TableHead>\r\n                    <TableHead className=\"text-right\">操作</TableHead>\r\n                  </TableRow>\r\n                </TableHeader>\r\n                <TableBody>\r\n                  {filteredComments.map((comment) => (\r\n                    <TableRow\r\n                      key={comment.id}\r\n                      className={\r\n                        comment.risk_score > 60\r\n                          ? \"bg-red-500/5\"\r\n                          : comment.risk_score > 30\r\n                          ? \"bg-yellow-500/5\"\r\n                          : \"\"\r\n                      }\r\n                    >\r\n                      <TableCell>\r\n                        <Checkbox\r\n                          checked={selectedComments.includes(comment.id)}\r\n                          onCheckedChange={(checked) =>\r\n                            handleSelectComment(comment.id, checked as boolean)\r\n                          }\r\n                        />\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        <Badge\r\n                          variant=\"outline\"\r\n                          className={getRiskColor(comment.risk_score)}\r\n                        >\r\n                          {comment.risk_score}\r\n                        </Badge>\r\n                      </TableCell>\r\n                      <TableCell className=\"max-w-xs\">\r\n                        <div className=\"truncate\" title={comment.content}>\r\n                          {comment.content}\r\n                        </div>\r\n                        {comment.risk_reasons.length > 0 && (\r\n                          <div className=\"flex flex-wrap gap-1 mt-1\">\r\n                            {comment.risk_reasons.map((reason, idx) => (\r\n                              <Badge key={idx} variant=\"secondary\" className=\"text-xs\">\r\n                                {getRiskReasonLabel(reason)}\r\n                              </Badge>\r\n                            ))}\r\n                          </div>\r\n                        )}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        <div className=\"flex items-center gap-2\">\r\n                          <Avatar className=\"h-6 w-6\">\r\n                            <AvatarImage src={comment.profiles?.avatar_url} />\r\n                            <AvatarFallback>\r\n                              <User className=\"h-3 w-3\" />\r\n                            </AvatarFallback>\r\n                          </Avatar>\r\n                          <span className=\"text-sm truncate max-w-[100px]\">\r\n                            {comment.profiles?.display_name || \"Unknown\"}\r\n                          </span>\r\n                        </div>\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        <Link\r\n                          to={getTargetLink(comment)}\r\n                          className=\"flex items-center gap-1 text-sm hover:underline text-primary\"\r\n                        >\r\n                          <span className=\"truncate max-w-[120px]\">\r\n                            {getLocalizedTargetName(comment)}\r\n                          </span>\r\n                          <ExternalLink className=\"h-3 w-3\" />\r\n                        </Link>\r\n                      </TableCell>\r\n                      <TableCell>{getStatusBadge(comment.moderation_status)}</TableCell>\r\n                      <TableCell className=\"text-sm text-muted-foreground\">\r\n                        {format(new Date(comment.created_at), \"MM-dd HH:mm\")}\r\n                      </TableCell>\r\n                      <TableCell className=\"text-right\">\r\n                        <div className=\"flex items-center justify-end gap-1\">\r\n                          <Button\r\n                            size=\"icon\"\r\n                            variant=\"ghost\"\r\n                            onClick={() => setDetailComment(comment)}\r\n                            title=\"查看详情\"\r\n                          >\r\n                            <Eye className=\"h-4 w-4\" />\r\n                          </Button>\r\n                          {viewMode === \"pending\" && comment.moderation_status !== \"approved\" && (\r\n                            <Button\r\n                              size=\"icon\"\r\n                              variant=\"ghost\"\r\n                              onClick={() =>\r\n                                moderateComment.mutate({\r\n                                  commentId: comment.id,\r\n                                  action: \"approve\",\r\n                                })\r\n                              }\r\n                              disabled={moderateComment.isPending}\r\n                              title=\"通过\"\r\n                              className=\"text-green-600 hover:text-green-700\"\r\n                            >\r\n                              <Check className=\"h-4 w-4\" />\r\n                            </Button>\r\n                          )}\r\n                          {viewMode === \"pending\" && comment.moderation_status !== \"rejected\" && (\r\n                            <Button\r\n                              size=\"icon\"\r\n                              variant=\"ghost\"\r\n                              onClick={() =>\r\n                                moderateComment.mutate({\r\n                                  commentId: comment.id,\r\n                                  action: \"reject\",\r\n                                })\r\n                              }\r\n                              disabled={moderateComment.isPending}\r\n                              title=\"拒绝\"\r\n                              className=\"text-red-600 hover:text-red-700\"\r\n                            >\r\n                              <X className=\"h-4 w-4\" />\r\n                            </Button>\r\n                          )}\r\n                          <Button\r\n                            size=\"icon\"\r\n                            variant=\"ghost\"\r\n                            onClick={() =>\r\n                              archiveComment.mutate({\r\n                                commentId: comment.id,\r\n                                archived: viewMode !== \"archived\",\r\n                              })\r\n                            }\r\n                            disabled={archiveComment.isPending}\r\n                            title={viewMode === \"archived\" ? \"恢复\" : \"归档\"}\r\n                            className=\"text-muted-foreground hover:text-foreground\"\r\n                          >\r\n                            {viewMode === \"archived\" ? (\r\n                              <ArchiveRestore className=\"h-4 w-4\" />\r\n                            ) : (\r\n                              <Archive className=\"h-4 w-4\" />\r\n                            )}\r\n                          </Button>\r\n                        </div>\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  ))}\r\n                </TableBody>\r\n              </Table>\r\n            </div>\r\n          ) : (\r\n            <div className=\"text-center py-8 text-muted-foreground\">\r\n              {searchQuery ? \"没有找到匹配的评论\" : \"暂无评论\"}\r\n            </div>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n    </Tabs>\r\n\r\n      {/* Comment Detail Dialog */}\r\n      <Dialog open={!!detailComment} onOpenChange={() => setDetailComment(null)}>\r\n        <DialogContent className=\"max-w-2xl\">\r\n          <DialogHeader>\r\n            <DialogTitle>评论详情</DialogTitle>\r\n            <DialogDescription>\r\n              查看评论完整信息和 AI 分析结果\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n          {detailComment && (\r\n            <ScrollArea className=\"max-h-[60vh]\">\r\n              <div className=\"space-y-4\">\r\n                {/* User Info */}\r\n                <div className=\"flex items-center gap-3 p-3 bg-muted rounded-lg\">\r\n                  <Avatar>\r\n                    <AvatarImage src={detailComment.profiles?.avatar_url} />\r\n                    <AvatarFallback>\r\n                      <User className=\"h-4 w-4\" />\r\n                    </AvatarFallback>\r\n                  </Avatar>\r\n                  <div>\r\n                    <div className=\"font-medium\">\r\n                      {detailComment.profiles?.display_name || \"Unknown\"}\r\n                    </div>\r\n                    <div className=\"text-sm text-muted-foreground\">\r\n                      {format(new Date(detailComment.created_at), \"yyyy-MM-dd HH:mm:ss\")}\r\n                    </div>\r\n                  </div>\r\n                  {detailComment.rating_value && (\r\n                    <div className=\"ml-auto flex items-center gap-1\">\r\n                      <Star className=\"h-4 w-4 fill-yellow-400 text-yellow-400\" />\r\n                      <span>{detailComment.rating_value}</span>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Content */}\r\n                <div>\r\n                  <h4 className=\"font-medium mb-2\">评论内容</h4>\r\n                  <div className=\"p-3 bg-muted rounded-lg whitespace-pre-wrap\">\r\n                    {detailComment.content}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Image */}\r\n                {detailComment.image_url && (\r\n                  <div>\r\n                    <h4 className=\"font-medium mb-2\">评论图片</h4>\r\n                    <img\r\n                      src={detailComment.image_url}\r\n                      alt=\"Comment\"\r\n                      className=\"max-w-full h-auto rounded-lg\"\r\n                    />\r\n                  </div>\r\n                )}\r\n\r\n                {/* Target */}\r\n                <div>\r\n                  <h4 className=\"font-medium mb-2\">评论目标</h4>\r\n                  <Link\r\n                    to={getTargetLink(detailComment)}\r\n                    className=\"flex items-center gap-2 p-3 bg-muted rounded-lg hover:bg-muted/80\"\r\n                  >\r\n                    <span>\r\n                      {detailComment.target_type === \"restaurant\" ? \"餐厅\" : \"活动\"}:\r\n                    </span>\r\n                    <span className=\"text-primary\">{getLocalizedTargetName(detailComment)}</span>\r\n                    <ExternalLink className=\"h-4 w-4\" />\r\n                  </Link>\r\n                </div>\r\n\r\n                {/* AI Analysis */}\r\n                <div>\r\n                  <h4 className=\"font-medium mb-2 flex items-center gap-2\">\r\n                    <Bot className=\"h-4 w-4\" />\r\n                    AI 分析结果\r\n                  </h4>\r\n                  <div className=\"p-3 bg-muted rounded-lg space-y-2\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <span>风险评分:</span>\r\n                      <Badge variant=\"outline\" className={getRiskColor(detailComment.risk_score)}>\r\n                        {detailComment.risk_score}/100\r\n                      </Badge>\r\n                    </div>\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <span>审核状态:</span>\r\n                      {getStatusBadge(detailComment.moderation_status)}\r\n                    </div>\r\n                    {detailComment.risk_reasons.length > 0 && (\r\n                      <div>\r\n                        <span>检测问题:</span>\r\n                        <div className=\"flex flex-wrap gap-1 mt-1\">\r\n                          {detailComment.risk_reasons.map((reason, idx) => (\r\n                            <Badge key={idx} variant=\"secondary\">\r\n                              {getRiskReasonLabel(reason)}\r\n                            </Badge>\r\n                          ))}\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                    {detailComment.ai_reviewed_at && (\r\n                      <div className=\"text-sm text-muted-foreground\">\r\n                        AI 审核时间: {format(new Date(detailComment.ai_reviewed_at), \"yyyy-MM-dd HH:mm:ss\")}\r\n                      </div>\r\n                    )}\r\n                    {detailComment.reviewed_at && (\r\n                      <div className=\"text-sm text-muted-foreground\">\r\n                        人工审核时间: {format(new Date(detailComment.reviewed_at), \"yyyy-MM-dd HH:mm:ss\")}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Actions */}\r\n                <div className=\"flex gap-2 pt-4 border-t\">\r\n                  {detailComment.moderation_status !== \"approved\" && (\r\n                    <Button\r\n                      onClick={() => {\r\n                        moderateComment.mutate(\r\n                          { commentId: detailComment.id, action: \"approve\" },\r\n                          { onSuccess: () => setDetailComment(null) }\r\n                        );\r\n                      }}\r\n                      disabled={moderateComment.isPending}\r\n                      className=\"bg-green-600 hover:bg-green-700\"\r\n                    >\r\n                      <Check className=\"h-4 w-4 mr-2\" />\r\n                      通过\r\n                    </Button>\r\n                  )}\r\n                  {detailComment.moderation_status !== \"rejected\" && (\r\n                    <Button\r\n                      variant=\"destructive\"\r\n                      onClick={() => {\r\n                        moderateComment.mutate(\r\n                          { commentId: detailComment.id, action: \"reject\" },\r\n                          { onSuccess: () => setDetailComment(null) }\r\n                        );\r\n                      }}\r\n                      disabled={moderateComment.isPending}\r\n                    >\r\n                      <X className=\"h-4 w-4 mr-2\" />\r\n                      拒绝\r\n                    </Button>\r\n                  )}\r\n                  <Button variant=\"outline\" onClick={() => setDetailComment(null)}>\r\n                    关闭\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            </ScrollArea>\r\n          )}\r\n        </DialogContent>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminComments;\r\n"],"names":["ArchiveRestore","createLucideIcon","Archive","Bot","useAdminComments","viewMode","useQuery","query","supabase","comments","error","userIds","c","profiles","profileMap","p","restaurantIds","activityIds","restaurantMap","activityMap","restaurants","r","activities","a","comment","targetName","targetNameEn","targetNamePt","restaurant","activity","useModerateComment","toast","useToast","queryClient","useQueryClient","useMutation","commentId","action","user","statusMap","useBatchModerateComments","commentIds","_","variables","useArchiveComment","archived","useBatchArchiveComments","getRiskColor","score","getStatusBadge","status","Badge","jsx","getRiskReasonLabel","reason","AdminComments","t","i18n","useTranslation","useLocalizedContent","setViewMode","useState","searchQuery","setSearchQuery","selectedComments","setSelectedComments","detailComment","setDetailComment","isLoading","moderateComment","batchModerate","archiveComment","batchArchive","filteredComments","handleSelectAll","checked","handleSelectComment","prev","id","handleBatchAction","handleBatchArchive","getTargetLink","getLocalizedTargetName","stats","jsxs","MessageSquare","Card","CardContent","Tabs","v","TabsList","TabsTrigger","AlertTriangle","Check","X","Search","Input","e","CardHeader","CardTitle","CardDescription","Fragment","Button","Table","TableHeader","TableRow","TableHead","Checkbox","TableBody","TableCell","idx","Avatar","AvatarImage","AvatarFallback","User","Link","ExternalLink","format","Eye","Dialog","DialogContent","DialogHeader","DialogTitle","DialogDescription","ScrollArea","Star"],"mappings":"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","x_google_ignoreList":[0,1,2]}