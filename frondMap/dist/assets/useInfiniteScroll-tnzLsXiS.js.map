{"version":3,"file":"useInfiniteScroll-tnzLsXiS.js","sources":["../../src/hooks/useInfiniteScroll.ts"],"sourcesContent":["import { useState, useMemo, useCallback, useEffect, useRef } from \"react\";\r\n\r\ninterface UseInfiniteScrollProps<T> {\r\n  data: T[] | undefined;\r\n  initialItemsPerPage?: number;\r\n  incrementPerPage?: number;\r\n}\r\n\r\ninterface UseInfiniteScrollReturn<T> {\r\n  displayedData: T[];\r\n  hasMore: boolean;\r\n  loadMore: () => void;\r\n  reset: () => void;\r\n  totalItems: number;\r\n  displayedCount: number;\r\n  sentinelRef: React.RefObject<HTMLDivElement | null>;\r\n}\r\n\r\nexport function useInfiniteScroll<T>({\r\n  data,\r\n  initialItemsPerPage = 12,\r\n  incrementPerPage = 12,\r\n}: UseInfiniteScrollProps<T>): UseInfiniteScrollReturn<T> {\r\n  const [displayedCount, setDisplayedCount] = useState(initialItemsPerPage);\r\n  const sentinelRef = useRef<HTMLDivElement>(null);\r\n\r\n  const totalItems = data?.length || 0;\r\n\r\n  const displayedData = useMemo(() => {\r\n    if (!data) return [];\r\n    return data.slice(0, displayedCount);\r\n  }, [data, displayedCount]);\r\n\r\n  const hasMore = displayedCount < totalItems;\r\n\r\n  const loadMore = useCallback(() => {\r\n    setDisplayedCount((prev) => {\r\n      const newCount = prev + incrementPerPage;\r\n      return Math.min(newCount, data?.length || prev);\r\n    });\r\n  }, [incrementPerPage, data?.length]);\r\n\r\n  const reset = useCallback(() => {\r\n    setDisplayedCount(initialItemsPerPage);\r\n  }, [initialItemsPerPage]);\r\n\r\n  // IntersectionObserver for auto-loading\r\n  useEffect(() => {\r\n    const sentinel = sentinelRef.current;\r\n    if (!sentinel || !hasMore) return;\r\n\r\n    const observer = new IntersectionObserver(\r\n      (entries) => {\r\n        if (entries[0].isIntersecting && hasMore) {\r\n          loadMore();\r\n        }\r\n      },\r\n      { threshold: 0.1 }\r\n    );\r\n\r\n    observer.observe(sentinel);\r\n\r\n    return () => {\r\n      observer.disconnect();\r\n    };\r\n  }, [hasMore, loadMore]);\r\n\r\n  return {\r\n    displayedData,\r\n    hasMore,\r\n    loadMore,\r\n    reset,\r\n    totalItems,\r\n    displayedCount,\r\n    sentinelRef,\r\n  };\r\n}\r\n"],"names":["useInfiniteScroll","data","initialItemsPerPage","incrementPerPage","displayedCount","setDisplayedCount","useState","sentinelRef","useRef","totalItems","displayedData","useMemo","hasMore","loadMore","useCallback","prev","newCount","reset","useEffect","sentinel","observer","entries"],"mappings":"+CAkBO,SAASA,EAAqB,CACnC,KAAAC,EACA,oBAAAC,EAAsB,GACtB,iBAAAC,EAAmB,EACrB,EAA0D,CACxD,KAAM,CAACC,EAAgBC,CAAiB,EAAIC,WAASJ,CAAmB,EAClEK,EAAcC,SAAuB,IAAI,EAEzCC,EAAaR,GAAM,QAAU,EAE7BS,EAAgBC,EAAAA,QAAQ,IACvBV,EACEA,EAAK,MAAM,EAAGG,CAAc,EADjB,GAEjB,CAACH,EAAMG,CAAc,CAAC,EAEnBQ,EAAUR,EAAiBK,EAE3BI,EAAWC,EAAAA,YAAY,IAAM,CACjCT,EAAmBU,GAAS,CAC1B,MAAMC,EAAWD,EAAOZ,EACxB,OAAO,KAAK,IAAIa,EAAUf,GAAM,QAAUc,CAAI,CAAA,CAC/C,CACA,EAAA,CAACZ,EAAkBF,GAAM,MAAM,CAAC,EAE7BgB,EAAQH,EAAAA,YAAY,IAAM,CAC9BT,EAAkBH,CAAmB,CAAA,EACpC,CAACA,CAAmB,CAAC,EAGxBgB,OAAAA,EAAAA,UAAU,IAAM,CACd,MAAMC,EAAWZ,EAAY,QACzB,GAAA,CAACY,GAAY,CAACP,EAAS,OAE3B,MAAMQ,EAAW,IAAI,qBAClBC,GAAY,CACPA,EAAQ,CAAC,EAAE,gBAAkBT,GACtBC,GAEb,EACA,CAAE,UAAW,EAAI,CAAA,EAGnB,OAAAO,EAAS,QAAQD,CAAQ,EAElB,IAAM,CACXC,EAAS,WAAW,CAAA,CACtB,EACC,CAACR,EAASC,CAAQ,CAAC,EAEf,CACL,cAAAH,EACA,QAAAE,EACA,SAAAC,EACA,MAAAI,EACA,WAAAR,EACA,eAAAL,EACA,YAAAG,CAAA,CAEJ"}