{"version":3,"file":"RestaurantRedirect-CgvbT3tP.js","sources":["../../src/pages/RestaurantRedirect.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { Loader2 } from \"lucide-react\";\r\n\r\nconst RestaurantRedirect = () => {\r\n  const { keyId } = useParams<{ keyId: string }>();\r\n  const navigate = useNavigate();\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    const findRestaurant = async () => {\r\n      if (!keyId) {\r\n        setError(\"Key ID not provided\");\r\n        return;\r\n      }\r\n\r\n      const { data, error: fetchError } = await supabase\r\n        .from(\"restaurants\")\r\n        .select(\"id\")\r\n        .eq(\"key_id\", keyId)\r\n        .maybeSingle();\r\n\r\n      if (fetchError) {\r\n        setError(\"Failed to find restaurant\");\r\n        return;\r\n      }\r\n\r\n      if (!data) {\r\n        setError(\"Restaurant not found\");\r\n        return;\r\n      }\r\n\r\n      // Redirect to the restaurant detail page\r\n      navigate(`/restaurant/${data.id}`, { replace: true });\r\n    };\r\n\r\n    findRestaurant();\r\n  }, [keyId, navigate]);\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center min-h-[60vh] gap-4\">\r\n        <p className=\"text-lg text-destructive\">{error}</p>\r\n        <button\r\n          onClick={() => navigate(\"/restaurants\")}\r\n          className=\"text-primary hover:underline\"\r\n        >\r\n          Browse all restaurants\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex items-center justify-center min-h-[60vh]\">\r\n      <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RestaurantRedirect;\r\n"],"names":["RestaurantRedirect","keyId","useParams","navigate","useNavigate","error","setError","useState","useEffect","data","fetchError","supabase","jsxs","jsx","Loader2"],"mappings":"oQAKA,MAAMA,EAAqB,IAAM,CACzB,KAAA,CAAE,MAAAC,GAAUC,IACZC,EAAWC,IACX,CAACC,EAAOC,CAAQ,EAAIC,WAAwB,IAAI,EAgCtD,OA9BAC,EAAAA,UAAU,IAAM,EACS,SAAY,CACjC,GAAI,CAACP,EAAO,CACVK,EAAS,qBAAqB,EAC9B,MACF,CAEA,KAAM,CAAE,KAAAG,EAAM,MAAOC,CAAW,EAAI,MAAMC,EACvC,KAAK,aAAa,EAClB,OAAO,IAAI,EACX,GAAG,SAAUV,CAAK,EAClB,cAEH,GAAIS,EAAY,CACdJ,EAAS,2BAA2B,EACpC,MACF,CAEA,GAAI,CAACG,EAAM,CACTH,EAAS,sBAAsB,EAC/B,MACF,CAGAH,EAAS,eAAeM,EAAK,EAAE,GAAI,CAAE,QAAS,GAAM,CAAA,IAGvC,EACd,CAACR,EAAOE,CAAQ,CAAC,EAEhBE,EAEAO,EAAA,KAAC,MAAI,CAAA,UAAU,+DACb,SAAA,CAACC,EAAA,IAAA,IAAA,CAAE,UAAU,2BAA4B,SAAMR,EAAA,EAC/CQ,EAAA,IAAC,SAAA,CACC,QAAS,IAAMV,EAAS,cAAc,EACtC,UAAU,+BACX,SAAA,wBAAA,CAED,CACF,CAAA,CAAA,EAKFU,EAAA,IAAC,OAAI,UAAU,gDACb,eAACC,EAAQ,CAAA,UAAU,4CAA6C,CAAA,CAClE,CAAA,CAEJ"}