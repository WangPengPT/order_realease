import{c as oe,u as F,a as le,r as c,j as e,D as re,b as ie,d as ne,e as ce,I as de,B as P,L as V,S as ue,X as me,f as A,C as xe,g as w,h as q,H as he,M as pe,i as ge}from"./index-B9cY5t1p.js";import{m as fe}from"./map-icon-DR07RZr_.js";import{u as be}from"./useHomepageTemplates-D5tV85lx.js";import{u as je,i as ye,a as ve}from"./externalLinks-GW9pcgVk.js";import{M as R}from"./message-circle-FANX-YSW.js";import{S as we}from"./shopping-bag-C2faTDDo.js";import{C as Ne}from"./calendar-check-BZrgSVGb.js";import{A as ke}from"./arrow-right-btpqcLDz.js";import{S as X}from"./search-CXx_lIvB.js";import{S as _e}from"./star-w6qzoqne.js";import{D as Ce}from"./download-awzI-tMM.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=oe("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),W="/assets/sushi-ramen-hero-kMMmiTPz.jpg",J="/assets/sushi-ramen-mobile-BHV96LaL.jpg",ze="/assets/google-play-badge-BAXiFmDF.png",Ie="https://tzdgqhwyzsxkxnncgzap.supabase.co",H="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR6ZGdxaHd5enN4a3hubmNnemFwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM2NTg2ODgsImV4cCI6MjA3OTIzNDY4OH0.D76C4OkjQVWyMxtjjdOofpD8X_hEEoTtrXHqi4XSYUw",Be=({open:t,onOpenChange:p})=>{const{i18n:s}=F(),x=le(),[h,j]=c.useState(""),[b,C]=c.useState(""),[d,z]=c.useState(!1),[u,I]=c.useState(null),y=c.useRef(null),B=async()=>{if(!(!h.trim()||d)){z(!0),I(null),C(""),y.current&&y.current.abort(),y.current=new AbortController;try{const o=await fetch(`${Ie}/functions/v1/ask-xiaoxiong`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${H}`,apikey:H},body:JSON.stringify({text:h.trim(),stream:!0}),signal:y.current.signal});if(!o.ok)throw new Error(`Request failed with status: ${o.status}`);if(!o.body)throw new Error("No response body");const l=o.body.getReader(),m=new TextDecoder;let r="";for(;;){const{done:N,value:k}=await l.read();if(N)break;const n=m.decode(k,{stream:!0});r+=n;let g=r;g.startsWith('"')&&(g=g.slice(1)),g.endsWith('"')&&(g=g.slice(0,-1)),g=g.replace(/\\n/g,`
`),C(g)}let a=r;a.startsWith('"')&&(a=a.slice(1)),a.endsWith('"')&&(a=a.slice(0,-1)),a=a.replace(/\\n/g,`
`),C(a)}catch(o){if(o instanceof Error&&o.name==="AbortError"){console.log("Request aborted");return}console.error("Ask API error:",o),I(s.language==="zh"?"抱歉，暂时无法获取结果，请稍后再试":s.language==="pt"?"Desculpe, não foi possível obter resultados. Tente novamente mais tarde.":"Sorry, unable to get results. Please try again later.")}finally{z(!1)}}},S=o=>{o.key==="Enter"&&!o.shiftKey&&(o.preventDefault(),B())},_=()=>{y.current&&y.current.abort(),p(!1),setTimeout(()=>{j(""),C(""),I(null)},300)},D=o=>{_(),x(o)},i=o=>{const l=/\[([^\]]+)\]\(([^)]+)\)/g,m=[];let r=0,a,N=0;for(;(a=l.exec(o))!==null;){a.index>r&&m.push(e.jsx("span",{children:o.slice(r,a.index)},N++));const k=a[1],n=a[2];n.startsWith("/")?m.push(e.jsx("button",{onClick:()=>D(n),className:"text-primary hover:underline font-medium cursor-pointer",children:k},N++)):m.push(e.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline font-medium",children:k},N++)),r=a.index+a[0].length}return r<o.length&&m.push(e.jsx("span",{children:o.slice(r)},N++)),m.length>0?m:[e.jsx("span",{children:o},"0")]},f=o=>{const l=o.split(`
`),m=[];return l.forEach((r,a)=>{if(r.startsWith("### "))m.push(e.jsx("h3",{className:"text-lg font-semibold mt-4 mb-2 text-foreground",children:i(r.slice(4))},a));else if(r.startsWith("## "))m.push(e.jsx("h2",{className:"text-xl font-bold mt-5 mb-3 text-foreground",children:i(r.slice(3))},a));else if(r.startsWith("# "))m.push(e.jsx("h1",{className:"text-2xl font-bold mt-6 mb-4 text-foreground",children:i(r.slice(2))},a));else if(r.includes("**")){const N=r.split(/\*\*(.*?)\*\*/g);m.push(e.jsx("p",{className:"mb-2 text-foreground/90 leading-relaxed",children:N.map((k,n)=>n%2===1?e.jsx("strong",{className:"font-semibold text-foreground",children:i(k)},n):i(k))},a))}else r.startsWith("- ")||r.startsWith("* ")?m.push(e.jsx("li",{className:"ml-4 mb-1 text-foreground/90 list-disc",children:i(r.slice(2))},a)):/^\d+\.\s/.test(r)?m.push(e.jsx("li",{className:"ml-4 mb-1 text-foreground/90 list-decimal",children:i(r.replace(/^\d+\.\s/,""))},a)):r.match(/^[-*_]{3,}$/)?m.push(e.jsx("hr",{className:"my-4 border-border"},a)):r.trim()===""?m.push(e.jsx("div",{className:"h-2"},a)):m.push(e.jsx("p",{className:"mb-2 text-foreground/90 leading-relaxed",children:i(r)},a))}),m},v=()=>s.language==="zh"?"告诉小熊，你想吃什么？":s.language==="pt"?"Diga ao Xiaoxiong o que quer comer.":"Tell Xiaoxiong what you want to eat.",T=()=>s.language==="zh"?"例如：我想吃火锅...":s.language==="pt"?"Ex: Quero comer hotpot...":"e.g., I want to eat hotpot...";return e.jsx(re,{open:t,onOpenChange:_,children:e.jsxs(ie,{className:"sm:max-w-xl max-h-[80vh] flex flex-col p-0 gap-0 overflow-hidden",children:[e.jsx(ne,{className:"px-6 pt-6 pb-4 border-b shrink-0",children:e.jsxs(ce,{className:"flex items-center gap-2 text-xl",children:[e.jsx(R,{className:"h-5 w-5 text-primary"}),v()]})}),e.jsx("div",{className:"p-4 border-b bg-muted/30 shrink-0",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(de,{value:h,onChange:o=>j(o.target.value),onKeyDown:S,placeholder:T(),disabled:d,className:"flex-1",autoFocus:!0}),e.jsx(P,{onClick:B,disabled:!h.trim()||d,size:"icon",className:"shrink-0",children:d?e.jsx(V,{className:"h-4 w-4 animate-spin"}):e.jsx(ue,{className:"h-4 w-4"})})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto min-h-0",children:e.jsxs("div",{className:"p-6",children:[d&&!b&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-muted-foreground",children:[e.jsx(V,{className:"h-8 w-8 animate-spin mb-4"}),e.jsx("p",{children:s.language==="zh"?"小熊正在思考中...":s.language==="pt"?"O Xiaoxiong está pensando...":"Xiaoxiong is thinking..."})]}),u&&e.jsx("div",{className:"flex flex-col items-center justify-center py-12",children:e.jsxs("div",{className:"p-4 rounded-lg bg-destructive/10 text-destructive text-center",children:[e.jsx(me,{className:"h-8 w-8 mx-auto mb-2"}),e.jsx("p",{children:u})]})}),b&&e.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:e.jsxs("div",{className:"p-4 rounded-lg bg-primary/5 border border-primary/10",children:[f(b),d&&e.jsx("span",{className:"inline-block w-2 h-4 bg-primary/50 animate-pulse ml-1"})]})}),!b&&!d&&!u&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-muted-foreground text-center",children:[e.jsx(R,{className:"h-12 w-12 mb-4 opacity-50"}),e.jsx("p",{className:"text-lg mb-2",children:s.language==="zh"?"输入你想吃的，小熊帮你找":s.language==="pt"?"Digite o que quer comer, o Xiaoxiong vai ajudar":"Type what you want to eat, Xiaoxiong will help"}),e.jsx("p",{className:"text-sm",children:s.language==="zh"?"例如：火锅、寿司、韩国烤肉...":s.language==="pt"?"Ex: Hotpot, Sushi, Churrasco coreano...":"e.g., Hotpot, Sushi, Korean BBQ..."})]})]})})]})})},G=c.memo(({stats:t,t:p})=>e.jsx("div",{className:"absolute top-3 sm:top-4 left-3 z-20",children:e.jsxs("div",{className:"gap-4 w-fit flex-col flex items-start justify-start",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(we,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"text-sm text-white/90 drop-shadow-md",children:p("home.stats.delivery")}),e.jsx("span",{className:"font-bold text-white text-sm drop-shadow-md",children:t.order_count})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"w-4 h-4 text-accent"}),e.jsx("span",{className:"text-sm text-white/90 drop-shadow-md",children:p("home.stats.reservation")}),e.jsx("span",{className:"font-bold text-white text-sm drop-shadow-md",children:t.reserve_count})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xl sm:text-2xl font-bold text-white drop-shadow-md",children:p("home.hero.brandName")}),e.jsx("img",{src:fe,alt:"map icon",className:"w-5 sm:w-8 h-5 sm:h-8 object-contain flex-shrink-0"})]})]})}));G.displayName="StatsDisplay";const M=c.memo(({to:t,Icon:p,title:s,desc:x,iconBg:h,iconColor:j,hoverBorderColor:b})=>e.jsx(A,{to:t,children:e.jsxs(xe,{className:`group p-6 sm:p-8 border-border/50 ${b} transition-all hover:shadow-large cursor-pointer h-full`,children:[e.jsx("div",{className:`w-14 sm:w-16 h-14 sm:h-16 rounded-2xl ${h} flex items-center justify-center mb-4 sm:mb-6 group-hover:scale-110 transition-transform`,children:e.jsx(p,{className:`w-7 sm:w-8 h-7 sm:h-8 ${j}`})}),e.jsx("h3",{className:"text-xl sm:text-2xl font-semibold mb-2 sm:mb-3 text-card-foreground",children:s}),e.jsxs("p",{className:"text-sm sm:text-base text-muted-foreground leading-relaxed flex items-center gap-2",children:[x,e.jsx(ke,{className:"w-4 h-4 flex-shrink-0 group-hover:translate-x-1 transition-transform"})]})]})}));M.displayName="FeatureCard";const De=()=>{var b;const t=window.innerWidth<640,p=window.innerWidth>=1024,s=navigator.connection,x=window.Capacitor,h=ye(),j=ve();return console.log("[LightweightMode] Detection:",{isCapacitorApp:h,isInWebView:j,hasCapacitor:!!x,capacitorDetails:x?{isNativePlatform:x.isNativePlatform,isNative:x.isNative,platform:(b=x.getPlatform)==null?void 0:b.call(x)}:null,userAgent:navigator.userAgent.substring(0,100)}),p?!!(s!=null&&s.saveData):j&&!h?(console.log("[LightweightMode] WebView detected (not Capacitor), using lightweight mode"),!0):s&&(s.saveData||s.effectiveType==="2g"||s.effectiveType==="slow-2g")||t&&navigator.deviceMemory&&navigator.deviceMemory<2?!0:(console.log("[LightweightMode] Normal mode, videos enabled"),!1)},K=c.memo(({template:t,isActive:p,currentLang:s,t:x,onContentReady:h,onAskXiaoxiong:j})=>{const[b,C]=c.useState({}),[d,z]=c.useState({}),[u,I]=c.useState({mobile:!0,tablet:!0,desktop:!0}),[y,B]=c.useState(!1),S=De(),_=n=>t[`${n}${s==="zh"?"_zh":s==="pt"?"_pt":"_en"}`]||"",D=()=>window.innerWidth<640?"mobile":window.innerWidth<1024?"tablet":"desktop",i=()=>{const n=D();return n==="mobile"&&t.mobile_overlay_opacity!==null?t.mobile_overlay_opacity:n==="tablet"&&t.tablet_overlay_opacity!==null?t.tablet_overlay_opacity:n==="desktop"&&t.desktop_overlay_opacity!==null?t.desktop_overlay_opacity:t.overlay_opacity??30},f=()=>{const n=i(),g=t.overlay_gradient_direction||"to-b",L=(O,ae)=>O==null?ae/100:O>1?O/100:O,$=n>1?n/100:n,U=L(t.overlay_gradient_from_opacity,30)*$,Y=L(t.overlay_gradient_via_opacity,25)*$,Q=L(t.overlay_gradient_to_opacity,40)*$,Z={"to-t":"to top","to-b":"to bottom","to-l":"to left","to-r":"to right","to-tl":"to top left","to-tr":"to top right","to-bl":"to bottom left","to-br":"to bottom right"}[g]||"to bottom",E={black:"0, 0, 0",white:"255, 255, 255",background:"0, 0, 0",foreground:"255, 255, 255",primary:"1, 100, 80",secondary:"240, 240, 240"},ee=E[t.overlay_gradient_from||"black"]||"0, 0, 0",te=E[t.overlay_gradient_via||"black"]||"0, 0, 0",se=E[t.overlay_gradient_to||"black"]||"0, 0, 0";return{background:`linear-gradient(${Z}, rgba(${ee}, ${U}), rgba(${te}, ${Y}), rgba(${se}, ${Q}))`}},v=t.mobile_image_url||J,T=t.tablet_image_url||t.desktop_image_url||W,o=t.desktop_image_url||W,l=t.background_blur||0,m=t.media_type==="video"&&!S,r=S?null:t.mobile_video_url,a=S?null:t.tablet_video_url||t.desktop_video_url,N=S?null:t.desktop_video_url;c.useEffect(()=>{const n=D(),g=n==="mobile"?v:n==="tablet"?T:o;if(g){const L=new Image;L.onload=()=>{C($=>({...$,[n]:!0})),I($=>({...$,[n]:!0})),p&&(h==null||h(),setTimeout(()=>B(!0),100))},L.src=g}},[v,T,o,p,h]),c.useEffect(()=>{p&&b[D()]&&B(!0)},[p,b]);const k=n=>{z(g=>({...g,[n]:!0}))};return e.jsxs("div",{className:w("absolute inset-0 w-full h-full transition-opacity duration-1000",p?"opacity-100 z-10":"opacity-0 z-0"),children:[e.jsxs("div",{className:"absolute inset-0 w-full h-full",children:[m?e.jsxs(e.Fragment,{children:[r&&e.jsxs("div",{className:"absolute inset-0 w-full h-full sm:hidden",children:[!u.mobile&&e.jsx("div",{className:"absolute inset-0 w-full h-full bg-muted animate-pulse z-20"}),e.jsx("img",{src:v,alt:"Background",className:w("absolute inset-0 w-full h-full object-cover object-center z-10 transition-opacity duration-500",d.mobile?"opacity-0 pointer-events-none":"opacity-100"),style:{filter:l>0?`blur(${l}px)`:void 0}}),y&&e.jsx("video",{src:r,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,preload:"auto",onCanPlay:()=>k("mobile"),className:"absolute inset-0 w-full h-full object-cover object-center",style:{filter:l>0?`blur(${l}px)`:void 0}})]}),!r&&e.jsxs("div",{className:"absolute inset-0 w-full h-full sm:hidden",children:[!u.mobile&&e.jsx("div",{className:"absolute inset-0 w-full h-full bg-muted animate-pulse z-20"}),e.jsx("img",{src:v,alt:"Background",className:w("absolute inset-0 w-full h-full object-cover object-center transition-opacity duration-500",u.mobile?"opacity-100":"opacity-0"),style:{filter:l>0?`blur(${l}px)`:void 0}})]}),a&&e.jsxs("div",{className:"absolute inset-0 w-full h-full hidden sm:block lg:hidden",children:[!u.tablet&&e.jsx("div",{className:"absolute inset-0 w-full h-full bg-muted animate-pulse z-20"}),e.jsx("img",{src:T,alt:"Background",className:w("absolute inset-0 w-full h-full object-cover object-center z-10 transition-opacity duration-500",d.tablet?"opacity-0 pointer-events-none":"opacity-100"),style:{filter:l>0?`blur(${l}px)`:void 0}}),y&&e.jsx("video",{src:a,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,preload:"auto",onCanPlay:()=>k("tablet"),className:"absolute inset-0 w-full h-full object-cover object-center",style:{filter:l>0?`blur(${l}px)`:void 0}})]}),!a&&e.jsxs("div",{className:"absolute inset-0 w-full h-full hidden sm:block lg:hidden",children:[!u.tablet&&e.jsx("div",{className:"absolute inset-0 w-full h-full bg-muted animate-pulse z-20"}),e.jsx("img",{src:T,alt:"Background",className:w("absolute inset-0 w-full h-full object-cover object-center transition-opacity duration-500",u.tablet?"opacity-100":"opacity-0"),style:{filter:l>0?`blur(${l}px)`:void 0}})]}),N&&e.jsxs("div",{className:"absolute inset-0 w-full h-full hidden lg:block",children:[!u.desktop&&e.jsx("div",{className:"absolute inset-0 w-full h-full bg-muted animate-pulse z-20"}),e.jsx("img",{src:o,alt:"Background",className:w("absolute inset-0 w-full h-full object-cover object-center z-10 transition-opacity duration-500",d.desktop?"opacity-0 pointer-events-none":"opacity-100"),style:{filter:l>0?`blur(${l}px)`:void 0}}),y&&e.jsx("video",{src:N,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,preload:"auto",onCanPlay:()=>k("desktop"),className:"absolute inset-0 w-full h-full object-cover object-center",style:{filter:l>0?`blur(${l}px)`:void 0}})]}),!N&&e.jsxs("div",{className:"absolute inset-0 w-full h-full hidden lg:block",children:[!u.desktop&&e.jsx("div",{className:"absolute inset-0 w-full h-full bg-muted animate-pulse z-20"}),e.jsx("img",{src:o,alt:"Background",className:w("absolute inset-0 w-full h-full object-cover object-center transition-opacity duration-500",u.desktop?"opacity-100":"opacity-0"),style:{filter:l>0?`blur(${l}px)`:void 0}})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"absolute inset-0 w-full h-full sm:hidden",children:[!u.mobile&&e.jsx("div",{className:"absolute inset-0 w-full h-full bg-muted animate-pulse z-20"}),e.jsx("img",{src:v,alt:"Background",className:w("absolute inset-0 w-full h-full object-cover object-center transition-opacity duration-500",u.mobile?"opacity-100":"opacity-0"),style:{filter:l>0?`blur(${l}px)`:void 0}})]}),e.jsxs("div",{className:"absolute inset-0 w-full h-full hidden sm:block lg:hidden",children:[!u.tablet&&e.jsx("div",{className:"absolute inset-0 w-full h-full bg-muted animate-pulse z-20"}),e.jsx("img",{src:T,alt:"Background",className:w("absolute inset-0 w-full h-full object-cover object-center transition-opacity duration-500",u.tablet?"opacity-100":"opacity-0"),style:{filter:l>0?`blur(${l}px)`:void 0}})]}),e.jsxs("div",{className:"absolute inset-0 w-full h-full hidden lg:block",children:[!u.desktop&&e.jsx("div",{className:"absolute inset-0 w-full h-full bg-muted animate-pulse z-20"}),e.jsx("img",{src:o,alt:"Background",className:w("absolute inset-0 w-full h-full object-cover object-center transition-opacity duration-500",u.desktop?"opacity-100":"opacity-0"),style:{filter:l>0?`blur(${l}px)`:void 0}})]})]}),e.jsx("div",{className:"absolute inset-0 w-full h-full",style:f()})]}),e.jsx("div",{className:"relative z-10 container mx-auto px-4 sm:px-6 flex items-center min-h-screen",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center space-y-4 sm:space-y-8 animate-fade-in w-full",children:[t.subtitle_button_text_zh&&e.jsx("div",{className:"flex justify-center",children:e.jsxs("button",{onClick:j,className:"group flex items-center gap-3 bg-white/95 backdrop-blur-sm text-muted-foreground px-4 sm:px-6 py-3 sm:py-4 rounded-full shadow-lg hover:shadow-2xl hover:bg-white transition-all duration-300 cursor-text border border-border/20",children:[e.jsx(R,{className:"w-5 h-5 text-primary/70 group-hover:text-primary transition-colors"}),e.jsx("span",{className:"text-sm sm:text-base text-muted-foreground/80 group-hover:text-muted-foreground transition-colors",children:_("subtitle_button_text")||x("home.hero.subtitle")}),e.jsx(X,{className:"w-4 h-4 text-muted-foreground/50 ml-2"})]})}),e.jsx("h1",{className:"text-3xl sm:text-5xl md:text-7xl font-bold text-white leading-tight px-4 drop-shadow-[0_2px_8px_rgba(0,0,0,0.8)]",children:_("title")||x("home.hero.title")}),e.jsx("p",{className:"text-sm sm:text-xl md:text-2xl text-white/95 max-w-2xl mx-auto px-4 drop-shadow-[0_2px_6px_rgba(0,0,0,0.7)]",children:_("description")||x("home.hero.description")}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center pt-2 sm:pt-4 px-4",children:[e.jsx(P,{size:"lg",asChild:!0,className:"text-base sm:text-lg shadow-lg hover:shadow-2xl hover:scale-105 transition-all w-full sm:w-auto",children:e.jsxs(A,{to:t.primary_button_link||"/restaurants",children:[e.jsx(X,{className:"mr-2 w-4 sm:w-5 h-4 sm:h-5"}),_("primary_button_text")||x("home.hero.exploreBtn")]})}),e.jsx(P,{size:"lg",variant:"outline",asChild:!0,className:"text-base sm:text-lg w-full sm:w-auto backdrop-blur-sm hover:border-transparent hover:scale-105 transition-all",children:e.jsxs(A,{to:t.secondary_button_link||"/activities",children:[e.jsx(q,{className:"mr-2 w-4 sm:w-5 h-4 sm:h-5"}),_("secondary_button_text")||x("home.hero.activitiesBtn")]})})]})]})})]})});K.displayName="HeroSlide";const He=()=>{const{t,i18n:p}=F(),{data:s,isLoading:x}=be(),[h,j]=c.useState(0),[b,C]=c.useState(null),d=c.useRef(null),[z,u]=c.useState(!1),[I,y]=c.useState(!1),B=c.useCallback(()=>{u(!0)},[]);je({pageType:"home"}),c.useEffect(()=>{(async()=>{try{const v=await(await fetch("https://v.xiaoxiong.pt/api/get_info")).json();v&&C({order_count:v.order_count||0,reserve_count:v.reserve_count||0})}catch(f){console.error("Failed to fetch stats:",f)}})()},[]),c.useEffect(()=>{if(!s||s.length<=1)return;const i=s[h],f=(i==null?void 0:i.duration)||5e3;return d.current=setTimeout(()=>{j(v=>(v+1)%s.length)},f),()=>{d.current&&clearTimeout(d.current)}},[s,h]);const S=c.useCallback(i=>{d.current&&clearTimeout(d.current),j(i)},[]);c.useCallback(()=>{s&&(d.current&&clearTimeout(d.current),j(i=>(i-1+s.length)%s.length))},[s]),c.useCallback(()=>{s&&(d.current&&clearTimeout(d.current),j(i=>(i+1)%s.length))},[s]);const _=p.language,D=s&&s.length>1;return e.jsxs("div",{className:"min-h-screen",children:[e.jsxs("section",{className:"relative min-h-screen flex items-start overflow-hidden bg-background",children:[b&&e.jsx(G,{stats:b,t}),e.jsx("div",{className:w("absolute inset-0 w-full h-full transition-opacity duration-500",z?"opacity-100":"opacity-0"),children:s==null?void 0:s.map((i,f)=>e.jsx(K,{template:i,isActive:f===h,currentLang:_,t,onContentReady:f===0?B:void 0,onAskXiaoxiong:()=>y(!0)},i.id))}),e.jsx("div",{className:w("absolute inset-0 w-full h-full z-20 transition-opacity duration-500",x||!z?"opacity-100":"opacity-0 pointer-events-none"),children:e.jsx(he,{})}),!x&&(!s||s.length===0)&&e.jsxs("div",{className:"absolute inset-0 w-full h-full",children:[e.jsx("img",{src:J,alt:"Background",className:"absolute inset-0 w-full h-full object-cover object-center sm:hidden"}),e.jsx("img",{src:W,alt:"Background",className:"absolute inset-0 w-full h-full object-cover object-center hidden sm:block"}),e.jsx("div",{className:"absolute inset-0 w-full h-full bg-gradient-to-b from-black/30 via-black/25 to-black/40"}),e.jsx("div",{className:"relative z-10 container mx-auto px-4 sm:px-6 flex items-center min-h-screen",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center space-y-4 sm:space-y-8 animate-fade-in w-full",children:[e.jsx("h1",{className:"text-3xl sm:text-5xl md:text-7xl font-bold text-white leading-tight px-4 drop-shadow-[0_2px_8px_rgba(0,0,0,0.8)]",children:t("home.hero.title")}),e.jsx("p",{className:"text-sm sm:text-xl md:text-2xl text-white/95 max-w-2xl mx-auto px-4 drop-shadow-[0_2px_6px_rgba(0,0,0,0.7)]",children:t("home.hero.description")})]})})]}),D&&e.jsx("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 z-30 flex gap-2",children:s.map((i,f)=>e.jsx("button",{onClick:()=>S(f),className:w("w-3 h-3 rounded-full transition-all duration-300",f===h?"bg-white w-8":"bg-white/50 hover:bg-white/70"),"aria-label":`Go to slide ${f+1}`},f))})]}),e.jsx("section",{className:"py-16 sm:py-24 px-4 bg-secondary/20",children:e.jsxs("div",{className:"container mx-auto max-w-6xl",children:[e.jsxs("div",{className:"text-center mb-12 sm:mb-16",children:[e.jsx("h2",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-foreground mb-3 sm:mb-4",children:t("home.features.title")}),e.jsx("p",{className:"text-base sm:text-lg text-muted-foreground max-w-2xl mx-auto px-4",children:t("home.features.description")})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 sm:gap-8",children:[e.jsx(M,{to:"/map",Icon:pe,title:t("home.features.map.title"),desc:t("home.features.map.desc"),iconBg:"bg-gradient-to-br from-primary to-primary-light",iconColor:"text-primary-foreground",hoverBorderColor:"hover:border-primary/50"}),e.jsx(M,{to:"/restaurants",Icon:_e,title:t("home.features.reviews.title"),desc:t("home.features.reviews.desc"),iconBg:"bg-gradient-to-br from-accent to-warning",iconColor:"text-accent-foreground",hoverBorderColor:"hover:border-accent/50"}),e.jsx("div",{className:"sm:col-span-2 md:col-span-1",children:e.jsx(M,{to:"/activities",Icon:q,title:t("home.features.events.title"),desc:t("home.features.events.desc"),iconBg:"bg-gradient-to-br from-success to-accent",iconColor:"text-white",hoverBorderColor:"hover:border-success/50"})})]})]})}),e.jsxs("section",{className:"py-16 sm:py-24 px-4 bg-gradient-to-br from-primary/5 via-background to-primary/10 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-1/4 w-72 h-72 bg-primary/10 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 right-1/4 w-96 h-96 bg-primary/5 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute top-1/2 left-0 w-32 h-32 bg-primary/20 rounded-full blur-2xl -translate-y-1/2"}),e.jsx("div",{className:"absolute top-1/2 right-0 w-32 h-32 bg-primary/20 rounded-full blur-2xl -translate-y-1/2"}),e.jsx("div",{className:"container mx-auto max-w-5xl relative z-10",children:e.jsx("div",{className:"flex flex-col items-center justify-center gap-8",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 bg-primary/10 text-primary text-sm font-medium px-4 py-2 rounded-full mb-4",children:[e.jsx(Se,{className:"w-4 h-4"}),e.jsx("span",{children:"Mobile App"})]}),e.jsx("h3",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-foreground mb-4",children:t("home.app.title")}),e.jsx("p",{className:"text-base sm:text-lg text-muted-foreground mb-8 leading-relaxed",children:t("home.app.description")}),e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsxs("a",{href:"https://play.google.com/store/apps/details?id=com.xiaoxiong.market",target:"_blank",rel:"noopener noreferrer",className:"relative group",children:[e.jsx("div",{className:"absolute -inset-2 bg-gradient-to-r from-primary via-primary-glow to-primary rounded-2xl blur-lg opacity-40 group-hover:opacity-70 transition-opacity"}),e.jsx("div",{className:"relative bg-black hover:bg-gray-900 px-6 py-3 rounded-xl transition-all hover:scale-105 shadow-2xl hover:shadow-primary/30 border border-white/10",children:e.jsx("img",{src:ze,alt:"Get it on Google Play",className:"h-12 sm:h-14"})})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(Ce,{className:"w-4 h-4 animate-bounce"}),e.jsx("span",{children:t("home.app.downloadNow")})]})]})]})})})]}),e.jsxs("section",{className:"py-16 sm:py-20 px-4 bg-gradient-to-br from-primary via-primary-glow to-primary-light relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-grid-pattern opacity-10"}),e.jsx("div",{className:"absolute top-0 right-0 w-64 sm:w-96 h-64 sm:h-96 bg-white/5 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-64 sm:w-96 h-64 sm:h-96 bg-white/5 rounded-full blur-3xl"}),e.jsxs("div",{className:"container mx-auto max-w-4xl text-center relative z-10",children:[e.jsx("h2",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-primary-foreground mb-4 sm:mb-6 px-4",children:t("home.cta.title")}),e.jsx("p",{className:"text-base sm:text-xl text-primary-foreground/90 mb-6 sm:mb-8 max-w-2xl mx-auto px-4",children:t("home.cta.description")}),e.jsx("div",{className:"flex justify-center",children:e.jsx(P,{size:"lg",variant:"secondary",asChild:!0,className:"text-base sm:text-lg shadow-xl hover:shadow-2xl",children:e.jsxs(A,{to:"/join-us",children:[e.jsx(ge,{className:"mr-2 w-4 sm:w-5 h-4 sm:h-5"}),t("home.cta.button")]})})})]})]}),e.jsx(Be,{open:I,onOpenChange:y})]})};export{He as default};
