{"version":3,"file":"AdminPoints-B15EnqHf.js","sources":["../../src/components/admin/GrantPointsDialog.tsx","../../src/pages/admin/AdminPoints.tsx"],"sourcesContent":["import { useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport * as z from \"zod\";\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription } from \"@/components/ui/dialog\";\r\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Coins, Plus, Minus } from \"lucide-react\";\r\nimport { useAdminModifyPoints } from \"@/hooks/usePoints\";\r\nimport { toast } from \"sonner\";\r\n\r\nconst getFormSchema = (t: (key: string) => string) => z.object({\r\n  amount: z.number().min(1, t(\"admin.points.amountRequired\")),\r\n  reason: z.string().min(1, t(\"admin.points.reasonRequired\")),\r\n});\r\n\r\ntype FormData = z.infer<ReturnType<typeof getFormSchema>>;\r\n\r\ninterface GrantPointsDialogProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  user: any;\r\n  type: \"grant\" | \"deduct\";\r\n}\r\n\r\nexport const GrantPointsDialog = ({ open, onOpenChange, user, type }: GrantPointsDialogProps) => {\r\n  const { t } = useTranslation();\r\n  const modifyPoints = useAdminModifyPoints();\r\n  const formSchema = getFormSchema(t);\r\n\r\n  const form = useForm<z.infer<typeof formSchema>>({\r\n    resolver: zodResolver(formSchema),\r\n    defaultValues: {\r\n      amount: 10,\r\n      reason: \"\",\r\n    },\r\n  });\r\n\r\n  const onSubmit = async (data: FormData) => {\r\n    if (!user) return;\r\n\r\n    const amount = type === \"deduct\" ? -data.amount : data.amount;\r\n\r\n    try {\r\n      const result = await modifyPoints.mutateAsync({\r\n        userId: user.id,\r\n        amount,\r\n        reason: data.reason,\r\n      });\r\n\r\n      if (result.success) {\r\n        toast.success(\r\n          type === \"grant\" \r\n            ? t(\"admin.points.grantSuccess\") \r\n            : t(\"admin.points.deductSuccess\")\r\n        );\r\n        form.reset();\r\n        onOpenChange(false);\r\n      } else {\r\n        toast.error(result.error || t(\"common.error\"));\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error modifying points:\", error);\r\n      toast.error(t(\"common.error\"));\r\n    }\r\n  };\r\n\r\n  if (!user) return null;\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent>\r\n        <DialogHeader>\r\n          <DialogTitle className=\"flex items-center gap-2\">\r\n            {type === \"grant\" ? (\r\n              <>\r\n                <Plus className=\"h-5 w-5 text-green-500\" />\r\n                {t(\"admin.points.grantPoints\")}\r\n              </>\r\n            ) : (\r\n              <>\r\n                <Minus className=\"h-5 w-5 text-red-500\" />\r\n                {t(\"admin.points.deductPoints\")}\r\n              </>\r\n            )}\r\n          </DialogTitle>\r\n          <DialogDescription>\r\n            {t(\"admin.points.targetUser\")}: <strong>{user.display_name}</strong>\r\n            <br />\r\n            {t(\"admin.points.currentPoints\")}: <strong>{user.points}</strong>\r\n          </DialogDescription>\r\n        </DialogHeader>\r\n\r\n        <Form {...form}>\r\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\r\n            <FormField\r\n              control={form.control}\r\n              name=\"amount\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>{t(\"admin.points.amount\")}</FormLabel>\r\n                  <FormControl>\r\n                    <div className=\"relative\">\r\n                      <Coins className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n                      <Input \r\n                        type=\"number\" \r\n                        className=\"pl-10\"\r\n                        min={1}\r\n                        {...field}\r\n                        onChange={e => field.onChange(parseInt(e.target.value) || 0)}\r\n                      />\r\n                    </div>\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"reason\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>{t(\"admin.points.reason\")} *</FormLabel>\r\n                  <FormControl>\r\n                    <Textarea \r\n                      {...field} \r\n                      placeholder={\r\n                        type === \"grant\" \r\n                          ? t(\"admin.points.grantReasonPlaceholder\")\r\n                          : t(\"admin.points.deductReasonPlaceholder\")\r\n                      }\r\n                      rows={3}\r\n                    />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <div className=\"flex justify-end gap-2\">\r\n              <Button type=\"button\" variant=\"outline\" onClick={() => onOpenChange(false)}>\r\n                {t(\"common.cancel\")}\r\n              </Button>\r\n              <Button \r\n                type=\"submit\" \r\n                disabled={modifyPoints.isPending}\r\n                variant={type === \"deduct\" ? \"destructive\" : \"default\"}\r\n              >\r\n                {modifyPoints.isPending \r\n                  ? t(\"common.processing\") \r\n                  : type === \"grant\" \r\n                    ? t(\"admin.points.confirmGrant\")\r\n                    : t(\"admin.points.confirmDeduct\")\r\n                }\r\n              </Button>\r\n            </div>\r\n          </form>\r\n        </Form>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n","import { useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Coins, Search, Plus, Minus, History, Users } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\nimport { useAllPointsTransactions } from \"@/hooks/usePoints\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { GrantPointsDialog } from \"@/components/admin/GrantPointsDialog\";\r\nimport { format } from \"date-fns\";\r\nimport { toast } from \"sonner\";\r\n\r\nconst AdminPoints = () => {\r\n  const { t } = useTranslation();\r\n  const { data: transactions, isLoading } = useAllPointsTransactions();\r\n  \r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [searchResults, setSearchResults] = useState<any[]>([]);\r\n  const [isSearching, setIsSearching] = useState(false);\r\n  const [grantDialogOpen, setGrantDialogOpen] = useState(false);\r\n  const [selectedUser, setSelectedUser] = useState<any>(null);\r\n  const [grantType, setGrantType] = useState<\"grant\" | \"deduct\">(\"grant\");\r\n\r\n  const handleSearch = async () => {\r\n    if (!searchQuery.trim()) {\r\n      toast.error(t(\"admin.points.enterSearchTerm\"));\r\n      return;\r\n    }\r\n\r\n    setIsSearching(true);\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from(\"profiles\")\r\n        .select(\"id, display_name, avatar_url, points\")\r\n        .or(`display_name.ilike.%${searchQuery}%,id.eq.${searchQuery.match(/^[0-9a-f-]{36}$/i) ? searchQuery : '00000000-0000-0000-0000-000000000000'}`)\r\n        .limit(20);\r\n\r\n      if (error) throw error;\r\n      setSearchResults(data || []);\r\n    } catch (error) {\r\n      console.error(\"Search error:\", error);\r\n      toast.error(t(\"common.error\"));\r\n    } finally {\r\n      setIsSearching(false);\r\n    }\r\n  };\r\n\r\n  const handleGrantPoints = (user: any) => {\r\n    setSelectedUser(user);\r\n    setGrantType(\"grant\");\r\n    setGrantDialogOpen(true);\r\n  };\r\n\r\n  const handleDeductPoints = (user: any) => {\r\n    setSelectedUser(user);\r\n    setGrantType(\"deduct\");\r\n    setGrantDialogOpen(true);\r\n  };\r\n\r\n  const getTransactionTypeLabel = (type: string) => {\r\n    switch (type) {\r\n      case \"comment\": return t(\"admin.points.typeComment\");\r\n      case \"admin_grant\": return t(\"admin.points.typeAdminGrant\");\r\n      case \"admin_deduct\": return t(\"admin.points.typeAdminDeduct\");\r\n      case \"purchase\": return t(\"admin.points.typePurchase\");\r\n      case \"refund\": return t(\"admin.points.typeRefund\");\r\n      case \"expire\": return t(\"admin.points.typeExpire\");\r\n      default: return type;\r\n    }\r\n  };\r\n\r\n  const getTransactionTypeBadge = (type: string, amount: number) => {\r\n    const isPositive = amount > 0;\r\n    return (\r\n      <Badge variant={isPositive ? \"default\" : \"secondary\"}>\r\n        {getTransactionTypeLabel(type)}\r\n      </Badge>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div>\r\n        <h1 className=\"text-2xl font-bold\">{t(\"admin.points.title\")}</h1>\r\n        <p className=\"text-muted-foreground\">{t(\"admin.points.description\")}</p>\r\n      </div>\r\n\r\n      <Tabs defaultValue=\"users\" className=\"space-y-4\">\r\n        <TabsList>\r\n          <TabsTrigger value=\"users\" className=\"flex items-center gap-2\">\r\n            <Users className=\"h-4 w-4\" />\r\n            {t(\"admin.points.userManagement\")}\r\n          </TabsTrigger>\r\n          <TabsTrigger value=\"history\" className=\"flex items-center gap-2\">\r\n            <History className=\"h-4 w-4\" />\r\n            {t(\"admin.points.transactionHistory\")}\r\n          </TabsTrigger>\r\n        </TabsList>\r\n\r\n        <TabsContent value=\"users\" className=\"space-y-4\">\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle className=\"flex items-center gap-2\">\r\n                <Search className=\"h-5 w-5\" />\r\n                {t(\"admin.points.searchUser\")}\r\n              </CardTitle>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <div className=\"flex gap-2\">\r\n                <Input\r\n                  placeholder={t(\"admin.points.searchPlaceholder\")}\r\n                  value={searchQuery}\r\n                  onChange={(e) => setSearchQuery(e.target.value)}\r\n                  onKeyDown={(e) => e.key === \"Enter\" && handleSearch()}\r\n                />\r\n                <Button onClick={handleSearch} disabled={isSearching}>\r\n                  <Search className=\"h-4 w-4 mr-2\" />\r\n                  {t(\"common.search\")}\r\n                </Button>\r\n              </div>\r\n\r\n              {searchResults.length > 0 && (\r\n                <div className=\"mt-4\">\r\n                  <Table>\r\n                    <TableHeader>\r\n                      <TableRow>\r\n                        <TableHead>{t(\"admin.points.user\")}</TableHead>\r\n                        <TableHead>{t(\"admin.points.currentPoints\")}</TableHead>\r\n                        <TableHead className=\"text-right\">{t(\"common.actions\")}</TableHead>\r\n                      </TableRow>\r\n                    </TableHeader>\r\n                    <TableBody>\r\n                      {searchResults.map((user) => (\r\n                        <TableRow key={user.id}>\r\n                          <TableCell>\r\n                            <div className=\"flex items-center gap-3\">\r\n                              {user.avatar_url ? (\r\n                                <img \r\n                                  src={user.avatar_url} \r\n                                  alt={user.display_name} \r\n                                  className=\"w-8 h-8 rounded-full object-cover\"\r\n                                />\r\n                              ) : (\r\n                                <div className=\"w-8 h-8 rounded-full bg-muted flex items-center justify-center\">\r\n                                  {user.display_name?.charAt(0).toUpperCase()}\r\n                                </div>\r\n                              )}\r\n                              <div>\r\n                                <div className=\"font-medium\">{user.display_name}</div>\r\n                                <div className=\"text-xs text-muted-foreground\">{user.id}</div>\r\n                              </div>\r\n                            </div>\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            <div className=\"flex items-center gap-1\">\r\n                              <Coins className=\"h-4 w-4 text-amber-500\" />\r\n                              <span className=\"font-semibold\">{user.points}</span>\r\n                            </div>\r\n                          </TableCell>\r\n                          <TableCell className=\"text-right\">\r\n                            <div className=\"flex items-center justify-end gap-2\">\r\n                              <Button \r\n                                variant=\"outline\" \r\n                                size=\"sm\"\r\n                                onClick={() => handleGrantPoints(user)}\r\n                              >\r\n                                <Plus className=\"h-4 w-4 mr-1\" />\r\n                                {t(\"admin.points.grant\")}\r\n                              </Button>\r\n                              <Button \r\n                                variant=\"outline\" \r\n                                size=\"sm\"\r\n                                onClick={() => handleDeductPoints(user)}\r\n                              >\r\n                                <Minus className=\"h-4 w-4 mr-1\" />\r\n                                {t(\"admin.points.deduct\")}\r\n                              </Button>\r\n                            </div>\r\n                          </TableCell>\r\n                        </TableRow>\r\n                      ))}\r\n                    </TableBody>\r\n                  </Table>\r\n                </div>\r\n              )}\r\n\r\n              {searchResults.length === 0 && searchQuery && !isSearching && (\r\n                <div className=\"text-center py-8 text-muted-foreground\">\r\n                  {t(\"admin.points.noResults\")}\r\n                </div>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n\r\n        <TabsContent value=\"history\">\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle className=\"flex items-center gap-2\">\r\n                <History className=\"h-5 w-5\" />\r\n                {t(\"admin.points.recentTransactions\")}\r\n              </CardTitle>\r\n            </CardHeader>\r\n            <CardContent>\r\n              {isLoading ? (\r\n                <div className=\"text-center py-8\">{t(\"common.loading\")}</div>\r\n              ) : transactions && transactions.length > 0 ? (\r\n                <Table>\r\n                  <TableHeader>\r\n                    <TableRow>\r\n                      <TableHead>{t(\"admin.points.time\")}</TableHead>\r\n                      <TableHead>{t(\"admin.points.user\")}</TableHead>\r\n                      <TableHead>{t(\"admin.points.type\")}</TableHead>\r\n                      <TableHead>{t(\"admin.points.amount\")}</TableHead>\r\n                      <TableHead>{t(\"admin.points.balance\")}</TableHead>\r\n                      <TableHead>{t(\"admin.points.reason\")}</TableHead>\r\n                    </TableRow>\r\n                  </TableHeader>\r\n                  <TableBody>\r\n                    {transactions.map((tx: any) => (\r\n                      <TableRow key={tx.id}>\r\n                        <TableCell className=\"text-sm\">\r\n                          {format(new Date(tx.created_at), \"yyyy-MM-dd HH:mm\")}\r\n                        </TableCell>\r\n                        <TableCell>\r\n                          <div className=\"font-medium\">{tx.profiles?.display_name || tx.user_id}</div>\r\n                        </TableCell>\r\n                        <TableCell>\r\n                          {getTransactionTypeBadge(tx.type, tx.amount)}\r\n                        </TableCell>\r\n                        <TableCell>\r\n                          <span className={tx.amount > 0 ? \"text-green-600\" : \"text-red-600\"}>\r\n                            {tx.amount > 0 ? \"+\" : \"\"}{tx.amount}\r\n                          </span>\r\n                        </TableCell>\r\n                        <TableCell>{tx.balance_after}</TableCell>\r\n                        <TableCell className=\"text-sm text-muted-foreground max-w-[200px] truncate\">\r\n                          {tx.reason || \"-\"}\r\n                        </TableCell>\r\n                      </TableRow>\r\n                    ))}\r\n                  </TableBody>\r\n                </Table>\r\n              ) : (\r\n                <div className=\"text-center py-8 text-muted-foreground\">\r\n                  {t(\"admin.points.noTransactions\")}\r\n                </div>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n      </Tabs>\r\n\r\n      <GrantPointsDialog\r\n        open={grantDialogOpen}\r\n        onOpenChange={setGrantDialogOpen}\r\n        user={selectedUser}\r\n        type={grantType}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminPoints;\r\n"],"names":["getFormSchema","t","z.object","z.number","z.string","GrantPointsDialog","open","onOpenChange","user","type","useTranslation","modifyPoints","useAdminModifyPoints","formSchema","form","useForm","zodResolver","onSubmit","data","amount","result","toast","error","jsx","Dialog","DialogContent","jsxs","DialogHeader","DialogTitle","Fragment","Plus","Minus","DialogDescription","Form","FormField","field","FormItem","FormLabel","FormControl","Coins","Input","e","FormMessage","Textarea","Button","AdminPoints","transactions","isLoading","useAllPointsTransactions","searchQuery","setSearchQuery","useState","searchResults","setSearchResults","isSearching","setIsSearching","grantDialogOpen","setGrantDialogOpen","selectedUser","setSelectedUser","grantType","setGrantType","handleSearch","supabase","handleGrantPoints","handleDeductPoints","getTransactionTypeLabel","getTransactionTypeBadge","isPositive","Badge","Tabs","TabsList","TabsTrigger","Users","History","TabsContent","Card","CardHeader","CardTitle","Search","CardContent","Table","TableHeader","TableRow","TableHead","TableBody","TableCell","tx","format"],"mappings":"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"}