import{c as de,u as Z,i as ee,p as me,r as p,j as e,D as se,t as ie,a4 as ne,a5 as ae,a6 as te,B as _,af as F,ag as A,ah as L,ai as O,aj as h,I as j,ak as V,s as re,h as ue,C as R,e as K,o as W,an as $,aa as xe,aq as he,a7 as je,a9 as _e,K as pe,f as G,n as J,N as ve,O as ge,Q as fe,R as ye,T as Ne,U as we,V as Ce,W as be}from"./index-CJcx5ZXn.js";import{e as De,f as Te,g as Se}from"./useCoupons-BSJOjlMV.js";import{u as ke}from"./useLocalizedContent-CRFYWMmp.js";import{u as Ee}from"./index.esm-DxOD6PgC.js";import{o as ze,s as g,e as P,c as q,b as Q,t as Fe}from"./types-PTCIF_3G.js";import{F as Ae,a as l,b as o,c,d,f as N,e as m}from"./form-Bs-fhjbE.js";import{S as U}from"./switch-BUJXlJjk.js";import{T as X}from"./ticket-695LBDRk.js";import{P as Y}from"./plus-CMEzeJKN.js";import{S as Le}from"./search-DDQ7kpAH.js";import{E as Oe}from"./eye-CwP3H0eR.js";import{S as qe}from"./square-pen-I75zIY-d.js";import{T as Ie}from"./trash-2-CwOgSwmo.js";import{f as Me}from"./format-DuqBAIT4.js";import"./startOfDay-DqQEP_YE.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=de("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),Pe=ze({activity_id:g().min(1,"请选择关联活动"),title_zh:g().min(1,"中文标题不能为空"),title_en:g().min(1,"英文标题不能为空"),title_pt:g().min(1,"葡萄牙语标题不能为空"),description_zh:g().optional(),description_en:g().optional(),description_pt:g().optional(),discount_type:P(["percentage","fixed_amount"]).default("percentage"),discount_value:q.number().min(0,"折扣值不能为负数"),min_order_amount:q.number().min(0).optional(),max_discount_amount:q.number().min(0).optional(),valid_from:g().min(1,"开始日期不能为空"),valid_until:g().optional(),duration_days:q.number().min(1).optional(),duration_mode:P(["end_date","duration"]).default("end_date"),refresh_mode:P(["none","weekly","monthly","yearly"]).default("none"),is_active:Q().default(!0),visible:Q().default(!0),auto_link_activities:Q().default(!1)});function Qe({open:n,onOpenChange:w,template:a}){const{t:E}=Z(),{toast:C}=ee(),S=De();console.log("CouponFormDialog opened:",{open:n,hasTemplate:!!a});const{data:f,isLoading:b,error:k}=me({queryKey:["activities"],queryFn:async()=>{console.log("Fetching activities...");try{const{data:s,error:t}=await re.from("activities").select("id, title_zh, title_en, title_pt").eq("visible",!0).order("created_at",{ascending:!1});if(t)throw console.error("Error fetching activities:",t),t;return console.log("Activities fetched:",s==null?void 0:s.length,s),s||[]}catch(s){throw console.error("Exception in activities query:",s),s}},enabled:n});p.useEffect(()=>{k&&(console.error("Activities query error in useEffect:",k),C({title:"加载失败",description:"无法加载活动列表，请刷新页面重试",variant:"destructive"}))},[k,C]);const i=Ee({resolver:Fe(Pe),defaultValues:{activity_id:"",title_zh:"",title_en:"",title_pt:"",description_zh:"",description_en:"",description_pt:"",discount_type:"percentage",discount_value:0,min_order_amount:void 0,max_discount_amount:void 0,valid_from:new Date().toISOString().split("T")[0],valid_until:"",duration_days:void 0,duration_mode:"end_date",refresh_mode:"none",is_active:!0,visible:!0,auto_link_activities:!1}});p.useEffect(()=>{var s;if(a){console.log("Setting form for edit mode:",a.id);const t=a.duration_days&&a.duration_days>0;i.reset({activity_id:a.activity_id,title_zh:a.title_zh,title_en:a.title_en,title_pt:a.title_pt,description_zh:a.description_zh||"",description_en:a.description_en||"",description_pt:a.description_pt||"",discount_type:a.discount_type,discount_value:Number(a.discount_value),min_order_amount:a.min_order_amount?Number(a.min_order_amount):void 0,max_discount_amount:a.max_discount_amount?Number(a.max_discount_amount):void 0,valid_from:a.valid_from.split("T")[0],valid_until:((s=a.valid_until)==null?void 0:s.split("T")[0])||"",duration_days:a.duration_days||void 0,duration_mode:t?"duration":"end_date",refresh_mode:a.refresh_mode||"none",is_active:a.is_active,visible:a.visible,auto_link_activities:a.auto_link_activities||!1})}else n&&!a&&(console.log("Setting form for create mode"),i.reset({activity_id:"",title_zh:"",title_en:"",title_pt:"",description_zh:"",description_en:"",description_pt:"",discount_type:"percentage",discount_value:0,min_order_amount:void 0,max_discount_amount:void 0,valid_from:new Date().toISOString().split("T")[0],valid_until:"",duration_days:void 0,duration_mode:"end_date",refresh_mode:"none",is_active:!0,visible:!0,auto_link_activities:!1}))},[a,n]);const v=i.watch("duration_mode"),y=i.watch("valid_from"),D=i.watch("valid_until"),u=i.watch("duration_days");p.useEffect(()=>{if(v==="duration"&&u&&y){const s=new Date(y),t=new Date(s);t.setDate(t.getDate()+u),i.setValue("valid_until",t.toISOString().split("T")[0])}},[u,y,v,i]),p.useEffect(()=>{if(v==="end_date"&&D&&y){const s=new Date(y),t=new Date(D),x=Math.ceil((t.getTime()-s.getTime())/(1e3*60*60*24));x>0&&i.setValue("duration_days",x)}},[D,y,v,i]);const T=async s=>{try{console.log("Form submitted:",s);const t={activity_id:s.activity_id,title_zh:s.title_zh,title_en:s.title_en,title_pt:s.title_pt,description_zh:s.description_zh||null,description_en:s.description_en||null,description_pt:s.description_pt||null,discount_type:s.discount_type,discount_value:s.discount_value,min_order_amount:s.min_order_amount||null,max_discount_amount:s.max_discount_amount||null,valid_from:s.valid_from,valid_until:s.valid_until||null,duration_days:s.duration_mode==="duration"?s.duration_days:null,refresh_mode:s.refresh_mode,is_active:s.is_active,visible:s.visible,auto_link_activities:s.auto_link_activities};a!=null&&a.id&&(t.id=a.id),console.log("Saving template data:",t),S.mutate(t,{onSuccess:()=>{console.log("Save successful"),C({title:"保存成功",description:"优惠券模板已保存"}),w(!1),i.reset()},onError:x=>{console.error("Error saving coupon template:",x),C({title:"保存失败",description:x.message||"请检查所有必填字段是否正确填写",variant:"destructive"})}})}catch(t){console.error("Exception in onSubmit:",t),C({title:"提交失败",description:"表单提交时发生错误",variant:"destructive"})}};return e.jsx(se,{open:n,onOpenChange:w,children:e.jsxs(ie,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(ne,{children:[e.jsx(ae,{children:a?"编辑优惠券模板":"创建优惠券模板"}),e.jsx(te,{children:a?"修改优惠券模板信息":"创建新的优惠券模板，用户分享后自动生成子优惠券"})]}),k?e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("p",{className:"text-destructive mb-4",children:"加载活动列表失败"}),e.jsx(_,{onClick:()=>window.location.reload(),children:"刷新页面"})]}):e.jsx(Ae,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(T),className:"space-y-6",children:[e.jsx(l,{control:i.control,name:"activity_id",render:({field:s})=>e.jsxs(o,{children:[e.jsx(c,{children:"关联活动 *"}),e.jsxs(F,{onValueChange:t=>{console.log("Activity selected:",t),s.onChange(t)},value:s.value,disabled:b,children:[e.jsx(d,{children:e.jsx(A,{children:e.jsx(L,{placeholder:b?"加载中...":"选择活动"})})}),e.jsx(O,{children:b?e.jsx(h,{value:"loading",disabled:!0,children:"加载中..."}):f&&f.length>0?f.map(t=>e.jsx(h,{value:t.id,children:t.title_zh},t.id)):e.jsx(h,{value:"no-activities",disabled:!0,children:"暂无可用活动，请先创建活动"})})]}),e.jsx(N,{children:"选择此优惠券关联的活动"}),e.jsx(m,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(l,{control:i.control,name:"title_zh",render:({field:s})=>e.jsxs(o,{children:[e.jsx(c,{children:"中文标题 *"}),e.jsx(d,{children:e.jsx(j,{placeholder:"新用户专享",...s})}),e.jsx(m,{})]})}),e.jsx(l,{control:i.control,name:"title_en",render:({field:s})=>e.jsxs(o,{children:[e.jsx(c,{children:"英文标题 *"}),e.jsx(d,{children:e.jsx(j,{placeholder:"New User Exclusive",...s})}),e.jsx(m,{})]})}),e.jsx(l,{control:i.control,name:"title_pt",render:({field:s})=>e.jsxs(o,{children:[e.jsx(c,{children:"葡萄牙语标题 *"}),e.jsx(d,{children:e.jsx(j,{placeholder:"Exclusivo Novo Usuário",...s})}),e.jsx(m,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(l,{control:i.control,name:"description_zh",render:({field:s})=>e.jsxs(o,{children:[e.jsx(c,{children:"中文描述"}),e.jsx(d,{children:e.jsx(V,{placeholder:"优惠券描述",...s})}),e.jsx(m,{})]})}),e.jsx(l,{control:i.control,name:"description_en",render:({field:s})=>e.jsxs(o,{children:[e.jsx(c,{children:"英文描述"}),e.jsx(d,{children:e.jsx(V,{placeholder:"Coupon description",...s})}),e.jsx(m,{})]})}),e.jsx(l,{control:i.control,name:"description_pt",render:({field:s})=>e.jsxs(o,{children:[e.jsx(c,{children:"葡萄牙语描述"}),e.jsx(d,{children:e.jsx(V,{placeholder:"Descrição do cupom",...s})}),e.jsx(m,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(l,{control:i.control,name:"discount_type",render:({field:s})=>e.jsxs(o,{children:[e.jsx(c,{children:"折扣类型 *"}),e.jsxs(F,{onValueChange:s.onChange,value:s.value,children:[e.jsx(d,{children:e.jsx(A,{children:e.jsx(L,{placeholder:"选择折扣类型"})})}),e.jsxs(O,{children:[e.jsx(h,{value:"percentage",children:"百分比折扣 (%)"}),e.jsx(h,{value:"fixed_amount",children:"固定金额折扣 (€)"})]})]}),e.jsx(m,{})]})}),e.jsx(l,{control:i.control,name:"discount_value",render:({field:s})=>e.jsxs(o,{children:[e.jsx(c,{children:"折扣值 *"}),e.jsx(d,{children:e.jsx(j,{type:"number",min:"0",step:"0.01",placeholder:i.watch("discount_type")==="percentage"?"例如: 10 表示10%折扣":"例如: 5 表示5欧元折扣",...s})}),e.jsx(N,{children:i.watch("discount_type")==="percentage"?"输入百分比数值 (0-100)":"输入固定折扣金额 (欧元)"}),e.jsx(m,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(l,{control:i.control,name:"min_order_amount",render:({field:s})=>e.jsxs(o,{children:[e.jsx(c,{children:"最低消费金额 (€)"}),e.jsx(d,{children:e.jsx(j,{type:"number",min:"0",step:"0.01",placeholder:"例如: 20",...s,value:s.value||""})}),e.jsx(N,{children:"留空表示无限制"}),e.jsx(m,{})]})}),e.jsx(l,{control:i.control,name:"max_discount_amount",render:({field:s})=>e.jsxs(o,{children:[e.jsx(c,{children:"最高折扣金额 (€)"}),e.jsx(d,{children:e.jsx(j,{type:"number",min:"0",step:"0.01",placeholder:"例如: 10",...s,value:s.value||""})}),e.jsx(N,{children:"仅对百分比折扣有效，留空表示无上限"}),e.jsx(m,{})]})})]}),e.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-muted/30",children:[e.jsx("h4",{className:"font-medium text-sm",children:"有效期设置"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(l,{control:i.control,name:"valid_from",render:({field:s})=>e.jsxs(o,{children:[e.jsx(c,{children:"开始日期 *"}),e.jsx(d,{children:e.jsx(j,{type:"date",...s})}),e.jsx(m,{})]})}),e.jsx(l,{control:i.control,name:"duration_mode",render:({field:s})=>e.jsxs(o,{children:[e.jsx(c,{children:"有效期模式"}),e.jsxs(F,{onValueChange:s.onChange,value:s.value,children:[e.jsx(d,{children:e.jsx(A,{children:e.jsx(L,{placeholder:"选择模式"})})}),e.jsxs(O,{children:[e.jsx(h,{value:"end_date",children:"指定结束日期"}),e.jsx(h,{value:"duration",children:"指定持续天数"})]})]}),e.jsx(m,{})]})}),i.watch("duration_mode")==="end_date"?e.jsx(l,{control:i.control,name:"valid_until",render:({field:s})=>e.jsxs(o,{children:[e.jsx(c,{children:"结束日期"}),e.jsx(d,{children:e.jsx(j,{type:"date",...s})}),e.jsx(N,{children:"留空表示无限期"}),e.jsx(m,{})]})}):e.jsx(l,{control:i.control,name:"duration_days",render:({field:s})=>e.jsxs(o,{children:[e.jsx(c,{children:"持续天数"}),e.jsx(d,{children:e.jsx(j,{type:"number",min:"1",placeholder:"例如: 30",...s,value:s.value||""})}),e.jsx(N,{children:"优惠券领取后有效天数"}),e.jsx(m,{})]})})]}),i.watch("duration_mode")==="duration"&&i.watch("duration_days")&&i.watch("valid_until")&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["自动计算结束日期: ",i.watch("valid_until")]}),i.watch("duration_mode")==="end_date"&&i.watch("valid_until")&&i.watch("duration_days")&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["自动计算持续天数: ",i.watch("duration_days")," 天"]})]}),e.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-muted/30",children:[e.jsx("h4",{className:"font-medium text-sm",children:"刷新周期设置"}),e.jsx(l,{control:i.control,name:"refresh_mode",render:({field:s})=>e.jsxs(o,{children:[e.jsx(c,{children:"刷新周期"}),e.jsxs(F,{onValueChange:s.onChange,value:s.value,children:[e.jsx(d,{children:e.jsx(A,{className:"w-full md:w-[200px]",children:e.jsx(L,{placeholder:"选择刷新周期"})})}),e.jsxs(O,{children:[e.jsx(h,{value:"none",children:"不刷新 (一次性)"}),e.jsx(h,{value:"weekly",children:"每周"}),e.jsx(h,{value:"monthly",children:"每月"}),e.jsx(h,{value:"yearly",children:"每年"})]})]}),e.jsxs(N,{children:[s.value==="none"&&"用户只能领取一次此优惠券",s.value==="weekly"&&"用户每周可以重新领取一次此优惠券",s.value==="monthly"&&"用户每月可以重新领取一次此优惠券",s.value==="yearly"&&"用户每年可以重新领取一次此优惠券"]}),e.jsx(m,{})]})})]}),e.jsxs("div",{className:"flex gap-6",children:[e.jsx(l,{control:i.control,name:"is_active",render:({field:s})=>e.jsxs(o,{className:"flex items-center space-x-2 space-y-0",children:[e.jsx(d,{children:e.jsx(U,{checked:s.value,onCheckedChange:s.onChange})}),e.jsx(c,{className:"!mt-0",children:"激活状态"})]})}),e.jsx(l,{control:i.control,name:"visible",render:({field:s})=>e.jsxs(o,{className:"flex items-center space-x-2 space-y-0",children:[e.jsx(d,{children:e.jsx(U,{checked:s.value,onCheckedChange:s.onChange})}),e.jsx(c,{className:"!mt-0",children:"前端可见"})]})}),e.jsx(l,{control:i.control,name:"auto_link_activities",render:({field:s})=>e.jsxs(o,{className:"flex items-center space-x-2 space-y-0",children:[e.jsx(d,{children:e.jsx(U,{checked:s.value,onCheckedChange:s.onChange})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx(c,{className:"!mt-0",children:"自动关联活动"}),e.jsx(N,{className:"text-xs",children:"开启后，新增活动将自动关联此优惠券"})]})]})})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(_,{type:"button",variant:"outline",onClick:()=>w(!1),disabled:S.isPending,children:E("common.cancel")}),e.jsx(_,{type:"submit",disabled:S.isPending,children:S.isPending?"保存中...":"保存"})]})]})})]})})}const ns=()=>{const{t:n}=Z(),{toast:w}=ee(),a=ue(),{data:E,isLoading:C}=Te(),S=Se(),{getLocalizedField:f}=ke(),[b,k]=p.useState(""),[i,v]=p.useState(!1),[y,D]=p.useState(!1),[u,T]=p.useState(null),[s,t]=p.useState(!1),[x,I]=p.useState(""),[B,H]=p.useState(!1),M=E==null?void 0:E.filter(r=>{const z=String(f(r,"title")||""),ce=b.toLowerCase();return z.toLowerCase().includes(ce)}),le=()=>{u&&S.mutate(u.id,{onSuccess:()=>{D(!1),T(null)}})},oe=async()=>{if(!x.trim()){w({title:n("common.error"),description:n("admin.clearEmail.enterEmail"),variant:"destructive"});return}H(!0);try{const{data:r,error:z}=await re.from("user_coupons").delete().eq("claimed_email",x.trim().toLowerCase());if(z)throw z;w({title:n("common.success"),description:n("admin.clearEmail.success",{email:x})}),t(!1),I("")}catch(r){w({title:n("common.error"),description:r.message,variant:"destructive"})}finally{H(!1)}};return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs(R,{children:[e.jsx(K,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs(W,{className:"flex items-center gap-2",children:[e.jsx(X,{className:"w-6 h-6"}),n("admin.couponTemplates.title")]}),e.jsx($,{children:n("admin.couponTemplates.description")})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs(se,{open:s,onOpenChange:t,children:[e.jsx(xe,{asChild:!0,children:e.jsxs(_,{variant:"outline",children:[e.jsx(he,{className:"w-4 h-4 mr-2"}),n("admin.clearEmail.title")]})}),e.jsxs(ie,{children:[e.jsxs(ne,{children:[e.jsx(ae,{children:n("admin.clearEmail.dialogTitle")}),e.jsx(te,{children:n("admin.clearEmail.dialogDescription")})]}),e.jsx("div",{className:"space-y-4 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{htmlFor:"email-to-clear",children:n("admin.clearEmail.emailLabel")}),e.jsx(j,{id:"email-to-clear",type:"email",placeholder:"example@email.com",value:x,onChange:r=>I(r.target.value)})]})}),e.jsxs(_e,{children:[e.jsx(_,{variant:"outline",onClick:()=>{t(!1),I("")},children:n("common.cancel")}),e.jsxs(_,{variant:"destructive",onClick:oe,disabled:B||!x.trim(),children:[B&&e.jsx(pe,{className:"w-4 h-4 mr-2 animate-spin"}),n("admin.clearEmail.confirm")]})]})]})]}),e.jsxs(_,{onClick:()=>{T(null),v(!0)},children:[e.jsx(Y,{className:"w-4 h-4 mr-2"}),n("admin.couponTemplates.create")]})]})]})}),e.jsxs(G,{children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(Le,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(j,{placeholder:n("admin.couponTemplates.search"),value:b,onChange:r=>k(r.target.value),className:"pl-10"})]})}),C?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:n("admin.couponTemplates.loading")}):M&&M.length>0?e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:M.map(r=>e.jsxs(R,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(K,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(W,{className:"text-lg mb-1",children:f(r,"title")}),e.jsx($,{className:"text-sm",children:f(r,"description")})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1 ml-2",children:[e.jsx(J,{variant:r.is_active?"default":"secondary",children:r.is_active?n("admin.couponTemplates.active"):n("admin.couponTemplates.inactive")}),r.auto_link_activities&&e.jsx(J,{variant:"outline",className:"text-xs",children:n("admin.couponTemplates.autoLink")})]})]})}),e.jsx(G,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:n("admin.couponTemplates.discountType")}),e.jsx("div",{className:"flex items-center gap-1",children:r.discount_type==="percentage"?e.jsxs(e.Fragment,{children:[e.jsx(Ve,{className:"w-4 h-4"}),e.jsxs("span",{className:"font-semibold",children:[r.discount_value,"%"]})]}):e.jsxs("span",{className:"font-semibold",children:["€",r.discount_value]})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:n("admin.couponTemplates.createdAt")}),e.jsx("span",{className:"text-sm",children:Me(new Date(r.created_at),"yyyy-MM-dd")})]}),e.jsxs("div",{className:"flex gap-2 pt-3 border-t",children:[e.jsxs(_,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>a(`/admin/coupons/${r.id}`),children:[e.jsx(Oe,{className:"w-4 h-4 mr-1"}),n("admin.couponTemplates.view")]}),e.jsxs(_,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>{T(r),v(!0)},children:[e.jsx(qe,{className:"w-4 h-4 mr-1"}),n("admin.couponTemplates.edit")]}),e.jsx(_,{variant:"destructive",size:"sm",onClick:()=>{T(r),D(!0)},children:e.jsx(Ie,{className:"w-4 h-4"})})]})]})})]},r.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(X,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:n(b?"admin.couponTemplates.noMatch":"admin.couponTemplates.empty")}),e.jsxs(_,{onClick:()=>v(!0),children:[e.jsx(Y,{className:"w-4 h-4 mr-2"}),n("admin.couponTemplates.createFirst")]})]})]})]}),e.jsx(Qe,{open:i,onOpenChange:r=>{v(r),r||T(null)},template:u},(u==null?void 0:u.id)||"new"),e.jsx(ve,{open:y,onOpenChange:D,children:e.jsxs(ge,{children:[e.jsxs(fe,{children:[e.jsx(ye,{children:n("admin.couponTemplates.confirmDelete")}),e.jsx(Ne,{children:n("admin.couponTemplates.deleteWarning",{name:u?f(u,"title"):""})})]}),e.jsxs(we,{children:[e.jsx(Ce,{children:n("common.cancel")}),e.jsx(be,{onClick:le,children:n("admin.couponTemplates.delete")})]})]})})]})};export{ns as default};
