import{c as h,u as f,F as x,E as v,r as w,h as c,i as u,aM as R,aN as k,ar as C,P as N,j as a,aO as L,y as M,f as P,B,p as A,aP as G,aQ as T,L as q}from"./index-B9cY5t1p.js";import{u as F,S as U,a as z,b as O,c as I,d as D,e as E,f as V,g as H,h as Q,P as W,i as X,j as $}from"./sidebar-CR1hpZOr.js";import{C as J,a as K,b as Y}from"./collapsible-BGY6ZaDZ.js";import{L as Z,I as _}from"./layout-dashboard-86RT_Ihc.js";import{C as ee}from"./chart-column-Pv4CdH5-.js";import{S as ae}from"./shopping-bag-C2faTDDo.js";import{C as ie,a as se}from"./clipboard-list-vVXXkiof.js";import{S as te}from"./shield-alert-CgAAsaN7.js";import{B as ne}from"./ban-BcOCEKOV.js";import{V as le}from"./volume-x-DXvQANrB.js";import{F as oe}from"./flag-C5q6axHm.js";import{U as re}from"./users-XuhtRWHh.js";import{U as de}from"./utensils-crossed-CeArJW4K.js";import{T as me}from"./ticket-BrYEyOwU.js";import{S as ce}from"./search-CXx_lIvB.js";import{C as ue}from"./coins-BChzlX-c.js";import{P as pe}from"./package-DQwKK2uV.js";import{S as p}from"./settings-c9v8lmFG.js";import{F as he}from"./file-text-GLdebuZk.js";import{B as fe}from"./book-open--GgEI66O.js";import{S as xe}from"./star-w6qzoqne.js";import"./use-mobile-DGSEuO0A.js";import"./separator-C9gk583o.js";import"./index-VXzTq4DQ.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r=h("MessageSquarePlus",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M12 7v6",key:"lw1j43"}],["path",{d:"M9 10h6",key:"9gxzsh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=h("PanelLeftClose",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]]),ge=()=>{const{t:e}=f(),{state:s,toggleSidebar:n}=F(),{role:l}=x(),o=v().pathname,[m,g]=w.useState({statistics:!0,security:!0,daily:!0,points:!0,announcement:!0,appearance:!0,development:!0,help:!0}),j=i=>{g(t=>({...t,[i]:!t[i]}))},y=[{key:"statistics",label:e("admin.groups.statistics"),items:[{title:e("admin.dashboard"),url:"/admin",icon:Z,allowedRoles:["admin","supervisor"]},{title:e("admin.analytics"),url:"/admin/analytics",icon:ee,allowedRoles:["admin"]},{title:e("admin.orderStats","外卖订台统计"),url:"/admin/order-stats",icon:ae,allowedRoles:["admin"]},{title:e("admin.activityStatistics"),url:"/admin/activity-stats",icon:c,allowedRoles:["admin"]},{title:e("admin.restaurantStatistics"),url:"/admin/restaurant-stats",icon:u,allowedRoles:["admin"]}]},{key:"security",label:e("admin.groups.security"),items:[{title:e("admin.activityRequests"),url:"/admin/activity-requests",icon:ie,allowedRoles:["admin","supervisor"]},{title:e("admin.userSecurity"),url:"/admin/user-security",icon:te,allowedRoles:["admin"]},{title:e("admin.bannedManagement"),url:"/admin/banned-users",icon:ne,allowedRoles:["admin"]},{title:e("admin.mutedManagement"),url:"/admin/muted-users",icon:le,allowedRoles:["admin"]},{title:e("admin.reports"),url:"/admin/reports",icon:oe,allowedRoles:["admin"]},{title:e("joinUs.adminTitle"),url:"/admin/join-requests",icon:u,allowedRoles:["admin"]},{title:e("admin.sensitiveWords.title"),url:"/admin/sensitive-words",icon:R,allowedRoles:["admin"]},{title:e("admin.comments.title","评论管理"),url:"/admin/comments",icon:r,allowedRoles:["admin"]}]},{key:"daily",label:e("admin.groups.daily"),items:[{title:e("admin.users"),url:"/admin/users",icon:re,allowedRoles:["admin","supervisor"]},{title:e("admin.restaurants"),url:"/admin/restaurants",icon:de,allowedRoles:["admin","supervisor"]},{title:e("admin.activities"),url:"/admin/activities",icon:c,allowedRoles:["admin"]},{title:e("admin.coupons"),url:"/admin/coupons",icon:me,allowedRoles:["admin"]},{title:e("nav.couponQuery"),url:"/admin/coupon-query",icon:ce,allowedRoles:["admin","supervisor"]}]},{key:"points",label:e("admin.groups.points","积分管理"),items:[{title:e("admin.points.title","积分管理"),url:"/admin/points",icon:ue,allowedRoles:["admin"]},{title:e("admin.shop.title","积分商店"),url:"/admin/shop-items",icon:pe,allowedRoles:["admin"]},{title:e("admin.pointsSettings.title","积分设置"),url:"/admin/points-settings",icon:p,allowedRoles:["admin"]}]},{key:"announcement",label:e("admin.groups.announcement","公告管理"),items:[{title:e("admin.notifications","发送通知"),url:"/admin/notifications",icon:k,allowedRoles:["admin"]},{title:e("admin.emails","发送邮件"),url:"/admin/emails",icon:C,allowedRoles:["admin"]},{title:e("admin.feedback","用户反馈"),url:"/admin/feedback",icon:r,allowedRoles:["admin"]}]},{key:"appearance",label:e("admin.groups.appearance"),items:[{title:e("admin.homepageTemplates"),url:"/admin/homepage-templates",icon:_,allowedRoles:["admin"]},{title:e("admin.siteSettings"),url:"/admin/site-settings",icon:p,allowedRoles:["admin"]},{title:e("admin.joinUsSettings"),url:"/admin/site-settings#join-us",icon:r,allowedRoles:["admin"]},{title:e("admin.contactSettings"),url:"/admin/site-settings#contact-info",icon:N,allowedRoles:["admin"]}]},{key:"development",label:e("admin.groups.development"),items:[{title:e("admin.logs"),url:"/admin/logs",icon:he,allowedRoles:["admin"]},{title:e("admin.apiDocs"),url:"/admin/api-docs",icon:fe,allowedRoles:["admin"]},{title:e("admin.batchRatings"),url:"/admin/ratings",icon:xe,allowedRoles:["admin"]}]},{key:"help",label:e("admin.groups.help","帮助"),items:[{title:e("admin.userManual","使用手册"),url:"/admin/user-manual",icon:se,allowedRoles:["admin","supervisor","merchant"]}]}],b=i=>i==="/admin"||i==="/admin/points"||i==="/admin/points-settings"||i==="/admin/shop-items"?o===i:o.startsWith(i),S=y.map(i=>({...i,items:i.items.filter(t=>t.allowedRoles.includes(l))})).filter(i=>i.items.length>0);return a.jsxs(U,{collapsible:"icon",className:s==="collapsed"?"w-14":"w-60",children:[a.jsx(z,{className:"pt-14",children:a.jsxs(O,{children:[a.jsx(I,{className:s==="collapsed"?"text-center":"",children:s==="collapsed"?a.jsx(L,{className:"h-4 w-4"}):e("admin.management")}),a.jsx(D,{children:a.jsx("div",{className:"mt-4 space-y-2 my-0",children:S.map(i=>a.jsxs(J,{open:s==="collapsed"?!0:m[i.key],onOpenChange:()=>s!=="collapsed"&&j(i.key),children:[s!=="collapsed"&&a.jsxs(K,{className:"flex w-full items-center justify-between px-3 py-2 text-sm font-medium text-muted-foreground hover:text-foreground transition-colors",children:[a.jsx("span",{children:i.label}),a.jsx(M,{className:`h-4 w-4 transition-transform ${m[i.key]?"rotate-180":""}`})]}),a.jsx(Y,{children:a.jsx(E,{children:i.items.map(t=>a.jsx(V,{children:a.jsx(H,{asChild:!0,isActive:b(t.url),children:a.jsxs(P,{to:t.url,children:[a.jsx(t.icon,{className:"h-4 w-4"}),s!=="collapsed"&&a.jsx("span",{children:t.title})]})})},t.url))})})]},i.key))})})]})}),a.jsx(Q,{className:"border-t",children:a.jsx(B,{variant:"ghost",size:"sm",onClick:n,className:"w-full justify-center",children:s==="collapsed"?a.jsx(W,{className:"h-4 w-4"}):a.jsxs(a.Fragment,{children:[a.jsx(we,{className:"h-4 w-4 mr-2"}),a.jsx("span",{children:e("common.collapse","收起")})]})})})]})},je=()=>a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx(q,{className:"h-8 w-8 animate-spin text-muted-foreground"})}),He=()=>{const{t:e}=f(),{user:s}=A(),{isAdmin:n,isSupervisor:l,isLoading:d}=x();return d?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"text-center",children:e("common.loading")})}):!s||!n&&!l?a.jsx(G,{to:"/",replace:!0}):a.jsx(X,{children:a.jsxs("div",{className:"min-h-screen flex w-full overflow-hidden",children:[a.jsx(ge,{}),a.jsxs("main",{className:"flex-1 flex flex-col bg-secondary/20 overflow-auto min-w-0",children:[a.jsxs("header",{className:"md:hidden sticky top-0 z-10 flex items-center h-14 px-4 border-b bg-background",children:[a.jsx($,{}),a.jsx("span",{className:"ml-3 font-semibold",children:e("admin.management")})]}),a.jsx("div",{className:"flex-1 p-3 md:p-6 w-full max-w-full overflow-x-hidden",children:a.jsx(w.Suspense,{fallback:a.jsx(je,{}),children:a.jsx(T,{})})})]})]})})};export{He as default};
