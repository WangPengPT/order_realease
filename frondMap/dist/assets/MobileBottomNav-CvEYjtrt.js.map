{"version":3,"file":"MobileBottomNav-CvEYjtrt.js","sources":["../../src/components/layout/MobileBottomNav.tsx"],"sourcesContent":["import { Link, useLocation } from \"react-router-dom\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Home, Store, Calendar, Users } from \"lucide-react\";\r\nimport { useEnvironment } from \"@/hooks/useEnvironment\";\r\nimport { useSiteSettings } from \"@/hooks/useSiteSettings\";\r\nimport { useNavigationSettings } from \"@/hooks/useNavigationSettings\";\r\n\r\nconst MobileBottomNav = () => {\r\n  const { t } = useTranslation();\r\n  const location = useLocation();\r\n  const { isWebView } = useEnvironment();\r\n  const { settings } = useSiteSettings();\r\n  const { buttons, isLoading: isLoadingNav } = useNavigationSettings();\r\n\r\n  // Don't show on instagramContact page - it's a standalone page\r\n  // Don't show on profile page - it has its own bottom navigation\r\n  // Don't show on ask-xiaoxiong page - it's a fullscreen chat page\r\n  if (location.pathname === '/instagramContact' || location.pathname.startsWith('/profile') || location.pathname === '/ask-xiaoxiong') {\r\n    return null;\r\n  }\r\n\r\n  // Only show in webview on mobile\r\n  if (!isWebView) {\r\n    return null;\r\n  }\r\n\r\n  // Don't render navigation until buttons are loaded to prevent flash\r\n  if (isLoadingNav) {\r\n    return null;\r\n  }\r\n\r\n  const isCommunityEnabled = settings?.community_enabled !== false;\r\n\r\n  // Check if a specific link is enabled and visible in navigation buttons\r\n  const isLinkEnabled = (link: string) => {\r\n    const button = buttons?.find((btn) => btn.link === link);\r\n    // If no button found, assume enabled\r\n    if (!button) return true;\r\n    // Check if the button is enabled AND visible\r\n    // enabled=false means completely disabled (feature off)\r\n    // visible=false means hidden from navigation\r\n    return button.enabled !== false && button.visible !== false;\r\n  };\r\n\r\n  const baseMenuItems = [\r\n    { title: t(\"nav.map\"), url: \"/\", icon: Home },\r\n    { title: t(\"nav.restaurants\"), url: \"/restaurants\", icon: Store },\r\n    { title: t(\"nav.activities\"), url: \"/activities\", icon: Calendar },\r\n  ];\r\n\r\n  // Add community if enabled\r\n  if (isCommunityEnabled) {\r\n    baseMenuItems.push({ title: t(\"nav.community\"), url: \"/community\", icon: Users });\r\n  }\r\n\r\n  // Filter out disabled links\r\n  const menuItems = baseMenuItems.filter((item) => isLinkEnabled(item.url));\r\n\r\n  const isActive = (path: string) => {\r\n    if (path === \"/\") return location.pathname === path;\r\n    return location.pathname.startsWith(path);\r\n  };\r\n\r\n  return (\r\n    <nav className=\"fixed bottom-4 left-4 right-4 z-50 bg-white/20 dark:bg-black/25 backdrop-blur-sm border border-white/40 dark:border-white/30 shadow-[0_2px_20px_rgba(0,0,0,0.08)] rounded-[28px] safe-bottom lg:hidden overflow-hidden\">\r\n      {/* 顶部柔和高光渐变 - 更微妙的自然反光 */}\r\n      <div className=\"absolute inset-0 rounded-[28px] bg-gradient-to-b from-white/10 via-transparent to-transparent pointer-events-none\" />\r\n      \r\n      <div className=\"relative flex justify-around items-center h-14 px-4\">\r\n        {menuItems.map((item) => (\r\n          <Link\r\n            key={item.url}\r\n            to={item.url}\r\n            className={`relative flex flex-col items-center justify-center flex-1 h-10 py-1 px-2 mx-0.5 transition-all duration-200 rounded-2xl ${\r\n              isActive(item.url)\r\n                ? \"text-primary dark:text-white bg-primary/15 dark:bg-white/15\"\r\n                : \"text-gray-700 dark:text-white/80 active:bg-black/5 dark:active:bg-white/5\"\r\n            }`}\r\n          >\r\n            <item.icon \r\n              className={`h-5 w-5 mb-1 transition-all duration-200 ${\r\n                isActive(item.url) \r\n                  ? \"scale-110 drop-shadow-[0_0_6px_rgba(34,197,94,0.6)] dark:drop-shadow-[0_0_6px_rgba(255,255,255,0.6)]\" \r\n                  : \"\"\r\n              }`} \r\n            />\r\n            <span className={`text-xs text-center line-clamp-1 ${isActive(item.url) ? \"font-semibold\" : \"font-normal\"}`}>\r\n              {item.title}\r\n            </span>\r\n          </Link>\r\n        ))}\r\n      </div>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default MobileBottomNav;\r\n"],"names":["MobileBottomNav","t","useTranslation","location","useLocation","isWebView","useEnvironment","settings","useSiteSettings","buttons","isLoadingNav","useNavigationSettings","isCommunityEnabled","isLinkEnabled","link","button","btn","baseMenuItems","Home","Store","Calendar","Users","menuItems","item","isActive","path","jsxs","jsx","Link"],"mappings":"0SAOA,MAAMA,EAAkB,IAAM,CACtB,KAAA,CAAE,EAAAC,GAAMC,IACRC,EAAWC,IACX,CAAE,UAAAC,GAAcC,IAChB,CAAE,SAAAC,GAAaC,IACf,CAAE,QAAAC,EAAS,UAAWC,GAAiBC,EAAsB,EAenE,GAVIR,EAAS,WAAa,qBAAuBA,EAAS,SAAS,WAAW,UAAU,GAAKA,EAAS,WAAa,kBAK/G,CAACE,GAKDK,EACK,OAAA,KAGH,MAAAE,EAAqBL,GAAU,oBAAsB,GAGrDM,EAAiBC,GAAiB,CACtC,MAAMC,EAASN,GAAS,KAAMO,GAAQA,EAAI,OAASF,CAAI,EAEnD,OAACC,EAIEA,EAAO,UAAY,IAASA,EAAO,UAAY,GAJlC,EAIkC,EAGlDE,EAAgB,CACpB,CAAE,MAAOhB,EAAE,SAAS,EAAG,IAAK,IAAK,KAAMiB,CAAK,EAC5C,CAAE,MAAOjB,EAAE,iBAAiB,EAAG,IAAK,eAAgB,KAAMkB,CAAM,EAChE,CAAE,MAAOlB,EAAE,gBAAgB,EAAG,IAAK,cAAe,KAAMmB,CAAS,CAAA,EAI/DR,GACYK,EAAA,KAAK,CAAE,MAAOhB,EAAE,eAAe,EAAG,IAAK,aAAc,KAAMoB,CAAO,CAAA,EAI5E,MAAAC,EAAYL,EAAc,OAAQM,GAASV,EAAcU,EAAK,GAAG,CAAC,EAElEC,EAAYC,GACZA,IAAS,IAAYtB,EAAS,WAAasB,EACxCtB,EAAS,SAAS,WAAWsB,CAAI,EAIxC,OAAAC,EAAA,KAAC,MAAI,CAAA,UAAU,yNAEb,SAAA,CAACC,EAAAA,IAAA,MAAA,CAAI,UAAU,mHAAoH,CAAA,QAElI,MAAI,CAAA,UAAU,sDACZ,SAAUL,EAAA,IAAKC,GACdG,EAAA,KAACE,EAAA,CAEC,GAAIL,EAAK,IACT,UAAW,2HACTC,EAASD,EAAK,GAAG,EACb,8DACA,2EACN,GAEA,SAAA,CAAAI,EAAA,IAACJ,EAAK,KAAL,CACC,UAAW,4CACTC,EAASD,EAAK,GAAG,EACb,uGACA,EACN,EAAA,CACF,EACCI,EAAA,IAAA,OAAA,CAAK,UAAW,oCAAoCH,EAASD,EAAK,GAAG,EAAI,gBAAkB,aAAa,GACtG,SAAAA,EAAK,MACR,CAAA,CAAA,EAjBKA,EAAK,GAmBb,CAAA,EACH,CACF,CAAA,CAAA,CAEJ"}