{"version":3,"file":"SavedRecipeDetailDialog-ClUNiY8T.js","sources":["../../src/components/ai-recipe/SavedRecipeDetailDialog.tsx"],"sourcesContent":["import { useState, useEffect, useRef } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\r\nimport { Drawer, DrawerContent, DrawerHeader, DrawerTitle } from \"@/components/ui/drawer\";\r\nimport { Card, CardContent, CardHeader } from \"@/components/ui/card\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\nimport { Skeleton } from \"@/components/ui/skeleton\";\r\nimport { useIsMobile } from \"@/hooks/use-mobile\";\r\nimport { AIRecipeSuggestion } from \"@/hooks/useAIRecipe\";\r\nimport RecipeCookingMode from \"@/components/community/recipe/RecipeCookingMode\";\r\nimport { Clock, Users, ChefHat, PlayCircle, List, Utensils, Bookmark, Sparkles, Image } from \"lucide-react\";\r\n\r\nconst IMAGE_URL = `${import.meta.env.VITE_SUPABASE_URL}/functions/v1/ai-recipe/generate-images`;\r\n\r\ninterface SavedRecipeDetailDialogProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  recipe: AIRecipeSuggestion | null;\r\n  recipeName: string;\r\n  onSave?: (recipe: AIRecipeSuggestion) => void;\r\n  isSaving?: boolean;\r\n  isSaved?: boolean;\r\n  /** Pre-loaded image URL from the chat card — avoids re-fetching */\r\n  initialImageUrl?: string | null;\r\n}\r\n\r\ntype ViewMode = \"guided\" | \"full\";\r\ntype GuidedPhase = \"overview\" | \"cooking\";\r\n\r\nconst SavedRecipeDetailDialog = ({ open, onOpenChange, recipe, recipeName, onSave, isSaving, isSaved, initialImageUrl }: SavedRecipeDetailDialogProps) => {\r\n  const { t, i18n } = useTranslation();\r\n  const isMobile = useIsMobile();\r\n  const [viewMode, setViewMode] = useState<ViewMode>(\"guided\");\r\n  const [guidedPhase, setGuidedPhase] = useState<GuidedPhase>(\"overview\");\r\n  const [imageUrl, setImageUrl] = useState<string | null>(null);\r\n  const [imageLoading, setImageLoading] = useState(false);\r\n  const fetchedRef = useRef<string | null>(null);\r\n\r\n  // Load image: priority order — initialImageUrl → recipe.image_url → async fetch\r\n  useEffect(() => {\r\n    if (!open || !recipe) return;\r\n\r\n    // If caller already has the image (from chat card), use it directly\r\n    if (initialImageUrl) {\r\n      setImageUrl(initialImageUrl);\r\n      setImageLoading(false);\r\n      return;\r\n    }\r\n    // Use image baked into recipe object\r\n    if (recipe.image_url) {\r\n      setImageUrl(recipe.image_url as string);\r\n      setImageLoading(false);\r\n      return;\r\n    }\r\n    // Avoid duplicate fetches for same recipe\r\n    if (fetchedRef.current === recipe.recipe_name) return;\r\n    fetchedRef.current = recipe.recipe_name;\r\n    setImageLoading(true);\r\n    setImageUrl(null);\r\n    fetch(IMAGE_URL, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${import.meta.env.VITE_SUPABASE_PUBLISHABLE_KEY}`,\r\n      },\r\n      body: JSON.stringify({ recipes: [{ recipe_name: recipe.recipe_name, recipe_name_en: recipe.recipe_name_en }] }),\r\n    })\r\n      .then(r => r.json())\r\n      .then(data => {\r\n        const url = data.images?.[0]?.image_url || null;\r\n        setImageUrl(url);\r\n      })\r\n      .catch(() => setImageUrl(null))\r\n      .finally(() => setImageLoading(false));\r\n  }, [open, recipe, initialImageUrl]);\r\n\r\n  if (!recipe) return null;\r\n\r\n  const getName = () => {\r\n    if (i18n.language === \"en\" && recipe.recipe_name_en) return recipe.recipe_name_en;\r\n    if (i18n.language === \"pt\" && recipe.recipe_name_pt) return recipe.recipe_name_pt;\r\n    return recipe.recipe_name;\r\n  };\r\n\r\n  const getDifficultyColor = (d: string) => {\r\n    switch (d) {\r\n      case \"easy\": return \"bg-green-500/20 text-green-700 dark:text-green-400 border-green-500/30\";\r\n      case \"medium\": return \"bg-yellow-500/20 text-yellow-700 dark:text-yellow-400 border-yellow-500/30\";\r\n      case \"hard\": return \"bg-red-500/20 text-red-700 dark:text-red-400 border-red-500/30\";\r\n      default: return \"bg-muted text-muted-foreground\";\r\n    }\r\n  };\r\n\r\n  const getDifficultyLabel = (d: string) => {\r\n    switch (d) {\r\n      case \"easy\": return t(\"recipe.difficulty.easy\", \"简单\");\r\n      case \"medium\": return t(\"recipe.difficulty.medium\", \"中等\");\r\n      case \"hard\": return t(\"recipe.difficulty.hard\", \"困难\");\r\n      default: return d;\r\n    }\r\n  };\r\n\r\n  const steps = recipe.steps?.map((s, i) => ({\r\n    order: s.order || i + 1,\r\n    description: s.description,\r\n    image_url: undefined as string | undefined,\r\n    image_urls: undefined as string[] | undefined,\r\n  })) || [];\r\n\r\n  const hasSteps = steps.length > 0;\r\n\r\n  const handleStartCooking = () => {\r\n    setGuidedPhase(\"cooking\");\r\n  };\r\n\r\n  const handleOpenChange = (o: boolean) => {\r\n    if (!o) {\r\n      setViewMode(\"guided\");\r\n      setGuidedPhase(\"overview\");\r\n      setImageUrl(null);\r\n      setImageLoading(false);\r\n      fetchedRef.current = null;\r\n    }\r\n    onOpenChange(o);\r\n  };\r\n\r\n  // Mode toggle component\r\n  const ModeToggle = () => (\r\n    <div className=\"flex justify-end mb-4\">\r\n      <div className=\"inline-flex h-9 items-center rounded-md bg-muted p-1 text-muted-foreground\">\r\n        <button\r\n          onClick={() => { setViewMode(\"guided\"); setGuidedPhase(\"overview\"); }}\r\n          className={`inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium transition-all gap-1.5 ${\r\n            viewMode === \"guided\" ? \"bg-background text-foreground shadow-sm\" : \"\"\r\n          }`}\r\n        >\r\n          <PlayCircle className=\"h-4 w-4\" />\r\n          {t(\"recipe.guidedMode\", \"流程模式\")}\r\n        </button>\r\n        <button\r\n          onClick={() => setViewMode(\"full\")}\r\n          className={`inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium transition-all gap-1.5 ${\r\n            viewMode === \"full\" ? \"bg-background text-foreground shadow-sm\" : \"\"\r\n          }`}\r\n        >\r\n          <List className=\"h-4 w-4\" />\r\n          {t(\"recipe.fullMode\", \"完整模式\")}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  // Guided mode - cooking phase\r\n  const CookingContent = () => (\r\n    <Card className=\"overflow-hidden\">\r\n      <RecipeCookingMode\r\n        steps={steps}\r\n        onExit={() => setGuidedPhase(\"overview\")}\r\n      />\r\n    </Card>\r\n  );\r\n\r\n  // Overview (guided) or full ingredients + steps\r\n  const OverviewContent = () => (\r\n    <Card className=\"overflow-hidden\">\r\n      {/* Recipe Image */}\r\n      <div className=\"relative w-full aspect-[16/9] bg-muted overflow-hidden\">\r\n        {imageLoading ? (\r\n          <>\r\n            <Skeleton className=\"absolute inset-0 w-full h-full rounded-none\" />\r\n            <div className=\"absolute inset-0 flex flex-col items-center justify-center gap-1.5 z-10\">\r\n              <Sparkles className=\"h-4 w-4 text-primary animate-pulse\" />\r\n              <span className=\"text-xs text-muted-foreground\">\r\n                {t(\"aiRecipe.generatingImage\", \"AI 正在生成图片...\")}\r\n              </span>\r\n            </div>\r\n          </>\r\n        ) : imageUrl ? (\r\n          <img src={imageUrl} alt={getName()} className=\"w-full h-full object-cover\" />\r\n        ) : (\r\n          <div className=\"absolute inset-0 flex items-center justify-center\">\r\n            <Image className=\"h-10 w-10 text-muted-foreground/30\" />\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <CardHeader className=\"pb-3\">\r\n        <div className=\"flex items-center gap-2 mb-2\">\r\n          <Badge className=\"bg-primary text-primary-foreground gap-1\">\r\n            <Utensils className=\"h-3 w-3\" />\r\n            {t(\"recipe.badge\", \"食谱\")}\r\n          </Badge>\r\n        </div>\r\n        <h2 className=\"text-xl font-bold\">{getName()}</h2>\r\n        <div className=\"flex flex-wrap items-center gap-3 mt-3\">\r\n          {recipe.cook_time && (\r\n            <div className=\"flex items-center gap-1.5 text-sm text-muted-foreground\">\r\n              <Clock className=\"h-4 w-4\" />\r\n              <span>{recipe.cook_time} {t(\"recipe.minutes\", \"分钟\")}</span>\r\n            </div>\r\n          )}\r\n          {recipe.servings && (\r\n            <div className=\"flex items-center gap-1.5 text-sm text-muted-foreground\">\r\n              <Users className=\"h-4 w-4\" />\r\n              <span>{recipe.servings} {t(\"recipe.servingsUnit\", \"人份\")}</span>\r\n            </div>\r\n          )}\r\n          {recipe.difficulty && (\r\n            <Badge variant=\"outline\" className={getDifficultyColor(recipe.difficulty)}>\r\n              <ChefHat className=\"h-3 w-3 mr-1\" />\r\n              {getDifficultyLabel(recipe.difficulty)}\r\n            </Badge>\r\n          )}\r\n        </div>\r\n      </CardHeader>\r\n\r\n      <CardContent className=\"space-y-6\">\r\n        {/* Introduction */}\r\n        {recipe.introduction && (\r\n          <p className=\"text-sm text-muted-foreground whitespace-pre-line\">{recipe.introduction}</p>\r\n        )}\r\n\r\n        <Separator />\r\n\r\n        {/* Ingredients */}\r\n        {recipe.ingredients && recipe.ingredients.length > 0 && (\r\n          <div>\r\n            <h3 className=\"font-semibold text-sm mb-3\">\r\n              {t(\"recipe.ingredients\", \"食材\")} ({recipe.ingredients.length})\r\n            </h3>\r\n            <div className=\"flex items-center text-xs text-muted-foreground font-medium px-2 py-1.5 bg-muted/50 rounded-t-md border border-border/50\">\r\n              <span className=\"flex-1\">{t(\"recipe.ingredientName\", \"名称\")}</span>\r\n              <span className=\"w-24 text-right\">{t(\"recipe.amount\", \"用量\")}</span>\r\n            </div>\r\n            <ul className=\"border border-t-0 border-border/50 rounded-b-md divide-y divide-border/50\">\r\n              {recipe.ingredients.map((ing, i) => (\r\n                <li key={i} className=\"flex items-center text-sm px-2 py-2\">\r\n                  <span className=\"flex-1 min-w-0 truncate\">{ing.name}</span>\r\n                  <span className=\"w-24 text-right text-muted-foreground shrink-0\">\r\n                    {ing.amount} {ing.unit}\r\n                  </span>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n        )}\r\n\r\n        {/* Start cooking button (guided mode only) */}\r\n        {viewMode === \"guided\" && hasSteps && (\r\n          <Button\r\n            size=\"lg\"\r\n            className=\"w-full gap-2 h-14 text-lg\"\r\n            onClick={handleStartCooking}\r\n          >\r\n            <PlayCircle className=\"h-6 w-6\" />\r\n            {t(\"recipe.startCooking\", \"开始烹饪\")}\r\n            <Badge variant=\"secondary\" className=\"ml-2\">\r\n              {steps.length} {t(\"recipe.stepsCount\", \"步\")}\r\n            </Badge>\r\n          </Button>\r\n        )}\r\n\r\n        {/* Steps (full mode only) */}\r\n        {viewMode === \"full\" && hasSteps && (\r\n          <>\r\n            <Separator />\r\n            <div>\r\n              <h3 className=\"font-semibold text-sm mb-3\">\r\n                {t(\"recipe.steps\", \"步骤\")} ({steps.length})\r\n              </h3>\r\n              <ol className=\"space-y-4\">\r\n                {steps.map((step, index) => (\r\n                  <li key={index} className=\"flex gap-3\">\r\n                    <div className=\"flex-shrink-0 w-6 h-6 rounded-full bg-primary text-primary-foreground flex items-center justify-center text-xs font-bold\">\r\n                      {step.order}\r\n                    </div>\r\n                    <p className=\"text-sm flex-1\">{step.description}</p>\r\n                  </li>\r\n                ))}\r\n              </ol>\r\n            </div>\r\n          </>\r\n        )}\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n\r\n  const dialogContent = (\r\n    <div className=\"overflow-y-auto max-h-[75vh] px-1\">\r\n      {viewMode === \"guided\" && guidedPhase === \"cooking\" && hasSteps ? (\r\n        <CookingContent />\r\n      ) : (\r\n        <>\r\n          <ModeToggle />\r\n          <OverviewContent />\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  if (isMobile) {\r\n    return (\r\n      <Drawer open={open} onOpenChange={handleOpenChange}>\r\n        <DrawerContent className=\"max-h-[90vh]\">\r\n          <DrawerHeader className=\"flex flex-row items-center justify-between\">\r\n            <DrawerTitle className=\"line-clamp-1 flex-1\">{recipeName}</DrawerTitle>\r\n            {onSave && recipe && (\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                className={`gap-1.5 shrink-0 ${isSaved ? \"text-primary\" : \"\"}`}\r\n                onClick={() => !isSaved && onSave(recipe)}\r\n                disabled={isSaving || isSaved}\r\n              >\r\n                <Bookmark className={`h-4 w-4 ${isSaved ? \"fill-primary\" : \"\"}`} />\r\n                {isSaved ? t(\"aiRecipe.saved\", \"已保存\") : t(\"aiRecipe.save\", \"保存\")}\r\n              </Button>\r\n            )}\r\n          </DrawerHeader>\r\n          <div className=\"px-4 pb-6 overflow-y-auto max-h-[78vh]\">\r\n            {viewMode === \"guided\" && guidedPhase === \"cooking\" && hasSteps ? (\r\n              <CookingContent />\r\n            ) : (\r\n              <>\r\n                <ModeToggle />\r\n                <OverviewContent />\r\n              </>\r\n            )}\r\n          </div>\r\n        </DrawerContent>\r\n      </Drawer>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={handleOpenChange}>\r\n      <DialogContent className=\"max-w-lg max-h-[90vh] overflow-hidden flex flex-col p-0\">\r\n        <DialogHeader className=\"px-6 pt-6 pb-0 flex flex-row items-center justify-between\">\r\n          <DialogTitle className=\"line-clamp-1 flex-1\">{recipeName}</DialogTitle>\r\n          {onSave && recipe && (\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"sm\"\r\n              className={`gap-1.5 shrink-0 ${isSaved ? \"text-primary\" : \"\"}`}\r\n              onClick={() => !isSaved && onSave(recipe)}\r\n              disabled={isSaving || isSaved}\r\n            >\r\n              <Bookmark className={`h-4 w-4 ${isSaved ? \"fill-primary\" : \"\"}`} />\r\n              {isSaved ? t(\"aiRecipe.saved\", \"已保存\") : t(\"aiRecipe.save\", \"保存\")}\r\n            </Button>\r\n          )}\r\n        </DialogHeader>\r\n        <div className=\"overflow-y-auto px-6 pb-6 flex-1\">\r\n          {viewMode === \"guided\" && guidedPhase === \"cooking\" && hasSteps ? (\r\n            <CookingContent />\r\n          ) : (\r\n            <>\r\n              <ModeToggle />\r\n              <OverviewContent />\r\n            </>\r\n          )}\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default SavedRecipeDetailDialog;\r\n"],"names":["IMAGE_URL","SavedRecipeDetailDialog","open","onOpenChange","recipe","recipeName","onSave","isSaving","isSaved","initialImageUrl","t","i18n","useTranslation","isMobile","useIsMobile","viewMode","setViewMode","useState","guidedPhase","setGuidedPhase","imageUrl","setImageUrl","imageLoading","setImageLoading","fetchedRef","useRef","useEffect","r","data","url","getName","getDifficultyColor","d","getDifficultyLabel","steps","s","i","hasSteps","handleStartCooking","handleOpenChange","o","ModeToggle","jsx","jsxs","PlayCircle","List","CookingContent","Card","RecipeCookingMode","OverviewContent","Fragment","Skeleton","Sparkles","Image","CardHeader","Badge","Utensils","Clock","Users","ChefHat","CardContent","Separator","ing","Button","step","index","Drawer","DrawerContent","DrawerHeader","DrawerTitle","Bookmark","Dialog","DialogContent","DialogHeader","DialogTitle"],"mappings":"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"}