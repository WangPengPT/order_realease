{"version":3,"file":"AdminCommunityPosts-Cm6zegg-.js","sources":["../../src/components/admin/PostPreviewDialog.tsx","../../src/pages/admin/AdminCommunityPosts.tsx"],"sourcesContent":["import { useTranslation } from \"react-i18next\";\r\nimport { X, ExternalLink } from \"lucide-react\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from \"@/components/ui/dialog\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\r\nimport { CommunityPost } from \"@/hooks/useCommunityPosts\";\r\nimport PostCard from \"@/components/community/PostCard\";\r\nimport RecipeDetailContent from \"@/components/community/recipe/RecipeDetailContent\";\r\n\r\ninterface PostPreviewDialogProps {\r\n  post: CommunityPost | null;\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n}\r\n\r\ninterface ExtendedPost extends CommunityPost {\r\n  post_type?: string;\r\n  recipe_name?: string;\r\n  cook_time?: number;\r\n  difficulty?: string;\r\n  servings?: number;\r\n  ingredients?: any;\r\n  steps?: any;\r\n  nutrition?: any;\r\n}\r\n\r\nconst PostPreviewDialog = ({ post, open, onOpenChange }: PostPreviewDialogProps) => {\r\n  const { t } = useTranslation();\r\n  \r\n  if (!post) return null;\r\n  \r\n  const extendedPost = post as ExtendedPost;\r\n  const isRecipe = extendedPost.post_type === 'recipe';\r\n\r\n  const handleOpenInNewTab = () => {\r\n    window.open(`/community/${post.id}`, '_blank');\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"max-w-2xl max-h-[90vh] p-0 gap-0\">\r\n        <DialogHeader className=\"px-6 py-4 border-b flex-row items-center justify-between space-y-0\">\r\n          <DialogTitle className=\"flex items-center gap-2\">\r\n            {t(\"admin.communityPosts.preview\", \"预览帖子\")}\r\n          </DialogTitle>\r\n          <div className=\"flex items-center gap-2\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"sm\"\r\n              className=\"gap-1.5\"\r\n              onClick={handleOpenInNewTab}\r\n            >\r\n              <ExternalLink className=\"h-4 w-4\" />\r\n              {t(\"admin.communityPosts.openInNewTab\", \"新标签打开\")}\r\n            </Button>\r\n          </div>\r\n        </DialogHeader>\r\n        \r\n        <ScrollArea className=\"max-h-[calc(90vh-80px)]\">\r\n          <div className=\"p-6 bg-secondary/30\">\r\n            <div className=\"max-w-lg mx-auto\">\r\n              {isRecipe ? (\r\n                <RecipeDetailContent post={extendedPost} />\r\n              ) : (\r\n                <PostCard post={post} showActions={false} isDetailPage />\r\n              )}\r\n            </div>\r\n          </div>\r\n        </ScrollArea>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default PostPreviewDialog;\r\n","import { useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { formatDistanceToNow } from \"date-fns\";\r\nimport { zhCN, enUS, pt } from \"date-fns/locale\";\r\nimport { toast } from \"sonner\";\r\nimport {\r\n  Search,\r\n  Eye,\r\n  Trash2,\r\n  EyeOff,\r\n  Check,\r\n  AlertTriangle,\r\n  Image,\r\n  Video,\r\n  Heart,\r\n  MessageCircle,\r\n  Share2,\r\n  Clock,\r\n  Filter,\r\n  LayoutGrid,\r\n  List,\r\n  CheckCircle2,\r\n  XCircle,\r\n  AlertCircle,\r\n  Link2,\r\n  FileText,\r\n  Ban,\r\n  ImagePlus,\r\n  Loader2,\r\n  Utensils,\r\n  FileImage,\r\n} from \"lucide-react\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport {\r\n  Tooltip,\r\n  TooltipContent,\r\n  TooltipProvider,\r\n  TooltipTrigger,\r\n} from \"@/components/ui/tooltip\";\r\nimport {\r\n  AlertDialog,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n  AlertDialogContent,\r\n  AlertDialogDescription,\r\n  AlertDialogFooter,\r\n  AlertDialogHeader,\r\n  AlertDialogTitle,\r\n} from \"@/components/ui/alert-dialog\";\r\nimport { Skeleton } from \"@/components/ui/skeleton\";\r\nimport {\r\n  useAdminCommunityPosts,\r\n  useUpdatePost,\r\n  useDeletePost,\r\n  CommunityPost,\r\n} from \"@/hooks/useCommunityPosts\";\r\nimport { useLocalizedContent } from \"@/hooks/useLocalizedContent\";\r\nimport PostManagementDialog from \"@/components/admin/PostManagementDialog\";\r\nimport PostPreviewDialog from \"@/components/admin/PostPreviewDialog\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst AdminCommunityPosts = () => {\r\n  const { t, i18n } = useTranslation();\r\n  const { getLocalizedField } = useLocalizedContent();\r\n  const [search, setSearch] = useState(\"\");\r\n  const [statusFilter, setStatusFilter] = useState<string>(\"all\");\r\n  const [moderationFilter, setModerationFilter] = useState<string>(\"all\");\r\n  const [postTypeFilter, setPostTypeFilter] = useState<string>(\"all\");\r\n  const [selectedPost, setSelectedPost] = useState<CommunityPost | null>(null);\r\n  const [previewPost, setPreviewPost] = useState<CommunityPost | null>(null);\r\n  const [deletePost, setDeletePost] = useState<CommunityPost | null>(null);\r\n  const [viewMode, setViewMode] = useState<\"grid\" | \"list\">(\"grid\");\r\n  const [generatingCoverId, setGeneratingCoverId] = useState<string | null>(null);\r\n\r\n  const { data: posts, isLoading } = useAdminCommunityPosts({\r\n    status: statusFilter !== \"all\" ? statusFilter : undefined,\r\n    moderation_status: moderationFilter !== \"all\" ? moderationFilter : undefined,\r\n    post_type: postTypeFilter !== \"all\" ? postTypeFilter : undefined,\r\n    search: search || undefined,\r\n  });\r\n\r\n  const updatePost = useUpdatePost();\r\n  const deletePostMutation = useDeletePost();\r\n\r\n  const getDateLocale = () => {\r\n    switch (i18n.language) {\r\n      case \"zh\":\r\n        return zhCN;\r\n      case \"pt\":\r\n        return pt;\r\n      default:\r\n        return enUS;\r\n    }\r\n  };\r\n\r\n  const getStatusConfig = (status: string) => {\r\n    switch (status) {\r\n      case \"approved\":\r\n        return {\r\n          label: t(\"admin.status.approved\", \"已发布\"),\r\n          icon: CheckCircle2,\r\n          className: \"bg-emerald-500/10 text-emerald-600 border-emerald-500/20\",\r\n        };\r\n      case \"pending\":\r\n        return {\r\n          label: t(\"admin.status.pending\", \"待审核\"),\r\n          icon: Clock,\r\n          className: \"bg-amber-500/10 text-amber-600 border-amber-500/20\",\r\n        };\r\n      case \"rejected\":\r\n        return {\r\n          label: t(\"admin.status.rejected\", \"已拒绝\"),\r\n          icon: XCircle,\r\n          className: \"bg-red-500/10 text-red-600 border-red-500/20\",\r\n        };\r\n      case \"hidden\":\r\n        return {\r\n          label: t(\"admin.status.hidden\", \"已隐藏\"),\r\n          icon: EyeOff,\r\n          className: \"bg-gray-500/10 text-gray-600 border-gray-500/20\",\r\n        };\r\n      default:\r\n        return {\r\n          label: status,\r\n          icon: AlertCircle,\r\n          className: \"bg-gray-500/10 text-gray-600 border-gray-500/20\",\r\n        };\r\n    }\r\n  };\r\n\r\n  const getModerationConfig = (status: string) => {\r\n    switch (status) {\r\n      case \"approved\":\r\n        return {\r\n          label: t(\"admin.moderation.approved\", \"通过\"),\r\n          icon: Check,\r\n          className: \"text-emerald-600\",\r\n        };\r\n      case \"flagged\":\r\n        return {\r\n          label: t(\"admin.moderation.flagged\", \"标记\"),\r\n          icon: AlertTriangle,\r\n          className: \"text-orange-500\",\r\n        };\r\n      case \"pending\":\r\n        return {\r\n          label: t(\"admin.moderation.pending\", \"待审\"),\r\n          icon: Clock,\r\n          className: \"text-muted-foreground\",\r\n        };\r\n      default:\r\n        return {\r\n          label: status,\r\n          icon: AlertCircle,\r\n          className: \"text-muted-foreground\",\r\n        };\r\n    }\r\n  };\r\n\r\n  const handleQuickAction = (post: CommunityPost, action: string) => {\r\n    switch (action) {\r\n      case \"approve\":\r\n        updatePost.mutate({ id: post.id, status: \"approved\" });\r\n        break;\r\n      case \"hide\":\r\n        updatePost.mutate({ id: post.id, status: \"hidden\" });\r\n        break;\r\n      case \"unhide\":\r\n        updatePost.mutate({ id: post.id, status: \"approved\" });\r\n        break;\r\n      case \"delete\":\r\n        setDeletePost(post);\r\n        break;\r\n    }\r\n  };\r\n\r\n  const confirmDelete = () => {\r\n    if (deletePost) {\r\n      deletePostMutation.mutate(deletePost.id);\r\n      setDeletePost(null);\r\n    }\r\n  };\r\n\r\n  const stripHtml = (html: string) => {\r\n    const tmp = document.createElement(\"div\");\r\n    tmp.innerHTML = html;\r\n    return tmp.textContent || tmp.innerText || \"\";\r\n  };\r\n\r\n  // Extract first frame from video URL\r\n  const extractVideoFirstFrame = (videoUrl: string): Promise<Blob> => {\r\n    return new Promise((resolve, reject) => {\r\n      const video = document.createElement(\"video\");\r\n      const canvas = document.createElement(\"canvas\");\r\n      const ctx = canvas.getContext(\"2d\");\r\n\r\n      video.preload = \"auto\";\r\n      video.muted = true;\r\n      video.playsInline = true;\r\n      video.crossOrigin = \"anonymous\";\r\n\r\n      let hasResolved = false;\r\n\r\n      const captureFrame = () => {\r\n        if (hasResolved) return;\r\n        if (video.videoWidth === 0 || video.videoHeight === 0) return;\r\n\r\n        canvas.width = video.videoWidth;\r\n        canvas.height = video.videoHeight;\r\n\r\n        if (ctx) {\r\n          ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\r\n          canvas.toBlob(\r\n            (blob) => {\r\n              if (blob && blob.size > 0) {\r\n                hasResolved = true;\r\n                video.pause();\r\n                resolve(blob);\r\n              } else {\r\n                reject(new Error(\"Failed to create blob\"));\r\n              }\r\n            },\r\n            \"image/jpeg\",\r\n            0.85\r\n          );\r\n        }\r\n      };\r\n\r\n      video.onloadedmetadata = () => {\r\n        canvas.width = video.videoWidth;\r\n        canvas.height = video.videoHeight;\r\n        video.currentTime = 0.1;\r\n      };\r\n\r\n      video.onseeked = () => {\r\n        setTimeout(captureFrame, 100);\r\n      };\r\n\r\n      video.onerror = () => {\r\n        reject(new Error(\"Failed to load video\"));\r\n      };\r\n\r\n      setTimeout(() => {\r\n        if (!hasResolved) {\r\n          reject(new Error(\"Timeout\"));\r\n        }\r\n      }, 15000);\r\n\r\n      video.src = videoUrl;\r\n      video.load();\r\n    });\r\n  };\r\n\r\n  // Generate cover for video post\r\n  const handleGenerateCover = async (post: CommunityPost) => {\r\n    if (!post.video_url) return;\r\n    \r\n    setGeneratingCoverId(post.id);\r\n    try {\r\n      toast.info(t(\"admin.communityPosts.extractingCover\", \"正在提取视频封面...\"));\r\n      \r\n      // Extract first frame\r\n      const coverBlob = await extractVideoFirstFrame(post.video_url);\r\n      \r\n      // Upload to storage\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      if (!user) throw new Error(\"Not authenticated\");\r\n      \r\n      const coverFileName = `covers/${post.id}-cover-${Date.now()}.jpg`;\r\n      const { error: uploadError } = await supabase.storage\r\n        .from(\"community-posts\")\r\n        .upload(coverFileName, coverBlob);\r\n      \r\n      if (uploadError) throw uploadError;\r\n      \r\n      const { data: { publicUrl } } = supabase.storage\r\n        .from(\"community-posts\")\r\n        .getPublicUrl(coverFileName);\r\n      \r\n      // Update post with new cover\r\n      const newImageUrls = [publicUrl, ...(post.image_urls || [])];\r\n      await supabase\r\n        .from(\"community_posts\")\r\n        .update({ image_urls: newImageUrls })\r\n        .eq(\"id\", post.id);\r\n      \r\n      // Refresh the list\r\n      updatePost.mutate({ id: post.id, image_urls: newImageUrls } as any);\r\n      \r\n      toast.success(t(\"admin.communityPosts.coverGenerated\", \"封面已生成\"));\r\n    } catch (error) {\r\n      console.error(\"Failed to generate cover:\", error);\r\n      toast.error(t(\"admin.communityPosts.coverFailed\", \"封面生成失败，请重试\"));\r\n    } finally {\r\n      setGeneratingCoverId(null);\r\n    }\r\n  };\r\n\r\n  // Check if post needs cover (has video but no images)\r\n  const needsCover = (post: CommunityPost) => {\r\n    return post.video_url && (!post.image_urls || post.image_urls.length === 0);\r\n  };\r\n\r\n  const PostCard = ({ post }: { post: CommunityPost }) => {\r\n    const statusConfig = getStatusConfig(post.status);\r\n    const moderationConfig = getModerationConfig(post.moderation_status);\r\n    const StatusIcon = statusConfig.icon;\r\n    const ModerationIcon = moderationConfig.icon;\r\n    const isRecipe = (post as any).post_type === 'recipe';\r\n\r\n    return (\r\n      <Card className=\"group overflow-hidden hover:shadow-md transition-all duration-200 border-border/60\">\r\n        <CardContent className=\"p-0\">\r\n          {/* Header */}\r\n          <div className=\"flex items-center justify-between p-4 border-b border-border/40\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <Avatar className=\"h-10 w-10 ring-2 ring-background shadow-sm\">\r\n                <AvatarImage src={post.author?.avatar_url || undefined} />\r\n                <AvatarFallback className=\"bg-primary/10 text-primary font-medium\">\r\n                  {post.author?.display_name?.charAt(0) || \"?\"}\r\n                </AvatarFallback>\r\n              </Avatar>\r\n              <div>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <p className=\"font-medium text-sm\">{post.author?.display_name}</p>\r\n                  {isRecipe && (\r\n                    <Badge variant=\"secondary\" className=\"text-xs gap-1 bg-primary/10 text-primary\">\r\n                      <Utensils className=\"h-3 w-3\" />\r\n                      {t(\"admin.communityPosts.recipe\", \"食谱\")}\r\n                    </Badge>\r\n                  )}\r\n                </div>\r\n                <p className=\"text-xs text-muted-foreground flex items-center gap-1\">\r\n                  <Clock className=\"h-3 w-3\" />\r\n                  {formatDistanceToNow(new Date(post.created_at), {\r\n                    addSuffix: true,\r\n                    locale: getDateLocale(),\r\n                  })}\r\n                </p>\r\n              </div>\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <TooltipProvider>\r\n                <Tooltip>\r\n                  <TooltipTrigger asChild>\r\n                    <div className={cn(\"p-1.5 rounded-full\", moderationConfig.className)}>\r\n                      <ModerationIcon className=\"h-3.5 w-3.5\" />\r\n                    </div>\r\n                  </TooltipTrigger>\r\n                  <TooltipContent side=\"left\">\r\n                    <p>{moderationConfig.label}</p>\r\n                  </TooltipContent>\r\n                </Tooltip>\r\n              </TooltipProvider>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Content */}\r\n          <div className=\"p-4 space-y-3\">\r\n            {isRecipe && (post as any).recipe_name && (\r\n              <p className=\"text-sm font-medium text-foreground line-clamp-2\">\r\n                {(post as any).recipe_name}\r\n              </p>\r\n            )}\r\n            <p className=\"text-sm line-clamp-3 text-foreground/90 whitespace-pre-line\">\r\n              {stripHtml(post.content)}\r\n            </p>\r\n\r\n            {/* Media Preview */}\r\n            {(post.image_urls?.length > 0 || post.video_url) && (\r\n              <div className=\"flex items-center gap-3\">\r\n                {post.image_urls && post.image_urls.length > 0 && (\r\n                  <div className=\"flex -space-x-2\">\r\n                    {post.image_urls.slice(0, 3).map((url, index) => (\r\n                      <div\r\n                        key={index}\r\n                        className=\"h-12 w-12 rounded-lg overflow-hidden border-2 border-background shadow-sm\"\r\n                      >\r\n                        <img src={url} alt=\"\" className=\"w-full h-full object-cover\" />\r\n                      </div>\r\n                    ))}\r\n                    {post.image_urls.length > 3 && (\r\n                      <div className=\"h-12 w-12 rounded-lg bg-muted/80 border-2 border-background flex items-center justify-center shadow-sm\">\r\n                        <span className=\"text-xs font-medium text-muted-foreground\">\r\n                          +{post.image_urls.length - 3}\r\n                        </span>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                )}\r\n                {post.video_url && (\r\n                  <div className=\"flex items-center gap-1.5\">\r\n                    <div className=\"flex items-center gap-1.5 text-xs text-muted-foreground bg-muted/50 px-2 py-1 rounded-full\">\r\n                      <Video className=\"h-3.5 w-3.5\" />\r\n                      <span>{t(\"admin.communityPosts.hasVideo\", \"视频\")}</span>\r\n                    </div>\r\n                    {needsCover(post) && (\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        size=\"sm\"\r\n                        className=\"h-6 text-xs gap-1 text-orange-600 border-orange-300 hover:bg-orange-50\"\r\n                        onClick={() => handleGenerateCover(post)}\r\n                        disabled={generatingCoverId === post.id}\r\n                      >\r\n                        {generatingCoverId === post.id ? (\r\n                          <Loader2 className=\"h-3 w-3 animate-spin\" />\r\n                        ) : (\r\n                          <ImagePlus className=\"h-3 w-3\" />\r\n                        )}\r\n                        {t(\"admin.communityPosts.generateCover\", \"生成封面\")}\r\n                      </Button>\r\n                    )}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* Activity Link */}\r\n            {post.activity && (\r\n              <div className=\"flex items-center gap-1.5\">\r\n                <Link2 className=\"h-3.5 w-3.5 text-primary\" />\r\n                <Badge variant=\"secondary\" className=\"text-xs font-normal\">\r\n                  {getLocalizedField(post.activity, \"title\")}\r\n                </Badge>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Stats & Status */}\r\n          <div className=\"px-4 py-3 bg-muted/30 border-t border-border/40\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"flex items-center gap-4 text-muted-foreground\">\r\n                <span className=\"flex items-center gap-1 text-xs\">\r\n                  <Eye className=\"h-3.5 w-3.5\" />\r\n                  {post.views_count || 0}\r\n                </span>\r\n                <span className=\"flex items-center gap-1 text-xs\">\r\n                  <Heart className=\"h-3.5 w-3.5\" />\r\n                  {post.likes_count}\r\n                </span>\r\n                <span className=\"flex items-center gap-1 text-xs\">\r\n                  <MessageCircle className=\"h-3.5 w-3.5\" />\r\n                  {post.comments_count}\r\n                </span>\r\n                <span className=\"flex items-center gap-1 text-xs\">\r\n                  <Share2 className=\"h-3.5 w-3.5\" />\r\n                  {post.shares_count}\r\n                </span>\r\n              </div>\r\n              <Badge \r\n                variant=\"outline\" \r\n                className={cn(\"text-xs border\", statusConfig.className)}\r\n              >\r\n                <StatusIcon className=\"h-3 w-3 mr-1\" />\r\n                {statusConfig.label}\r\n              </Badge>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Quick Actions */}\r\n          <div className=\"flex items-center gap-1 p-2 border-t border-border/40 bg-background\">\r\n            {/* Preview Button */}\r\n            <TooltipProvider>\r\n              <Tooltip>\r\n                <TooltipTrigger asChild>\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"sm\"\r\n                    className=\"flex-1 h-8 text-purple-600 hover:text-purple-700 hover:bg-purple-50\"\r\n                    onClick={() => setPreviewPost(post)}\r\n                  >\r\n                    <Eye className=\"h-4 w-4\" />\r\n                    <span className=\"ml-1.5 text-xs hidden sm:inline\">{t(\"admin.communityPosts.preview\", \"预览\")}</span>\r\n                  </Button>\r\n                </TooltipTrigger>\r\n                <TooltipContent>\r\n                  <p>{t(\"admin.communityPosts.preview\", \"预览帖子\")}</p>\r\n                </TooltipContent>\r\n              </Tooltip>\r\n            </TooltipProvider>\r\n\r\n            {/* Details Button */}\r\n            <TooltipProvider>\r\n              <Tooltip>\r\n                <TooltipTrigger asChild>\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"sm\"\r\n                    className=\"flex-1 h-8 text-blue-600 hover:text-blue-700 hover:bg-blue-50\"\r\n                    onClick={() => setSelectedPost(post)}\r\n                  >\r\n                    <FileText className=\"h-4 w-4\" />\r\n                    <span className=\"ml-1.5 text-xs hidden sm:inline\">{t(\"common.details\", \"详情\")}</span>\r\n                  </Button>\r\n                </TooltipTrigger>\r\n                <TooltipContent>\r\n                  <p>{t(\"common.viewDetails\", \"查看详情\")}</p>\r\n                </TooltipContent>\r\n              </Tooltip>\r\n            </TooltipProvider>\r\n\r\n            {/* 只有 pending/flagged 状态显示发布按钮，hidden 状态用下面的显示/隐藏按钮 */}\r\n            {post.status === \"pending\" || post.status === \"flagged\" ? (\r\n              <TooltipProvider>\r\n                <Tooltip>\r\n                  <TooltipTrigger asChild>\r\n                    <Button\r\n                      variant=\"ghost\"\r\n                      size=\"sm\"\r\n                      className=\"flex-1 h-8 text-emerald-600 hover:text-emerald-700 hover:bg-emerald-50\"\r\n                      onClick={() => handleQuickAction(post, \"approve\")}\r\n                    >\r\n                      <CheckCircle2 className=\"h-4 w-4\" />\r\n                      <span className=\"ml-1.5 text-xs hidden sm:inline\">{t(\"admin.action.approve\", \"发布\")}</span>\r\n                    </Button>\r\n                  </TooltipTrigger>\r\n                  <TooltipContent>\r\n                    <p>{t(\"admin.action.approve\", \"发布\")}</p>\r\n                  </TooltipContent>\r\n                </Tooltip>\r\n              </TooltipProvider>\r\n            ) : null}\r\n\r\n            <TooltipProvider>\r\n              <Tooltip>\r\n                <TooltipTrigger asChild>\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"sm\"\r\n                    className={cn(\r\n                      \"flex-1 h-8\",\r\n                      post.status === \"hidden\"\r\n                        ? \"text-emerald-600 hover:text-emerald-700 hover:bg-emerald-50\"\r\n                        : \"text-amber-600 hover:text-amber-700 hover:bg-amber-50\"\r\n                    )}\r\n                    onClick={() => handleQuickAction(post, post.status === \"hidden\" ? \"unhide\" : \"hide\")}\r\n                  >\r\n                    {post.status === \"hidden\" ? (\r\n                      <>\r\n                        <Eye className=\"h-4 w-4\" />\r\n                        <span className=\"ml-1.5 text-xs hidden sm:inline\">{t(\"admin.action.unhide\", \"显示\")}</span>\r\n                      </>\r\n                    ) : (\r\n                      <>\r\n                        <Ban className=\"h-4 w-4\" />\r\n                        <span className=\"ml-1.5 text-xs hidden sm:inline\">{t(\"admin.action.hide\", \"隐藏\")}</span>\r\n                      </>\r\n                    )}\r\n                  </Button>\r\n                </TooltipTrigger>\r\n                <TooltipContent>\r\n                  <p>{post.status === \"hidden\" ? t(\"admin.action.unhide\", \"显示\") : t(\"admin.action.hide\", \"隐藏\")}</p>\r\n                </TooltipContent>\r\n              </Tooltip>\r\n            </TooltipProvider>\r\n\r\n            <TooltipProvider>\r\n              <Tooltip>\r\n                <TooltipTrigger asChild>\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"sm\"\r\n                    className=\"flex-1 h-8 text-destructive hover:text-destructive hover:bg-destructive/10\"\r\n                    onClick={() => handleQuickAction(post, \"delete\")}\r\n                  >\r\n                    <Trash2 className=\"h-4 w-4\" />\r\n                  </Button>\r\n                </TooltipTrigger>\r\n                <TooltipContent>\r\n                  <p>{t(\"common.delete\", \"删除\")}</p>\r\n                </TooltipContent>\r\n              </Tooltip>\r\n            </TooltipProvider>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  };\r\n\r\n  const PostSkeleton = () => (\r\n    <Card className=\"overflow-hidden\">\r\n      <CardContent className=\"p-0\">\r\n        <div className=\"flex items-center gap-3 p-4 border-b\">\r\n          <Skeleton className=\"h-10 w-10 rounded-full\" />\r\n          <div className=\"space-y-2\">\r\n            <Skeleton className=\"h-4 w-24\" />\r\n            <Skeleton className=\"h-3 w-16\" />\r\n          </div>\r\n        </div>\r\n        <div className=\"p-4 space-y-3\">\r\n          <Skeleton className=\"h-4 w-full\" />\r\n          <Skeleton className=\"h-4 w-3/4\" />\r\n          <div className=\"flex gap-2\">\r\n            <Skeleton className=\"h-12 w-12 rounded-lg\" />\r\n            <Skeleton className=\"h-12 w-12 rounded-lg\" />\r\n          </div>\r\n        </div>\r\n        <div className=\"px-4 py-3 bg-muted/30 border-t\">\r\n          <div className=\"flex justify-between\">\r\n            <Skeleton className=\"h-4 w-24\" />\r\n            <Skeleton className=\"h-5 w-16 rounded-full\" />\r\n          </div>\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4\">\r\n        <div>\r\n          <h1 className=\"text-2xl font-bold\">\r\n            {t(\"admin.communityPosts.title\", \"帖子管理\")}\r\n          </h1>\r\n          <p className=\"text-muted-foreground text-sm mt-1\">\r\n            {t(\"admin.communityPosts.subtitle\", \"管理和审核社区帖子\")}\r\n          </p>\r\n        </div>\r\n        <div className=\"flex items-center gap-2\">\r\n          <Button\r\n            variant={viewMode === \"grid\" ? \"secondary\" : \"ghost\"}\r\n            size=\"icon\"\r\n            className=\"h-9 w-9\"\r\n            onClick={() => setViewMode(\"grid\")}\r\n          >\r\n            <LayoutGrid className=\"h-4 w-4\" />\r\n          </Button>\r\n          <Button\r\n            variant={viewMode === \"list\" ? \"secondary\" : \"ghost\"}\r\n            size=\"icon\"\r\n            className=\"h-9 w-9\"\r\n            onClick={() => setViewMode(\"list\")}\r\n          >\r\n            <List className=\"h-4 w-4\" />\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Filters */}\r\n      <Card className=\"border-border/60\">\r\n        <CardContent className=\"p-4\">\r\n          <div className=\"flex flex-col sm:flex-row gap-4\">\r\n            <div className=\"relative flex-1\">\r\n              <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n              <Input\r\n                placeholder={t(\"admin.communityPosts.searchPlaceholder\", \"搜索内容...\")}\r\n                value={search}\r\n                onChange={(e) => setSearch(e.target.value)}\r\n                className=\"pl-10\"\r\n              />\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <Filter className=\"h-4 w-4 text-muted-foreground hidden sm:block\" />\r\n              <Select value={statusFilter} onValueChange={setStatusFilter}>\r\n                <SelectTrigger className=\"w-[140px]\">\r\n                  <SelectValue placeholder={t(\"admin.status.all\", \"所有状态\")} />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  <SelectItem value=\"all\">{t(\"admin.status.all\", \"所有状态\")}</SelectItem>\r\n                  <SelectItem value=\"approved\">\r\n                    <span className=\"flex items-center gap-2\">\r\n                      <CheckCircle2 className=\"h-3.5 w-3.5 text-emerald-600\" />\r\n                      {t(\"admin.status.approved\", \"已发布\")}\r\n                    </span>\r\n                  </SelectItem>\r\n                  <SelectItem value=\"pending\">\r\n                    <span className=\"flex items-center gap-2\">\r\n                      <Clock className=\"h-3.5 w-3.5 text-amber-600\" />\r\n                      {t(\"admin.status.pending\", \"待审核\")}\r\n                    </span>\r\n                  </SelectItem>\r\n                  <SelectItem value=\"hidden\">\r\n                    <span className=\"flex items-center gap-2\">\r\n                      <EyeOff className=\"h-3.5 w-3.5 text-gray-500\" />\r\n                      {t(\"admin.status.hidden\", \"已隐藏\")}\r\n                    </span>\r\n                  </SelectItem>\r\n                  <SelectItem value=\"rejected\">\r\n                    <span className=\"flex items-center gap-2\">\r\n                      <XCircle className=\"h-3.5 w-3.5 text-red-600\" />\r\n                      {t(\"admin.status.rejected\", \"已拒绝\")}\r\n                    </span>\r\n                  </SelectItem>\r\n                </SelectContent>\r\n              </Select>\r\n\r\n              <Select value={moderationFilter} onValueChange={setModerationFilter}>\r\n                <SelectTrigger className=\"w-[130px]\">\r\n                  <SelectValue placeholder={t(\"admin.moderation.all\", \"所有审核\")} />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  <SelectItem value=\"all\">{t(\"admin.moderation.all\", \"所有审核\")}</SelectItem>\r\n                  <SelectItem value=\"pending\">\r\n                    <span className=\"flex items-center gap-2\">\r\n                      <Clock className=\"h-3.5 w-3.5 text-gray-500\" />\r\n                      {t(\"admin.moderation.pending\", \"待审\")}\r\n                    </span>\r\n                  </SelectItem>\r\n                  <SelectItem value=\"approved\">\r\n                    <span className=\"flex items-center gap-2\">\r\n                      <Check className=\"h-3.5 w-3.5 text-emerald-600\" />\r\n                      {t(\"admin.moderation.approved\", \"通过\")}\r\n                    </span>\r\n                  </SelectItem>\r\n                  <SelectItem value=\"flagged\">\r\n                    <span className=\"flex items-center gap-2\">\r\n                      <AlertTriangle className=\"h-3.5 w-3.5 text-orange-500\" />\r\n                      {t(\"admin.moderation.flagged\", \"标记\")}\r\n                    </span>\r\n                  </SelectItem>\r\n                </SelectContent>\r\n              </Select>\r\n\r\n              {/* Post Type Filter */}\r\n              <Select value={postTypeFilter} onValueChange={setPostTypeFilter}>\r\n                <SelectTrigger className=\"w-[120px]\">\r\n                  <SelectValue placeholder={t(\"admin.communityPosts.allTypes\", \"所有类型\")} />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  <SelectItem value=\"all\">{t(\"admin.communityPosts.allTypes\", \"所有类型\")}</SelectItem>\r\n                  <SelectItem value=\"post\">\r\n                    <span className=\"flex items-center gap-2\">\r\n                      <FileImage className=\"h-3.5 w-3.5 text-blue-500\" />\r\n                      {t(\"admin.communityPosts.typePost\", \"普通帖子\")}\r\n                    </span>\r\n                  </SelectItem>\r\n                  <SelectItem value=\"recipe\">\r\n                    <span className=\"flex items-center gap-2\">\r\n                      <Utensils className=\"h-3.5 w-3.5 text-primary\" />\r\n                      {t(\"admin.communityPosts.typeRecipe\", \"食谱\")}\r\n                    </span>\r\n                  </SelectItem>\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Posts Count */}\r\n      {posts && (\r\n        <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\r\n          <span>{t(\"admin.communityPosts.total\", \"共\")} {posts.length} {t(\"admin.communityPosts.posts\", \"篇帖子\")}</span>\r\n        </div>\r\n      )}\r\n\r\n      {/* Posts Grid/List */}\r\n      {isLoading ? (\r\n        <div className={cn(\r\n          \"grid gap-4\",\r\n          viewMode === \"grid\" \r\n            ? \"grid-cols-1 md:grid-cols-2 lg:grid-cols-3\" \r\n            : \"grid-cols-1\"\r\n        )}>\r\n          {Array.from({ length: 6 }).map((_, i) => (\r\n            <PostSkeleton key={i} />\r\n          ))}\r\n        </div>\r\n      ) : posts && posts.length > 0 ? (\r\n        <div className={cn(\r\n          \"grid gap-4\",\r\n          viewMode === \"grid\" \r\n            ? \"grid-cols-1 md:grid-cols-2 lg:grid-cols-3\" \r\n            : \"grid-cols-1\"\r\n        )}>\r\n          {posts.map((post) => (\r\n            <PostCard key={post.id} post={post} />\r\n          ))}\r\n        </div>\r\n      ) : (\r\n        <Card className=\"border-dashed\">\r\n          <CardContent className=\"py-16 text-center\">\r\n            <div className=\"mx-auto w-16 h-16 rounded-full bg-muted flex items-center justify-center mb-4\">\r\n              <Image className=\"h-8 w-8 text-muted-foreground\" />\r\n            </div>\r\n            <h3 className=\"font-medium text-lg mb-1\">\r\n              {t(\"admin.communityPosts.noPosts\", \"暂无帖子\")}\r\n            </h3>\r\n            <p className=\"text-muted-foreground text-sm\">\r\n              {t(\"admin.communityPosts.noPostsDesc\", \"当前筛选条件下没有帖子\")}\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      {/* Post Management Dialog */}\r\n      <PostManagementDialog\r\n        post={selectedPost}\r\n        open={!!selectedPost}\r\n        onOpenChange={(open) => !open && setSelectedPost(null)}\r\n      />\r\n\r\n      {/* Post Preview Dialog */}\r\n      <PostPreviewDialog\r\n        post={previewPost}\r\n        open={!!previewPost}\r\n        onOpenChange={(open) => !open && setPreviewPost(null)}\r\n      />\r\n\r\n      {/* Delete Confirmation */}\r\n      <AlertDialog open={!!deletePost} onOpenChange={(open) => !open && setDeletePost(null)}>\r\n        <AlertDialogContent>\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle className=\"flex items-center gap-2\">\r\n              <Trash2 className=\"h-5 w-5 text-destructive\" />\r\n              {t(\"common.confirmDelete\", \"确认删除\")}\r\n            </AlertDialogTitle>\r\n            <AlertDialogDescription>\r\n              {t(\"admin.communityPosts.deleteWarning\", \"删除后无法恢复，确定要删除这篇帖子吗？\")}\r\n            </AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <AlertDialogFooter>\r\n            <AlertDialogCancel>{t(\"common.cancel\", \"取消\")}</AlertDialogCancel>\r\n            <AlertDialogAction \r\n              onClick={confirmDelete}\r\n              className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\r\n            >\r\n              {t(\"common.delete\", \"删除\")}\r\n            </AlertDialogAction>\r\n          </AlertDialogFooter>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminCommunityPosts;\r\n"],"names":["PostPreviewDialog","post","open","onOpenChange","t","useTranslation","extendedPost","isRecipe","handleOpenInNewTab","Dialog","jsxs","DialogContent","DialogHeader","jsx","DialogTitle","Button","ExternalLink","ScrollArea","RecipeDetailContent","PostCard","AdminCommunityPosts","i18n","getLocalizedField","useLocalizedContent","search","setSearch","useState","statusFilter","setStatusFilter","moderationFilter","setModerationFilter","postTypeFilter","setPostTypeFilter","selectedPost","setSelectedPost","previewPost","setPreviewPost","deletePost","setDeletePost","viewMode","setViewMode","generatingCoverId","setGeneratingCoverId","posts","isLoading","useAdminCommunityPosts","updatePost","useUpdatePost","deletePostMutation","useDeletePost","getDateLocale","zhCN","pt","enUS","getStatusConfig","status","CheckCircle2","Clock","XCircle","EyeOff","AlertCircle","getModerationConfig","Check","AlertTriangle","handleQuickAction","action","confirmDelete","stripHtml","html","tmp","extractVideoFirstFrame","videoUrl","resolve","reject","video","canvas","ctx","hasResolved","captureFrame","blob","handleGenerateCover","toast","coverBlob","user","supabase","coverFileName","uploadError","publicUrl","newImageUrls","error","needsCover","statusConfig","moderationConfig","StatusIcon","ModerationIcon","Card","CardContent","Avatar","AvatarImage","AvatarFallback","Badge","Utensils","formatDistanceToNow","TooltipProvider","Tooltip","TooltipTrigger","cn","TooltipContent","url","index","Video","Loader2","ImagePlus","Link2","Eye","Heart","MessageCircle","Share2","FileText","Fragment","Ban","Trash2","PostSkeleton","Skeleton","LayoutGrid","List","Search","Input","e","Filter","Select","SelectTrigger","SelectValue","SelectContent","SelectItem","FileImage","_","i","Image","PostManagementDialog","AlertDialog","AlertDialogContent","AlertDialogHeader","AlertDialogTitle","AlertDialogDescription","AlertDialogFooter","AlertDialogCancel","AlertDialogAction"],"mappings":"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"}