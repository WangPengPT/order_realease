{"version":3,"file":"AdminAISettings-BnEIuK2x.js","sources":["../../src/pages/admin/AdminAISettings.tsx"],"sourcesContent":["import { useTranslation } from \"react-i18next\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Switch } from \"@/components/ui/switch\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { useSiteSettings } from \"@/hooks/useSiteSettings\";\r\nimport { Bot, MessageCircle, Settings, ChevronRight, Sparkles } from \"lucide-react\";\r\nimport { Skeleton } from \"@/components/ui/skeleton\";\r\n\r\nconst AdminAISettings = () => {\r\n  const { t } = useTranslation();\r\n  const { settings, isLoading, updateSettings } = useSiteSettings();\r\n\r\n  const handleToggleAI = (enabled: boolean) => {\r\n    updateSettings.mutate({ ai_assistant_enabled: enabled });\r\n  };\r\n\r\n  const handleProviderChange = (provider: string) => {\r\n    updateSettings.mutate({ ai_provider: provider });\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"p-6 space-y-6\">\r\n        <Skeleton className=\"h-8 w-48\" />\r\n        <Skeleton className=\"h-64 w-full\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const aiEnabled = settings?.ai_assistant_enabled !== false;\r\n  const currentProvider = settings?.ai_provider || \"ask-xiaoxiong\";\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-6 max-w-4xl mx-auto\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center gap-3\">\r\n        <Bot className=\"h-8 w-8 text-primary\" />\r\n        <div>\r\n          <h1 className=\"text-2xl font-bold\">{t(\"admin.aiSettings.title\", \"AI管理\")}</h1>\r\n          <p className=\"text-muted-foreground\">\r\n            {t(\"admin.aiSettings.subtitle\", \"管理主页AI助手功能\")}\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Basic Settings Card */}\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle className=\"flex items-center gap-2\">\r\n            <MessageCircle className=\"h-5 w-5\" />\r\n            {t(\"admin.aiSettings.homeAssistant\", \"主页AI助手\")}\r\n          </CardTitle>\r\n          <CardDescription>\r\n            {t(\"admin.aiSettings.description\", \"控制主页AI助手按钮的显示与AI服务提供商\")}\r\n          </CardDescription>\r\n        </CardHeader>\r\n        <CardContent className=\"space-y-6\">\r\n          {/* Enable/Disable Toggle */}\r\n          <div className=\"flex items-center justify-between p-4 bg-muted/30 rounded-lg\">\r\n            <div className=\"space-y-0.5\">\r\n              <Label htmlFor=\"ai-enabled\" className=\"text-base font-medium\">\r\n                {t(\"admin.aiSettings.enabled\", \"启用状态\")}\r\n              </Label>\r\n              <p className=\"text-sm text-muted-foreground\">\r\n                {aiEnabled \r\n                  ? t(\"admin.aiSettings.enabledDesc\", \"AI助手按钮在主页显示\")\r\n                  : t(\"admin.aiSettings.disabledDesc\", \"AI助手按钮已隐藏\")}\r\n              </p>\r\n            </div>\r\n            <Switch\r\n              id=\"ai-enabled\"\r\n              checked={aiEnabled}\r\n              onCheckedChange={handleToggleAI}\r\n              disabled={updateSettings.isPending}\r\n            />\r\n          </div>\r\n\r\n          {/* Provider Selection */}\r\n          <div className=\"space-y-3\">\r\n            <Label className=\"text-base font-medium\">\r\n              {t(\"admin.aiSettings.provider\", \"AI接口选择\")}\r\n            </Label>\r\n            <RadioGroup\r\n              value={currentProvider}\r\n              onValueChange={handleProviderChange}\r\n              disabled={updateSettings.isPending || !aiEnabled}\r\n              className=\"grid grid-cols-1 md:grid-cols-2 gap-3\"\r\n            >\r\n              <div className={`flex items-center space-x-3 p-4 rounded-lg border-2 transition-all cursor-pointer ${currentProvider === 'ask-xiaoxiong' ? 'border-primary bg-primary/5' : 'border-border hover:border-primary/50'}`}>\r\n                <RadioGroupItem value=\"ask-xiaoxiong\" id=\"ask-xiaoxiong\" />\r\n                <Label htmlFor=\"ask-xiaoxiong\" className=\"flex items-center gap-2 cursor-pointer flex-1\">\r\n                  <Bot className=\"h-5 w-5 text-primary\" />\r\n                  <div>\r\n                    <span className=\"font-medium\">{t(\"admin.aiSettings.providers.askXiaoxiong\", \"小熊AI\")}</span>\r\n                    <p className=\"text-xs text-muted-foreground\">\r\n                      {t(\"admin.aiSettings.providers.askXiaoxiongDesc\", \"原有AI接口，直接问答\")}\r\n                    </p>\r\n                  </div>\r\n                </Label>\r\n              </div>\r\n              \r\n              <div className={`flex items-center space-x-3 p-4 rounded-lg border-2 transition-all cursor-pointer ${currentProvider === 'xiaoxiong-agent' ? 'border-primary bg-primary/5' : 'border-border hover:border-primary/50'}`}>\r\n                <RadioGroupItem value=\"xiaoxiong-agent\" id=\"xiaoxiong-agent\" />\r\n                <Label htmlFor=\"xiaoxiong-agent\" className=\"flex items-center gap-2 cursor-pointer flex-1\">\r\n                  <Settings className=\"h-5 w-5 text-orange-500\" />\r\n                  <div>\r\n                    <span className=\"font-medium\">{t(\"admin.aiSettings.providers.xiaoxiongAgent\", \"小熊Agent\")}</span>\r\n                    <p className=\"text-xs text-muted-foreground\">\r\n                      {t(\"admin.aiSettings.providers.xiaoxiongAgentDesc\", \"新AI接口，支持模型配置\")}\r\n                    </p>\r\n                  </div>\r\n                </Label>\r\n              </div>\r\n\r\n              <div className={`flex items-center space-x-3 p-4 rounded-lg border-2 transition-all cursor-pointer ${currentProvider === 'lovable-ai' ? 'border-primary bg-primary/5' : 'border-border hover:border-primary/50'}`}>\r\n                <RadioGroupItem value=\"lovable-ai\" id=\"lovable-ai\" />\r\n                <Label htmlFor=\"lovable-ai\" className=\"flex items-center gap-2 cursor-pointer flex-1\">\r\n                  <Sparkles className=\"h-5 w-5 text-purple-500\" />\r\n                  <div>\r\n                    <span className=\"font-medium\">{t(\"admin.aiSettings.providers.lovableAI\", \"Lovable AI\")}</span>\r\n                    <span className=\"ml-2 text-xs bg-green-500/20 text-green-600 px-1.5 py-0.5 rounded\">推荐</span>\r\n                    <p className=\"text-xs text-muted-foreground\">\r\n                      {t(\"admin.aiSettings.providers.lovableAIDesc\", \"稳定快速，无需外部依赖\")}\r\n                    </p>\r\n                  </div>\r\n                </Label>\r\n              </div>\r\n            </RadioGroup>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Quick Link to AI Config */}\r\n      <Card className=\"bg-muted/30\">\r\n        <CardContent className=\"pt-6\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"font-medium\">需要配置AI模型或系统提示词？</p>\r\n              <p className=\"text-sm text-muted-foreground\">\r\n                前往AI配置管理页面编辑模型参数和提示词设置\r\n              </p>\r\n            </div>\r\n            <Button variant=\"outline\" size=\"sm\" asChild>\r\n              <Link to=\"/admin/ai-config\">\r\n                前往配置管理\r\n                <ChevronRight className=\"h-4 w-4 ml-1\" />\r\n              </Link>\r\n            </Button>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminAISettings;\r\n"],"names":["AdminAISettings","t","useTranslation","settings","isLoading","updateSettings","useSiteSettings","handleToggleAI","enabled","handleProviderChange","provider","jsxs","jsx","Skeleton","aiEnabled","currentProvider","Bot","Card","CardHeader","CardTitle","MessageCircle","CardDescription","CardContent","Label","Switch","RadioGroup","RadioGroupItem","Settings","Sparkles","Button","Link","ChevronRight"],"mappings":"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"}