import{s as b,q as d,v as i,w as n}from"./vendor-react-3frukg7q.js";import{s as a}from"./index-DBl0LkXN.js";import{i as t}from"./vendor-i18n-jtdHZIRR.js";const y=e=>!e||!Array.isArray(e)?null:e,p=()=>b({queryKey:["brands"],queryFn:async()=>{const{data:e,error:r}=await a.from("brands").select("*").order("created_at",{ascending:!1});if(r)throw r;return e.map(s=>({...s,content_blocks:y(s.content_blocks)}))}}),w=e=>b({queryKey:["brand",e],queryFn:async()=>{const{data:r,error:s}=await a.from("brands").select("*").eq("id",e).single();if(s)throw s;return{...r,content_blocks:y(r.content_blocks)}},enabled:!!e}),g=()=>{const e=d();return i({mutationFn:async r=>{const{content_blocks:s,...u}=r,{data:o,error:c}=await a.from("brands").insert([{...u,content_blocks:s}]).select().single();if(c)throw c;return o},onSuccess:()=>{e.invalidateQueries({queryKey:["brands"]}),n.success(t.t("admin.brand.createSuccess"))},onError:r=>{n.error(r.message||t.t("admin.brand.createError"))}})},k=()=>{const e=d();return i({mutationFn:async({id:r,content_blocks:s,...u})=>{const o={...u};s!==void 0&&(o.content_blocks=s);const{data:c,error:l}=await a.from("brands").update(o).eq("id",r).select().single();if(l)throw l;return c},onSuccess:()=>{e.invalidateQueries({queryKey:["brands"]}),n.success(t.t("admin.brand.updateSuccess"))},onError:r=>{n.error(r.message||t.t("admin.brand.updateError"))}})},B=()=>{const e=d();return i({mutationFn:async r=>{const{error:s}=await a.from("brands").delete().eq("id",r);if(s)throw s},onSuccess:()=>{e.invalidateQueries({queryKey:["brands"]}),n.success(t.t("admin.brand.deleteSuccess"))},onError:r=>{n.error(r.message||t.t("admin.brand.deleteError"))}})};export{p as a,g as b,k as c,B as d,w as u};
//# sourceMappingURL=useBrands-Dll_O_mc.js.map
