{"version":3,"file":"MerchantActivityRequestForm-Dl2-gP8O.js","sources":["../../src/pages/MerchantActivityRequestForm.tsx"],"sourcesContent":["import { useState, useRef } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport * as z from \"zod\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\";\r\nimport {\r\n  Form,\r\n  FormControl,\r\n  FormDescription,\r\n  FormField,\r\n  FormItem,\r\n  FormLabel,\r\n  FormMessage,\r\n} from \"@/components/ui/form\";\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport { useCreateActivityRequest } from \"@/hooks/useActivityRequests\";\r\nimport { useUserRole } from \"@/hooks/useUserRole\";\r\nimport { useAuth } from \"@/contexts/AuthContext\";\r\nimport Navigation from \"@/components/layout/Navigation\";\r\nimport { ArrowLeft, Calendar, AlertCircle, Upload, Link as LinkIcon, X, Loader2 } from \"lucide-react\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { toast } from \"@/hooks/use-toast\";\r\n\r\nconst formSchema = z.object({\r\n  title_zh: z.string().min(1, \"中文标题不能为空\"),\r\n  title_en: z.string().min(1, \"英文标题不能为空\"),\r\n  title_pt: z.string().min(1, \"葡萄牙语标题不能为空\"),\r\n  intro_zh: z.string().optional(),\r\n  intro_en: z.string().optional(),\r\n  intro_pt: z.string().optional(),\r\n  content_zh: z.string().min(1, \"中文内容不能为空\"),\r\n  content_en: z.string().min(1, \"英文内容不能为空\"),\r\n  content_pt: z.string().min(1, \"葡萄牙语内容不能为空\"),\r\n  image_url: z.string().url().optional().or(z.literal(\"\")),\r\n  start_date: z.string().min(1, \"开始日期不能为空\"),\r\n  end_date: z.string().optional(),\r\n  service_type: z.enum([\"dine_in\", \"takeaway\", \"both\"]),\r\n  badge_text_zh: z.string().optional(),\r\n  badge_text_en: z.string().optional(),\r\n  badge_text_pt: z.string().optional(),\r\n  badge_color: z.string().optional(),\r\n});\r\n\r\ntype FormData = z.infer<typeof formSchema>;\r\n\r\nconst MerchantActivityRequestForm = () => {\r\n  const { t } = useTranslation();\r\n  const navigate = useNavigate();\r\n  const { user } = useAuth();\r\n  const { isMerchant, isSupervisor } = useUserRole();\r\n  const createMutation = useCreateActivityRequest();\r\n  const [loading, setLoading] = useState(false);\r\n  const [imageMode, setImageMode] = useState<\"upload\" | \"url\">(\"upload\");\r\n  const [uploadedImageUrl, setUploadedImageUrl] = useState<string>(\"\");\r\n  const [uploading, setUploading] = useState(false);\r\n  const [previewImage, setPreviewImage] = useState<string>(\"\");\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  const handleImageUpload = async (file: File) => {\r\n    if (!user) return;\r\n    \r\n    if (file.size > 5 * 1024 * 1024) {\r\n      toast({\r\n        title: \"图片太大\",\r\n        description: \"图片大小不能超过5MB\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    setUploading(true);\r\n    try {\r\n      const fileExt = file.name.split(\".\").pop();\r\n      const fileName = `${user.id}-${Date.now()}.${fileExt}`;\r\n      const filePath = `activity-requests/${fileName}`;\r\n\r\n      const { error: uploadError } = await supabase.storage\r\n        .from(\"activity-images\")\r\n        .upload(filePath, file);\r\n\r\n      if (uploadError) throw uploadError;\r\n\r\n      const { data: { publicUrl } } = supabase.storage\r\n        .from(\"activity-images\")\r\n        .getPublicUrl(filePath);\r\n\r\n      setUploadedImageUrl(publicUrl);\r\n      setPreviewImage(publicUrl);\r\n      toast({\r\n        title: \"上传成功\",\r\n        description: \"封面图片已上传\",\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Upload error:\", error);\r\n      toast({\r\n        title: \"上传失败\",\r\n        description: \"图片上传失败，请重试\",\r\n        variant: \"destructive\",\r\n      });\r\n    } finally {\r\n      setUploading(false);\r\n    }\r\n  };\r\n\r\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (file) {\r\n      handleImageUpload(file);\r\n    }\r\n  };\r\n\r\n  const clearUploadedImage = () => {\r\n    setUploadedImageUrl(\"\");\r\n    setPreviewImage(\"\");\r\n    if (fileInputRef.current) {\r\n      fileInputRef.current.value = \"\";\r\n    }\r\n  };\r\n\r\n  const form = useForm<FormData>({\r\n    resolver: zodResolver(formSchema),\r\n    defaultValues: {\r\n      title_zh: \"\",\r\n      title_en: \"\",\r\n      title_pt: \"\",\r\n      intro_zh: \"\",\r\n      intro_en: \"\",\r\n      intro_pt: \"\",\r\n      content_zh: \"\",\r\n      content_en: \"\",\r\n      content_pt: \"\",\r\n      image_url: \"\",\r\n      start_date: new Date().toISOString().split(\"T\")[0],\r\n      end_date: \"\",\r\n      service_type: \"both\",\r\n      badge_text_zh: \"\",\r\n      badge_text_en: \"\",\r\n      badge_text_pt: \"\",\r\n      badge_color: \"#9b87f5\",\r\n    },\r\n  });\r\n\r\n  // 检查权限\r\n  if (!user || (!isMerchant && !isSupervisor)) {\r\n    return (\r\n      <div className=\"min-h-screen bg-background\">\r\n        <Navigation />\r\n        <div className=\"container mx-auto px-4 py-8\">\r\n          <Card>\r\n            <CardContent className=\"flex flex-col items-center justify-center py-12\">\r\n              <AlertCircle className=\"h-12 w-12 text-muted-foreground mb-4\" />\r\n              <p className=\"text-lg font-medium\">无权访问</p>\r\n              <p className=\"text-sm text-muted-foreground\">\r\n                只有商家和主管可以申请创建活动\r\n              </p>\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const onSubmit = async (data: FormData) => {\r\n    setLoading(true);\r\n    try {\r\n      // Determine the final image URL based on mode\r\n      const finalImageUrl = imageMode === \"upload\" ? uploadedImageUrl : data.image_url;\r\n      \r\n      await createMutation.mutateAsync({\r\n        title_zh: data.title_zh,\r\n        title_en: data.title_en,\r\n        title_pt: data.title_pt,\r\n        intro_zh: data.intro_zh || null,\r\n        intro_en: data.intro_en || null,\r\n        intro_pt: data.intro_pt || null,\r\n        content_zh: data.content_zh,\r\n        content_en: data.content_en,\r\n        content_pt: data.content_pt,\r\n        image_url: finalImageUrl || null,\r\n        start_date: data.start_date,\r\n        end_date: data.end_date || null,\r\n        service_type: data.service_type,\r\n        badge_text_zh: data.badge_text_zh || null,\r\n        badge_text_en: data.badge_text_en || null,\r\n        badge_text_pt: data.badge_text_pt || null,\r\n        badge_color: data.badge_color || \"#9b87f5\",\r\n      });\r\n      navigate(\"/merchant/activity-requests\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background\">\r\n      <Navigation />\r\n      <div className=\"container mx-auto px-4 py-8\">\r\n        <div className=\"max-w-3xl mx-auto space-y-6\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              onClick={() => navigate(\"/merchant/activity-requests\")}\r\n            >\r\n              <ArrowLeft className=\"h-4 w-4\" />\r\n            </Button>\r\n            <div>\r\n              <h1 className=\"text-2xl font-bold\">申请创建活动</h1>\r\n              <p className=\"text-muted-foreground\">\r\n                填写活动信息，提交后等待管理员审核\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle className=\"flex items-center gap-2\">\r\n                <Calendar className=\"h-5 w-5\" />\r\n                活动信息\r\n              </CardTitle>\r\n              <CardDescription>\r\n                请填写完整的活动信息，审核通过后将自动创建活动\r\n              </CardDescription>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <Form {...form}>\r\n                <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\r\n                  {/* 标题 */}\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                    <FormField\r\n                      control={form.control}\r\n                      name=\"title_zh\"\r\n                      render={({ field }) => (\r\n                        <FormItem>\r\n                          <FormLabel>中文标题 *</FormLabel>\r\n                          <FormControl>\r\n                            <Input placeholder=\"活动标题\" {...field} />\r\n                          </FormControl>\r\n                          <FormMessage />\r\n                        </FormItem>\r\n                      )}\r\n                    />\r\n                    <FormField\r\n                      control={form.control}\r\n                      name=\"title_en\"\r\n                      render={({ field }) => (\r\n                        <FormItem>\r\n                          <FormLabel>英文标题 *</FormLabel>\r\n                          <FormControl>\r\n                            <Input placeholder=\"Activity Title\" {...field} />\r\n                          </FormControl>\r\n                          <FormMessage />\r\n                        </FormItem>\r\n                      )}\r\n                    />\r\n                    <FormField\r\n                      control={form.control}\r\n                      name=\"title_pt\"\r\n                      render={({ field }) => (\r\n                        <FormItem>\r\n                          <FormLabel>葡萄牙语标题 *</FormLabel>\r\n                          <FormControl>\r\n                            <Input placeholder=\"Título da Atividade\" {...field} />\r\n                          </FormControl>\r\n                          <FormMessage />\r\n                        </FormItem>\r\n                      )}\r\n                    />\r\n                  </div>\r\n\r\n                  {/* 简介 */}\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                    <FormField\r\n                      control={form.control}\r\n                      name=\"intro_zh\"\r\n                      render={({ field }) => (\r\n                        <FormItem>\r\n                          <FormLabel>中文简介</FormLabel>\r\n                          <FormControl>\r\n                            <Input placeholder=\"简短描述\" {...field} />\r\n                          </FormControl>\r\n                          <FormMessage />\r\n                        </FormItem>\r\n                      )}\r\n                    />\r\n                    <FormField\r\n                      control={form.control}\r\n                      name=\"intro_en\"\r\n                      render={({ field }) => (\r\n                        <FormItem>\r\n                          <FormLabel>英文简介</FormLabel>\r\n                          <FormControl>\r\n                            <Input placeholder=\"Brief description\" {...field} />\r\n                          </FormControl>\r\n                          <FormMessage />\r\n                        </FormItem>\r\n                      )}\r\n                    />\r\n                    <FormField\r\n                      control={form.control}\r\n                      name=\"intro_pt\"\r\n                      render={({ field }) => (\r\n                        <FormItem>\r\n                          <FormLabel>葡萄牙语简介</FormLabel>\r\n                          <FormControl>\r\n                            <Input placeholder=\"Descrição breve\" {...field} />\r\n                          </FormControl>\r\n                          <FormMessage />\r\n                        </FormItem>\r\n                      )}\r\n                    />\r\n                  </div>\r\n\r\n                  {/* 内容 */}\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                    <FormField\r\n                      control={form.control}\r\n                      name=\"content_zh\"\r\n                      render={({ field }) => (\r\n                        <FormItem>\r\n                          <FormLabel>中文内容 *</FormLabel>\r\n                          <FormControl>\r\n                            <Textarea placeholder=\"详细描述\" rows={5} {...field} />\r\n                          </FormControl>\r\n                          <FormMessage />\r\n                        </FormItem>\r\n                      )}\r\n                    />\r\n                    <FormField\r\n                      control={form.control}\r\n                      name=\"content_en\"\r\n                      render={({ field }) => (\r\n                        <FormItem>\r\n                          <FormLabel>英文内容 *</FormLabel>\r\n                          <FormControl>\r\n                            <Textarea placeholder=\"Detailed description\" rows={5} {...field} />\r\n                          </FormControl>\r\n                          <FormMessage />\r\n                        </FormItem>\r\n                      )}\r\n                    />\r\n                    <FormField\r\n                      control={form.control}\r\n                      name=\"content_pt\"\r\n                      render={({ field }) => (\r\n                        <FormItem>\r\n                          <FormLabel>葡萄牙语内容 *</FormLabel>\r\n                          <FormControl>\r\n                            <Textarea placeholder=\"Descrição detalhada\" rows={5} {...field} />\r\n                          </FormControl>\r\n                          <FormMessage />\r\n                        </FormItem>\r\n                      )}\r\n                    />\r\n                  </div>\r\n\r\n                  {/* 图片和服务类型 */}\r\n                  <div className=\"space-y-4\">\r\n                    <div className=\"space-y-3\">\r\n                      <Label>封面图片</Label>\r\n                      <RadioGroup\r\n                        value={imageMode}\r\n                        onValueChange={(value) => {\r\n                          setImageMode(value as \"upload\" | \"url\");\r\n                          if (value === \"url\") {\r\n                            clearUploadedImage();\r\n                          } else {\r\n                            form.setValue(\"image_url\", \"\");\r\n                            setPreviewImage(\"\");\r\n                          }\r\n                        }}\r\n                        className=\"flex gap-4\"\r\n                      >\r\n                        <div className=\"flex items-center space-x-2\">\r\n                          <RadioGroupItem value=\"upload\" id=\"upload\" />\r\n                          <Label htmlFor=\"upload\" className=\"flex items-center gap-1 cursor-pointer\">\r\n                            <Upload className=\"h-4 w-4\" />\r\n                            上传图片\r\n                          </Label>\r\n                        </div>\r\n                        <div className=\"flex items-center space-x-2\">\r\n                          <RadioGroupItem value=\"url\" id=\"url\" />\r\n                          <Label htmlFor=\"url\" className=\"flex items-center gap-1 cursor-pointer\">\r\n                            <LinkIcon className=\"h-4 w-4\" />\r\n                            图片URL\r\n                          </Label>\r\n                        </div>\r\n                      </RadioGroup>\r\n\r\n                      {imageMode === \"upload\" ? (\r\n                        <div className=\"space-y-3\">\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <Input\r\n                              ref={fileInputRef}\r\n                              type=\"file\"\r\n                              accept=\"image/*\"\r\n                              onChange={handleFileChange}\r\n                              disabled={uploading}\r\n                              className=\"flex-1\"\r\n                            />\r\n                            {uploading && <Loader2 className=\"h-4 w-4 animate-spin\" />}\r\n                          </div>\r\n                          {previewImage && (\r\n                            <div className=\"relative inline-block\">\r\n                              <img\r\n                                src={previewImage}\r\n                                alt=\"Preview\"\r\n                                className=\"max-h-32 rounded-md border\"\r\n                              />\r\n                              <Button\r\n                                type=\"button\"\r\n                                variant=\"destructive\"\r\n                                size=\"icon\"\r\n                                className=\"absolute -top-2 -right-2 h-6 w-6\"\r\n                                onClick={clearUploadedImage}\r\n                              >\r\n                                <X className=\"h-3 w-3\" />\r\n                              </Button>\r\n                            </div>\r\n                          )}\r\n                          <p className=\"text-xs text-muted-foreground\">\r\n                            支持 JPG、PNG、WebP 格式，最大 5MB\r\n                          </p>\r\n                        </div>\r\n                      ) : (\r\n                        <FormField\r\n                          control={form.control}\r\n                          name=\"image_url\"\r\n                          render={({ field }) => (\r\n                            <FormItem>\r\n                              <FormControl>\r\n                                <Input\r\n                                  placeholder=\"https://example.com/image.jpg\"\r\n                                  {...field}\r\n                                  onChange={(e) => {\r\n                                    field.onChange(e);\r\n                                    setPreviewImage(e.target.value);\r\n                                  }}\r\n                                />\r\n                              </FormControl>\r\n                              {previewImage && (\r\n                                <div className=\"mt-2\">\r\n                                  <img\r\n                                    src={previewImage}\r\n                                    alt=\"Preview\"\r\n                                    className=\"max-h-32 rounded-md border\"\r\n                                    onError={() => setPreviewImage(\"\")}\r\n                                  />\r\n                                </div>\r\n                              )}\r\n                              <FormMessage />\r\n                            </FormItem>\r\n                          )}\r\n                        />\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                    <div /> {/* Spacer for alignment */}\r\n                    <FormField\r\n                      control={form.control}\r\n                      name=\"service_type\"\r\n                      render={({ field }) => (\r\n                        <FormItem>\r\n                          <FormLabel>服务类型 *</FormLabel>\r\n                          <Select onValueChange={field.onChange} defaultValue={field.value}>\r\n                            <FormControl>\r\n                              <SelectTrigger>\r\n                                <SelectValue placeholder=\"选择服务类型\" />\r\n                              </SelectTrigger>\r\n                            </FormControl>\r\n                            <SelectContent>\r\n                              <SelectItem value=\"dine_in\">堂食</SelectItem>\r\n                              <SelectItem value=\"takeaway\">外卖</SelectItem>\r\n                              <SelectItem value=\"both\">堂食+外卖</SelectItem>\r\n                            </SelectContent>\r\n                          </Select>\r\n                          <FormMessage />\r\n                        </FormItem>\r\n                      )}\r\n                    />\r\n                  </div>\r\n\r\n                  {/* 日期 */}\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                    <FormField\r\n                      control={form.control}\r\n                      name=\"start_date\"\r\n                      render={({ field }) => (\r\n                        <FormItem>\r\n                          <FormLabel>开始日期 *</FormLabel>\r\n                          <FormControl>\r\n                            <Input type=\"date\" {...field} />\r\n                          </FormControl>\r\n                          <FormMessage />\r\n                        </FormItem>\r\n                      )}\r\n                    />\r\n                    <FormField\r\n                      control={form.control}\r\n                      name=\"end_date\"\r\n                      render={({ field }) => (\r\n                        <FormItem>\r\n                          <FormLabel>结束日期</FormLabel>\r\n                          <FormControl>\r\n                            <Input type=\"date\" {...field} />\r\n                          </FormControl>\r\n                          <FormDescription>留空表示无限期</FormDescription>\r\n                          <FormMessage />\r\n                        </FormItem>\r\n                      )}\r\n                    />\r\n                  </div>\r\n\r\n                  {/* 徽章 */}\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n                    <FormField\r\n                      control={form.control}\r\n                      name=\"badge_text_zh\"\r\n                      render={({ field }) => (\r\n                        <FormItem>\r\n                          <FormLabel>中文徽章</FormLabel>\r\n                          <FormControl>\r\n                            <Input placeholder=\"新活动\" {...field} />\r\n                          </FormControl>\r\n                          <FormMessage />\r\n                        </FormItem>\r\n                      )}\r\n                    />\r\n                    <FormField\r\n                      control={form.control}\r\n                      name=\"badge_text_en\"\r\n                      render={({ field }) => (\r\n                        <FormItem>\r\n                          <FormLabel>英文徽章</FormLabel>\r\n                          <FormControl>\r\n                            <Input placeholder=\"New\" {...field} />\r\n                          </FormControl>\r\n                          <FormMessage />\r\n                        </FormItem>\r\n                      )}\r\n                    />\r\n                    <FormField\r\n                      control={form.control}\r\n                      name=\"badge_text_pt\"\r\n                      render={({ field }) => (\r\n                        <FormItem>\r\n                          <FormLabel>葡萄牙语徽章</FormLabel>\r\n                          <FormControl>\r\n                            <Input placeholder=\"Novo\" {...field} />\r\n                          </FormControl>\r\n                          <FormMessage />\r\n                        </FormItem>\r\n                      )}\r\n                    />\r\n                    <FormField\r\n                      control={form.control}\r\n                      name=\"badge_color\"\r\n                      render={({ field }) => (\r\n                        <FormItem>\r\n                          <FormLabel>徽章颜色</FormLabel>\r\n                          <FormControl>\r\n                            <Input type=\"color\" {...field} />\r\n                          </FormControl>\r\n                          <FormMessage />\r\n                        </FormItem>\r\n                      )}\r\n                    />\r\n                  </div>\r\n\r\n                  {/* 提交按钮 */}\r\n                  <div className=\"flex justify-end gap-2\">\r\n                    <Button\r\n                      type=\"button\"\r\n                      variant=\"outline\"\r\n                      onClick={() => navigate(\"/merchant/activity-requests\")}\r\n                      disabled={loading}\r\n                    >\r\n                      取消\r\n                    </Button>\r\n                    <Button type=\"submit\" disabled={loading}>\r\n                      {loading ? \"提交中...\" : \"提交申请\"}\r\n                    </Button>\r\n                  </div>\r\n                </form>\r\n              </Form>\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MerchantActivityRequestForm;\r\n"],"names":["formSchema","z.object","z.string","z.literal","z.enum","MerchantActivityRequestForm","useTranslation","navigate","useNavigate","user","useAuth","isMerchant","isSupervisor","useUserRole","createMutation","useCreateActivityRequest","loading","setLoading","useState","imageMode","setImageMode","uploadedImageUrl","setUploadedImageUrl","uploading","setUploading","previewImage","setPreviewImage","fileInputRef","useRef","handleImageUpload","file","toast","fileExt","filePath","uploadError","supabase","publicUrl","error","handleFileChange","e","clearUploadedImage","form","useForm","zodResolver","jsxs","jsx","Navigation","Card","CardContent","AlertCircle","onSubmit","data","finalImageUrl","Button","ArrowLeft","CardHeader","CardTitle","Calendar","CardDescription","Form","FormField","field","FormItem","FormLabel","FormControl","Input","FormMessage","Textarea","Label","RadioGroup","value","RadioGroupItem","Upload","LinkIcon","Loader2","X","Select","SelectTrigger","SelectValue","SelectContent","SelectItem","FormDescription"],"mappings":"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"}