{"version":3,"file":"useActivityRules-DkiK4chF.js","sources":["../../src/hooks/useActivityRules.ts"],"sourcesContent":["import { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\n\r\nexport interface ActivityRules {\r\n  id: string;\r\n  content_zh: string;\r\n  content_en: string;\r\n  content_pt: string;\r\n  updated_at: string;\r\n  created_at: string;\r\n}\r\n\r\nexport const useActivityRules = () => {\r\n  return useQuery({\r\n    queryKey: [\"activity-rules\"],\r\n    queryFn: async () => {\r\n      const { data, error } = await supabase\r\n        .from(\"activity_rules\")\r\n        .select(\"*\")\r\n        .single();\r\n\r\n      if (error) throw error;\r\n      return data as ActivityRules;\r\n    },\r\n  });\r\n};\r\n\r\nexport const useUpdateActivityRules = () => {\r\n  const queryClient = useQueryClient();\r\n\r\n  return useMutation({\r\n    mutationFn: async (rules: Partial<ActivityRules> & { id: string }) => {\r\n      const { data, error } = await supabase\r\n        .from(\"activity_rules\")\r\n        .update({\r\n          content_zh: rules.content_zh,\r\n          content_en: rules.content_en,\r\n          content_pt: rules.content_pt,\r\n          updated_at: new Date().toISOString(),\r\n        })\r\n        .eq(\"id\", rules.id)\r\n        .select()\r\n        .single();\r\n\r\n      if (error) throw error;\r\n      return data;\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"activity-rules\"] });\r\n    },\r\n  });\r\n};\r\n"],"names":["useActivityRules","useQuery","data","error","supabase","useUpdateActivityRules","queryClient","useQueryClient","useMutation","rules"],"mappings":"gGAYO,MAAMA,EAAmB,IACvBC,EAAS,CACd,SAAU,CAAC,gBAAgB,EAC3B,QAAS,SAAY,CACnB,KAAM,CAAE,KAAAC,EAAM,MAAAC,CAAM,EAAI,MAAMC,EAC3B,KAAK,gBAAgB,EACrB,OAAO,GAAG,EACV,OAAO,EAEV,GAAID,EAAa,MAAAA,EACV,OAAAD,CACT,CAAA,CACD,EAGUG,EAAyB,IAAM,CAC1C,MAAMC,EAAcC,IAEpB,OAAOC,EAAY,CACjB,WAAY,MAAOC,GAAmD,CAC9D,KAAA,CAAE,KAAAP,EAAM,MAAAC,GAAU,MAAMC,EAC3B,KAAK,gBAAgB,EACrB,OAAO,CACN,WAAYK,EAAM,WAClB,WAAYA,EAAM,WAClB,WAAYA,EAAM,WAClB,WAAY,IAAI,KAAK,EAAE,YAAY,CAAA,CACpC,EACA,GAAG,KAAMA,EAAM,EAAE,EACjB,OAAO,EACP,SAEH,GAAIN,EAAa,MAAAA,EACV,OAAAD,CACT,EACA,UAAW,IAAM,CACfI,EAAY,kBAAkB,CAAE,SAAU,CAAC,gBAAgB,CAAG,CAAA,CAChE,CAAA,CACD,CACH"}