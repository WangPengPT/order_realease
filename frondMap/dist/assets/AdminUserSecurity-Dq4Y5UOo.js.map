{"version":3,"file":"AdminUserSecurity-Dq4Y5UOo.js","sources":["../../src/pages/admin/AdminUserSecurity.tsx"],"sourcesContent":["import { useState, useMemo, useEffect } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogFooter,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from \"@/components/ui/dialog\";\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport { useAdminUsers, useBanUser, useUnbanUser, useMuteUser, useUnmuteUser } from \"@/hooks/useAdmin\";\r\nimport { useUserRole } from \"@/hooks/useUserRole\";\r\nimport { useInfiniteScroll } from \"@/hooks/useInfiniteScroll\";\r\nimport { UserProfileDialog } from \"@/components/admin/UserProfileDialog\";\r\nimport {\r\n  Search,\r\n  Users,\r\n  Briefcase,\r\n  Shield,\r\n  ShieldAlert,\r\n  X,\r\n  Eye,\r\n  Ban,\r\n  UserCheck,\r\n  VolumeX,\r\n  Volume2,\r\n  Loader2,\r\n} from \"lucide-react\";\r\n\r\nconst BAN_REASONS = [\r\n  \"spam\",\r\n  \"harassment\",\r\n  \"inappropriate_content\",\r\n  \"fraud\",\r\n  \"terms_violation\",\r\n  \"other\",\r\n];\r\n\r\nconst MUTE_REASONS = [\r\n  \"spam_comments\",\r\n  \"inappropriate_language\",\r\n  \"repeated_warnings\",\r\n  \"temporary_restriction\",\r\n  \"other\",\r\n];\r\n\r\nconst AdminUserSecurity = () => {\r\n  const { t } = useTranslation();\r\n  const { isAdmin } = useUserRole();\r\n  const { data: users, isLoading } = useAdminUsers();\r\n  const banUser = useBanUser();\r\n  const unbanUser = useUnbanUser();\r\n  const muteUser = useMuteUser();\r\n  const unmuteUser = useUnmuteUser();\r\n\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [banDialog, setBanDialog] = useState<{ open: boolean; userId: string; userName: string }>({\r\n    open: false,\r\n    userId: \"\",\r\n    userName: \"\",\r\n  });\r\n  const [banReasonType, setBanReasonType] = useState<string>(\"other\");\r\n  const [banReason, setBanReason] = useState(\"\");\r\n  const [muteDialog, setMuteDialog] = useState<{ open: boolean; userId: string; userName: string }>({\r\n    open: false,\r\n    userId: \"\",\r\n    userName: \"\",\r\n  });\r\n  const [muteReasonType, setMuteReasonType] = useState<string>(\"other\");\r\n  const [muteReason, setMuteReason] = useState(\"\");\r\n  const [muteDays, setMuteDays] = useState(\"7\");\r\n  const [userProfileDialog, setUserProfileDialog] = useState<{\r\n    open: boolean;\r\n    userId: string;\r\n    userName: string;\r\n    userRole: string;\r\n  }>({ open: false, userId: \"\", userName: \"\", userRole: \"\" });\r\n\r\n  // Calculate statistics\r\n  const stats = useMemo(() => {\r\n    if (!users) return { total: 0, banned: 0, muted: 0 };\r\n    return {\r\n      total: users.length,\r\n      banned: users.filter((u: any) => u.is_banned).length,\r\n      muted: users.filter((u: any) => u.is_muted).length,\r\n    };\r\n  }, [users]);\r\n\r\n  // Filter users\r\n  const filteredUsers = useMemo(() => {\r\n    if (!users) return [];\r\n    return users.filter((user: any) => {\r\n      const matchesSearch =\r\n        searchQuery === \"\" ||\r\n        user.display_name.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        user.phone?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        user.email?.toLowerCase().includes(searchQuery.toLowerCase());\r\n      return matchesSearch;\r\n    });\r\n  }, [users, searchQuery]);\r\n\r\n  // Infinite scroll for users\r\n  const {\r\n    displayedData: displayedUsers,\r\n    hasMore,\r\n    reset: resetInfiniteScroll,\r\n    displayedCount,\r\n    sentinelRef,\r\n  } = useInfiniteScroll({\r\n    data: filteredUsers,\r\n    initialItemsPerPage: 30,\r\n    incrementPerPage: 30,\r\n  });\r\n\r\n  // Reset infinite scroll when search changes\r\n  useEffect(() => {\r\n    resetInfiniteScroll();\r\n  }, [searchQuery, resetInfiniteScroll]);\r\n\r\n  const getFinalBanReason = () => {\r\n    if (banReasonType === \"other\") {\r\n      return banReason;\r\n    }\r\n    return banReason ? `${t(`admin.banReasons.${banReasonType}`)}: ${banReason}` : t(`admin.banReasons.${banReasonType}`);\r\n  };\r\n\r\n  const getFinalMuteReason = () => {\r\n    if (muteReasonType === \"other\") {\r\n      return muteReason;\r\n    }\r\n    return muteReason ? `${t(`admin.muteReasons.${muteReasonType}`)}: ${muteReason}` : t(`admin.muteReasons.${muteReasonType}`);\r\n  };\r\n\r\n  const handleBan = () => {\r\n    if (!banDialog.userId) return;\r\n    banUser.mutate(\r\n      { userId: banDialog.userId, banReason: getFinalBanReason() },\r\n      {\r\n        onSuccess: () => {\r\n          setBanDialog({ open: false, userId: \"\", userName: \"\" });\r\n          setBanReasonType(\"other\");\r\n          setBanReason(\"\");\r\n        },\r\n      }\r\n    );\r\n  };\r\n\r\n  const handleMute = () => {\r\n    if (!muteDialog.userId) return;\r\n    const mutedUntil = muteDays\r\n      ? new Date(Date.now() + parseInt(muteDays) * 24 * 60 * 60 * 1000).toISOString()\r\n      : undefined;\r\n    muteUser.mutate(\r\n      { userId: muteDialog.userId, muteReason: getFinalMuteReason(), mutedUntil },\r\n      {\r\n        onSuccess: () => {\r\n          setMuteDialog({ open: false, userId: \"\", userName: \"\" });\r\n          setMuteReasonType(\"other\");\r\n          setMuteReason(\"\");\r\n          setMuteDays(\"7\");\r\n        },\r\n      }\r\n    );\r\n  };\r\n\r\n  const getRoleBadgeColor = (role: string) => {\r\n    switch (role) {\r\n      case \"admin\":\r\n        return \"bg-primary text-primary-foreground\";\r\n      case \"supervisor\":\r\n        return \"bg-blue-500 text-white\";\r\n      case \"merchant\":\r\n        return \"bg-emerald-500 text-white\";\r\n      default:\r\n        return \"bg-muted text-muted-foreground\";\r\n    }\r\n  };\r\n\r\n  const getRoleIcon = (role: string) => {\r\n    switch (role) {\r\n      case \"admin\":\r\n      case \"supervisor\":\r\n        return <Shield className=\"h-3.5 w-3.5\" />;\r\n      case \"merchant\":\r\n        return <Briefcase className=\"h-3.5 w-3.5\" />;\r\n      default:\r\n        return <Users className=\"h-3.5 w-3.5\" />;\r\n    }\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-[60vh]\">\r\n        <div className=\"text-center space-y-3\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto\"></div>\r\n          <p className=\"text-muted-foreground\">{t(\"common.loading\")}</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div>\r\n        <div className=\"flex items-center gap-3 mb-2\">\r\n          <div className=\"p-2 bg-primary/10 rounded-lg\">\r\n            <ShieldAlert className=\"h-6 w-6 text-primary\" />\r\n          </div>\r\n          <div>\r\n            <h1 className=\"text-3xl font-bold tracking-tight\">{t(\"admin.userSecurity\")}</h1>\r\n            <p className=\"text-muted-foreground\">{t(\"admin.userSecurityDesc\")}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Statistics Cards */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n        <Card className=\"bg-gradient-to-br from-primary/5 to-primary/10 border-primary/20\">\r\n          <CardContent className=\"pt-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-sm font-medium text-muted-foreground\">{t(\"admin.totalUsersLabel\")}</p>\r\n                <p className=\"text-2xl font-bold\">{stats.total}</p>\r\n              </div>\r\n              <Users className=\"h-8 w-8 text-primary/60\" />\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card className=\"bg-gradient-to-br from-orange-50 to-orange-100 border-orange-200 dark:from-orange-950/20 dark:to-orange-900/20 dark:border-orange-900/30\">\r\n          <CardContent className=\"pt-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-sm font-medium text-muted-foreground\">{t(\"admin.bannedCount\")}</p>\r\n                <p className=\"text-2xl font-bold\">{stats.banned}</p>\r\n              </div>\r\n              <Ban className=\"h-8 w-8 text-orange-500\" />\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card className=\"bg-gradient-to-br from-yellow-50 to-yellow-100 border-yellow-200 dark:from-yellow-950/20 dark:to-yellow-900/20 dark:border-yellow-900/30\">\r\n          <CardContent className=\"pt-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-sm font-medium text-muted-foreground\">{t(\"admin.mutedCount\")}</p>\r\n                <p className=\"text-2xl font-bold\">{stats.muted}</p>\r\n              </div>\r\n              <VolumeX className=\"h-8 w-8 text-yellow-500\" />\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Search */}\r\n      <Card>\r\n        <CardContent className=\"pt-6\">\r\n          <div className=\"relative\">\r\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n            <Input\r\n              placeholder={t(\"admin.searchUserPlaceholder\")}\r\n              value={searchQuery}\r\n              onChange={(e) => setSearchQuery(e.target.value)}\r\n              className=\"pl-10 pr-10\"\r\n            />\r\n            {searchQuery && (\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                className=\"absolute right-1 top-1/2 transform -translate-y-1/2 h-7 w-7 p-0\"\r\n                onClick={() => setSearchQuery(\"\")}\r\n              >\r\n                <X className=\"h-4 w-4\" />\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* User List */}\r\n      <div className=\"space-y-4\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <Badge variant=\"secondary\" className=\"text-xs\">\r\n            {displayedCount} / {filteredUsers?.length || 0} {t(\"admin.totalUsersLabel\")}\r\n          </Badge>\r\n        </div>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n        {displayedUsers?.map((user: any) => (\r\n          <Card\r\n            key={user.id}\r\n            className={`transition-all duration-200 hover:shadow-md ${\r\n              user.is_banned ? \"border-orange-300 bg-orange-50/50 dark:bg-orange-950/20\" : \"\"\r\n            } ${user.is_muted ? \"border-yellow-300 bg-yellow-50/50 dark:bg-yellow-950/20\" : \"\"}`}\r\n          >\r\n            <CardContent className=\"p-4\">\r\n              <div className=\"flex items-start gap-3\">\r\n                <Avatar className=\"h-12 w-12\">\r\n                  <AvatarImage src={user.avatar_url} alt={user.display_name} />\r\n                  <AvatarFallback>{user.display_name.charAt(0).toUpperCase()}</AvatarFallback>\r\n                </Avatar>\r\n                <div className=\"flex-1 min-w-0\">\r\n                  <div className=\"flex items-center gap-2 flex-wrap\">\r\n                    <h3 className=\"font-semibold truncate\">{user.display_name}</h3>\r\n                    {user.is_banned && (\r\n                      <Badge variant=\"outline\" className=\"text-xs text-orange-500 border-orange-300\">\r\n                        {t(\"admin.banned\")}\r\n                      </Badge>\r\n                    )}\r\n                    {user.is_muted && (\r\n                      <Badge variant=\"outline\" className=\"text-xs text-yellow-500 border-yellow-300\">\r\n                        {t(\"admin.muted\")}\r\n                      </Badge>\r\n                    )}\r\n                  </div>\r\n                  <p className=\"text-sm text-muted-foreground truncate\">{user.email}</p>\r\n                  <Badge className={`${getRoleBadgeColor(user.role)} text-xs mt-1`}>\r\n                    {getRoleIcon(user.role)}\r\n                    <span className=\"ml-1 capitalize\">{user.role}</span>\r\n                  </Badge>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Action Buttons */}\r\n              <div className=\"flex flex-wrap gap-2 mt-4 pt-3 border-t\">\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={() =>\r\n                    setUserProfileDialog({\r\n                      open: true,\r\n                      userId: user.id,\r\n                      userName: user.display_name,\r\n                      userRole: user.role,\r\n                    })\r\n                  }\r\n                >\r\n                  <Eye className=\"h-4 w-4 mr-1\" />\r\n                  {t(\"admin.viewProfile\")}\r\n                </Button>\r\n\r\n                {isAdmin && user.role !== \"admin\" && (\r\n                  <>\r\n                    {user.is_banned ? (\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        size=\"sm\"\r\n                        className=\"text-green-600 border-green-300 hover:bg-green-50\"\r\n                        onClick={() => unbanUser.mutate(user.id)}\r\n                      >\r\n                        <UserCheck className=\"h-4 w-4 mr-1\" />\r\n                        {t(\"admin.unban\")}\r\n                      </Button>\r\n                    ) : (\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        size=\"sm\"\r\n                        className=\"text-orange-600 border-orange-300 hover:bg-orange-50\"\r\n                        onClick={() =>\r\n                          setBanDialog({ open: true, userId: user.id, userName: user.display_name })\r\n                        }\r\n                      >\r\n                        <Ban className=\"h-4 w-4 mr-1\" />\r\n                        {t(\"admin.ban\")}\r\n                      </Button>\r\n                    )}\r\n\r\n                    {user.is_muted ? (\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        size=\"sm\"\r\n                        className=\"text-green-600 border-green-300 hover:bg-green-50\"\r\n                        onClick={() => unmuteUser.mutate(user.id)}\r\n                      >\r\n                        <Volume2 className=\"h-4 w-4 mr-1\" />\r\n                        {t(\"admin.unmute\")}\r\n                      </Button>\r\n                    ) : (\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        size=\"sm\"\r\n                        className=\"text-yellow-600 border-yellow-300 hover:bg-yellow-50\"\r\n                        onClick={() =>\r\n                          setMuteDialog({ open: true, userId: user.id, userName: user.display_name })\r\n                        }\r\n                      >\r\n                        <VolumeX className=\"h-4 w-4 mr-1\" />\r\n                        {t(\"admin.mute\")}\r\n                      </Button>\r\n                    )}\r\n                  </>\r\n                )}\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        ))}\r\n        </div>\r\n\r\n        {/* Infinite scroll sentinel */}\r\n        {hasMore && (\r\n          <div ref={sentinelRef} className=\"flex justify-center py-4\">\r\n            <Loader2 className=\"h-6 w-6 animate-spin text-muted-foreground\" />\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {filteredUsers?.length === 0 && (\r\n        <div className=\"text-center py-12 text-muted-foreground\">{t(\"admin.noUsersFound\")}</div>\r\n      )}\r\n\r\n      {/* Ban Dialog */}\r\n      <Dialog open={banDialog.open} onOpenChange={(open) => setBanDialog({ ...banDialog, open })}>\r\n        <DialogContent>\r\n          <DialogHeader>\r\n            <DialogTitle>{t(\"admin.banUser\")}</DialogTitle>\r\n            <DialogDescription>\r\n              {t(\"admin.banUserConfirm\", { name: banDialog.userName })}\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n          <div className=\"space-y-4\">\r\n            <div>\r\n              <label className=\"text-sm font-medium\">{t(\"admin.selectBanReason\")}</label>\r\n              <Select value={banReasonType} onValueChange={setBanReasonType}>\r\n                <SelectTrigger className=\"mt-1\">\r\n                  <SelectValue />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  {BAN_REASONS.map((reason) => (\r\n                    <SelectItem key={reason} value={reason}>\r\n                      {t(`admin.banReasons.${reason}`)}\r\n                    </SelectItem>\r\n                  ))}\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n            <div>\r\n              <label className=\"text-sm font-medium\">{t(\"admin.additionalDetails\")}</label>\r\n              <Textarea\r\n                placeholder={t(\"admin.banReasonPlaceholder\")}\r\n                value={banReason}\r\n                onChange={(e) => setBanReason(e.target.value)}\r\n                className=\"mt-1\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <DialogFooter>\r\n            <Button variant=\"outline\" onClick={() => setBanDialog({ open: false, userId: \"\", userName: \"\" })}>\r\n              {t(\"common.cancel\")}\r\n            </Button>\r\n            <Button variant=\"destructive\" onClick={handleBan}>\r\n              {t(\"admin.confirmBan\")}\r\n            </Button>\r\n          </DialogFooter>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      {/* Mute Dialog */}\r\n      <Dialog open={muteDialog.open} onOpenChange={(open) => setMuteDialog({ ...muteDialog, open })}>\r\n        <DialogContent>\r\n          <DialogHeader>\r\n            <DialogTitle>{t(\"admin.muteUser\")}</DialogTitle>\r\n            <DialogDescription>\r\n              {t(\"admin.muteUserConfirm\", { name: muteDialog.userName })}\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n          <div className=\"space-y-4\">\r\n            <div>\r\n              <label className=\"text-sm font-medium\">{t(\"admin.muteDuration\")}</label>\r\n              <Input\r\n                type=\"number\"\r\n                placeholder=\"7\"\r\n                value={muteDays}\r\n                onChange={(e) => setMuteDays(e.target.value)}\r\n                className=\"mt-1\"\r\n              />\r\n              <p className=\"text-xs text-muted-foreground mt-1\">{t(\"admin.muteDurationHint\")}</p>\r\n            </div>\r\n            <div>\r\n              <label className=\"text-sm font-medium\">{t(\"admin.selectMuteReason\")}</label>\r\n              <Select value={muteReasonType} onValueChange={setMuteReasonType}>\r\n                <SelectTrigger className=\"mt-1\">\r\n                  <SelectValue />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  {MUTE_REASONS.map((reason) => (\r\n                    <SelectItem key={reason} value={reason}>\r\n                      {t(`admin.muteReasons.${reason}`)}\r\n                    </SelectItem>\r\n                  ))}\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n            <div>\r\n              <label className=\"text-sm font-medium\">{t(\"admin.additionalDetails\")}</label>\r\n              <Textarea\r\n                placeholder={t(\"admin.muteReasonPlaceholder\")}\r\n                value={muteReason}\r\n                onChange={(e) => setMuteReason(e.target.value)}\r\n                className=\"mt-1\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <DialogFooter>\r\n            <Button variant=\"outline\" onClick={() => setMuteDialog({ open: false, userId: \"\", userName: \"\" })}>\r\n              {t(\"common.cancel\")}\r\n            </Button>\r\n            <Button variant=\"destructive\" onClick={handleMute}>\r\n              {t(\"admin.confirmMute\")}\r\n            </Button>\r\n          </DialogFooter>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      {/* User Profile Dialog */}\r\n      <UserProfileDialog\r\n        open={userProfileDialog.open}\r\n        onOpenChange={(open) => setUserProfileDialog({ ...userProfileDialog, open })}\r\n        userId={userProfileDialog.userId}\r\n        userName={userProfileDialog.userName}\r\n        userRole={userProfileDialog.userRole}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminUserSecurity;\r\n"],"names":["BAN_REASONS","MUTE_REASONS","AdminUserSecurity","t","useTranslation","isAdmin","useUserRole","users","isLoading","useAdminUsers","banUser","useBanUser","unbanUser","useUnbanUser","muteUser","useMuteUser","unmuteUser","useUnmuteUser","searchQuery","setSearchQuery","useState","banDialog","setBanDialog","banReasonType","setBanReasonType","banReason","setBanReason","muteDialog","setMuteDialog","muteReasonType","setMuteReasonType","muteReason","setMuteReason","muteDays","setMuteDays","userProfileDialog","setUserProfileDialog","stats","useMemo","u","filteredUsers","user","displayedUsers","hasMore","resetInfiniteScroll","displayedCount","sentinelRef","useInfiniteScroll","useEffect","getFinalBanReason","getFinalMuteReason","handleBan","handleMute","mutedUntil","getRoleBadgeColor","role","getRoleIcon","jsx","Shield","Briefcase","Users","jsxs","ShieldAlert","Card","CardContent","Ban","VolumeX","Search","Input","e","Button","X","Badge","Avatar","AvatarImage","AvatarFallback","Eye","Fragment","UserCheck","Volume2","Loader2","Dialog","open","DialogContent","DialogHeader","DialogTitle","DialogDescription","Select","SelectTrigger","SelectValue","SelectContent","reason","SelectItem","Textarea","DialogFooter","UserProfileDialog"],"mappings":"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"}