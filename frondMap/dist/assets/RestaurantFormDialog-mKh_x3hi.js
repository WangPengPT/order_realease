import{s as Ue,q as ue,v as Se,w as ne,p as Oe,r as m,d5 as es,d6 as Re,j as e,bj as ke,aL as fe,d7 as ss,d8 as ts,d9 as as,da as ns,bQ as Ie,db as rs,dc as is,cW as ls,X as J,dd as os,de as cs,df as ds,dg as ms,a4 as ps,bK as us,bO as hs,bd as je,ab as Ne,b0 as pe,y as xs,dh as gs,b4 as fs,b9 as ve,al as Pe,bh as js}from"./vendor-react-BPYg_yml.js";import{m as be}from"./vendor-map-CvE3ASYw.js";import{s as w,u as Ns,C as B,v as vs,M as bs,$ as ys,w as H,B as q,y as ws,z as _s,E as Cs,F as ks,G as Is,J as Ss,I as p,e as Ds,j as Fs,N as Es,D as Ts,Y as As,d as Rs,f as Ps,g as zs,V as qs,S as Ms,W as i,a8 as W}from"./index-p6mvnk0k.js";import{C as Z}from"./checkbox-Dlsi3or9.js";import{S as $s}from"./switch-CLHWRUXP.js";import{R as Ls,a as ze}from"./radio-group-D5pvz1Od.js";import{T as qe,a as Me,b as X,c as Y}from"./tabs-C4sMeqD3.js";import{i as T}from"./vendor-i18n-jtdHZIRR.js";import{R as ye}from"./RichTextEditor-DP9jes75.js";import{N as Us,O as S,P as we,T as $e,U as _e}from"./vendor-utils-Z4kpnli5.js";const Os=a=>Ue({queryKey:["dish-images",a],queryFn:async()=>{const{data:c,error:t}=await w.from("restaurant_dish_images").select("*").eq("restaurant_id",a).order("sort_order",{ascending:!0});if(t)throw t;return c},enabled:!!a}),Bs=()=>{const{user:a}=Ns(),c=ue();return Se({mutationFn:async({restaurantId:t,file:x})=>{if(!a)throw new Error("Must be logged in");const{data:g,error:h}=await w.from("restaurant_dish_images").select("id").eq("restaurant_id",t);if(h)throw h;if(g&&g.length>=10)throw new Error("MAX_IMAGES_REACHED");const u=x.name.split(".").pop(),v=`${t}/${Date.now()}-${Math.random().toString(36).substring(7)}.${u}`,{error:f}=await w.storage.from("dish-images").upload(v,x);if(f)throw f;const{data:{publicUrl:j}}=w.storage.from("dish-images").getPublicUrl(v),C=g?g.length:0,{data:_,error:y}=await w.from("restaurant_dish_images").insert({restaurant_id:t,image_url:j,sort_order:C,created_by:a.id}).select().single();if(y)throw y;return _},onSuccess:(t,x)=>{c.invalidateQueries({queryKey:["dish-images",x.restaurantId]}),ne.success(T.t("dishImages.uploadSuccess"))},onError:t=>{t.message==="MAX_IMAGES_REACHED"?ne.error(T.t("dishImages.maxImagesReached")):ne.error(T.t("dishImages.uploadFailed"))}})},Hs=()=>{const a=ue();return Se({mutationFn:async({imageId:c,restaurantId:t,imageUrl:x})=>{const g=x.split("/dish-images/");g[1]&&await w.storage.from("dish-images").remove([g[1]]);const{error:h}=await w.from("restaurant_dish_images").delete().eq("id",c);if(h)throw h;return{restaurantId:t}},onSuccess:c=>{a.invalidateQueries({queryKey:["dish-images",c.restaurantId]}),ne.success(T.t("dishImages.deleteSuccess"))},onError:()=>{ne.error(T.t("dishImages.deleteFailed"))}})},Ks=()=>{const a=ue();return Se({mutationFn:async({images:c,restaurantId:t})=>{const x=c.map(g=>w.from("restaurant_dish_images").update({sort_order:g.sort_order}).eq("id",g.id));return await Promise.all(x),{restaurantId:t}},onSuccess:c=>{a.invalidateQueries({queryKey:["dish-images",c.restaurantId]})}})};function Gs({image:a,index:c,onDelete:t}){const{attributes:x,listeners:g,setNodeRef:h,transform:u,transition:v,isDragging:f}=rs({id:a.id}),j={transform:is.Transform.toString(u),transition:v,zIndex:f?10:1,opacity:f?.8:1};return e.jsxs("div",{ref:h,style:j,className:`relative group aspect-square rounded-lg overflow-hidden border ${f?"ring-2 ring-primary shadow-lg":""}`,children:[e.jsx("div",{...x,...g,className:"absolute top-1 left-1 z-10 p-1 bg-black/60 rounded cursor-grab active:cursor-grabbing opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(ls,{className:"w-4 h-4 text-white"})}),e.jsx("img",{src:a.image_url,alt:`Dish ${c+1}`,className:"w-full h-full object-cover",draggable:!1}),e.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsx(q,{type:"button",variant:"destructive",size:"icon",className:"h-8 w-8",onClick:C=>{C.preventDefault(),C.stopPropagation(),t(a.id,a.image_url)},children:e.jsx(J,{className:"w-4 h-4"})})}),e.jsx("div",{className:"absolute bottom-1 right-1 bg-black/60 text-white text-xs px-1.5 py-0.5 rounded",children:c+1})]})}function Vs({restaurantId:a}){const{t:c}=Oe(),t=m.useRef(null),{data:x=[],isLoading:g}=Os(a),h=Bs(),u=Hs(),v=Ks(),[f,j]=m.useState(null),[C,_]=m.useState([]),[y,P]=m.useState(!1),l=C.length>0?C:x,D=es(Re(ds,{activationConstraint:{distance:8}}),Re(cs,{coordinateGetter:os})),ee=d=>{const{active:A,over:M}=d;if(M&&A.id!==M.id){const ae=l.findIndex(K=>K.id===A.id),le=l.findIndex(K=>K.id===M.id),oe=ms(l,ae,le);_(oe);const ce=oe.map((K,Q)=>({id:K.id,sort_order:Q}));v.mutate({images:ce,restaurantId:a},{onSuccess:()=>{_([])},onError:()=>{_([])}})}},se=async d=>{const A=d.target.files?.[0];A&&(A.size>5*1024*1024||A.type.startsWith("image/")&&(await h.mutateAsync({restaurantId:a,file:A}),t.current&&(t.current.value="")))},re=async()=>{if(!f||y)return;const{id:d,url:A}=f;P(!0);try{await u.mutateAsync({imageId:d,restaurantId:a,imageUrl:A}),j(null)}catch(M){console.error("Delete failed:",M)}finally{P(!1)}},ie=d=>{!d&&!y&&j(null)},te=l.length<10;return e.jsxs(B,{children:[e.jsxs(vs,{className:"pb-3",children:[e.jsxs(bs,{className:"text-lg flex items-center gap-2",children:[e.jsx(ke,{className:"w-5 h-5"}),c("dishImages.title")]}),e.jsxs(ys,{children:[c("dishImages.description",{current:l.length,max:10}),l.length>1&&e.jsx("span",{className:"block mt-1 text-xs",children:c("dishImages.dragToReorder")})]})]}),e.jsxs(H,{children:[g?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(fe,{className:"w-6 h-6 animate-spin"})}):e.jsxs("div",{className:"space-y-4",children:[l.length>0&&e.jsx(ss,{sensors:D,collisionDetection:ts,onDragEnd:ee,children:e.jsx(as,{items:l.map(d=>d.id),strategy:ns,children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:l.map((d,A)=>e.jsx(Gs,{image:d,index:A,onDelete:(M,ae)=>j({id:M,url:ae})},d.id))})})}),te&&e.jsxs("div",{children:[e.jsx("input",{ref:t,type:"file",accept:"image/*",className:"hidden",onChange:se,disabled:h.isPending}),e.jsxs(q,{type:"button",variant:"outline",className:"w-full",onClick:()=>t.current?.click(),disabled:h.isPending,children:[h.isPending?e.jsx(fe,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(Ie,{className:"w-4 h-4 mr-2"}),c("dishImages.upload")]})]}),!te&&e.jsx("p",{className:"text-sm text-muted-foreground text-center",children:c("dishImages.maxReached")})]}),e.jsx(ws,{open:!!f,onOpenChange:ie,children:e.jsx(_s,{onClick:d=>d.stopPropagation(),onKeyDown:d=>{d.key==="Enter"&&(d.preventDefault(),d.stopPropagation())},children:e.jsxs("form",{onSubmit:d=>d.preventDefault(),children:[e.jsxs(Cs,{children:[e.jsx(ks,{children:c("dishImages.deleteConfirmTitle")}),e.jsx(Is,{children:c("dishImages.deleteConfirmDescription")})]}),e.jsxs(Ss,{className:"mt-4",children:[e.jsx(q,{type:"button",variant:"outline",onClick:d=>{d.preventDefault(),d.stopPropagation(),y||j(null)},disabled:y,children:c("common.cancel")}),e.jsxs(q,{type:"button",variant:"destructive",onClick:d=>{d.preventDefault(),d.stopPropagation(),re()},disabled:y,children:[y?e.jsx(fe,{className:"w-4 h-4 mr-2 animate-spin"}):null,c("common.delete")]})]})]})})})]})]})}function Ce({value:a,onChange:c,suggestions:t,placeholder:x,className:g}){const[h,u]=m.useState(!1),[v,f]=m.useState(a),j=m.useRef(null),C=m.useRef(null),_=t.filter(l=>l.toLowerCase().includes(v.toLowerCase()));m.useEffect(()=>{f(a)},[a]),m.useEffect(()=>{const l=D=>{C.current&&!C.current.contains(D.target)&&j.current&&!j.current.contains(D.target)&&u(!1)};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[]);const y=l=>{const D=l.target.value;f(D),c(D),u(!0)},P=l=>{f(l),c(l),u(!1),j.current?.focus()};return e.jsxs("div",{className:"relative",children:[e.jsx(p,{ref:j,value:v,onChange:y,onFocus:()=>u(!0),placeholder:x,className:g}),h&&_.length>0&&e.jsx("div",{ref:C,className:"absolute z-50 mt-1 w-full max-h-48 overflow-auto rounded-md border bg-popover p-1 shadow-md",children:_.map(l=>e.jsxs("div",{onClick:()=>P(l),className:Ds("relative flex cursor-pointer select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none hover:bg-accent hover:text-accent-foreground",l===v&&"bg-accent"),children:[l===v&&e.jsx(ps,{className:"mr-2 h-4 w-4"}),e.jsx("span",{className:l===v?"":"pl-6",children:l})]},l))})]})}const Qs=()=>Ue({queryKey:["all-restaurant-types"],queryFn:async()=>{const{data:a,error:c}=await w.from("restaurants").select("type, type_en, type_pt");if(c)throw c;const t=new Map;a.forEach(u=>{const v=u.type||[],f=u.type_en||[],j=u.type_pt||[],C=Math.max(v.length,f.length,j.length);for(let _=0;_<C;_++){const y=v[_]||"",P=f[_]||"",l=j[_]||"",D=`${y}|${P}|${l}`;(y||P||l)&&(t.has(D)||t.set(D,{zh:y,en:P,pt:l}))}});const x=new Set,g=new Set,h=new Set;return t.forEach(u=>{u.zh&&x.add(u.zh),u.en&&g.add(u.en),u.pt&&h.add(u.pt)}),{typeSets:Array.from(t.values()),uniqueZh:Array.from(x).sort(),uniqueEn:Array.from(g).sort(),uniquePt:Array.from(h).sort()}}}),Ws=Us({name:S().min(1,T.t("validation.nameRequired")),name_en:S().min(1,T.t("validation.nameRequired")),name_pt:S().min(1,T.t("validation.nameRequired")),key_id:S().optional(),type:we(S()).min(1,T.t("validation.typeRequired")).max(3,T.t("validation.typeMaximum")),type_en:we(S()).min(1,T.t("validation.typeRequired")).max(3,T.t("validation.typeMaximum")),type_pt:we(S()).min(1,T.t("validation.typeRequired")).max(3,T.t("validation.typeMaximum")),description:S().optional(),description_en:S().optional(),description_pt:S().optional(),announcement_zh:S().optional(),announcement_en:S().optional(),announcement_pt:S().optional(),address:S().min(1,T.t("validation.addressRequired")),lat:$e(),lng:$e(),phone:S().optional(),website_url:S().optional(),visible:_e().default(!0),show_takeaway_button:_e().default(!0),show_booking_button:_e().default(!0)}),Le=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];function lt({restaurant:a,trigger:c}){const{t}=Oe(),{toast:x}=Fs(),g=ue(),{isAdmin:h}=Es(),{data:u}=Qs(),[v,f]=m.useState(!1),[j,C]=m.useState(null),[_,y]=m.useState(a?.image_url||null),[P,l]=m.useState(null),[D,ee]=m.useState(a?.cover_image_url||null),[se,re]=m.useState(null),[ie,te]=m.useState(a?.owner_avatar_url||null),[d,A]=m.useState(a?.owner_bio||""),[M,ae]=m.useState(a?.owner_bio_en||""),[le,oe]=m.useState(a?.owner_bio_pt||""),[ce,K]=m.useState(!1),Q=m.useRef(null),k=m.useRef(null),V=m.useRef(null),[r,I]=m.useState(()=>{const s={};return Le.forEach(n=>{s[n]={open:"12:00",close:"23:00",closed:!1,splitShift:!1,open2:"19:00",close2:"23:00"}}),a?.opening_hours?{...s,...a.opening_hours}:s}),[$,he]=m.useState(a?.template||"default"),[L,xe]=m.useState(()=>a?.type&&Array.isArray(a.type)?a.type.map((s,n)=>({zh:s,en:a.type_en?.[n]||"",pt:a.type_pt?.[n]||""})):[{zh:"",en:"",pt:""}]),{register:z,handleSubmit:De,formState:{errors:b},setValue:R,watch:G,trigger:Zs}=us({resolver:hs(Ws),defaultValues:a?{name:a.name,name_en:a.name_en||"",name_pt:a.name_pt||"",key_id:a.key_id||"",type:Array.isArray(a.type)?a.type:[a.type],type_en:Array.isArray(a.type_en)?a.type_en:a.type_en?[a.type_en]:[""],type_pt:Array.isArray(a.type_pt)?a.type_pt:a.type_pt?[a.type_pt]:[""],description:a.description||"",description_en:a.description_en||"",description_pt:a.description_pt||"",announcement_zh:a.announcement_zh||"",announcement_en:a.announcement_en||"",announcement_pt:a.announcement_pt||"",address:a.address,lat:typeof a.lat=="number"&&!isNaN(a.lat)?a.lat:38.7223,lng:typeof a.lng=="number"&&!isNaN(a.lng)?a.lng:-9.1393,phone:a.phone||"",website_url:a.website_url||"",visible:a.visible??!0,show_takeaway_button:a.show_takeaway_button??!0,show_booking_button:a.show_booking_button??!0}:{name:"",name_en:"",name_pt:"",key_id:"",type:[""],type_en:[""],type_pt:[""],description:"",description_en:"",description_pt:"",announcement_zh:"",announcement_en:"",announcement_pt:"",address:"",lat:38.7223,lng:-9.1393,phone:"",website_url:"",visible:!0,show_takeaway_button:!0,show_booking_button:!0}}),Be=()=>{const s=[];b.name&&s.push(t("admin.fieldName")+" (ä¸­æ–‡)"),b.name_en&&s.push(t("admin.fieldName")+" (EN)"),b.name_pt&&s.push(t("admin.fieldName")+" (PT)"),b.type&&s.push(t("admin.fieldType")+" (ä¸­æ–‡)"),b.type_en&&s.push(t("admin.fieldType")+" (EN)"),b.type_pt&&s.push(t("admin.fieldType")+" (PT)"),b.address&&s.push(t("admin.fieldAddress")),(b.lat||b.lng)&&s.push(t("admin.fieldLocation")),s.length>0&&x({title:t("admin.validationFailed"),description:t("admin.missingFields")+": "+s.join(", "),variant:"destructive"})},He=()=>{L.length<3&&xe([...L,{zh:"",en:"",pt:""}])},Ke=s=>{L.length>1&&xe(L.filter((n,o)=>o!==s))},ge=(s,n,o)=>{const N=[...L];N[s][n]=o,xe(N),R("type",N.map(F=>F.zh).filter(Boolean)),R("type_en",N.map(F=>F.en).filter(Boolean)),R("type_pt",N.map(F=>F.pt).filter(Boolean))},U=G("lat"),O=G("lng"),Ge=G("visible"),Ve=G("show_takeaway_button"),Qe=G("show_booking_button"),de=(s,n)=>typeof s=="number"&&typeof n=="number"&&!isNaN(s)&&!isNaN(n)&&isFinite(s)&&isFinite(n);m.useEffect(()=>{if(!v){k.current&&(k.current.remove(),k.current=null,V.current=null);return}if(k.current)return;const s="pk.eyJ1IjoieGlhb3hpb25nMTIzIiwiYSI6ImNtNTFjOXliYjF1Y2IyaXM4bnNzMGxvdnkifQ.mPcWqH7ndIrjEqlWIJVk8g",o=setTimeout(()=>{if(!Q.current){console.error("Map container not found");return}try{be.accessToken=s;const N=de(U,O)?O:-9.1393,F=de(U,O)?U:38.7223;k.current=new be.Map({container:Q.current,style:"mapbox://styles/mapbox/light-v11",center:[N,F],zoom:15}),k.current.scrollZoom.disable(),k.current.on("load",()=>{k.current&&(de(U,O)&&(V.current=new be.Marker({draggable:!0}).setLngLat([O,U]).addTo(k.current)),V.current.on("dragend",()=>{const E=V.current.getLngLat();R("lng",E.lng),R("lat",E.lat)}),setTimeout(()=>{k.current?.resize()},100))});const me=E=>{E.ctrlKey||E.metaKey?k.current?.scrollZoom.enable():k.current?.scrollZoom.disable()};Q.current.addEventListener("wheel",me),k.current.on("click",E=>{const{lng:Te,lat:Ae}=E.lngLat;R("lng",Te),R("lat",Ae),V.current?.setLngLat([Te,Ae])}),k.current.on("error",E=>{console.error("Map error:",E)})}catch(N){console.error("Failed to initialize map:",N)}},500);return()=>{clearTimeout(o)}},[v,U,O]),m.useEffect(()=>{V.current&&k.current&&de(U,O)&&(V.current.setLngLat([O,U]),k.current.setCenter([O,U]))},[U,O]);const We=s=>{const n=s.target.files?.[0];if(n){C(n);const o=new FileReader;o.onloadend=()=>{y(o.result)},o.readAsDataURL(n)}},Fe=s=>{const n=s.target.files?.[0];if(n){l(n);const o=new FileReader;o.onloadend=()=>{ee(o.result)},o.readAsDataURL(n)}},Ze=s=>{const n=s.target.files?.[0];if(n){re(n);const o=new FileReader;o.onloadend=()=>{te(o.result)},o.readAsDataURL(n)}},Xe=async()=>{if(!j)return a?.image_url||null;const s=j.name.split(".").pop(),o=`${`${Math.random()}.${s}`}`,{error:N}=await w.storage.from("restaurant-images").upload(o,j);if(N)throw N;const{data:{publicUrl:F}}=w.storage.from("restaurant-images").getPublicUrl(o);return F},Ye=async()=>{if(!P)return a?.cover_image_url||null;const s=P.name.split(".").pop(),o=`${`cover_${Math.random()}.${s}`}`,{error:N}=await w.storage.from("restaurant-images").upload(o,P);if(N)throw N;const{data:{publicUrl:F}}=w.storage.from("restaurant-images").getPublicUrl(o);return F},Je=async()=>{if(!se)return a?.owner_avatar_url||null;const s=se.name.split(".").pop(),o=`${`owner_${Math.random()}.${s}`}`,{error:N}=await w.storage.from("restaurant-images").upload(o,se);if(N)throw N;const{data:{publicUrl:F}}=w.storage.from("restaurant-images").getPublicUrl(o);return F},Ee=async s=>{K(!0);try{const{data:{user:n}}=await w.auth.getUser();if(!n)throw new Error("Not authenticated");const o=await Xe(),N=await Ye(),F=await Je(),me={name:s.name,name_en:s.name_en,name_pt:s.name_pt,key_id:s.key_id||null,type:s.type,type_en:s.type_en,type_pt:s.type_pt,description:s.description||null,description_en:s.description_en||null,description_pt:s.description_pt||null,announcement_zh:s.announcement_zh||null,announcement_en:s.announcement_en||null,announcement_pt:s.announcement_pt||null,address:s.address,lat:$==="ghost"?s.lat||38.7223:s.lat,lng:$==="ghost"?s.lng||-9.1393:s.lng,phone:s.phone||null,website_url:s.website_url||null,visible:s.visible,show_takeaway_button:s.show_takeaway_button,show_booking_button:$==="ghost"?!1:s.show_booking_button,image_url:o,cover_image_url:N,opening_hours:$==="ghost"?null:r,template:$,owner_avatar_url:F,owner_bio:d||null,owner_bio_en:M||null,owner_bio_pt:le||null};if(a){const{error:E}=await w.from("restaurants").update({...me,updated_by:n.id}).eq("id",a.id);if(E)throw E;x({title:t("common.success"),description:t("admin.restaurantUpdated")})}else{const{error:E}=await w.from("restaurants").insert([{...me,created_by:n.id}]);if(E)throw E;x({title:t("common.success"),description:t("admin.restaurantCreated")})}g.invalidateQueries({queryKey:["restaurants"]}),f(!1)}catch(n){x({title:t("common.error"),description:n.message,variant:"destructive"})}finally{K(!1)}};return e.jsxs(Ts,{open:v,onOpenChange:f,children:[e.jsx(As,{asChild:!0,children:c}),e.jsxs(Rs,{className:"max-w-[95vw] sm:max-w-6xl max-h-[95vh] overflow-hidden flex flex-col p-0",children:[e.jsxs(Ps,{className:"px-6 pt-6 pb-4 border-b bg-muted/30",children:[e.jsxs(zs,{className:"text-2xl flex items-center gap-2",children:[e.jsx(je,{className:"w-6 h-6 text-primary"}),t(a?"admin.editRestaurant":"admin.addRestaurant")]}),e.jsx(qs,{className:"text-base",children:t(a?"admin.editRestaurantDetails":"admin.createRestaurantWithInfo")})]}),e.jsx(Ms,{className:"px-6 h-[calc(95vh-220px)]",children:e.jsxs("form",{onSubmit:De(Ee,Be),className:"space-y-6 py-6",children:[e.jsx(B,{className:"border-primary/20 bg-gradient-to-br from-primary/5 to-background",children:e.jsx(H,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:e.jsx(Ne,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx(i,{className:"text-base font-semibold",children:t("admin.frontendDisplay")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t("admin.frontendDisplayDesc")})]})]}),e.jsx($s,{checked:Ge,onCheckedChange:s=>R("visible",s)})]})})}),e.jsx(B,{className:"border-primary/20 bg-gradient-to-br from-background to-muted/20",children:e.jsxs(H,{className:"p-6",children:[e.jsxs(i,{className:"text-base font-semibold flex items-center gap-2 mb-4",children:[e.jsx(je,{className:"w-5 h-5 text-primary"}),t("admin.restaurantTemplate")]}),e.jsxs(Ls,{value:$,onValueChange:he,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-start space-x-3 p-4 rounded-lg border border-border hover:border-primary/50 transition-colors cursor-pointer",onClick:()=>he("default"),children:[e.jsx(ze,{value:"default",id:"template-default",className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(i,{htmlFor:"template-default",className:"text-sm font-medium cursor-pointer",children:t("admin.templateDefault")}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:t("admin.templateDefaultDesc")})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 p-4 rounded-lg border border-border hover:border-primary/50 transition-colors cursor-pointer",onClick:()=>he("ghost"),children:[e.jsx(ze,{value:"ghost",id:"template-ghost",className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(i,{htmlFor:"template-ghost",className:"text-sm font-medium cursor-pointer",children:t("admin.templateGhost")}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:t("admin.templateGhostDesc")})]})]})]})]})}),e.jsx(B,{className:"border-primary/20 bg-gradient-to-br from-background to-muted/20",children:e.jsxs(H,{className:"p-6",children:[e.jsxs(i,{className:"text-base font-semibold flex items-center gap-2 mb-4",children:[e.jsx(Ie,{className:"w-5 h-5 text-primary"}),t("admin.restaurantImages")]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium",children:t("admin.cardImage")}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",t("admin.cardImageHint"),")"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[_&&e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:_,alt:"Card Preview",className:"w-32 h-32 object-cover rounded-lg shadow-lg ring-2 ring-primary/20 transition-transform duration-200 group-hover:scale-105"}),e.jsx(q,{type:"button",variant:"destructive",size:"icon",className:"absolute -top-2 -right-2 h-6 w-6 shadow-lg opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>{C(null),y(null)},children:e.jsx(J,{className:"h-3 w-3"})})]}),e.jsxs(i,{htmlFor:"image-upload",className:"cursor-pointer",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2 px-6 py-4 border-2 border-dashed border-primary/30 rounded-lg hover:border-primary hover:bg-primary/5 transition-all duration-200",children:[e.jsx(Ie,{className:"h-6 w-6 text-primary"}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"font-medium text-xs",children:t("admin.uploadImage")})})]}),e.jsx(p,{id:"image-upload",type:"file",accept:"image/*",className:"hidden",onChange:We})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium",children:t("admin.coverImage")}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",t("admin.coverImageHint"),")"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[D&&e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:D,alt:"Cover Preview",className:"w-32 h-32 object-cover rounded-lg shadow-lg ring-2 ring-accent/20 transition-transform duration-200 group-hover:scale-105"}),e.jsx(q,{type:"button",variant:"destructive",size:"icon",className:"absolute -top-2 -right-2 h-6 w-6 shadow-lg opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>{l(null),ee(null)},children:e.jsx(J,{className:"h-3 w-3"})})]}),e.jsxs(i,{htmlFor:"cover-image-upload",className:"cursor-pointer",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2 px-6 py-4 border-2 border-dashed border-accent/30 rounded-lg hover:border-accent hover:bg-accent/5 transition-all duration-200",children:[e.jsx(ke,{className:"h-6 w-6 text-accent"}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"font-medium text-xs",children:t("admin.uploadImage")})})]}),e.jsx(p,{id:"cover-image-upload",type:"file",accept:"image/*",className:"hidden",onChange:Fe})]})]})]})]})]})}),a?.id&&e.jsx(B,{className:"border-primary/20",children:e.jsxs(H,{className:"p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs(i,{className:"text-base font-semibold flex items-center gap-2",children:[e.jsx(ke,{className:"w-5 h-5 text-primary"}),t("admin.dishGallery")]})}),e.jsx(Vs,{restaurantId:a.id})]})}),e.jsx(B,{className:"border-primary/20",children:e.jsxs(H,{className:"p-6",children:[e.jsxs(i,{className:"text-base font-semibold flex items-center gap-2 mb-4",children:[e.jsx(Ne,{className:"w-5 h-5 text-primary"}),t("admin.multilingualContent")]}),e.jsxs(qe,{defaultValue:"zh",className:"w-full",children:[e.jsxs(Me,{className:"grid w-full grid-cols-3 mb-6",children:[e.jsxs(X,{value:"zh",className:"gap-2",children:["ðŸ‡¨ðŸ‡³ ",t("admin.chinese")]}),e.jsxs(X,{value:"en",className:"gap-2",children:["ðŸ‡¬ðŸ‡§ ",t("admin.english")]}),e.jsxs(X,{value:"pt",className:"gap-2",children:["ðŸ‡µðŸ‡¹ ",t("admin.portuguese")]})]}),e.jsxs(Y,{value:"zh",className:"space-y-4 mt-0",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"name",className:"text-sm font-medium",children:t("admin.restaurantName")}),e.jsx(p,{id:"name",...z("name"),placeholder:t("admin.enterRestaurantName"),className:"text-base"}),b.name&&e.jsx("p",{className:"text-sm text-destructive",children:b.name.message})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(i,{className:"text-sm font-medium",children:t("admin.restaurantType")}),L.length<3&&e.jsx(q,{type:"button",variant:"outline",size:"sm",onClick:He,children:t("admin.addType")})]}),L.map((s,n)=>e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(Ce,{placeholder:t("admin.typeExample"),value:s.zh,onChange:o=>ge(n,"zh",o),suggestions:u?.uniqueZh||[]}),e.jsx(q,{type:"button",variant:"ghost",size:"icon",onClick:()=>Ke(n),disabled:L.length===1,children:e.jsx(J,{className:"h-4 w-4"})})]},n)),b.type&&e.jsx("p",{className:"text-sm text-destructive",children:b.type.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"description",className:"text-sm font-medium",children:t("admin.description")}),e.jsx(ye,{value:G("description")||"",onChange:s=>R("description",s),placeholder:t("admin.enterDescription")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"announcement_zh",className:"text-sm font-medium",children:t("admin.announcement")}),e.jsx(W,{id:"announcement_zh",...z("announcement_zh"),rows:2,placeholder:t("admin.enterAnnouncement")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t("admin.announcementHint")})]})]}),e.jsxs(Y,{value:"en",className:"space-y-4 mt-0",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"name_en",className:"text-sm font-medium",children:"Restaurant Name"}),e.jsx(p,{id:"name_en",...z("name_en"),placeholder:"Enter restaurant name...",className:"text-base"}),b.name_en&&e.jsx("p",{className:"text-sm text-destructive",children:b.name_en.message})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(i,{className:"text-sm font-medium",children:"Restaurant Types (1-3 tags)"}),L.map((s,n)=>e.jsx("div",{className:"flex gap-2 items-center",children:e.jsx(Ce,{placeholder:"e.g. Cantonese",value:s.en,onChange:o=>ge(n,"en",o),suggestions:u?.uniqueEn||[]})},n))]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"description_en",className:"text-sm font-medium",children:"Description"}),e.jsx(ye,{value:G("description_en")||"",onChange:s=>R("description_en",s),placeholder:"Enter restaurant description..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"announcement_en",className:"text-sm font-medium",children:"Announcement"}),e.jsx(W,{id:"announcement_en",...z("announcement_en"),rows:2,placeholder:"Enter announcement (optional)..."}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Display important notices at top of restaurant page"})]})]}),e.jsxs(Y,{value:"pt",className:"space-y-4 mt-0",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"name_pt",className:"text-sm font-medium",children:"Nome do Restaurante"}),e.jsx(p,{id:"name_pt",...z("name_pt"),placeholder:"Digite o nome do restaurante...",className:"text-base"}),b.name_pt&&e.jsx("p",{className:"text-sm text-destructive",children:b.name_pt.message})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(i,{className:"text-sm font-medium",children:"Tipos de Restaurante (1-3 tags)"}),L.map((s,n)=>e.jsx("div",{className:"flex gap-2 items-center",children:e.jsx(Ce,{placeholder:"ex: Cantonesa",value:s.pt,onChange:o=>ge(n,"pt",o),suggestions:u?.uniquePt||[]})},n))]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"description_pt",className:"text-sm font-medium",children:"DescriÃ§Ã£o"}),e.jsx(ye,{value:G("description_pt")||"",onChange:s=>R("description_pt",s),placeholder:"Digite a descriÃ§Ã£o do restaurante..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"announcement_pt",className:"text-sm font-medium",children:"AnÃºncio"}),e.jsx(W,{id:"announcement_pt",...z("announcement_pt"),rows:2,placeholder:"Digite o anÃºncio (opcional)..."}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Exibir avisos importantes no topo da pÃ¡gina do restaurante"})]})]})]})]})}),e.jsx(B,{className:"border-primary/20",children:e.jsxs(H,{className:"p-6 space-y-4",children:[e.jsxs(i,{className:"text-base font-semibold flex items-center gap-2",children:[e.jsx(pe,{className:"w-5 h-5 text-primary"}),t("admin.locationAndContact")]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(i,{htmlFor:"address",className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(pe,{className:"w-4 h-4"}),t("admin.address")]}),e.jsx(p,{id:"address",...z("address"),placeholder:t("admin.enterAddress")}),b.address&&e.jsx("p",{className:"text-sm text-destructive",children:b.address.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(i,{htmlFor:"phone",className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(xs,{className:"w-4 h-4"}),t("admin.phone")]}),e.jsx(p,{id:"phone",...z("phone"),placeholder:"+351..."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(i,{htmlFor:"website_url",className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(Ne,{className:"w-4 h-4"}),t("admin.websiteBaseUrl")]}),e.jsx(p,{id:"website_url",...z("website_url"),placeholder:"https://sushi.xiaoxiong.pt:6000",readOnly:!h,disabled:!h,className:h?"":"bg-muted cursor-not-allowed"}),!h&&e.jsx("p",{className:"text-xs text-muted-foreground",children:t("admin.websiteReadOnly")})]}),h&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(i,{htmlFor:"key_id",className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(gs,{className:"w-4 h-4"}),"Key ID (API)"]}),e.jsx(p,{id:"key_id",...z("key_id"),placeholder:"ä¾‹å¦‚: saldanha01"})]})]}),e.jsxs("div",{className:"space-y-3 pt-2",children:[e.jsx(i,{className:"text-sm font-medium text-muted-foreground",children:t("admin.displaySettings")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg border bg-muted/30",children:[e.jsx(Z,{id:"show_takeaway_button",checked:Ve,onCheckedChange:s=>R("show_takeaway_button",s)}),e.jsxs(i,{htmlFor:"show_takeaway_button",className:"cursor-pointer text-sm flex items-center gap-2",children:[e.jsx(fs,{className:"w-4 h-4"}),t("admin.showTakeawayButton")]})]}),$!=="ghost"&&e.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg border bg-muted/30",children:[e.jsx(Z,{id:"show_booking_button",checked:Qe,onCheckedChange:s=>R("show_booking_button",s)}),e.jsxs(i,{htmlFor:"show_booking_button",className:"cursor-pointer text-sm flex items-center gap-2",children:[e.jsx(ve,{className:"w-4 h-4"}),t("admin.showBookingButton")]})]})]})]})]})}),$==="ghost"&&e.jsx(B,{className:"border-primary/20 bg-gradient-to-br from-background to-muted/20",children:e.jsxs(H,{className:"p-6",children:[e.jsxs(i,{className:"text-base font-semibold flex items-center gap-2 mb-4",children:[e.jsx(Pe,{className:"w-5 h-5 text-primary"}),t("admin.ghostTemplateNote")]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ve,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"text-sm font-medium",children:t("admin.foodImage","ç¾Žé£Ÿå›¾ç‰‡")})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t("admin.foodImageDesc","æ­¤å›¾ç‰‡å°†æ˜¾ç¤ºåœ¨è¯¦æƒ…é¡µå·¦ä¾§ï¼Œçªå‡ºå±•ç¤ºæ‚¨çš„æ‹›ç‰Œç¾Žé£Ÿ")}),e.jsxs("div",{className:"flex items-start gap-4",children:[D&&e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:D,alt:"Food Image Preview",className:"w-32 h-24 object-cover rounded-lg shadow-lg ring-2 ring-primary/20 transition-transform duration-200 group-hover:scale-105"}),e.jsx(q,{type:"button",variant:"destructive",size:"icon",className:"absolute -top-2 -right-2 h-6 w-6 shadow-lg opacity-0 group-hover:opacity-100 transition-opacity rounded-full",onClick:()=>{l(null),ee(null)},children:e.jsx(J,{className:"h-3 w-3"})})]}),e.jsxs(i,{htmlFor:"ghost-cover-image-upload",className:"cursor-pointer",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2 px-6 py-4 border-2 border-dashed border-primary/30 rounded-lg hover:border-primary hover:bg-primary/5 transition-all duration-200",children:[e.jsx(ve,{className:"h-6 w-6 text-primary"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-medium text-xs",children:t("admin.uploadImage")}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["16:9 ",t("admin.recommended","æŽ¨è")]})]})]}),e.jsx(p,{id:"ghost-cover-image-upload",type:"file",accept:"image/*",className:"hidden",onChange:Fe})]})]})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"text-sm font-medium",children:t("admin.ownerAvatar")})}),e.jsxs("div",{className:"flex items-center gap-4",children:[ie&&e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:ie,alt:"Owner Avatar Preview",className:"w-20 h-20 object-cover rounded-full shadow-lg ring-2 ring-primary/20 transition-transform duration-200 group-hover:scale-105"}),e.jsx(q,{type:"button",variant:"destructive",size:"icon",className:"absolute -top-2 -right-2 h-6 w-6 shadow-lg opacity-0 group-hover:opacity-100 transition-opacity rounded-full",onClick:()=>{re(null),te(null)},children:e.jsx(J,{className:"h-3 w-3"})})]}),e.jsxs(i,{htmlFor:"owner-avatar-upload",className:"cursor-pointer",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2 px-6 py-4 border-2 border-dashed border-primary/30 rounded-lg hover:border-primary hover:bg-primary/5 transition-all duration-200",children:[e.jsx(Pe,{className:"h-6 w-6 text-primary"}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"font-medium text-xs",children:t("admin.uploadImage")})})]}),e.jsx(p,{id:"owner-avatar-upload",type:"file",accept:"image/*",className:"hidden",onChange:Ze})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(i,{className:"text-sm font-medium",children:t("admin.ownerBio")}),e.jsxs(qe,{defaultValue:"zh",className:"w-full",children:[e.jsxs(Me,{className:"grid w-full grid-cols-3 mb-4",children:[e.jsx(X,{value:"zh",className:"gap-2 text-xs",children:"ðŸ‡¨ðŸ‡³ ä¸­æ–‡"}),e.jsx(X,{value:"en",className:"gap-2 text-xs",children:"ðŸ‡¬ðŸ‡§ EN"}),e.jsx(X,{value:"pt",className:"gap-2 text-xs",children:"ðŸ‡µðŸ‡¹ PT"})]}),e.jsx(Y,{value:"zh",children:e.jsx(W,{value:d,onChange:s=>A(s.target.value),rows:4,placeholder:t("admin.ownerBioPlaceholder")})}),e.jsx(Y,{value:"en",children:e.jsx(W,{value:M,onChange:s=>ae(s.target.value),rows:4,placeholder:"Share your story, philosophy and culinary passion..."})}),e.jsx(Y,{value:"pt",children:e.jsx(W,{value:le,onChange:s=>oe(s.target.value),rows:4,placeholder:"Compartilhe sua histÃ³ria, filosofia e paixÃ£o culinÃ¡ria..."})})]})]})]})}),$!=="ghost"&&e.jsx(B,{className:"border-primary/20",children:e.jsxs(H,{className:"p-6 space-y-4",children:[e.jsxs(i,{className:"text-base font-semibold flex items-center gap-2",children:[e.jsx(pe,{className:"w-5 h-5 text-primary"}),t("admin.location")]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"lat",className:"text-sm font-medium",children:t("admin.latitude")}),e.jsx(p,{id:"lat",type:"number",step:"any",...z("lat",{valueAsNumber:!0})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"lng",className:"text-sm font-medium",children:t("admin.longitude")}),e.jsx(p,{id:"lng",type:"number",step:"any",...z("lng",{valueAsNumber:!0})})]})]}),e.jsx("div",{ref:Q,className:"h-96 w-full rounded-lg border-2 border-primary/20 shadow-sm",style:{minHeight:"384px"}}),e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[e.jsx(pe,{className:"w-4 h-4"}),t("admin.clickOrDragToSetLocation")]})]})}),$!=="ghost"&&e.jsx(B,{className:"border-primary/20 overflow-hidden",children:e.jsxs(H,{className:"p-3 md:p-6 space-y-4",children:[e.jsxs(i,{className:"text-base font-semibold flex items-center gap-2",children:[e.jsx(js,{className:"w-5 h-5 text-primary"}),t("admin.openingHours")]}),e.jsx("div",{className:"space-y-2",children:Le.map(s=>e.jsxs("div",{className:"space-y-2 p-2 md:p-3 rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"md:hidden space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(i,{className:"capitalize font-semibold text-sm",children:t(`admin.day.${s}`)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Z,{id:`split-mobile-${s}`,checked:r[s].splitShift,onCheckedChange:n=>I({...r,[s]:{...r[s],splitShift:n}}),disabled:r[s].closed,className:"h-4 w-4"}),e.jsx(i,{htmlFor:`split-mobile-${s}`,className:"cursor-pointer text-xs",children:"åˆ†æ®µ"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Z,{id:`closed-mobile-${s}`,checked:r[s].closed,onCheckedChange:n=>I({...r,[s]:{...r[s],closed:n}}),className:"h-4 w-4"}),e.jsx(i,{htmlFor:`closed-mobile-${s}`,className:"cursor-pointer text-xs",children:t("admin.closed")})]})]})]}),!r[s].closed&&e.jsx("div",{className:"space-y-1.5",children:r[s].splitShift?e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"grid grid-cols-[32px_1fr_12px_1fr] gap-1 items-center",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"åˆé¤"}),e.jsx(p,{type:"time",value:r[s].open,onChange:n=>I({...r,[s]:{...r[s],open:n.target.value}}),className:"h-8 text-xs px-2 min-w-0"}),e.jsx("span",{className:"text-muted-foreground text-xs text-center",children:"-"}),e.jsx(p,{type:"time",value:r[s].close,onChange:n=>I({...r,[s]:{...r[s],close:n.target.value}}),className:"h-8 text-xs px-2 min-w-0"})]}),e.jsxs("div",{className:"grid grid-cols-[32px_1fr_12px_1fr] gap-1 items-center",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"æ™šé¤"}),e.jsx(p,{type:"time",value:r[s].open2||"19:00",onChange:n=>I({...r,[s]:{...r[s],open2:n.target.value}}),className:"h-8 text-xs px-2 min-w-0"}),e.jsx("span",{className:"text-muted-foreground text-xs text-center",children:"-"}),e.jsx(p,{type:"time",value:r[s].close2||"23:00",onChange:n=>I({...r,[s]:{...r[s],close2:n.target.value}}),className:"h-8 text-xs px-2 min-w-0"})]})]}):e.jsxs("div",{className:"grid grid-cols-[1fr_12px_1fr] gap-1 items-center",children:[e.jsx(p,{type:"time",value:r[s].open,onChange:n=>I({...r,[s]:{...r[s],open:n.target.value}}),className:"h-8 text-xs px-2 min-w-0"}),e.jsx("span",{className:"text-muted-foreground text-xs text-center",children:"-"}),e.jsx(p,{type:"time",value:r[s].close,onChange:n=>I({...r,[s]:{...r[s],close:n.target.value}}),className:"h-8 text-xs px-2 min-w-0"})]})})]}),e.jsxs("div",{className:"hidden md:block",children:[e.jsxs("div",{className:"grid grid-cols-[120px_1fr_auto] gap-4 items-center",children:[e.jsx(i,{className:"capitalize font-semibold",children:t(`admin.day.${s}`)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{id:`split-${s}`,checked:r[s].splitShift,onCheckedChange:n=>I({...r,[s]:{...r[s],splitShift:n}}),disabled:r[s].closed}),e.jsx(i,{htmlFor:`split-${s}`,className:"cursor-pointer text-sm",children:"åˆ†æ®µè¥ä¸š"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{id:`closed-${s}`,checked:r[s].closed,onCheckedChange:n=>I({...r,[s]:{...r[s],closed:n}})}),e.jsx(i,{htmlFor:`closed-${s}`,className:"cursor-pointer",children:t("admin.closed")})]})]}),!r[s].closed&&e.jsx("div",{className:"ml-[120px] space-y-2 mt-2",children:r[s].splitShift?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground w-12",children:"åˆé¤"}),e.jsx(p,{type:"time",value:r[s].open,onChange:n=>I({...r,[s]:{...r[s],open:n.target.value}}),className:"w-32"}),e.jsx("span",{className:"text-muted-foreground",children:"-"}),e.jsx(p,{type:"time",value:r[s].close,onChange:n=>I({...r,[s]:{...r[s],close:n.target.value}}),className:"w-32"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground w-12",children:"æ™šé¤"}),e.jsx(p,{type:"time",value:r[s].open2||"19:00",onChange:n=>I({...r,[s]:{...r[s],open2:n.target.value}}),className:"w-32"}),e.jsx("span",{className:"text-muted-foreground",children:"-"}),e.jsx(p,{type:"time",value:r[s].close2||"23:00",onChange:n=>I({...r,[s]:{...r[s],close2:n.target.value}}),className:"w-32"})]})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{type:"time",value:r[s].open,onChange:n=>I({...r,[s]:{...r[s],open:n.target.value}}),className:"w-32"}),e.jsx("span",{className:"text-muted-foreground",children:"-"}),e.jsx(p,{type:"time",value:r[s].close,onChange:n=>I({...r,[s]:{...r[s],close:n.target.value}}),className:"w-32"})]})})]})]},s))})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-2 px-6 py-4 border-t bg-muted/30",children:[e.jsx(q,{type:"button",variant:"outline",onClick:()=>f(!1),children:t("common.cancel")}),e.jsxs(q,{type:"submit",disabled:ce,onClick:De(Ee),className:"gap-2",children:[e.jsx(je,{className:"w-4 h-4"}),t(ce?"common.saving":"common.save")]})]})]})]})}export{lt as R,Os as u};
//# sourceMappingURL=RestaurantFormDialog-mKh_x3hi.js.map
