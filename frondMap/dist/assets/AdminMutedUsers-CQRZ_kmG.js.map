{"version":3,"file":"AdminMutedUsers-CQRZ_kmG.js","sources":["../../src/pages/admin/AdminMutedUsers.tsx"],"sourcesContent":["import { useTranslation } from \"react-i18next\";\r\nimport { useState, useMemo } from \"react\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\r\nimport { useMutedUsers, useUnmuteUser } from \"@/hooks/useAdmin\";\r\nimport { UserProfileDialog } from \"@/components/admin/UserProfileDialog\";\r\nimport { VolumeX, Volume2, Eye, Users, Briefcase, Shield, Search, X } from \"lucide-react\";\r\nimport { format } from \"date-fns\";\r\n\r\nconst AdminMutedUsers = () => {\r\n  const { t } = useTranslation();\r\n  const { data: users, isLoading } = useMutedUsers();\r\n  const unmuteUser = useUnmuteUser();\r\n\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [userProfileDialog, setUserProfileDialog] = useState<{\r\n    open: boolean;\r\n    userId: string;\r\n    userName: string;\r\n    userRole: string;\r\n  }>({ open: false, userId: \"\", userName: \"\", userRole: \"\" });\r\n\r\n  const filteredUsers = useMemo(() => {\r\n    if (!users) return [];\r\n    return users.filter((user: any) => {\r\n      const matchesSearch =\r\n        searchQuery === \"\" ||\r\n        user.display_name.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        user.mute_reason?.toLowerCase().includes(searchQuery.toLowerCase());\r\n      return matchesSearch;\r\n    });\r\n  }, [users, searchQuery]);\r\n\r\n  const getRoleBadgeColor = (role: string) => {\r\n    switch (role) {\r\n      case \"admin\":\r\n        return \"bg-primary text-primary-foreground\";\r\n      case \"supervisor\":\r\n        return \"bg-blue-500 text-white\";\r\n      case \"merchant\":\r\n        return \"bg-emerald-500 text-white\";\r\n      default:\r\n        return \"bg-muted text-muted-foreground\";\r\n    }\r\n  };\r\n\r\n  const getRoleIcon = (role: string) => {\r\n    switch (role) {\r\n      case \"admin\":\r\n      case \"supervisor\":\r\n        return <Shield className=\"h-3.5 w-3.5\" />;\r\n      case \"merchant\":\r\n        return <Briefcase className=\"h-3.5 w-3.5\" />;\r\n      default:\r\n        return <Users className=\"h-3.5 w-3.5\" />;\r\n    }\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-[60vh]\">\r\n        <div className=\"text-center space-y-3\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto\"></div>\r\n          <p className=\"text-muted-foreground\">{t(\"common.loading\")}</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div>\r\n        <div className=\"flex items-center gap-3 mb-2\">\r\n          <div className=\"p-2 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg\">\r\n            <VolumeX className=\"h-6 w-6 text-yellow-500\" />\r\n          </div>\r\n          <div>\r\n            <h1 className=\"text-3xl font-bold tracking-tight\">{t(\"admin.mutedManagement\")}</h1>\r\n            <p className=\"text-muted-foreground\">{t(\"admin.mutedManagementDesc\")}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Statistics */}\r\n      <Card className=\"bg-gradient-to-br from-yellow-50 to-yellow-100 border-yellow-200 dark:from-yellow-950/20 dark:to-yellow-900/20 dark:border-yellow-900/30\">\r\n        <CardContent className=\"pt-6\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-sm font-medium text-muted-foreground\">{t(\"admin.totalMuted\")}</p>\r\n              <p className=\"text-2xl font-bold\">{users?.length || 0}</p>\r\n            </div>\r\n            <VolumeX className=\"h-8 w-8 text-yellow-500\" />\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Search */}\r\n      <Card>\r\n        <CardContent className=\"pt-6\">\r\n          <div className=\"relative\">\r\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n            <Input\r\n              placeholder={t(\"admin.searchMutedUserPlaceholder\")}\r\n              value={searchQuery}\r\n              onChange={(e) => setSearchQuery(e.target.value)}\r\n              className=\"pl-10 pr-10\"\r\n            />\r\n            {searchQuery && (\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                className=\"absolute right-1 top-1/2 transform -translate-y-1/2 h-7 w-7 p-0\"\r\n                onClick={() => setSearchQuery(\"\")}\r\n              >\r\n                <X className=\"h-4 w-4\" />\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* User List */}\r\n      {filteredUsers && filteredUsers.length > 0 ? (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n          {filteredUsers.map((user: any) => (\r\n            <Card key={user.id} className=\"border-yellow-300 bg-yellow-50/50 dark:bg-yellow-950/20\">\r\n              <CardContent className=\"p-4\">\r\n                <div className=\"flex items-start gap-3\">\r\n                  <Avatar className=\"h-12 w-12\">\r\n                    <AvatarImage src={user.avatar_url} alt={user.display_name} />\r\n                    <AvatarFallback>{user.display_name.charAt(0).toUpperCase()}</AvatarFallback>\r\n                  </Avatar>\r\n                  <div className=\"flex-1 min-w-0\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <h3 className=\"font-semibold truncate\">{user.display_name}</h3>\r\n                      <Badge variant=\"outline\" className=\"text-xs text-yellow-500 border-yellow-300\">\r\n                        {t(\"admin.muted\")}\r\n                      </Badge>\r\n                    </div>\r\n                    <Badge className={`${getRoleBadgeColor(user.role)} text-xs mt-1`}>\r\n                      {getRoleIcon(user.role)}\r\n                      <span className=\"ml-1 capitalize\">{user.role}</span>\r\n                    </Badge>\r\n                  </div>\r\n                </div>\r\n\r\n                {user.mute_reason && (\r\n                  <div className=\"mt-3 p-2 bg-yellow-100 dark:bg-yellow-900/30 rounded text-sm\">\r\n                    <p className=\"font-medium text-yellow-700 dark:text-yellow-300\">{t(\"admin.muteReason\")}:</p>\r\n                    <p className=\"text-yellow-600 dark:text-yellow-400\">{user.mute_reason}</p>\r\n                  </div>\r\n                )}\r\n\r\n                <div className=\"mt-2 space-y-1 text-xs text-muted-foreground\">\r\n                  {user.muted_at && (\r\n                    <p>{t(\"admin.mutedAt\")}: {format(new Date(user.muted_at), \"yyyy-MM-dd HH:mm\")}</p>\r\n                  )}\r\n                  {user.muted_until && (\r\n                    <p>{t(\"admin.mutedUntil\")}: {format(new Date(user.muted_until), \"yyyy-MM-dd HH:mm\")}</p>\r\n                  )}\r\n                </div>\r\n\r\n                <div className=\"flex gap-2 mt-4 pt-3 border-t\">\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    onClick={() =>\r\n                      setUserProfileDialog({\r\n                        open: true,\r\n                        userId: user.id,\r\n                        userName: user.display_name,\r\n                        userRole: user.role,\r\n                      })\r\n                    }\r\n                  >\r\n                    <Eye className=\"h-4 w-4 mr-1\" />\r\n                    {t(\"admin.viewProfile\")}\r\n                  </Button>\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    className=\"text-green-600 border-green-300 hover:bg-green-50\"\r\n                    onClick={() => unmuteUser.mutate(user.id)}\r\n                  >\r\n                    <Volume2 className=\"h-4 w-4 mr-1\" />\r\n                    {t(\"admin.unmute\")}\r\n                  </Button>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          ))}\r\n        </div>\r\n      ) : (\r\n        <div className=\"text-center py-12 text-muted-foreground\">\r\n          <VolumeX className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\r\n          <p>{searchQuery ? t(\"admin.noSearchResults\") : t(\"admin.noMutedUsers\")}</p>\r\n        </div>\r\n      )}\r\n\r\n      <UserProfileDialog\r\n        open={userProfileDialog.open}\r\n        onOpenChange={(open) => setUserProfileDialog({ ...userProfileDialog, open })}\r\n        userId={userProfileDialog.userId}\r\n        userName={userProfileDialog.userName}\r\n        userRole={userProfileDialog.userRole}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminMutedUsers;\r\n"],"names":["AdminMutedUsers","t","useTranslation","users","isLoading","useMutedUsers","unmuteUser","useUnmuteUser","searchQuery","setSearchQuery","useState","userProfileDialog","setUserProfileDialog","filteredUsers","useMemo","user","getRoleBadgeColor","role","getRoleIcon","jsx","Shield","Briefcase","Users","jsxs","VolumeX","Card","CardContent","Search","Input","e","Button","X","Avatar","AvatarImage","AvatarFallback","Badge","format","Eye","Volume2","UserProfileDialog","open"],"mappings":"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"}