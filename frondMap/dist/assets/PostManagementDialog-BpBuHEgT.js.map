{"version":3,"file":"PostManagementDialog-BpBuHEgT.js","sources":["../../src/components/admin/RecipeFullModeContent.tsx","../../src/components/admin/PostManagementDialog.tsx"],"sourcesContent":["import { useTranslation } from \"react-i18next\";\r\nimport { formatDistanceToNow } from \"date-fns\";\r\nimport { zhCN, enUS, pt } from \"date-fns/locale\";\r\nimport { Clock, Users, Utensils, Flame, ChefHat, Heart, MessageCircle, Share2 } from \"lucide-react\";\r\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Card, CardContent, CardHeader } from \"@/components/ui/card\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\nimport { CommunityPost } from \"@/hooks/useCommunityPosts\";\r\nimport { useLocalizedContent } from \"@/hooks/useLocalizedContent\";\r\n\r\ninterface RecipeStep {\r\n  order: number;\r\n  description: string;\r\n  image_url?: string;\r\n  image_urls?: string[];\r\n}\r\n\r\ninterface Ingredient {\r\n  name: string;\r\n  amount: string;\r\n  unit: string;\r\n}\r\n\r\ninterface NutritionInfo {\r\n  calories?: number;\r\n  protein?: number;\r\n  carbs?: number;\r\n  fat?: number;\r\n}\r\n\r\ninterface ExtendedPost extends CommunityPost {\r\n  post_type?: string;\r\n  recipe_name?: string;\r\n  recipe_name_en?: string;\r\n  recipe_name_pt?: string;\r\n  cook_time?: number;\r\n  difficulty?: string;\r\n  servings?: number;\r\n  ingredients?: Ingredient[];\r\n  steps?: RecipeStep[];\r\n  nutrition?: NutritionInfo;\r\n  recipe_tags?: string[];\r\n  recipe_category?: string;\r\n}\r\n\r\ninterface RecipeFullModeContentProps {\r\n  post: ExtendedPost;\r\n}\r\n\r\nconst RecipeFullModeContent = ({ post }: RecipeFullModeContentProps) => {\r\n  const { t, i18n } = useTranslation();\r\n  const { getLocalizedField } = useLocalizedContent();\r\n\r\n  const getDateLocale = () => {\r\n    switch (i18n.language) {\r\n      case \"zh\": return zhCN;\r\n      case \"pt\": return pt;\r\n      default: return enUS;\r\n    }\r\n  };\r\n\r\n  const getDifficultyColor = (d: string) => {\r\n    switch (d) {\r\n      case 'easy': return 'bg-green-500/20 text-green-700 dark:text-green-400 border-green-500/30';\r\n      case 'medium': return 'bg-yellow-500/20 text-yellow-700 dark:text-yellow-400 border-yellow-500/30';\r\n      case 'hard': return 'bg-red-500/20 text-red-700 dark:text-red-400 border-red-500/30';\r\n      default: return 'bg-muted text-muted-foreground';\r\n    }\r\n  };\r\n\r\n  const getDifficultyLabel = (d: string) => {\r\n    switch (d) {\r\n      case 'easy': return t(\"recipe.difficulty.easy\", \"简单\");\r\n      case 'medium': return t(\"recipe.difficulty.medium\", \"中等\");\r\n      case 'hard': return t(\"recipe.difficulty.hard\", \"困难\");\r\n      default: return d;\r\n    }\r\n  };\r\n\r\n  const recipeName = getLocalizedField(post, \"recipe_name\") || post.recipe_name;\r\n  const hasImages = post.image_urls && post.image_urls.length > 0;\r\n  const hasSteps = post.steps && post.steps.length > 0;\r\n\r\n  return (\r\n    <Card className=\"overflow-hidden\">\r\n      {/* Hero Image */}\r\n      {hasImages && (\r\n        <div className=\"relative aspect-video overflow-hidden\">\r\n          <img\r\n            src={post.image_urls![0]}\r\n            alt={recipeName || \"\"}\r\n            className=\"w-full h-full object-cover\"\r\n          />\r\n          <Badge className=\"absolute top-3 left-3 bg-primary text-primary-foreground gap-1\">\r\n            <Utensils className=\"h-3 w-3\" />\r\n            {t(\"recipe.badge\", \"食谱\")}\r\n          </Badge>\r\n        </div>\r\n      )}\r\n\r\n      <CardHeader className=\"pb-3\">\r\n        {/* Author */}\r\n        <div className=\"flex items-center gap-3 mb-4\">\r\n          <Avatar className=\"h-10 w-10\">\r\n            <AvatarImage src={post.author?.avatar_url || undefined} />\r\n            <AvatarFallback>\r\n              {post.author?.display_name?.charAt(0) || \"?\"}\r\n            </AvatarFallback>\r\n          </Avatar>\r\n          <div>\r\n            <p className=\"font-medium text-sm\">{post.author?.display_name}</p>\r\n            <p className=\"text-xs text-muted-foreground\">\r\n              {formatDistanceToNow(new Date(post.created_at), {\r\n                addSuffix: true,\r\n                locale: getDateLocale(),\r\n              })}\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Recipe Name */}\r\n        <h2 className=\"text-xl font-bold\">{recipeName}</h2>\r\n\r\n        {/* Meta Info */}\r\n        <div className=\"flex flex-wrap items-center gap-3 mt-3\">\r\n          {post.cook_time && (\r\n            <div className=\"flex items-center gap-1.5 text-sm text-muted-foreground\">\r\n              <Clock className=\"h-4 w-4\" />\r\n              <span>{post.cook_time} {t(\"recipe.minutes\", \"分钟\")}</span>\r\n            </div>\r\n          )}\r\n          {post.servings && (\r\n            <div className=\"flex items-center gap-1.5 text-sm text-muted-foreground\">\r\n              <Users className=\"h-4 w-4\" />\r\n              <span>{post.servings} {t(\"recipe.servings\", \"人份\")}</span>\r\n            </div>\r\n          )}\r\n          {post.difficulty && (\r\n            <Badge variant=\"outline\" className={getDifficultyColor(post.difficulty)}>\r\n              <ChefHat className=\"h-3 w-3 mr-1\" />\r\n              {getDifficultyLabel(post.difficulty)}\r\n            </Badge>\r\n          )}\r\n        </div>\r\n      </CardHeader>\r\n\r\n      <CardContent className=\"space-y-6\">\r\n        {/* Description */}\r\n        {post.content && (\r\n          <div>\r\n            <p className=\"text-sm text-muted-foreground whitespace-pre-line\">\r\n              {post.content}\r\n            </p>\r\n          </div>\r\n        )}\r\n\r\n        {/* Nutrition Info */}\r\n        {post.nutrition && (post.nutrition.calories || post.nutrition.protein || post.nutrition.carbs || post.nutrition.fat) && (\r\n          <div>\r\n            <h3 className=\"font-semibold text-sm mb-3 flex items-center gap-2\">\r\n              <Flame className=\"h-4 w-4 text-primary\" />\r\n              {t(\"recipe.nutrition\", \"营养信息\")}\r\n            </h3>\r\n            <div className=\"grid grid-cols-4 gap-2\">\r\n              {post.nutrition.calories && (\r\n                <div className=\"text-center p-2 bg-muted/50 rounded-lg\">\r\n                  <p className=\"text-lg font-bold text-primary\">{post.nutrition.calories}</p>\r\n                  <p className=\"text-xs text-muted-foreground\">{t(\"recipe.kcal\", \"千卡\")}</p>\r\n                </div>\r\n              )}\r\n              {post.nutrition.protein && (\r\n                <div className=\"text-center p-2 bg-muted/50 rounded-lg\">\r\n                  <p className=\"text-lg font-bold text-primary\">{post.nutrition.protein}g</p>\r\n                  <p className=\"text-xs text-muted-foreground\">{t(\"recipe.protein\", \"蛋白质\")}</p>\r\n                </div>\r\n              )}\r\n              {post.nutrition.carbs && (\r\n                <div className=\"text-center p-2 bg-muted/50 rounded-lg\">\r\n                  <p className=\"text-lg font-bold text-primary\">{post.nutrition.carbs}g</p>\r\n                  <p className=\"text-xs text-muted-foreground\">{t(\"recipe.carbs\", \"碳水\")}</p>\r\n                </div>\r\n              )}\r\n              {post.nutrition.fat && (\r\n                <div className=\"text-center p-2 bg-muted/50 rounded-lg\">\r\n                  <p className=\"text-lg font-bold text-primary\">{post.nutrition.fat}g</p>\r\n                  <p className=\"text-xs text-muted-foreground\">{t(\"recipe.fat\", \"脂肪\")}</p>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        <Separator />\r\n\r\n        {/* Ingredients */}\r\n        {post.ingredients && post.ingredients.length > 0 && (\r\n          <div>\r\n            <h3 className=\"font-semibold text-sm mb-3\">\r\n              {t(\"recipe.ingredients\", \"食材\")} ({post.ingredients.length})\r\n            </h3>\r\n            <ul className=\"space-y-2\">\r\n              {post.ingredients.map((ingredient, index) => (\r\n                <li key={index} className=\"flex items-center justify-between text-sm py-1.5 border-b border-border/50 last:border-0\">\r\n                  <span>{ingredient.name}</span>\r\n                  <span className=\"text-muted-foreground\">\r\n                    {ingredient.amount} {ingredient.unit}\r\n                  </span>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n        )}\r\n\r\n        <Separator />\r\n\r\n        {/* Steps */}\r\n        {hasSteps && (\r\n          <div>\r\n            <h3 className=\"font-semibold text-sm mb-3\">\r\n              {t(\"recipe.steps\", \"步骤\")} ({post.steps!.length})\r\n            </h3>\r\n            <ol className=\"space-y-4\">\r\n              {post.steps!\r\n                .sort((a, b) => a.order - b.order)\r\n                .map((step, index) => (\r\n                  <li key={index} className=\"flex gap-3\">\r\n                    <div className=\"flex-shrink-0 w-6 h-6 rounded-full bg-primary text-primary-foreground flex items-center justify-center text-xs font-bold\">\r\n                      {step.order}\r\n                    </div>\r\n                    <div className=\"flex-1 space-y-2\">\r\n                      <p className=\"text-sm\">{step.description}</p>\r\n                      {(() => {\r\n                        const imgs = (step.image_urls && step.image_urls.length > 0) ? step.image_urls : step.image_url ? [step.image_url] : [];\r\n                        return imgs.length > 0 && (\r\n                          <div className={`flex gap-2 ${imgs.length === 1 ? '' : 'flex-wrap'}`}>\r\n                            {imgs.map((url: string, imgIdx: number) => (\r\n                              <img\r\n                                key={imgIdx}\r\n                                src={url}\r\n                                alt={`Step ${step.order} - ${imgIdx + 1}`}\r\n                                className={`rounded-lg max-h-48 object-cover ${imgs.length === 1 ? 'w-full' : 'w-[calc(50%-0.25rem)]'}`}\r\n                              />\r\n                            ))}\r\n                          </div>\r\n                        );\r\n                      })()}\r\n                    </div>\r\n                  </li>\r\n                ))}\r\n            </ol>\r\n          </div>\r\n        )}\r\n\r\n        {/* Tags */}\r\n        {post.recipe_tags && post.recipe_tags.length > 0 && (\r\n          <div className=\"flex flex-wrap gap-2 pt-2\">\r\n            {post.recipe_tags.map((tag, index) => (\r\n              <Badge key={index} variant=\"secondary\" className=\"text-xs\">\r\n                #{tag}\r\n              </Badge>\r\n            ))}\r\n          </div>\r\n        )}\r\n\r\n        {/* Stats */}\r\n        <div className=\"flex items-center gap-6 pt-4 border-t text-muted-foreground\">\r\n          <span className=\"flex items-center gap-1.5 text-sm\">\r\n            <Heart className=\"h-4 w-4\" />\r\n            {post.likes_count || 0}\r\n          </span>\r\n          <span className=\"flex items-center gap-1.5 text-sm\">\r\n            <MessageCircle className=\"h-4 w-4\" />\r\n            {post.comments_count || 0}\r\n          </span>\r\n          <span className=\"flex items-center gap-1.5 text-sm\">\r\n            <Share2 className=\"h-4 w-4\" />\r\n            {post.shares_count || 0}\r\n          </span>\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default RecipeFullModeContent;\r\n","import { useState, useEffect } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { formatDistanceToNow } from \"date-fns\";\r\nimport { zhCN, enUS, pt } from \"date-fns/locale\";\r\nimport { \r\n  Calendar, \r\n  Loader2, \r\n  Clock, \r\n  Heart, \r\n  MessageCircle, \r\n  Share2,\r\n  Weight,\r\n  CheckCircle2,\r\n  XCircle,\r\n  EyeOff,\r\n  AlertTriangle,\r\n  Check,\r\n  AlertCircle,\r\n  ShieldAlert,\r\n  RefreshCw,\r\n  Bot,\r\n  Eye,\r\n} from \"lucide-react\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from \"@/components/ui/dialog\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport { CommunityPost, useUpdatePost } from \"@/hooks/useCommunityPosts\";\r\nimport { useActivities } from \"@/hooks/useActivities\";\r\nimport { useLocalizedContent } from \"@/hooks/useLocalizedContent\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { toast } from \"sonner\";\r\nimport { useQueryClient } from \"@tanstack/react-query\";\r\nimport RecipeFullModeContent from \"./RecipeFullModeContent\";\r\n\r\ninterface PostManagementDialogProps {\r\n  post: CommunityPost | null;\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n}\r\n\r\nconst PostManagementDialog = ({\r\n  post,\r\n  open,\r\n  onOpenChange,\r\n}: PostManagementDialogProps) => {\r\n  const { t, i18n } = useTranslation();\r\n  const { getLocalizedField } = useLocalizedContent();\r\n  const updatePost = useUpdatePost();\r\n  const { data: activities } = useActivities();\r\n  const queryClient = useQueryClient();\r\n\r\n  const [weight, setWeight] = useState(0);\r\n  const [status, setStatus] = useState(\"approved\");\r\n  const [moderationStatus, setModerationStatus] = useState(\"pending\");\r\n  const [activityId, setActivityId] = useState<string>(\"\");\r\n  const [isReReviewing, setIsReReviewing] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (post) {\r\n      setWeight(post.weight);\r\n      setStatus(post.status);\r\n      setModerationStatus(post.moderation_status);\r\n      setActivityId(post.activity_id || \"\");\r\n    }\r\n  }, [post]);\r\n\r\n  const getRiskColor = (score: number | null) => {\r\n    if (score === null) return \"bg-gray-100 text-gray-600\";\r\n    if (score <= 30) return \"bg-emerald-100 text-emerald-700\";\r\n    if (score <= 60) return \"bg-amber-100 text-amber-700\";\r\n    return \"bg-red-100 text-red-700\";\r\n  };\r\n\r\n  const handleReReview = async () => {\r\n    if (!post) return;\r\n    setIsReReviewing(true);\r\n    try {\r\n      const { error } = await supabase.functions.invoke(\"moderate-post\", {\r\n        body: {\r\n          post_id: post.id,\r\n          content: post.content,\r\n          user_id: post.author_id,\r\n          image_urls: post.image_urls,\r\n          video_url: post.video_url,\r\n        },\r\n      });\r\n      if (error) throw error;\r\n      toast.success(t(\"admin.moderation.reReviewSuccess\", \"重新审核完成\"));\r\n      queryClient.invalidateQueries({ queryKey: [\"admin-community-posts\"] });\r\n      queryClient.invalidateQueries({ queryKey: [\"community-post\"] });\r\n    } catch (err) {\r\n      console.error(\"Re-moderation error:\", err);\r\n      toast.error(t(\"admin.moderation.reReviewError\", \"重新审核失败\"));\r\n    } finally {\r\n      setIsReReviewing(false);\r\n    }\r\n  };\r\n\r\n  const getDateLocale = () => {\r\n    switch (i18n.language) {\r\n      case \"zh\":\r\n        return zhCN;\r\n      case \"pt\":\r\n        return pt;\r\n      default:\r\n        return enUS;\r\n    }\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    if (!post) return;\r\n\r\n    await updatePost.mutateAsync({\r\n      id: post.id,\r\n      weight,\r\n      status,\r\n      moderation_status: moderationStatus,\r\n      activity_id: activityId || null,\r\n    });\r\n\r\n    onOpenChange(false);\r\n  };\r\n\r\n  if (!post) return null;\r\n\r\n  const activeActivities = activities?.filter((a) => a.status === \"published\") || [];\r\n\r\n  const getStatusConfig = (s: string) => {\r\n    switch (s) {\r\n      case \"approved\":\r\n        return { icon: CheckCircle2, label: t(\"admin.status.approved\", \"已发布\"), className: \"text-emerald-600\" };\r\n      case \"pending\":\r\n        return { icon: Clock, label: t(\"admin.status.pending\", \"待审核\"), className: \"text-amber-600\" };\r\n      case \"rejected\":\r\n        return { icon: XCircle, label: t(\"admin.status.rejected\", \"已拒绝\"), className: \"text-red-600\" };\r\n      case \"hidden\":\r\n        return { icon: EyeOff, label: t(\"admin.status.hidden\", \"已隐藏\"), className: \"text-gray-500\" };\r\n      default:\r\n        return { icon: AlertCircle, label: s, className: \"text-gray-500\" };\r\n    }\r\n  };\r\n\r\n  const getModerationConfig = (s: string) => {\r\n    switch (s) {\r\n      case \"approved\":\r\n        return { icon: Check, label: t(\"admin.moderation.approved\", \"通过\"), className: \"text-emerald-600\" };\r\n      case \"flagged\":\r\n        return { icon: AlertTriangle, label: t(\"admin.moderation.flagged\", \"标记\"), className: \"text-orange-500\" };\r\n      case \"pending\":\r\n        return { icon: Clock, label: t(\"admin.moderation.pending\", \"待审\"), className: \"text-gray-500\" };\r\n      default:\r\n        return { icon: AlertCircle, label: s, className: \"text-gray-500\" };\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\r\n        <DialogHeader className=\"pb-4 border-b\">\r\n          <DialogTitle className=\"text-xl\">{t(\"admin.communityPosts.manage\", \"管理帖子\")}</DialogTitle>\r\n        </DialogHeader>\r\n\r\n        <div className=\"space-y-6 py-4\">\r\n          {/* Author Info */}\r\n          <div className=\"flex items-center gap-4 p-4 bg-gradient-to-r from-muted/50 to-muted/30 rounded-xl\">\r\n            <Avatar className=\"h-14 w-14 ring-2 ring-background shadow-md\">\r\n              <AvatarImage src={post.author?.avatar_url || undefined} />\r\n              <AvatarFallback className=\"bg-primary/10 text-primary font-semibold text-lg\">\r\n                {post.author?.display_name?.charAt(0) || \"?\"}\r\n              </AvatarFallback>\r\n            </Avatar>\r\n            <div className=\"flex-1\">\r\n              <p className=\"font-semibold text-lg\">{post.author?.display_name}</p>\r\n              <p className=\"text-sm text-muted-foreground flex items-center gap-1.5\">\r\n                <Clock className=\"h-3.5 w-3.5\" />\r\n                {formatDistanceToNow(new Date(post.created_at), {\r\n                  addSuffix: true,\r\n                  locale: getDateLocale(),\r\n                })}\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Content Preview - Show RecipeFullModeContent for recipe posts */}\r\n          {(post as any).post_type === 'recipe' ? (\r\n            <div className=\"space-y-2\">\r\n              <Label className=\"text-sm font-medium\">{t(\"admin.communityPosts.content\", \"内容\")}</Label>\r\n              <RecipeFullModeContent post={post as any} />\r\n            </div>\r\n          ) : (\r\n            <>\r\n              {/* Regular post content */}\r\n              <div className=\"space-y-2\">\r\n                <Label className=\"text-sm font-medium\">{t(\"admin.communityPosts.content\", \"内容\")}</Label>\r\n                <div\r\n                  className=\"prose prose-sm max-w-none dark:prose-invert p-4 border rounded-xl bg-muted/20\"\r\n                  dangerouslySetInnerHTML={{ __html: getLocalizedField(post, \"content\")?.replace(/\\n/g, '<br>') || '' }}\r\n                />\r\n              </div>\r\n\r\n              {/* Images Preview */}\r\n              {post.image_urls && post.image_urls.length > 0 && (\r\n                <div className=\"space-y-2\">\r\n                  <Label className=\"text-sm font-medium\">{t(\"admin.communityPosts.images\", \"图片\")}</Label>\r\n                  <div className=\"grid grid-cols-4 gap-2\">\r\n                    {post.image_urls.map((url, index) => (\r\n                      <div \r\n                        key={index} \r\n                        className=\"aspect-square rounded-xl overflow-hidden border shadow-sm hover:shadow-md transition-shadow\"\r\n                      >\r\n                        <img src={url} alt=\"\" className=\"w-full h-full object-cover\" />\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Video Preview */}\r\n              {post.video_url && (\r\n                <div className=\"space-y-2\">\r\n                  <Label className=\"text-sm font-medium\">{t(\"admin.communityPosts.video\", \"视频\")}</Label>\r\n                  <video\r\n                    src={post.video_url}\r\n                    controls\r\n                    className=\"w-full max-h-48 rounded-xl border shadow-sm\"\r\n                    preload=\"metadata\"\r\n                  />\r\n                </div>\r\n              )}\r\n            </>\r\n          )}\r\n\r\n          {/* Stats */}\r\n          <div className=\"flex items-center gap-3 p-3 bg-muted/30 rounded-xl flex-wrap\">\r\n            <div className=\"flex items-center gap-1.5 px-3 py-1.5 bg-background rounded-lg shadow-sm\">\r\n              <Eye className=\"h-4 w-4 text-gray-500\" />\r\n              <span className=\"font-medium\">{post.views_count || 0}</span>\r\n              <span className=\"text-xs text-muted-foreground\">{t(\"community.views\", \"浏览\")}</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-1.5 px-3 py-1.5 bg-background rounded-lg shadow-sm\">\r\n              <Heart className=\"h-4 w-4 text-red-500\" />\r\n              <span className=\"font-medium\">{post.likes_count}</span>\r\n              <span className=\"text-xs text-muted-foreground\">{t(\"community.likes\", \"赞\")}</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-1.5 px-3 py-1.5 bg-background rounded-lg shadow-sm\">\r\n              <MessageCircle className=\"h-4 w-4 text-blue-500\" />\r\n              <span className=\"font-medium\">{post.comments_count}</span>\r\n              <span className=\"text-xs text-muted-foreground\">{t(\"community.comments\", \"评论\")}</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-1.5 px-3 py-1.5 bg-background rounded-lg shadow-sm\">\r\n              <Share2 className=\"h-4 w-4 text-green-500\" />\r\n              <span className=\"font-medium\">{post.shares_count}</span>\r\n              <span className=\"text-xs text-muted-foreground\">{t(\"community.shares\", \"分享\")}</span>\r\n            </div>\r\n          </div>\r\n\r\n          {/* AI Review Results */}\r\n          {(post.risk_score !== null || post.ai_reviewed_at) && (\r\n            <div className=\"space-y-3 p-4 bg-muted/30 rounded-xl border border-border/50\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <Label className=\"text-sm font-medium flex items-center gap-2\">\r\n                  <Bot className=\"h-4 w-4\" />\r\n                  {t(\"admin.moderation.aiResult\", \"AI审核结果\")}\r\n                </Label>\r\n                <Button\r\n                  size=\"sm\"\r\n                  variant=\"ghost\"\r\n                  onClick={handleReReview}\r\n                  disabled={isReReviewing}\r\n                  className=\"h-7 text-xs\"\r\n                >\r\n                  <RefreshCw className={cn(\"h-3.5 w-3.5 mr-1\", isReReviewing && \"animate-spin\")} />\r\n                  {t(\"admin.moderation.reReview\", \"重审\")}\r\n                </Button>\r\n              </div>\r\n\r\n              <div className=\"flex items-center gap-3\">\r\n                <Badge className={cn(\"text-sm\", getRiskColor(post.risk_score))}>\r\n                  <ShieldAlert className=\"h-3.5 w-3.5 mr-1\" />\r\n                  {t(\"admin.moderation.riskScore\", \"风险分数\")}: {post.risk_score ?? \"-\"}\r\n                </Badge>\r\n                {post.ai_reviewed_at && (\r\n                  <span className=\"text-xs text-muted-foreground\">\r\n                    {formatDistanceToNow(new Date(post.ai_reviewed_at), {\r\n                      addSuffix: true,\r\n                      locale: getDateLocale(),\r\n                    })}\r\n                  </span>\r\n                )}\r\n              </div>\r\n\r\n              {post.risk_reasons && post.risk_reasons.length > 0 && (\r\n                <div className=\"flex flex-wrap gap-1.5\">\r\n                  {post.risk_reasons.map((reason, index) => (\r\n                    <Badge key={index} variant=\"outline\" className=\"text-xs whitespace-pre-wrap\">\r\n                      {reason}\r\n                    </Badge>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          <Separator />\r\n\r\n          {/* Settings Grid */}\r\n          <div className=\"grid gap-4 sm:grid-cols-2\">\r\n            {/* Weight */}\r\n            <div className=\"space-y-2\">\r\n              <Label className=\"text-sm font-medium flex items-center gap-2\">\r\n                <Weight className=\"h-4 w-4\" />\r\n                {t(\"admin.communityPosts.weight\", \"权重\")}\r\n              </Label>\r\n              <Input\r\n                type=\"number\"\r\n                value={weight}\r\n                onChange={(e) => setWeight(parseInt(e.target.value) || 0)}\r\n                min={0}\r\n                max={1000}\r\n                className=\"h-10\"\r\n              />\r\n              <p className=\"text-xs text-muted-foreground\">\r\n                {t(\"admin.communityPosts.weightHint\", \"权重越高，帖子排序越靠前\")}\r\n              </p>\r\n            </div>\r\n\r\n            {/* Activity Link */}\r\n            <div className=\"space-y-2\">\r\n              <Label className=\"text-sm font-medium flex items-center gap-2\">\r\n                <Calendar className=\"h-4 w-4\" />\r\n                {t(\"admin.communityPosts.linkActivity\", \"关联活动\")}\r\n              </Label>\r\n              <Select value={activityId || \"none\"} onValueChange={(val) => setActivityId(val === \"none\" ? \"\" : val)}>\r\n                <SelectTrigger className=\"h-10\">\r\n                  <SelectValue placeholder={t(\"community.selectActivity\", \"选择活动（可选）\")} />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  <SelectItem value=\"none\">\r\n                    {t(\"community.noActivity\", \"不关联活动\")}\r\n                  </SelectItem>\r\n                  {activeActivities.map((activity) => (\r\n                    <SelectItem key={activity.id} value={activity.id}>\r\n                      {getLocalizedField(activity, \"title\")}\r\n                    </SelectItem>\r\n                  ))}\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n\r\n            {/* Status */}\r\n            <div className=\"space-y-2\">\r\n              <Label className=\"text-sm font-medium\">{t(\"admin.communityPosts.status\", \"状态\")}</Label>\r\n              <Select value={status} onValueChange={setStatus}>\r\n                <SelectTrigger className=\"h-10\">\r\n                  <SelectValue />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  {[\"approved\", \"pending\", \"hidden\", \"rejected\"].map((s) => {\r\n                    const config = getStatusConfig(s);\r\n                    const Icon = config.icon;\r\n                    return (\r\n                      <SelectItem key={s} value={s}>\r\n                        <span className={cn(\"flex items-center gap-2\", config.className)}>\r\n                          <Icon className=\"h-4 w-4\" />\r\n                          {config.label}\r\n                        </span>\r\n                      </SelectItem>\r\n                    );\r\n                  })}\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n\r\n            {/* Moderation Status */}\r\n            <div className=\"space-y-2\">\r\n              <Label className=\"text-sm font-medium\">{t(\"admin.communityPosts.moderation\", \"审核状态\")}</Label>\r\n              <Select value={moderationStatus} onValueChange={setModerationStatus}>\r\n                <SelectTrigger className=\"h-10\">\r\n                  <SelectValue />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  {[\"pending\", \"approved\", \"flagged\"].map((s) => {\r\n                    const config = getModerationConfig(s);\r\n                    const Icon = config.icon;\r\n                    return (\r\n                      <SelectItem key={s} value={s}>\r\n                        <span className={cn(\"flex items-center gap-2\", config.className)}>\r\n                          <Icon className=\"h-4 w-4\" />\r\n                          {config.label}\r\n                        </span>\r\n                      </SelectItem>\r\n                    );\r\n                  })}\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Actions */}\r\n        <div className=\"flex justify-end gap-3 pt-4 border-t\">\r\n          <Button variant=\"outline\" onClick={() => onOpenChange(false)} className=\"px-6\">\r\n            {t(\"common.cancel\", \"取消\")}\r\n          </Button>\r\n          <Button onClick={handleSave} disabled={updatePost.isPending} className=\"px-6\">\r\n            {updatePost.isPending && <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />}\r\n            {t(\"common.save\", \"保存\")}\r\n          </Button>\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default PostManagementDialog;\r\n"],"names":["RecipeFullModeContent","post","t","i18n","useTranslation","getLocalizedField","useLocalizedContent","getDateLocale","zhCN","pt","enUS","getDifficultyColor","d","getDifficultyLabel","recipeName","hasImages","hasSteps","jsxs","Card","jsx","Badge","Utensils","CardHeader","Avatar","AvatarImage","AvatarFallback","Clock","Users","ChefHat","CardContent","Flame","Separator","ingredient","index","a","b","step","imgs","url","imgIdx","tag","Heart","MessageCircle","Share2","PostManagementDialog","open","onOpenChange","updatePost","useUpdatePost","activities","useActivities","queryClient","useQueryClient","weight","setWeight","useState","status","setStatus","moderationStatus","setModerationStatus","activityId","setActivityId","isReReviewing","setIsReReviewing","useEffect","getRiskColor","score","handleReReview","error","supabase","toast","err","handleSave","activeActivities","getStatusConfig","s","CheckCircle2","XCircle","EyeOff","AlertCircle","getModerationConfig","Check","AlertTriangle","Dialog","DialogContent","DialogHeader","DialogTitle","formatDistanceToNow","Label","Fragment","Eye","Bot","Button","RefreshCw","cn","ShieldAlert","reason","Weight","Input","e","Calendar","Select","val","SelectTrigger","SelectValue","SelectContent","SelectItem","activity","config","Icon","Loader2"],"mappings":"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"}