import{j as e}from"./vendor-ui-DAmPMpEA.js";import{r as y}from"./vendor-react-iAJ0IrSD.js";import{L,B as u,C as b,k as f,J as oe,ah as ce,ag as de,K as me,N as pe,O as he,Q as ue,R as xe,T as ge,V as _e,D as ve,a as je,b as ye,d as be,$ as fe,a0 as l,I as o,z as Ne,A as Te,v as we,E as Ce,F as C,G as ke,a6 as De,a7 as ze,a8 as Fe,a9 as Ee,aa as j,ab as U,j as O,t as $,y as g}from"./index-Do1W_89N.js";import{S as W}from"./slider-BPvjeWw6.js";import{T as Ae,a as Re,b as k,c as D}from"./tabs-cuGeNK5n.js";import{a as Ie,b as Se,c as Le,d as Ue,e as Oe,f as $e}from"./useHomepageTemplates-BYSAt4Ej.js";import{u as He}from"./vendor-i18n-DxKeo2S1.js";import{P as Be}from"./plus-D-VZe8Eb.js";import{G as Pe}from"./grip-vertical-DBv79q-K.js";import{C as Ve}from"./clock-C2dMhwrG.js";import{E as Me}from"./eye-BYP9cNA5.js";import{E as We}from"./eye-off-BdZXBMMx.js";import{S as Ge}from"./square-pen-jEvVvS5O.js";import{S as Je}from"./save-Dtf4njxK.js";import{I as H}from"./image-B9MAqH9W.js";import{V as B}from"./video-C_HEt71w.js";import{R as qe}from"./refresh-cw-BSeUENWD.js";import"./vendor-charts-Bz7hPIBd.js";import"./vendor-query-BlSVl3IQ.js";import"./vendor-supabase-KNAP0qdW.js";const xa=()=>{const{t:i}=He(),{data:N,isLoading:G}=Ie(),z=Se(),T=Le(),J=Ue(),F=Oe(),q=$e(),[v,E]=y.useState(null),[Y,A]=y.useState(!1),[s,_]=y.useState({}),[K,R]=y.useState("images"),Q=()=>{_({sort_order:N?.length||0,is_active:!0,media_type:"image",desktop_media_type:"image",tablet_media_type:"image",mobile_media_type:"image",duration:5e3,overlay_opacity:40,overlay_gradient_direction:"to-b",overlay_gradient_from:"background",overlay_gradient_from_opacity:30,overlay_gradient_via:"background",overlay_gradient_via_opacity:25,overlay_gradient_to:"background",overlay_gradient_to_opacity:40,background_blur:0,title_zh:"发现您的亚洲美食之旅",title_en:"Discover Your Asian Food Journey",title_pt:"Descubra Sua Jornada Gastronômica Asiática",subtitle_zh:"您的美食之旅从这里开始",subtitle_en:"Your culinary journey starts here",subtitle_pt:"Sua jornada culinária começa aqui",description_zh:"探索里斯本地区最好的亚洲美食",description_en:"Explore the best Asian cuisine in the Lisbon area",description_pt:"Explore a melhor cozinha asiática na área de Lisboa",primary_button_text_zh:"探索餐厅",primary_button_text_en:"Explore Restaurants",primary_button_text_pt:"Explorar Restaurantes",primary_button_link:"/restaurants",primary_button_variant:"default",secondary_button_text_zh:"活动",secondary_button_text_en:"Activities",secondary_button_text_pt:"Atividades",secondary_button_link:"/activities",secondary_button_variant:"outline"}),A(!0),R("media")},X=a=>{_(a),E(a),R("media")},Z=async()=>{try{v?(await T.mutateAsync({id:v.id,...s}),E(null)):(await z.mutateAsync(s),A(!1)),_({})}catch(a){console.error("Save failed:",a)}},ee=async a=>{try{await J.mutateAsync(a)}catch(m){console.error("Delete failed:",m)}},ae=async a=>{try{await T.mutateAsync({id:a.id,is_active:!a.is_active})}catch(m){console.error("Toggle failed:",m)}},I=async(a,m)=>{const d=a.target.files?.[0];if(d){if(!d.type.startsWith("image/")){g.error(i("admin.homepageTemplates.selectImageFile"));return}try{const t=v?.id||"new",n=await F.mutateAsync({file:d,type:m,templateId:t});_(p=>({...p,[`${m}_image_url`]:n.url}))}catch(t){console.error("Upload failed:",t)}}},se=a=>new Promise((m,d)=>{const t=document.createElement("video"),n=document.createElement("canvas"),p=n.getContext("2d");t.preload="auto",t.muted=!0,t.playsInline=!0,t.crossOrigin="anonymous";let c=!1;const x=()=>{c||t.videoWidth===0||t.videoHeight===0||(n.width=t.videoWidth,n.height=t.videoHeight,p?(p.drawImage(t,0,0,n.width,n.height),n.toBlob(h=>{h&&h.size>0?(c=!0,t.pause(),URL.revokeObjectURL(t.src),m(h)):d(new Error("Failed to create blob from canvas"))},"image/jpeg",.95)):d(new Error("Failed to get canvas context")))};t.onloadedmetadata=()=>{n.width=t.videoWidth,n.height=t.videoHeight,t.currentTime=.1},t.onseeked=()=>{setTimeout(x,100)},t.oncanplay=()=>{!c&&t.currentTime>=.1&&setTimeout(x,100)},t.onerror=h=>{URL.revokeObjectURL(t.src),d(new Error("Failed to load video: "+h?.message||"Unknown error"))},setTimeout(()=>{c||(URL.revokeObjectURL(t.src),d(new Error("Timeout while extracting video frame")))},1e4),t.src=URL.createObjectURL(a),t.load()}),te=a=>new Promise((m,d)=>{const t=document.createElement("video"),n=document.createElement("canvas"),p=n.getContext("2d");t.preload="auto",t.muted=!0,t.playsInline=!0,t.crossOrigin="anonymous";let c=!1;const x=()=>{c||t.videoWidth===0||t.videoHeight===0||(n.width=t.videoWidth,n.height=t.videoHeight,p?(p.drawImage(t,0,0,n.width,n.height),n.toBlob(h=>{h&&h.size>0?(c=!0,t.pause(),m(h)):d(new Error("Failed to create blob from canvas"))},"image/jpeg",.95)):d(new Error("Failed to get canvas context")))};t.onloadedmetadata=()=>{n.width=t.videoWidth,n.height=t.videoHeight,t.currentTime=.1},t.onseeked=()=>{setTimeout(x,100)},t.oncanplay=()=>{!c&&t.currentTime>=.1&&setTimeout(x,100)},t.onerror=()=>{d(new Error("Failed to load video from URL"))},setTimeout(()=>{c||d(new Error("Timeout while extracting video frame from URL"))},15e3),t.src=a,t.load()}),[P,V]=y.useState(!1),w=async a=>{const m=a?[a]:["desktop","tablet","mobile"],d=v?.id||"new",t={desktop:"桌面端",tablet:"平板端",mobile:"移动端"};V(!0);let n=0,p=0;for(const c of m){const x=s[`${c}_video_url`];if(x)try{g.info(`正在提取${t[c]}视频第一帧...`);const h=await te(x),re=new File([h],`${c}-poster-${Date.now()}.jpg`,{type:"image/jpeg"}),le=await F.mutateAsync({file:re,type:c,templateId:d});_(ne=>({...ne,[`${c}_image_url`]:le.url})),n++}catch(h){console.error(`Failed to regenerate ${c} poster:`,h),p++}}if(V(!1),n>0){const c=a?`成功重新生成${t[a]}备用图片`:`成功重新生成 ${n} 个备用图片`;g.success(c)}if(p>0&&g.warning(`${p} 个视频提取失败，可能是跨域限制`),n===0&&p===0){const c=a?`${t[a]}没有视频需要处理`:"没有找到需要处理的视频";g.info(c)}},S=async(a,m)=>{const d=a.target.files?.[0];if(d){if(!d.type.startsWith("video/")){g.error("请选择视频文件");return}if(d.size>100*1024*1024){g.error("视频文件大小不能超过100MB");return}try{const t=v?.id||"new",n=await q.mutateAsync({file:d,type:m,templateId:t});try{g.info("正在提取视频第一帧作为备用图片...");const p=await se(d),c=new File([p],`${m}-poster-${Date.now()}.jpg`,{type:"image/jpeg"}),x=await F.mutateAsync({file:c,type:m,templateId:t});_(h=>({...h,[`${m}_video_url`]:n.url,[`${m}_image_url`]:x.url})),g.success("视频和备用图片已自动生成")}catch(p){console.error("Failed to extract first frame:",p),_(c=>({...c,[`${m}_video_url`]:n.url})),g.warning("视频已上传，但无法自动提取第一帧，请手动上传备用图片")}}catch(t){console.error("Upload failed:",t)}}},r=(a,m)=>{_(d=>({...d,[a]:m}))},M=()=>{E(null),A(!1),_({})};if(G)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(L,{className:"w-8 h-8 animate-spin"})});const ie=()=>e.jsxs(Ae,{value:K,onValueChange:R,className:"w-full",children:[e.jsxs(Re,{className:"grid w-full grid-cols-4",children:[e.jsx(k,{value:"media",children:"媒体"}),e.jsx(k,{value:"overlay",children:i("admin.homepageTemplates.tabs.overlay")}),e.jsx(k,{value:"content",children:i("admin.homepageTemplates.tabs.content")}),e.jsx(k,{value:"buttons",children:i("admin.homepageTemplates.tabs.buttons")})]}),e.jsxs(D,{value:"media",className:"space-y-6 mt-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"每个端可以独立选择图片或视频，支持混合配置（如：桌面端视频 + 移动端图片）"}),e.jsxs("div",{className:"space-y-3 p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{className:"text-base font-medium",children:"桌面端"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(u,{type:"button",size:"sm",variant:(s.desktop_media_type||"image")==="image"?"default":"outline",onClick:()=>r("desktop_media_type","image"),className:"flex items-center gap-1",children:[e.jsx(H,{className:"w-3 h-3"}),"图片"]}),e.jsxs(u,{type:"button",size:"sm",variant:(s.desktop_media_type||"image")==="video"?"default":"outline",onClick:()=>r("desktop_media_type","video"),className:"flex items-center gap-1",children:[e.jsx(B,{className:"w-3 h-3"}),"视频"]})]})]}),(s.desktop_media_type||"image")==="image"?e.jsxs("div",{className:"flex items-center gap-4",children:[s.desktop_image_url&&e.jsx("img",{src:s.desktop_image_url,alt:"Desktop",className:"w-32 h-20 object-cover rounded border"}),e.jsx(o,{type:"file",accept:"image/*",onChange:a=>I(a,"desktop")})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[s.desktop_video_url&&e.jsx("video",{src:s.desktop_video_url,className:"w-32 h-20 object-cover rounded border",muted:!0}),e.jsx(o,{type:"file",accept:"video/mp4,video/webm",onChange:a=>S(a,"desktop")})]}),s.desktop_image_url&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx("span",{children:"备用图片:"}),e.jsx("img",{src:s.desktop_image_url,alt:"Desktop poster",className:"w-16 h-10 object-cover rounded border"})]})]})]}),e.jsxs("div",{className:"space-y-3 p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{className:"text-base font-medium",children:"平板端"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(u,{type:"button",size:"sm",variant:(s.tablet_media_type||"image")==="image"?"default":"outline",onClick:()=>r("tablet_media_type","image"),className:"flex items-center gap-1",children:[e.jsx(H,{className:"w-3 h-3"}),"图片"]}),e.jsxs(u,{type:"button",size:"sm",variant:(s.tablet_media_type||"image")==="video"?"default":"outline",onClick:()=>r("tablet_media_type","video"),className:"flex items-center gap-1",children:[e.jsx(B,{className:"w-3 h-3"}),"视频"]})]})]}),(s.tablet_media_type||"image")==="image"?e.jsxs("div",{className:"flex items-center gap-4",children:[s.tablet_image_url&&e.jsx("img",{src:s.tablet_image_url,alt:"Tablet",className:"w-32 h-20 object-cover rounded border"}),e.jsx(o,{type:"file",accept:"image/*",onChange:a=>I(a,"tablet")})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[s.tablet_video_url&&e.jsx("video",{src:s.tablet_video_url,className:"w-32 h-20 object-cover rounded border",muted:!0}),e.jsx(o,{type:"file",accept:"video/mp4,video/webm",onChange:a=>S(a,"tablet")})]}),s.tablet_image_url&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx("span",{children:"备用图片:"}),e.jsx("img",{src:s.tablet_image_url,alt:"Tablet poster",className:"w-16 h-10 object-cover rounded border"})]})]})]}),e.jsxs("div",{className:"space-y-3 p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{className:"text-base font-medium",children:"移动端"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(u,{type:"button",size:"sm",variant:(s.mobile_media_type||"image")==="image"?"default":"outline",onClick:()=>r("mobile_media_type","image"),className:"flex items-center gap-1",children:[e.jsx(H,{className:"w-3 h-3"}),"图片"]}),e.jsxs(u,{type:"button",size:"sm",variant:(s.mobile_media_type||"image")==="video"?"default":"outline",onClick:()=>r("mobile_media_type","video"),className:"flex items-center gap-1",children:[e.jsx(B,{className:"w-3 h-3"}),"视频"]})]})]}),(s.mobile_media_type||"image")==="image"?e.jsxs("div",{className:"flex items-center gap-4",children:[s.mobile_image_url&&e.jsx("img",{src:s.mobile_image_url,alt:"Mobile",className:"w-32 h-20 object-cover rounded border"}),e.jsx(o,{type:"file",accept:"image/*",onChange:a=>I(a,"mobile")})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[s.mobile_video_url&&e.jsx("video",{src:s.mobile_video_url,className:"w-32 h-20 object-cover rounded border",muted:!0}),e.jsx(o,{type:"file",accept:"video/mp4,video/webm",onChange:a=>S(a,"mobile")})]}),s.mobile_image_url&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx("span",{children:"备用图片:"}),e.jsx("img",{src:s.mobile_image_url,alt:"Mobile poster",className:"w-16 h-10 object-cover rounded border"})]})]})]}),(s.desktop_video_url||s.tablet_video_url||s.mobile_video_url)&&e.jsx("div",{className:"pt-4 border-t",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(l,{className:"text-sm font-medium",children:"备用图片管理"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"上传视频时会自动截取第一帧作为备用图片"})]}),e.jsxs(Ne,{children:[e.jsx(Te,{asChild:!0,children:e.jsxs(u,{type:"button",variant:"outline",size:"sm",disabled:P,children:[P?e.jsx(L,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(qe,{className:"w-4 h-4 mr-2"}),"重新生成第一帧",e.jsx(we,{className:"w-4 h-4 ml-2"})]})}),e.jsxs(Ce,{align:"end",children:[e.jsx(C,{onClick:()=>w(),children:"全部重新生成"}),e.jsx(ke,{}),e.jsx(C,{onClick:()=>w("desktop"),disabled:!s.desktop_video_url,className:s.desktop_video_url?"":"opacity-50 cursor-not-allowed",children:"仅桌面端"}),e.jsx(C,{onClick:()=>w("tablet"),disabled:!s.tablet_video_url,className:s.tablet_video_url?"":"opacity-50 cursor-not-allowed",children:"仅平板端"}),e.jsx(C,{onClick:()=>w("mobile"),disabled:!s.mobile_video_url,className:s.mobile_video_url?"":"opacity-50 cursor-not-allowed",children:"仅移动端"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:i("admin.homepageTemplates.duration")}),e.jsx(o,{type:"number",value:s.duration||5e3,onChange:a=>r("duration",parseInt(a.target.value)||5e3),min:1e3,max:3e4}),e.jsx("p",{className:"text-xs text-muted-foreground",children:i("admin.homepageTemplates.durationHint")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:i("admin.homepageTemplates.sortOrder")}),e.jsx(o,{type:"number",value:s.sort_order||0,onChange:a=>r("sort_order",parseInt(a.target.value)||0)})]})]})]}),e.jsx(D,{value:"overlay",className:"space-y-4 mt-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{children:[i("admin.homepageTemplates.baseOverlayOpacity"),": ",s.overlay_opacity||40,"%"]}),e.jsx(W,{value:[s.overlay_opacity||40],onValueChange:([a])=>r("overlay_opacity",a),max:100,step:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:i("admin.homepageTemplates.gradientDirection")}),e.jsxs(De,{value:s.overlay_gradient_direction||"to-b",onValueChange:a=>r("overlay_gradient_direction",a),children:[e.jsx(ze,{children:e.jsx(Fe,{})}),e.jsxs(Ee,{children:[e.jsx(j,{value:"to-b",children:i("admin.homepageTemplates.gradientDirection.toBottom")}),e.jsx(j,{value:"to-t",children:i("admin.homepageTemplates.gradientDirection.toTop")}),e.jsx(j,{value:"to-r",children:i("admin.homepageTemplates.gradientDirection.toRight")}),e.jsx(j,{value:"to-l",children:i("admin.homepageTemplates.gradientDirection.toLeft")}),e.jsx(j,{value:"to-br",children:i("admin.homepageTemplates.gradientDirection.toBottomRight")}),e.jsx(j,{value:"to-tr",children:i("admin.homepageTemplates.gradientDirection.toTopRight")})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:i("admin.homepageTemplates.startOpacity")}),e.jsx(o,{type:"number",min:"0",max:"100",value:s.overlay_gradient_from_opacity||30,onChange:a=>r("overlay_gradient_from_opacity",parseInt(a.target.value)||0)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:i("admin.homepageTemplates.middleOpacity")}),e.jsx(o,{type:"number",min:"0",max:"100",value:s.overlay_gradient_via_opacity||25,onChange:a=>r("overlay_gradient_via_opacity",parseInt(a.target.value)||0)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:i("admin.homepageTemplates.endOpacity")}),e.jsx(o,{type:"number",min:"0",max:"100",value:s.overlay_gradient_to_opacity||40,onChange:a=>r("overlay_gradient_to_opacity",parseInt(a.target.value)||0)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{children:[i("admin.homepageTemplates.backgroundBlur"),": ",s.background_blur||0,"px"]}),e.jsx(W,{value:[s.background_blur||0],onValueChange:([a])=>r("background_blur",a),max:50,step:1})]})]})}),e.jsx(D,{value:"content",className:"space-y-4 mt-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:i("admin.homepageTemplates.titleChinese")}),e.jsx(o,{value:s.title_zh||"",onChange:a=>r("title_zh",a.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:i("admin.homepageTemplates.titleEnglish")}),e.jsx(o,{value:s.title_en||"",onChange:a=>r("title_en",a.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:i("admin.homepageTemplates.titlePortuguese")}),e.jsx(o,{value:s.title_pt||"",onChange:a=>r("title_pt",a.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:i("admin.homepageTemplates.descriptionChinese")}),e.jsx(U,{value:s.description_zh||"",onChange:a=>r("description_zh",a.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:i("admin.homepageTemplates.descriptionEnglish")}),e.jsx(U,{value:s.description_en||"",onChange:a=>r("description_en",a.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:i("admin.homepageTemplates.descriptionPortuguese")}),e.jsx(U,{value:s.description_pt||"",onChange:a=>r("description_pt",a.target.value)})]})]})}),e.jsxs(D,{value:"buttons",className:"space-y-4 mt-4",children:[e.jsxs(b,{children:[e.jsx(O,{className:"py-3",children:e.jsx($,{className:"text-lg",children:i("admin.homepageTemplates.primaryButton")})}),e.jsxs(f,{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:i("admin.homepageTemplates.chinese")}),e.jsx(o,{value:s.primary_button_text_zh||"",onChange:a=>r("primary_button_text_zh",a.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:i("admin.homepageTemplates.english")}),e.jsx(o,{value:s.primary_button_text_en||"",onChange:a=>r("primary_button_text_en",a.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:i("admin.homepageTemplates.portuguese")}),e.jsx(o,{value:s.primary_button_text_pt||"",onChange:a=>r("primary_button_text_pt",a.target.value)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:i("admin.homepageTemplates.link")}),e.jsx(o,{value:s.primary_button_link||"",onChange:a=>r("primary_button_link",a.target.value)})]})]})]}),e.jsxs(b,{children:[e.jsx(O,{className:"py-3",children:e.jsx($,{className:"text-lg",children:i("admin.homepageTemplates.secondaryButton")})}),e.jsxs(f,{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:i("admin.homepageTemplates.chinese")}),e.jsx(o,{value:s.secondary_button_text_zh||"",onChange:a=>r("secondary_button_text_zh",a.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:i("admin.homepageTemplates.english")}),e.jsx(o,{value:s.secondary_button_text_en||"",onChange:a=>r("secondary_button_text_en",a.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:i("admin.homepageTemplates.portuguese")}),e.jsx(o,{value:s.secondary_button_text_pt||"",onChange:a=>r("secondary_button_text_pt",a.target.value)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:i("admin.homepageTemplates.link")}),e.jsx(o,{value:s.secondary_button_link||"",onChange:a=>r("secondary_button_link",a.target.value)})]})]})]}),e.jsxs(b,{children:[e.jsx(O,{className:"py-3",children:e.jsx($,{className:"text-lg",children:i("admin.homepageTemplates.subtitleButton")})}),e.jsxs(f,{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:i("admin.homepageTemplates.chinese")}),e.jsx(o,{value:s.subtitle_button_text_zh||"",onChange:a=>r("subtitle_button_text_zh",a.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:i("admin.homepageTemplates.english")}),e.jsx(o,{value:s.subtitle_button_text_en||"",onChange:a=>r("subtitle_button_text_en",a.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:i("admin.homepageTemplates.portuguese")}),e.jsx(o,{value:s.subtitle_button_text_pt||"",onChange:a=>r("subtitle_button_text_pt",a.target.value)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:i("admin.homepageTemplates.link")}),e.jsx(o,{value:s.subtitle_button_link||"",onChange:a=>r("subtitle_button_link",a.target.value)})]})]})]})]})]});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:i("admin.homepageTemplates")}),e.jsx("p",{className:"text-muted-foreground mt-2",children:i("admin.homepageTemplatesDescription")})]}),e.jsxs(u,{onClick:Q,children:[e.jsx(Be,{className:"w-4 h-4 mr-2"}),i("admin.homepageTemplates.createTemplate")]})]}),e.jsxs("div",{className:"grid gap-4",children:[N?.map(a=>e.jsx(b,{className:a.is_active?"":"opacity-60",children:e.jsx(f,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(Pe,{className:"w-5 h-5"}),e.jsxs("span",{className:"text-sm font-medium",children:["#",a.sort_order]})]}),a.desktop_image_url&&e.jsx("img",{src:a.desktop_image_url,alt:"Preview",className:"w-24 h-16 object-cover rounded border"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold truncate",children:a.title_zh}),e.jsx("p",{className:"text-sm text-muted-foreground truncate",children:a.description_zh}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(Ve,{className:"w-3 h-3 text-muted-foreground"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[a.duration/1e3,i("admin.homepageTemplates.seconds")]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{variant:"ghost",size:"icon",onClick:()=>ae(a),title:a.is_active?i("admin.homepageTemplates.hide"):i("admin.homepageTemplates.show"),children:a.is_active?e.jsx(Me,{className:"w-4 h-4"}):e.jsx(We,{className:"w-4 h-4"})}),e.jsx(u,{variant:"ghost",size:"icon",onClick:()=>X(a),children:e.jsx(Ge,{className:"w-4 h-4"})}),e.jsxs(oe,{children:[e.jsx(ce,{asChild:!0,children:e.jsx(u,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive",children:e.jsx(de,{className:"w-4 h-4"})})}),e.jsxs(me,{children:[e.jsxs(pe,{children:[e.jsx(he,{children:i("admin.confirmDelete")}),e.jsx(ue,{children:i("admin.homepageTemplates.deleteTemplateConfirm")})]}),e.jsxs(xe,{children:[e.jsx(ge,{children:i("common.cancel")}),e.jsx(_e,{onClick:()=>ee(a.id),children:i("common.delete")})]})]})]})]})]})})},a.id)),(!N||N.length===0)&&e.jsx(b,{children:e.jsx(f,{className:"p-8 text-center text-muted-foreground",children:i("admin.homepageTemplates.noTemplates")})})]}),e.jsx(ve,{open:!!v||Y,onOpenChange:M,children:e.jsxs(je,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(ye,{children:[e.jsx(be,{children:i(v?"admin.homepageTemplates.editTemplate":"admin.homepageTemplates.createTemplate")}),e.jsx(fe,{children:i("admin.homepageTemplates.configureTemplate")})]}),ie(),e.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[e.jsx(u,{variant:"outline",onClick:M,children:i("common.cancel")}),e.jsxs(u,{onClick:Z,disabled:z.isPending||T.isPending,children:[(z.isPending||T.isPending)&&e.jsx(L,{className:"w-4 h-4 mr-2 animate-spin"}),e.jsx(Je,{className:"w-4 h-4 mr-2"}),i("common.save")]})]})]})})]})};export{xa as default};
//# sourceMappingURL=AdminHomepageTemplates-aYFXpy1_.js.map
