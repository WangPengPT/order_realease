import{q as l,r as o}from"./vendor-react-5CWRUXey.js";import{s as a}from"./index-ffVqEBGu.js";const n=e=>{const s=l();o.useEffect(()=>{const t=e?`activity-realtime-${e}`:"activities-realtime-all",r=a.channel(t).on("postgres_changes",{event:"*",schema:"public",table:"subscriptions",...e?{filter:`activity_id=eq.${e}`}:{}},i=>{console.log("Subscription change detected:",i),e&&s.invalidateQueries({queryKey:["subscriberCount",e]}),s.invalidateQueries({queryKey:["activities"]}),s.invalidateQueries({queryKey:["admin-activities"]})}).on("postgres_changes",{event:"*",schema:"public",table:"activity_shares",...e?{filter:`activity_id=eq.${e}`}:{}},i=>{console.log("Share change detected:",i),e&&s.invalidateQueries({queryKey:["shareCount",e]}),s.invalidateQueries({queryKey:["activities"]}),s.invalidateQueries({queryKey:["admin-activities"]})}).subscribe(i=>{console.log(`Realtime subscription status for ${t}:`,i)});return()=>{a.removeChannel(r)}},[e,s])},m=()=>{n()},h=e=>{n(e)};export{h as a,m as u};
//# sourceMappingURL=useActivityRealtime-DlET_XPq.js.map
