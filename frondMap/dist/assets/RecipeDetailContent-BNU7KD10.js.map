{"version":3,"file":"RecipeDetailContent-BNU7KD10.js","sources":["../../src/components/community/recipe/RecipeOverview.tsx","../../src/components/community/recipe/RecipeCookingMode.tsx","../../src/components/community/recipe/RecipeDetailContent.tsx"],"sourcesContent":["import { useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { formatDistanceToNow } from \"date-fns\";\r\nimport { zhCN, enUS, pt } from \"date-fns/locale\";\r\nimport { Clock, Users, Utensils, Flame, ChefHat, PlayCircle } from \"lucide-react\";\r\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader } from \"@/components/ui/card\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\nimport { CommunityPost } from \"@/hooks/useCommunityPosts\";\r\nimport { useLocalizedContent } from \"@/hooks/useLocalizedContent\";\r\nimport { RecipeStep, Ingredient, NutritionInfo } from \"./RecipeTypes\";\r\nimport TranslateButton from \"@/components/TranslateButton\";\r\nimport TranslatableText from \"@/components/TranslatableText\";\r\nimport ImagePreviewModal from \"@/components/ImagePreviewModal\";\r\n\r\ninterface ExtendedPost extends CommunityPost {\r\n  post_type?: string;\r\n  recipe_name?: string;\r\n  recipe_name_en?: string;\r\n  recipe_name_pt?: string;\r\n  cook_time?: number;\r\n  difficulty?: string;\r\n  servings?: number;\r\n  ingredients?: Ingredient[];\r\n  steps?: RecipeStep[];\r\n  nutrition?: NutritionInfo;\r\n  recipe_tags?: string[];\r\n  recipe_category?: string;\r\n}\r\n\r\ninterface RecipeOverviewProps {\r\n  post: ExtendedPost;\r\n  onStartCooking: () => void;\r\n}\r\n\r\nconst RecipeOverview = ({ post, onStartCooking }: RecipeOverviewProps) => {\r\n  const { t, i18n } = useTranslation();\r\n  const { getLocalizedField } = useLocalizedContent();\r\n  const [translatedName, setTranslatedName] = useState<string | null>(null);\r\n  const [translatedContent, setTranslatedContent] = useState<string | null>(null);\r\n  const [translatedIngredients, setTranslatedIngredients] = useState<Record<number, string>>({});\r\n  const [previewImageUrl, setPreviewImageUrl] = useState<string | null>(null);\r\n\r\n  // Get localized content - prioritize pre-stored translations\r\n  const getLocalizedContent = () => {\r\n    const langMap: Record<string, string> = {\r\n      'zh': 'content_zh',\r\n      'en': 'content_en', \r\n      'pt': 'content_pt'\r\n    };\r\n    const field = langMap[i18n.language] || 'content';\r\n    const localizedValue = post[field as keyof typeof post];\r\n    if (localizedValue && typeof localizedValue === 'string' && localizedValue.trim()) {\r\n      return localizedValue;\r\n    }\r\n    return post.content;\r\n  };\r\n\r\n  const displayContent = translatedContent || getLocalizedContent();\r\n  const displayName = translatedName || getLocalizedField(post, \"recipe_name\") || post.recipe_name;\r\n\r\n  // Build combined text for translation: name + content + ingredients\r\n  const buildTranslationText = () => {\r\n    const parts: string[] = [];\r\n    // Recipe name\r\n    if (post.recipe_name) {\r\n      parts.push(`[NAME]${post.recipe_name}`);\r\n    }\r\n    // Content (if exists and not auto-generated)\r\n    if (post.content && post.content.trim() && !post.content.includes('主要配料：')) {\r\n      parts.push(`[CONTENT]${post.content}`);\r\n    }\r\n    // Ingredients\r\n    if (post.ingredients && post.ingredients.length > 0) {\r\n      const ingredientNames = post.ingredients.map(i => i.name).join('|');\r\n      parts.push(`[INGREDIENTS]${ingredientNames}`);\r\n    }\r\n    return parts.join('\\n---\\n');\r\n  };\r\n\r\n  // Parse translation result\r\n  const handleTranslation = (translated: string | null) => {\r\n    if (!translated) {\r\n      setTranslatedName(null);\r\n      setTranslatedContent(null);\r\n      setTranslatedIngredients({});\r\n      return;\r\n    }\r\n    \r\n    const sections = translated.split('\\n---\\n');\r\n    sections.forEach(section => {\r\n      if (section.startsWith('[NAME]')) {\r\n        setTranslatedName(section.replace('[NAME]', ''));\r\n      } else if (section.startsWith('[CONTENT]')) {\r\n        setTranslatedContent(section.replace('[CONTENT]', ''));\r\n      } else if (section.startsWith('[INGREDIENTS]')) {\r\n        const names = section.replace('[INGREDIENTS]', '').split('|');\r\n        const map: Record<number, string> = {};\r\n        names.forEach((name, idx) => { map[idx] = name.trim(); });\r\n        setTranslatedIngredients(map);\r\n      }\r\n    });\r\n  };\r\n\r\n  const getDateLocale = () => {\r\n    switch (i18n.language) {\r\n      case \"zh\": return zhCN;\r\n      case \"pt\": return pt;\r\n      default: return enUS;\r\n    }\r\n  };\r\n\r\n  const getDifficultyColor = (d: string) => {\r\n    switch (d) {\r\n      case 'easy': return 'bg-green-500/20 text-green-700 dark:text-green-400 border-green-500/30';\r\n      case 'medium': return 'bg-yellow-500/20 text-yellow-700 dark:text-yellow-400 border-yellow-500/30';\r\n      case 'hard': return 'bg-red-500/20 text-red-700 dark:text-red-400 border-red-500/30';\r\n      default: return 'bg-muted text-muted-foreground';\r\n    }\r\n  };\r\n\r\n  const getDifficultyLabel = (d: string) => {\r\n    switch (d) {\r\n      case 'easy': return t(\"recipe.difficulty.easy\", \"简单\");\r\n      case 'medium': return t(\"recipe.difficulty.medium\", \"中等\");\r\n      case 'hard': return t(\"recipe.difficulty.hard\", \"困难\");\r\n      default: return d;\r\n    }\r\n  };\r\n\r\n  const hasImages = post.image_urls && post.image_urls.length > 0;\r\n  const hasSteps = post.steps && post.steps.length > 0;\r\n\r\n  return (\r\n    <Card className=\"overflow-hidden\">\r\n      {/* Hero Image */}\r\n      {hasImages && (\r\n        <div className=\"relative aspect-video overflow-hidden\">\r\n          <img\r\n            src={post.image_urls![0]}\r\n            alt={displayName || \"\"}\r\n            className=\"w-full h-full object-cover cursor-pointer\"\r\n            onClick={() => setPreviewImageUrl(post.image_urls![0])}\r\n          />\r\n          <Badge className=\"absolute top-3 left-3 bg-primary text-primary-foreground gap-1\">\r\n            <Utensils className=\"h-3 w-3\" />\r\n            {t(\"recipe.badge\", \"食谱\")}\r\n          </Badge>\r\n        </div>\r\n      )}\r\n\r\n      <CardHeader className=\"pb-3\">\r\n        {/* Author */}\r\n        <div className=\"flex items-center gap-3 mb-4\">\r\n          <Avatar className=\"h-10 w-10\">\r\n            <AvatarImage src={post.author?.avatar_url || undefined} />\r\n            <AvatarFallback>\r\n              {post.author?.display_name?.charAt(0) || \"?\"}\r\n            </AvatarFallback>\r\n          </Avatar>\r\n          <div>\r\n            <p className=\"font-medium text-sm\">{post.author?.display_name}</p>\r\n            <p className=\"text-xs text-muted-foreground\">\r\n              {formatDistanceToNow(new Date(post.created_at), {\r\n                addSuffix: true,\r\n                locale: getDateLocale(),\r\n              })}\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Translate All Button - above recipe name */}\r\n        <div className=\"mb-2\">\r\n          <TranslateButton \r\n            text={buildTranslationText()} \r\n            onTranslation={handleTranslation}\r\n            label={t(\"recipe.translateAll\")}\r\n          />\r\n        </div>\r\n\r\n        {/* Recipe Name */}\r\n        <h2 className=\"text-xl font-bold\">{displayName}</h2>\r\n\r\n        {/* Meta Info */}\r\n        <div className=\"flex flex-wrap items-center gap-3 mt-3\">\r\n          {post.cook_time && (\r\n            <div className=\"flex items-center gap-1.5 text-sm text-muted-foreground\">\r\n              <Clock className=\"h-4 w-4\" />\r\n              <span>{post.cook_time} {t(\"recipe.minutes\", \"分钟\")}</span>\r\n            </div>\r\n          )}\r\n          {post.servings && (\r\n            <div className=\"flex items-center gap-1.5 text-sm text-muted-foreground\">\r\n              <Users className=\"h-4 w-4\" />\r\n              <span>{post.servings} {t(\"recipe.servings\", \"人份\")}</span>\r\n            </div>\r\n          )}\r\n          {post.difficulty && (\r\n            <Badge variant=\"outline\" className={getDifficultyColor(post.difficulty)}>\r\n              <ChefHat className=\"h-3 w-3 mr-1\" />\r\n              {getDifficultyLabel(post.difficulty)}\r\n            </Badge>\r\n          )}\r\n        </div>\r\n      </CardHeader>\r\n\r\n      <CardContent className=\"space-y-6\">\r\n        {/* Description - only show if there's actual content (美食介绍) and not auto-generated */}\r\n        {post.content && post.content.trim() && !post.content.includes('主要配料：') && (\r\n          <div>\r\n            <p className=\"text-sm text-muted-foreground whitespace-pre-line\">\r\n              {displayContent}\r\n            </p>\r\n          </div>\r\n        )}\r\n\r\n        {/* Nutrition Info */}\r\n        {post.nutrition && (post.nutrition.calories || post.nutrition.protein || post.nutrition.carbs || post.nutrition.fat) && (\r\n          <div>\r\n            <h3 className=\"font-semibold text-sm mb-3 flex items-center gap-2\">\r\n              <Flame className=\"h-4 w-4 text-orange-500\" />\r\n              {t(\"recipe.nutrition\", \"营养信息\")}\r\n            </h3>\r\n            <div className=\"grid grid-cols-4 gap-2\">\r\n              {post.nutrition.calories && (\r\n                <div className=\"text-center p-2 bg-muted/50 rounded-lg\">\r\n                  <p className=\"text-lg font-bold text-primary\">{post.nutrition.calories}</p>\r\n                  <p className=\"text-xs text-muted-foreground\">{t(\"recipe.kcal\", \"千卡\")}</p>\r\n                </div>\r\n              )}\r\n              {post.nutrition.protein && (\r\n                <div className=\"text-center p-2 bg-muted/50 rounded-lg\">\r\n                  <p className=\"text-lg font-bold text-primary\">{post.nutrition.protein}g</p>\r\n                  <p className=\"text-xs text-muted-foreground\">{t(\"recipe.protein\", \"蛋白质\")}</p>\r\n                </div>\r\n              )}\r\n              {post.nutrition.carbs && (\r\n                <div className=\"text-center p-2 bg-muted/50 rounded-lg\">\r\n                  <p className=\"text-lg font-bold text-primary\">{post.nutrition.carbs}g</p>\r\n                  <p className=\"text-xs text-muted-foreground\">{t(\"recipe.carbs\", \"碳水\")}</p>\r\n                </div>\r\n              )}\r\n              {post.nutrition.fat && (\r\n                <div className=\"text-center p-2 bg-muted/50 rounded-lg\">\r\n                  <p className=\"text-lg font-bold text-primary\">{post.nutrition.fat}g</p>\r\n                  <p className=\"text-xs text-muted-foreground\">{t(\"recipe.fat\", \"脂肪\")}</p>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        <Separator />\r\n\r\n        {/* Ingredients */}\r\n        {post.ingredients && post.ingredients.length > 0 && (\r\n          <div>\r\n            <h3 className=\"font-semibold text-sm mb-3\">\r\n              {t(\"recipe.ingredients\", \"食材\")} ({post.ingredients.length})\r\n            </h3>\r\n            <ul className=\"space-y-2\">\r\n              {post.ingredients.map((ingredient, index) => (\r\n                <li key={index} className=\"flex items-center justify-between text-sm py-1.5 border-b border-border/50 last:border-0\">\r\n                  <span>{translatedIngredients[index] || ingredient.name}</span>\r\n                  <span className=\"text-muted-foreground ml-2 shrink-0\">\r\n                    {ingredient.amount} {ingredient.unit}\r\n                  </span>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n        )}\r\n\r\n        {/* Tags */}\r\n        {post.recipe_tags && post.recipe_tags.length > 0 && (\r\n          <div className=\"flex flex-wrap gap-2 pt-2\">\r\n            {post.recipe_tags.map((tag, index) => (\r\n              <Badge key={index} variant=\"secondary\" className=\"text-xs\">\r\n                #{tag}\r\n              </Badge>\r\n            ))}\r\n          </div>\r\n        )}\r\n\r\n        {/* Start Cooking Button */}\r\n        {hasSteps && (\r\n          <Button \r\n            size=\"lg\" \r\n            className=\"w-full gap-2 h-14 text-lg\"\r\n            onClick={onStartCooking}\r\n          >\r\n            <PlayCircle className=\"h-6 w-6\" />\r\n            {t(\"recipe.startCooking\", \"开始烹饪\")}\r\n            <Badge variant=\"secondary\" className=\"ml-2\">\r\n              {post.steps!.length} {t(\"recipe.stepsCount\", \"步\")}\r\n            </Badge>\r\n          </Button>\r\n        )}\r\n      </CardContent>\r\n\r\n      <ImagePreviewModal\r\n        imageUrl={previewImageUrl || \"\"}\r\n        isOpen={!!previewImageUrl}\r\n        onClose={() => setPreviewImageUrl(null)}\r\n      />\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default RecipeOverview;\r\n","import { useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { ChevronLeft, ChevronRight, Check, X } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Progress } from \"@/components/ui/progress\";\r\nimport { RecipeStep } from \"./RecipeTypes\";\r\nimport TranslateButton from \"@/components/TranslateButton\";\r\nimport ImagePreviewModal from \"@/components/ImagePreviewModal\";\r\n\r\ninterface RecipeCookingModeProps {\r\n  steps: RecipeStep[];\r\n  onExit: () => void;\r\n}\r\n\r\nconst RecipeCookingMode = ({ steps, onExit }: RecipeCookingModeProps) => {\r\n  const { t } = useTranslation();\r\n  const [currentStep, setCurrentStep] = useState(0);\r\n  const [translatedSteps, setTranslatedSteps] = useState<Record<number, string>>({});\r\n  const [previewImageUrl, setPreviewImageUrl] = useState<string | null>(null);\r\n  \r\n  const sortedSteps = [...steps].sort((a, b) => a.order - b.order);\r\n  const totalSteps = sortedSteps.length;\r\n  const step = sortedSteps[currentStep];\r\n  const progress = ((currentStep + 1) / totalSteps) * 100;\r\n  const isLastStep = currentStep === totalSteps - 1;\r\n  const isFirstStep = currentStep === 0;\r\n\r\n  const handleNext = () => {\r\n    if (!isLastStep) {\r\n      setCurrentStep(prev => prev + 1);\r\n    }\r\n  };\r\n\r\n  const handlePrev = () => {\r\n    if (!isFirstStep) {\r\n      setCurrentStep(prev => prev - 1);\r\n    }\r\n  };\r\n\r\n  const handleComplete = () => {\r\n    onExit();\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full min-h-[60vh]\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between px-4 py-3 border-b bg-background sticky top-0 z-10\">\r\n        <Button variant=\"ghost\" size=\"icon\" onClick={onExit}>\r\n          <X className=\"h-5 w-5\" />\r\n        </Button>\r\n        <span className=\"font-medium\">\r\n          {t(\"recipe.stepProgress\", \"步骤 {{current}} / {{total}}\", { \r\n            current: currentStep + 1, \r\n            total: totalSteps \r\n          })}\r\n        </span>\r\n        <TranslateButton \r\n          text={sortedSteps.map(s => s.description).join('\\n---\\n')} \r\n          onTranslation={(translated) => {\r\n            if (translated) {\r\n              const descriptions = translated.split('\\n---\\n');\r\n              const map: Record<number, string> = {};\r\n              descriptions.forEach((desc, idx) => { map[idx] = desc; });\r\n              setTranslatedSteps(map);\r\n            } else {\r\n              setTranslatedSteps({});\r\n            }\r\n          }}\r\n        />\r\n      </div>\r\n\r\n      {/* Progress bar */}\r\n      <Progress value={progress} className=\"h-1 rounded-none\" />\r\n\r\n      {/* Step content */}\r\n      <div className=\"flex-1 overflow-y-auto p-6\">\r\n        {/* Step number badge */}\r\n        <div className=\"flex items-center justify-center mb-6\">\r\n          <div className=\"w-16 h-16 rounded-full bg-primary text-primary-foreground flex items-center justify-center text-2xl font-bold shadow-lg\">\r\n            {step.order}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Step images */}\r\n        {(() => {\r\n          const imgs = (step.image_urls && step.image_urls.length > 0) ? step.image_urls : step.image_url ? [step.image_url] : [];\r\n          return imgs.length > 0 && (\r\n            <div className=\"mb-6 flex flex-wrap justify-center gap-2\">\r\n              {imgs.map((url, imgIdx) => (\r\n                <img\r\n                  key={imgIdx}\r\n                  src={url}\r\n                  alt={`Step ${step.order} - ${imgIdx + 1}`}\r\n                  className={`h-auto max-h-64 object-cover cursor-pointer rounded-xl ${imgs.length === 1 ? 'max-w-[75%]' : 'w-[calc(50%-0.25rem)]'}`}\r\n                  onClick={() => setPreviewImageUrl(url)}\r\n                />\r\n              ))}\r\n            </div>\r\n          );\r\n        })()}\r\n\r\n        {/* Step description */}\r\n        <p className=\"text-lg leading-relaxed text-center\">\r\n          {translatedSteps[currentStep] || step.description}\r\n        </p>\r\n      </div>\r\n\r\n      {/* Step dots indicator */}\r\n      <div className=\"flex justify-center gap-1.5 py-3\">\r\n        {sortedSteps.map((_, index) => (\r\n          <button\r\n            key={index}\r\n            className={`w-2 h-2 rounded-full transition-all ${\r\n              index === currentStep \r\n                ? 'bg-primary w-6' \r\n                : index < currentStep \r\n                  ? 'bg-primary/50' \r\n                  : 'bg-muted-foreground/30'\r\n            }`}\r\n            onClick={() => setCurrentStep(index)}\r\n          />\r\n        ))}\r\n      </div>\r\n\r\n      {/* Navigation buttons */}\r\n      <div className=\"flex items-center justify-between p-4 border-t bg-background\">\r\n        <Button\r\n          variant=\"outline\"\r\n          size=\"lg\"\r\n          onClick={handlePrev}\r\n          disabled={isFirstStep}\r\n          className=\"gap-2\"\r\n        >\r\n          <ChevronLeft className=\"h-5 w-5\" />\r\n          {t(\"recipe.prevStep\", \"上一步\")}\r\n        </Button>\r\n\r\n        {isLastStep ? (\r\n          <Button\r\n            size=\"lg\"\r\n            onClick={handleComplete}\r\n            className=\"gap-2\"\r\n            variant=\"default\"\r\n          >\r\n            <Check className=\"h-5 w-5\" />\r\n            {t(\"recipe.complete\", \"完成\")}\r\n          </Button>\r\n        ) : (\r\n          <Button\r\n            size=\"lg\"\r\n            onClick={handleNext}\r\n            className=\"gap-2\"\r\n          >\r\n            {t(\"recipe.nextStep\", \"下一步\")}\r\n            <ChevronRight className=\"h-5 w-5\" />\r\n          </Button>\r\n        )}\r\n      </div>\r\n\r\n      <ImagePreviewModal\r\n        imageUrl={previewImageUrl || \"\"}\r\n        isOpen={!!previewImageUrl}\r\n        onClose={() => setPreviewImageUrl(null)}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RecipeCookingMode;\r\n","import { useState, useRef, useCallback } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { formatDistanceToNow } from \"date-fns\";\r\nimport { zhCN, enUS, pt } from \"date-fns/locale\";\r\nimport { Clock, Users, Utensils, Flame, ChefHat, Heart, MessageCircle, Share2, List, PlayCircle } from \"lucide-react\";\r\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Card, CardContent, CardHeader } from \"@/components/ui/card\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\nimport { CommunityPost } from \"@/hooks/useCommunityPosts\";\r\nimport { useLocalizedContent } from \"@/hooks/useLocalizedContent\";\r\nimport { RecipeStep, Ingredient, NutritionInfo } from \"./RecipeTypes\";\r\nimport RecipeOverview from \"./RecipeOverview\";\r\nimport RecipeCookingMode from \"./RecipeCookingMode\";\r\nimport TranslateButton from \"@/components/TranslateButton\";\r\nimport ImagePreviewModal from \"@/components/ImagePreviewModal\";\r\n\r\ninterface ExtendedPost extends CommunityPost {\r\n  post_type?: string;\r\n  recipe_name?: string;\r\n  recipe_name_en?: string;\r\n  recipe_name_pt?: string;\r\n  cook_time?: number;\r\n  difficulty?: string;\r\n  servings?: number;\r\n  ingredients?: Ingredient[];\r\n  steps?: RecipeStep[];\r\n  nutrition?: NutritionInfo;\r\n  recipe_tags?: string[];\r\n  recipe_category?: string;\r\n}\r\n\r\ninterface RecipeDetailContentProps {\r\n  post: ExtendedPost;\r\n  showActions?: boolean;\r\n}\r\n\r\ntype ViewMode = 'guided' | 'full';\r\ntype GuidedPhase = 'overview' | 'cooking';\r\n\r\nconst RecipeDetailContent = ({ post, showActions = false }: RecipeDetailContentProps) => {\r\n  const { t, i18n } = useTranslation();\r\n  const { getLocalizedField } = useLocalizedContent();\r\n  \r\n  // View mode: 'guided' (step-by-step) or 'full' (all at once)\r\n  const [viewMode, setViewMode] = useState<ViewMode>('guided');\r\n  // For guided mode: 'overview' (info + ingredients) or 'cooking' (steps)\r\n  const [guidedPhase, setGuidedPhase] = useState<GuidedPhase>('overview');\r\n  // Translation state\r\n  const [translatedName, setTranslatedName] = useState<string | null>(null);\r\n  const [translatedContent, setTranslatedContent] = useState<string | null>(null);\r\n  const [translatedIngredients, setTranslatedIngredients] = useState<Record<number, string>>({});\r\n  const [translatedSteps, setTranslatedSteps] = useState<Record<number, string>>({});\r\n  const [previewImageUrl, setPreviewImageUrl] = useState<string | null>(null);\r\n  const cookingRef = useRef<HTMLDivElement>(null);\r\n\r\n  const handleStartCooking = useCallback(() => {\r\n    setGuidedPhase('cooking');\r\n    // Scroll to top after render\r\n    requestAnimationFrame(() => {\r\n      window.scrollTo({ top: 0, behavior: 'smooth' });\r\n    });\r\n  }, []);\r\n\r\n  // Get localized content - prioritize pre-stored translations\r\n  const getLocalizedContent = () => {\r\n    const langMap: Record<string, string> = {\r\n      'zh': 'content_zh',\r\n      'en': 'content_en', \r\n      'pt': 'content_pt'\r\n    };\r\n    const field = langMap[i18n.language] || 'content';\r\n    const localizedValue = post[field as keyof typeof post];\r\n    if (localizedValue && typeof localizedValue === 'string' && localizedValue.trim()) {\r\n      return localizedValue;\r\n    }\r\n    return post.content;\r\n  };\r\n\r\n  const displayContent = translatedContent || getLocalizedContent();\r\n  const displayName = translatedName || getLocalizedField(post, \"recipe_name\") || post.recipe_name;\r\n\r\n  // Build combined text for translation: name + content + ingredients + steps\r\n  const buildTranslationText = () => {\r\n    const parts: string[] = [];\r\n    if (post.recipe_name) {\r\n      parts.push(`[NAME]${post.recipe_name}`);\r\n    }\r\n    if (post.content && post.content.trim() && !post.content.includes('主要配料：')) {\r\n      parts.push(`[CONTENT]${post.content}`);\r\n    }\r\n    if (post.ingredients && post.ingredients.length > 0) {\r\n      const ingredientNames = post.ingredients.map(i => i.name).join('|');\r\n      parts.push(`[INGREDIENTS]${ingredientNames}`);\r\n    }\r\n    if (post.steps && post.steps.length > 0) {\r\n      const stepDescs = post.steps.sort((a, b) => a.order - b.order).map(s => s.description).join('|');\r\n      parts.push(`[STEPS]${stepDescs}`);\r\n    }\r\n    return parts.join('\\n---\\n');\r\n  };\r\n\r\n  // Parse translation result\r\n  const handleTranslation = (translated: string | null) => {\r\n    if (!translated) {\r\n      setTranslatedName(null);\r\n      setTranslatedContent(null);\r\n      setTranslatedIngredients({});\r\n      setTranslatedSteps({});\r\n      return;\r\n    }\r\n    \r\n    const sections = translated.split('\\n---\\n');\r\n    sections.forEach(section => {\r\n      if (section.startsWith('[NAME]')) {\r\n        setTranslatedName(section.replace('[NAME]', ''));\r\n      } else if (section.startsWith('[CONTENT]')) {\r\n        setTranslatedContent(section.replace('[CONTENT]', ''));\r\n      } else if (section.startsWith('[INGREDIENTS]')) {\r\n        const names = section.replace('[INGREDIENTS]', '').split('|');\r\n        const map: Record<number, string> = {};\r\n        names.forEach((name, idx) => { map[idx] = name.trim(); });\r\n        setTranslatedIngredients(map);\r\n      } else if (section.startsWith('[STEPS]')) {\r\n        const descs = section.replace('[STEPS]', '').split('|');\r\n        const map: Record<number, string> = {};\r\n        descs.forEach((desc, idx) => { map[idx] = desc.trim(); });\r\n        setTranslatedSteps(map);\r\n      }\r\n    });\r\n  };\r\n\r\n  const getDateLocale = () => {\r\n    switch (i18n.language) {\r\n      case \"zh\": return zhCN;\r\n      case \"pt\": return pt;\r\n      default: return enUS;\r\n    }\r\n  };\r\n\r\n  const getDifficultyColor = (d: string) => {\r\n    switch (d) {\r\n      case 'easy': return 'bg-green-500/20 text-green-700 dark:text-green-400 border-green-500/30';\r\n      case 'medium': return 'bg-yellow-500/20 text-yellow-700 dark:text-yellow-400 border-yellow-500/30';\r\n      case 'hard': return 'bg-red-500/20 text-red-700 dark:text-red-400 border-red-500/30';\r\n      default: return 'bg-muted text-muted-foreground';\r\n    }\r\n  };\r\n\r\n  const getDifficultyLabel = (d: string) => {\r\n    switch (d) {\r\n      case 'easy': return t(\"recipe.difficulty.easy\", \"简单\");\r\n      case 'medium': return t(\"recipe.difficulty.medium\", \"中等\");\r\n      case 'hard': return t(\"recipe.difficulty.hard\", \"困难\");\r\n      default: return d;\r\n    }\r\n  };\r\n\r\n  const hasImages = post.image_urls && post.image_urls.length > 0;\r\n  const hasSteps = post.steps && post.steps.length > 0;\r\n\r\n  // Guided mode - Cooking phase (full screen step-by-step)\r\n  if (viewMode === 'guided' && guidedPhase === 'cooking' && hasSteps) {\r\n    return (\r\n      <Card className=\"overflow-hidden\">\r\n        <RecipeCookingMode \r\n          steps={post.steps!} \r\n          onExit={() => setGuidedPhase('overview')} \r\n        />\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  // Guided mode - Overview phase\r\n  if (viewMode === 'guided') {\r\n    return (\r\n      <div className=\"space-y-4\">\r\n        {/* Mode toggle */}\r\n        <div className=\"flex justify-end\">\r\n          <div className=\"inline-flex h-9 items-center rounded-md bg-muted p-1 text-muted-foreground\">\r\n            <button\r\n              onClick={() => setViewMode('guided')}\r\n              className=\"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium transition-all gap-1.5 bg-background text-foreground shadow-sm\"\r\n            >\r\n              <PlayCircle className=\"h-4 w-4\" />\r\n              {t(\"recipe.guidedMode\", \"流程模式\")}\r\n            </button>\r\n            <button\r\n              onClick={() => setViewMode('full')}\r\n              className=\"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium transition-all gap-1.5\"\r\n            >\r\n              <List className=\"h-4 w-4\" />\r\n              {t(\"recipe.fullMode\", \"完整模式\")}\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <RecipeOverview \r\n          post={post} \r\n          onStartCooking={handleStartCooking} \r\n        />\r\n\r\n        {/* Stats */}\r\n        <Card>\r\n          <CardContent className=\"py-4\">\r\n            <div className=\"flex items-center gap-6 text-muted-foreground\">\r\n              <span className=\"flex items-center gap-1.5 text-sm\">\r\n                <Heart className=\"h-4 w-4\" />\r\n                {post.likes_count || 0}\r\n              </span>\r\n              <span className=\"flex items-center gap-1.5 text-sm\">\r\n                <MessageCircle className=\"h-4 w-4\" />\r\n                {post.comments_count || 0}\r\n              </span>\r\n              <span className=\"flex items-center gap-1.5 text-sm\">\r\n                <Share2 className=\"h-4 w-4\" />\r\n                {post.shares_count || 0}\r\n              </span>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Full mode - Original layout with all content\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {/* Mode toggle */}\r\n      <div className=\"flex justify-end\">\r\n        <div className=\"inline-flex h-9 items-center rounded-md bg-muted p-1 text-muted-foreground\">\r\n          <button\r\n            onClick={() => {\r\n              setViewMode('guided');\r\n              setGuidedPhase('overview');\r\n            }}\r\n            className=\"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium transition-all gap-1.5\"\r\n          >\r\n            <PlayCircle className=\"h-4 w-4\" />\r\n            {t(\"recipe.guidedMode\", \"流程模式\")}\r\n          </button>\r\n          <button\r\n            onClick={() => setViewMode('full')}\r\n            className=\"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium transition-all gap-1.5 bg-background text-foreground shadow-sm\"\r\n          >\r\n            <List className=\"h-4 w-4\" />\r\n            {t(\"recipe.fullMode\", \"完整模式\")}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <Card className=\"overflow-hidden\">\r\n        {/* Hero Image */}\r\n        {hasImages && (\r\n          <div className=\"relative aspect-video overflow-hidden\">\r\n            <img\r\n              src={post.image_urls![0]}\r\n              alt={displayName || \"\"}\r\n              className=\"w-full h-full object-cover cursor-pointer\"\r\n              onClick={() => setPreviewImageUrl(post.image_urls![0])}\r\n            />\r\n            <Badge className=\"absolute top-3 left-3 bg-primary text-primary-foreground gap-1\">\r\n              <Utensils className=\"h-3 w-3\" />\r\n              {t(\"recipe.badge\", \"食谱\")}\r\n            </Badge>\r\n          </div>\r\n        )}\r\n\r\n        <CardHeader className=\"pb-3\">\r\n          {/* Author */}\r\n          <div className=\"flex items-center gap-3 mb-4\">\r\n            <Avatar className=\"h-10 w-10\">\r\n              <AvatarImage src={post.author?.avatar_url || undefined} />\r\n              <AvatarFallback>\r\n                {post.author?.display_name?.charAt(0) || \"?\"}\r\n              </AvatarFallback>\r\n            </Avatar>\r\n            <div>\r\n              <p className=\"font-medium text-sm\">{post.author?.display_name}</p>\r\n              <p className=\"text-xs text-muted-foreground\">\r\n                {formatDistanceToNow(new Date(post.created_at), {\r\n                  addSuffix: true,\r\n                  locale: getDateLocale(),\r\n                })}\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Translate All Button - above recipe name */}\r\n          <div className=\"mb-2\">\r\n            <TranslateButton \r\n              text={buildTranslationText()} \r\n              onTranslation={handleTranslation}\r\n              label={t(\"recipe.translateAllFull\")}\r\n            />\r\n          </div>\r\n\r\n          {/* Recipe Name */}\r\n          <h2 className=\"text-xl font-bold\">{displayName}</h2>\r\n\r\n          {/* Meta Info */}\r\n          <div className=\"flex flex-wrap items-center gap-3 mt-3\">\r\n            {post.cook_time && (\r\n              <div className=\"flex items-center gap-1.5 text-sm text-muted-foreground\">\r\n                <Clock className=\"h-4 w-4\" />\r\n                <span>{post.cook_time} {t(\"recipe.minutes\", \"分钟\")}</span>\r\n              </div>\r\n            )}\r\n            {post.servings && (\r\n              <div className=\"flex items-center gap-1.5 text-sm text-muted-foreground\">\r\n                <Users className=\"h-4 w-4\" />\r\n                <span>{post.servings} {t(\"recipe.servings\", \"人份\")}</span>\r\n              </div>\r\n            )}\r\n            {post.difficulty && (\r\n              <Badge variant=\"outline\" className={getDifficultyColor(post.difficulty)}>\r\n                <ChefHat className=\"h-3 w-3 mr-1\" />\r\n                {getDifficultyLabel(post.difficulty)}\r\n              </Badge>\r\n            )}\r\n          </div>\r\n        </CardHeader>\r\n\r\n        <CardContent className=\"space-y-6\">\r\n          {/* Description - only show if there's actual content */}\r\n          {post.content && post.content.trim() && !post.content.includes('主要配料：') && (\r\n            <div>\r\n              <p className=\"text-sm text-muted-foreground whitespace-pre-line\">\r\n                {displayContent}\r\n              </p>\r\n            </div>\r\n          )}\r\n\r\n          {/* Nutrition Info */}\r\n          {post.nutrition && (post.nutrition.calories || post.nutrition.protein || post.nutrition.carbs || post.nutrition.fat) && (\r\n            <div>\r\n              <h3 className=\"font-semibold text-sm mb-3 flex items-center gap-2\">\r\n                <Flame className=\"h-4 w-4 text-primary\" />\r\n                {t(\"recipe.nutrition\", \"营养信息\")}\r\n              </h3>\r\n              <div className=\"grid grid-cols-4 gap-2\">\r\n                {post.nutrition.calories && (\r\n                  <div className=\"text-center p-2 bg-muted/50 rounded-lg\">\r\n                    <p className=\"text-lg font-bold text-primary\">{post.nutrition.calories}</p>\r\n                    <p className=\"text-xs text-muted-foreground\">{t(\"recipe.kcal\", \"千卡\")}</p>\r\n                  </div>\r\n                )}\r\n                {post.nutrition.protein && (\r\n                  <div className=\"text-center p-2 bg-muted/50 rounded-lg\">\r\n                    <p className=\"text-lg font-bold text-primary\">{post.nutrition.protein}g</p>\r\n                    <p className=\"text-xs text-muted-foreground\">{t(\"recipe.protein\", \"蛋白质\")}</p>\r\n                  </div>\r\n                )}\r\n                {post.nutrition.carbs && (\r\n                  <div className=\"text-center p-2 bg-muted/50 rounded-lg\">\r\n                    <p className=\"text-lg font-bold text-primary\">{post.nutrition.carbs}g</p>\r\n                    <p className=\"text-xs text-muted-foreground\">{t(\"recipe.carbs\", \"碳水\")}</p>\r\n                  </div>\r\n                )}\r\n                {post.nutrition.fat && (\r\n                  <div className=\"text-center p-2 bg-muted/50 rounded-lg\">\r\n                    <p className=\"text-lg font-bold text-primary\">{post.nutrition.fat}g</p>\r\n                    <p className=\"text-xs text-muted-foreground\">{t(\"recipe.fat\", \"脂肪\")}</p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <Separator />\r\n\r\n          {/* Ingredients */}\r\n          {post.ingredients && post.ingredients.length > 0 && (\r\n            <div>\r\n              <h3 className=\"font-semibold text-sm mb-3\">\r\n                {t(\"recipe.ingredients\", \"食材\")} ({post.ingredients.length})\r\n              </h3>\r\n              <ul className=\"space-y-2\">\r\n                {post.ingredients.map((ingredient, index) => (\r\n                  <li key={index} className=\"flex items-center justify-between text-sm py-1.5 border-b border-border/50 last:border-0\">\r\n                    <span>{translatedIngredients[index] || ingredient.name}</span>\r\n                    <span className=\"text-muted-foreground ml-2 shrink-0\">\r\n                      {ingredient.amount} {ingredient.unit}\r\n                    </span>\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            </div>\r\n          )}\r\n\r\n          <Separator />\r\n\r\n          {/* Steps */}\r\n          {hasSteps && (\r\n            <div>\r\n              <h3 className=\"font-semibold text-sm mb-3\">\r\n                {t(\"recipe.steps\", \"步骤\")} ({post.steps!.length})\r\n              </h3>\r\n              <ol className=\"space-y-4\">\r\n                {post.steps!\r\n                  .sort((a, b) => a.order - b.order)\r\n                  .map((step, index) => (\r\n                    <li key={index} className=\"flex gap-3\">\r\n                      <div className=\"flex-shrink-0 w-6 h-6 rounded-full bg-primary text-primary-foreground flex items-center justify-center text-xs font-bold\">\r\n                        {step.order}\r\n                      </div>\r\n                      <div className=\"flex-1 space-y-2\">\r\n                        <p className=\"text-sm\">{translatedSteps[index] || step.description}</p>\r\n                        {(() => {\r\n                          const imgs = (step.image_urls && step.image_urls.length > 0) ? step.image_urls : step.image_url ? [step.image_url] : [];\r\n                          return imgs.length > 0 && (\r\n                            <div className={`flex gap-2 ${imgs.length === 1 ? '' : 'flex-wrap'}`}>\r\n                              {imgs.map((url, imgIdx) => (\r\n                                <img\r\n                                  key={imgIdx}\r\n                                  src={url}\r\n                                  alt={`Step ${step.order} - ${imgIdx + 1}`}\r\n                                  className={`rounded-lg max-h-48 object-cover cursor-pointer ${imgs.length === 1 ? 'w-full' : 'w-[calc(50%-0.25rem)]'}`}\r\n                                  onClick={() => setPreviewImageUrl(url)}\r\n                                />\r\n                              ))}\r\n                            </div>\r\n                          );\r\n                        })()}\r\n                      </div>\r\n                    </li>\r\n                  ))}\r\n              </ol>\r\n            </div>\r\n          )}\r\n\r\n          {/* Tags */}\r\n          {post.recipe_tags && post.recipe_tags.length > 0 && (\r\n            <div className=\"flex flex-wrap gap-2 pt-2\">\r\n              {post.recipe_tags.map((tag, index) => (\r\n                <Badge key={index} variant=\"secondary\" className=\"text-xs\">\r\n                  #{tag}\r\n                </Badge>\r\n              ))}\r\n            </div>\r\n          )}\r\n\r\n          {/* Stats */}\r\n          <div className=\"flex items-center gap-6 pt-4 border-t text-muted-foreground\">\r\n            <span className=\"flex items-center gap-1.5 text-sm\">\r\n              <Heart className=\"h-4 w-4\" />\r\n              {post.likes_count || 0}\r\n            </span>\r\n            <span className=\"flex items-center gap-1.5 text-sm\">\r\n              <MessageCircle className=\"h-4 w-4\" />\r\n              {post.comments_count || 0}\r\n            </span>\r\n            <span className=\"flex items-center gap-1.5 text-sm\">\r\n              <Share2 className=\"h-4 w-4\" />\r\n              {post.shares_count || 0}\r\n            </span>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      <ImagePreviewModal\r\n        imageUrl={previewImageUrl || \"\"}\r\n        isOpen={!!previewImageUrl}\r\n        onClose={() => setPreviewImageUrl(null)}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RecipeDetailContent;\r\n"],"names":["RecipeOverview","post","onStartCooking","i18n","useTranslation","getLocalizedField","useLocalizedContent","translatedName","setTranslatedName","useState","translatedContent","setTranslatedContent","translatedIngredients","setTranslatedIngredients","previewImageUrl","setPreviewImageUrl","displayContent","field","localizedValue","displayName","buildTranslationText","parts","ingredientNames","i","handleTranslation","translated","section","names","map","name","idx","getDateLocale","zhCN","pt","enUS","getDifficultyColor","d","getDifficultyLabel","hasImages","hasSteps","jsxs","Card","jsx","Badge","Utensils","CardHeader","Avatar","AvatarImage","AvatarFallback","TranslateButton","Clock","Users","ChefHat","CardContent","Flame","Separator","ingredient","index","tag","Button","PlayCircle","ImagePreviewModal","RecipeCookingMode","steps","onExit","currentStep","setCurrentStep","translatedSteps","setTranslatedSteps","sortedSteps","b","totalSteps","step","progress","isLastStep","isFirstStep","handleNext","prev","handlePrev","handleComplete","X","s","descriptions","desc","Progress","imgs","url","imgIdx","_","ChevronLeft","Check","ChevronRight","RecipeDetailContent","showActions","viewMode","setViewMode","guidedPhase","setGuidedPhase","useRef","handleStartCooking","useCallback","stepDescs","a","descs","List","Heart","MessageCircle","Share2"],"mappings":"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"}