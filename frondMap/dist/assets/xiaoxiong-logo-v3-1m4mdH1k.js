import{r as o}from"./vendor-react-iAJ0IrSD.js";import{u as l}from"./vendor-query-D82cqPtt.js";import{s as a}from"./index-B44MF3Hr.js";const r=e=>{const s=l();o.useEffect(()=>{const t=e?`activity-realtime-${e}`:"activities-realtime-all",n=a.channel(t).on("postgres_changes",{event:"*",schema:"public",table:"subscriptions",...e?{filter:`activity_id=eq.${e}`}:{}},i=>{console.log("Subscription change detected:",i),e&&s.invalidateQueries({queryKey:["subscriberCount",e]}),s.invalidateQueries({queryKey:["activities"]}),s.invalidateQueries({queryKey:["admin-activities"]})}).on("postgres_changes",{event:"*",schema:"public",table:"activity_shares",...e?{filter:`activity_id=eq.${e}`}:{}},i=>{console.log("Share change detected:",i),e&&s.invalidateQueries({queryKey:["shareCount",e]}),s.invalidateQueries({queryKey:["activities"]}),s.invalidateQueries({queryKey:["admin-activities"]})}).subscribe(i=>{console.log(`Realtime subscription status for ${t}:`,i)});return()=>{a.removeChannel(n)}},[e,s])},p=()=>{r()},g=e=>{r(e)},h="/assets/xiaoxiong-logo-v3-D4uDr23w.png";export{g as a,h as p,p as u};
//# sourceMappingURL=xiaoxiong-logo-v3-1m4mdH1k.js.map
