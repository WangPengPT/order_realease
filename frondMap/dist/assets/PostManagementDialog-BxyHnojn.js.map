{"version":3,"file":"PostManagementDialog-BxyHnojn.js","sources":["../../src/components/admin/PostManagementDialog.tsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { formatDistanceToNow } from \"date-fns\";\r\nimport { zhCN, enUS, pt } from \"date-fns/locale\";\r\nimport { \r\n  Calendar, \r\n  Loader2, \r\n  Clock, \r\n  Heart, \r\n  MessageCircle, \r\n  Share2,\r\n  Weight,\r\n  CheckCircle2,\r\n  XCircle,\r\n  EyeOff,\r\n  AlertTriangle,\r\n  Check,\r\n  AlertCircle,\r\n  ShieldAlert,\r\n  RefreshCw,\r\n  Bot,\r\n} from \"lucide-react\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from \"@/components/ui/dialog\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport { CommunityPost, useUpdatePost } from \"@/hooks/useCommunityPosts\";\r\nimport { useActivities } from \"@/hooks/useActivities\";\r\nimport { useLocalizedContent } from \"@/hooks/useLocalizedContent\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { toast } from \"sonner\";\r\nimport { useQueryClient } from \"@tanstack/react-query\";\r\n\r\ninterface PostManagementDialogProps {\r\n  post: CommunityPost | null;\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n}\r\n\r\nconst PostManagementDialog = ({\r\n  post,\r\n  open,\r\n  onOpenChange,\r\n}: PostManagementDialogProps) => {\r\n  const { t, i18n } = useTranslation();\r\n  const { getLocalizedField } = useLocalizedContent();\r\n  const updatePost = useUpdatePost();\r\n  const { data: activities } = useActivities();\r\n  const queryClient = useQueryClient();\r\n\r\n  const [weight, setWeight] = useState(0);\r\n  const [status, setStatus] = useState(\"approved\");\r\n  const [moderationStatus, setModerationStatus] = useState(\"pending\");\r\n  const [activityId, setActivityId] = useState<string>(\"\");\r\n  const [isReReviewing, setIsReReviewing] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (post) {\r\n      setWeight(post.weight);\r\n      setStatus(post.status);\r\n      setModerationStatus(post.moderation_status);\r\n      setActivityId(post.activity_id || \"\");\r\n    }\r\n  }, [post]);\r\n\r\n  const getRiskColor = (score: number | null) => {\r\n    if (score === null) return \"bg-gray-100 text-gray-600\";\r\n    if (score <= 30) return \"bg-emerald-100 text-emerald-700\";\r\n    if (score <= 60) return \"bg-amber-100 text-amber-700\";\r\n    return \"bg-red-100 text-red-700\";\r\n  };\r\n\r\n  const handleReReview = async () => {\r\n    if (!post) return;\r\n    setIsReReviewing(true);\r\n    try {\r\n      const { error } = await supabase.functions.invoke(\"moderate-post\", {\r\n        body: {\r\n          post_id: post.id,\r\n          content: post.content,\r\n          user_id: post.author_id,\r\n          image_urls: post.image_urls,\r\n          video_url: post.video_url,\r\n        },\r\n      });\r\n      if (error) throw error;\r\n      toast.success(t(\"admin.moderation.reReviewSuccess\", \"重新审核完成\"));\r\n      queryClient.invalidateQueries({ queryKey: [\"admin-community-posts\"] });\r\n      queryClient.invalidateQueries({ queryKey: [\"community-post\"] });\r\n    } catch (err) {\r\n      console.error(\"Re-moderation error:\", err);\r\n      toast.error(t(\"admin.moderation.reReviewError\", \"重新审核失败\"));\r\n    } finally {\r\n      setIsReReviewing(false);\r\n    }\r\n  };\r\n\r\n  const getDateLocale = () => {\r\n    switch (i18n.language) {\r\n      case \"zh\":\r\n        return zhCN;\r\n      case \"pt\":\r\n        return pt;\r\n      default:\r\n        return enUS;\r\n    }\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    if (!post) return;\r\n\r\n    await updatePost.mutateAsync({\r\n      id: post.id,\r\n      weight,\r\n      status,\r\n      moderation_status: moderationStatus,\r\n      activity_id: activityId || null,\r\n    });\r\n\r\n    onOpenChange(false);\r\n  };\r\n\r\n  if (!post) return null;\r\n\r\n  const activeActivities = activities?.filter((a) => a.status === \"published\") || [];\r\n\r\n  const getStatusConfig = (s: string) => {\r\n    switch (s) {\r\n      case \"approved\":\r\n        return { icon: CheckCircle2, label: t(\"admin.status.approved\", \"已发布\"), className: \"text-emerald-600\" };\r\n      case \"pending\":\r\n        return { icon: Clock, label: t(\"admin.status.pending\", \"待审核\"), className: \"text-amber-600\" };\r\n      case \"rejected\":\r\n        return { icon: XCircle, label: t(\"admin.status.rejected\", \"已拒绝\"), className: \"text-red-600\" };\r\n      case \"hidden\":\r\n        return { icon: EyeOff, label: t(\"admin.status.hidden\", \"已隐藏\"), className: \"text-gray-500\" };\r\n      default:\r\n        return { icon: AlertCircle, label: s, className: \"text-gray-500\" };\r\n    }\r\n  };\r\n\r\n  const getModerationConfig = (s: string) => {\r\n    switch (s) {\r\n      case \"approved\":\r\n        return { icon: Check, label: t(\"admin.moderation.approved\", \"通过\"), className: \"text-emerald-600\" };\r\n      case \"flagged\":\r\n        return { icon: AlertTriangle, label: t(\"admin.moderation.flagged\", \"标记\"), className: \"text-orange-500\" };\r\n      case \"pending\":\r\n        return { icon: Clock, label: t(\"admin.moderation.pending\", \"待审\"), className: \"text-gray-500\" };\r\n      default:\r\n        return { icon: AlertCircle, label: s, className: \"text-gray-500\" };\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\r\n        <DialogHeader className=\"pb-4 border-b\">\r\n          <DialogTitle className=\"text-xl\">{t(\"admin.communityPosts.manage\", \"管理帖子\")}</DialogTitle>\r\n        </DialogHeader>\r\n\r\n        <div className=\"space-y-6 py-4\">\r\n          {/* Author Info */}\r\n          <div className=\"flex items-center gap-4 p-4 bg-gradient-to-r from-muted/50 to-muted/30 rounded-xl\">\r\n            <Avatar className=\"h-14 w-14 ring-2 ring-background shadow-md\">\r\n              <AvatarImage src={post.author?.avatar_url || undefined} />\r\n              <AvatarFallback className=\"bg-primary/10 text-primary font-semibold text-lg\">\r\n                {post.author?.display_name?.charAt(0) || \"?\"}\r\n              </AvatarFallback>\r\n            </Avatar>\r\n            <div className=\"flex-1\">\r\n              <p className=\"font-semibold text-lg\">{post.author?.display_name}</p>\r\n              <p className=\"text-sm text-muted-foreground flex items-center gap-1.5\">\r\n                <Clock className=\"h-3.5 w-3.5\" />\r\n                {formatDistanceToNow(new Date(post.created_at), {\r\n                  addSuffix: true,\r\n                  locale: getDateLocale(),\r\n                })}\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Content Preview */}\r\n          <div className=\"space-y-2\">\r\n            <Label className=\"text-sm font-medium\">{t(\"admin.communityPosts.content\", \"内容\")}</Label>\r\n            <div\r\n              className=\"prose prose-sm max-w-none dark:prose-invert p-4 border rounded-xl bg-muted/20\"\r\n              dangerouslySetInnerHTML={{ __html: getLocalizedField(post, \"content\") }}\r\n            />\r\n          </div>\r\n\r\n          {/* Images Preview */}\r\n          {post.image_urls && post.image_urls.length > 0 && (\r\n            <div className=\"space-y-2\">\r\n              <Label className=\"text-sm font-medium\">{t(\"admin.communityPosts.images\", \"图片\")}</Label>\r\n              <div className=\"grid grid-cols-4 gap-2\">\r\n                {post.image_urls.map((url, index) => (\r\n                  <div \r\n                    key={index} \r\n                    className=\"aspect-square rounded-xl overflow-hidden border shadow-sm hover:shadow-md transition-shadow\"\r\n                  >\r\n                    <img src={url} alt=\"\" className=\"w-full h-full object-cover\" />\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Video Preview */}\r\n          {post.video_url && (\r\n            <div className=\"space-y-2\">\r\n              <Label className=\"text-sm font-medium\">{t(\"admin.communityPosts.video\", \"视频\")}</Label>\r\n              <video\r\n                src={post.video_url}\r\n                controls\r\n                className=\"w-full max-h-48 rounded-xl border shadow-sm\"\r\n                preload=\"metadata\"\r\n              />\r\n            </div>\r\n          )}\r\n\r\n          {/* Stats */}\r\n          <div className=\"flex items-center gap-3 p-3 bg-muted/30 rounded-xl\">\r\n            <div className=\"flex items-center gap-1.5 px-3 py-1.5 bg-background rounded-lg shadow-sm\">\r\n              <Heart className=\"h-4 w-4 text-red-500\" />\r\n              <span className=\"font-medium\">{post.likes_count}</span>\r\n              <span className=\"text-xs text-muted-foreground\">{t(\"community.likes\", \"赞\")}</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-1.5 px-3 py-1.5 bg-background rounded-lg shadow-sm\">\r\n              <MessageCircle className=\"h-4 w-4 text-blue-500\" />\r\n              <span className=\"font-medium\">{post.comments_count}</span>\r\n              <span className=\"text-xs text-muted-foreground\">{t(\"community.comments\", \"评论\")}</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-1.5 px-3 py-1.5 bg-background rounded-lg shadow-sm\">\r\n              <Share2 className=\"h-4 w-4 text-green-500\" />\r\n              <span className=\"font-medium\">{post.shares_count}</span>\r\n              <span className=\"text-xs text-muted-foreground\">{t(\"community.shares\", \"分享\")}</span>\r\n            </div>\r\n          </div>\r\n\r\n          {/* AI Review Results */}\r\n          {(post.risk_score !== null || post.ai_reviewed_at) && (\r\n            <div className=\"space-y-3 p-4 bg-muted/30 rounded-xl border border-border/50\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <Label className=\"text-sm font-medium flex items-center gap-2\">\r\n                  <Bot className=\"h-4 w-4\" />\r\n                  {t(\"admin.moderation.aiResult\", \"AI审核结果\")}\r\n                </Label>\r\n                <Button\r\n                  size=\"sm\"\r\n                  variant=\"ghost\"\r\n                  onClick={handleReReview}\r\n                  disabled={isReReviewing}\r\n                  className=\"h-7 text-xs\"\r\n                >\r\n                  <RefreshCw className={cn(\"h-3.5 w-3.5 mr-1\", isReReviewing && \"animate-spin\")} />\r\n                  {t(\"admin.moderation.reReview\", \"重审\")}\r\n                </Button>\r\n              </div>\r\n\r\n              <div className=\"flex items-center gap-3\">\r\n                <Badge className={cn(\"text-sm\", getRiskColor(post.risk_score))}>\r\n                  <ShieldAlert className=\"h-3.5 w-3.5 mr-1\" />\r\n                  {t(\"admin.moderation.riskScore\", \"风险分数\")}: {post.risk_score ?? \"-\"}\r\n                </Badge>\r\n                {post.ai_reviewed_at && (\r\n                  <span className=\"text-xs text-muted-foreground\">\r\n                    {formatDistanceToNow(new Date(post.ai_reviewed_at), {\r\n                      addSuffix: true,\r\n                      locale: getDateLocale(),\r\n                    })}\r\n                  </span>\r\n                )}\r\n              </div>\r\n\r\n              {post.risk_reasons && post.risk_reasons.length > 0 && (\r\n                <div className=\"flex flex-wrap gap-1.5\">\r\n                  {post.risk_reasons.map((reason, index) => (\r\n                    <Badge key={index} variant=\"outline\" className=\"text-xs\">\r\n                      {reason}\r\n                    </Badge>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          <Separator />\r\n\r\n          {/* Settings Grid */}\r\n          <div className=\"grid gap-4 sm:grid-cols-2\">\r\n            {/* Weight */}\r\n            <div className=\"space-y-2\">\r\n              <Label className=\"text-sm font-medium flex items-center gap-2\">\r\n                <Weight className=\"h-4 w-4\" />\r\n                {t(\"admin.communityPosts.weight\", \"权重\")}\r\n              </Label>\r\n              <Input\r\n                type=\"number\"\r\n                value={weight}\r\n                onChange={(e) => setWeight(parseInt(e.target.value) || 0)}\r\n                min={0}\r\n                max={1000}\r\n                className=\"h-10\"\r\n              />\r\n              <p className=\"text-xs text-muted-foreground\">\r\n                {t(\"admin.communityPosts.weightHint\", \"权重越高，帖子排序越靠前\")}\r\n              </p>\r\n            </div>\r\n\r\n            {/* Activity Link */}\r\n            <div className=\"space-y-2\">\r\n              <Label className=\"text-sm font-medium flex items-center gap-2\">\r\n                <Calendar className=\"h-4 w-4\" />\r\n                {t(\"admin.communityPosts.linkActivity\", \"关联活动\")}\r\n              </Label>\r\n              <Select value={activityId || \"none\"} onValueChange={(val) => setActivityId(val === \"none\" ? \"\" : val)}>\r\n                <SelectTrigger className=\"h-10\">\r\n                  <SelectValue placeholder={t(\"community.selectActivity\", \"选择活动（可选）\")} />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  <SelectItem value=\"none\">\r\n                    {t(\"community.noActivity\", \"不关联活动\")}\r\n                  </SelectItem>\r\n                  {activeActivities.map((activity) => (\r\n                    <SelectItem key={activity.id} value={activity.id}>\r\n                      {getLocalizedField(activity, \"title\")}\r\n                    </SelectItem>\r\n                  ))}\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n\r\n            {/* Status */}\r\n            <div className=\"space-y-2\">\r\n              <Label className=\"text-sm font-medium\">{t(\"admin.communityPosts.status\", \"状态\")}</Label>\r\n              <Select value={status} onValueChange={setStatus}>\r\n                <SelectTrigger className=\"h-10\">\r\n                  <SelectValue />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  {[\"approved\", \"pending\", \"hidden\", \"rejected\"].map((s) => {\r\n                    const config = getStatusConfig(s);\r\n                    const Icon = config.icon;\r\n                    return (\r\n                      <SelectItem key={s} value={s}>\r\n                        <span className={cn(\"flex items-center gap-2\", config.className)}>\r\n                          <Icon className=\"h-4 w-4\" />\r\n                          {config.label}\r\n                        </span>\r\n                      </SelectItem>\r\n                    );\r\n                  })}\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n\r\n            {/* Moderation Status */}\r\n            <div className=\"space-y-2\">\r\n              <Label className=\"text-sm font-medium\">{t(\"admin.communityPosts.moderation\", \"审核状态\")}</Label>\r\n              <Select value={moderationStatus} onValueChange={setModerationStatus}>\r\n                <SelectTrigger className=\"h-10\">\r\n                  <SelectValue />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  {[\"pending\", \"approved\", \"flagged\"].map((s) => {\r\n                    const config = getModerationConfig(s);\r\n                    const Icon = config.icon;\r\n                    return (\r\n                      <SelectItem key={s} value={s}>\r\n                        <span className={cn(\"flex items-center gap-2\", config.className)}>\r\n                          <Icon className=\"h-4 w-4\" />\r\n                          {config.label}\r\n                        </span>\r\n                      </SelectItem>\r\n                    );\r\n                  })}\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Actions */}\r\n        <div className=\"flex justify-end gap-3 pt-4 border-t\">\r\n          <Button variant=\"outline\" onClick={() => onOpenChange(false)} className=\"px-6\">\r\n            {t(\"common.cancel\", \"取消\")}\r\n          </Button>\r\n          <Button onClick={handleSave} disabled={updatePost.isPending} className=\"px-6\">\r\n            {updatePost.isPending && <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />}\r\n            {t(\"common.save\", \"保存\")}\r\n          </Button>\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default PostManagementDialog;\r\n"],"names":["PostManagementDialog","post","open","onOpenChange","i18n","useTranslation","getLocalizedField","useLocalizedContent","updatePost","useUpdatePost","activities","useActivities","queryClient","useQueryClient","weight","setWeight","useState","status","setStatus","moderationStatus","setModerationStatus","activityId","setActivityId","isReReviewing","setIsReReviewing","useEffect","getRiskColor","score","handleReReview","error","supabase","toast","err","getDateLocale","zhCN","pt","enUS","handleSave","activeActivities","getStatusConfig","s","CheckCircle2","Clock","XCircle","EyeOff","AlertCircle","getModerationConfig","Check","AlertTriangle","Dialog","jsxs","DialogContent","jsx","DialogHeader","DialogTitle","Avatar","AvatarImage","AvatarFallback","formatDistanceToNow","Label","url","index","Heart","MessageCircle","Share2","Bot","Button","RefreshCw","cn","Badge","ShieldAlert","reason","Separator","Weight","Input","e","Calendar","Select","val","SelectTrigger","SelectValue","SelectContent","SelectItem","activity","config","Icon","Loader2"],"mappings":"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"}