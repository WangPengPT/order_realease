import{u as te,r as b,j as e,O as S,B as j,C as f,f as N,Q as ie,at as re,R as le,T as ne,U as oe,V as ce,W as de,Y as me,Z as he,D as pe,v as ue,a6 as xe,a7 as ge,a8 as ve,a9 as r,I as c,ah as je,ai as _e,aj as ye,ak as be,al as y,am as U,e as L,p as O,A as g}from"./index-DjxB8hoH.js";import{S as $}from"./slider-BKJXByXM.js";import{T as fe,a as Ne,b as w,c as C}from"./tabs-CPsYcXOy.js";import{a as Te,b as we,c as Ce,d as ke,e as De,f as Fe}from"./useHomepageTemplates-DzISN05e.js";import{P as Ae}from"./plus-2jEbxMCs.js";import{G as Ee}from"./grip-vertical-D8XD4F19.js";import{C as Ie}from"./clock-BQoUQVhd.js";import{E as ze}from"./eye-jy74Z629.js";import{E as Re}from"./eye-off-BZRI7c5Y.js";import{S as Se}from"./square-pen-BQKzteVY.js";import{T as Ue}from"./trash-2-Bu1Jz7_5.js";import{S as Le}from"./save-C-iPdE9a.js";import{I as Oe}from"./image-BGTaByjZ.js";import{V as He}from"./video-C3HWMC9A.js";import{R as Be}from"./refresh-cw-CC4JaQgs.js";const sa=()=>{const{t:s}=te(),{data:_,isLoading:V}=Te(),k=we(),T=Ce(),W=ke(),D=De(),M=Fe(),[p,F]=b.useState(null),[G,A]=b.useState(!1),[t,v]=b.useState({}),[Y,E]=b.useState("images"),q=()=>{v({sort_order:(_==null?void 0:_.length)||0,is_active:!0,media_type:"image",duration:5e3,overlay_opacity:40,overlay_gradient_direction:"to-b",overlay_gradient_from:"background",overlay_gradient_from_opacity:30,overlay_gradient_via:"background",overlay_gradient_via_opacity:25,overlay_gradient_to:"background",overlay_gradient_to_opacity:40,background_blur:0,title_zh:"发现您的亚洲美食之旅",title_en:"Discover Your Asian Food Journey",title_pt:"Descubra Sua Jornada Gastronômica Asiática",subtitle_zh:"您的美食之旅从这里开始",subtitle_en:"Your culinary journey starts here",subtitle_pt:"Sua jornada culinária começa aqui",description_zh:"探索里斯本地区最好的亚洲美食",description_en:"Explore the best Asian cuisine in the Lisbon area",description_pt:"Explore a melhor cozinha asiática na área de Lisboa",primary_button_text_zh:"探索餐厅",primary_button_text_en:"Explore Restaurants",primary_button_text_pt:"Explorar Restaurantes",primary_button_link:"/restaurants",primary_button_variant:"default",secondary_button_text_zh:"活动",secondary_button_text_en:"Activities",secondary_button_text_pt:"Atividades",secondary_button_link:"/activities",secondary_button_variant:"outline"}),A(!0),E("media")},J=a=>{v(a),F(a),E("media")},Q=async()=>{try{p?(await T.mutateAsync({id:p.id,...t}),F(null)):(await k.mutateAsync(t),A(!1)),v({})}catch(a){console.error("Save failed:",a)}},Z=async a=>{try{await W.mutateAsync(a)}catch(d){console.error("Delete failed:",d)}},K=async a=>{try{await T.mutateAsync({id:a.id,is_active:!a.is_active})}catch(d){console.error("Toggle failed:",d)}},I=async(a,d)=>{var i;const o=(i=a.target.files)==null?void 0:i[0];if(o){if(!o.type.startsWith("image/")){g.error(s("admin.homepageTemplates.selectImageFile"));return}try{const l=(p==null?void 0:p.id)||"new",u=await D.mutateAsync({file:o,type:d,templateId:l});v(m=>({...m,[`${d}_image_url`]:u.url}))}catch(l){console.error("Upload failed:",l)}}},X=a=>new Promise((d,o)=>{const i=document.createElement("video"),l=document.createElement("canvas"),u=l.getContext("2d");i.preload="auto",i.muted=!0,i.playsInline=!0,i.crossOrigin="anonymous";let m=!1;const x=()=>{m||i.videoWidth===0||i.videoHeight===0||(l.width=i.videoWidth,l.height=i.videoHeight,u?(u.drawImage(i,0,0,l.width,l.height),l.toBlob(h=>{h&&h.size>0?(m=!0,i.pause(),URL.revokeObjectURL(i.src),d(h)):o(new Error("Failed to create blob from canvas"))},"image/jpeg",.95)):o(new Error("Failed to get canvas context")))};i.onloadedmetadata=()=>{l.width=i.videoWidth,l.height=i.videoHeight,i.currentTime=.1},i.onseeked=()=>{setTimeout(x,100)},i.oncanplay=()=>{!m&&i.currentTime>=.1&&setTimeout(x,100)},i.onerror=h=>{URL.revokeObjectURL(i.src),o(new Error("Failed to load video: "+(h==null?void 0:h.message)||"Unknown error"))},setTimeout(()=>{m||(URL.revokeObjectURL(i.src),o(new Error("Timeout while extracting video frame")))},1e4),i.src=URL.createObjectURL(a),i.load()}),ee=a=>new Promise((d,o)=>{const i=document.createElement("video"),l=document.createElement("canvas"),u=l.getContext("2d");i.preload="auto",i.muted=!0,i.playsInline=!0,i.crossOrigin="anonymous";let m=!1;const x=()=>{m||i.videoWidth===0||i.videoHeight===0||(l.width=i.videoWidth,l.height=i.videoHeight,u?(u.drawImage(i,0,0,l.width,l.height),l.toBlob(h=>{h&&h.size>0?(m=!0,i.pause(),d(h)):o(new Error("Failed to create blob from canvas"))},"image/jpeg",.95)):o(new Error("Failed to get canvas context")))};i.onloadedmetadata=()=>{l.width=i.videoWidth,l.height=i.videoHeight,i.currentTime=.1},i.onseeked=()=>{setTimeout(x,100)},i.oncanplay=()=>{!m&&i.currentTime>=.1&&setTimeout(x,100)},i.onerror=()=>{o(new Error("Failed to load video from URL"))},setTimeout(()=>{m||o(new Error("Timeout while extracting video frame from URL"))},15e3),i.src=a,i.load()}),[H,B]=b.useState(!1),ae=async()=>{const a=["desktop","tablet","mobile"],d=(p==null?void 0:p.id)||"new";B(!0);let o=0,i=0;for(const l of a){const u=t[`${l}_video_url`];if(u)try{g.info(`正在提取${l==="desktop"?"桌面端":l==="tablet"?"平板端":"移动端"}视频第一帧...`);const m=await ee(u),x=new File([m],`${l}-poster-${Date.now()}.jpg`,{type:"image/jpeg"}),h=await D.mutateAsync({file:x,type:l,templateId:d});v(R=>({...R,[`${l}_image_url`]:h.url})),o++}catch(m){console.error(`Failed to regenerate ${l} poster:`,m),i++}}B(!1),o>0&&g.success(`成功重新生成 ${o} 个备用图片`),i>0&&g.warning(`${i} 个视频提取失败，可能是跨域限制`),o===0&&i===0&&g.info("没有找到需要处理的视频")},z=async(a,d)=>{var i;const o=(i=a.target.files)==null?void 0:i[0];if(o){if(!o.type.startsWith("video/")){g.error("请选择视频文件");return}if(o.size>100*1024*1024){g.error("视频文件大小不能超过100MB");return}try{const l=(p==null?void 0:p.id)||"new",u=await M.mutateAsync({file:o,type:d,templateId:l});try{g.info("正在提取视频第一帧作为备用图片...");const m=await X(o),x=new File([m],`${d}-poster-${Date.now()}.jpg`,{type:"image/jpeg"}),h=await D.mutateAsync({file:x,type:d,templateId:l});v(R=>({...R,[`${d}_video_url`]:u.url,[`${d}_image_url`]:h.url})),g.success("视频和备用图片已自动生成")}catch(m){console.error("Failed to extract first frame:",m),v(x=>({...x,[`${d}_video_url`]:u.url})),g.warning("视频已上传，但无法自动提取第一帧，请手动上传备用图片")}}catch(l){console.error("Upload failed:",l)}}},n=(a,d)=>{v(o=>({...o,[a]:d}))},P=()=>{F(null),A(!1),v({})};if(V)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(S,{className:"w-8 h-8 animate-spin"})});const se=()=>e.jsxs(fe,{value:Y,onValueChange:E,className:"w-full",children:[e.jsxs(Ne,{className:"grid w-full grid-cols-4",children:[e.jsx(w,{value:"media",children:"媒体"}),e.jsx(w,{value:"overlay",children:s("admin.homepageTemplates.tabs.overlay")}),e.jsx(w,{value:"content",children:s("admin.homepageTemplates.tabs.content")}),e.jsx(w,{value:"buttons",children:s("admin.homepageTemplates.tabs.buttons")})]}),e.jsxs(C,{value:"media",className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"媒体类型"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(j,{type:"button",variant:t.media_type==="image"?"default":"outline",onClick:()=>n("media_type","image"),className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4"}),"图片"]}),e.jsxs(j,{type:"button",variant:t.media_type==="video"?"default":"outline",onClick:()=>n("media_type","video"),className:"flex items-center gap-2",children:[e.jsx(He,{className:"w-4 h-4"}),"视频"]})]})]}),t.media_type==="image"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:s("admin.homepageTemplates.desktopImage")}),e.jsxs("div",{className:"flex items-center gap-4",children:[t.desktop_image_url&&e.jsx("img",{src:t.desktop_image_url,alt:"Desktop",className:"w-32 h-20 object-cover rounded border"}),e.jsx(c,{type:"file",accept:"image/*",onChange:a=>I(a,"desktop")})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:s("admin.homepageTemplates.tabletImage")}),e.jsxs("div",{className:"flex items-center gap-4",children:[t.tablet_image_url&&e.jsx("img",{src:t.tablet_image_url,alt:"Tablet",className:"w-32 h-20 object-cover rounded border"}),e.jsx(c,{type:"file",accept:"image/*",onChange:a=>I(a,"tablet")})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:s("admin.homepageTemplates.mobileImage")}),e.jsxs("div",{className:"flex items-center gap-4",children:[t.mobile_image_url&&e.jsx("img",{src:t.mobile_image_url,alt:"Mobile",className:"w-32 h-20 object-cover rounded border"}),e.jsx(c,{type:"file",accept:"image/*",onChange:a=>I(a,"mobile")})]})]})]})}),t.media_type==="video"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"支持 MP4, WebM 格式，建议大小不超过100MB"}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"桌面端视频"}),e.jsxs("div",{className:"flex items-center gap-4",children:[t.desktop_video_url&&e.jsx("video",{src:t.desktop_video_url,className:"w-32 h-20 object-cover rounded border",muted:!0}),e.jsx(c,{type:"file",accept:"video/mp4,video/webm",onChange:a=>z(a,"desktop")})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"平板端视频"}),e.jsxs("div",{className:"flex items-center gap-4",children:[t.tablet_video_url&&e.jsx("video",{src:t.tablet_video_url,className:"w-32 h-20 object-cover rounded border",muted:!0}),e.jsx(c,{type:"file",accept:"video/mp4,video/webm",onChange:a=>z(a,"tablet")})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"移动端视频"}),e.jsxs("div",{className:"flex items-center gap-4",children:[t.mobile_video_url&&e.jsx("video",{src:t.mobile_video_url,className:"w-32 h-20 object-cover rounded border",muted:!0}),e.jsx(c,{type:"file",accept:"video/mp4,video/webm",onChange:a=>z(a,"mobile")})]})]})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium",children:"备用图片（自动从视频第一帧生成）"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"上传视频时会自动截取第一帧作为备用图片"})]}),(t.desktop_video_url||t.tablet_video_url||t.mobile_video_url)&&e.jsxs(j,{type:"button",variant:"outline",size:"sm",onClick:ae,disabled:H,children:[H?e.jsx(S,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(Be,{className:"w-4 h-4 mr-2"}),"重新生成第一帧"]})]}),t.desktop_image_url||t.tablet_image_url||t.mobile_image_url?e.jsxs("div",{className:"flex gap-4 mt-2",children:[t.desktop_image_url&&e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{className:"text-xs text-muted-foreground",children:"桌面端"}),e.jsx("img",{src:t.desktop_image_url,alt:"Desktop poster",className:"w-32 h-20 object-cover rounded border"})]}),t.tablet_image_url&&e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{className:"text-xs text-muted-foreground",children:"平板端"}),e.jsx("img",{src:t.tablet_image_url,alt:"Tablet poster",className:"w-32 h-20 object-cover rounded border"})]}),t.mobile_image_url&&e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{className:"text-xs text-muted-foreground",children:"移动端"}),e.jsx("img",{src:t.mobile_image_url,alt:"Mobile poster",className:"w-32 h-20 object-cover rounded border"})]})]}):e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:'暂无备用图片，请点击"重新生成第一帧"按钮'})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:s("admin.homepageTemplates.duration")}),e.jsx(c,{type:"number",value:t.duration||5e3,onChange:a=>n("duration",parseInt(a.target.value)||5e3),min:1e3,max:3e4}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s("admin.homepageTemplates.durationHint")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:s("admin.homepageTemplates.sortOrder")}),e.jsx(c,{type:"number",value:t.sort_order||0,onChange:a=>n("sort_order",parseInt(a.target.value)||0)})]})]})]}),e.jsx(C,{value:"overlay",className:"space-y-4 mt-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{children:[s("admin.homepageTemplates.baseOverlayOpacity"),": ",t.overlay_opacity||40,"%"]}),e.jsx($,{value:[t.overlay_opacity||40],onValueChange:([a])=>n("overlay_opacity",a),max:100,step:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:s("admin.homepageTemplates.gradientDirection")}),e.jsxs(je,{value:t.overlay_gradient_direction||"to-b",onValueChange:a=>n("overlay_gradient_direction",a),children:[e.jsx(_e,{children:e.jsx(ye,{})}),e.jsxs(be,{children:[e.jsx(y,{value:"to-b",children:s("admin.homepageTemplates.gradientDirection.toBottom")}),e.jsx(y,{value:"to-t",children:s("admin.homepageTemplates.gradientDirection.toTop")}),e.jsx(y,{value:"to-r",children:s("admin.homepageTemplates.gradientDirection.toRight")}),e.jsx(y,{value:"to-l",children:s("admin.homepageTemplates.gradientDirection.toLeft")}),e.jsx(y,{value:"to-br",children:s("admin.homepageTemplates.gradientDirection.toBottomRight")}),e.jsx(y,{value:"to-tr",children:s("admin.homepageTemplates.gradientDirection.toTopRight")})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:s("admin.homepageTemplates.startOpacity")}),e.jsx(c,{type:"number",min:"0",max:"100",value:t.overlay_gradient_from_opacity||30,onChange:a=>n("overlay_gradient_from_opacity",parseInt(a.target.value)||0)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:s("admin.homepageTemplates.middleOpacity")}),e.jsx(c,{type:"number",min:"0",max:"100",value:t.overlay_gradient_via_opacity||25,onChange:a=>n("overlay_gradient_via_opacity",parseInt(a.target.value)||0)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:s("admin.homepageTemplates.endOpacity")}),e.jsx(c,{type:"number",min:"0",max:"100",value:t.overlay_gradient_to_opacity||40,onChange:a=>n("overlay_gradient_to_opacity",parseInt(a.target.value)||0)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{children:[s("admin.homepageTemplates.backgroundBlur"),": ",t.background_blur||0,"px"]}),e.jsx($,{value:[t.background_blur||0],onValueChange:([a])=>n("background_blur",a),max:50,step:1})]})]})}),e.jsx(C,{value:"content",className:"space-y-4 mt-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:s("admin.homepageTemplates.titleChinese")}),e.jsx(c,{value:t.title_zh||"",onChange:a=>n("title_zh",a.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:s("admin.homepageTemplates.titleEnglish")}),e.jsx(c,{value:t.title_en||"",onChange:a=>n("title_en",a.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:s("admin.homepageTemplates.titlePortuguese")}),e.jsx(c,{value:t.title_pt||"",onChange:a=>n("title_pt",a.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:s("admin.homepageTemplates.descriptionChinese")}),e.jsx(U,{value:t.description_zh||"",onChange:a=>n("description_zh",a.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:s("admin.homepageTemplates.descriptionEnglish")}),e.jsx(U,{value:t.description_en||"",onChange:a=>n("description_en",a.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:s("admin.homepageTemplates.descriptionPortuguese")}),e.jsx(U,{value:t.description_pt||"",onChange:a=>n("description_pt",a.target.value)})]})]})}),e.jsxs(C,{value:"buttons",className:"space-y-4 mt-4",children:[e.jsxs(f,{children:[e.jsx(L,{className:"py-3",children:e.jsx(O,{className:"text-lg",children:s("admin.homepageTemplates.primaryButton")})}),e.jsxs(N,{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:s("admin.homepageTemplates.chinese")}),e.jsx(c,{value:t.primary_button_text_zh||"",onChange:a=>n("primary_button_text_zh",a.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:s("admin.homepageTemplates.english")}),e.jsx(c,{value:t.primary_button_text_en||"",onChange:a=>n("primary_button_text_en",a.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:s("admin.homepageTemplates.portuguese")}),e.jsx(c,{value:t.primary_button_text_pt||"",onChange:a=>n("primary_button_text_pt",a.target.value)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:s("admin.homepageTemplates.link")}),e.jsx(c,{value:t.primary_button_link||"",onChange:a=>n("primary_button_link",a.target.value)})]})]})]}),e.jsxs(f,{children:[e.jsx(L,{className:"py-3",children:e.jsx(O,{className:"text-lg",children:s("admin.homepageTemplates.secondaryButton")})}),e.jsxs(N,{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:s("admin.homepageTemplates.chinese")}),e.jsx(c,{value:t.secondary_button_text_zh||"",onChange:a=>n("secondary_button_text_zh",a.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:s("admin.homepageTemplates.english")}),e.jsx(c,{value:t.secondary_button_text_en||"",onChange:a=>n("secondary_button_text_en",a.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:s("admin.homepageTemplates.portuguese")}),e.jsx(c,{value:t.secondary_button_text_pt||"",onChange:a=>n("secondary_button_text_pt",a.target.value)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:s("admin.homepageTemplates.link")}),e.jsx(c,{value:t.secondary_button_link||"",onChange:a=>n("secondary_button_link",a.target.value)})]})]})]}),e.jsxs(f,{children:[e.jsx(L,{className:"py-3",children:e.jsx(O,{className:"text-lg",children:s("admin.homepageTemplates.subtitleButton")})}),e.jsxs(N,{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:s("admin.homepageTemplates.chinese")}),e.jsx(c,{value:t.subtitle_button_text_zh||"",onChange:a=>n("subtitle_button_text_zh",a.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:s("admin.homepageTemplates.english")}),e.jsx(c,{value:t.subtitle_button_text_en||"",onChange:a=>n("subtitle_button_text_en",a.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:s("admin.homepageTemplates.portuguese")}),e.jsx(c,{value:t.subtitle_button_text_pt||"",onChange:a=>n("subtitle_button_text_pt",a.target.value)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:s("admin.homepageTemplates.link")}),e.jsx(c,{value:t.subtitle_button_link||"",onChange:a=>n("subtitle_button_link",a.target.value)})]})]})]})]})]});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:s("admin.homepageTemplates")}),e.jsx("p",{className:"text-muted-foreground mt-2",children:s("admin.homepageTemplatesDescription")})]}),e.jsxs(j,{onClick:q,children:[e.jsx(Ae,{className:"w-4 h-4 mr-2"}),s("admin.homepageTemplates.createTemplate")]})]}),e.jsxs("div",{className:"grid gap-4",children:[_==null?void 0:_.map(a=>e.jsx(f,{className:a.is_active?"":"opacity-60",children:e.jsx(N,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(Ee,{className:"w-5 h-5"}),e.jsxs("span",{className:"text-sm font-medium",children:["#",a.sort_order]})]}),a.desktop_image_url&&e.jsx("img",{src:a.desktop_image_url,alt:"Preview",className:"w-24 h-16 object-cover rounded border"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold truncate",children:a.title_zh}),e.jsx("p",{className:"text-sm text-muted-foreground truncate",children:a.description_zh}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(Ie,{className:"w-3 h-3 text-muted-foreground"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[a.duration/1e3,s("admin.homepageTemplates.seconds")]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{variant:"ghost",size:"icon",onClick:()=>K(a),title:a.is_active?s("admin.homepageTemplates.hide"):s("admin.homepageTemplates.show"),children:a.is_active?e.jsx(ze,{className:"w-4 h-4"}):e.jsx(Re,{className:"w-4 h-4"})}),e.jsx(j,{variant:"ghost",size:"icon",onClick:()=>J(a),children:e.jsx(Se,{className:"w-4 h-4"})}),e.jsxs(ie,{children:[e.jsx(re,{asChild:!0,children:e.jsx(j,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive",children:e.jsx(Ue,{className:"w-4 h-4"})})}),e.jsxs(le,{children:[e.jsxs(ne,{children:[e.jsx(oe,{children:s("admin.confirmDelete")}),e.jsx(ce,{children:s("admin.homepageTemplates.deleteTemplateConfirm")})]}),e.jsxs(de,{children:[e.jsx(me,{children:s("common.cancel")}),e.jsx(he,{onClick:()=>Z(a.id),children:s("common.delete")})]})]})]})]})]})})},a.id)),(!_||_.length===0)&&e.jsx(f,{children:e.jsx(N,{className:"p-8 text-center text-muted-foreground",children:s("admin.homepageTemplates.noTemplates")})})]}),e.jsx(pe,{open:!!p||G,onOpenChange:P,children:e.jsxs(ue,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(xe,{children:[e.jsx(ge,{children:s(p?"admin.homepageTemplates.editTemplate":"admin.homepageTemplates.createTemplate")}),e.jsx(ve,{children:s("admin.homepageTemplates.configureTemplate")})]}),se(),e.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[e.jsx(j,{variant:"outline",onClick:P,children:s("common.cancel")}),e.jsxs(j,{onClick:Q,disabled:k.isPending||T.isPending,children:[(k.isPending||T.isPending)&&e.jsx(S,{className:"w-4 h-4 mr-2 animate-spin"}),e.jsx(Le,{className:"w-4 h-4 mr-2"}),s("common.save")]})]})]})})]})};export{sa as default};
