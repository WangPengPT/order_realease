import{j as i}from"./vendor-ui-BO6fjm1h.js";import{r as s}from"./vendor-react-CrHRjzzo.js";import{f as h,bf as R}from"./index-BjZfkycM.js";function j({onRefresh:c,threshold:r=80,maxPull:l=120}){const[n,a]=s.useState(!1),[t,u]=s.useState(!1),[f,o]=s.useState(0),x=s.useRef(0),b=s.useRef(0),g=s.useRef(null),m=s.useCallback(e=>{(window.scrollY||document.documentElement.scrollTop)>5||(x.current=e.touches[0].clientY,a(!0))},[]),p=s.useCallback(e=>{if(!n||t)return;b.current=e.touches[0].clientY;const d=b.current-x.current;if(d<0){o(0);return}d>10&&e.preventDefault();const E=Math.min(d*.5,l);o(E)},[n,t,l]),v=s.useCallback(async()=>{if(n)if(a(!1),f>=r&&!t){u(!0),o(r);try{await c()}finally{u(!1),o(0)}}else o(0)},[n,f,r,t,c]);s.useEffect(()=>{const e=g.current;if(e)return e.addEventListener("touchstart",m,{passive:!0}),e.addEventListener("touchmove",p,{passive:!1}),e.addEventListener("touchend",v,{passive:!0}),()=>{e.removeEventListener("touchstart",m),e.removeEventListener("touchmove",p),e.removeEventListener("touchend",v)}},[m,p,v]);const y=Math.min(f/r,1);return{containerRef:g,isPulling:n,isRefreshing:t,pullDistance:f,progress:y}}function Y({children:c,onRefresh:r,className:l}){const{containerRef:n,isRefreshing:a,pullDistance:t,progress:u}=j({onRefresh:r,threshold:80,maxPull:120});return i.jsxs("div",{ref:n,className:h("relative",l),children:[i.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 z-50 flex items-center justify-center transition-opacity duration-200 pointer-events-none",style:{top:Math.max(t-50,8),opacity:t>20?1:0},children:i.jsx("div",{className:h("w-10 h-10 rounded-full bg-background/90 backdrop-blur-sm shadow-lg flex items-center justify-center border border-border/50",a&&"animate-pulse"),children:i.jsx(R,{className:h("w-5 h-5 text-primary transition-transform duration-200",a&&"animate-spin"),style:{transform:a?void 0:`rotate(${u*360}deg)`}})})}),i.jsx("div",{style:{transform:t>0?`translateY(${t}px)`:void 0,transition:t===0?"transform 0.3s ease-out":void 0},children:c})]})}export{Y as P};
//# sourceMappingURL=PullToRefresh-Yy3_vyyl.js.map
