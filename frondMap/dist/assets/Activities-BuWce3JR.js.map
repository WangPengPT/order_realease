{"version":3,"file":"Activities-BuWce3JR.js","sources":["../../src/components/skeletons/ActivityListSkeleton.tsx","../../src/components/ActivityFavoriteButton.tsx","../../src/pages/Activities.tsx"],"sourcesContent":["import { Skeleton } from \"@/components/ui/skeleton\";\r\n\r\ninterface ActivityListSkeletonProps {\r\n  count?: number;\r\n}\r\n\r\nconst ActivityListSkeleton = ({ count = 4 }: ActivityListSkeletonProps) => {\r\n  return (\r\n    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6\">\r\n      {Array.from({ length: count }).map((_, i) => (\r\n        <div key={i} className=\"rounded-lg border border-border overflow-hidden bg-card\">\r\n          {/* Image skeleton with badge */}\r\n          <div className=\"relative\">\r\n            <Skeleton className=\"w-full h-48 sm:h-56 rounded-none\" />\r\n            <Skeleton className=\"absolute top-3 left-3 h-6 w-20 rounded-full\" />\r\n          </div>\r\n          \r\n          {/* Content */}\r\n          <div className=\"p-4 sm:p-5\">\r\n            {/* Title */}\r\n            <Skeleton className=\"h-7 w-3/4 mb-2\" />\r\n            \r\n            {/* Date range */}\r\n            <Skeleton className=\"h-4 w-48 mb-3\" />\r\n            \r\n            {/* Description */}\r\n            <Skeleton className=\"h-4 w-full mb-1\" />\r\n            <Skeleton className=\"h-4 w-5/6 mb-4\" />\r\n            \r\n            {/* Stats row */}\r\n            <div className=\"flex items-center gap-4 mb-4\">\r\n              <Skeleton className=\"h-5 w-24\" />\r\n              <Skeleton className=\"h-5 w-20\" />\r\n            </div>\r\n            \r\n            {/* Actions */}\r\n            <div className=\"flex gap-2\">\r\n              <Skeleton className=\"h-9 flex-1 rounded-md\" />\r\n              <Skeleton className=\"h-9 w-9 rounded-md\" />\r\n              <Skeleton className=\"h-9 w-9 rounded-md\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ActivityListSkeleton;\r\n","import { useState, useEffect } from \"react\";\r\nimport { Heart } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { useAuth } from \"@/contexts/AuthContext\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport i18n from \"@/i18n/config\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\ninterface ActivityFavoriteButtonProps {\r\n  activityId: string;\r\n  initialSubscribed?: boolean;\r\n}\r\n\r\nexport const ActivityFavoriteButton = ({ \r\n  activityId, \r\n  initialSubscribed = false \r\n}: ActivityFavoriteButtonProps) => {\r\n  const { t } = useTranslation();\r\n  const { user } = useAuth();\r\n  const { toast } = useToast();\r\n  const [isSubscribed, setIsSubscribed] = useState(initialSubscribed);\r\n  const [isPending, setIsPending] = useState(false);\r\n\r\n  // Sync with initial value when it changes\r\n  useEffect(() => {\r\n    setIsSubscribed(initialSubscribed);\r\n  }, [initialSubscribed]);\r\n\r\n  const handleToggle = async (e: React.MouseEvent) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n\r\n    if (!user) {\r\n      toast({\r\n        title: t(\"activities.signInToSubscribe\") || \"请先登录\",\r\n        description: t(\"activities.signInToSubscribeDesc\") || \"您需要登录才能订阅活动\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    setIsPending(true);\r\n    \r\n    // Optimistic update\r\n    const wasSubscribed = isSubscribed;\r\n    setIsSubscribed(!wasSubscribed);\r\n\r\n    try {\r\n      if (wasSubscribed) {\r\n        const { error } = await supabase\r\n          .from(\"subscriptions\")\r\n          .delete()\r\n          .eq(\"activity_id\", activityId)\r\n          .eq(\"user_id\", user.id);\r\n\r\n        if (error) throw error;\r\n        \r\n        toast({\r\n          title: i18n.t(\"toast.unsubscribed\"),\r\n          description: i18n.t(\"toast.unsubscribedDesc\"),\r\n        });\r\n      } else {\r\n        const { error } = await supabase\r\n          .from(\"subscriptions\")\r\n          .insert({\r\n            activity_id: activityId,\r\n            user_id: user.id,\r\n          });\r\n\r\n        if (error) throw error;\r\n        \r\n        toast({\r\n          title: i18n.t(\"toast.subscribed\"),\r\n          description: i18n.t(\"toast.subscribedDesc\"),\r\n        });\r\n      }\r\n    } catch (error) {\r\n      // Rollback on error\r\n      setIsSubscribed(wasSubscribed);\r\n      toast({\r\n        title: i18n.t(\"common.error\"),\r\n        description: i18n.t(\"toast.subscriptionFailed\"),\r\n        variant: \"destructive\",\r\n      });\r\n    } finally {\r\n      setIsPending(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Button\r\n      variant={isSubscribed ? \"default\" : \"outline\"}\r\n      size=\"icon\"\r\n      onClick={handleToggle}\r\n      disabled={isPending}\r\n      title={isSubscribed ? t(\"activities.favorited\") : t(\"activities.favorite\")}\r\n      className=\"transition-all duration-200\"\r\n    >\r\n      <Heart \r\n        className={`w-4 h-4 transition-all duration-200 ${\r\n          isSubscribed ? \"fill-current\" : \"\"\r\n        }`} \r\n      />\r\n    </Button>\r\n  );\r\n};\r\n","import { useCallback } from \"react\";\r\nimport { Card, CardContent, CardFooter, CardHeader } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\r\nimport { Calendar, Clock, Users, UtensilsCrossed, ShoppingBag, UserCircle, Forward } from \"lucide-react\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { useActivities, useSubscriptions, ActivityCreator } from \"@/hooks/useActivities\";\r\nimport { useActivitiesListRealtime } from \"@/hooks/useActivityRealtime\";\r\nimport { useAuth } from \"@/contexts/AuthContext\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useLocalizedContent } from \"@/hooks/useLocalizedContent\";\r\nimport { format } from \"date-fns\";\r\nimport { useInfiniteScroll } from \"@/hooks/useInfiniteScroll\";\r\nimport i18n from \"@/i18n/config\";\r\nimport platformLogo from \"@/assets/xiaoxiong-logo-v3.png\";\r\nimport { ActivityListSkeleton } from \"@/components/skeletons\";\r\nimport { ActivityFavoriteButton } from \"@/components/ActivityFavoriteButton\";\r\nimport { PullToRefresh } from \"@/components/PullToRefresh\";\r\nimport { useQueryClient } from \"@tanstack/react-query\";\r\n\r\n\r\nconst getLocalizedRestaurantName = (restaurant: ActivityCreator[\"restaurant\"]) => {\r\n  if (!restaurant) return \"\";\r\n  const lang = i18n.language;\r\n  if (lang === \"zh\") return restaurant.name;\r\n  if (lang === \"pt\") return restaurant.name_pt || restaurant.name_en || restaurant.name;\r\n  return restaurant.name_en || restaurant.name;\r\n};\r\n\r\nconst Activities = () => {\r\n  const { t } = useTranslation();\r\n  const { user } = useAuth();\r\n  const { localizeActivity } = useLocalizedContent();\r\n  const navigate = useNavigate();\r\n  const queryClient = useQueryClient();\r\n\r\n  // Enable realtime updates for activities list\r\n  useActivitiesListRealtime();\r\n\r\n  const { data: activitiesData, isLoading } = useActivities();\r\n  const { data: subscriptions = [] } = useSubscriptions();\r\n  const subscribedIds = subscriptions.map(sub => sub.activity_id);\r\n\r\n  // Filter to only show published activities (draft activities should never show to frontend users)\r\n  const activities = activitiesData?.filter(activity => \r\n    activity.status === \"published\" && activity.visible === true\r\n  );\r\n\r\n  // Infinite scroll for activities\r\n  const { displayedData: displayedActivities, hasMore, loadMore } = useInfiniteScroll({\r\n    data: activities,\r\n    initialItemsPerPage: 6,\r\n    incrementPerPage: 6,\r\n  });\r\n\r\n  const handleRefresh = useCallback(async () => {\r\n    await queryClient.invalidateQueries({ queryKey: ['activities'] });\r\n  }, [queryClient]);\r\n\r\n  return (\r\n    <PullToRefresh onRefresh={handleRefresh}>\r\n      <div className=\"min-h-screen bg-secondary/20 py-8 px-4 animate-fade-in\">\r\n        <div className=\"container mx-auto max-w-7xl\">\r\n          {/* Header */}\r\n        <div className=\"mb-8\">\r\n          <h1 className=\"text-3xl sm:text-4xl font-medium mb-2 text-primary\">\r\n            {t(\"activities.title\")}\r\n          </h1>\r\n          <p className=\"text-muted-foreground text-base sm:text-lg\">{t(\"activities.description\")}</p>\r\n        </div>\r\n\r\n        {/* Loading State */}\r\n        {isLoading && (\r\n          <ActivityListSkeleton count={4} />\r\n        )}\r\n\r\n        {/* Empty State */}\r\n        {!isLoading && (!activities || activities.length === 0) && (\r\n          <div className=\"text-center py-20\">\r\n            <p className=\"text-xl text-muted-foreground\">\r\n              {t(\"activities.noActivities\") || \"No activities available\"}\r\n            </p>\r\n          </div>\r\n        )}\r\n\r\n        {/* Activities Grid */}\r\n        {!isLoading && activities && activities.length > 0 && (\r\n          <>\r\n            <div className=\"grid md:grid-cols-2 gap-6\">\r\n            {displayedActivities.map((activity) => {\r\n              const localizedActivity = localizeActivity(activity);\r\n              \r\n              return (\r\n                <Card key={activity.id} className=\"overflow-hidden hover:shadow-large transition-shadow flex flex-col h-full\">\r\n                  <Link to={`/activity/${activity.id}`} className=\"flex flex-col h-full\">\r\n                    <div className=\"relative h-48 overflow-hidden\">\r\n                      {activity.media_type === \"video\" && activity.video_url ? (\r\n                        <video\r\n                          src={activity.video_url}\r\n                          poster={activity.image_url || undefined}\r\n                          className=\"w-full h-full object-cover transition-transform hover:scale-105\"\r\n                          muted\r\n                          loop\r\n                          playsInline\r\n                          autoPlay\r\n                        />\r\n                      ) : (\r\n                        <img\r\n                          src={activity.image_url || \"https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=600&q=80\"}\r\n                          alt={localizedActivity.title}\r\n                          className=\"w-full h-full object-cover transition-transform hover:scale-105\"\r\n                        />\r\n                      )}\r\n                      {activity.pinned && (\r\n                        <Badge className=\"absolute top-3 left-3 bg-accent\">\r\n                          {t(\"activities.pinned\")}\r\n                        </Badge>\r\n                      )}\r\n                      {/* Service Type Badge */}\r\n                      {activity.service_type && (\r\n                        <Badge \r\n                          className=\"absolute bottom-3 left-3 flex items-center gap-1\"\r\n                          variant=\"secondary\"\r\n                        >\r\n                          {activity.service_type === \"dine_in\" && <UtensilsCrossed className=\"w-3 h-3\" />}\r\n                          {activity.service_type === \"takeaway\" && <ShoppingBag className=\"w-3 h-3\" />}\r\n                          {activity.service_type === \"both\" && (\r\n                            <>\r\n                              <UtensilsCrossed className=\"w-3 h-3\" />\r\n                              <ShoppingBag className=\"w-3 h-3\" />\r\n                            </>\r\n                          )}\r\n                          {t(`activities.serviceType.${activity.service_type}`)}\r\n                        </Badge>\r\n                      )}\r\n                      {activity.end_date && new Date(activity.end_date) < new Date() ? (\r\n                        <Badge className=\"absolute top-3 right-3 bg-secondary\">\r\n                          {t(\"activities.ended\")}\r\n                        </Badge>\r\n                      ) : (\r\n                        <div className=\"absolute top-3 right-3 flex gap-1.5\">\r\n                          {activity.subscriber_count !== undefined && (\r\n                            <Badge variant=\"secondary\" className=\"flex items-center gap-1\">\r\n                              <Users className=\"w-3 h-3\" />\r\n                              <span>{activity.subscriber_count}</span>\r\n                            </Badge>\r\n                          )}\r\n                          {activity.share_count !== undefined && activity.share_count > 0 && (\r\n                            <Badge variant=\"secondary\" className=\"flex items-center gap-1\">\r\n                              <Forward className=\"w-3 h-3\" />\r\n                              <span>{activity.share_count}</span>\r\n                            </Badge>\r\n                          )}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n\r\n                    <CardHeader>\r\n                      <h3 className=\"text-xl font-semibold text-card-foreground line-clamp-2\">\r\n                        {localizedActivity.title}\r\n                      </h3>\r\n                    </CardHeader>\r\n\r\n                    <CardContent className=\"space-y-3 flex-1\">\r\n                      <div \r\n                        className=\"text-muted-foreground text-sm line-clamp-3\r\n                          [&_h1]:text-base [&_h1]:font-bold [&_h1]:text-foreground\r\n                          [&_h2]:text-sm [&_h2]:font-semibold [&_h2]:text-foreground\r\n                          [&_h3]:text-sm [&_h3]:font-medium [&_h3]:text-foreground\r\n                          [&_strong]:font-semibold [&_strong]:text-foreground\r\n                          [&_p]:my-1\r\n                          [&_ul]:list-disc [&_ul]:ml-4\r\n                          [&_ol]:list-decimal [&_ol]:ml-4\r\n                          [&_*]:!text-inherit\"\r\n                        dangerouslySetInnerHTML={{ __html: localizedActivity.content }}\r\n                      />\r\n                      \r\n                      {activity.start_date && (\r\n                        <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\r\n                          <Calendar className=\"w-4 h-4\" />\r\n                          <span>{format(new Date(activity.start_date), \"PPP\")}</span>\r\n                        </div>\r\n                      )}\r\n\r\n                      {activity.end_date && (\r\n                        <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\r\n                          <Clock className=\"w-4 h-4\" />\r\n                          <span>{t(\"activities.until\")} {format(new Date(activity.end_date), \"PPP\")}</span>\r\n                        </div>\r\n                      )}\r\n\r\n                      {/* Creator Info */}\r\n                      <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\r\n                        <UserCircle className=\"w-4 h-4\" />\r\n                        <span>{t(\"activities.creatorLabel\")}</span>\r\n                        {activity.creator?.isAdmin ? (\r\n                          <div className=\"flex items-center gap-1\">\r\n                            <img src={platformLogo} alt=\"Platform\" className=\"w-4 h-4 rounded-full object-contain\" />\r\n                            <span className=\"font-medium\">{t(\"activities.createdByPlatform\")}</span>\r\n                          </div>\r\n                        ) : activity.creator?.restaurant ? (\r\n                          <div \r\n                            className=\"flex items-center gap-1 cursor-pointer\"\r\n                            onClick={(e) => {\r\n                              e.preventDefault();\r\n                              e.stopPropagation();\r\n                              navigate(`/restaurant/${activity.creator.restaurant!.id}`);\r\n                            }}\r\n                          >\r\n                            {activity.creator.avatar_url ? (\r\n                              <Avatar className=\"w-4 h-4\">\r\n                                <AvatarImage src={activity.creator.avatar_url} alt=\"Creator\" />\r\n                                <AvatarFallback className=\"text-[8px]\">\r\n                                  {activity.creator.restaurant.name.charAt(0)}\r\n                                </AvatarFallback>\r\n                              </Avatar>\r\n                            ) : (\r\n                              <div className=\"w-4 h-4 rounded-full bg-muted flex items-center justify-center\">\r\n                                <span className=\"text-[8px] font-medium\">\r\n                                  {activity.creator.restaurant.name.charAt(0)}\r\n                                </span>\r\n                              </div>\r\n                            )}\r\n                            <span className=\"text-primary font-medium hover:underline\">\r\n                              {getLocalizedRestaurantName(activity.creator.restaurant)}\r\n                            </span>\r\n                          </div>\r\n                        ) : (\r\n                          <div className=\"flex items-center gap-1\">\r\n                            <img src={platformLogo} alt=\"Platform\" className=\"w-4 h-4 rounded-full object-contain\" />\r\n                            <span className=\"font-medium\">{t(\"activities.createdByPlatform\")}</span>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    </CardContent>\r\n\r\n                    <CardFooter className=\"gap-2\">\r\n                      <Button asChild className=\"flex-1\">\r\n                        <span>{t(\"activities.viewDetails\")}</span>\r\n                      </Button>\r\n                      <ActivityFavoriteButton \r\n                        activityId={activity.id}\r\n                        initialSubscribed={subscribedIds.includes(activity.id)}\r\n                      />\r\n                    </CardFooter>\r\n                  </Link>\r\n                </Card>\r\n              );\r\n            })}\r\n          </div>\r\n            \r\n            {/* Load More Button */}\r\n            {hasMore && (\r\n              <div className=\"flex justify-center mt-8\">\r\n                <Button onClick={loadMore} size=\"lg\" variant=\"outline\">\r\n                  {t(\"common.loadMore\")} ({displayedActivities.length} / {activities.length})\r\n                </Button>\r\n              </div>\r\n            )}\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n    </PullToRefresh>\r\n  );\r\n};\r\n\r\nexport default Activities;\r\n"],"names":["ActivityListSkeleton","count","_","i","jsxs","jsx","Skeleton","ActivityFavoriteButton","activityId","initialSubscribed","t","useTranslation","user","useAuth","toast","useToast","isSubscribed","setIsSubscribed","useState","isPending","setIsPending","useEffect","handleToggle","e","wasSubscribed","error","supabase","i18n","Button","Heart","getLocalizedRestaurantName","restaurant","lang","Activities","localizeActivity","useLocalizedContent","navigate","useNavigate","queryClient","useQueryClient","useActivitiesListRealtime","activitiesData","isLoading","useActivities","subscriptions","useSubscriptions","subscribedIds","sub","activities","activity","displayedActivities","hasMore","loadMore","useInfiniteScroll","handleRefresh","useCallback","PullToRefresh","Fragment","localizedActivity","Card","Link","Badge","UtensilsCrossed","ShoppingBag","Users","Forward","CardHeader","CardContent","Calendar","format","Clock","UserCircle","platformLogo","Avatar","AvatarImage","AvatarFallback","CardFooter"],"mappings":"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"}