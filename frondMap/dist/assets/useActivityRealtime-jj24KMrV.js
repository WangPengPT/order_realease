import{r as o}from"./vendor-react-CrHRjzzo.js";import{u as l}from"./vendor-query-EnOED-MY.js";import{s as a}from"./index-Bjy07DNZ.js";const r=e=>{const i=l();o.useEffect(()=>{const t=e?`activity-realtime-${e}`:"activities-realtime-all",n=a.channel(t).on("postgres_changes",{event:"*",schema:"public",table:"subscriptions",...e?{filter:`activity_id=eq.${e}`}:{}},s=>{console.log("Subscription change detected:",s),e&&i.invalidateQueries({queryKey:["subscriberCount",e]}),i.invalidateQueries({queryKey:["activities"]}),i.invalidateQueries({queryKey:["admin-activities"]})}).on("postgres_changes",{event:"*",schema:"public",table:"activity_shares",...e?{filter:`activity_id=eq.${e}`}:{}},s=>{console.log("Share change detected:",s),e&&i.invalidateQueries({queryKey:["shareCount",e]}),i.invalidateQueries({queryKey:["activities"]}),i.invalidateQueries({queryKey:["admin-activities"]})}).subscribe(s=>{console.log(`Realtime subscription status for ${t}:`,s)});return()=>{a.removeChannel(n)}},[e,i])},h=()=>{r()},p=e=>{r(e)};export{p as a,h as u};
//# sourceMappingURL=useActivityRealtime-jj24KMrV.js.map
