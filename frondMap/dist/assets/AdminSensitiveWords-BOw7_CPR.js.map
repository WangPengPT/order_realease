{"version":3,"file":"AdminSensitiveWords-BOw7_CPR.js","sources":["../../src/pages/admin/AdminSensitiveWords.tsx"],"sourcesContent":["import { useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\r\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle } from \"@/components/ui/alert-dialog\";\r\nimport { Plus, Pencil, Trash2, Search, Shield } from \"lucide-react\";\r\nimport { format } from \"date-fns\";\r\nimport {\r\n  useSensitiveWords,\r\n  useAddSensitiveWord,\r\n  useUpdateSensitiveWord,\r\n  useDeleteSensitiveWord,\r\n  SensitiveWord,\r\n} from \"@/hooks/useSensitiveWords\";\r\n\r\nconst AdminSensitiveWords = () => {\r\n  const { t } = useTranslation();\r\n  const { data: sensitiveWords, isLoading } = useSensitiveWords();\r\n  const addWord = useAddSensitiveWord();\r\n  const updateWord = useUpdateSensitiveWord();\r\n  const deleteWord = useDeleteSensitiveWord();\r\n\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [isAddDialogOpen, setIsAddDialogOpen] = useState(false);\r\n  const [isEditDialogOpen, setIsEditDialogOpen] = useState(false);\r\n  const [isDeleteDialogOpen, setIsDeleteDialogOpen] = useState(false);\r\n  const [newWord, setNewWord] = useState(\"\");\r\n  const [editingWord, setEditingWord] = useState<SensitiveWord | null>(null);\r\n  const [deletingWord, setDeletingWord] = useState<SensitiveWord | null>(null);\r\n\r\n  const filteredWords = sensitiveWords?.filter((item) =>\r\n    item.word.toLowerCase().includes(searchQuery.toLowerCase())\r\n  );\r\n\r\n  const handleAdd = () => {\r\n    if (!newWord.trim()) return;\r\n    addWord.mutate(newWord, {\r\n      onSuccess: () => {\r\n        setNewWord(\"\");\r\n        setIsAddDialogOpen(false);\r\n      },\r\n    });\r\n  };\r\n\r\n  const handleUpdate = () => {\r\n    if (!editingWord || !editingWord.word.trim()) return;\r\n    updateWord.mutate(\r\n      { id: editingWord.id, word: editingWord.word },\r\n      {\r\n        onSuccess: () => {\r\n          setEditingWord(null);\r\n          setIsEditDialogOpen(false);\r\n        },\r\n      }\r\n    );\r\n  };\r\n\r\n  const handleDelete = () => {\r\n    if (!deletingWord) return;\r\n    deleteWord.mutate(deletingWord.id, {\r\n      onSuccess: () => {\r\n        setDeletingWord(null);\r\n        setIsDeleteDialogOpen(false);\r\n      },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\r\n        <div>\r\n          <h1 className=\"text-2xl font-bold flex items-center gap-2\">\r\n            <Shield className=\"h-6 w-6\" />\r\n            {t(\"admin.sensitiveWords.title\")}\r\n          </h1>\r\n          <p className=\"text-muted-foreground\">\r\n            {t(\"admin.sensitiveWords.description\")}\r\n          </p>\r\n        </div>\r\n        <Button onClick={() => setIsAddDialogOpen(true)}>\r\n          <Plus className=\"h-4 w-4 mr-2\" />\r\n          {t(\"admin.sensitiveWords.add\")}\r\n        </Button>\r\n      </div>\r\n\r\n      <Card>\r\n        <CardHeader>\r\n          <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\r\n            <div>\r\n              <CardTitle>{t(\"admin.sensitiveWords.list\")}</CardTitle>\r\n              <CardDescription>\r\n                {t(\"admin.sensitiveWords.total\", {\r\n                  count: sensitiveWords?.length || 0,\r\n                })}\r\n              </CardDescription>\r\n            </div>\r\n            <div className=\"relative w-full sm:w-64\">\r\n              <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n              <Input\r\n                placeholder={t(\"admin.sensitiveWords.search\")}\r\n                value={searchQuery}\r\n                onChange={(e) => setSearchQuery(e.target.value)}\r\n                className=\"pl-9\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </CardHeader>\r\n        <CardContent>\r\n          {isLoading ? (\r\n            <div className=\"text-center py-8 text-muted-foreground\">\r\n              {t(\"common.loading\")}\r\n            </div>\r\n          ) : filteredWords && filteredWords.length > 0 ? (\r\n            <Table>\r\n              <TableHeader>\r\n                <TableRow>\r\n                  <TableHead>{t(\"admin.sensitiveWords.word\")}</TableHead>\r\n                  <TableHead>{t(\"admin.sensitiveWords.createdAt\")}</TableHead>\r\n                  <TableHead className=\"text-right\">{t(\"common.actions.actions\")}</TableHead>\r\n                </TableRow>\r\n              </TableHeader>\r\n              <TableBody>\r\n                {filteredWords.map((item) => (\r\n                  <TableRow key={item.id}>\r\n                    <TableCell className=\"font-medium\">{item.word}</TableCell>\r\n                    <TableCell>\r\n                      {format(new Date(item.created_at), \"yyyy-MM-dd HH:mm\")}\r\n                    </TableCell>\r\n                    <TableCell className=\"text-right\">\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"icon\"\r\n                        onClick={() => {\r\n                          setEditingWord(item);\r\n                          setIsEditDialogOpen(true);\r\n                        }}\r\n                      >\r\n                        <Pencil className=\"h-4 w-4\" />\r\n                      </Button>\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"icon\"\r\n                        onClick={() => {\r\n                          setDeletingWord(item);\r\n                          setIsDeleteDialogOpen(true);\r\n                        }}\r\n                      >\r\n                        <Trash2 className=\"h-4 w-4 text-destructive\" />\r\n                      </Button>\r\n                    </TableCell>\r\n                  </TableRow>\r\n                ))}\r\n              </TableBody>\r\n            </Table>\r\n          ) : (\r\n            <div className=\"text-center py-8 text-muted-foreground\">\r\n              {searchQuery\r\n                ? t(\"admin.sensitiveWords.noResults\")\r\n                : t(\"admin.sensitiveWords.empty\")}\r\n            </div>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Add Dialog */}\r\n      <Dialog open={isAddDialogOpen} onOpenChange={setIsAddDialogOpen}>\r\n        <DialogContent>\r\n          <DialogHeader>\r\n            <DialogTitle>{t(\"admin.sensitiveWords.add\")}</DialogTitle>\r\n            <DialogDescription>\r\n              {t(\"admin.sensitiveWords.addDescription\")}\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n          <Input\r\n            placeholder={t(\"admin.sensitiveWords.inputPlaceholder\")}\r\n            value={newWord}\r\n            onChange={(e) => setNewWord(e.target.value)}\r\n            onKeyDown={(e) => e.key === \"Enter\" && handleAdd()}\r\n          />\r\n          <DialogFooter>\r\n            <Button variant=\"outline\" onClick={() => setIsAddDialogOpen(false)}>\r\n              {t(\"common.actions.cancel\")}\r\n            </Button>\r\n            <Button onClick={handleAdd} disabled={addWord.isPending || !newWord.trim()}>\r\n              {t(\"common.actions.add\")}\r\n            </Button>\r\n          </DialogFooter>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      {/* Edit Dialog */}\r\n      <Dialog open={isEditDialogOpen} onOpenChange={setIsEditDialogOpen}>\r\n        <DialogContent>\r\n          <DialogHeader>\r\n            <DialogTitle>{t(\"admin.sensitiveWords.edit\")}</DialogTitle>\r\n          </DialogHeader>\r\n          <Input\r\n            placeholder={t(\"admin.sensitiveWords.inputPlaceholder\")}\r\n            value={editingWord?.word || \"\"}\r\n            onChange={(e) =>\r\n              setEditingWord((prev) => (prev ? { ...prev, word: e.target.value } : null))\r\n            }\r\n            onKeyDown={(e) => e.key === \"Enter\" && handleUpdate()}\r\n          />\r\n          <DialogFooter>\r\n            <Button variant=\"outline\" onClick={() => setIsEditDialogOpen(false)}>\r\n              {t(\"common.actions.cancel\")}\r\n            </Button>\r\n            <Button onClick={handleUpdate} disabled={updateWord.isPending || !editingWord?.word.trim()}>\r\n              {t(\"common.actions.save\")}\r\n            </Button>\r\n          </DialogFooter>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      {/* Delete Confirmation */}\r\n      <AlertDialog open={isDeleteDialogOpen} onOpenChange={setIsDeleteDialogOpen}>\r\n        <AlertDialogContent>\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle>{t(\"admin.sensitiveWords.deleteTitle\")}</AlertDialogTitle>\r\n            <AlertDialogDescription>\r\n              {t(\"admin.sensitiveWords.deleteDescription\", {\r\n                word: deletingWord?.word,\r\n              })}\r\n            </AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <AlertDialogFooter>\r\n            <AlertDialogCancel>{t(\"common.actions.cancel\")}</AlertDialogCancel>\r\n            <AlertDialogAction onClick={handleDelete} className=\"bg-destructive text-destructive-foreground\">\r\n              {t(\"common.actions.delete\")}\r\n            </AlertDialogAction>\r\n          </AlertDialogFooter>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminSensitiveWords;\r\n"],"names":["AdminSensitiveWords","t","useTranslation","sensitiveWords","isLoading","useSensitiveWords","addWord","useAddSensitiveWord","updateWord","useUpdateSensitiveWord","deleteWord","useDeleteSensitiveWord","searchQuery","setSearchQuery","useState","isAddDialogOpen","setIsAddDialogOpen","isEditDialogOpen","setIsEditDialogOpen","isDeleteDialogOpen","setIsDeleteDialogOpen","newWord","setNewWord","editingWord","setEditingWord","deletingWord","setDeletingWord","filteredWords","item","handleAdd","handleUpdate","handleDelete","jsxs","jsx","Shield","Button","Plus","Card","CardHeader","CardTitle","CardDescription","Search","Input","e","CardContent","Table","TableHeader","TableRow","TableHead","TableBody","TableCell","format","Pencil","Trash2","Dialog","DialogContent","DialogHeader","DialogTitle","DialogDescription","DialogFooter","prev","AlertDialog","AlertDialogContent","AlertDialogHeader","AlertDialogTitle","AlertDialogDescription","AlertDialogFooter","AlertDialogCancel","AlertDialogAction"],"mappings":"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"}