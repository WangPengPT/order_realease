import{c as fe,u as oe,a as be,b as ye,l as ve,r as l,j as e,D as je,d as we,e as Ne,f as ke,S as _e,g as I,U as Se,L as se,I as Ce,B as U,h as Ie,i as q,C as ze,k as le,H as Te,M as De,m as Me}from"./index-tBrG_sQo.js";import{m as Oe,i as Re,a as $e,b as ie}from"./externalLinks-DoJcn4fI.js";import{u as Be}from"./useHomepageTemplates-iN642JD8.js";import{u as Ee}from"./usePageView-BaAQlfSB.js";import{M as ne}from"./message-circle-CSIQGvho.js";import{S as Ve}from"./shopping-bag-DTK0VZ-L.js";import{C as Pe}from"./calendar-check-DOT3c30U.js";import{A as Ae}from"./arrow-right-Robgkuxq.js";import{S as re}from"./search-DWWBTdMh.js";import{S as Le}from"./star-DGUzKXpx.js";import{D as We}from"./download-D7_UeEO4.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=fe("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),Q="/assets/sushi-ramen-hero-kMMmiTPz.jpg",ce="/assets/sushi-ramen-mobile-BHV96LaL.jpg",Fe="/assets/google-play-badge-new-BAXiFmDF.png",Xe="/assets/app-store-badge-C-eOGvqu.svg",Ue="https://tzdgqhwyzsxkxnncgzap.supabase.co",ae="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR6ZGdxaHd5enN4a3hubmNnemFwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM2NTg2ODgsImV4cCI6MjA3OTIzNDY4OH0.D76C4OkjQVWyMxtjjdOofpD8X_hEEoTtrXHqi4XSYUw",qe=({open:t,onOpenChange:b})=>{const{i18n:r}=oe(),x=be(),{settings:y}=ye(),_=(y==null?void 0:y.logo_url)||ve,[N,D]=l.useState(""),[p,M]=l.useState([]),[C,B]=l.useState(!1),[v,W]=l.useState(null),S=l.useRef(null),V=l.useRef(null),$=l.useRef(null);l.useEffect(()=>{var s;t&&!v&&((s=navigator.geolocation)==null||s.getCurrentPosition(d=>{W({lat:d.coords.latitude,lng:d.coords.longitude})},d=>{console.log("Unable to get user location:",d.message)},{enableHighAccuracy:!1,timeout:5e3,maximumAge:3e5}))},[t,v]),l.useEffect(()=>{var s;(s=$.current)==null||s.scrollIntoView({behavior:"smooth"})},[p]);const g=async()=>{if(!N.trim()||C)return;const s={id:Date.now().toString(),role:"user",content:N.trim()},d=(Date.now()+1).toString(),a={id:d,role:"assistant",content:"",isStreaming:!0};M(i=>[...i,s,a]),D(""),B(!0),S.current&&S.current.abort(),S.current=new AbortController;try{const i=await fetch(`${Ue}/functions/v1/ask-xiaoxiong`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ae}`,apikey:ae},body:JSON.stringify({text:s.content,stream:!0,lat:v==null?void 0:v.lat,lng:v==null?void 0:v.lng}),signal:S.current.signal});if(!i.ok)throw new Error(`Request failed with status: ${i.status}`);if(!i.body)throw new Error("No response body");const o=i.body.getReader(),m=new TextDecoder;let u="";for(;;){const{done:O,value:R}=await o.read();if(O)break;const n=m.decode(R,{stream:!0});u+=n;let c=u;c.startsWith('"')&&(c=c.slice(1)),c.endsWith('"')&&(c=c.slice(0,-1)),c=c.replace(/\\n/g,`
`),M(T=>T.map(w=>w.id===d?{...w,content:c}:w))}let h=u;h.startsWith('"')&&(h=h.slice(1)),h.endsWith('"')&&(h=h.slice(0,-1)),h=h.replace(/\\n/g,`
`),M(O=>O.map(R=>R.id===d?{...R,content:h,isStreaming:!1}:R))}catch(i){if(i instanceof Error&&i.name==="AbortError"){console.log("Request aborted");return}console.error("Ask API error:",i);const o=r.language==="zh"?"抱歉，暂时无法获取结果，请稍后再试":r.language==="pt"?"Desculpe, não foi possível obter resultados. Tente novamente mais tarde.":"Sorry, unable to get results. Please try again later.";M(m=>m.map(u=>u.id===d?{...u,content:o,isStreaming:!1}:u))}finally{B(!1)}},j=s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),g())},z=()=>{S.current&&S.current.abort(),b(!1)},E=s=>{z(),x(s)},k=s=>{const d=/\[([^\]]+)\]\(([^)]+)\)/g,a=[];let i=0,o,m=0;for(;(o=d.exec(s))!==null;){o.index>i&&a.push(e.jsx("span",{children:s.slice(i,o.index)},m++));const u=o[1],h=o[2];h.startsWith("/")?a.push(e.jsx("button",{onClick:()=>E(h),className:"text-primary hover:underline font-medium cursor-pointer",children:u},m++)):a.push(e.jsx("a",{href:h,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline font-medium",children:u},m++)),i=o.index+o[0].length}return i<s.length&&a.push(e.jsx("span",{children:s.slice(i)},m++)),a.length>0?a:[e.jsx("span",{children:s},"0")]},J=s=>s.replace(/\*\*(.*?)\*\*/g,"$1"),F=(s,d=20)=>s.length<=d?s:s.slice(0,d)+"...",P=(s,d)=>{const a=m=>m.split("|").slice(1,-1).map(u=>J(u.trim())),i=a(s[0]),o=s.slice(2).map(a);return e.jsx("div",{className:"overflow-x-auto my-2 max-w-full",children:e.jsxs("table",{className:"w-full text-xs border border-border rounded-md overflow-hidden table-fixed",children:[e.jsx("thead",{className:"bg-muted/60",children:e.jsx("tr",{children:i.map((m,u)=>e.jsx("th",{className:"px-2 py-2 text-left font-semibold border-b border-border truncate max-w-[100px]",title:m,children:k(F(m,15))},u))})}),e.jsx("tbody",{children:o.map((m,u)=>e.jsx("tr",{className:"border-b border-border last:border-0 hover:bg-muted/30 transition-colors",children:m.map((h,O)=>e.jsx("td",{className:"px-2 py-2 truncate max-w-[100px]",title:h,children:k(F(h,18))},O))},u))})]})},d)},A=s=>{const d=s.split(`
`),a=[];let i=0;for(;i<d.length;){const o=d[i];if(o.trim().startsWith("|")&&o.split("|").length>2){const m=[];for(;i<d.length&&d[i].trim().startsWith("|");)m.push(d[i]),i++;m.length>=2&&a.push(P(m,a.length));continue}if(o.startsWith("### "))a.push(e.jsx("h3",{className:"text-base font-semibold mt-3 mb-1",children:k(o.slice(4))},a.length));else if(o.startsWith("## "))a.push(e.jsx("h2",{className:"text-lg font-bold mt-4 mb-2",children:k(o.slice(3))},a.length));else if(o.startsWith("# "))a.push(e.jsx("h1",{className:"text-xl font-bold mt-4 mb-2",children:k(o.slice(2))},a.length));else if(o.includes("**")){const m=o.split(/\*\*(.*?)\*\*/g);a.push(e.jsx("p",{className:"mb-1 leading-relaxed",children:m.map((u,h)=>h%2===1?e.jsx("strong",{className:"font-semibold",children:k(u)},h):k(u))},a.length))}else o.startsWith("- ")||o.startsWith("* ")?a.push(e.jsx("li",{className:"ml-4 mb-0.5 list-disc",children:k(o.slice(2))},a.length)):/^\d+\.\s/.test(o)?a.push(e.jsx("li",{className:"ml-4 mb-0.5 list-decimal",children:k(o.replace(/^\d+\.\s/,""))},a.length)):o.match(/^[-*_]{3,}$/)?a.push(e.jsx("hr",{className:"my-3 border-border"},a.length)):o.trim()===""?a.push(e.jsx("div",{className:"h-1"},a.length)):a.push(e.jsx("p",{className:"mb-1 leading-relaxed",children:k(o)},a.length));i++}return a},L=()=>r.language==="zh"?"和小熊聊聊":r.language==="pt"?"Converse com Xiaoxiong":"Chat with Xiaoxiong",f=()=>r.language==="zh"?"输入你想吃的...":r.language==="pt"?"Digite o que quer comer...":"Type what you want to eat...",G=()=>r.language==="zh"?"你好！我是小熊，告诉我你想吃什么，我来帮你推荐餐厅！":r.language==="pt"?"Olá! Eu sou o Xiaoxiong, me diga o que você quer comer e eu vou te ajudar a encontrar restaurantes!":"Hi! I'm Xiaoxiong, tell me what you want to eat and I'll help you find restaurants!";return e.jsx(je,{open:t,onOpenChange:z,children:e.jsxs(we,{className:"w-full h-full max-w-full max-h-full sm:max-w-lg sm:h-[70vh] sm:max-h-[70vh] sm:rounded-lg rounded-none flex flex-col p-0 gap-0 overflow-hidden",children:[e.jsx(Ne,{className:"px-4 py-3 border-b shrink-0 bg-primary/5",children:e.jsxs(ke,{className:"flex items-center gap-2 text-base",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center overflow-hidden",children:e.jsx("img",{src:_,alt:"Logo",className:"w-6 h-6 object-contain"})}),L()]})}),e.jsx(_e,{className:"flex-1 h-0",ref:V,children:e.jsxs("div",{className:"p-4 space-y-4",children:[p.length===0&&e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center shrink-0",children:e.jsx(ne,{className:"w-4 h-4 text-primary"})}),e.jsx("div",{className:"flex-1 bg-muted/50 rounded-2xl rounded-tl-sm px-4 py-3 text-sm",children:G()})]}),p.map(s=>e.jsxs("div",{className:I("flex gap-3",s.role==="user"&&"flex-row-reverse"),children:[e.jsx("div",{className:I("w-8 h-8 rounded-full flex items-center justify-center shrink-0",s.role==="user"?"bg-primary text-primary-foreground":"bg-primary/10"),children:s.role==="user"?e.jsx(Se,{className:"h-4 w-4"}):e.jsx("img",{src:_,alt:"Logo",className:"w-6 h-6 object-contain"})}),e.jsx("div",{className:I("flex-1 max-w-[85%] rounded-2xl px-4 py-3 text-sm",s.role==="user"?"bg-primary text-primary-foreground rounded-tr-sm":"bg-muted/50 rounded-tl-sm"),children:s.role==="assistant"?e.jsxs(e.Fragment,{children:[s.content?e.jsx("div",{className:"prose-sm",children:A(s.content)}):e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(se,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{children:r.language==="zh"?"思考中...":r.language==="pt"?"Pensando...":"Thinking..."})]}),s.isStreaming&&s.content&&e.jsx("span",{className:"inline-block w-1.5 h-4 bg-primary/50 animate-pulse ml-0.5 align-middle"})]}):s.content})]},s.id)),e.jsx("div",{ref:$})]})}),e.jsx("div",{className:"p-3 border-t bg-background shrink-0",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ce,{value:N,onChange:s=>D(s.target.value),onKeyDown:j,placeholder:f(),disabled:C,className:"flex-1 rounded-full bg-muted/50 border-0 focus-visible:ring-1",autoFocus:!0}),e.jsx(U,{onClick:g,disabled:!N.trim()||C,size:"icon",className:"shrink-0 rounded-full",children:C?e.jsx(se,{className:"h-4 w-4 animate-spin"}):e.jsx(Ie,{className:"h-4 w-4"})})]})})]})})},de=l.memo(({stats:t,t:b})=>e.jsx("div",{className:"absolute top-3 sm:top-4 left-3 z-20",children:e.jsxs("div",{className:"gap-4 w-fit flex-col flex items-start justify-start",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"text-sm text-white/90 drop-shadow-md",children:b("home.stats.delivery")}),e.jsx("span",{className:"font-bold text-white text-sm drop-shadow-md",children:t.order_count})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"w-4 h-4 text-accent"}),e.jsx("span",{className:"text-sm text-white/90 drop-shadow-md",children:b("home.stats.reservation")}),e.jsx("span",{className:"font-bold text-white text-sm drop-shadow-md",children:t.reserve_count})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xl sm:text-2xl font-bold text-white drop-shadow-md",children:b("home.hero.brandName")}),e.jsx("img",{src:Oe,alt:"map icon",className:"w-5 sm:w-8 h-5 sm:h-8 object-contain flex-shrink-0"})]})]})}));de.displayName="StatsDisplay";const X=l.memo(({to:t,Icon:b,title:r,desc:x,iconBg:y,iconColor:_,hoverBorderColor:N})=>e.jsx(q,{to:t,children:e.jsxs(ze,{className:`group p-6 sm:p-8 border-border/50 ${N} transition-all hover:shadow-large cursor-pointer h-full`,children:[e.jsx("div",{className:`w-14 sm:w-16 h-14 sm:h-16 rounded-2xl ${y} flex items-center justify-center mb-4 sm:mb-6 group-hover:scale-110 transition-transform`,children:e.jsx(b,{className:`w-7 sm:w-8 h-7 sm:h-8 ${_}`})}),e.jsx("h3",{className:"text-xl sm:text-2xl font-semibold mb-2 sm:mb-3 text-card-foreground",children:r}),e.jsxs("p",{className:"text-sm sm:text-base text-muted-foreground leading-relaxed flex items-center gap-2",children:[x,e.jsx(Ae,{className:"w-4 h-4 flex-shrink-0 group-hover:translate-x-1 transition-transform"})]})]})}));X.displayName="FeatureCard";const Je=()=>{var p;const t=window.innerWidth<640,b=window.innerWidth>=1024,r=navigator.connection,x=window.Capacitor,y=Re(),_=$e(),N=ie(),D=navigator.userAgent;return console.log("[LightweightMode] Detection:",{isCapacitorApp:y,isInWebView:_,isIOSDevice:N,hasCapacitor:!!x,capacitorDetails:x?{isNativePlatform:x.isNativePlatform,isNative:x.isNative,platform:(p=x.getPlatform)==null?void 0:p.call(x)}:null,userAgent:D.substring(0,150),hasSafari:/Safari\//.test(D),hasVersion:/Version\/[\d.]+/.test(D),isStandalone:window.navigator.standalone===!0}),b?!!(r!=null&&r.saveData):_&&!y?(console.log("[LightweightMode] WebView detected (not Capacitor), using lightweight mode"),!0):r&&(r.saveData||r.effectiveType==="2g"||r.effectiveType==="slow-2g")||t&&navigator.deviceMemory&&navigator.deviceMemory<2?!0:(console.log("[LightweightMode] Normal mode, videos enabled for",N?"iOS":"non-iOS","device"),!1)},me=l.memo(({template:t,isActive:b,currentLang:r,t:x,onContentReady:y,onAskXiaoxiong:_})=>{const[N,D]=l.useState({}),[p,M]=l.useState({}),[C,B]=l.useState({}),[v,W]=l.useState({mobile:!0,tablet:!0,desktop:!0}),[S,V]=l.useState(!1),$=Je(),g=l.useRef(null),j=l.useRef(null),z=l.useRef(null),E=n=>t[`${n}${r==="zh"?"_zh":r==="pt"?"_pt":"_en"}`]||"",k=()=>window.innerWidth<640?"mobile":window.innerWidth<1024?"tablet":"desktop",J=()=>{const n=k();return n==="mobile"&&t.mobile_overlay_opacity!==null?t.mobile_overlay_opacity:n==="tablet"&&t.tablet_overlay_opacity!==null?t.tablet_overlay_opacity:n==="desktop"&&t.desktop_overlay_opacity!==null?t.desktop_overlay_opacity:t.overlay_opacity??30},F=()=>{const n=J(),c=t.overlay_gradient_direction||"to-b",T=(H,ge)=>H==null?ge/100:H>1?H/100:H,w=n>1?n/100:n,ee=T(t.overlay_gradient_from_opacity,30)*w,Y=T(t.overlay_gradient_via_opacity,25)*w,K=T(t.overlay_gradient_to_opacity,40)*w,ue={"to-t":"to top","to-b":"to bottom","to-l":"to left","to-r":"to right","to-tl":"to top left","to-tr":"to top right","to-bl":"to bottom left","to-br":"to bottom right"}[c]||"to bottom",Z={black:"0, 0, 0",white:"255, 255, 255",background:"0, 0, 0",foreground:"255, 255, 255",primary:"1, 100, 80",secondary:"240, 240, 240"},he=Z[t.overlay_gradient_from||"black"]||"0, 0, 0",xe=Z[t.overlay_gradient_via||"black"]||"0, 0, 0",pe=Z[t.overlay_gradient_to||"black"]||"0, 0, 0";return{background:`linear-gradient(${ue}, rgba(${he}, ${ee}), rgba(${xe}, ${Y}), rgba(${pe}, ${K}))`}},P=t.mobile_image_url||ce,A=t.tablet_image_url||t.desktop_image_url||Q,L=t.desktop_image_url||Q,f=t.background_blur||0,G=t.desktop_media_type||t.media_type||"image",s=t.tablet_media_type||t.media_type||"image",d=t.mobile_media_type||t.media_type||"image",a=G==="video"&&!$,i=s==="video"&&!$,o=d==="video"&&!$,m=o?t.mobile_video_url:null,u=i?t.tablet_video_url||t.desktop_video_url:null,h=a?t.desktop_video_url:null;l.useEffect(()=>{const n=k(),c=n==="mobile"?P:n==="tablet"?A:L;if(c){const T=new Image;T.onload=()=>{D(w=>({...w,[n]:!0})),W(w=>({...w,[n]:!0})),b&&(y==null||y(),setTimeout(()=>V(!0),100))},T.src=c}},[P,A,L,b,y]),l.useEffect(()=>{b&&N[k()]&&V(!0)},[b,N]);const O=n=>{M(c=>({...c,[n]:!0}))},R=(n,c)=>{console.error(`[HeroSlide] Video error on ${n}:`,c),B(T=>({...T,[n]:!0}))};return l.useEffect(()=>{if(!S||!b||!ie())return;const c=k(),w=(c==="mobile"?g:c==="tablet"?j:z).current;if(!w)return;const Y=setTimeout(async()=>{try{w.muted=!0,w.playsInline=!0,w.setAttribute("webkit-playsinline","true"),await w.play(),console.log(`[HeroSlide] iOS video play successful on ${c}`)}catch(K){console.error(`[HeroSlide] iOS video play failed on ${c}:`,K),B(te=>({...te,[c]:!0}))}},150);return()=>clearTimeout(Y)},[S,b]),e.jsxs("div",{className:I("absolute inset-0 w-full h-full transition-opacity duration-1000",b?"opacity-100 z-10":"opacity-0 z-0"),children:[e.jsxs("div",{className:"absolute inset-0 w-full h-full",children:[e.jsxs("div",{className:"absolute inset-0 w-full h-full sm:hidden",children:[!v.mobile&&e.jsx("div",{className:"absolute inset-0 w-full h-full bg-muted animate-pulse z-20"}),o&&m?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:P,alt:"Background",className:I("absolute inset-0 w-full h-full object-cover object-center z-10 transition-opacity duration-500",p.mobile&&!C.mobile?"opacity-0 pointer-events-none":"opacity-100"),style:{filter:f>0?`blur(${f}px)`:void 0}}),S&&!C.mobile&&e.jsx("video",{ref:g,src:m,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,"webkit-playsinline":"true",preload:"auto",onCanPlay:()=>O("mobile"),onError:n=>R("mobile",n),className:"absolute inset-0 w-full h-full object-cover object-center",style:{filter:f>0?`blur(${f}px)`:void 0}})]}):e.jsx("img",{src:P,alt:"Background",className:I("absolute inset-0 w-full h-full object-cover object-center transition-opacity duration-500",v.mobile?"opacity-100":"opacity-0"),style:{filter:f>0?`blur(${f}px)`:void 0}})]}),e.jsxs("div",{className:"absolute inset-0 w-full h-full hidden sm:block lg:hidden",children:[!v.tablet&&e.jsx("div",{className:"absolute inset-0 w-full h-full bg-muted animate-pulse z-20"}),i&&u?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:A,alt:"Background",className:I("absolute inset-0 w-full h-full object-cover object-center z-10 transition-opacity duration-500",p.tablet&&!C.tablet?"opacity-0 pointer-events-none":"opacity-100"),style:{filter:f>0?`blur(${f}px)`:void 0}}),S&&!C.tablet&&e.jsx("video",{ref:j,src:u,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,"webkit-playsinline":"true",preload:"auto",onCanPlay:()=>O("tablet"),onError:n=>R("tablet",n),className:"absolute inset-0 w-full h-full object-cover object-center",style:{filter:f>0?`blur(${f}px)`:void 0}})]}):e.jsx("img",{src:A,alt:"Background",className:I("absolute inset-0 w-full h-full object-cover object-center transition-opacity duration-500",v.tablet?"opacity-100":"opacity-0"),style:{filter:f>0?`blur(${f}px)`:void 0}})]}),e.jsxs("div",{className:"absolute inset-0 w-full h-full hidden lg:block",children:[!v.desktop&&e.jsx("div",{className:"absolute inset-0 w-full h-full bg-muted animate-pulse z-20"}),a&&h?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:L,alt:"Background",className:I("absolute inset-0 w-full h-full object-cover object-center z-10 transition-opacity duration-500",p.desktop&&!C.desktop?"opacity-0 pointer-events-none":"opacity-100"),style:{filter:f>0?`blur(${f}px)`:void 0}}),S&&!C.desktop&&e.jsx("video",{ref:z,src:h,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,"webkit-playsinline":"true",preload:"auto",onCanPlay:()=>O("desktop"),onError:n=>R("desktop",n),className:"absolute inset-0 w-full h-full object-cover object-center",style:{filter:f>0?`blur(${f}px)`:void 0}})]}):e.jsx("img",{src:L,alt:"Background",className:I("absolute inset-0 w-full h-full object-cover object-center transition-opacity duration-500",v.desktop?"opacity-100":"opacity-0"),style:{filter:f>0?`blur(${f}px)`:void 0}})]}),e.jsx("div",{className:"absolute inset-0 w-full h-full",style:F()})]}),e.jsx("div",{className:"relative z-10 container mx-auto px-4 sm:px-6 flex items-center min-h-screen",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center space-y-4 sm:space-y-8 animate-fade-in w-full",children:[t.subtitle_button_text_zh&&e.jsx("div",{className:"flex justify-center",children:e.jsxs("button",{onClick:_,className:"group flex items-center gap-3 bg-white/95 backdrop-blur-sm text-muted-foreground px-4 sm:px-6 py-3 sm:py-4 rounded-full shadow-lg hover:shadow-2xl hover:bg-white transition-all duration-300 cursor-text border border-border/20",children:[e.jsx(ne,{className:"w-5 h-5 text-primary/70 group-hover:text-primary transition-colors"}),e.jsx("span",{className:"text-sm sm:text-base text-muted-foreground/80 group-hover:text-muted-foreground transition-colors",children:E("subtitle_button_text")||x("home.hero.subtitle")}),e.jsx(re,{className:"w-4 h-4 text-muted-foreground/50 ml-2"})]})}),e.jsx("h1",{className:"text-3xl sm:text-5xl md:text-7xl font-bold text-white leading-tight px-4 drop-shadow-[0_2px_8px_rgba(0,0,0,0.8)]",children:E("title")||x("home.hero.title")}),e.jsx("p",{className:"text-sm sm:text-xl md:text-2xl text-white/95 max-w-2xl mx-auto px-4 drop-shadow-[0_2px_6px_rgba(0,0,0,0.7)]",children:E("description")||x("home.hero.description")}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center pt-2 sm:pt-4 px-4",children:[e.jsx(U,{size:"lg",asChild:!0,className:"text-base sm:text-lg shadow-lg hover:shadow-2xl hover:scale-105 transition-all w-full sm:w-auto",children:e.jsxs(q,{to:t.primary_button_link||"/restaurants",children:[e.jsx(re,{className:"mr-2 w-4 sm:w-5 h-4 sm:h-5"}),E("primary_button_text")||x("home.hero.exploreBtn")]})}),e.jsx(U,{size:"lg",variant:"outline",asChild:!0,className:"text-base sm:text-lg w-full sm:w-auto backdrop-blur-sm hover:border-transparent hover:scale-105 transition-all",children:e.jsxs(q,{to:t.secondary_button_link||"/activities",children:[e.jsx(le,{className:"mr-2 w-4 sm:w-5 h-4 sm:h-5"}),E("secondary_button_text")||x("home.hero.activitiesBtn")]})})]})]})})]})});me.displayName="HeroSlide";const lt=()=>{const{t,i18n:b}=oe(),{data:r,isLoading:x}=Be(),[y,_]=l.useState(0),[N,D]=l.useState(null),p=l.useRef(null),[M,C]=l.useState(!1),[B,v]=l.useState(!1),W=l.useCallback(()=>{C(!0)},[]);Ee({pageType:"home"}),l.useEffect(()=>{(async()=>{try{const z=await(await fetch("https://v.xiaoxiong.pt/api/get_info")).json();z&&D({order_count:z.order_count||0,reserve_count:z.reserve_count||0})}catch(j){console.error("Failed to fetch stats:",j)}})()},[]),l.useEffect(()=>{if(!r||r.length<=1)return;const g=r[y],j=(g==null?void 0:g.duration)||5e3;return p.current=setTimeout(()=>{_(z=>(z+1)%r.length)},j),()=>{p.current&&clearTimeout(p.current)}},[r,y]);const S=l.useCallback(g=>{p.current&&clearTimeout(p.current),_(g)},[]);l.useCallback(()=>{r&&(p.current&&clearTimeout(p.current),_(g=>(g-1+r.length)%r.length))},[r]),l.useCallback(()=>{r&&(p.current&&clearTimeout(p.current),_(g=>(g+1)%r.length))},[r]);const V=b.language,$=r&&r.length>1;return e.jsxs("div",{className:"min-h-screen",children:[e.jsxs("section",{className:"relative min-h-screen flex items-start overflow-hidden bg-background",children:[N&&e.jsx(de,{stats:N,t}),e.jsx("div",{className:I("absolute inset-0 w-full h-full transition-opacity duration-500",M?"opacity-100":"opacity-0"),children:r==null?void 0:r.map((g,j)=>e.jsx(me,{template:g,isActive:j===y,currentLang:V,t,onContentReady:j===0?W:void 0,onAskXiaoxiong:()=>v(!0)},g.id))}),e.jsx("div",{className:I("absolute inset-0 w-full h-full z-20 transition-opacity duration-500",x||!M?"opacity-100":"opacity-0 pointer-events-none"),children:e.jsx(Te,{})}),!x&&(!r||r.length===0)&&e.jsxs("div",{className:"absolute inset-0 w-full h-full",children:[e.jsx("img",{src:ce,alt:"Background",className:"absolute inset-0 w-full h-full object-cover object-center sm:hidden"}),e.jsx("img",{src:Q,alt:"Background",className:"absolute inset-0 w-full h-full object-cover object-center hidden sm:block"}),e.jsx("div",{className:"absolute inset-0 w-full h-full bg-gradient-to-b from-black/30 via-black/25 to-black/40"}),e.jsx("div",{className:"relative z-10 container mx-auto px-4 sm:px-6 flex items-center min-h-screen",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center space-y-4 sm:space-y-8 animate-fade-in w-full",children:[e.jsx("h1",{className:"text-3xl sm:text-5xl md:text-7xl font-bold text-white leading-tight px-4 drop-shadow-[0_2px_8px_rgba(0,0,0,0.8)]",children:t("home.hero.title")}),e.jsx("p",{className:"text-sm sm:text-xl md:text-2xl text-white/95 max-w-2xl mx-auto px-4 drop-shadow-[0_2px_6px_rgba(0,0,0,0.7)]",children:t("home.hero.description")})]})})]}),$&&e.jsx("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 z-30 flex gap-2",children:r.map((g,j)=>e.jsx("button",{onClick:()=>S(j),className:I("w-3 h-3 rounded-full transition-all duration-300",j===y?"bg-white w-8":"bg-white/50 hover:bg-white/70"),"aria-label":`Go to slide ${j+1}`},j))})]}),e.jsx("section",{className:"py-16 sm:py-24 px-4 bg-secondary/20",children:e.jsxs("div",{className:"container mx-auto max-w-6xl",children:[e.jsxs("div",{className:"text-center mb-12 sm:mb-16",children:[e.jsx("h2",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-foreground mb-3 sm:mb-4",children:t("home.features.title")}),e.jsx("p",{className:"text-base sm:text-lg text-muted-foreground max-w-2xl mx-auto px-4",children:t("home.features.description")})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 sm:gap-8",children:[e.jsx(X,{to:"/map",Icon:De,title:t("home.features.map.title"),desc:t("home.features.map.desc"),iconBg:"bg-gradient-to-br from-primary to-primary-light",iconColor:"text-primary-foreground",hoverBorderColor:"hover:border-primary/50"}),e.jsx(X,{to:"/restaurants",Icon:Le,title:t("home.features.reviews.title"),desc:t("home.features.reviews.desc"),iconBg:"bg-gradient-to-br from-accent to-warning",iconColor:"text-accent-foreground",hoverBorderColor:"hover:border-accent/50"}),e.jsx("div",{className:"sm:col-span-2 md:col-span-1",children:e.jsx(X,{to:"/activities",Icon:le,title:t("home.features.events.title"),desc:t("home.features.events.desc"),iconBg:"bg-gradient-to-br from-success to-accent",iconColor:"text-white",hoverBorderColor:"hover:border-success/50"})})]})]})}),e.jsxs("section",{className:"py-16 sm:py-24 px-4 bg-gradient-to-br from-primary/5 via-background to-primary/10 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-1/4 w-72 h-72 bg-primary/10 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 right-1/4 w-96 h-96 bg-primary/5 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute top-1/2 left-0 w-32 h-32 bg-primary/20 rounded-full blur-2xl -translate-y-1/2"}),e.jsx("div",{className:"absolute top-1/2 right-0 w-32 h-32 bg-primary/20 rounded-full blur-2xl -translate-y-1/2"}),e.jsx("div",{className:"container mx-auto max-w-5xl relative z-10",children:e.jsx("div",{className:"flex flex-col items-center justify-center gap-8",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 bg-primary/10 text-primary text-sm font-medium px-4 py-2 rounded-full mb-4",children:[e.jsx(He,{className:"w-4 h-4"}),e.jsx("span",{children:"Mobile App"})]}),e.jsx("h3",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-foreground mb-4",children:t("home.app.title")}),e.jsx("p",{className:"text-base sm:text-lg text-muted-foreground mb-8 leading-relaxed",children:t("home.app.description")}),e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[e.jsxs("a",{href:"https://apps.apple.com/cn/app/xiaoxiong/id6755481369",target:"_blank",rel:"noopener noreferrer",className:"relative group",children:[e.jsx("div",{className:"absolute -inset-2 bg-gradient-to-r from-primary via-primary-glow to-primary rounded-2xl blur-lg opacity-40 group-hover:opacity-70 transition-opacity"}),e.jsx("div",{className:"relative bg-black hover:bg-gray-900 h-[52px] sm:h-[56px] w-[160px] sm:w-[180px] rounded-xl transition-all hover:scale-105 shadow-2xl hover:shadow-primary/30 border border-white/10 flex items-center justify-center",children:e.jsx("img",{src:Xe,alt:"Download on the App Store",className:"h-8 sm:h-9"})})]}),e.jsxs("a",{href:"https://play.google.com/store/apps/details?id=com.xiaoxiong.market",target:"_blank",rel:"noopener noreferrer",className:"relative group",children:[e.jsx("div",{className:"absolute -inset-2 bg-gradient-to-r from-primary via-primary-glow to-primary rounded-2xl blur-lg opacity-40 group-hover:opacity-70 transition-opacity"}),e.jsx("div",{className:"relative bg-black hover:bg-gray-900 h-[52px] sm:h-[56px] w-[160px] sm:w-[180px] rounded-xl transition-all hover:scale-105 shadow-2xl hover:shadow-primary/30 border border-white/10 flex items-center justify-center",children:e.jsx("img",{src:Fe,alt:"Get it on Google Play",className:"h-12 sm:h-14"})})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(We,{className:"w-4 h-4 animate-bounce"}),e.jsx("span",{children:t("home.app.downloadNow")})]})]})]})})})]}),e.jsxs("section",{className:"py-16 sm:py-20 px-4 bg-gradient-to-br from-primary via-primary-glow to-primary-light relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-grid-pattern opacity-10"}),e.jsx("div",{className:"absolute top-0 right-0 w-64 sm:w-96 h-64 sm:h-96 bg-white/5 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-64 sm:w-96 h-64 sm:h-96 bg-white/5 rounded-full blur-3xl"}),e.jsxs("div",{className:"container mx-auto max-w-4xl text-center relative z-10",children:[e.jsx("h2",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-primary-foreground mb-4 sm:mb-6 px-4",children:t("home.cta.title")}),e.jsx("p",{className:"text-base sm:text-xl text-primary-foreground/90 mb-6 sm:mb-8 max-w-2xl mx-auto px-4",children:t("home.cta.description")}),e.jsx("div",{className:"flex justify-center",children:e.jsx(U,{size:"lg",variant:"secondary",asChild:!0,className:"text-base sm:text-lg shadow-xl hover:shadow-2xl",children:e.jsxs(q,{to:"/join-us",children:[e.jsx(Me,{className:"mr-2 w-4 sm:w-5 h-4 sm:h-5"}),t("home.cta.button")]})})})]})]}),e.jsx(qe,{open:B,onOpenChange:v})]})};export{lt as default};
