import{r as n,cf as x,j as e,X as T}from"./vendor-react-GBbt7axl.js";import{h as j}from"./index-BmtH5NHW.js";const E=({imageUrl:r,isOpen:u,onClose:c,disableLongImage:y=!1})=>{const[h,f]=n.useState(!1),[m,g]=n.useState(!1),[o,i]=n.useState(null),a=n.useRef(null);n.useEffect(()=>{if(u){const t=window.scrollY;return document.body.style.position="fixed",document.body.style.top=`-${t}px`,document.body.style.left="0",document.body.style.right="0",document.body.style.overflow="hidden",()=>{document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.overflow="",window.scrollTo(0,t)}}},[u]),n.useEffect(()=>{f(!1),g(!1)},[r]);const b=t=>{const l=t.currentTarget,s=l.naturalHeight/l.naturalWidth;f(y?!1:s>1.5),g(!0)},p=t=>{t.target===t.currentTarget&&c()},w=t=>{if(!o)return;const l=t.changedTouches[0],s=Math.abs(l.clientY-o.y),d=a.current,v=d?Math.abs(d.scrollTop-o.scrollTop):0;s<15&&v<15&&(t.preventDefault(),c()),i(null)};return u?x.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[100] bg-black",style:{left:0,right:0,top:0,bottom:0,width:"100vw",height:"100dvh",overflow:"hidden",margin:0,padding:0},children:[e.jsx(j,{variant:"ghost",size:"icon",className:"absolute top-4 right-4 z-10 text-white hover:bg-white/20",onClick:c,children:e.jsx(T,{className:"h-6 w-6"})}),e.jsxs("div",{ref:a,className:"w-full h-full overflow-x-hidden overscroll-contain",style:{overflowY:h?"scroll":"hidden",WebkitOverflowScrolling:"touch"},onClick:p,onTouchStart:t=>{i({y:t.touches[0].clientY,scrollTop:a.current?.scrollTop||0})},onTouchEnd:w,onMouseDown:t=>{i({y:t.clientY,scrollTop:a.current?.scrollTop||0})},onMouseUp:t=>{if(o){const l=Math.abs(t.clientY-o.y),s=a.current,d=s?Math.abs(s.scrollTop-o.scrollTop):0;l<10&&d<10&&c(),i(null)}},children:[!m&&e.jsx("img",{src:r,alt:"",onLoad:b,style:{position:"absolute",opacity:0,pointerEvents:"none"}}),m&&(h?e.jsx("img",{src:r,alt:"",draggable:!1,className:"block select-none",style:{width:"100vw",minWidth:"100vw",minHeight:"100dvh",height:"auto",margin:0,objectFit:"cover",objectPosition:"top center"}}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",onClick:c,children:e.jsx("img",{src:r,alt:"",draggable:!1,className:"max-w-full max-h-full object-contain select-none"})}))]})]}),document.body):null};export{E as I};
//# sourceMappingURL=ImagePreviewModal-Duc4hj0x.js.map
