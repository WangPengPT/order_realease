{"version":3,"file":"AdminAIConfigDetail-zEOCqT2s.js","sources":["../../src/components/admin/AgentDemoDialog.tsx","../../src/pages/admin/AdminAIConfigDetail.tsx"],"sourcesContent":["import { useState, useRef, useEffect } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from \"@/components/ui/dialog\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Send, Trash2, Bot, User } from \"lucide-react\";\r\n\r\ninterface AgentDemoDialogProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n}\r\n\r\ninterface Message {\r\n  id: string;\r\n  role: \"user\" | \"assistant\";\r\n  content: string;\r\n  isStreaming?: boolean;\r\n}\r\n\r\nconst AgentDemoDialog = ({ open, onOpenChange }: AgentDemoDialogProps) => {\r\n  const { t } = useTranslation();\r\n  const [userId, setUserId] = useState(\"T1\");\r\n  const [messages, setMessages] = useState<Message[]>([]);\r\n  const [input, setInput] = useState(\"\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [streamingContent, setStreamingContent] = useState(\"\");\r\n  const [streamingMessageId, setStreamingMessageId] = useState<string | null>(null);\r\n  const scrollAreaRef = useRef<HTMLDivElement>(null);\r\n  const abortControllerRef = useRef<AbortController | null>(null);\r\n\r\n  // Auto-scroll to bottom when messages change\r\n  useEffect(() => {\r\n    if (scrollAreaRef.current) {\r\n      const scrollContainer = scrollAreaRef.current.querySelector('[data-radix-scroll-area-viewport]');\r\n      if (scrollContainer) {\r\n        scrollContainer.scrollTop = scrollContainer.scrollHeight;\r\n      }\r\n    }\r\n  }, [messages]);\r\n\r\n  const handleClear = () => {\r\n    if (abortControllerRef.current) {\r\n      abortControllerRef.current.abort();\r\n    }\r\n    setMessages([]);\r\n    setStreamingContent(\"\");\r\n    setStreamingMessageId(null);\r\n    setIsLoading(false);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    if (abortControllerRef.current) {\r\n      abortControllerRef.current.abort();\r\n    }\r\n    onOpenChange(false);\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    if (!input.trim() || isLoading) return;\r\n\r\n    const userMessage: Message = {\r\n      id: Date.now().toString(),\r\n      role: \"user\",\r\n      content: input.trim(),\r\n    };\r\n\r\n    setMessages((prev) => [...prev, userMessage]);\r\n    setInput(\"\");\r\n    setIsLoading(true);\r\n\r\n    // Create assistant message placeholder\r\n    const assistantMessageId = (Date.now() + 1).toString();\r\n    setStreamingMessageId(assistantMessageId);\r\n    setStreamingContent(\"\");\r\n    setMessages((prev) => [\r\n      ...prev,\r\n      { id: assistantMessageId, role: \"assistant\", content: \"\", isStreaming: true },\r\n    ]);\r\n\r\n    try {\r\n      abortControllerRef.current = new AbortController();\r\n\r\n      // Call demo API directly\r\n      const response = await fetch(\"https://xiaoxiongmarket.com/ai/demo/api/chat\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          message: userMessage.content,\r\n          userId: userId,\r\n        }),\r\n        signal: abortControllerRef.current.signal,\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`API error: ${response.status}`);\r\n      }\r\n\r\n      const reader = response.body?.getReader();\r\n      const decoder = new TextDecoder();\r\n\r\n      if (reader) {\r\n        let fullContent = \"\";\r\n\r\n        while (true) {\r\n          const { done, value } = await reader.read();\r\n          if (done) break;\r\n\r\n          const chunk = decoder.decode(value, { stream: true });\r\n          fullContent += chunk;\r\n\r\n          // Áõ¥Êé•Êõ¥Êñ∞ streamingContent stateÔºå‰∏çÈÄöËøá messages\r\n          setStreamingContent(fullContent);\r\n          \r\n          // Ê∑ªÂä†ÂæÆÂ∞èÂª∂ËøüËÆ©ÊµèËßàÂô®ÊúâÊú∫‰ºöÊ∏≤Êüì\r\n          await new Promise(resolve => setTimeout(resolve, 0));\r\n        }\r\n\r\n        // Â§ÑÁêÜ decoder Ââ©‰ΩôÂÜÖÂÆπ\r\n        const remaining = decoder.decode();\r\n        if (remaining) {\r\n          fullContent += remaining;\r\n        }\r\n\r\n        // ÊµÅÂºè‰º†ËæìÂÆåÊàêÔºåÂ∞ÜÊúÄÁªàÂÜÖÂÆπ‰øùÂ≠òÂà∞ messages\r\n        setMessages((prev) =>\r\n          prev.map((msg) =>\r\n            msg.id === assistantMessageId\r\n              ? { ...msg, content: fullContent, isStreaming: false }\r\n              : msg\r\n          )\r\n        );\r\n        setStreamingContent(\"\");\r\n        setStreamingMessageId(null);\r\n      }\r\n    } catch (error) {\r\n      if ((error as Error).name === \"AbortError\") {\r\n        console.log(\"Request aborted\");\r\n      } else {\r\n        console.error(\"Chat error:\", error);\r\n        setMessages((prev) =>\r\n          prev.map((msg) =>\r\n            msg.id === assistantMessageId\r\n              ? {\r\n                  ...msg,\r\n                  content: t(\"error.general\", \"ÂèëÁîüÈîôËØØÔºåËØ∑ÈáçËØï\"),\r\n                  isStreaming: false,\r\n                }\r\n              : msg\r\n          )\r\n        );\r\n      }\r\n      setStreamingContent(\"\");\r\n      setStreamingMessageId(null);\r\n    } finally {\r\n      setIsLoading(false);\r\n      abortControllerRef.current = null;\r\n    }\r\n  };\r\n\r\n  const handleKeyDown = (e: React.KeyboardEvent) => {\r\n    if (e.key === \"Enter\" && !e.shiftKey) {\r\n      e.preventDefault();\r\n      handleSubmit();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={handleClose}>\r\n      <DialogContent className=\"sm:max-w-[600px] h-[80vh] flex flex-col\">\r\n        <DialogHeader>\r\n          <DialogTitle className=\"flex items-center gap-2\">\r\n            <Bot className=\"h-5 w-5\" />\r\n            {t(\"admin.aiSettings.agentDemo\", \"Agent Demo ÊµãËØï\")}\r\n          </DialogTitle>\r\n        </DialogHeader>\r\n\r\n        {/* User ID Input */}\r\n        <div className=\"flex items-center gap-2 py-2\">\r\n          <Label htmlFor=\"demo-user-id\" className=\"whitespace-nowrap\">\r\n            {t(\"admin.aiSettings.testUserId\", \"ÊµãËØïÁî®Êà∑ID\")}:\r\n          </Label>\r\n          <Input\r\n            id=\"demo-user-id\"\r\n            value={userId}\r\n            onChange={(e) => setUserId(e.target.value)}\r\n            className=\"flex-1\"\r\n            placeholder=\"T1\"\r\n          />\r\n          <Button variant=\"outline\" size=\"sm\" onClick={handleClear}>\r\n            <Trash2 className=\"h-4 w-4 mr-1\" />\r\n            {t(\"admin.aiSettings.clearChat\", \"Ê∏ÖÁ©∫\")}\r\n          </Button>\r\n        </div>\r\n\r\n        {/* Chat Messages */}\r\n        <ScrollArea ref={scrollAreaRef} className=\"flex-1 border rounded-md p-4\">\r\n          {messages.length === 0 ? (\r\n            <div className=\"flex items-center justify-center h-full text-muted-foreground\">\r\n              {t(\"admin.aiSettings.startChat\", \"ÂèëÈÄÅÊ∂àÊÅØÂºÄÂßãÊµãËØï\")}\r\n            </div>\r\n          ) : (\r\n            <div className=\"space-y-4\">\r\n              {messages.map((message) => (\r\n                <div\r\n                  key={message.id}\r\n                  className={`flex gap-2 ${\r\n                    message.role === \"user\" ? \"justify-end\" : \"justify-start\"\r\n                  }`}\r\n                >\r\n                  {message.role === \"assistant\" && (\r\n                    <div className=\"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0\">\r\n                      <Bot className=\"h-4 w-4 text-primary\" />\r\n                    </div>\r\n                  )}\r\n                  <div\r\n                    className={`max-w-[80%] rounded-lg px-4 py-2 ${\r\n                      message.role === \"user\"\r\n                        ? \"bg-primary text-primary-foreground\"\r\n                        : \"bg-muted\"\r\n                    }`}\r\n                  >\r\n                    <p className=\"whitespace-pre-wrap break-words\">\r\n                      {message.id === streamingMessageId ? streamingContent : message.content}\r\n                      {message.isStreaming && (\r\n                        <span className=\"inline-block w-2 h-4 ml-1 bg-current animate-pulse\" />\r\n                      )}\r\n                    </p>\r\n                  </div>\r\n                  {message.role === \"user\" && (\r\n                    <div className=\"w-8 h-8 rounded-full bg-secondary flex items-center justify-center flex-shrink-0\">\r\n                      <User className=\"h-4 w-4\" />\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </ScrollArea>\r\n\r\n        {/* Input Area */}\r\n        <div className=\"flex gap-2 pt-2\">\r\n          <Input\r\n            value={input}\r\n            onChange={(e) => setInput(e.target.value)}\r\n            onKeyDown={handleKeyDown}\r\n            placeholder={t(\"admin.aiSettings.inputPlaceholder\", \"ËæìÂÖ•Ê∂àÊÅØ...\")}\r\n            disabled={isLoading}\r\n            className=\"flex-1\"\r\n          />\r\n          <Button onClick={handleSubmit} disabled={isLoading || !input.trim()}>\r\n            <Send className=\"h-4 w-4\" />\r\n          </Button>\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default AgentDemoDialog;\r\n","import { useState, useEffect } from \"react\";\r\nimport { useParams, Link } from \"react-router-dom\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\nimport { Skeleton } from \"@/components/ui/skeleton\";\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\nimport { Accordion, AccordionContent, AccordionItem, AccordionTrigger } from \"@/components/ui/accordion\";\r\nimport { \r\n  Settings, Play, Loader2, RefreshCw, Rocket, FlaskConical, FileText, \r\n  Plus, X, CheckCircle2, Copy, Eye, EyeOff, ArrowLeft \r\n} from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\nimport AgentDemoDialog from \"@/components/admin/AgentDemoDialog\";\r\n\r\ninterface ModelConfig {\r\n  name: string;\r\n  baseURL: string;\r\n}\r\n\r\ninterface SystemPromptConfig {\r\n  introduction: string;\r\n  responseProcedure: string[];\r\n  matchRequirements: string[];\r\n  formatRequirements: string[];\r\n  prohibitedContent: string[];\r\n  requiredElements: string[];\r\n}\r\n\r\nconst SUPABASE_URL = import.meta.env.VITE_SUPABASE_URL;\r\nconst SUPABASE_KEY = import.meta.env.VITE_SUPABASE_PUBLISHABLE_KEY;\r\n\r\nconst AdminAIConfigDetail = () => {\r\n  const { t } = useTranslation();\r\n  const { provider } = useParams<{ provider: string }>();\r\n  \r\n  // Main model configuration state (read-only display)\r\n  const [mainModelConfig, setMainModelConfig] = useState<ModelConfig | null>(null);\r\n  const [isLoadingMain, setIsLoadingMain] = useState(false);\r\n  \r\n  // Demo model configuration state (editable)\r\n  const [demoModelConfig, setDemoModelConfig] = useState<ModelConfig | null>(null);\r\n  const [isLoadingDemo, setIsLoadingDemo] = useState(false);\r\n  \r\n  // Form state for demo config\r\n  const [newModelName, setNewModelName] = useState(\"\");\r\n  const [newBaseURL, setNewBaseURL] = useState(\"\");\r\n  \r\n  // System prompt states\r\n  const [mainSystemPrompt, setMainSystemPrompt] = useState<SystemPromptConfig | null>(null);\r\n  const [isLoadingMainPrompt, setIsLoadingMainPrompt] = useState(false);\r\n  const [demoSystemPrompt, setDemoSystemPrompt] = useState<SystemPromptConfig | null>(null);\r\n  const [isLoadingDemoPrompt, setIsLoadingDemoPrompt] = useState(false);\r\n  \r\n  // Editable demo system prompt\r\n  const [editablePrompt, setEditablePrompt] = useState<SystemPromptConfig>({\r\n    introduction: \"\",\r\n    responseProcedure: [],\r\n    matchRequirements: [],\r\n    formatRequirements: [],\r\n    prohibitedContent: [],\r\n    requiredElements: [],\r\n  });\r\n  \r\n  // Action states\r\n  const [isSavingDemo, setIsSavingDemo] = useState(false);\r\n  const [isApplyingToMain, setIsApplyingToMain] = useState(false);\r\n  const [isSavingDemoPrompt, setIsSavingDemoPrompt] = useState(false);\r\n  const [demoDialogOpen, setDemoDialogOpen] = useState(false);\r\n  \r\n  // UI states\r\n  const [showMainPromptDetails, setShowMainPromptDetails] = useState(false);\r\n\r\n  // Fetch main model configuration\r\n  const fetchMainConfig = async () => {\r\n    setIsLoadingMain(true);\r\n    try {\r\n      const response = await fetch(\r\n        `${SUPABASE_URL}/functions/v1/xiaoxiong-agent-model?type=main&endpoint=model`,\r\n        {\r\n          method: 'GET',\r\n          headers: {\r\n            'Authorization': `Bearer ${SUPABASE_KEY}`,\r\n            'Content-Type': 'application/json',\r\n          },\r\n        }\r\n      );\r\n\r\n      if (!response.ok) throw new Error('Failed to fetch main config');\r\n      \r\n      const result = await response.json();\r\n      if (result?.success && result?.data) {\r\n        setMainModelConfig(result.data);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Failed to fetch main model config:\", error);\r\n      toast.error(\"Ëé∑Âèñ‰∏ªÈ°µÊ®°ÂûãÈÖçÁΩÆÂ§±Ë¥•\");\r\n    } finally {\r\n      setIsLoadingMain(false);\r\n    }\r\n  };\r\n\r\n  // Fetch demo model configuration\r\n  const fetchDemoConfig = async () => {\r\n    setIsLoadingDemo(true);\r\n    try {\r\n      const response = await fetch(\r\n        `${SUPABASE_URL}/functions/v1/xiaoxiong-agent-model?type=demo&endpoint=model`,\r\n        {\r\n          method: 'GET',\r\n          headers: {\r\n            'Authorization': `Bearer ${SUPABASE_KEY}`,\r\n            'Content-Type': 'application/json',\r\n          },\r\n        }\r\n      );\r\n\r\n      if (!response.ok) throw new Error('Failed to fetch demo config');\r\n      \r\n      const result = await response.json();\r\n      if (result?.success && result?.data) {\r\n        setDemoModelConfig(result.data);\r\n        setNewModelName(result.data.name || \"\");\r\n        setNewBaseURL(result.data.baseURL || \"\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Failed to fetch demo model config:\", error);\r\n      toast.error(\"Ëé∑ÂèñDemoÊ®°ÂûãÈÖçÁΩÆÂ§±Ë¥•\");\r\n    } finally {\r\n      setIsLoadingDemo(false);\r\n    }\r\n  };\r\n\r\n  // Fetch main system prompt\r\n  const fetchMainSystemPrompt = async () => {\r\n    setIsLoadingMainPrompt(true);\r\n    try {\r\n      const response = await fetch(\r\n        `${SUPABASE_URL}/functions/v1/xiaoxiong-agent-model?type=main&endpoint=system_prompt`,\r\n        {\r\n          method: 'GET',\r\n          headers: {\r\n            'Authorization': `Bearer ${SUPABASE_KEY}`,\r\n            'Content-Type': 'application/json',\r\n          },\r\n        }\r\n      );\r\n\r\n      if (!response.ok) throw new Error('Failed to fetch main system prompt');\r\n      \r\n      const result = await response.json();\r\n      if (result?.success && result?.data) {\r\n        setMainSystemPrompt(result.data);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Failed to fetch main system prompt:\", error);\r\n      toast.error(\"Ëé∑Âèñ‰∏ªÈ°µÁ≥ªÁªüÊèêÁ§∫ËØçÂ§±Ë¥•\");\r\n    } finally {\r\n      setIsLoadingMainPrompt(false);\r\n    }\r\n  };\r\n\r\n  // Fetch demo system prompt\r\n  const fetchDemoSystemPrompt = async () => {\r\n    setIsLoadingDemoPrompt(true);\r\n    try {\r\n      const response = await fetch(\r\n        `${SUPABASE_URL}/functions/v1/xiaoxiong-agent-model?type=demo&endpoint=system_prompt`,\r\n        {\r\n          method: 'GET',\r\n          headers: {\r\n            'Authorization': `Bearer ${SUPABASE_KEY}`,\r\n            'Content-Type': 'application/json',\r\n          },\r\n        }\r\n      );\r\n\r\n      if (!response.ok) throw new Error('Failed to fetch demo system prompt');\r\n      \r\n      const result = await response.json();\r\n      if (result?.success && result?.data) {\r\n        setDemoSystemPrompt(result.data);\r\n        setEditablePrompt(result.data);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Failed to fetch demo system prompt:\", error);\r\n      toast.error(\"Ëé∑ÂèñDemoÁ≥ªÁªüÊèêÁ§∫ËØçÂ§±Ë¥•\");\r\n    } finally {\r\n      setIsLoadingDemoPrompt(false);\r\n    }\r\n  };\r\n\r\n  // Save demo model configuration\r\n  const handleSaveDemoConfig = async () => {\r\n    if (!newModelName.trim() || !newBaseURL.trim()) {\r\n      toast.error(\"ËØ∑Â°´ÂÜôÊâÄÊúâÂ≠óÊÆµ\");\r\n      return;\r\n    }\r\n\r\n    setIsSavingDemo(true);\r\n    try {\r\n      const response = await fetch(\r\n        `${SUPABASE_URL}/functions/v1/xiaoxiong-agent-model?type=demo&endpoint=model`,\r\n        {\r\n          method: 'POST',\r\n          headers: {\r\n            'Authorization': `Bearer ${SUPABASE_KEY}`,\r\n            'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify({\r\n            name: newModelName.trim(),\r\n            baseURL: newBaseURL.trim(),\r\n          }),\r\n        }\r\n      );\r\n\r\n      if (!response.ok) throw new Error('Failed to save demo config');\r\n      \r\n      const result = await response.json();\r\n      if (result?.success) {\r\n        setDemoModelConfig(result.data);\r\n        toast.success(\"DemoÊ®°ÂûãÈÖçÁΩÆÂ∑≤‰øùÂ≠ò\");\r\n      } else {\r\n        throw new Error(result?.error || \"Unknown error\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Failed to save demo config:\", error);\r\n      toast.error(\"‰øùÂ≠òDemoÈÖçÁΩÆÂ§±Ë¥•\");\r\n    } finally {\r\n      setIsSavingDemo(false);\r\n    }\r\n  };\r\n\r\n  // Save demo system prompt\r\n  const handleSaveDemoPrompt = async () => {\r\n    setIsSavingDemoPrompt(true);\r\n    try {\r\n      const response = await fetch(\r\n        `${SUPABASE_URL}/functions/v1/xiaoxiong-agent-model?type=demo&endpoint=system_prompt`,\r\n        {\r\n          method: 'PATCH',\r\n          headers: {\r\n            'Authorization': `Bearer ${SUPABASE_KEY}`,\r\n            'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify(editablePrompt),\r\n        }\r\n      );\r\n\r\n      if (!response.ok) throw new Error('Failed to save demo system prompt');\r\n      \r\n      const result = await response.json();\r\n      if (result?.success) {\r\n        setDemoSystemPrompt(result.data);\r\n        toast.success(\"DemoÁ≥ªÁªüÊèêÁ§∫ËØçÂ∑≤‰øùÂ≠ò\");\r\n      } else {\r\n        throw new Error(result?.error || \"Unknown error\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Failed to save demo system prompt:\", error);\r\n      toast.error(\"‰øùÂ≠òDemoÁ≥ªÁªüÊèêÁ§∫ËØçÂ§±Ë¥•\");\r\n    } finally {\r\n      setIsSavingDemoPrompt(false);\r\n    }\r\n  };\r\n\r\n  // Apply ALL demo configs to main (model + system prompt)\r\n  const handleApplyAllToMain = async () => {\r\n    if (!newModelName.trim() || !newBaseURL.trim()) {\r\n      toast.error(\"ËØ∑ÂÖàÈÖçÁΩÆDemoÊ®°Âûã\");\r\n      return;\r\n    }\r\n\r\n    setIsApplyingToMain(true);\r\n    \r\n    try {\r\n      // Apply model config\r\n      const modelResponse = await fetch(\r\n        `${SUPABASE_URL}/functions/v1/xiaoxiong-agent-model?type=main&endpoint=model`,\r\n        {\r\n          method: 'POST',\r\n          headers: {\r\n            'Authorization': `Bearer ${SUPABASE_KEY}`,\r\n            'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify({\r\n            name: newModelName.trim(),\r\n            baseURL: newBaseURL.trim(),\r\n          }),\r\n        }\r\n      );\r\n\r\n      if (!modelResponse.ok) throw new Error('Failed to apply model to main');\r\n      \r\n      const modelResult = await modelResponse.json();\r\n      if (!modelResult?.success) {\r\n        throw new Error(modelResult?.error || \"Model apply failed\");\r\n      }\r\n      setMainModelConfig(modelResult.data);\r\n\r\n      // Apply system prompt\r\n      const promptResponse = await fetch(\r\n        `${SUPABASE_URL}/functions/v1/xiaoxiong-agent-model?type=main&endpoint=system_prompt`,\r\n        {\r\n          method: 'PATCH',\r\n          headers: {\r\n            'Authorization': `Bearer ${SUPABASE_KEY}`,\r\n            'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify(editablePrompt),\r\n        }\r\n      );\r\n\r\n      if (!promptResponse.ok) throw new Error('Failed to apply system prompt to main');\r\n      \r\n      const promptResult = await promptResponse.json();\r\n      if (!promptResult?.success) {\r\n        throw new Error(promptResult?.error || \"Prompt apply failed\");\r\n      }\r\n      setMainSystemPrompt(promptResult.data);\r\n\r\n      toast.success(\"üöÄ Ê®°ÂûãÈÖçÁΩÆÂíåÁ≥ªÁªüÊèêÁ§∫ËØçÂ∑≤ÂÖ®ÈÉ®Â∫îÁî®Âà∞‰∏ªÈ°µÔºÅ\");\r\n    } catch (error) {\r\n      console.error(\"Failed to apply to main:\", error);\r\n      toast.error(\"Â∫îÁî®Âà∞‰∏ªÈ°µÂ§±Ë¥•\");\r\n    } finally {\r\n      setIsApplyingToMain(false);\r\n    }\r\n  };\r\n\r\n  // Copy main config to demo\r\n  const handleCopyMainToDemo = () => {\r\n    if (mainModelConfig) {\r\n      setNewModelName(mainModelConfig.name);\r\n      setNewBaseURL(mainModelConfig.baseURL);\r\n    }\r\n    if (mainSystemPrompt) {\r\n      setEditablePrompt({\r\n        introduction: mainSystemPrompt.introduction || \"\",\r\n        responseProcedure: mainSystemPrompt.responseProcedure || [],\r\n        matchRequirements: mainSystemPrompt.matchRequirements || [],\r\n        formatRequirements: mainSystemPrompt.formatRequirements || [],\r\n        prohibitedContent: mainSystemPrompt.prohibitedContent || [],\r\n        requiredElements: mainSystemPrompt.requiredElements || [],\r\n      });\r\n    }\r\n    toast.success(\"Â∑≤Â§çÂà∂‰∏ªÈ°µÈÖçÁΩÆÂà∞Demo\");\r\n  };\r\n\r\n  // Refresh all configs\r\n  const handleRefreshAll = () => {\r\n    fetchMainConfig();\r\n    fetchDemoConfig();\r\n    fetchMainSystemPrompt();\r\n    fetchDemoSystemPrompt();\r\n  };\r\n\r\n  // Array field helpers\r\n  const handleAddArrayItem = (field: keyof Omit<SystemPromptConfig, 'introduction'>) => {\r\n    setEditablePrompt(prev => ({\r\n      ...prev,\r\n      [field]: [...prev[field], \"\"],\r\n    }));\r\n  };\r\n\r\n  const handleRemoveArrayItem = (field: keyof Omit<SystemPromptConfig, 'introduction'>, index: number) => {\r\n    setEditablePrompt(prev => ({\r\n      ...prev,\r\n      [field]: prev[field].filter((_, i) => i !== index),\r\n    }));\r\n  };\r\n\r\n  const handleUpdateArrayItem = (field: keyof Omit<SystemPromptConfig, 'introduction'>, index: number, value: string) => {\r\n    setEditablePrompt(prev => ({\r\n      ...prev,\r\n      [field]: prev[field].map((item, i) => i === index ? value : item),\r\n    }));\r\n  };\r\n\r\n  // Fetch all configs on page load\r\n  useEffect(() => {\r\n    if (provider === 'xiaoxiong-agent') {\r\n      fetchMainConfig();\r\n      fetchDemoConfig();\r\n      fetchMainSystemPrompt();\r\n      fetchDemoSystemPrompt();\r\n    }\r\n  }, [provider]);\r\n\r\n  const renderArrayField = (\r\n    label: string,\r\n    field: keyof Omit<SystemPromptConfig, 'introduction'>,\r\n    items: string[]\r\n  ) => (\r\n    <div className=\"space-y-3\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <Label className=\"text-sm font-medium\">{label}</Label>\r\n        <Button\r\n          type=\"button\"\r\n          variant=\"outline\"\r\n          size=\"sm\"\r\n          onClick={() => handleAddArrayItem(field)}\r\n          className=\"h-7 text-xs\"\r\n        >\r\n          <Plus className=\"h-3 w-3 mr-1\" />\r\n          Ê∑ªÂä†\r\n        </Button>\r\n      </div>\r\n      <div className=\"space-y-2\">\r\n        {items.map((item, index) => (\r\n          <div key={index} className=\"flex gap-2 items-center group\">\r\n            <span className=\"text-xs text-muted-foreground w-6 text-center shrink-0\">{index + 1}</span>\r\n            <Input\r\n              value={item}\r\n              onChange={(e) => handleUpdateArrayItem(field, index, e.target.value)}\r\n              placeholder={`ËæìÂÖ•Á¨¨ ${index + 1} Êù°ÂÜÖÂÆπ...`}\r\n              className=\"flex-1 h-9\"\r\n            />\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"h-9 w-9 opacity-0 group-hover:opacity-100 transition-opacity shrink-0\"\r\n              onClick={() => handleRemoveArrayItem(field, index)}\r\n            >\r\n              <X className=\"h-4 w-4 text-destructive\" />\r\n            </Button>\r\n          </div>\r\n        ))}\r\n        {items.length === 0 && (\r\n          <p className=\"text-sm text-muted-foreground text-center py-4 bg-muted/30 rounded-md\">\r\n            ÊöÇÊó†ÂÜÖÂÆπÔºåÁÇπÂáª‰∏äÊñπ\"Ê∑ªÂä†\"ÊåâÈíÆÊ∑ªÂä†\r\n          </p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  const getTotalPromptRules = (prompt: SystemPromptConfig | null) => {\r\n    if (!prompt) return 0;\r\n    return (\r\n      (prompt.responseProcedure?.length || 0) +\r\n      (prompt.matchRequirements?.length || 0) +\r\n      (prompt.formatRequirements?.length || 0) +\r\n      (prompt.prohibitedContent?.length || 0) +\r\n      (prompt.requiredElements?.length || 0)\r\n    );\r\n  };\r\n\r\n  // Provider name mapping\r\n  const providerNames: Record<string, string> = {\r\n    'xiaoxiong-agent': 'Â∞èÁÜäAgent',\r\n    'ask-xiaoxiong': 'Â∞èÁÜäAI',\r\n  };\r\n\r\n  const providerName = providerNames[provider || ''] || provider;\r\n\r\n  // If not xiaoxiong-agent, show not configurable message\r\n  if (provider !== 'xiaoxiong-agent') {\r\n    return (\r\n      <div className=\"p-6 space-y-6 max-w-4xl mx-auto\">\r\n        <div className=\"flex items-center gap-4\">\r\n          <Button variant=\"ghost\" size=\"sm\" asChild>\r\n            <Link to=\"/admin/ai-config\">\r\n              <ArrowLeft className=\"h-4 w-4 mr-2\" />\r\n              ËøîÂõû\r\n            </Link>\r\n          </Button>\r\n        </div>\r\n        <Card>\r\n          <CardContent className=\"pt-6 text-center\">\r\n            <p className=\"text-muted-foreground\">ËØ•AIÊúçÂä°Êó†ÈúÄÈÖçÁΩÆ</p>\r\n            <Button className=\"mt-4\" asChild>\r\n              <Link to=\"/admin/ai-config\">ËøîÂõûÈÖçÁΩÆÂàóË°®</Link>\r\n            </Button>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-6 max-w-5xl mx-auto\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div className=\"flex items-center gap-4\">\r\n          <Button variant=\"ghost\" size=\"sm\" asChild>\r\n            <Link to=\"/admin/ai-config\">\r\n              <ArrowLeft className=\"h-4 w-4 mr-2\" />\r\n              ËøîÂõû\r\n            </Link>\r\n          </Button>\r\n          <Separator orientation=\"vertical\" className=\"h-6\" />\r\n          <div className=\"flex items-center gap-3\">\r\n            <Settings className=\"h-8 w-8 text-orange-500\" />\r\n            <div>\r\n              <h1 className=\"text-2xl font-bold\">{providerName} ÈÖçÁΩÆ</h1>\r\n              <p className=\"text-muted-foreground\">\r\n                ÈÖçÁΩÆÊ®°ÂûãÂíåÁ≥ªÁªüÊèêÁ§∫ËØçÔºåÂú®DemoÁéØÂ¢ÉÊµãËØïÂêéÂ∫îÁî®Âà∞‰∏ªÈ°µ\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"flex gap-2\">\r\n          <Button variant=\"outline\" size=\"sm\" onClick={handleRefreshAll}>\r\n            <RefreshCw className=\"h-4 w-4 mr-2\" />\r\n            Âà∑Êñ∞\r\n          </Button>\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={() => setDemoDialogOpen(true)}\r\n          >\r\n            <Play className=\"h-4 w-4 mr-2\" />\r\n            DemoÊµãËØï\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Current Main Config Summary */}\r\n      <Card className=\"border-primary/20 bg-gradient-to-r from-primary/5 to-transparent\">\r\n        <CardHeader className=\"pb-3\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <CardTitle className=\"flex items-center gap-2 text-lg\">\r\n              <div className=\"h-2 w-2 rounded-full bg-green-500 animate-pulse\" />\r\n              üìå ‰∏ªÈ°µÂΩìÂâçÈÖçÁΩÆ\r\n            </CardTitle>\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"sm\"\r\n              onClick={handleCopyMainToDemo}\r\n              className=\"text-xs\"\r\n            >\r\n              <Copy className=\"h-3 w-3 mr-1\" />\r\n              Â§çÂà∂Âà∞Demo\r\n            </Button>\r\n          </div>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n            {/* Model Info */}\r\n            <div className=\"space-y-2\">\r\n              <p className=\"text-xs text-muted-foreground uppercase tracking-wide\">Ê®°ÂûãÈÖçÁΩÆ</p>\r\n              {isLoadingMain ? (\r\n                <Skeleton className=\"h-12 w-full\" />\r\n              ) : mainModelConfig ? (\r\n                <div className=\"p-3 bg-background rounded-lg space-y-1\">\r\n                  <p className=\"font-mono font-medium\">{mainModelConfig.name}</p>\r\n                  <p className=\"text-xs text-muted-foreground truncate\" title={mainModelConfig.baseURL}>\r\n                    {mainModelConfig.baseURL}\r\n                  </p>\r\n                </div>\r\n              ) : (\r\n                <p className=\"text-sm text-muted-foreground p-3 bg-background rounded-lg\">Êú™ÈÖçÁΩÆ</p>\r\n              )}\r\n            </div>\r\n\r\n            {/* Prompt Info */}\r\n            <div className=\"space-y-2\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <p className=\"text-xs text-muted-foreground uppercase tracking-wide\">Á≥ªÁªüÊèêÁ§∫ËØç</p>\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"sm\"\r\n                  onClick={() => setShowMainPromptDetails(!showMainPromptDetails)}\r\n                  className=\"h-6 text-xs\"\r\n                >\r\n                  {showMainPromptDetails ? <EyeOff className=\"h-3 w-3\" /> : <Eye className=\"h-3 w-3\" />}\r\n                </Button>\r\n              </div>\r\n              {isLoadingMainPrompt ? (\r\n                <Skeleton className=\"h-12 w-full\" />\r\n              ) : mainSystemPrompt ? (\r\n                <div className=\"p-3 bg-background rounded-lg\">\r\n                  <Badge variant=\"secondary\" className=\"text-xs\">\r\n                    {getTotalPromptRules(mainSystemPrompt)} Êù°ËßÑÂàô\r\n                  </Badge>\r\n                </div>\r\n              ) : (\r\n                <p className=\"text-sm text-muted-foreground p-3 bg-background rounded-lg\">Êú™ÈÖçÁΩÆ</p>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Main Prompt Details */}\r\n          {showMainPromptDetails && mainSystemPrompt && (\r\n            <div className=\"mt-4 pt-4 border-t space-y-2 text-sm\">\r\n              <p><span className=\"text-muted-foreground\">‰ªãÁªç: </span>{mainSystemPrompt.introduction || \"Êú™ËÆæÁΩÆ\"}</p>\r\n              <div className=\"grid grid-cols-2 md:grid-cols-5 gap-2 text-xs\">\r\n                <div className=\"p-2 bg-background rounded text-center\">\r\n                  <p className=\"font-medium\">{mainSystemPrompt.responseProcedure?.length || 0}</p>\r\n                  <p className=\"text-muted-foreground\">ÂìçÂ∫îÊµÅÁ®ã</p>\r\n                </div>\r\n                <div className=\"p-2 bg-background rounded text-center\">\r\n                  <p className=\"font-medium\">{mainSystemPrompt.matchRequirements?.length || 0}</p>\r\n                  <p className=\"text-muted-foreground\">ÂåπÈÖçË¶ÅÊ±Ç</p>\r\n                </div>\r\n                <div className=\"p-2 bg-background rounded text-center\">\r\n                  <p className=\"font-medium\">{mainSystemPrompt.formatRequirements?.length || 0}</p>\r\n                  <p className=\"text-muted-foreground\">Ê†ºÂºèË¶ÅÊ±Ç</p>\r\n                </div>\r\n                <div className=\"p-2 bg-background rounded text-center\">\r\n                  <p className=\"font-medium\">{mainSystemPrompt.prohibitedContent?.length || 0}</p>\r\n                  <p className=\"text-muted-foreground\">Á¶ÅÊ≠¢ÂÜÖÂÆπ</p>\r\n                </div>\r\n                <div className=\"p-2 bg-background rounded text-center\">\r\n                  <p className=\"font-medium\">{mainSystemPrompt.requiredElements?.length || 0}</p>\r\n                  <p className=\"text-muted-foreground\">ÂøÖÈúÄÂÖÉÁ¥†</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Demo Configuration */}\r\n      <Card>\r\n        <CardHeader className=\"pb-4\">\r\n          <CardTitle className=\"flex items-center gap-2\">\r\n            <FlaskConical className=\"h-5 w-5 text-orange-500\" />\r\n            üß™ Demo ÊµãËØïÈÖçÁΩÆ\r\n            <Badge variant=\"outline\" className=\"text-xs ml-2\">ÂèØÁºñËæë</Badge>\r\n          </CardTitle>\r\n          <CardDescription>\r\n            Âú®Ê≠§ÁºñËæëÈÖçÁΩÆÔºåÈÄöËøáDemoÊµãËØïÈ™åËØÅÂêéÂ∫îÁî®Âà∞‰∏ªÈ°µ\r\n          </CardDescription>\r\n        </CardHeader>\r\n        <CardContent className=\"space-y-6\">\r\n          <Tabs defaultValue=\"model\" className=\"w-full\">\r\n            <TabsList className=\"grid w-full grid-cols-2 mb-4\">\r\n              <TabsTrigger value=\"model\" className=\"flex items-center gap-2\">\r\n                <Settings className=\"h-4 w-4\" />\r\n                Ê®°ÂûãÈÖçÁΩÆ\r\n              </TabsTrigger>\r\n              <TabsTrigger value=\"prompt\" className=\"flex items-center gap-2\">\r\n                <FileText className=\"h-4 w-4\" />\r\n                Á≥ªÁªüÊèêÁ§∫ËØç\r\n              </TabsTrigger>\r\n            </TabsList>\r\n\r\n            {/* Model Tab */}\r\n            <TabsContent value=\"model\" className=\"space-y-4\">\r\n              {isLoadingDemo ? (\r\n                <div className=\"space-y-4\">\r\n                  <Skeleton className=\"h-10 w-full\" />\r\n                  <Skeleton className=\"h-10 w-full\" />\r\n                </div>\r\n              ) : (\r\n                <>\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                    <div className=\"space-y-2\">\r\n                      <Label htmlFor=\"model-name\">Ê®°ÂûãÂêçÁß∞</Label>\r\n                      <Input\r\n                        id=\"model-name\"\r\n                        value={newModelName}\r\n                        onChange={(e) => setNewModelName(e.target.value)}\r\n                        placeholder=\"deepseek-chat\"\r\n                      />\r\n                    </div>\r\n\r\n                    <div className=\"space-y-2\">\r\n                      <Label htmlFor=\"base-url\">Base URL</Label>\r\n                      <Input\r\n                        id=\"base-url\"\r\n                        value={newBaseURL}\r\n                        onChange={(e) => setNewBaseURL(e.target.value)}\r\n                        placeholder=\"https://api.deepseek.com\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n\r\n                  <Button\r\n                    variant=\"secondary\"\r\n                    onClick={handleSaveDemoConfig}\r\n                    disabled={isSavingDemo || !newModelName.trim() || !newBaseURL.trim()}\r\n                  >\r\n                    {isSavingDemo && <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />}\r\n                    <CheckCircle2 className=\"h-4 w-4 mr-2\" />\r\n                    ‰øùÂ≠òÊ®°ÂûãÈÖçÁΩÆ\r\n                  </Button>\r\n                </>\r\n              )}\r\n            </TabsContent>\r\n\r\n            {/* Prompt Tab */}\r\n            <TabsContent value=\"prompt\" className=\"space-y-4\">\r\n              {isLoadingDemoPrompt ? (\r\n                <div className=\"space-y-3\">\r\n                  <Skeleton className=\"h-20 w-full\" />\r\n                  <Skeleton className=\"h-32 w-full\" />\r\n                </div>\r\n              ) : (\r\n                <>\r\n                  {/* Introduction */}\r\n                  <div className=\"space-y-2\">\r\n                    <Label>ËßíËâ≤‰ªãÁªç (introduction)</Label>\r\n                    <Textarea\r\n                      value={editablePrompt.introduction}\r\n                      onChange={(e) => setEditablePrompt(prev => ({ ...prev, introduction: e.target.value }))}\r\n                      placeholder=\"‰Ω†ÊòØÂ∞èÁÜäaiÂä©ÊâãÔºåÂ∏ÆÂä©È°æÂÆ¢ÂØªÊâæÂøÉ‰ª™ÁöÑÈ§êÂéÖ...\"\r\n                      rows={3}\r\n                      className=\"resize-none\"\r\n                    />\r\n                  </div>\r\n\r\n                  <Accordion type=\"multiple\" className=\"w-full\" defaultValue={[\"responseProcedure\"]}>\r\n                    <AccordionItem value=\"responseProcedure\" className=\"border rounded-lg px-4\">\r\n                      <AccordionTrigger className=\"text-sm hover:no-underline\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                          ÂìçÂ∫îÊµÅÁ®ã\r\n                          <Badge variant=\"secondary\" className=\"text-xs\">{editablePrompt.responseProcedure.length}</Badge>\r\n                        </div>\r\n                      </AccordionTrigger>\r\n                      <AccordionContent className=\"pt-2\">\r\n                        {renderArrayField(\"ÂìçÂ∫îÊµÅÁ®ã\", \"responseProcedure\", editablePrompt.responseProcedure)}\r\n                      </AccordionContent>\r\n                    </AccordionItem>\r\n\r\n                    <AccordionItem value=\"matchRequirements\" className=\"border rounded-lg px-4 mt-2\">\r\n                      <AccordionTrigger className=\"text-sm hover:no-underline\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                          ÂåπÈÖçË¶ÅÊ±Ç\r\n                          <Badge variant=\"secondary\" className=\"text-xs\">{editablePrompt.matchRequirements.length}</Badge>\r\n                        </div>\r\n                      </AccordionTrigger>\r\n                      <AccordionContent className=\"pt-2\">\r\n                        {renderArrayField(\"ÂåπÈÖçË¶ÅÊ±Ç\", \"matchRequirements\", editablePrompt.matchRequirements)}\r\n                      </AccordionContent>\r\n                    </AccordionItem>\r\n\r\n                    <AccordionItem value=\"formatRequirements\" className=\"border rounded-lg px-4 mt-2\">\r\n                      <AccordionTrigger className=\"text-sm hover:no-underline\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                          Ê†ºÂºèË¶ÅÊ±Ç\r\n                          <Badge variant=\"secondary\" className=\"text-xs\">{editablePrompt.formatRequirements.length}</Badge>\r\n                        </div>\r\n                      </AccordionTrigger>\r\n                      <AccordionContent className=\"pt-2\">\r\n                        {renderArrayField(\"Ê†ºÂºèË¶ÅÊ±Ç\", \"formatRequirements\", editablePrompt.formatRequirements)}\r\n                      </AccordionContent>\r\n                    </AccordionItem>\r\n\r\n                    <AccordionItem value=\"prohibitedContent\" className=\"border rounded-lg px-4 mt-2\">\r\n                      <AccordionTrigger className=\"text-sm hover:no-underline\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                          Á¶ÅÊ≠¢ÂÜÖÂÆπ\r\n                          <Badge variant=\"secondary\" className=\"text-xs\">{editablePrompt.prohibitedContent.length}</Badge>\r\n                        </div>\r\n                      </AccordionTrigger>\r\n                      <AccordionContent className=\"pt-2\">\r\n                        {renderArrayField(\"Á¶ÅÊ≠¢ÂÜÖÂÆπ\", \"prohibitedContent\", editablePrompt.prohibitedContent)}\r\n                      </AccordionContent>\r\n                    </AccordionItem>\r\n\r\n                    <AccordionItem value=\"requiredElements\" className=\"border rounded-lg px-4 mt-2\">\r\n                      <AccordionTrigger className=\"text-sm hover:no-underline\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                          ÂøÖÈúÄÂÖÉÁ¥†\r\n                          <Badge variant=\"secondary\" className=\"text-xs\">{editablePrompt.requiredElements.length}</Badge>\r\n                        </div>\r\n                      </AccordionTrigger>\r\n                      <AccordionContent className=\"pt-2\">\r\n                        {renderArrayField(\"ÂøÖÈúÄÂÖÉÁ¥†\", \"requiredElements\", editablePrompt.requiredElements)}\r\n                      </AccordionContent>\r\n                    </AccordionItem>\r\n                  </Accordion>\r\n\r\n                  <Button\r\n                    variant=\"secondary\"\r\n                    onClick={handleSaveDemoPrompt}\r\n                    disabled={isSavingDemoPrompt}\r\n                  >\r\n                    {isSavingDemoPrompt && <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />}\r\n                    <CheckCircle2 className=\"h-4 w-4 mr-2\" />\r\n                    ‰øùÂ≠òÁ≥ªÁªüÊèêÁ§∫ËØç\r\n                  </Button>\r\n                </>\r\n              )}\r\n            </TabsContent>\r\n          </Tabs>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Apply All to Main Button */}\r\n      <Card className=\"border-2 border-dashed border-primary/30\">\r\n        <CardContent className=\"pt-6\">\r\n          <Button\r\n            className=\"w-full h-12 text-base font-medium\"\r\n            size=\"lg\"\r\n            onClick={handleApplyAllToMain}\r\n            disabled={isApplyingToMain || !newModelName.trim() || !newBaseURL.trim()}\r\n          >\r\n            {isApplyingToMain ? (\r\n              <Loader2 className=\"h-5 w-5 mr-2 animate-spin\" />\r\n            ) : (\r\n              <Rocket className=\"h-5 w-5 mr-2\" />\r\n            )}\r\n            üöÄ Â∫îÁî®ÂÖ®ÈÉ®ÈÖçÁΩÆÂà∞‰∏ªÈ°µ\r\n          </Button>\r\n          <p className=\"text-xs text-muted-foreground text-center mt-2\">\r\n            Â∞ÜÂêåÊó∂Â∫îÁî®Ê®°ÂûãÈÖçÁΩÆÂíåÁ≥ªÁªüÊèêÁ§∫ËØçÂà∞Áîü‰∫ßÁéØÂ¢É\r\n          </p>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Demo Dialog */}\r\n      <AgentDemoDialog open={demoDialogOpen} onOpenChange={setDemoDialogOpen} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminAIConfigDetail;\r\n"],"names":["AgentDemoDialog","open","onOpenChange","t","useTranslation","userId","setUserId","useState","messages","setMessages","input","setInput","isLoading","setIsLoading","streamingContent","setStreamingContent","streamingMessageId","setStreamingMessageId","scrollAreaRef","useRef","abortControllerRef","useEffect","scrollContainer","handleClear","handleClose","handleSubmit","userMessage","prev","assistantMessageId","response","reader","decoder","fullContent","done","value","chunk","resolve","remaining","msg","error","handleKeyDown","e","jsx","Dialog","jsxs","DialogContent","DialogHeader","DialogTitle","Bot","Label","Input","Button","Trash2","ScrollArea","message","User","Send","SUPABASE_URL","SUPABASE_KEY","AdminAIConfigDetail","provider","useParams","mainModelConfig","setMainModelConfig","isLoadingMain","setIsLoadingMain","demoModelConfig","setDemoModelConfig","isLoadingDemo","setIsLoadingDemo","newModelName","setNewModelName","newBaseURL","setNewBaseURL","mainSystemPrompt","setMainSystemPrompt","isLoadingMainPrompt","setIsLoadingMainPrompt","demoSystemPrompt","setDemoSystemPrompt","isLoadingDemoPrompt","setIsLoadingDemoPrompt","editablePrompt","setEditablePrompt","isSavingDemo","setIsSavingDemo","isApplyingToMain","setIsApplyingToMain","isSavingDemoPrompt","setIsSavingDemoPrompt","demoDialogOpen","setDemoDialogOpen","showMainPromptDetails","setShowMainPromptDetails","fetchMainConfig","result","toast","fetchDemoConfig","fetchMainSystemPrompt","fetchDemoSystemPrompt","handleSaveDemoConfig","handleSaveDemoPrompt","handleApplyAllToMain","modelResponse","modelResult","promptResponse","promptResult","handleCopyMainToDemo","handleRefreshAll","handleAddArrayItem","field","handleRemoveArrayItem","index","_","i","handleUpdateArrayItem","item","renderArrayField","label","items","Plus","X","getTotalPromptRules","prompt","providerName","Link","ArrowLeft","Card","CardContent","Separator","Settings","RefreshCw","Play","CardHeader","CardTitle","Copy","Skeleton","EyeOff","Eye","Badge","FlaskConical","CardDescription","Tabs","TabsList","TabsTrigger","FileText","TabsContent","Fragment","Loader2","CheckCircle2","Textarea","Accordion","AccordionItem","AccordionTrigger","AccordionContent","Rocket"],"mappings":"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"}