{"version":3,"file":"AdminReports-C-CYbFtv.js","sources":["../../src/pages/admin/AdminReports.tsx"],"sourcesContent":["import { useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from \"@/components/ui/dialog\";\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuTrigger,\r\n} from \"@/components/ui/dropdown-menu\";\r\nimport { Flag, ExternalLink, Loader2, Search, Filter, AlertCircle, CheckCircle, XCircle, Clock, TrendingUp, PieChart as PieChartIcon } from \"lucide-react\";\r\nimport { formatDistanceToNow, format, subDays, startOfDay } from \"date-fns\";\r\nimport { toast } from \"sonner\";\r\n\r\nimport { BarChart, Bar, PieChart, Pie, Cell, LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from \"recharts\";\r\n\r\nconst AdminReports = () => {\r\n  const { t } = useTranslation();\r\n  const queryClient = useQueryClient();\r\n  const [selectedReport, setSelectedReport] = useState<any>(null);\r\n  const [adminNotes, setAdminNotes] = useState(\"\");\r\n  const [newStatus, setNewStatus] = useState(\"\");\r\n  const [search, setSearch] = useState(\"\");\r\n  const [statusFilter, setStatusFilter] = useState<string>(\"all\");\r\n\r\n  const { data: reports, isLoading } = useQuery({\r\n    queryKey: [\"admin-reports\"],\r\n    queryFn: async () => {\r\n      const { data, error } = await supabase\r\n        .from(\"reports\" as any)\r\n        .select(`\r\n          *,\r\n          reporter:profiles(display_name, avatar_url)\r\n        `)\r\n        .order(\"created_at\", { ascending: false });\r\n\r\n      if (error) throw error;\r\n      return data;\r\n    },\r\n  });\r\n\r\n  const { data: emailConfig } = useQuery({\r\n    queryKey: [\"emailConfig\", \"report\"],\r\n    queryFn: async () => {\r\n      const { data, error } = await supabase\r\n        .from(\"email_config\")\r\n        .select(\"*\")\r\n        .eq(\"type\", \"report\")\r\n        .single();\r\n\r\n      if (error) throw error;\r\n      return data;\r\n    },\r\n  });\r\n\r\n  const filteredReports = reports?.filter((report: any) => {\r\n    const searchLower = search.toLowerCase();\r\n    const matchesSearch = \r\n      report.description.toLowerCase().includes(searchLower) ||\r\n      report.reporter?.display_name?.toLowerCase().includes(searchLower) ||\r\n      report.reason.toLowerCase().includes(searchLower);\r\n    \r\n    const matchesStatus = statusFilter === \"all\" || report.status === statusFilter;\r\n    \r\n    return matchesSearch && matchesStatus;\r\n  });\r\n\r\n  const stats = {\r\n    total: reports?.length || 0,\r\n    pending: reports?.filter((r: any) => r.status === \"pending\").length || 0,\r\n    reviewing: reports?.filter((r: any) => r.status === \"reviewing\").length || 0,\r\n    resolved: reports?.filter((r: any) => r.status === \"resolved\").length || 0,\r\n    dismissed: reports?.filter((r: any) => r.status === \"dismissed\").length || 0,\r\n  };\r\n\r\n  // Prepare data for trend chart (last 7 days)\r\n  const trendData = Array.from({ length: 7 }, (_, i) => {\r\n    const date = startOfDay(subDays(new Date(), 6 - i));\r\n    const dateStr = format(date, \"yyyy-MM-dd\");\r\n    const count = reports?.filter((r: any) => {\r\n      const reportDate = format(startOfDay(new Date(r.created_at)), \"yyyy-MM-dd\");\r\n      return reportDate === dateStr;\r\n    }).length || 0;\r\n    \r\n    return {\r\n      date: format(date, \"MM/dd\"),\r\n      count,\r\n    };\r\n  });\r\n\r\n  // Prepare data for reason distribution\r\n  const reasonData = [\r\n    \"spam\",\r\n    \"harassment\",\r\n    \"inappropriate_content\",\r\n    \"misinformation\",\r\n    \"copyright\",\r\n    \"fraud\",\r\n    \"hate_speech\",\r\n    \"violence\",\r\n    \"other\",\r\n  ].map((reason) => ({\r\n    name: t(`report.reasons.${reason}`),\r\n    value: reports?.filter((r: any) => r.reason === reason).length || 0,\r\n  })).filter(item => item.value > 0);\r\n\r\n  // Prepare data for type distribution\r\n  const typeData = [\"comment\", \"restaurant\", \"activity\", \"user\"].map((type) => ({\r\n    name: t(`admin.reportType.${type}`),\r\n    value: reports?.filter((r: any) => r.target_type === type).length || 0,\r\n  })).filter(item => item.value > 0);\r\n\r\n  const COLORS = [\"#016450\", \"#018a6f\", \"#4CAF50\", \"#81C784\", \"#FFA726\", \"#FF7043\", \"#EF5350\", \"#EC407A\", \"#AB47BC\"];\r\n\r\n  const handleUpdateEmail = async () => {\r\n    const newEmail = prompt(t(\"joinUs.enterNewEmail\"), emailConfig?.recipient_email);\r\n    if (!newEmail) return;\r\n\r\n    try {\r\n      const { error } = await supabase\r\n        .from(\"email_config\")\r\n        .update({ recipient_email: newEmail })\r\n        .eq(\"id\", emailConfig?.id);\r\n\r\n      if (error) throw error;\r\n\r\n      queryClient.invalidateQueries({ queryKey: [\"emailConfig\"] });\r\n      toast.success(t(\"joinUs.emailUpdated\"));\r\n    } catch (error) {\r\n      console.error(\"Error updating email:\", error);\r\n      toast.error(t(\"joinUs.emailUpdateError\"));\r\n    }\r\n  };\r\n\r\n  const updateReportMutation = useMutation({\r\n    mutationFn: async ({\r\n      id,\r\n      status,\r\n      notes,\r\n    }: {\r\n      id: string;\r\n      status?: string;\r\n      notes?: string;\r\n    }) => {\r\n      const updateData: any = { updated_at: new Date().toISOString() };\r\n      if (status) updateData.status = status;\r\n      if (notes !== undefined) updateData.admin_notes = notes;\r\n\r\n      const { error } = await supabase\r\n        .from(\"reports\" as any)\r\n        .update(updateData)\r\n        .eq(\"id\", id);\r\n\r\n      if (error) throw error;\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"admin-reports\"] });\r\n      toast.success(t(\"toast.reportUpdatedSuccess\"));\r\n      setSelectedReport(null);\r\n    },\r\n    onError: (error: any) => {\r\n      toast.error(error.message || t(\"toast.reportUpdateFailed\"));\r\n    },\r\n  });\r\n\r\n  const getStatusBadge = (status: string) => {\r\n    const variants: Record<string, \"default\" | \"secondary\" | \"destructive\"> = {\r\n      pending: \"default\",\r\n      reviewing: \"secondary\",\r\n      resolved: \"default\",\r\n      dismissed: \"destructive\",\r\n    };\r\n\r\n    return (\r\n      <Badge variant={variants[status] || \"default\"}>\r\n        {t(`admin.reportStatus.${status}`)}\r\n      </Badge>\r\n    );\r\n  };\r\n\r\n  const getTargetLink = (type: string, id: string) => {\r\n    switch (type) {\r\n      case \"restaurant\":\r\n        return `/restaurant/${id}`;\r\n      case \"activity\":\r\n        return `/activity/${id}`;\r\n      case \"comment\":\r\n        return \"#\"; // Comments don't have direct links\r\n      case \"user\":\r\n        return \"/profile\";\r\n      default:\r\n        return \"#\";\r\n    }\r\n  };\r\n\r\n  const handleViewReport = (report: any) => {\r\n    setSelectedReport(report);\r\n    setAdminNotes(report.admin_notes || \"\");\r\n    setNewStatus(report.status);\r\n  };\r\n\r\n  const handleUpdateStatus = () => {\r\n    if (selectedReport) {\r\n      updateReportMutation.mutate({\r\n        id: selectedReport.id,\r\n        status: newStatus,\r\n        notes: adminNotes,\r\n      });\r\n    }\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-64\">\r\n        <Loader2 className=\"w-8 h-8 animate-spin\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"space-y-6\">\r\n        <div>\r\n          <h2 className=\"text-3xl font-bold\">{t(\"admin.reports\")}</h2>\r\n          <p className=\"text-muted-foreground mt-2\">{t(\"admin.reportsDescription\")}</p>\r\n        </div>\r\n\r\n        <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>{t(\"joinUs.recipientEmail\")}</CardTitle>\r\n              <CardDescription>{t(\"joinUs.recipientEmailDesc\")}</CardDescription>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <div className=\"flex items-center gap-4\">\r\n                <Input value={emailConfig?.recipient_email || \"\"} readOnly />\r\n                <Button onClick={handleUpdateEmail}>{t(\"common.edit\")}</Button>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          <Card>\r\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n              <CardTitle className=\"text-sm font-medium\">{t(\"admin.totalReports\")}</CardTitle>\r\n              <Flag className=\"h-4 w-4 text-muted-foreground\" />\r\n            </CardHeader>\r\n            <CardContent>\r\n              <div className=\"text-2xl font-bold\">{stats.total}</div>\r\n              <p className=\"text-xs text-muted-foreground mt-1\">\r\n                {t(\"admin.allReportsCount\")}\r\n              </p>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          <Card>\r\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n              <CardTitle className=\"text-sm font-medium\">{t(\"admin.reportStatus.pending\")}</CardTitle>\r\n              <Clock className=\"h-4 w-4 text-yellow-500\" />\r\n            </CardHeader>\r\n            <CardContent>\r\n              <div className=\"text-2xl font-bold\">{stats.pending}</div>\r\n              <p className=\"text-xs text-muted-foreground mt-1\">\r\n                {t(\"admin.awaitingReview\")}\r\n              </p>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          <Card>\r\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n              <CardTitle className=\"text-sm font-medium\">{t(\"admin.reportStatus.reviewing\")}</CardTitle>\r\n              <AlertCircle className=\"h-4 w-4 text-blue-500\" />\r\n            </CardHeader>\r\n            <CardContent>\r\n              <div className=\"text-2xl font-bold\">{stats.reviewing}</div>\r\n              <p className=\"text-xs text-muted-foreground mt-1\">\r\n                {t(\"admin.underReview\")}\r\n              </p>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          <Card>\r\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n              <CardTitle className=\"text-sm font-medium\">{t(\"admin.reportStatus.resolved\")}</CardTitle>\r\n              <CheckCircle className=\"h-4 w-4 text-green-500\" />\r\n            </CardHeader>\r\n            <CardContent>\r\n              <div className=\"text-2xl font-bold\">{stats.resolved}</div>\r\n              <p className=\"text-xs text-muted-foreground mt-1\">\r\n                {t(\"admin.resolvedReports\")}\r\n              </p>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          <Card>\r\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n              <CardTitle className=\"text-sm font-medium\">{t(\"admin.reportStatus.dismissed\")}</CardTitle>\r\n              <XCircle className=\"h-4 w-4 text-red-500\" />\r\n            </CardHeader>\r\n            <CardContent>\r\n              <div className=\"text-2xl font-bold\">{stats.dismissed}</div>\r\n              <p className=\"text-xs text-muted-foreground mt-1\">\r\n                {t(\"admin.dismissedReports\")}\r\n              </p>\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n\r\n        {/* Charts Section */}\r\n        <div className=\"grid gap-6 md:grid-cols-2\">\r\n          {/* Trend Chart */}\r\n          <Card>\r\n            <CardHeader>\r\n              <div className=\"flex items-center gap-2\">\r\n                <TrendingUp className=\"w-5 h-5 text-primary\" />\r\n                <CardTitle>{t(\"admin.reportsTrend\")}</CardTitle>\r\n              </div>\r\n              <CardDescription>{t(\"admin.reportsTrendDesc\")}</CardDescription>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <ResponsiveContainer width=\"100%\" height={300}>\r\n                <LineChart data={trendData}>\r\n                  <CartesianGrid strokeDasharray=\"3 3\" />\r\n                  <XAxis dataKey=\"date\" />\r\n                  <YAxis />\r\n                  <Tooltip />\r\n                  <Line \r\n                    type=\"monotone\" \r\n                    dataKey=\"count\" \r\n                    stroke=\"hsl(var(--primary))\" \r\n                    strokeWidth={2}\r\n                    name={t(\"admin.reportsCount\")}\r\n                  />\r\n                </LineChart>\r\n              </ResponsiveContainer>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* Reason Distribution */}\r\n          <Card>\r\n            <CardHeader>\r\n              <div className=\"flex items-center gap-2\">\r\n                <PieChartIcon className=\"w-5 h-5 text-primary\" />\r\n                <CardTitle>{t(\"admin.reportsReasonDist\")}</CardTitle>\r\n              </div>\r\n              <CardDescription>{t(\"admin.reportsReasonDistDesc\")}</CardDescription>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <ResponsiveContainer width=\"100%\" height={300}>\r\n                <PieChart>\r\n                  <Pie\r\n                    data={reasonData}\r\n                    cx=\"50%\"\r\n                    cy=\"50%\"\r\n                    labelLine={false}\r\n                    label={({ name, percent }) => `${name}: ${(percent * 100).toFixed(0)}%`}\r\n                    outerRadius={80}\r\n                    fill=\"#8884d8\"\r\n                    dataKey=\"value\"\r\n                  >\r\n                    {reasonData.map((entry, index) => (\r\n                      <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\r\n                    ))}\r\n                  </Pie>\r\n                  <Tooltip />\r\n                </PieChart>\r\n              </ResponsiveContainer>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* Type Distribution */}\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>{t(\"admin.reportsTypeDist\")}</CardTitle>\r\n              <CardDescription>{t(\"admin.reportsTypeDistDesc\")}</CardDescription>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <ResponsiveContainer width=\"100%\" height={300}>\r\n                <BarChart data={typeData}>\r\n                  <CartesianGrid strokeDasharray=\"3 3\" />\r\n                  <XAxis dataKey=\"name\" />\r\n                  <YAxis />\r\n                  <Tooltip />\r\n                  <Bar dataKey=\"value\" fill=\"hsl(var(--primary))\" name={t(\"admin.reportsCount\")} />\r\n                </BarChart>\r\n              </ResponsiveContainer>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* Status Distribution */}\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>{t(\"admin.reportsStatusDist\")}</CardTitle>\r\n              <CardDescription>{t(\"admin.reportsStatusDistDesc\")}</CardDescription>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <ResponsiveContainer width=\"100%\" height={300}>\r\n                <PieChart>\r\n                  <Pie\r\n                    data={[\r\n                      { name: t(\"admin.reportStatus.pending\"), value: stats.pending },\r\n                      { name: t(\"admin.reportStatus.reviewing\"), value: stats.reviewing },\r\n                      { name: t(\"admin.reportStatus.resolved\"), value: stats.resolved },\r\n                      { name: t(\"admin.reportStatus.dismissed\"), value: stats.dismissed },\r\n                    ].filter(item => item.value > 0)}\r\n                    cx=\"50%\"\r\n                    cy=\"50%\"\r\n                    labelLine={false}\r\n                    label={({ name, percent }) => `${name}: ${(percent * 100).toFixed(0)}%`}\r\n                    outerRadius={80}\r\n                    fill=\"#8884d8\"\r\n                    dataKey=\"value\"\r\n                  >\r\n                    {[\r\n                      { color: \"#FFA726\" },\r\n                      { color: \"#42A5F5\" },\r\n                      { color: \"#66BB6A\" },\r\n                      { color: \"#EF5350\" },\r\n                    ].map((entry, index) => (\r\n                      <Cell key={`cell-${index}`} fill={entry.color} />\r\n                    ))}\r\n                  </Pie>\r\n                  <Tooltip />\r\n                </PieChart>\r\n              </ResponsiveContainer>\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n\r\n        <Card>\r\n          <CardHeader>\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <CardTitle>{t(\"admin.allReports\")}</CardTitle>\r\n                <CardDescription>{t(\"admin.manageReportsDesc\")}</CardDescription>\r\n              </div>\r\n            </div>\r\n            <div className=\"flex items-center gap-4 mt-4\">\r\n              <div className=\"relative flex-1\">\r\n                <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\r\n                <Input\r\n                  placeholder={t(\"admin.searchReports\")}\r\n                  value={search}\r\n                  onChange={(e) => setSearch(e.target.value)}\r\n                  className=\"pl-10\"\r\n                />\r\n              </div>\r\n              <DropdownMenu>\r\n                <DropdownMenuTrigger asChild>\r\n                  <Button variant=\"outline\" className=\"gap-2\">\r\n                    <Filter className=\"w-4 h-4\" />\r\n                    {statusFilter === \"all\" \r\n                      ? t(\"admin.allStatus\") \r\n                      : t(`admin.reportStatus.${statusFilter}`)}\r\n                  </Button>\r\n                </DropdownMenuTrigger>\r\n                <DropdownMenuContent align=\"end\" className=\"bg-background\">\r\n                  <DropdownMenuItem onClick={() => setStatusFilter(\"all\")}>\r\n                    {t(\"admin.allStatus\")}\r\n                  </DropdownMenuItem>\r\n                  <DropdownMenuItem onClick={() => setStatusFilter(\"pending\")}>\r\n                    {t(\"admin.reportStatus.pending\")}\r\n                  </DropdownMenuItem>\r\n                  <DropdownMenuItem onClick={() => setStatusFilter(\"reviewing\")}>\r\n                    {t(\"admin.reportStatus.reviewing\")}\r\n                  </DropdownMenuItem>\r\n                  <DropdownMenuItem onClick={() => setStatusFilter(\"resolved\")}>\r\n                    {t(\"admin.reportStatus.resolved\")}\r\n                  </DropdownMenuItem>\r\n                  <DropdownMenuItem onClick={() => setStatusFilter(\"dismissed\")}>\r\n                    {t(\"admin.reportStatus.dismissed\")}\r\n                  </DropdownMenuItem>\r\n                </DropdownMenuContent>\r\n              </DropdownMenu>\r\n            </div>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"grid gap-4\">\r\n              {filteredReports?.map((report: any) => (\r\n          <Card key={report.id} className=\"p-4\">\r\n            <div className=\"flex items-start justify-between gap-4\">\r\n              <div className=\"flex-1 space-y-2\">\r\n                <div className=\"flex items-center gap-2 flex-wrap\">\r\n                  <Flag className=\"w-4 h-4\" />\r\n                  <span className=\"font-medium\">\r\n                    {t(`admin.reportType.${report.target_type}`)}\r\n                  </span>\r\n                  {getStatusBadge(report.status)}\r\n                  <Badge variant=\"outline\">\r\n                    {t(`report.reasons.${report.reason}`)}\r\n                  </Badge>\r\n                </div>\r\n\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                  {report.description.substring(0, 150)}\r\n                  {report.description.length > 150 && \"...\"}\r\n                </p>\r\n\r\n                <div className=\"flex items-center gap-4 text-xs text-muted-foreground\">\r\n                  <span>\r\n                    {t(\"admin.reportedBy\")}: {report.reporter?.display_name}\r\n                  </span>\r\n                  <span>\r\n                    {t(\"admin.reportedAt\")}:{\" \"}\r\n                    {formatDistanceToNow(new Date(report.created_at), {\r\n                      addSuffix: true,\r\n                    })}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex gap-2\">\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={() => handleViewReport(report)}\r\n                >\r\n                  {t(\"admin.viewReport\")}\r\n                </Button>\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"sm\"\r\n                  onClick={() =>\r\n                    window.open(\r\n                      getTargetLink(report.target_type, report.target_id),\r\n                      \"_blank\"\r\n                    )\r\n                  }\r\n                >\r\n                  <ExternalLink className=\"w-4 h-4\" />\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </Card>\r\n        ))}\r\n\r\n              {filteredReports?.length === 0 && (\r\n                <div className=\"text-center py-12\">\r\n                  <Flag className=\"w-12 h-12 mx-auto mb-4 text-muted-foreground\" />\r\n                  <p className=\"text-muted-foreground\">{t(\"admin.noReports\")}</p>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      <Dialog\r\n        open={!!selectedReport}\r\n        onOpenChange={() => setSelectedReport(null)}\r\n      >\r\n        <DialogContent className=\"max-w-[90vw] sm:max-w-[700px] max-h-[90vh] overflow-y-auto\">\r\n          <DialogHeader>\r\n            <DialogTitle>\r\n              {t(\"admin.viewReport\")} - {selectedReport?.id}\r\n            </DialogTitle>\r\n            <DialogDescription>\r\n              {t(`admin.reportType.${selectedReport?.target_type}`)}\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n\r\n          {selectedReport && (\r\n            <div className=\"space-y-4\">\r\n              <div className=\"grid grid-cols-2 gap-4 text-sm\">\r\n                <div>\r\n                  <span className=\"font-medium\">{t(\"admin.reportedBy\")}:</span>{\" \"}\r\n                  {selectedReport.reporter?.display_name}\r\n                </div>\r\n                <div>\r\n                  <span className=\"font-medium\">{t(\"admin.reportedAt\")}:</span>{\" \"}\r\n                  {new Date(selectedReport.created_at).toLocaleString()}\r\n                </div>\r\n                <div>\r\n                  <span className=\"font-medium\">{t(\"report.reason\")}:</span>{\" \"}\r\n                  {t(`report.reasons.${selectedReport.reason}`)}\r\n                </div>\r\n                <div>\r\n                  <span className=\"font-medium\">Status:</span>{\" \"}\r\n                  {getStatusBadge(selectedReport.status)}\r\n                </div>\r\n              </div>\r\n\r\n              <div>\r\n                <h4 className=\"font-medium mb-2\">{t(\"report.detailsLabel\")}</h4>\r\n                <p className=\"text-sm whitespace-pre-wrap\">\r\n                  {selectedReport.description}\r\n                </p>\r\n              </div>\r\n\r\n              {selectedReport.reporter_contact && (\r\n                <div>\r\n                  <h4 className=\"font-medium mb-2\">{t(\"report.contactLabel\")}</h4>\r\n                  <p className=\"text-sm\">{selectedReport.reporter_contact}</p>\r\n                </div>\r\n              )}\r\n\r\n              {selectedReport.evidence_urls &&\r\n                selectedReport.evidence_urls.length > 0 && (\r\n                  <div>\r\n                    <h4 className=\"font-medium mb-2\">\r\n                      {t(\"report.evidenceLabel\")}\r\n                    </h4>\r\n                    <ul className=\"space-y-1\">\r\n                      {selectedReport.evidence_urls.map((url: string, i: number) => (\r\n                        <li key={i}>\r\n                          <a\r\n                            href={url}\r\n                            target=\"_blank\"\r\n                            rel=\"noopener noreferrer\"\r\n                            className=\"text-sm text-primary hover:underline flex items-center gap-1\"\r\n                          >\r\n                            <ExternalLink className=\"w-3 h-3\" />\r\n                            {url}\r\n                          </a>\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                  </div>\r\n                )}\r\n\r\n              <div className=\"space-y-2\">\r\n                <label className=\"text-sm font-medium\">\r\n                  {t(\"admin.updateStatus\")}\r\n                </label>\r\n                <Select value={newStatus} onValueChange={setNewStatus}>\r\n                  <SelectTrigger>\r\n                    <SelectValue />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"pending\">\r\n                      {t(\"admin.reportStatus.pending\")}\r\n                    </SelectItem>\r\n                    <SelectItem value=\"reviewing\">\r\n                      {t(\"admin.reportStatus.reviewing\")}\r\n                    </SelectItem>\r\n                    <SelectItem value=\"resolved\">\r\n                      {t(\"admin.reportStatus.resolved\")}\r\n                    </SelectItem>\r\n                    <SelectItem value=\"dismissed\">\r\n                      {t(\"admin.reportStatus.dismissed\")}\r\n                    </SelectItem>\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <label className=\"text-sm font-medium\">\r\n                  {t(\"admin.adminNotes\")}\r\n                </label>\r\n                <Textarea\r\n                  value={adminNotes}\r\n                  onChange={(e) => setAdminNotes(e.target.value)}\r\n                  placeholder=\"Add internal notes...\"\r\n                  rows={4}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"flex justify-end gap-2\">\r\n                <Button\r\n                  variant=\"outline\"\r\n                  onClick={() => setSelectedReport(null)}\r\n                >\r\n                  {t(\"common.cancel\")}\r\n                </Button>\r\n                <Button\r\n                  onClick={handleUpdateStatus}\r\n                  disabled={updateReportMutation.isPending}\r\n                >\r\n                  {updateReportMutation.isPending ? (\r\n                    <>\r\n                      <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\r\n                      {t(\"common.loading\")}\r\n                </>\r\n              ) : (\r\n                t(\"admin.saveNotes\")\r\n              )}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </DialogContent>\r\n    </Dialog>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AdminReports;\r\n"],"names":["AdminReports","t","useTranslation","queryClient","useQueryClient","selectedReport","setSelectedReport","useState","adminNotes","setAdminNotes","newStatus","setNewStatus","search","setSearch","statusFilter","setStatusFilter","reports","isLoading","useQuery","data","error","supabase","emailConfig","filteredReports","report","searchLower","matchesSearch","matchesStatus","stats","r","trendData","_","i","date","startOfDay","subDays","dateStr","format","count","reasonData","reason","item","typeData","type","COLORS","handleUpdateEmail","newEmail","toast","updateReportMutation","useMutation","id","status","notes","updateData","getStatusBadge","variants","jsx","Badge","getTargetLink","handleViewReport","handleUpdateStatus","Loader2","jsxs","Fragment","Card","CardHeader","CardTitle","CardDescription","CardContent","Input","Button","Flag","Clock","AlertCircle","CheckCircle","XCircle","TrendingUp","ResponsiveContainer","LineChart","CartesianGrid","XAxis","YAxis","Tooltip","Line","PieChartIcon","PieChart","Pie","name","percent","entry","index","Cell","BarChart","Bar","Search","e","DropdownMenu","DropdownMenuTrigger","Filter","DropdownMenuContent","DropdownMenuItem","formatDistanceToNow","ExternalLink","Dialog","DialogContent","DialogHeader","DialogTitle","DialogDescription","url","Select","SelectTrigger","SelectValue","SelectContent","SelectItem","Textarea"],"mappings":"g0BAmCA,MAAMA,GAAe,IAAM,CACnB,KAAA,CAAE,EAAAC,GAAMC,KACRC,EAAcC,KACd,CAACC,EAAgBC,CAAiB,EAAIC,WAAc,IAAI,EACxD,CAACC,EAAYC,CAAa,EAAIF,WAAS,EAAE,EACzC,CAACG,EAAWC,CAAY,EAAIJ,WAAS,EAAE,EACvC,CAACK,EAAQC,CAAS,EAAIN,WAAS,EAAE,EACjC,CAACO,EAAcC,CAAe,EAAIR,WAAiB,KAAK,EAExD,CAAE,KAAMS,EAAS,UAAAC,CAAA,EAAcC,EAAS,CAC5C,SAAU,CAAC,eAAe,EAC1B,QAAS,SAAY,CACb,KAAA,CAAE,KAAAC,EAAM,MAAAC,GAAU,MAAMC,EAC3B,KAAK,SAAgB,EACrB,OAAO;AAAA;AAAA;AAAA,SAGP,EACA,MAAM,aAAc,CAAE,UAAW,GAAO,EAE3C,GAAID,EAAa,MAAAA,EACV,OAAAD,CACT,CAAA,CACD,EAEK,CAAE,KAAMG,CAAY,EAAIJ,EAAS,CACrC,SAAU,CAAC,cAAe,QAAQ,EAClC,QAAS,SAAY,CACnB,KAAM,CAAE,KAAAC,EAAM,MAAAC,CAAA,EAAU,MAAMC,EAC3B,KAAK,cAAc,EACnB,OAAO,GAAG,EACV,GAAG,OAAQ,QAAQ,EACnB,SAEH,GAAID,EAAa,MAAAA,EACV,OAAAD,CACT,CAAA,CACD,EAEKI,EAAkBP,GAAS,OAAQQ,GAAgB,CACjD,MAAAC,EAAcb,EAAO,cACrBc,EACJF,EAAO,YAAY,YAAA,EAAc,SAASC,CAAW,GACrDD,EAAO,UAAU,cAAc,cAAc,SAASC,CAAW,GACjED,EAAO,OAAO,YAAc,EAAA,SAASC,CAAW,EAE5CE,EAAgBb,IAAiB,OAASU,EAAO,SAAWV,EAElE,OAAOY,GAAiBC,CAAA,CACzB,EAEKC,EAAQ,CACZ,MAAOZ,GAAS,QAAU,EAC1B,QAASA,GAAS,OAAQa,GAAWA,EAAE,SAAW,SAAS,EAAE,QAAU,EACvE,UAAWb,GAAS,OAAQa,GAAWA,EAAE,SAAW,WAAW,EAAE,QAAU,EAC3E,SAAUb,GAAS,OAAQa,GAAWA,EAAE,SAAW,UAAU,EAAE,QAAU,EACzE,UAAWb,GAAS,OAAQa,GAAWA,EAAE,SAAW,WAAW,EAAE,QAAU,CAAA,EAIvEC,GAAY,MAAM,KAAK,CAAE,OAAQ,CAAE,EAAG,CAACC,EAAGC,IAAM,CAC9C,MAAAC,EAAOC,EAAWC,GAAQ,IAAI,KAAQ,EAAIH,CAAC,CAAC,EAC5CI,EAAUC,EAAOJ,EAAM,YAAY,EACnCK,EAAQtB,GAAS,OAAQa,IACVQ,EAAOH,EAAW,IAAI,KAAKL,GAAE,UAAU,CAAC,EAAG,YAAY,IACpDO,CACvB,EAAE,QAAU,EAEN,MAAA,CACL,KAAMC,EAAOJ,EAAM,OAAO,EAC1B,MAAAK,CAAA,CACF,CACD,EAGKC,EAAa,CACjB,OACA,aACA,wBACA,iBACA,YACA,QACA,cACA,WACA,OAAA,EACA,IAAKC,IAAY,CACjB,KAAMvC,EAAE,kBAAkBuC,CAAM,EAAE,EAClC,MAAOxB,GAAS,OAAQa,GAAWA,EAAE,SAAWW,CAAM,EAAE,QAAU,CAAA,EAClE,EAAE,OAAeC,GAAAA,EAAK,MAAQ,CAAC,EAG3BC,GAAW,CAAC,UAAW,aAAc,WAAY,MAAM,EAAE,IAAKC,IAAU,CAC5E,KAAM1C,EAAE,oBAAoB0C,CAAI,EAAE,EAClC,MAAO3B,GAAS,OAAQa,GAAWA,EAAE,cAAgBc,CAAI,EAAE,QAAU,CAAA,EACrE,EAAE,OAAeF,GAAAA,EAAK,MAAQ,CAAC,EAE3BG,EAAS,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,SAAS,EAE3GC,GAAoB,SAAY,CACpC,MAAMC,EAAW,OAAO7C,EAAE,sBAAsB,EAAGqB,GAAa,eAAe,EAC/E,GAAKwB,EAED,GAAA,CACF,KAAM,CAAE,MAAA1B,CAAM,EAAI,MAAMC,EACrB,KAAK,cAAc,EACnB,OAAO,CAAE,gBAAiByB,CAAU,CAAA,EACpC,GAAG,KAAMxB,GAAa,EAAE,EAE3B,GAAIF,EAAa,MAAAA,EAEjBjB,EAAY,kBAAkB,CAAE,SAAU,CAAC,aAAa,CAAG,CAAA,EACrD4C,EAAA,QAAQ9C,EAAE,qBAAqB,CAAC,QAC/BmB,EAAO,CACN,QAAA,MAAM,wBAAyBA,CAAK,EACtC2B,EAAA,MAAM9C,EAAE,yBAAyB,CAAC,CAC1C,CAAA,EAGI+C,EAAuBC,GAAY,CACvC,WAAY,MAAO,CACjB,GAAAC,EACA,OAAAC,EACA,MAAAC,CAAA,IAKI,CACJ,MAAMC,EAAkB,CAAE,eAAgB,KAAK,EAAE,eAC7CF,MAAmB,OAASA,GAC5BC,IAAU,SAAWC,EAAW,YAAcD,GAElD,KAAM,CAAE,MAAAhC,CAAU,EAAA,MAAMC,EACrB,KAAK,SAAgB,EACrB,OAAOgC,CAAU,EACjB,GAAG,KAAMH,CAAE,EAEd,GAAI9B,EAAa,MAAAA,CACnB,EACA,UAAW,IAAM,CACfjB,EAAY,kBAAkB,CAAE,SAAU,CAAC,eAAe,CAAG,CAAA,EACvD4C,EAAA,QAAQ9C,EAAE,4BAA4B,CAAC,EAC7CK,EAAkB,IAAI,CACxB,EACA,QAAUc,GAAe,CACvB2B,EAAM,MAAM3B,EAAM,SAAWnB,EAAE,0BAA0B,CAAC,CAC5D,CAAA,CACD,EAEKqD,EAAkBH,GAAmB,CACzC,MAAMI,EAAoE,CACxE,QAAS,UACT,UAAW,YACX,SAAU,UACV,UAAW,aAAA,EAIX,OAAAC,EAAAA,IAACC,EAAM,CAAA,QAASF,EAASJ,CAAM,GAAK,UACjC,SAAElD,EAAA,sBAAsBkD,CAAM,EAAE,CACnC,CAAA,CAAA,EAIEO,GAAgB,CAACf,EAAcO,IAAe,CAClD,OAAQP,EAAM,CACZ,IAAK,aACH,MAAO,eAAeO,CAAE,GAC1B,IAAK,WACH,MAAO,aAAaA,CAAE,GACxB,IAAK,UACI,MAAA,IACT,IAAK,OACI,MAAA,WACT,QACS,MAAA,GACX,CAAA,EAGIS,GAAoBnC,GAAgB,CACxClB,EAAkBkB,CAAM,EACVf,EAAAe,EAAO,aAAe,EAAE,EACtCb,EAAaa,EAAO,MAAM,CAAA,EAGtBoC,GAAqB,IAAM,CAC3BvD,GACF2C,EAAqB,OAAO,CAC1B,GAAI3C,EAAe,GACnB,OAAQK,EACR,MAAOF,CAAA,CACR,CACH,EAGF,OAAIS,EAEAuC,EAAA,IAAC,OAAI,UAAU,wCACb,eAACK,EAAQ,CAAA,UAAU,sBAAuB,CAAA,CAC5C,CAAA,EAMAC,EAAA,KAAAC,WAAA,CAAA,SAAA,CAACD,EAAAA,KAAA,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,OAAC,MACC,CAAA,SAAA,CAAAN,MAAC,KAAG,CAAA,UAAU,qBAAsB,SAAAvD,EAAE,eAAe,EAAE,QACtD,IAAE,CAAA,UAAU,6BAA8B,SAAAA,EAAE,0BAA0B,EAAE,CAAA,EAC3E,EAEA6D,EAAAA,KAAC,MAAI,CAAA,UAAU,2CACb,SAAA,CAAAA,OAACE,EACC,CAAA,SAAA,CAAAF,OAACG,EACC,CAAA,SAAA,CAACT,EAAA,IAAAU,EAAA,CAAW,SAAEjE,EAAA,uBAAuB,CAAE,CAAA,EACtCuD,EAAA,IAAAW,EAAA,CAAiB,SAAElE,EAAA,2BAA2B,CAAE,CAAA,CAAA,EACnD,EACCuD,MAAAY,EAAA,CACC,SAACN,EAAAA,KAAA,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAN,MAACa,GAAM,MAAO/C,GAAa,iBAAmB,GAAI,SAAQ,GAAC,QAC1DgD,EAAO,CAAA,QAASzB,GAAoB,SAAA5C,EAAE,aAAa,EAAE,CAAA,CAAA,CACxD,CACF,CAAA,CAAA,EACF,SAEC+D,EACC,CAAA,SAAA,CAACF,EAAAA,KAAAG,EAAA,CAAW,UAAU,4DACpB,SAAA,CAAAT,MAACU,EAAU,CAAA,UAAU,sBAAuB,SAAAjE,EAAE,oBAAoB,EAAE,EACpEuD,EAAAA,IAACe,EAAK,CAAA,UAAU,+BAAgC,CAAA,CAAA,EAClD,SACCH,EACC,CAAA,SAAA,CAAAZ,EAAA,IAAC,MAAI,CAAA,UAAU,qBAAsB,SAAA5B,EAAM,MAAM,QAChD,IAAE,CAAA,UAAU,qCACV,SAAA3B,EAAE,uBAAuB,EAC5B,CAAA,EACF,CAAA,EACF,SAEC+D,EACC,CAAA,SAAA,CAACF,EAAAA,KAAAG,EAAA,CAAW,UAAU,4DACpB,SAAA,CAAAT,MAACU,EAAU,CAAA,UAAU,sBAAuB,SAAAjE,EAAE,4BAA4B,EAAE,EAC5EuD,EAAAA,IAACgB,GAAM,CAAA,UAAU,yBAA0B,CAAA,CAAA,EAC7C,SACCJ,EACC,CAAA,SAAA,CAAAZ,EAAA,IAAC,MAAI,CAAA,UAAU,qBAAsB,SAAA5B,EAAM,QAAQ,QAClD,IAAE,CAAA,UAAU,qCACV,SAAA3B,EAAE,sBAAsB,EAC3B,CAAA,EACF,CAAA,EACF,SAEC+D,EACC,CAAA,SAAA,CAACF,EAAAA,KAAAG,EAAA,CAAW,UAAU,4DACpB,SAAA,CAAAT,MAACU,EAAU,CAAA,UAAU,sBAAuB,SAAAjE,EAAE,8BAA8B,EAAE,EAC9EuD,EAAAA,IAACiB,GAAY,CAAA,UAAU,uBAAwB,CAAA,CAAA,EACjD,SACCL,EACC,CAAA,SAAA,CAAAZ,EAAA,IAAC,MAAI,CAAA,UAAU,qBAAsB,SAAA5B,EAAM,UAAU,QACpD,IAAE,CAAA,UAAU,qCACV,SAAA3B,EAAE,mBAAmB,EACxB,CAAA,EACF,CAAA,EACF,SAEC+D,EACC,CAAA,SAAA,CAACF,EAAAA,KAAAG,EAAA,CAAW,UAAU,4DACpB,SAAA,CAAAT,MAACU,EAAU,CAAA,UAAU,sBAAuB,SAAAjE,EAAE,6BAA6B,EAAE,EAC7EuD,EAAAA,IAACkB,GAAY,CAAA,UAAU,wBAAyB,CAAA,CAAA,EAClD,SACCN,EACC,CAAA,SAAA,CAAAZ,EAAA,IAAC,MAAI,CAAA,UAAU,qBAAsB,SAAA5B,EAAM,SAAS,QACnD,IAAE,CAAA,UAAU,qCACV,SAAA3B,EAAE,uBAAuB,EAC5B,CAAA,EACF,CAAA,EACF,SAEC+D,EACC,CAAA,SAAA,CAACF,EAAAA,KAAAG,EAAA,CAAW,UAAU,4DACpB,SAAA,CAAAT,MAACU,EAAU,CAAA,UAAU,sBAAuB,SAAAjE,EAAE,8BAA8B,EAAE,EAC9EuD,EAAAA,IAACmB,GAAQ,CAAA,UAAU,sBAAuB,CAAA,CAAA,EAC5C,SACCP,EACC,CAAA,SAAA,CAAAZ,EAAA,IAAC,MAAI,CAAA,UAAU,qBAAsB,SAAA5B,EAAM,UAAU,QACpD,IAAE,CAAA,UAAU,qCACV,SAAA3B,EAAE,wBAAwB,EAC7B,CAAA,EACF,CAAA,EACF,CAAA,EACF,EAGA6D,EAAAA,KAAC,MAAI,CAAA,UAAU,4BAEb,SAAA,CAAAA,OAACE,EACC,CAAA,SAAA,CAAAF,OAACG,EACC,CAAA,SAAA,CAACH,EAAAA,KAAA,MAAA,CAAI,UAAU,0BACb,SAAA,CAACN,EAAAA,IAAAoB,GAAA,CAAW,UAAU,sBAAuB,CAAA,EAC5CpB,EAAA,IAAAU,EAAA,CAAW,SAAEjE,EAAA,oBAAoB,CAAE,CAAA,CAAA,EACtC,EACCuD,EAAA,IAAAW,EAAA,CAAiB,SAAElE,EAAA,wBAAwB,CAAE,CAAA,CAAA,EAChD,EACAuD,EAAA,IAACY,EACC,CAAA,SAAAZ,EAAA,IAACqB,EAAoB,CAAA,MAAM,OAAO,OAAQ,IACxC,SAAAf,OAACgB,GAAU,CAAA,KAAMhD,GACf,SAAA,CAAC0B,EAAAA,IAAAuB,EAAA,CAAc,gBAAgB,KAAM,CAAA,EACrCvB,EAAAA,IAACwB,EAAM,CAAA,QAAQ,MAAO,CAAA,QACrBC,EAAM,EAAA,QACNC,EAAQ,EAAA,EACT1B,EAAA,IAAC2B,GAAA,CACC,KAAK,WACL,QAAQ,QACR,OAAO,sBACP,YAAa,EACb,KAAMlF,EAAE,oBAAoB,CAAA,CAC9B,CAAA,CACF,CAAA,CACF,CAAA,EACF,CAAA,EACF,SAGC+D,EACC,CAAA,SAAA,CAAAF,OAACG,EACC,CAAA,SAAA,CAACH,EAAAA,KAAA,MAAA,CAAI,UAAU,0BACb,SAAA,CAACN,EAAAA,IAAA4B,GAAA,CAAa,UAAU,sBAAuB,CAAA,EAC9C5B,EAAA,IAAAU,EAAA,CAAW,SAAEjE,EAAA,yBAAyB,CAAE,CAAA,CAAA,EAC3C,EACCuD,EAAA,IAAAW,EAAA,CAAiB,SAAElE,EAAA,6BAA6B,CAAE,CAAA,CAAA,EACrD,EACAuD,EAAA,IAACY,GACC,SAACZ,EAAAA,IAAAqB,EAAA,CAAoB,MAAM,OAAO,OAAQ,IACxC,SAAAf,EAAA,KAACuB,EACC,CAAA,SAAA,CAAA7B,EAAA,IAAC8B,EAAA,CACC,KAAM/C,EACN,GAAG,MACH,GAAG,MACH,UAAW,GACX,MAAO,CAAC,CAAE,KAAAgD,EAAM,QAAAC,CAAQ,IAAM,GAAGD,CAAI,MAAMC,EAAU,KAAK,QAAQ,CAAC,CAAC,IACpE,YAAa,GACb,KAAK,UACL,QAAQ,QAEP,WAAW,IAAI,CAACC,EAAOC,UACrBC,EAA2B,CAAA,KAAM/C,EAAO8C,EAAQ9C,EAAO,MAAM,CAAA,EAAnD,QAAQ8C,CAAK,EAAyC,CAClE,CAAA,CACH,QACCR,EAAQ,EAAA,CAAA,CACX,CAAA,CACF,CAAA,EACF,CAAA,EACF,SAGClB,EACC,CAAA,SAAA,CAAAF,OAACG,EACC,CAAA,SAAA,CAACT,EAAA,IAAAU,EAAA,CAAW,SAAEjE,EAAA,uBAAuB,CAAE,CAAA,EACtCuD,EAAA,IAAAW,EAAA,CAAiB,SAAElE,EAAA,2BAA2B,CAAE,CAAA,CAAA,EACnD,EACAuD,EAAA,IAACY,EACC,CAAA,SAAAZ,EAAA,IAACqB,EAAoB,CAAA,MAAM,OAAO,OAAQ,IACxC,SAAAf,OAAC8B,GAAS,CAAA,KAAMlD,GACd,SAAA,CAACc,EAAAA,IAAAuB,EAAA,CAAc,gBAAgB,KAAM,CAAA,EACrCvB,EAAAA,IAACwB,EAAM,CAAA,QAAQ,MAAO,CAAA,QACrBC,EAAM,EAAA,QACNC,EAAQ,EAAA,EACT1B,EAAAA,IAACqC,IAAI,QAAQ,QAAQ,KAAK,sBAAsB,KAAM5F,EAAE,oBAAoB,EAAG,CAAA,CACjF,CAAA,CACF,CAAA,EACF,CAAA,EACF,SAGC+D,EACC,CAAA,SAAA,CAAAF,OAACG,EACC,CAAA,SAAA,CAACT,EAAA,IAAAU,EAAA,CAAW,SAAEjE,EAAA,yBAAyB,CAAE,CAAA,EACxCuD,EAAA,IAAAW,EAAA,CAAiB,SAAElE,EAAA,6BAA6B,CAAE,CAAA,CAAA,EACrD,EACAuD,EAAA,IAACY,GACC,SAACZ,EAAAA,IAAAqB,EAAA,CAAoB,MAAM,OAAO,OAAQ,IACxC,SAAAf,EAAA,KAACuB,EACC,CAAA,SAAA,CAAA7B,EAAA,IAAC8B,EAAA,CACC,KAAM,CACJ,CAAE,KAAMrF,EAAE,4BAA4B,EAAG,MAAO2B,EAAM,OAAQ,EAC9D,CAAE,KAAM3B,EAAE,8BAA8B,EAAG,MAAO2B,EAAM,SAAU,EAClE,CAAE,KAAM3B,EAAE,6BAA6B,EAAG,MAAO2B,EAAM,QAAS,EAChE,CAAE,KAAM3B,EAAE,8BAA8B,EAAG,MAAO2B,EAAM,SAAU,CAClE,EAAA,OAAea,GAAAA,EAAK,MAAQ,CAAC,EAC/B,GAAG,MACH,GAAG,MACH,UAAW,GACX,MAAO,CAAC,CAAE,KAAA8C,EAAM,QAAAC,CAAQ,IAAM,GAAGD,CAAI,MAAMC,EAAU,KAAK,QAAQ,CAAC,CAAC,IACpE,YAAa,GACb,KAAK,UACL,QAAQ,QAEP,SAAA,CACC,CAAE,MAAO,SAAU,EACnB,CAAE,MAAO,SAAU,EACnB,CAAE,MAAO,SAAU,EACnB,CAAE,MAAO,SAAU,CACnB,EAAA,IAAI,CAACC,EAAOC,IACZlC,EAAAA,IAACmC,EAA2B,CAAA,KAAMF,EAAM,KAAA,EAA7B,QAAQC,CAAK,EAAuB,CAChD,CAAA,CACH,QACCR,EAAQ,EAAA,CAAA,CACX,CAAA,CACF,CAAA,EACF,CAAA,EACF,CAAA,EACF,SAEClB,EACC,CAAA,SAAA,CAAAF,OAACG,EACC,CAAA,SAAA,CAAAT,MAAC,MAAI,CAAA,UAAU,oCACb,SAAAM,EAAA,KAAC,MACC,CAAA,SAAA,CAACN,EAAA,IAAAU,EAAA,CAAW,SAAEjE,EAAA,kBAAkB,CAAE,CAAA,EACjCuD,EAAA,IAAAW,EAAA,CAAiB,SAAElE,EAAA,yBAAyB,CAAE,CAAA,CAAA,CAAA,CACjD,CACF,CAAA,EACA6D,EAAAA,KAAC,MAAI,CAAA,UAAU,+BACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,kBACb,SAAA,CAACN,EAAAA,IAAAsC,GAAA,CAAO,UAAU,wEAAyE,CAAA,EAC3FtC,EAAA,IAACa,EAAA,CACC,YAAapE,EAAE,qBAAqB,EACpC,MAAOW,EACP,SAAWmF,GAAMlF,EAAUkF,EAAE,OAAO,KAAK,EACzC,UAAU,OAAA,CACZ,CAAA,EACF,SACCC,GACC,CAAA,SAAA,CAACxC,EAAAA,IAAAyC,GAAA,CAAoB,QAAO,GAC1B,SAAAnC,EAAAA,KAACQ,GAAO,QAAQ,UAAU,UAAU,QAClC,SAAA,CAACd,EAAAA,IAAA0C,GAAA,CAAO,UAAU,SAAU,CAAA,EAExBjG,EADHa,IAAiB,MACZ,kBACA,sBAAsBA,CAAY,EADjB,CACmB,CAAA,CAC5C,CACF,CAAA,EACCgD,EAAA,KAAAqC,GAAA,CAAoB,MAAM,MAAM,UAAU,gBACzC,SAAA,CAAC3C,EAAAA,IAAA4C,EAAA,CAAiB,QAAS,IAAMrF,EAAgB,KAAK,EACnD,SAAAd,EAAE,iBAAiB,EACtB,EACAuD,EAAAA,IAAC4C,GAAiB,QAAS,IAAMrF,EAAgB,SAAS,EACvD,SAAEd,EAAA,4BAA4B,EACjC,EACAuD,EAAAA,IAAC4C,GAAiB,QAAS,IAAMrF,EAAgB,WAAW,EACzD,SAAEd,EAAA,8BAA8B,EACnC,EACAuD,EAAAA,IAAC4C,GAAiB,QAAS,IAAMrF,EAAgB,UAAU,EACxD,SAAEd,EAAA,6BAA6B,EAClC,EACAuD,EAAAA,IAAC4C,GAAiB,QAAS,IAAMrF,EAAgB,WAAW,EACzD,SAAEd,EAAA,8BAA8B,EACnC,CAAA,EACF,CAAA,EACF,CAAA,EACF,CAAA,EACF,EACCuD,MAAAY,EAAA,CACC,SAACN,EAAAA,KAAA,MAAA,CAAI,UAAU,aACZ,SAAA,CAAiBvC,GAAA,IAAKC,GAC1BgC,EAAAA,IAAAQ,EAAA,CAAqB,UAAU,MAC9B,SAAAF,EAAA,KAAC,MAAI,CAAA,UAAU,yCACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,mBACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,oCACb,SAAA,CAACN,EAAAA,IAAAe,EAAA,CAAK,UAAU,SAAU,CAAA,EAC1Bf,EAAAA,IAAC,QAAK,UAAU,cACb,WAAE,oBAAoBhC,EAAO,WAAW,EAAE,CAC7C,CAAA,EACC8B,EAAe9B,EAAO,MAAM,EAC7BgC,EAAAA,IAACC,GAAM,QAAQ,UACZ,WAAE,kBAAkBjC,EAAO,MAAM,EAAE,CACtC,CAAA,CAAA,EACF,EAEAsC,EAAAA,KAAC,IAAE,CAAA,UAAU,gCACV,SAAA,CAAOtC,EAAA,YAAY,UAAU,EAAG,GAAG,EACnCA,EAAO,YAAY,OAAS,KAAO,KAAA,EACtC,EAEAsC,EAAAA,KAAC,MAAI,CAAA,UAAU,wDACb,SAAA,CAAAA,OAAC,OACE,CAAA,SAAA,CAAA7D,EAAE,kBAAkB,EAAE,KAAGuB,EAAO,UAAU,YAAA,EAC7C,SACC,OACE,CAAA,SAAA,CAAAvB,EAAE,kBAAkB,EAAE,IAAE,IACxBoG,GAAoB,IAAI,KAAK7E,EAAO,UAAU,EAAG,CAChD,UAAW,EAAA,CACZ,CAAA,EACH,CAAA,EACF,CAAA,EACF,EAEAsC,EAAAA,KAAC,MAAI,CAAA,UAAU,aACb,SAAA,CAAAN,EAAA,IAACc,EAAA,CACC,QAAQ,UACR,KAAK,KACL,QAAS,IAAMX,GAAiBnC,CAAM,EAErC,WAAE,kBAAkB,CAAA,CACvB,EACAgC,EAAA,IAACc,EAAA,CACC,QAAQ,QACR,KAAK,KACL,QAAS,IACP,OAAO,KACLZ,GAAclC,EAAO,YAAaA,EAAO,SAAS,EAClD,QACF,EAGF,SAAAgC,EAAAA,IAAC8C,EAAa,CAAA,UAAU,SAAU,CAAA,CAAA,CACpC,CAAA,EACF,CACF,CAAA,CAAA,CAAA,EArDS9E,EAAO,EAsDlB,CACD,EAEMD,GAAiB,SAAW,GAC1BuC,EAAA,KAAA,MAAA,CAAI,UAAU,oBACb,SAAA,CAACN,EAAAA,IAAAe,EAAA,CAAK,UAAU,8CAA+C,CAAA,QAC9D,IAAE,CAAA,UAAU,wBAAyB,SAAAtE,EAAE,iBAAiB,EAAE,CAAA,EAC7D,CAAA,CAAA,CAEJ,CACF,CAAA,CAAA,EACF,CAAA,EACF,EAEAuD,EAAA,IAAC+C,GAAA,CACC,KAAM,CAAC,CAAClG,EACR,aAAc,IAAMC,EAAkB,IAAI,EAE1C,SAAAwD,EAAA,KAAC0C,GAAc,CAAA,UAAU,6DACvB,SAAA,CAAA1C,OAAC2C,GACC,CAAA,SAAA,CAAA3C,OAAC4C,GACE,CAAA,SAAA,CAAAzG,EAAE,kBAAkB,EAAE,MAAII,GAAgB,EAAA,EAC7C,QACCsG,GACE,CAAA,SAAA1G,EAAE,oBAAoBI,GAAgB,WAAW,EAAE,EACtD,CAAA,EACF,EAECA,GACCyD,EAAA,KAAC,MAAI,CAAA,UAAU,YACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,iCACb,SAAA,CAAAA,OAAC,MACC,CAAA,SAAA,CAACA,EAAAA,KAAA,OAAA,CAAK,UAAU,cAAe,SAAA,CAAA7D,EAAE,kBAAkB,EAAE,GAAA,EAAC,EAAQ,IAC7DI,EAAe,UAAU,YAAA,EAC5B,SACC,MACC,CAAA,SAAA,CAACyD,EAAAA,KAAA,OAAA,CAAK,UAAU,cAAe,SAAA,CAAA7D,EAAE,kBAAkB,EAAE,GAAA,EAAC,EAAQ,IAC7D,IAAI,KAAKI,EAAe,UAAU,EAAE,eAAe,CAAA,EACtD,SACC,MACC,CAAA,SAAA,CAACyD,EAAAA,KAAA,OAAA,CAAK,UAAU,cAAe,SAAA,CAAA7D,EAAE,eAAe,EAAE,GAAA,EAAC,EAAQ,IAC1DA,EAAE,kBAAkBI,EAAe,MAAM,EAAE,CAAA,EAC9C,SACC,MACC,CAAA,SAAA,CAACmD,EAAA,IAAA,OAAA,CAAK,UAAU,cAAc,SAAO,UAAA,EAAQ,IAC5CF,EAAejD,EAAe,MAAM,CAAA,EACvC,CAAA,EACF,SAEC,MACC,CAAA,SAAA,CAAAmD,MAAC,KAAG,CAAA,UAAU,mBAAoB,SAAAvD,EAAE,qBAAqB,EAAE,EAC1DuD,EAAA,IAAA,IAAA,CAAE,UAAU,8BACV,WAAe,YAClB,CAAA,EACF,EAECnD,EAAe,kBACdyD,EAAAA,KAAC,MACC,CAAA,SAAA,CAAAN,MAAC,KAAG,CAAA,UAAU,mBAAoB,SAAAvD,EAAE,qBAAqB,EAAE,EAC1DuD,EAAA,IAAA,IAAA,CAAE,UAAU,UAAW,WAAe,iBAAiB,CAAA,EAC1D,EAGDnD,EAAe,eACdA,EAAe,cAAc,OAAS,UACnC,MACC,CAAA,SAAA,CAAAmD,MAAC,KAAG,CAAA,UAAU,mBACX,SAAAvD,EAAE,sBAAsB,EAC3B,EACAuD,EAAA,IAAC,KAAG,CAAA,UAAU,YACX,SAAAnD,EAAe,cAAc,IAAI,CAACuG,EAAa5E,IAC9CwB,EAAA,IAAC,KACC,CAAA,SAAAM,EAAA,KAAC,IAAA,CACC,KAAM8C,EACN,OAAO,SACP,IAAI,sBACJ,UAAU,+DAEV,SAAA,CAACpD,EAAAA,IAAA8C,EAAA,CAAa,UAAU,SAAU,CAAA,EACjCM,CAAA,CAAA,CAAA,GARI5E,CAUT,CACD,EACH,CAAA,EACF,EAGJ8B,EAAAA,KAAC,MAAI,CAAA,UAAU,YACb,SAAA,CAAAN,MAAC,QAAM,CAAA,UAAU,sBACd,SAAAvD,EAAE,oBAAoB,EACzB,EACC6D,EAAA,KAAA+C,GAAA,CAAO,MAAOnG,EAAW,cAAeC,EACvC,SAAA,CAAC6C,EAAA,IAAAsD,GAAA,CACC,SAACtD,EAAA,IAAAuD,GAAA,CAAY,CAAA,EACf,SACCC,GACC,CAAA,SAAA,CAAAxD,MAACyD,EAAW,CAAA,MAAM,UACf,SAAAhH,EAAE,4BAA4B,EACjC,QACCgH,EAAW,CAAA,MAAM,YACf,SAAAhH,EAAE,8BAA8B,EACnC,QACCgH,EAAW,CAAA,MAAM,WACf,SAAAhH,EAAE,6BAA6B,EAClC,QACCgH,EAAW,CAAA,MAAM,YACf,SAAAhH,EAAE,8BAA8B,EACnC,CAAA,EACF,CAAA,EACF,CAAA,EACF,EAEA6D,EAAAA,KAAC,MAAI,CAAA,UAAU,YACb,SAAA,CAAAN,MAAC,QAAM,CAAA,UAAU,sBACd,SAAAvD,EAAE,kBAAkB,EACvB,EACAuD,EAAA,IAAC0D,GAAA,CACC,MAAO1G,EACP,SAAWuF,GAAMtF,EAAcsF,EAAE,OAAO,KAAK,EAC7C,YAAY,wBACZ,KAAM,CAAA,CACR,CAAA,EACF,EAEAjC,EAAAA,KAAC,MAAI,CAAA,UAAU,yBACb,SAAA,CAAAN,EAAA,IAACc,EAAA,CACC,QAAQ,UACR,QAAS,IAAMhE,EAAkB,IAAI,EAEpC,WAAE,eAAe,CAAA,CACpB,EACAkD,EAAA,IAACc,EAAA,CACC,QAASV,GACT,SAAUZ,EAAqB,UAE9B,SAAAA,EAAqB,UAElBc,EAAA,KAAAC,EAAA,SAAA,CAAA,SAAA,CAACP,EAAAA,IAAAK,EAAA,CAAQ,UAAU,2BAA4B,CAAA,EAC9C5D,EAAE,gBAAgB,CAAA,EACzB,EAEAA,EAAE,iBAAiB,CAAA,CAEvB,CAAA,EACF,CAAA,EACF,CAAA,EAEJ,CAAA,CACA,CACA,CAAA,CAAA,CAEJ"}