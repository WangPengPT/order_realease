{"version":3,"file":"form-D1NL5WUe.js","sources":["../../src/components/ui/form.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport * as LabelPrimitive from \"@radix-ui/react-label\";\r\nimport { Slot } from \"@radix-ui/react-slot\";\r\nimport { Controller, ControllerProps, FieldPath, FieldValues, FormProvider, useFormContext } from \"react-hook-form\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\nimport { Label } from \"@/components/ui/label\";\r\n\r\nconst Form = FormProvider;\r\n\r\ntype FormFieldContextValue<\r\n  TFieldValues extends FieldValues = FieldValues,\r\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\r\n> = {\r\n  name: TName;\r\n};\r\n\r\nconst FormFieldContext = React.createContext<FormFieldContextValue>({} as FormFieldContextValue);\r\n\r\nconst FormField = <\r\n  TFieldValues extends FieldValues = FieldValues,\r\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\r\n>({\r\n  ...props\r\n}: ControllerProps<TFieldValues, TName>) => {\r\n  return (\r\n    <FormFieldContext.Provider value={{ name: props.name }}>\r\n      <Controller {...props} />\r\n    </FormFieldContext.Provider>\r\n  );\r\n};\r\n\r\nconst useFormField = () => {\r\n  const fieldContext = React.useContext(FormFieldContext);\r\n  const itemContext = React.useContext(FormItemContext);\r\n  const { getFieldState, formState } = useFormContext();\r\n\r\n  const fieldState = getFieldState(fieldContext.name, formState);\r\n\r\n  if (!fieldContext) {\r\n    throw new Error(\"useFormField should be used within <FormField>\");\r\n  }\r\n\r\n  const { id } = itemContext;\r\n\r\n  return {\r\n    id,\r\n    name: fieldContext.name,\r\n    formItemId: `${id}-form-item`,\r\n    formDescriptionId: `${id}-form-item-description`,\r\n    formMessageId: `${id}-form-item-message`,\r\n    ...fieldState,\r\n  };\r\n};\r\n\r\ntype FormItemContextValue = {\r\n  id: string;\r\n};\r\n\r\nconst FormItemContext = React.createContext<FormItemContextValue>({} as FormItemContextValue);\r\n\r\nconst FormItem = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\r\n  ({ className, ...props }, ref) => {\r\n    const id = React.useId();\r\n\r\n    return (\r\n      <FormItemContext.Provider value={{ id }}>\r\n        <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\r\n      </FormItemContext.Provider>\r\n    );\r\n  },\r\n);\r\nFormItem.displayName = \"FormItem\";\r\n\r\nconst FormLabel = React.forwardRef<\r\n  React.ElementRef<typeof LabelPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\r\n>(({ className, ...props }, ref) => {\r\n  const { error, formItemId } = useFormField();\r\n\r\n  return <Label ref={ref} className={cn(error && \"text-destructive\", className)} htmlFor={formItemId} {...props} />;\r\n});\r\nFormLabel.displayName = \"FormLabel\";\r\n\r\nconst FormControl = React.forwardRef<React.ElementRef<typeof Slot>, React.ComponentPropsWithoutRef<typeof Slot>>(\r\n  ({ ...props }, ref) => {\r\n    const { error, formItemId, formDescriptionId, formMessageId } = useFormField();\r\n\r\n    return (\r\n      <Slot\r\n        ref={ref}\r\n        id={formItemId}\r\n        aria-describedby={!error ? `${formDescriptionId}` : `${formDescriptionId} ${formMessageId}`}\r\n        aria-invalid={!!error}\r\n        {...props}\r\n      />\r\n    );\r\n  },\r\n);\r\nFormControl.displayName = \"FormControl\";\r\n\r\nconst FormDescription = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLParagraphElement>>(\r\n  ({ className, ...props }, ref) => {\r\n    const { formDescriptionId } = useFormField();\r\n\r\n    return <p ref={ref} id={formDescriptionId} className={cn(\"text-sm text-muted-foreground\", className)} {...props} />;\r\n  },\r\n);\r\nFormDescription.displayName = \"FormDescription\";\r\n\r\nconst FormMessage = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLParagraphElement>>(\r\n  ({ className, children, ...props }, ref) => {\r\n    const { error, formMessageId } = useFormField();\r\n    const body = error ? String(error?.message) : children;\r\n\r\n    if (!body) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <p ref={ref} id={formMessageId} className={cn(\"text-sm font-medium text-destructive\", className)} {...props}>\r\n        {body}\r\n      </p>\r\n    );\r\n  },\r\n);\r\nFormMessage.displayName = \"FormMessage\";\r\n\r\nexport { useFormField, Form, FormItem, FormLabel, FormControl, FormDescription, FormMessage, FormField };\r\n"],"names":["Form","FormProvider","FormFieldContext","React.createContext","FormField","props","jsx","Controller","useFormField","fieldContext","React.useContext","itemContext","FormItemContext","getFieldState","formState","useFormContext","fieldState","id","FormItem","React.forwardRef","className","ref","React.useId","cn","FormLabel","error","formItemId","Label","FormControl","formDescriptionId","formMessageId","Slot","FormDescription","FormMessage","children","body"],"mappings":"oIAQA,MAAMA,EAAOC,EASPC,EAAmBC,EAAAA,cAA2C,CAAA,CAA2B,EAEzFC,EAAY,CAGhB,CACA,GAAGC,CACL,IAEKC,EAAAA,IAAAJ,EAAiB,SAAjB,CAA0B,MAAO,CAAE,KAAMG,EAAM,IAAA,EAC9C,SAAAC,EAAAA,IAACC,EAAY,CAAA,GAAGF,EAAO,CACzB,CAAA,EAIEG,EAAe,IAAM,CACnB,MAAAC,EAAeC,aAAiBR,CAAgB,EAChDS,EAAcD,aAAiBE,CAAe,EAC9C,CAAE,cAAAC,EAAe,UAAAC,CAAU,EAAIC,EAAe,EAE9CC,EAAaH,EAAcJ,EAAa,KAAMK,CAAS,EAE7D,GAAI,CAACL,EACG,MAAA,IAAI,MAAM,gDAAgD,EAG5D,KAAA,CAAE,GAAAQ,CAAO,EAAAN,EAER,MAAA,CACL,GAAAM,EACA,KAAMR,EAAa,KACnB,WAAY,GAAGQ,CAAE,aACjB,kBAAmB,GAAGA,CAAE,yBACxB,cAAe,GAAGA,CAAE,qBACpB,GAAGD,CAAA,CAEP,EAMMJ,EAAkBT,EAAAA,cAA0C,CAAA,CAA0B,EAEtFe,EAAWC,EAAM,WACrB,CAAC,CAAE,UAAAC,EAAW,GAAGf,CAAA,EAASgB,IAAQ,CAC1B,MAAAJ,EAAKK,EAAAA,QAEX,aACGV,EAAgB,SAAhB,CAAyB,MAAO,CAAE,GAAAK,GACjC,SAAAX,MAAC,MAAI,CAAA,IAAAe,EAAU,UAAWE,EAAG,YAAaH,CAAS,EAAI,GAAGf,EAAO,CACnE,CAAA,CAEJ,CACF,EACAa,EAAS,YAAc,WAEjB,MAAAM,EAAYL,EAGhB,WAAA,CAAC,CAAE,UAAAC,EAAW,GAAGf,CAAM,EAAGgB,IAAQ,CAClC,KAAM,CAAE,MAAAI,EAAO,WAAAC,CAAW,EAAIlB,EAAa,EAE3C,OAAQF,EAAA,IAAAqB,EAAA,CAAM,IAAAN,EAAU,UAAWE,EAAGE,GAAS,mBAAoBL,CAAS,EAAG,QAASM,EAAa,GAAGrB,CAAO,CAAA,CACjH,CAAC,EACDmB,EAAU,YAAc,YAExB,MAAMI,EAAcT,EAAM,WACxB,CAAC,CAAE,GAAGd,GAASgB,IAAQ,CACrB,KAAM,CAAE,MAAAI,EAAO,WAAAC,EAAY,kBAAAG,EAAmB,cAAAC,CAAA,EAAkBtB,IAG9D,OAAAF,EAAA,IAACyB,EAAA,CACC,IAAAV,EACA,GAAIK,EACJ,mBAAmBD,EAAiC,GAAGI,CAAiB,IAAIC,CAAa,GAA9D,GAAGD,CAAiB,GAC/C,eAAc,CAAC,CAACJ,EACf,GAAGpB,CAAA,CAAA,CAGV,CACF,EACAuB,EAAY,YAAc,cAE1B,MAAMI,EAAkBb,EAAM,WAC5B,CAAC,CAAE,UAAAC,EAAW,GAAGf,CAAA,EAASgB,IAAQ,CAC1B,KAAA,CAAE,kBAAAQ,GAAsBrB,IAEvB,OAAAF,EAAA,IAAC,IAAE,CAAA,IAAAe,EAAU,GAAIQ,EAAmB,UAAWN,EAAG,gCAAiCH,CAAS,EAAI,GAAGf,CAAO,CAAA,CACnH,CACF,EACA2B,EAAgB,YAAc,kBAE9B,MAAMC,EAAcd,EAAM,WACxB,CAAC,CAAE,UAAAC,EAAW,SAAAc,EAAU,GAAG7B,CAAA,EAASgB,IAAQ,CAC1C,KAAM,CAAE,MAAAI,EAAO,cAAAK,CAAc,EAAItB,EAAa,EACxC2B,EAAOV,EAAQ,OAAOA,GAAO,OAAO,EAAIS,EAE9C,OAAKC,EAKF7B,EAAAA,IAAA,IAAA,CAAE,IAAAe,EAAU,GAAIS,EAAe,UAAWP,EAAG,uCAAwCH,CAAS,EAAI,GAAGf,EACnG,SACH8B,CAAA,CAAA,EANO,IAQX,CACF,EACAF,EAAY,YAAc"}