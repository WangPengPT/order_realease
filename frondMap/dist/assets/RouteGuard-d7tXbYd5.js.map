{"version":3,"file":"RouteGuard-d7tXbYd5.js","sources":["../../src/components/RouteGuard.tsx"],"sourcesContent":["import { ReactNode } from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport { useUserRole } from \"@/hooks/useUserRole\";\r\nimport { useNavigationSettings } from \"@/hooks/useNavigationSettings\";\r\nimport FeatureDisabledPage from \"./FeatureDisabledPage\";\r\n\r\ninterface RouteGuardProps {\r\n  children: ReactNode;\r\n}\r\n\r\nconst RouteGuard = ({ children }: RouteGuardProps) => {\r\n  const location = useLocation();\r\n  const { isAdmin } = useUserRole();\r\n  const { buttons, isLoading } = useNavigationSettings();\r\n\r\n  // Skip guard while loading to avoid flash\r\n  if (isLoading) {\r\n    return <>{children}</>;\r\n  }\r\n\r\n  // Check if current path matches a disabled button\r\n  const matchingButton = buttons?.find((btn) => {\r\n    // Exact match\r\n    if (btn.link === location.pathname) return true;\r\n    // Check for path prefix match (e.g., /community matches /community/123)\r\n    if (location.pathname.startsWith(btn.link + \"/\")) return true;\r\n    return false;\r\n  });\r\n\r\n  // If found a matching button that is disabled, and user is not admin\r\n  if (matchingButton && matchingButton.enabled === false && !isAdmin) {\r\n    return <FeatureDisabledPage />;\r\n  }\r\n\r\n  return <>{children}</>;\r\n};\r\n\r\nexport default RouteGuard;"],"names":["RouteGuard","children","location","useLocation","isAdmin","useUserRole","buttons","isLoading","useNavigationSettings","matchingButton","btn","FeatureDisabledPage"],"mappings":"2SAUA,MAAMA,EAAa,CAAC,CAAE,SAAAC,KAAgC,CACpD,MAAMC,EAAWC,IACX,CAAE,QAAAC,GAAYC,IACd,CAAE,QAAAC,EAAS,UAAAC,CAAU,EAAIC,EAAsB,EAGrD,GAAID,EACF,yBAAU,SAAAN,CAAS,CAAA,EAIrB,MAAMQ,EAAiBH,GAAS,KAAMI,GAEhC,GAAAA,EAAI,OAASR,EAAS,UAEtBA,EAAS,SAAS,WAAWQ,EAAI,KAAO,GAAG,EAEhD,EAGD,OAAID,GAAkBA,EAAe,UAAY,IAAS,CAACL,QACjDO,EAAoB,CAAA,CAAA,oBAGpB,SAAAV,CAAS,CAAA,CACrB"}