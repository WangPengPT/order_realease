{"version":3,"file":"MerchantDashboard-DuD4U9v2.js","sources":["../../src/pages/merchant/MerchantDashboard.tsx"],"sourcesContent":["import { useAuth } from \"@/contexts/AuthContext\";\r\nimport { useUserRole } from \"@/hooks/useUserRole\";\r\nimport { useMerchantRestaurants } from \"@/hooks/useActivityParticipation\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Edit, MapPin, Phone, Star, Loader2, Globe } from \"lucide-react\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useLocalizedContent } from \"@/hooks/useLocalizedContent\";\r\nimport { RestaurantFormDialog } from \"@/components/admin/RestaurantFormDialog\";\r\nimport { useEffect } from \"react\";\r\n\r\nconst MerchantDashboard = () => {\r\n  const { user } = useAuth();\r\n  const navigate = useNavigate();\r\n  const { t } = useTranslation();\r\n  const { isMerchant, isSupervisor, isLoading: roleLoading } = useUserRole();\r\n  const { data: restaurants = [], isLoading } = useMerchantRestaurants();\r\n  const { localizeRestaurant } = useLocalizedContent();\r\n\r\n  // Redirect if not merchant or supervisor\r\n  useEffect(() => {\r\n    if (!roleLoading && !isMerchant && !isSupervisor) {\r\n      navigate(\"/\");\r\n    }\r\n  }, [roleLoading, isMerchant, isSupervisor, navigate]);\r\n\r\n  if (isLoading || roleLoading) {\r\n    return (\r\n      <div className=\"flex justify-center items-center min-h-[50vh]\">\r\n        <Loader2 className=\"w-8 h-8 animate-spin text-primary\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"mb-8\">\r\n        <h1 className=\"text-3xl font-bold mb-2\">{t(\"merchant.myRestaurants\")}</h1>\r\n        <p className=\"text-muted-foreground\">\r\n          {isSupervisor ? t(\"merchant.supervisorDescription\") : t(\"merchant.merchantDescription\")}\r\n        </p>\r\n      </div>\r\n\r\n      {restaurants.length === 0 ? (\r\n        <Card>\r\n          <CardContent className=\"py-12 text-center\">\r\n            <p className=\"text-muted-foreground mb-4\">{t(\"merchant.noRestaurants\")}</p>\r\n          </CardContent>\r\n        </Card>\r\n      ) : (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n          {restaurants.map((restaurant) => {\r\n            const localized = localizeRestaurant(restaurant);\r\n            return (\r\n              <Card key={restaurant.id} className=\"overflow-hidden hover:shadow-lg transition-shadow\">\r\n                <div className=\"relative h-48 overflow-hidden\">\r\n                  <img\r\n                    src={restaurant.image_url || \"/placeholder.svg\"}\r\n                    alt={localized.name}\r\n                    className=\"w-full h-full object-cover\"\r\n                  />\r\n                </div>\r\n                <CardHeader>\r\n                  <CardTitle className=\"flex items-start justify-between gap-2\">\r\n                    <span className=\"line-clamp-1\">{localized.name}</span>\r\n                    {restaurant.rating && (\r\n                      <div className=\"flex items-center gap-1 text-sm\">\r\n                        <Star className=\"w-4 h-4 fill-primary text-primary\" />\r\n                        <span>{restaurant.rating}</span>\r\n                      </div>\r\n                    )}\r\n                  </CardTitle>\r\n                </CardHeader>\r\n                <CardContent className=\"space-y-3\">\r\n                  {restaurant.type && restaurant.type.length > 0 && (\r\n                    <div className=\"flex flex-wrap gap-1\">\r\n                      {localized.type.slice(0, 3).map((type, idx) => (\r\n                        <span\r\n                          key={idx}\r\n                          className=\"text-xs px-2 py-1 bg-secondary text-secondary-foreground rounded\"\r\n                        >\r\n                          {type}\r\n                        </span>\r\n                      ))}\r\n                    </div>\r\n                  )}\r\n\r\n                  {restaurant.address && (\r\n                    <div className=\"flex items-start gap-2 text-sm text-muted-foreground\">\r\n                      <MapPin className=\"w-4 h-4 mt-0.5 flex-shrink-0\" />\r\n                      <span className=\"line-clamp-2\">{restaurant.address}</span>\r\n                    </div>\r\n                  )}\r\n\r\n                  {restaurant.phone && (\r\n                    <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\r\n                      <Phone className=\"w-4 h-4 flex-shrink-0\" />\r\n                      <span>{restaurant.phone}</span>\r\n                    </div>\r\n                  )}\r\n\r\n                  {restaurant.website_url && (\r\n                    <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\r\n                      <Globe className=\"w-4 h-4 flex-shrink-0\" />\r\n                      <a\r\n                        href={restaurant.website_url}\r\n                        target=\"_blank\"\r\n                        rel=\"noopener noreferrer\"\r\n                        className=\"text-primary hover:underline line-clamp-1\"\r\n                      >\r\n                        {t(\"restaurant.visitWebsite\")}\r\n                      </a>\r\n                    </div>\r\n                  )}\r\n\r\n                  <div className=\"flex gap-2 pt-2\">\r\n                    <Button\r\n                      asChild\r\n                      variant=\"outline\"\r\n                      size=\"sm\"\r\n                      className=\"flex-1\"\r\n                    >\r\n                      <Link to={`/restaurant/${restaurant.id}`}>\r\n                        {t(\"restaurants.viewDetails\")}\r\n                      </Link>\r\n                    </Button>\r\n                    <RestaurantFormDialog\r\n                      restaurant={restaurant}\r\n                      trigger={\r\n                        <Button variant=\"default\" size=\"sm\" className=\"flex-1\">\r\n                          <Edit className=\"w-4 h-4 mr-1\" />\r\n                          {t(\"common.edit\")}\r\n                        </Button>\r\n                      }\r\n                    />\r\n                  </div>\r\n                </CardContent>\r\n              </Card>\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MerchantDashboard;\r\n"],"names":["MerchantDashboard","useAuth","navigate","useNavigate","t","useTranslation","isMerchant","isSupervisor","roleLoading","useUserRole","restaurants","isLoading","useMerchantRestaurants","localizeRestaurant","useLocalizedContent","useEffect","jsx","Loader2","jsxs","Card","CardContent","restaurant","localized","CardHeader","CardTitle","Star","type","idx","MapPin","Phone","Globe","Button","Link","RestaurantFormDialog","Edit"],"mappings":"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"}