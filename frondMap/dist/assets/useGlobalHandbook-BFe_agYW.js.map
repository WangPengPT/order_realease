{"version":3,"file":"useGlobalHandbook-BFe_agYW.js","sources":["../../src/hooks/useGlobalHandbook.ts"],"sourcesContent":["import { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\n\r\nexport interface GlobalHandbook {\r\n  id: string;\r\n  content_zh: string;\r\n  content_en: string;\r\n  content_pt: string;\r\n  updated_at: string;\r\n  created_at: string;\r\n}\r\n\r\nexport const useGlobalHandbook = () => {\r\n  return useQuery({\r\n    queryKey: [\"global-handbook\"],\r\n    queryFn: async () => {\r\n      const { data, error } = await supabase\r\n        .from(\"activity_handbook\")\r\n        .select(\"*\")\r\n        .single();\r\n\r\n      if (error) throw error;\r\n      return data as GlobalHandbook;\r\n    },\r\n  });\r\n};\r\n\r\nexport const useUpdateGlobalHandbook = () => {\r\n  const queryClient = useQueryClient();\r\n\r\n  return useMutation({\r\n    mutationFn: async (handbook: Partial<GlobalHandbook> & { id: string }) => {\r\n      const { data, error } = await supabase\r\n        .from(\"activity_handbook\")\r\n        .update({\r\n          content_zh: handbook.content_zh,\r\n          content_en: handbook.content_en,\r\n          content_pt: handbook.content_pt,\r\n          updated_at: new Date().toISOString(),\r\n        })\r\n        .eq(\"id\", handbook.id)\r\n        .select()\r\n        .single();\r\n\r\n      if (error) throw error;\r\n      return data;\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"global-handbook\"] });\r\n    },\r\n  });\r\n};\r\n"],"names":["useGlobalHandbook","useQuery","data","error","supabase","useUpdateGlobalHandbook","queryClient","useQueryClient","useMutation","handbook"],"mappings":"qGAYO,MAAMA,EAAoB,IACxBC,EAAS,CACd,SAAU,CAAC,iBAAiB,EAC5B,QAAS,SAAY,CACnB,KAAM,CAAE,KAAAC,EAAM,MAAAC,CAAM,EAAI,MAAMC,EAC3B,KAAK,mBAAmB,EACxB,OAAO,GAAG,EACV,OAAO,EAEV,GAAID,EAAa,MAAAA,EACV,OAAAD,CACT,CAAA,CACD,EAGUG,EAA0B,IAAM,CAC3C,MAAMC,EAAcC,IAEpB,OAAOC,EAAY,CACjB,WAAY,MAAOC,GAAuD,CAClE,KAAA,CAAE,KAAAP,EAAM,MAAAC,GAAU,MAAMC,EAC3B,KAAK,mBAAmB,EACxB,OAAO,CACN,WAAYK,EAAS,WACrB,WAAYA,EAAS,WACrB,WAAYA,EAAS,WACrB,WAAY,IAAI,KAAK,EAAE,YAAY,CAAA,CACpC,EACA,GAAG,KAAMA,EAAS,EAAE,EACpB,OAAO,EACP,SAEH,GAAIN,EAAa,MAAAA,EACV,OAAAD,CACT,EACA,UAAW,IAAM,CACfI,EAAY,kBAAkB,CAAE,SAAU,CAAC,iBAAiB,CAAG,CAAA,CACjE,CAAA,CACD,CACH"}