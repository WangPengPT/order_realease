{"version":3,"file":"PostCard-hm0HHvtr.js","sources":["../../src/components/community/PostCard.tsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { formatDistanceToNow } from \"date-fns\";\r\nimport { zhCN, enUS, pt } from \"date-fns/locale\";\r\nimport { Heart, MessageCircle, Share2, MoreHorizontal, Calendar, X, ChevronLeft, ChevronRight } from \"lucide-react\";\r\nimport {\r\n  Carousel,\r\n  CarouselContent,\r\n  CarouselItem,\r\n  type CarouselApi,\r\n} from \"@/components/ui/carousel\";\r\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardFooter, CardHeader } from \"@/components/ui/card\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuTrigger,\r\n} from \"@/components/ui/dropdown-menu\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n} from \"@/components/ui/dialog\";\r\nimport { CommunityPost, useLikePost, useSharePost, useDeletePost } from \"@/hooks/useCommunityPosts\";\r\nimport { useAuth } from \"@/contexts/AuthContext\";\r\nimport { useLocalizedContent } from \"@/hooks/useLocalizedContent\";\r\nimport { toast } from \"sonner\";\r\nimport {\r\n  AlertDialog,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n  AlertDialogContent,\r\n  AlertDialogDescription,\r\n  AlertDialogFooter,\r\n  AlertDialogHeader,\r\n  AlertDialogTitle,\r\n} from \"@/components/ui/alert-dialog\";\r\n\r\ninterface PostCardProps {\r\n  post: CommunityPost;\r\n  showActions?: boolean;\r\n  isDetailPage?: boolean;\r\n}\r\n\r\nconst PostCard = ({ post, showActions = true, isDetailPage = false }: PostCardProps) => {\r\n  const { t, i18n } = useTranslation();\r\n  const { user } = useAuth();\r\n  const navigate = useNavigate();\r\n  const { getLocalizedField } = useLocalizedContent();\r\n  const likePost = useLikePost();\r\n  const sharePost = useSharePost();\r\n  const deletePost = useDeletePost();\r\n  const [showDeleteDialog, setShowDeleteDialog] = useState(false);\r\n  const [imageError, setImageError] = useState<Record<string, boolean>>({});\r\n  const [previewOpen, setPreviewOpen] = useState(false);\r\n  const [previewIndex, setPreviewIndex] = useState(0);\r\n  const [carouselApi, setCarouselApi] = useState<CarouselApi>();\r\n  const [currentSlide, setCurrentSlide] = useState(0);\r\n\r\n  // Listen to carousel slide changes\r\n  useEffect(() => {\r\n    if (!carouselApi) return;\r\n    \r\n    setCurrentSlide(carouselApi.selectedScrollSnap());\r\n    \r\n    carouselApi.on(\"select\", () => {\r\n      setCurrentSlide(carouselApi.selectedScrollSnap());\r\n    });\r\n  }, [carouselApi]);\r\n\r\n  const getDateLocale = () => {\r\n    switch (i18n.language) {\r\n      case \"zh\":\r\n        return zhCN;\r\n      case \"pt\":\r\n        return pt;\r\n      default:\r\n        return enUS;\r\n    }\r\n  };\r\n\r\n  const handleLike = () => {\r\n    if (!user) return;\r\n    likePost.mutate({ postId: post.id, liked: post.user_liked || false });\r\n  };\r\n\r\n  const handleShare = async () => {\r\n    const shareUrl = `${window.location.origin}/community/${post.id}`;\r\n    \r\n    if (navigator.share) {\r\n      try {\r\n        await navigator.share({\r\n          title: t(\"community.shareTitle\", \"分享帖子\"),\r\n          url: shareUrl,\r\n        });\r\n        if (user) {\r\n          sharePost.mutate(post.id);\r\n        }\r\n        toast.success(t(\"community.shareSuccess\", \"分享成功\"));\r\n      } catch (error: any) {\r\n        // User cancelled or share failed - fallback to copy\r\n        if (error?.name !== \"AbortError\") {\r\n          await navigator.clipboard.writeText(shareUrl);\r\n          toast.success(t(\"community.linkCopied\", \"链接已复制到剪贴板\"));\r\n          if (user) {\r\n            sharePost.mutate(post.id);\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      // Fallback: copy to clipboard\r\n      try {\r\n        await navigator.clipboard.writeText(shareUrl);\r\n        toast.success(t(\"community.linkCopied\", \"链接已复制到剪贴板\"));\r\n        if (user) {\r\n          sharePost.mutate(post.id);\r\n        }\r\n      } catch (error) {\r\n        toast.error(t(\"community.shareFailed\", \"分享失败\"));\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleDelete = () => {\r\n    deletePost.mutate(post.id);\r\n    setShowDeleteDialog(false);\r\n  };\r\n\r\n  const handleImageClick = (index: number) => {\r\n    if (isDetailPage) {\r\n      // On detail page, open preview\r\n      setPreviewIndex(index);\r\n      setPreviewOpen(true);\r\n    } else {\r\n      // On feed, navigate to post detail\r\n      navigate(`/community/${post.id}`);\r\n    }\r\n  };\r\n\r\n  const handlePrevImage = () => {\r\n    setPreviewIndex((prev) => \r\n      prev === 0 ? (post.image_urls?.length || 1) - 1 : prev - 1\r\n    );\r\n  };\r\n\r\n  const handleNextImage = () => {\r\n    setPreviewIndex((prev) => \r\n      prev === (post.image_urls?.length || 1) - 1 ? 0 : prev + 1\r\n    );\r\n  };\r\n\r\n  const isAuthor = user?.id === post.author_id;\r\n  const activityTitle = post.activity\r\n    ? getLocalizedField(post.activity, \"title\")\r\n    : null;\r\n\r\n  return (\r\n    <>\r\n      <Card className=\"overflow-hidden\">\r\n        <CardHeader className=\"pb-3\">\r\n          <div className=\"flex items-start justify-between\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <Avatar className=\"h-10 w-10\">\r\n                <AvatarImage src={post.author?.avatar_url || undefined} />\r\n                <AvatarFallback>\r\n                  {post.author?.display_name?.charAt(0) || \"?\"}\r\n                </AvatarFallback>\r\n              </Avatar>\r\n              <div>\r\n                <p className=\"font-medium text-sm\">{post.author?.display_name}</p>\r\n                <p className=\"text-xs text-muted-foreground\">\r\n                  {formatDistanceToNow(new Date(post.created_at), {\r\n                    addSuffix: true,\r\n                    locale: getDateLocale(),\r\n                  })}\r\n                </p>\r\n              </div>\r\n            </div>\r\n\r\n            {showActions && isAuthor && (\r\n              <DropdownMenu>\r\n                <DropdownMenuTrigger asChild>\r\n                  <Button variant=\"ghost\" size=\"icon\" className=\"h-8 w-8\">\r\n                    <MoreHorizontal className=\"h-4 w-4\" />\r\n                  </Button>\r\n                </DropdownMenuTrigger>\r\n                <DropdownMenuContent align=\"end\">\r\n                  <DropdownMenuItem\r\n                    onClick={() => setShowDeleteDialog(true)}\r\n                    className=\"text-destructive\"\r\n                  >\r\n                    {t(\"common.delete\", \"删除\")}\r\n                  </DropdownMenuItem>\r\n                </DropdownMenuContent>\r\n              </DropdownMenu>\r\n            )}\r\n          </div>\r\n        </CardHeader>\r\n\r\n        <CardContent className=\"pt-0 pb-3\">\r\n          {/* Activity Badge */}\r\n          {post.activity && (\r\n            <Link to={`/activity/${post.activity.id}`}>\r\n              <Badge variant=\"secondary\" className=\"mb-3 gap-1\">\r\n                <Calendar className=\"h-3 w-3\" />\r\n                {activityTitle}\r\n              </Badge>\r\n            </Link>\r\n          )}\r\n\r\n          {/* Content */}\r\n          <Link to={`/community/${post.id}`}>\r\n            <div\r\n              className=\"prose prose-sm max-w-none dark:prose-invert\"\r\n              dangerouslySetInnerHTML={{ __html: getLocalizedField(post, \"content\") }}\r\n            />\r\n          </Link>\r\n\r\n          {/* Images - Instagram-style Carousel */}\r\n          {post.image_urls && post.image_urls.length > 0 && (\r\n            <div className=\"relative mt-3\">\r\n              <Carousel \r\n                setApi={setCarouselApi} \r\n                className=\"w-full\"\r\n                opts={{ loop: true }}\r\n              >\r\n                <CarouselContent className=\"-ml-0\">\r\n                  {post.image_urls.map((url, index) => (\r\n                    <CarouselItem key={index} className=\"pl-0\">\r\n                      <div \r\n                        className=\"relative aspect-square overflow-hidden rounded-lg cursor-pointer\"\r\n                        onClick={() => handleImageClick(index)}\r\n                      >\r\n                        {!imageError[url] ? (\r\n                          <img\r\n                            src={url}\r\n                            alt=\"\"\r\n                            className=\"w-full h-full object-cover\"\r\n                            onError={() =>\r\n                              setImageError((prev) => ({ ...prev, [url]: true }))\r\n                            }\r\n                          />\r\n                        ) : (\r\n                          <div className=\"w-full h-full bg-muted flex items-center justify-center\">\r\n                            <span className=\"text-xs text-muted-foreground\">\r\n                              {t(\"common.imageLoadError\", \"图片加载失败\")}\r\n                            </span>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    </CarouselItem>\r\n                  ))}\r\n                </CarouselContent>\r\n              </Carousel>\r\n              \r\n              {/* Top-right slide counter */}\r\n              {post.image_urls.length > 1 && (\r\n                <div className=\"absolute top-3 right-3 bg-black/60 text-white text-xs px-2 py-1 rounded-full z-10\">\r\n                  {currentSlide + 1}/{post.image_urls.length}\r\n                </div>\r\n              )}\r\n              \r\n              {/* Bottom navigation dots */}\r\n              {post.image_urls.length > 1 && (\r\n                <div className=\"flex justify-center gap-1.5 mt-2\">\r\n                  {post.image_urls.map((_, index) => (\r\n                    <button\r\n                      key={index}\r\n                      className={`w-1.5 h-1.5 rounded-full transition-colors ${\r\n                        index === currentSlide \r\n                          ? \"bg-primary\" \r\n                          : \"bg-muted-foreground/30\"\r\n                      }`}\r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        carouselApi?.scrollTo(index);\r\n                      }}\r\n                    />\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {/* Video */}\r\n          {post.video_url && (\r\n            <div className=\"mt-3 rounded-lg overflow-hidden\">\r\n              <video\r\n                src={post.video_url}\r\n                controls\r\n                className=\"w-full max-h-96\"\r\n                preload=\"metadata\"\r\n              />\r\n            </div>\r\n          )}\r\n        </CardContent>\r\n\r\n        <CardFooter className=\"pt-0 border-t\">\r\n          <div className=\"flex items-center gap-4 pt-3 w-full\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"sm\"\r\n              className={`gap-2 ${post.user_liked ? \"text-red-500\" : \"\"}`}\r\n              onClick={handleLike}\r\n              disabled={!user}\r\n            >\r\n              <Heart\r\n                className={`h-4 w-4 ${post.user_liked ? \"fill-current\" : \"\"}`}\r\n              />\r\n              <span>{post.likes_count}</span>\r\n            </Button>\r\n\r\n            <Link to={`/community/${post.id}`}>\r\n              <Button variant=\"ghost\" size=\"sm\" className=\"gap-2\">\r\n                <MessageCircle className=\"h-4 w-4\" />\r\n                <span>{post.comments_count}</span>\r\n              </Button>\r\n            </Link>\r\n\r\n            <Button variant=\"ghost\" size=\"sm\" className=\"gap-2\" onClick={handleShare}>\r\n              <Share2 className=\"h-4 w-4\" />\r\n              <span>{post.shares_count}</span>\r\n            </Button>\r\n          </div>\r\n        </CardFooter>\r\n      </Card>\r\n\r\n      <AlertDialog open={showDeleteDialog} onOpenChange={setShowDeleteDialog}>\r\n        <AlertDialogContent>\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle>{t(\"common.confirmDelete\", \"确认删除\")}</AlertDialogTitle>\r\n            <AlertDialogDescription>\r\n              {t(\"community.deleteWarning\", \"删除后无法恢复，确定要删除这篇帖子吗？\")}\r\n            </AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <AlertDialogFooter>\r\n            <AlertDialogCancel>{t(\"common.cancel\", \"取消\")}</AlertDialogCancel>\r\n            <AlertDialogAction onClick={handleDelete}>\r\n              {t(\"common.delete\", \"删除\")}\r\n            </AlertDialogAction>\r\n          </AlertDialogFooter>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n\r\n      {/* Image Preview Dialog */}\r\n      <Dialog open={previewOpen} onOpenChange={setPreviewOpen}>\r\n        <DialogContent className=\"max-w-[95vw] max-h-[95vh] p-0 bg-black/95 border-none\">\r\n          <div className=\"relative w-full h-full flex items-center justify-center min-h-[50vh]\">\r\n            {/* Close Button */}\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"absolute top-2 right-2 z-10 text-white hover:bg-white/20\"\r\n              onClick={() => setPreviewOpen(false)}\r\n            >\r\n              <X className=\"h-6 w-6\" />\r\n            </Button>\r\n\r\n            {/* Navigation Buttons */}\r\n            {post.image_urls && post.image_urls.length > 1 && (\r\n              <>\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"icon\"\r\n                  className=\"absolute left-2 z-10 text-white hover:bg-white/20\"\r\n                  onClick={handlePrevImage}\r\n                >\r\n                  <ChevronLeft className=\"h-8 w-8\" />\r\n                </Button>\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"icon\"\r\n                  className=\"absolute right-2 z-10 text-white hover:bg-white/20\"\r\n                  onClick={handleNextImage}\r\n                >\r\n                  <ChevronRight className=\"h-8 w-8\" />\r\n                </Button>\r\n              </>\r\n            )}\r\n\r\n            {/* Image */}\r\n            {post.image_urls && post.image_urls[previewIndex] && (\r\n              <img\r\n                src={post.image_urls[previewIndex]}\r\n                alt=\"\"\r\n                className=\"max-w-full max-h-[90vh] object-contain\"\r\n              />\r\n            )}\r\n\r\n            {/* Image Counter */}\r\n            {post.image_urls && post.image_urls.length > 1 && (\r\n              <div className=\"absolute bottom-4 left-1/2 -translate-x-1/2 text-white text-sm bg-black/50 px-3 py-1 rounded-full\">\r\n                {previewIndex + 1} / {post.image_urls.length}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PostCard;\r\n"],"names":["PostCard","post","showActions","isDetailPage","i18n","useTranslation","user","useAuth","navigate","useNavigate","getLocalizedField","useLocalizedContent","likePost","useLikePost","sharePost","useSharePost","deletePost","useDeletePost","showDeleteDialog","setShowDeleteDialog","useState","imageError","setImageError","previewOpen","setPreviewOpen","previewIndex","setPreviewIndex","carouselApi","setCarouselApi","currentSlide","setCurrentSlide","useEffect","getDateLocale","zhCN","pt","enUS","handleLike","handleShare","shareUrl","toast","error","handleDelete","handleImageClick","index","handlePrevImage","prev","handleNextImage","isAuthor","activityTitle","jsxs","Fragment","Card","jsx","CardHeader","Avatar","AvatarImage","AvatarFallback","DropdownMenu","DropdownMenuTrigger","Button","MoreHorizontal","DropdownMenuContent","DropdownMenuItem","CardContent","Link","Badge","Calendar","Carousel","CarouselContent","url","CarouselItem","_","e","CardFooter","Heart","MessageCircle","Share2","AlertDialog","AlertDialogContent","AlertDialogHeader","AlertDialogTitle","AlertDialogDescription","AlertDialogFooter","AlertDialogCancel","AlertDialogAction","Dialog","DialogContent","X","ChevronLeft","ChevronRight"],"mappings":"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"}