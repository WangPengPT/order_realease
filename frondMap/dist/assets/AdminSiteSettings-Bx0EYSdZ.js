import{p as Me,aO as Re,q as Fe,r as c,j as e,aM as m,bD as Ue,bA as Le,al as ze,ch as He,ab as qe,bh as ue,bU as he,aK as Ve,y as k,M as Be}from"./vendor-react-BQzJ6E-_.js";import{b as Je,C as u,p as h,F as x,$ as g,q as p,U as t,I as o,a8 as j,B as r,s as xe}from"./index-BNKbGXoa.js";import{S as ge}from"./slider-Dtc56GJr.js";import{S as N}from"./switch-CHu8xOl2.js";import{l as Ze}from"./xiaoxiong-logo-christmas-WzN065fn.js";import"./vendor-i18n-jtdHZIRR.js";import"./vendor-editor-B1vH4T8i.js";import"./vendor-utils-vwQGbBim.js";import"./vendor-supabase-Bm_2ig-Q.js";const ss=()=>{const{t:a}=Me(),b=Re(),pe=Fe(),{settings:n,isLoading:P,updateSettings:i,uploadLogo:E}=Je(),[D,I]=c.useState(!1),[A,T]=c.useState(!1),M=c.useRef(null),R=c.useRef(null),_=c.useRef(null),y=c.useRef(null),[v,w]=c.useState(35),[f,S]=c.useState(35),[F,U]=c.useState(""),[L,z]=c.useState(""),[H,q]=c.useState(""),[V,B]=c.useState(""),[J,Z]=c.useState(""),[O,W]=c.useState(""),[X,$]=c.useState(""),[K,Q]=c.useState(""),[G,Y]=c.useState(""),[ee,se]=c.useState(""),[ae,te]=c.useState(""),[ne,ie]=c.useState(""),[ce,le]=c.useState(""),[oe,de]=c.useState(""),[re,me]=c.useState("");c.useEffect(()=>{n&&(w(n.logo_width||35),S(n.logo_height||35),U(n.join_contact_phone||"968815050"),z(n.join_success_title_zh||"信息已提交成功！"),q(n.join_success_title_en||"Request Submitted!"),B(n.join_success_title_pt||"Informação Enviada com Sucesso!"),Z(n.join_success_message_zh||"感谢您的信任！我们的专属顾问将在24小时工作日内通过电话与您联系。"),W(n.join_success_message_en||"Thank you for your trust! Our dedicated consultant will contact you by phone within 24 business hours."),$(n.join_success_message_pt||"Obrigado pela sua confiança! Nosso consultor dedicado entrará em contato por telefone dentro de 24 horas úteis."),Q(n.contact_phone||""),Y(n.contact_email||""),se(n.site_title_zh||"小熊市场 - 发现美食之旅"),te(n.site_title_en||"Xiaoxiong Market - Discover Amazing Restaurants"),ie(n.site_title_pt||"Xiaoxiong Market - Descubra Restaurantes Incríveis"),le(n.site_description_zh||"探索精选餐厅，参与美食活动，与美食爱好者联系。"),de(n.site_description_en||"Explore curated restaurants, join exciting dining events, and connect with food lovers."),me(n.site_description_pt||"Explore restaurantes selecionados, participe de eventos gastronômicos."))},[n]),c.useEffect(()=>{b.hash==="#join-us"&&_.current?setTimeout(()=>{_.current?.scrollIntoView({behavior:"smooth",block:"start"})},100):b.hash==="#contact-info"&&y.current&&setTimeout(()=>{y.current?.scrollIntoView({behavior:"smooth",block:"start"})},100)},[b.hash,P]);const je=async s=>{const l=s.target.files?.[0];if(l){I(!0);try{const d=await E(l);d&&await i.mutateAsync({logo_url:d})}finally{I(!1)}}},ve=async s=>{const l=s.target.files?.[0];if(l){T(!0);try{const d=await E(l);d&&await i.mutateAsync({favicon_url:d})}finally{T(!1)}}},fe=s=>{w(s[0])},Ne=s=>{S(s[0])},be=async s=>{await i.mutateAsync({logo_width:s[0]})},_e=async s=>{await i.mutateAsync({logo_height:s[0]})},ye=s=>{const l=parseInt(s.target.value)||20,d=Math.min(Math.max(l,20),100);w(d)},we=async()=>{await i.mutateAsync({logo_width:v})},Se=s=>{const l=parseInt(s.target.value)||20,d=Math.min(Math.max(l,20),100);S(d)},Ce=async()=>{await i.mutateAsync({logo_height:f})},ke=async()=>{await i.mutateAsync({logo_url:null})},Pe=async()=>{await i.mutateAsync({favicon_url:null})},Ee=async()=>{await i.mutateAsync({join_contact_phone:F,join_success_title_zh:L,join_success_title_en:H,join_success_title_pt:V,join_success_message_zh:J,join_success_message_en:O,join_success_message_pt:X})},De=async()=>{await i.mutateAsync({contact_phone:K,contact_email:G})},Ie=async()=>{await i.mutateAsync({site_title_zh:ee,site_title_en:ae,site_title_pt:ne,site_description_zh:ce,site_description_en:oe,site_description_pt:re})};if(P)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(m,{className:"h-8 w-8 animate-spin text-primary"})});const Ae=n?.logo_url||Ze,C=n?.community_enabled!==!1,Te=async()=>{const s=!C;await i.mutateAsync({community_enabled:s});const{data:l}=await xe.from("navigation_buttons").select("id").eq("link","/community").single();l&&(await xe.from("navigation_buttons").update({enabled:s}).eq("id",l.id),pe.invalidateQueries({queryKey:["navigation-buttons"]}))};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:a("admin.siteSettings")}),e.jsx("p",{className:"text-muted-foreground",children:a("admin.siteSettingsDescription")})]}),e.jsxs(u,{children:[e.jsxs(h,{children:[e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"h-5 w-5"}),a("admin.featureToggles","功能开关")]}),e.jsx(g,{children:a("admin.featureTogglesDescription","控制网站功能的显示与隐藏")})]}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted/30 rounded-lg",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(t,{htmlFor:"community-enabled",className:"text-base font-medium",children:a("admin.communityEnabled","社区功能")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:C?a("admin.communityEnabledDesc","社区入口在导航栏中显示"):a("admin.communityDisabledDesc","社区入口已隐藏")}),e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1 mt-1",children:[e.jsx(Le,{className:"h-3 w-3"}),a("admin.communitySyncHint","此设置与导航按钮中的社区按钮同步")]})]}),e.jsx(N,{id:"community-enabled",checked:C,onCheckedChange:Te,disabled:i.isPending})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted/30 rounded-lg",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ze,{className:"h-4 w-4 text-primary"}),e.jsx(t,{htmlFor:"about-us-mobile",className:"text-base font-medium",children:a("admin.mobileAboutUsButton","移动端关于我们按钮")})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:n?.about_us_button_mobile!==!1?a("admin.mobileAboutUsEnabledDesc","在移动端首页右上角显示"):a("admin.mobileAboutUsDisabledDesc","移动端首页不显示此按钮")})]}),e.jsx(N,{id:"about-us-mobile",checked:n?.about_us_button_mobile!==!1,onCheckedChange:s=>i.mutateAsync({about_us_button_mobile:s}),disabled:i.isPending})]}),e.jsxs("div",{className:"p-4 bg-muted/30 rounded-lg space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{className:"h-4 w-4"}),e.jsx(t,{className:"text-base font-medium",children:a("admin.voiceInputSettings","语音输入")})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a("admin.voiceInputSettingsDesc","控制AI助手语音输入按钮在不同设备上的显示")}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2 p-3 bg-background rounded-lg border",children:[e.jsx(t,{htmlFor:"voice-mobile",className:"text-sm font-medium",children:a("admin.mobile","手机")}),e.jsx(N,{id:"voice-mobile",checked:n?.voice_input_mobile!==!1,onCheckedChange:s=>i.mutateAsync({voice_input_mobile:s}),disabled:i.isPending})]}),e.jsxs("div",{className:"flex flex-col items-center gap-2 p-3 bg-background rounded-lg border",children:[e.jsx(t,{htmlFor:"voice-tablet",className:"text-sm font-medium",children:a("admin.tablet","平板")}),e.jsx(N,{id:"voice-tablet",checked:n?.voice_input_tablet!==!1,onCheckedChange:s=>i.mutateAsync({voice_input_tablet:s}),disabled:i.isPending})]}),e.jsxs("div",{className:"flex flex-col items-center gap-2 p-3 bg-background rounded-lg border",children:[e.jsx(t,{htmlFor:"voice-desktop",className:"text-sm font-medium",children:a("admin.desktop","桌面")}),e.jsx(N,{id:"voice-desktop",checked:n?.voice_input_desktop!==!1,onCheckedChange:s=>i.mutateAsync({voice_input_desktop:s}),disabled:i.isPending})]})]})]})]})]}),e.jsxs(u,{children:[e.jsxs(h,{children:[e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(qe,{className:"h-5 w-5"}),a("admin.seoSettings","SEO设置")]}),e.jsx(g,{children:a("admin.seoSettingsDescription","设置网站标题和描述，这些内容会显示在浏览器标签和搜索引擎结果中")})]}),e.jsxs(p,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(t,{children:a("admin.siteTitle","网站标题")}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-1",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{className:"text-xs text-muted-foreground",children:"中文"}),e.jsx(o,{value:ee,onChange:s=>se(s.target.value),placeholder:"小熊市场 - 发现美食之旅"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{className:"text-xs text-muted-foreground",children:"English"}),e.jsx(o,{value:ae,onChange:s=>te(s.target.value),placeholder:"Xiaoxiong Market - Discover Amazing Restaurants"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{className:"text-xs text-muted-foreground",children:"Português"}),e.jsx(o,{value:ne,onChange:s=>ie(s.target.value),placeholder:"Xiaoxiong Market - Descubra Restaurantes Incríveis"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(t,{children:a("admin.siteDescription","网站描述")}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-1",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{className:"text-xs text-muted-foreground",children:"中文"}),e.jsx(j,{value:ce,onChange:s=>le(s.target.value),placeholder:"探索精选餐厅，参与美食活动，与美食爱好者联系。",rows:2})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{className:"text-xs text-muted-foreground",children:"English"}),e.jsx(j,{value:oe,onChange:s=>de(s.target.value),placeholder:"Explore curated restaurants, join exciting dining events, and connect with food lovers.",rows:2})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{className:"text-xs text-muted-foreground",children:"Português"}),e.jsx(j,{value:re,onChange:s=>me(s.target.value),placeholder:"Explore restaurantes selecionados, participe de eventos gastronômicos.",rows:2})]})]})]}),e.jsxs(r,{onClick:Ie,disabled:i.isPending,className:"w-full md:w-auto",children:[i.isPending&&e.jsx(m,{className:"h-4 w-4 mr-2 animate-spin"}),a("common.save")]})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(u,{children:[e.jsxs(h,{children:[e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(ue,{className:"h-5 w-5"}),a("admin.logoSettings")]}),e.jsx(g,{children:a("admin.logoSettingsDescription")})]}),e.jsxs(p,{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col items-center gap-4 p-6 border rounded-lg bg-muted/50",children:[e.jsx(t,{className:"text-sm text-muted-foreground",children:a("admin.logoPreview")}),e.jsx("div",{className:"bg-background p-4 rounded-lg shadow-sm border",children:e.jsx("img",{src:Ae,alt:"Logo Preview",style:{width:`${v}px`,height:`${f}px`},className:"object-contain"})}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[v,"px × ",f,"px"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:a("admin.uploadLogo")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{ref:M,type:"file",accept:"image/*",onChange:je,className:"hidden"}),e.jsxs(r,{variant:"outline",onClick:()=>M.current?.click(),disabled:D,className:"flex-1",children:[D?e.jsx(m,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(he,{className:"h-4 w-4 mr-2"}),a("admin.selectImage")]}),n?.logo_url&&e.jsx(r,{variant:"destructive",onClick:ke,disabled:i.isPending,children:a("common.remove")})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(t,{children:a("admin.logoWidth")}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(o,{type:"number",value:v,onChange:ye,onBlur:we,min:20,max:100,className:"w-16 h-8 text-center text-sm"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"px"})]})]}),e.jsx(ge,{value:[v],onValueChange:fe,onValueCommit:be,min:20,max:100,step:1})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(t,{children:a("admin.logoHeight")}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(o,{type:"number",value:f,onChange:Se,onBlur:Ce,min:20,max:100,className:"w-16 h-8 text-center text-sm"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"px"})]})]}),e.jsx(ge,{value:[f],onValueChange:Ne,onValueCommit:_e,min:20,max:100,step:1})]})]})]}),e.jsxs(u,{children:[e.jsxs(h,{children:[e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(ue,{className:"h-5 w-5"}),a("admin.faviconSettings")]}),e.jsx(g,{children:a("admin.faviconSettingsDescription")})]}),e.jsxs(p,{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col items-center gap-4 p-6 border rounded-lg bg-muted/50",children:[e.jsx(t,{className:"text-sm text-muted-foreground",children:a("admin.faviconPreview")}),e.jsx("div",{className:"bg-background p-4 rounded-lg shadow-sm border",children:e.jsx("img",{src:n?.favicon_url||"/favicon.png",alt:"Favicon Preview",className:"w-8 h-8 object-contain"})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"32px × 32px"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:a("admin.uploadFavicon")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{ref:R,type:"file",accept:"image/*",onChange:ve,className:"hidden"}),e.jsxs(r,{variant:"outline",onClick:()=>R.current?.click(),disabled:A,className:"flex-1",children:[A?e.jsx(m,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(he,{className:"h-4 w-4 mr-2"}),a("admin.selectImage")]}),n?.favicon_url&&e.jsx(r,{variant:"destructive",onClick:Pe,disabled:i.isPending,children:a("common.remove")})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a("admin.faviconHint")})]})]})]})]}),e.jsxs(u,{ref:_,id:"join-us",children:[e.jsxs(h,{children:[e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"h-5 w-5"}),a("admin.joinUsSettings")]}),e.jsx(g,{children:a("admin.joinUsSettingsDescription")})]}),e.jsxs(p,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(t,{className:"flex items-center gap-2",children:[e.jsx(k,{className:"h-4 w-4"}),a("admin.joinContactPhone")]}),e.jsx(o,{value:F,onChange:s=>U(s.target.value),placeholder:"968815050"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(t,{children:a("admin.joinSuccessTitle")}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{className:"text-xs text-muted-foreground",children:"中文"}),e.jsx(o,{value:L,onChange:s=>z(s.target.value),placeholder:"信息已提交成功！"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{className:"text-xs text-muted-foreground",children:"English"}),e.jsx(o,{value:H,onChange:s=>q(s.target.value),placeholder:"Request Submitted!"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{className:"text-xs text-muted-foreground",children:"Português"}),e.jsx(o,{value:V,onChange:s=>B(s.target.value),placeholder:"Informação Enviada com Sucesso!"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(t,{children:a("admin.joinSuccessMessage")}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-1",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{className:"text-xs text-muted-foreground",children:"中文"}),e.jsx(j,{value:J,onChange:s=>Z(s.target.value),placeholder:"感谢您的信任！我们的专属顾问将在24小时工作日内通过电话与您联系。",rows:2})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{className:"text-xs text-muted-foreground",children:"English"}),e.jsx(j,{value:O,onChange:s=>W(s.target.value),placeholder:"Thank you for your trust! Our dedicated consultant will contact you by phone within 24 business hours.",rows:2})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{className:"text-xs text-muted-foreground",children:"Português"}),e.jsx(j,{value:X,onChange:s=>$(s.target.value),placeholder:"Obrigado pela sua confiança! Nosso consultor dedicado entrará em contato por telefone dentro de 24 horas úteis.",rows:2})]})]})]}),e.jsxs(r,{onClick:Ee,disabled:i.isPending,className:"w-full md:w-auto",children:[i.isPending&&e.jsx(m,{className:"h-4 w-4 mr-2 animate-spin"}),a("common.save")]})]})]}),e.jsxs(u,{ref:y,id:"contact-info",children:[e.jsxs(h,{children:[e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(k,{className:"h-5 w-5"}),a("admin.contactSettings")]}),e.jsx(g,{children:a("admin.contactSettingsDescription")})]}),e.jsxs(p,{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(t,{className:"flex items-center gap-2",children:[e.jsx(k,{className:"h-4 w-4"}),a("admin.contactPhone")]}),e.jsx(o,{value:K,onChange:s=>Q(s.target.value),placeholder:"+351 968 815 050"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(t,{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"h-4 w-4"}),a("admin.contactEmail")]}),e.jsx(o,{type:"email",value:G,onChange:s=>Y(s.target.value),placeholder:"comercial@xiaoxiong.pt"})]})]}),e.jsxs(r,{onClick:De,disabled:i.isPending,className:"w-full md:w-auto",children:[i.isPending&&e.jsx(m,{className:"h-4 w-4 mr-2 animate-spin"}),a("common.save")]})]})]})]})})};export{ss as default};
//# sourceMappingURL=AdminSiteSettings-Bx0EYSdZ.js.map
