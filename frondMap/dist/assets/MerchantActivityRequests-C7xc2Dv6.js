import{j as e}from"./vendor-react-core-BErlw7p5.js";import{n as M,r as k,B as t,C as f,j as v,h as L,p as P,A as T,a5 as $,E as z,F as B,G as F,J as H,K as E,L as S,M as G,o as l}from"./index-kEIDKiMZ.js";import{d as J,e as K,c as U}from"./useActivityRequests-Bs4oIz60.js";import{u as W,L as i}from"./vendor-router-CLK0c9aH.js";import{u as Y}from"./useLocalizedContent-DqTgPnyL.js";import{u as I}from"./vendor-i18n-CqcxoxDo.js";import{o as d,ac as p,e as O,x as Q,aY as V,W as m,R as N,T as X,a0 as Z}from"./vendor-icons-C2Bicc1E.js";import{C as o}from"./vendor-date-fYlqblcl.js";import"./vendor-editor-BdQcs4B3.js";import"./vendor-misc-DH4LiFnZ.js";import"./vendor-ui-other-CPTlx-W2.js";import"./vendor-query-BS0wY7WL.js";import"./vendor-supabase-Clrw0GhO.js";import"./vendor-ui-dialog-Sv_VEL0d.js";import"./vendor-ui-dropdown-DwTcg2UT.js";const je=()=>{M();const y=W(),{t:a}=I(),{isMerchant:w,isSupervisor:b,isLoading:h}=k(),{data:x=[],isLoading:C}=J(),{localizeActivity:A}=Y(),r=K(),D=U();if(!h&&!w&&!b)return y("/"),null;if(C||h)return e.jsx("div",{className:"flex justify-center items-center min-h-[50vh]",children:e.jsx(d,{className:"w-8 h-8 animate-spin text-primary"})});const R=s=>{if(s.status==="approved"&&s.activity_deleted)return e.jsxs(l,{variant:"outline",className:"border-orange-500 text-orange-500 flex items-center gap-1",children:[e.jsx(Z,{className:"w-3 h-3"}),a("merchant.activityDeleted")]});switch(s.status){case"approved":return e.jsx(l,{className:"bg-green-500",children:a("merchant.statusApproved")});case"rejected":return e.jsx(l,{variant:"destructive",children:a("merchant.statusRejected")});default:return e.jsx(l,{variant:"secondary",children:a("merchant.statusPending")})}},j=s=>{r.mutate(s)},_=s=>{D.mutate(s)};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:a("merchant.myActivityRequests")}),e.jsx("p",{className:"text-muted-foreground",children:a("merchant.viewManageRequests")})]}),e.jsx(t,{asChild:!0,children:e.jsxs(i,{to:"/merchant/activity-request-form",children:[e.jsx(p,{className:"w-4 h-4 mr-2"}),a("merchant.createRequest")]})})]}),x.length===0?e.jsx(f,{children:e.jsxs(v,{className:"py-12 text-center",children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:a("merchant.noRequests")}),e.jsx(t,{asChild:!0,children:e.jsxs(i,{to:"/merchant/activity-request-form",children:[e.jsx(p,{className:"w-4 h-4 mr-2"}),a("merchant.createRequest")]})})]})}):e.jsx("div",{className:"grid grid-cols-1 gap-6",children:x.map(s=>{const n=A(s),c=s.status==="approved"&&s.activity_deleted,u=s.status==="pending",g=s.status==="rejected";return e.jsxs(f,{className:c?"border-orange-200 bg-orange-50/50 dark:border-orange-900 dark:bg-orange-950/20":"",children:[e.jsx(L,{children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsx(P,{className:"flex-1",children:n.title}),R(s)]})}),e.jsxs(v,{className:"space-y-4",children:[s.image_url&&e.jsx("div",{className:"relative h-48 rounded-lg overflow-hidden",children:e.jsx("img",{src:s.image_url,alt:n.title,className:"w-full h-full object-cover"})}),n.intro&&e.jsx("p",{className:"text-muted-foreground",children:n.intro}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"w-4 h-4"}),e.jsxs("span",{children:[o(new Date(s.start_date),"yyyy-MM-dd"),s.end_date&&` - ${o(new Date(s.end_date),"yyyy-MM-dd")}`]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"w-4 h-4"}),e.jsxs("span",{children:[a("merchant.submittedAt")," ",o(new Date(s.created_at),"yyyy-MM-dd HH:mm")]})]})]}),s.admin_notes&&e.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium mb-1",children:a("merchant.adminNotes")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.admin_notes})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[s.status==="approved"&&!s.activity_deleted&&s.created_activity_id&&e.jsx(t,{asChild:!0,variant:"outline",className:"flex-1 sm:flex-none",children:e.jsxs(i,{to:`/activity/${s.created_activity_id}`,children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),a("merchant.viewCreatedActivity")]})}),c&&e.jsxs(e.Fragment,{children:[e.jsx(t,{asChild:!0,variant:"outline",className:"flex-1 sm:flex-none",children:e.jsxs(i,{to:`/merchant/activity-request-form?edit=${s.id}`,children:[e.jsx(m,{className:"w-4 h-4 mr-2"}),a("merchant.edit")]})}),e.jsxs(t,{variant:"default",className:"flex-1 sm:flex-none",onClick:()=>j(s.id),disabled:r.isPending,children:[r.isPending?e.jsx(d,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(N,{className:"w-4 h-4 mr-2"}),a("merchant.resubmit")]})]}),u&&e.jsx(t,{asChild:!0,variant:"outline",className:"flex-1 sm:flex-none",children:e.jsxs(i,{to:`/merchant/activity-request-form?edit=${s.id}`,children:[e.jsx(m,{className:"w-4 h-4 mr-2"}),a("merchant.edit")]})}),g&&e.jsxs(e.Fragment,{children:[e.jsx(t,{asChild:!0,variant:"outline",className:"flex-1 sm:flex-none",children:e.jsxs(i,{to:`/merchant/activity-request-form?edit=${s.id}`,children:[e.jsx(m,{className:"w-4 h-4 mr-2"}),a("merchant.edit")]})}),e.jsxs(t,{variant:"default",className:"flex-1 sm:flex-none",onClick:()=>j(s.id),disabled:r.isPending,children:[r.isPending?e.jsx(d,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(N,{className:"w-4 h-4 mr-2"}),a("merchant.resubmit")]})]}),(u||g||c)&&e.jsxs(T,{children:[e.jsx($,{asChild:!0,children:e.jsx(t,{variant:"destructive",size:"icon",className:"shrink-0",children:e.jsx(X,{className:"w-4 h-4"})})}),e.jsxs(z,{children:[e.jsxs(B,{children:[e.jsx(F,{children:a("merchant.confirmDelete")}),e.jsx(H,{children:a("merchant.confirmDeleteDesc")})]}),e.jsxs(E,{children:[e.jsx(S,{children:a("common.cancel")}),e.jsx(G,{onClick:()=>_(s.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:a("merchant.delete")})]})]})]})]})]})]},s.id)})})]})};export{je as default};
//# sourceMappingURL=MerchantActivityRequests-C7xc2Dv6.js.map
