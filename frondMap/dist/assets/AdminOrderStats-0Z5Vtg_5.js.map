{"version":3,"file":"AdminOrderStats-0Z5Vtg_5.js","sources":["../../src/pages/admin/AdminOrderStats.tsx"],"sourcesContent":["import { useState, useMemo } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Skeleton } from \"@/components/ui/skeleton\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\r\nimport { Calendar } from \"@/components/ui/calendar\";\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription } from \"@/components/ui/dialog\";\r\nimport { RefreshCw, ShoppingBag, CalendarCheck, TrendingUp, Package, Calendar as CalendarIcon, Eye, User, MapPin, CreditCard, Globe, Mail, Phone, Store, CheckCircle, Clock, DollarSign, Info, Truck, Home } from \"lucide-react\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { format, subDays, startOfDay, endOfDay, isWithinInterval } from \"date-fns\";\r\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, LineChart, Line, PieChart, Pie, Cell } from \"recharts\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ninterface StatsInfo {\r\n  reserve_count: number;\r\n  order_count: number;\r\n}\r\n\r\ninterface OrderData {\r\n  id?: string;\r\n  created_at?: string;\r\n  status?: string;\r\n  total?: number;\r\n  restaurant_id?: string;\r\n  [key: string]: any;\r\n}\r\n\r\ninterface ReserveData {\r\n  id?: string;\r\n  created_at?: string;\r\n  status?: string;\r\n  date?: string;\r\n  time?: string;\r\n  guests?: number;\r\n  restaurant_id?: string;\r\n  [key: string]: any;\r\n}\r\n\r\ntype DateRange = \"today\" | \"7days\" | \"30days\" | \"90days\" | \"180days\" | \"all\" | \"custom\";\r\n\r\nconst CHART_COLORS = ['hsl(var(--primary))', 'hsl(var(--chart-2))', 'hsl(var(--chart-3))', 'hsl(var(--chart-4))', 'hsl(var(--chart-5))'];\r\n\r\nconst AdminOrderStats = () => {\r\n  const { t } = useTranslation();\r\n  const [activeTab, setActiveTab] = useState<\"overview\" | \"orders\" | \"reserves\">(\"overview\");\r\n  const [dateRange, setDateRange] = useState<DateRange>(\"all\");\r\n  const [customStartDate, setCustomStartDate] = useState<Date | undefined>(undefined);\r\n  const [customEndDate, setCustomEndDate] = useState<Date | undefined>(undefined);\r\n  const [selectedOrder, setSelectedOrder] = useState<OrderData | null>(null);\r\n  const [selectedReserve, setSelectedReserve] = useState<ReserveData | null>(null);\r\n\r\n  // Helper to render detail item\r\n  const renderDetailItem = (label: string, value: any) => {\r\n    if (value === null || value === undefined || value === '') return null;\r\n    const displayValue = typeof value === 'object' ? JSON.stringify(value, null, 2) : String(value);\r\n    return (\r\n      <div className=\"flex flex-col gap-1 py-2 border-b border-border/50 last:border-0\">\r\n        <span className=\"text-xs text-muted-foreground font-medium\">{label}</span>\r\n        <span className=\"text-sm break-all whitespace-pre-wrap\">{displayValue}</span>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  // Calculate date range\r\n  const getDateRange = () => {\r\n    const now = new Date();\r\n    switch (dateRange) {\r\n      case \"today\":\r\n        return { start: startOfDay(now), end: endOfDay(now) };\r\n      case \"7days\":\r\n        return { start: startOfDay(subDays(now, 6)), end: endOfDay(now) };\r\n      case \"30days\":\r\n        return { start: startOfDay(subDays(now, 29)), end: endOfDay(now) };\r\n      case \"90days\":\r\n        return { start: startOfDay(subDays(now, 89)), end: endOfDay(now) };\r\n      case \"180days\":\r\n        return { start: startOfDay(subDays(now, 179)), end: endOfDay(now) };\r\n      case \"all\":\r\n        return { start: new Date(2020, 0, 1), end: endOfDay(now) };\r\n      case \"custom\":\r\n        return {\r\n          start: customStartDate ? startOfDay(customStartDate) : startOfDay(subDays(now, 29)),\r\n          end: customEndDate ? endOfDay(customEndDate) : endOfDay(now),\r\n        };\r\n      default:\r\n        return { start: new Date(2020, 0, 1), end: endOfDay(now) };\r\n    }\r\n  };\r\n\r\n  // Fetch total counts - auto refresh every 3 seconds\r\n  const { data: statsInfo, isLoading: isLoadingInfo, refetch: refetchInfo } = useQuery({\r\n    queryKey: ['external-stats-info'],\r\n    queryFn: async (): Promise<StatsInfo> => {\r\n      const { data, error } = await supabase.functions.invoke('external-stats-api', {\r\n        body: { action: 'get_info' }\r\n      });\r\n      if (error) throw error;\r\n      return data;\r\n    },\r\n    refetchInterval: 3000,\r\n  });\r\n\r\n  // Fetch order data - auto refresh every 3 seconds (only orders with name starting with \"T\")\r\n  const { data: ordersData, isLoading: isLoadingOrders, refetch: refetchOrders } = useQuery({\r\n    queryKey: ['external-orders-data'],\r\n    queryFn: async (): Promise<OrderData[]> => {\r\n      const { data, error } = await supabase.functions.invoke('external-stats-api', {\r\n        body: { \r\n          action: 'query_data', \r\n          table: 'order', \r\n          query: { name: { $regex: '^T' } },\r\n          count: 10000 \r\n        }\r\n      });\r\n      if (error) throw error;\r\n      return Array.isArray(data) ? data : [];\r\n    },\r\n    refetchInterval: 3000,\r\n  });\r\n\r\n  // Fetch reserve data - auto refresh every 3 seconds\r\n  const { data: reservesData, isLoading: isLoadingReserves, refetch: refetchReserves } = useQuery({\r\n    queryKey: ['external-reserves-data'],\r\n    queryFn: async (): Promise<ReserveData[]> => {\r\n      const { data, error } = await supabase.functions.invoke('external-stats-api', {\r\n        body: { action: 'query_data', table: 'reserve', count: 10000 }\r\n      });\r\n      if (error) throw error;\r\n      return Array.isArray(data) ? data : [];\r\n    },\r\n    refetchInterval: 3000,\r\n  });\r\n\r\n  // Filter data by date range and sort by time (newest first)\r\n  const { filteredOrders, filteredReserves } = useMemo(() => {\r\n    const { start, end } = getDateRange();\r\n    \r\n    const filteredOrders = (ordersData?.filter(order => {\r\n      if (!order.created_at) return false;\r\n      const orderDate = new Date(order.created_at);\r\n      return isWithinInterval(orderDate, { start, end });\r\n    }) || []).sort((a, b) => {\r\n      const dateA = a.created_at ? new Date(a.created_at).getTime() : 0;\r\n      const dateB = b.created_at ? new Date(b.created_at).getTime() : 0;\r\n      return dateB - dateA; // Newest first\r\n    });\r\n\r\n    const filteredReserves = (reservesData?.filter(reserve => {\r\n      // 优先使用 creationDate（记录创建时间），而非 date（预约日期）\r\n      const dateStr = reserve.creationDate || reserve.created_at || reserve.date;\r\n      if (!dateStr) return false;\r\n      const reserveDate = new Date(dateStr);\r\n      return isWithinInterval(reserveDate, { start, end });\r\n    }) || []).sort((a, b) => {\r\n      // Sort by creation date (newest first)\r\n      const dateTimeA = a.creationDate ? new Date(a.creationDate).getTime() : 0;\r\n      const dateTimeB = b.creationDate ? new Date(b.creationDate).getTime() : 0;\r\n      return dateTimeB - dateTimeA; // Latest first\r\n    });\r\n\r\n    return { filteredOrders, filteredReserves };\r\n  }, [ordersData, reservesData, dateRange, customStartDate, customEndDate]);\r\n\r\n  const handleRefresh = () => {\r\n    refetchInfo();\r\n    refetchOrders();\r\n    refetchReserves();\r\n  };\r\n\r\n  const isLoading = isLoadingInfo || isLoadingOrders || isLoadingReserves;\r\n\r\n  // Process data for charts - use filtered data\r\n  const processChartData = () => {\r\n    const ordersByDate: Record<string, number> = {};\r\n    const reservesByDate: Record<string, number> = {};\r\n\r\n    filteredOrders.forEach(order => {\r\n      const date = order.created_at ? format(new Date(order.created_at), 'MM-dd') : 'Unknown';\r\n      ordersByDate[date] = (ordersByDate[date] || 0) + 1;\r\n    });\r\n\r\n    filteredReserves.forEach(reserve => {\r\n      const date = reserve.created_at || reserve.date;\r\n      const formattedDate = date ? format(new Date(date), 'MM-dd') : 'Unknown';\r\n      reservesByDate[formattedDate] = (reservesByDate[formattedDate] || 0) + 1;\r\n    });\r\n\r\n    // Combine dates and create chart data\r\n    const allDates = [...new Set([...Object.keys(ordersByDate), ...Object.keys(reservesByDate)])].sort();\r\n    const maxDays = dateRange === \"today\" ? 1 : dateRange === \"7days\" ? 7 : dateRange === \"30days\" ? 14 : 30;\r\n    return allDates.slice(-maxDays).map(date => ({\r\n      date,\r\n      orders: ordersByDate[date] || 0,\r\n      reserves: reservesByDate[date] || 0,\r\n    }));\r\n  };\r\n\r\n  const chartData = processChartData();\r\n\r\n  const pieData = [\r\n    { name: t('admin.orderStats.orders', '外卖订单'), value: filteredOrders.length },\r\n    { name: t('admin.orderStats.reserves', '订台预约'), value: filteredReserves.length },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"container mx-auto py-6 space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\r\n        <div>\r\n          <h1 className=\"text-2xl font-bold\">{t('admin.orderStats.title', '外卖订台统计')}</h1>\r\n          <p className=\"text-muted-foreground\">{t('admin.orderStats.description', '查看外卖订单和订台预约数据')}</p>\r\n        </div>\r\n        <div className=\"flex flex-wrap items-center gap-2\">\r\n          {/* Date Range Selector */}\r\n          <Select value={dateRange} onValueChange={(v) => setDateRange(v as DateRange)}>\r\n            <SelectTrigger className=\"w-[140px]\">\r\n              <SelectValue />\r\n            </SelectTrigger>\r\n            <SelectContent>\r\n              <SelectItem value=\"all\">{t('admin.orderStats.allTime', '全部')}</SelectItem>\r\n              <SelectItem value=\"today\">{t('admin.orderStats.today', '今天')}</SelectItem>\r\n              <SelectItem value=\"7days\">{t('admin.orderStats.last7Days', '最近7天')}</SelectItem>\r\n              <SelectItem value=\"30days\">{t('admin.orderStats.last30Days', '最近30天')}</SelectItem>\r\n              <SelectItem value=\"90days\">{t('admin.orderStats.last90Days', '最近90天')}</SelectItem>\r\n              <SelectItem value=\"180days\">{t('admin.orderStats.last180Days', '最近半年')}</SelectItem>\r\n              <SelectItem value=\"custom\">{t('admin.orderStats.customRange', '自定义')}</SelectItem>\r\n            </SelectContent>\r\n          </Select>\r\n\r\n          {/* Custom Date Pickers */}\r\n          {dateRange === \"custom\" && (\r\n            <div className=\"flex items-center gap-2\">\r\n              <Popover>\r\n                <PopoverTrigger asChild>\r\n                  <Button variant=\"outline\" className={cn(\"w-[130px] justify-start text-left font-normal\", !customStartDate && \"text-muted-foreground\")}>\r\n                    <CalendarIcon className=\"mr-2 h-4 w-4\" />\r\n                    {customStartDate ? format(customStartDate, \"yyyy-MM-dd\") : t('admin.orderStats.startDate', '开始日期')}\r\n                  </Button>\r\n                </PopoverTrigger>\r\n                <PopoverContent className=\"w-auto p-0\" align=\"start\">\r\n                  <Calendar mode=\"single\" selected={customStartDate} onSelect={setCustomStartDate} initialFocus />\r\n                </PopoverContent>\r\n              </Popover>\r\n              <span className=\"text-muted-foreground\">-</span>\r\n              <Popover>\r\n                <PopoverTrigger asChild>\r\n                  <Button variant=\"outline\" className={cn(\"w-[130px] justify-start text-left font-normal\", !customEndDate && \"text-muted-foreground\")}>\r\n                    <CalendarIcon className=\"mr-2 h-4 w-4\" />\r\n                    {customEndDate ? format(customEndDate, \"yyyy-MM-dd\") : t('admin.orderStats.endDate', '结束日期')}\r\n                  </Button>\r\n                </PopoverTrigger>\r\n                <PopoverContent className=\"w-auto p-0\" align=\"start\">\r\n                  <Calendar mode=\"single\" selected={customEndDate} onSelect={setCustomEndDate} initialFocus />\r\n                </PopoverContent>\r\n              </Popover>\r\n            </div>\r\n          )}\r\n\r\n          <Button onClick={handleRefresh} variant=\"outline\" disabled={isLoading}>\r\n            <RefreshCw className={`h-4 w-4 mr-2 ${isLoading ? 'animate-spin' : ''}`} />\r\n            {t('common.refresh', '刷新')}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Total Counts - Fixed from API */}\r\n      <div className=\"grid grid-cols-2 gap-4\">\r\n        <Card className=\"border-primary/30 bg-primary/5\">\r\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n            <CardTitle className=\"text-sm font-medium\">{t('admin.orderStats.totalOrders', '外卖总订单')}</CardTitle>\r\n            <ShoppingBag className=\"h-5 w-5 text-primary\" />\r\n          </CardHeader>\r\n          <CardContent>\r\n            {isLoading ? (\r\n              <Skeleton className=\"h-10 w-24\" />\r\n            ) : (\r\n              <div className=\"text-3xl font-bold text-primary\">{statsInfo?.order_count ?? 0}</div>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n        <Card className=\"border-chart-2/30 bg-chart-2/5\">\r\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n            <CardTitle className=\"text-sm font-medium\">{t('admin.orderStats.totalReserves', '订台总预约')}</CardTitle>\r\n            <CalendarCheck className=\"h-5 w-5 text-chart-2\" />\r\n          </CardHeader>\r\n          <CardContent>\r\n            {isLoading ? (\r\n              <Skeleton className=\"h-10 w-24\" />\r\n            ) : (\r\n              <div className=\"text-3xl font-bold text-chart-2\">{statsInfo?.reserve_count ?? 0}</div>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Period Summary Cards */}\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n        <Card>\r\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n            <CardTitle className=\"text-sm font-medium\">{t('admin.orderStats.periodOrders', '期间外卖订单')}</CardTitle>\r\n            <ShoppingBag className=\"h-4 w-4 text-muted-foreground\" />\r\n          </CardHeader>\r\n          <CardContent>\r\n            {isLoading ? (\r\n              <Skeleton className=\"h-8 w-20\" />\r\n            ) : (\r\n              <div className=\"text-2xl font-bold\">{filteredOrders.length}</div>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card>\r\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n            <CardTitle className=\"text-sm font-medium\">{t('admin.orderStats.periodReserves', '期间订台预约')}</CardTitle>\r\n            <CalendarCheck className=\"h-4 w-4 text-muted-foreground\" />\r\n          </CardHeader>\r\n          <CardContent>\r\n            {isLoading ? (\r\n              <Skeleton className=\"h-8 w-20\" />\r\n            ) : (\r\n              <div className=\"text-2xl font-bold\">{filteredReserves.length}</div>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card>\r\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n            <CardTitle className=\"text-sm font-medium\">{t('admin.orderStats.periodTotal', '期间总交易')}</CardTitle>\r\n            <TrendingUp className=\"h-4 w-4 text-muted-foreground\" />\r\n          </CardHeader>\r\n          <CardContent>\r\n            {isLoading ? (\r\n              <Skeleton className=\"h-8 w-20\" />\r\n            ) : (\r\n              <div className=\"text-2xl font-bold\">{filteredOrders.length + filteredReserves.length}</div>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card>\r\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n            <CardTitle className=\"text-sm font-medium\">{t('admin.orderStats.ratio', '订单占比')}</CardTitle>\r\n            <Package className=\"h-4 w-4 text-muted-foreground\" />\r\n          </CardHeader>\r\n          <CardContent>\r\n            {isLoading ? (\r\n              <Skeleton className=\"h-8 w-20\" />\r\n            ) : (\r\n              <>\r\n                <div className=\"text-2xl font-bold\">\r\n                  {(filteredOrders.length + filteredReserves.length) > 0\r\n                    ? `${Math.round((filteredOrders.length / (filteredOrders.length + filteredReserves.length)) * 100)}%`\r\n                    : '0%'}\r\n                </div>\r\n                <p className=\"text-xs text-muted-foreground\">{t('admin.orderStats.orderVsReserve', '外卖 vs 订台')}</p>\r\n              </>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Charts Section */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n        {/* Trend Chart */}\r\n        <Card className=\"lg:col-span-2\">\r\n          <CardHeader>\r\n            <CardTitle>{t('admin.orderStats.trendChart', '趋势图')}</CardTitle>\r\n            <CardDescription>{t('admin.orderStats.selectedPeriod', '所选时间段数据')}</CardDescription>\r\n          </CardHeader>\r\n          <CardContent>\r\n            {isLoading ? (\r\n              <Skeleton className=\"h-[300px] w-full\" />\r\n            ) : (\r\n              <ResponsiveContainer width=\"100%\" height={300}>\r\n                <LineChart data={chartData}>\r\n                  <CartesianGrid strokeDasharray=\"3 3\" className=\"stroke-muted\" />\r\n                  <XAxis dataKey=\"date\" className=\"text-xs\" />\r\n                  <YAxis className=\"text-xs\" />\r\n                  <Tooltip\r\n                    contentStyle={{\r\n                      backgroundColor: 'hsl(var(--background))',\r\n                      border: '1px solid hsl(var(--border))',\r\n                      borderRadius: '8px',\r\n                    }}\r\n                  />\r\n                  <Line\r\n                    type=\"monotone\"\r\n                    dataKey=\"orders\"\r\n                    stroke=\"hsl(var(--primary))\"\r\n                    strokeWidth={2}\r\n                    name={t('admin.orderStats.orders', '外卖订单')}\r\n                  />\r\n                  <Line\r\n                    type=\"monotone\"\r\n                    dataKey=\"reserves\"\r\n                    stroke=\"hsl(var(--chart-2))\"\r\n                    strokeWidth={2}\r\n                    name={t('admin.orderStats.reserves', '订台预约')}\r\n                  />\r\n                </LineChart>\r\n              </ResponsiveContainer>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* Pie Chart */}\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle>{t('admin.orderStats.distribution', '分布')}</CardTitle>\r\n            <CardDescription>{t('admin.orderStats.orderTypeRatio', '订单类型占比')}</CardDescription>\r\n          </CardHeader>\r\n          <CardContent>\r\n            {isLoading ? (\r\n              <Skeleton className=\"h-[300px] w-full\" />\r\n            ) : (\r\n              <ResponsiveContainer width=\"100%\" height={300}>\r\n                <PieChart>\r\n                  <Pie\r\n                    data={pieData}\r\n                    cx=\"50%\"\r\n                    cy=\"50%\"\r\n                    innerRadius={60}\r\n                    outerRadius={100}\r\n                    paddingAngle={5}\r\n                    dataKey=\"value\"\r\n                    label={({ name, percent }) => `${name} ${(percent * 100).toFixed(0)}%`}\r\n                  >\r\n                    {pieData.map((_, index) => (\r\n                      <Cell key={`cell-${index}`} fill={CHART_COLORS[index % CHART_COLORS.length]} />\r\n                    ))}\r\n                  </Pie>\r\n                  <Tooltip\r\n                    contentStyle={{\r\n                      backgroundColor: 'hsl(var(--background))',\r\n                      border: '1px solid hsl(var(--border))',\r\n                      borderRadius: '8px',\r\n                    }}\r\n                  />\r\n                </PieChart>\r\n              </ResponsiveContainer>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Data Tables */}\r\n      <Tabs value={activeTab} onValueChange={(v) => setActiveTab(v as any)}>\r\n        <TabsList>\r\n          <TabsTrigger value=\"overview\">{t('admin.orderStats.overview', '概览')}</TabsTrigger>\r\n          <TabsTrigger value=\"orders\">{t('admin.orderStats.ordersList', '外卖订单')}</TabsTrigger>\r\n          <TabsTrigger value=\"reserves\">{t('admin.orderStats.reservesList', '订台预约')}</TabsTrigger>\r\n        </TabsList>\r\n\r\n        <TabsContent value=\"overview\">\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>{t('admin.orderStats.dailyStats', '每日统计')}</CardTitle>\r\n            </CardHeader>\r\n            <CardContent>\r\n              {isLoading ? (\r\n                <Skeleton className=\"h-[300px] w-full\" />\r\n              ) : (\r\n                <ResponsiveContainer width=\"100%\" height={300}>\r\n                  <BarChart data={chartData}>\r\n                    <CartesianGrid strokeDasharray=\"3 3\" className=\"stroke-muted\" />\r\n                    <XAxis dataKey=\"date\" className=\"text-xs\" />\r\n                    <YAxis className=\"text-xs\" />\r\n                    <Tooltip\r\n                      contentStyle={{\r\n                        backgroundColor: 'hsl(var(--background))',\r\n                        border: '1px solid hsl(var(--border))',\r\n                        borderRadius: '8px',\r\n                      }}\r\n                    />\r\n                    <Bar dataKey=\"orders\" fill=\"hsl(var(--primary))\" name={t('admin.orderStats.orders', '外卖订单')} />\r\n                    <Bar dataKey=\"reserves\" fill=\"hsl(var(--chart-2))\" name={t('admin.orderStats.reserves', '订台预约')} />\r\n                  </BarChart>\r\n                </ResponsiveContainer>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n\r\n        <TabsContent value=\"orders\">\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>{t('admin.orderStats.recentOrders', '最近外卖订单')}</CardTitle>\r\n              <CardDescription>{t('admin.orderStats.showingRecent', '显示最近的订单记录')}</CardDescription>\r\n            </CardHeader>\r\n            <CardContent>\r\n              {isLoadingOrders ? (\r\n                <Skeleton className=\"h-[400px] w-full\" />\r\n              ) : (\r\n                <ScrollArea className=\"h-[400px]\">\r\n                  <Table>\r\n                    <TableHeader>\r\n                      <TableRow>\r\n                        <TableHead>{t('admin.orderStats.orderNumber', '订单号')}</TableHead>\r\n                        <TableHead>{t('admin.orderStats.customer', '客户')}</TableHead>\r\n                        <TableHead>{t('admin.orderStats.restaurant', '餐厅')}</TableHead>\r\n                        <TableHead className=\"text-right\">{t('admin.orderStats.amount', '金额')}</TableHead>\r\n                        <TableHead>{t('admin.orderStats.pickupTime', '取餐时间')}</TableHead>\r\n                        <TableHead>{t('admin.orderStats.paymentStatus', '支付状态')}</TableHead>\r\n                        <TableHead></TableHead>\r\n                      </TableRow>\r\n                    </TableHeader>\r\n                    <TableBody>\r\n                      {filteredOrders.slice(0, 50).map((order, index) => (\r\n                        <TableRow \r\n                          key={order.id || index}\r\n                          className=\"cursor-pointer hover:bg-muted/50\"\r\n                          onClick={() => setSelectedOrder(order)}\r\n                        >\r\n                          <TableCell className=\"font-mono text-xs\">\r\n                            {order.name || `#${index + 1}`}\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            <div className=\"flex flex-col\">\r\n                              <span className=\"text-sm font-medium\">\r\n                                {order.customer?.name || '-'}\r\n                              </span>\r\n                              <span className=\"text-xs text-muted-foreground truncate max-w-[150px]\">\r\n                                {order.customer?.email || ''}\r\n                              </span>\r\n                            </div>\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            <span className=\"text-xs\">{order.restaurant || '-'}</span>\r\n                          </TableCell>\r\n                          <TableCell className=\"text-right font-medium\">\r\n                            €{order.total_price || '0'}\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            <div className=\"flex flex-col\">\r\n                              <span className=\"text-xs\">{order.pickupDate || order.pickup_date || '-'}</span>\r\n                              <span className=\"text-xs text-muted-foreground\">{order.pickupTime || ''}</span>\r\n                            </div>\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            <Badge \r\n                              variant={order.pay_state === 'paid' ? 'default' : 'secondary'} \r\n                              className={cn(\"text-xs\", order.pay_state === 'paid' && \"bg-green-500\")}\r\n                            >\r\n                              {order.pay_state === 'paid' ? '已付款' : (order.pay_state || 'pending')}\r\n                            </Badge>\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            <Button variant=\"ghost\" size=\"sm\" className=\"h-7\">\r\n                              <Eye className=\"h-4 w-4\" />\r\n                            </Button>\r\n                          </TableCell>\r\n                        </TableRow>\r\n                      ))}\r\n                      {filteredOrders.length === 0 && (\r\n                        <TableRow>\r\n                          <TableCell colSpan={7} className=\"text-center text-muted-foreground\">\r\n                            {t('common.noData', '暂无数据')}\r\n                          </TableCell>\r\n                        </TableRow>\r\n                      )}\r\n                    </TableBody>\r\n                  </Table>\r\n                </ScrollArea>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n\r\n        <TabsContent value=\"reserves\">\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>{t('admin.orderStats.recentReserves', '最近订台预约')}</CardTitle>\r\n              <CardDescription>{t('admin.orderStats.showingRecent', '显示最近的预约记录')}</CardDescription>\r\n            </CardHeader>\r\n            <CardContent>\r\n              {isLoadingReserves ? (\r\n                <Skeleton className=\"h-[400px] w-full\" />\r\n              ) : (\r\n                <ScrollArea className=\"h-[400px]\">\r\n                  <Table>\r\n                    <TableHeader>\r\n                      <TableRow>\r\n                        <TableHead>{t('admin.orderStats.reserveNo', '订台号')}</TableHead>\r\n                        <TableHead>{t('admin.orderStats.customerName', '预订人')}</TableHead>\r\n                        <TableHead>{t('admin.orderStats.restaurant', '餐厅')}</TableHead>\r\n                        <TableHead>{t('admin.orderStats.creationDate', '创建时间')}</TableHead>\r\n                        <TableHead>{t('admin.orderStats.reserveDateTime', '预约日期/时间')}</TableHead>\r\n                        <TableHead className=\"text-center\">{t('admin.orderStats.guests', '人数')}</TableHead>\r\n                        <TableHead>{t('common.status', '状态')}</TableHead>\r\n                        <TableHead></TableHead>\r\n                      </TableRow>\r\n                    </TableHeader>\r\n                    <TableBody>\r\n                      {filteredReserves.slice(0, 50).map((reserve, index) => (\r\n                        <TableRow \r\n                          key={reserve.id || index}\r\n                          className=\"cursor-pointer hover:bg-muted/50\"\r\n                          onClick={() => setSelectedReserve(reserve)}\r\n                        >\r\n                          <TableCell>\r\n                            <Badge variant=\"outline\" className=\"font-mono\">{reserve.name || '-'}</Badge>\r\n                          </TableCell>\r\n                          <TableCell className=\"font-medium\">\r\n                            {reserve.customerName || '-'}\r\n                          </TableCell>\r\n                          <TableCell className=\"max-w-[150px] truncate\">\r\n                            {reserve.restaurant || '-'}\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            <span className=\"text-xs text-muted-foreground\">\r\n                              {reserve.creationDate ? format(new Date(reserve.creationDate), 'yyyy-MM-dd HH:mm') : '-'}\r\n                            </span>\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            <div className=\"flex flex-col\">\r\n                              <span className=\"text-sm\">{reserve.date || '-'}</span>\r\n                              <span className=\"text-xs text-muted-foreground\">{reserve.time || '-'}</span>\r\n                            </div>\r\n                          </TableCell>\r\n                          <TableCell className=\"text-center\">\r\n                            <Badge variant=\"outline\">{reserve.numberPeople || reserve.guests || '-'}</Badge>\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            <Badge variant={reserve.status === 'confirmed' ? 'default' : 'secondary'}>\r\n                              {reserve.status || 'pending'}\r\n                            </Badge>\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            <Button variant=\"ghost\" size=\"sm\" className=\"h-7\">\r\n                              <Eye className=\"h-4 w-4\" />\r\n                            </Button>\r\n                          </TableCell>\r\n                        </TableRow>\r\n                      ))}\r\n                      {filteredReserves.length === 0 && (\r\n                        <TableRow>\r\n                          <TableCell colSpan={8} className=\"text-center text-muted-foreground\">\r\n                            {t('common.noData', '暂无数据')}\r\n                          </TableCell>\r\n                        </TableRow>\r\n                      )}\r\n                    </TableBody>\r\n                  </Table>\r\n                </ScrollArea>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n      </Tabs>\r\n\r\n      {/* Order Detail Dialog */}\r\n      <Dialog open={!!selectedOrder} onOpenChange={(open) => !open && setSelectedOrder(null)}>\r\n        <DialogContent className=\"max-w-2xl max-h-[85vh] overflow-hidden\">\r\n          <DialogHeader>\r\n            <DialogTitle className=\"flex items-center gap-2\">\r\n              <ShoppingBag className=\"h-5 w-5 text-primary\" />\r\n              {t('admin.orderStats.orderDetail', '外卖订单详情')}\r\n            </DialogTitle>\r\n            <DialogDescription className=\"flex items-center gap-2\">\r\n              {selectedOrder?.name && (\r\n                <Badge variant=\"outline\" className=\"font-mono\">\r\n                  {selectedOrder.name}\r\n                </Badge>\r\n              )}\r\n              {selectedOrder?.pay_state && (\r\n                <Badge variant={selectedOrder.pay_state === 'paid' ? 'default' : 'secondary'} className={selectedOrder.pay_state === 'paid' ? 'bg-green-500' : ''}>\r\n                  {selectedOrder.pay_state === 'paid' ? '已付款' : selectedOrder.pay_state}\r\n                </Badge>\r\n              )}\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n          \r\n          {selectedOrder && (\r\n            <ScrollArea className=\"max-h-[65vh] pr-4\">\r\n              <div className=\"space-y-4\">\r\n                {/* Order Summary */}\r\n                <div className=\"rounded-lg border bg-primary/5 p-4\">\r\n                  <div className=\"flex justify-between items-start\">\r\n                    <div>\r\n                      <p className=\"text-sm text-muted-foreground\">订单总额</p>\r\n                      <p className=\"text-2xl font-bold text-primary\">\r\n                        € {selectedOrder.total_price || '0'}\r\n                      </p>\r\n                    </div>\r\n                    <div className=\"text-right\">\r\n                      <p className=\"text-sm text-muted-foreground\">创建时间</p>\r\n                      <p className=\"text-sm font-medium\">\r\n                        {selectedOrder.created_at \r\n                          ? format(new Date(selectedOrder.created_at), 'yyyy-MM-dd HH:mm:ss')\r\n                          : '-'}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Customer Info */}\r\n                {selectedOrder.customer && (\r\n                  <div className=\"rounded-lg border bg-muted/30 p-4 space-y-3\">\r\n                    <h4 className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\r\n                      <User className=\"h-4 w-4\" />\r\n                      客户信息\r\n                    </h4>\r\n                    <div className=\"grid gap-3\">\r\n                      {selectedOrder.customer.name && (\r\n                        <div className=\"flex items-center gap-2\">\r\n                          <User className=\"h-4 w-4 text-muted-foreground\" />\r\n                          <span className=\"text-sm font-medium\">{selectedOrder.customer.name}</span>\r\n                        </div>\r\n                      )}\r\n                      {selectedOrder.customer.phone && (\r\n                        <div className=\"flex items-center gap-2\">\r\n                          <Phone className=\"h-4 w-4 text-muted-foreground\" />\r\n                          <span className=\"text-sm\">\r\n                            {selectedOrder.customer.phone.includes('#') \r\n                              ? `+${selectedOrder.customer.phone.replace('#', ' ')}` \r\n                              : selectedOrder.customer.phone}\r\n                          </span>\r\n                        </div>\r\n                      )}\r\n                      {selectedOrder.customer.email && (\r\n                        <div className=\"flex items-center gap-2\">\r\n                          <Mail className=\"h-4 w-4 text-muted-foreground\" />\r\n                          <span className=\"text-sm\">{selectedOrder.customer.email}</span>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Pickup Info */}\r\n                <div className=\"rounded-lg border bg-muted/30 p-4 space-y-3\">\r\n                  <h4 className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\r\n                    <Clock className=\"h-4 w-4\" />\r\n                    取餐信息\r\n                  </h4>\r\n                  <div className=\"grid gap-2\">\r\n                    {selectedOrder.restaurant && (\r\n                      <div className=\"flex justify-between items-center\">\r\n                        <span className=\"text-sm text-muted-foreground\">餐厅</span>\r\n                        <span className=\"font-medium\">{selectedOrder.restaurant}</span>\r\n                      </div>\r\n                    )}\r\n                    {(selectedOrder.pickupDate || selectedOrder.pickup_date) && (\r\n                      <div className=\"flex justify-between items-center\">\r\n                        <span className=\"text-sm text-muted-foreground\">取餐日期</span>\r\n                        <span className=\"font-medium\">{selectedOrder.pickupDate || selectedOrder.pickup_date}</span>\r\n                      </div>\r\n                    )}\r\n                    {selectedOrder.pickupTime && (\r\n                      <div className=\"flex justify-between items-center\">\r\n                        <span className=\"text-sm text-muted-foreground\">取餐时间</span>\r\n                        <Badge variant=\"outline\" className=\"font-medium\">{selectedOrder.pickupTime}</Badge>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Delivery Address */}\r\n                {(selectedOrder.shipping_address || selectedOrder.delivery_address || selectedOrder.address || selectedOrder.deliveryAddress) && (\r\n                  <div className=\"rounded-lg border bg-muted/30 p-4 space-y-3\">\r\n                    <h4 className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\r\n                      <MapPin className=\"h-4 w-4\" />\r\n                      配送地址\r\n                    </h4>\r\n                    <div className=\"grid gap-2\">\r\n                      {/* Order Type / Delivery Method */}\r\n                      {(selectedOrder.order_type || selectedOrder.deliveryType) && (\r\n                        <div className=\"flex items-center gap-2 pb-2 mb-2 border-b border-border/50\">\r\n                          <Truck className=\"h-4 w-4 text-muted-foreground\" />\r\n                          <span className=\"text-sm text-muted-foreground\">配送方式</span>\r\n                          <Badge variant=\"outline\" className=\"ml-auto\">\r\n                            {(selectedOrder.order_type || selectedOrder.deliveryType) === 'delivery2home' ? (\r\n                              <span className=\"flex items-center gap-1\">\r\n                                <Home className=\"h-3 w-3\" />\r\n                                送货上门\r\n                              </span>\r\n                            ) : (selectedOrder.order_type || selectedOrder.deliveryType) === 'pickup' ? (\r\n                              '到店自取'\r\n                            ) : (selectedOrder.order_type || selectedOrder.deliveryType)}\r\n                          </Badge>\r\n                        </div>\r\n                      )}\r\n                      {typeof (selectedOrder.shipping_address || selectedOrder.delivery_address || selectedOrder.address || selectedOrder.deliveryAddress) === 'object' ? (\r\n                        <>\r\n                          {(selectedOrder.shipping_address?.name || selectedOrder.delivery_address?.name || selectedOrder.address?.name || selectedOrder.deliveryAddress?.name) && (\r\n                            <div className=\"flex items-center gap-2\">\r\n                              <User className=\"h-4 w-4 text-muted-foreground\" />\r\n                              <span className=\"text-sm\">{selectedOrder.shipping_address?.name || selectedOrder.delivery_address?.name || selectedOrder.address?.name || selectedOrder.deliveryAddress?.name}</span>\r\n                            </div>\r\n                          )}\r\n                          {(selectedOrder.shipping_address?.phone || selectedOrder.delivery_address?.phone || selectedOrder.address?.phone || selectedOrder.deliveryAddress?.phone) && (\r\n                            <div className=\"flex items-center gap-2\">\r\n                              <Phone className=\"h-4 w-4 text-muted-foreground\" />\r\n                              <span className=\"text-sm\">{selectedOrder.shipping_address?.phone || selectedOrder.delivery_address?.phone || selectedOrder.address?.phone || selectedOrder.deliveryAddress?.phone}</span>\r\n                            </div>\r\n                          )}\r\n                          {(selectedOrder.shipping_address?.address1 || selectedOrder.delivery_address?.address1 || selectedOrder.address?.address1 || selectedOrder.deliveryAddress?.address1 ||\r\n                            selectedOrder.shipping_address?.street || selectedOrder.delivery_address?.street || selectedOrder.address?.street) && (\r\n                            <div className=\"flex items-start gap-2\">\r\n                              <MapPin className=\"h-4 w-4 text-muted-foreground mt-0.5\" />\r\n                              <div className=\"text-sm\">\r\n                                <p>{selectedOrder.shipping_address?.address1 || selectedOrder.delivery_address?.address1 || selectedOrder.address?.address1 || selectedOrder.deliveryAddress?.address1 ||\r\n                                    selectedOrder.shipping_address?.street || selectedOrder.delivery_address?.street || selectedOrder.address?.street}</p>\r\n                                {(selectedOrder.shipping_address?.address2 || selectedOrder.delivery_address?.address2 || selectedOrder.address?.address2 || selectedOrder.deliveryAddress?.address2) && (\r\n                                  <p>{selectedOrder.shipping_address?.address2 || selectedOrder.delivery_address?.address2 || selectedOrder.address?.address2 || selectedOrder.deliveryAddress?.address2}</p>\r\n                                )}\r\n                                <p>\r\n                                  {[\r\n                                    selectedOrder.shipping_address?.city || selectedOrder.delivery_address?.city || selectedOrder.address?.city || selectedOrder.deliveryAddress?.city,\r\n                                    selectedOrder.shipping_address?.province || selectedOrder.delivery_address?.province || selectedOrder.address?.province,\r\n                                    selectedOrder.shipping_address?.zip || selectedOrder.delivery_address?.zip || selectedOrder.address?.zip || selectedOrder.deliveryAddress?.postalCode || selectedOrder.shipping_address?.postalCode || selectedOrder.delivery_address?.postalCode || selectedOrder.address?.postalCode,\r\n                                    selectedOrder.shipping_address?.country || selectedOrder.delivery_address?.country || selectedOrder.address?.country\r\n                                  ].filter(Boolean).join(', ')}\r\n                                </p>\r\n                              </div>\r\n                            </div>\r\n                          )}\r\n                        </>\r\n                      ) : (\r\n                        <div className=\"flex items-start gap-2\">\r\n                          <MapPin className=\"h-4 w-4 text-muted-foreground mt-0.5\" />\r\n                          <span className=\"text-sm\">{selectedOrder.shipping_address || selectedOrder.delivery_address || selectedOrder.address}</span>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Order Items (line_items) */}\r\n                {selectedOrder.line_items && Array.isArray(selectedOrder.line_items) && selectedOrder.line_items.length > 0 && (\r\n                  <div className=\"rounded-lg border bg-muted/30 p-4 space-y-3\">\r\n                    <h4 className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\r\n                      <Package className=\"h-4 w-4\" />\r\n                      订单商品 ({selectedOrder.line_items.length})\r\n                    </h4>\r\n                    <div className=\"space-y-2\">\r\n                      {selectedOrder.line_items.map((item: any, idx: number) => (\r\n                        <div key={idx} className=\"flex justify-between items-start py-2 border-b border-border/50 last:border-0\">\r\n                          <div className=\"flex-1 space-y-1\">\r\n                            <p className=\"text-sm font-medium\">{item.name || item.title || '商品'}</p>\r\n                            {item.sku && (\r\n                              <p className=\"text-xs text-muted-foreground font-mono\">SKU: {item.sku}</p>\r\n                            )}\r\n                            <p className=\"text-xs text-muted-foreground\">\r\n                              数量: {item.quantity || 1} × €{item.price || '0'}\r\n                            </p>\r\n                            {item.properties && Array.isArray(item.properties) && item.properties.length > 0 && (\r\n                              <div className=\"text-xs text-muted-foreground\">\r\n                                {item.properties.map((prop: any, pIdx: number) => (\r\n                                  <span key={pIdx} className=\"mr-2\">\r\n                                    {prop.name}: {prop.value}\r\n                                  </span>\r\n                                ))}\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                          <p className=\"font-medium text-primary\">\r\n                            €{((item.quantity || 1) * parseFloat(item.price || '0')).toFixed(2)}\r\n                          </p>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Payment Info */}\r\n                <div className=\"rounded-lg border bg-muted/30 p-4 space-y-3\">\r\n                  <h4 className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\r\n                    <CreditCard className=\"h-4 w-4\" />\r\n                    付款信息\r\n                  </h4>\r\n                  <div className=\"grid gap-2\">\r\n                    {selectedOrder.pay_type && (\r\n                      <div className=\"flex justify-between items-center\">\r\n                        <span className=\"text-sm text-muted-foreground\">付款方式</span>\r\n                        <Badge variant=\"outline\">{selectedOrder.pay_type}</Badge>\r\n                      </div>\r\n                    )}\r\n                    {selectedOrder.pay_state && (\r\n                      <div className=\"flex justify-between items-center\">\r\n                        <span className=\"text-sm text-muted-foreground\">付款状态</span>\r\n                        <Badge variant={selectedOrder.pay_state === 'paid' ? 'default' : 'secondary'} className={selectedOrder.pay_state === 'paid' ? 'bg-green-500' : ''}>\r\n                          {selectedOrder.pay_state === 'paid' ? '已付款' : selectedOrder.pay_state}\r\n                        </Badge>\r\n                      </div>\r\n                    )}\r\n                    <div className=\"flex justify-between items-center font-bold border-t pt-2 mt-2\">\r\n                      <span>总计</span>\r\n                      <span className=\"text-primary\">€{selectedOrder.total_price || '0'}</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Note */}\r\n                {selectedOrder.note && (\r\n                  <div className=\"rounded-lg border p-4 space-y-2\">\r\n                    <h4 className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\r\n                      <Info className=\"h-4 w-4\" />\r\n                      备注\r\n                    </h4>\r\n                    <p className=\"text-sm\">{selectedOrder.note}</p>\r\n                  </div>\r\n                )}\r\n\r\n                {/* ID Reference */}\r\n                <div className=\"pt-2 border-t\">\r\n                  <p className=\"text-xs text-muted-foreground font-mono\">\r\n                    ID: {selectedOrder.id || '-'} {selectedOrder._id && `| MongoDB: ${selectedOrder._id}`}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </ScrollArea>\r\n          )}\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      {/* Reserve Detail Dialog */}\r\n      <Dialog open={!!selectedReserve} onOpenChange={(open) => !open && setSelectedReserve(null)}>\r\n        <DialogContent className=\"max-w-md\">\r\n          <DialogHeader>\r\n            <DialogTitle className=\"flex items-center gap-2\">\r\n              <CalendarCheck className=\"h-5 w-5 text-chart-2\" />\r\n              {t('admin.orderStats.reserveDetail', '订台预约详情')}\r\n              {selectedReserve?.name && (\r\n                <Badge variant=\"outline\" className=\"font-mono ml-2\">{selectedReserve.name}</Badge>\r\n              )}\r\n            </DialogTitle>\r\n          </DialogHeader>\r\n          \r\n          {selectedReserve && (\r\n            <div className=\"space-y-4\">\r\n              {/* Customer Info Section */}\r\n              <div className=\"rounded-lg border bg-muted/30 p-4 space-y-3\">\r\n                <h4 className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\r\n                  <User className=\"h-4 w-4\" />\r\n                  {t('admin.orderStats.customerInfo', '客户信息')}\r\n                </h4>\r\n                <div className=\"grid gap-2\">\r\n                  <div className=\"flex justify-between items-center\">\r\n                    <span className=\"text-sm text-muted-foreground\">{t('admin.orderStats.customerName', '预订人')}</span>\r\n                    <span className=\"font-medium\">{selectedReserve.customerName || '-'}</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between items-center\">\r\n                    <span className=\"text-sm text-muted-foreground\">{t('common.phone', '电话')}</span>\r\n                    <span className=\"font-medium\">{selectedReserve.phone || '-'}</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between items-center\">\r\n                    <span className=\"text-sm text-muted-foreground\">{t('common.email', '邮箱')}</span>\r\n                    <span className=\"font-medium text-sm\">{selectedReserve.email || '-'}</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Reservation Details Section */}\r\n              <div className=\"rounded-lg border bg-muted/30 p-4 space-y-3\">\r\n                <h4 className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\r\n                  <CalendarCheck className=\"h-4 w-4\" />\r\n                  {t('admin.orderStats.reservationDetails', '预约信息')}\r\n                </h4>\r\n                <div className=\"grid gap-2\">\r\n                  <div className=\"flex justify-between items-center\">\r\n                    <span className=\"text-sm text-muted-foreground\">{t('admin.orderStats.restaurant', '餐厅')}</span>\r\n                    <span className=\"font-medium\">{selectedReserve.restaurant || '-'}</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between items-center\">\r\n                    <span className=\"text-sm text-muted-foreground\">{t('admin.orderStats.reserveDate', '预约日期')}</span>\r\n                    <span className=\"font-medium\">{selectedReserve.date || '-'}</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between items-center\">\r\n                    <span className=\"text-sm text-muted-foreground\">{t('admin.orderStats.reserveTime', '预约时间')}</span>\r\n                    <span className=\"font-medium\">{selectedReserve.time || '-'}</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between items-center\">\r\n                    <span className=\"text-sm text-muted-foreground\">{t('admin.orderStats.guests', '人数')}</span>\r\n                    <Badge variant=\"outline\" className=\"font-medium\">\r\n                      {selectedReserve.numberPeople || selectedReserve.guests || '-'} {t('admin.orderStats.people', '人')}\r\n                    </Badge>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Status Section */}\r\n              <div className=\"flex justify-between items-center px-1\">\r\n                <span className=\"text-sm text-muted-foreground\">{t('common.status', '状态')}</span>\r\n                <Badge variant={selectedReserve.status === 'confirmed' ? 'default' : 'secondary'}>\r\n                  {selectedReserve.status || 'pending'}\r\n                </Badge>\r\n              </div>\r\n\r\n              {/* ID Reference (collapsed) */}\r\n              <div className=\"pt-2 border-t\">\r\n                <p className=\"text-xs text-muted-foreground font-mono\">\r\n                  ID: {selectedReserve.id || selectedReserve._id || '-'}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </DialogContent>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminOrderStats;\r\n"],"names":["CHART_COLORS","AdminOrderStats","useTranslation","activeTab","setActiveTab","useState","dateRange","setDateRange","customStartDate","setCustomStartDate","customEndDate","setCustomEndDate","selectedOrder","setSelectedOrder","selectedReserve","setSelectedReserve","getDateRange","now","startOfDay","endOfDay","subDays","statsInfo","isLoadingInfo","refetchInfo","useQuery","data","error","supabase","ordersData","isLoadingOrders","refetchOrders","reservesData","isLoadingReserves","refetchReserves","filteredOrders","filteredReserves","useMemo","start","end","order","orderDate","isWithinInterval","a","b","dateA","reserve","dateStr","reserveDate","dateTimeA","handleRefresh","isLoading","chartData","ordersByDate","reservesByDate","date","format","formattedDate","allDates","maxDays","pieData","jsxs","jsx","Select","v","SelectTrigger","SelectValue","SelectContent","SelectItem","Popover","PopoverTrigger","Button","cn","CalendarIcon","PopoverContent","Calendar","RefreshCw","Card","CardHeader","CardTitle","ShoppingBag","CardContent","Skeleton","CalendarCheck","TrendingUp","Package","Fragment","CardDescription","ResponsiveContainer","LineChart","CartesianGrid","XAxis","YAxis","Tooltip","Line","PieChart","Pie","name","percent","_","index","Cell","Tabs","TabsList","TabsTrigger","TabsContent","BarChart","Bar","ScrollArea","Table","TableHeader","TableRow","TableHead","TableBody","TableCell","Badge","Eye","Dialog","open","DialogContent","DialogHeader","DialogTitle","DialogDescription","User","Phone","Mail","Clock","MapPin","Truck","Home","item","idx","prop","pIdx","CreditCard","Info"],"mappings":"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"}