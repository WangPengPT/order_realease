{"version":3,"file":"geolocation-BuMaC1NF.js","sources":["../../node_modules/lucide-react/dist/esm/icons/navigation.js","../../src/lib/geolocation.ts"],"sourcesContent":["/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Navigation = createLucideIcon(\"Navigation\", [\n  [\"polygon\", { points: \"3 11 22 2 13 21 11 13 3 11\", key: \"1ltx0t\" }]\n]);\n\nexport { Navigation as default };\n//# sourceMappingURL=navigation.js.map\n","// Haversine formula to calculate distance between two coordinates\r\nexport const calculateDistance = (\r\n  lat1: number,\r\n  lon1: number,\r\n  lat2: number,\r\n  lon2: number\r\n): number => {\r\n  const R = 6371; // Earth's radius in km\r\n  const dLat = toRad(lat2 - lat1);\r\n  const dLon = toRad(lon2 - lon1);\r\n  const a =\r\n    Math.sin(dLat / 2) * Math.sin(dLat / 2) +\r\n    Math.cos(toRad(lat1)) *\r\n      Math.cos(toRad(lat2)) *\r\n      Math.sin(dLon / 2) *\r\n      Math.sin(dLon / 2);\r\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n  const distance = R * c;\r\n  return distance;\r\n};\r\n\r\nconst toRad = (value: number): number => {\r\n  return (value * Math.PI) / 180;\r\n};\r\n\r\nexport const getUserLocation = (): Promise<GeolocationPosition> => {\r\n  return new Promise((resolve, reject) => {\r\n    if (!navigator.geolocation) {\r\n      reject(new Error(\"Geolocation is not supported by this browser.\"));\r\n    } else {\r\n      navigator.geolocation.getCurrentPosition(\r\n        resolve, \r\n        (error) => {\r\n          console.log(\"Geolocation error code:\", error.code, \"message:\", error.message);\r\n          reject(error);\r\n        }, \r\n        {\r\n          enableHighAccuracy: true,\r\n          timeout: 10000,\r\n          maximumAge: 0,\r\n        }\r\n      );\r\n    }\r\n  });\r\n};\r\n\r\nexport const openNavigation = (lat: number, lng: number, name: string) => {\r\n  const ua = navigator.userAgent;\r\n  const isIOS = /iPad|iPhone|iPod/.test(ua);\r\n  const isAndroid = /Android/.test(ua);\r\n  \r\n  // Check if in WebView\r\n  const isIOSWebView = isIOS && !/Safari/.test(ua);\r\n  const isAndroidWebView = isAndroid && (/wv/.test(ua) || /Version\\/[\\d.]+.*Chrome/.test(ua));\r\n  \r\n  // Universal links (work better in WebViews)\r\n  const appleMapsUniversal = `https://maps.apple.com/?daddr=${lat},${lng}&q=${encodeURIComponent(name)}`;\r\n  const googleMapsWeb = `https://www.google.com/maps/dir/?api=1&destination=${lat},${lng}`;\r\n  \r\n  // URL schemes\r\n  const appleMapsScheme = `maps://maps.apple.com/?daddr=${lat},${lng}&q=${encodeURIComponent(name)}`;\r\n  const googleMapsIntent = `geo:${lat},${lng}?q=${lat},${lng}(${encodeURIComponent(name)})`;\r\n  \r\n  if (isIOS) {\r\n    if (isIOSWebView) {\r\n      // In iOS WebView, use Universal Link directly (more reliable)\r\n      window.location.href = appleMapsUniversal;\r\n    } else {\r\n      // In Safari, try scheme first\r\n      window.open(appleMapsScheme, '_blank');\r\n    }\r\n  } else if (isAndroid) {\r\n    if (isAndroidWebView) {\r\n      // In Android WebView, use web URL\r\n      window.location.href = googleMapsWeb;\r\n    } else {\r\n      // In Chrome, try geo scheme\r\n      window.open(googleMapsIntent, '_blank');\r\n    }\r\n  } else {\r\n    // Desktop fallback\r\n    window.open(googleMapsWeb, '_blank');\r\n  }\r\n};\r\n"],"names":["Navigation","createLucideIcon","calculateDistance","lat1","lon1","lat2","lon2","dLat","toRad","dLon","a","value","getUserLocation","resolve","reject","error","openNavigation","lat","lng","name","ua","isIOS","isAndroid","isIOSWebView","isAndroidWebView","appleMapsUniversal","googleMapsWeb","appleMapsScheme","googleMapsIntent"],"mappings":"wCAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GASK,MAACA,EAAaC,EAAiB,aAAc,CAChD,CAAC,UAAW,CAAE,OAAQ,6BAA8B,IAAK,QAAQ,CAAE,CACrE,CAAC,ECVYC,EAAoB,CAC/BC,EACAC,EACAC,EACAC,IACW,CAEL,MAAAC,EAAOC,EAAMH,EAAOF,CAAI,EACxBM,EAAOD,EAAMF,EAAOF,CAAI,EACxBM,EACJ,KAAK,IAAIH,EAAO,CAAC,EAAI,KAAK,IAAIA,EAAO,CAAC,EACtC,KAAK,IAAIC,EAAML,CAAI,CAAC,EAClB,KAAK,IAAIK,EAAMH,CAAI,CAAC,EACpB,KAAK,IAAII,EAAO,CAAC,EACjB,KAAK,IAAIA,EAAO,CAAC,EAGd,MADU,OADP,EAAI,KAAK,MAAM,KAAK,KAAKC,CAAC,EAAG,KAAK,KAAK,EAAIA,CAAC,CAAC,EAGzD,EAEMF,EAASG,GACLA,EAAQ,KAAK,GAAM,IAGhBC,EAAkB,IACtB,IAAI,QAAQ,CAACC,EAASC,IAAW,CACjC,UAAU,YAGb,UAAU,YAAY,mBACpBD,EACCE,GAAU,CACT,QAAQ,IAAI,0BAA2BA,EAAM,KAAM,WAAYA,EAAM,OAAO,EAC5ED,EAAOC,CAAK,CACd,EACA,CACE,mBAAoB,GACpB,QAAS,IACT,WAAY,CACd,CAAA,EAZKD,EAAA,IAAI,MAAM,+CAA+C,CAAC,CAcnE,CACD,EAGUE,EAAiB,CAACC,EAAaC,EAAaC,IAAiB,CACxE,MAAMC,EAAK,UAAU,UACfC,EAAQ,mBAAmB,KAAKD,CAAE,EAClCE,EAAY,UAAU,KAAKF,CAAE,EAG7BG,EAAeF,GAAS,CAAC,SAAS,KAAKD,CAAE,EACzCI,EAAmBF,IAAc,KAAK,KAAKF,CAAE,GAAK,0BAA0B,KAAKA,CAAE,GAGnFK,EAAqB,iCAAiCR,CAAG,IAAIC,CAAG,MAAM,mBAAmBC,CAAI,CAAC,GAC9FO,EAAgB,sDAAsDT,CAAG,IAAIC,CAAG,GAGhFS,EAAkB,gCAAgCV,CAAG,IAAIC,CAAG,MAAM,mBAAmBC,CAAI,CAAC,GAC1FS,EAAmB,OAAOX,CAAG,IAAIC,CAAG,MAAMD,CAAG,IAAIC,CAAG,IAAI,mBAAmBC,CAAI,CAAC,IAElFE,EACEE,EAEF,OAAO,SAAS,KAAOE,EAGhB,OAAA,KAAKE,EAAiB,QAAQ,EAE9BL,EACLE,EAEF,OAAO,SAAS,KAAOE,EAGhB,OAAA,KAAKE,EAAkB,QAAQ,EAIjC,OAAA,KAAKF,EAAe,QAAQ,CAEvC","x_google_ignoreList":[0]}