import{u as M,r as n,j as e,aM as R,B as i,C as z,m as F,x as K,ap as Q,I as j,n as U,at as V,D as S,b as y,d as b,e as A,a7 as Y,aa as T,T as Z,V as _,W as $,Y as q,Z as G,$ as J,a0 as X,a1 as ee}from"./index-Ga7ov3Y-.js";import{T as se,a as ae,b as k,c as p,d as te,e as g}from"./table-DRA3HGB_.js";import{u as ne,a as ie,b as le,c as re}from"./useSensitiveWords-Ddh-qKqc.js";import{P as oe}from"./plus-OfcrrL7p.js";import{S as de}from"./search-H5ksmTfE.js";import{P as ce}from"./pencil-Dw2J3un8.js";import{f as me}from"./format-Dyk5jgbb.js";import"./startOfDay-DpMPS_Sq.js";const De=()=>{const{t:s}=M(),{data:l,isLoading:O}=ne(),f=ie(),v=le(),P=re(),[m,E]=n.useState(""),[H,o]=n.useState(!1),[I,d]=n.useState(!1),[B,h]=n.useState(!1),[c,D]=n.useState(""),[t,x]=n.useState(null),[r,w]=n.useState(null),u=l==null?void 0:l.filter(a=>a.word.toLowerCase().includes(m.toLowerCase())),C=()=>{c.trim()&&f.mutate(c,{onSuccess:()=>{D(""),o(!1)}})},W=()=>{!t||!t.word.trim()||v.mutate({id:t.id,word:t.word},{onSuccess:()=>{x(null),d(!1)}})},L=()=>{r&&P.mutate(r.id,{onSuccess:()=>{w(null),h(!1)}})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(R,{className:"h-6 w-6"}),s("admin.sensitiveWords.title","敏感词管理")]}),e.jsx("p",{className:"text-muted-foreground",children:s("admin.sensitiveWords.description","管理评论内容过滤的敏感词列表")})]}),e.jsxs(i,{onClick:()=>o(!0),children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),s("admin.sensitiveWords.add","添加敏感词")]})]}),e.jsxs(z,{children:[e.jsx(F,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx(K,{children:s("admin.sensitiveWords.list","敏感词列表")}),e.jsx(Q,{children:s("admin.sensitiveWords.total","共 {{count}} 个敏感词",{count:(l==null?void 0:l.length)||0})})]}),e.jsxs("div",{className:"relative w-full sm:w-64",children:[e.jsx(de,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(j,{placeholder:s("admin.sensitiveWords.search","搜索敏感词..."),value:m,onChange:a=>E(a.target.value),className:"pl-9"})]})]})}),e.jsx(U,{children:O?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:s("common.loading","加载中...")}):u&&u.length>0?e.jsxs(se,{children:[e.jsx(ae,{children:e.jsxs(k,{children:[e.jsx(p,{children:s("admin.sensitiveWords.word","敏感词")}),e.jsx(p,{children:s("admin.sensitiveWords.createdAt","创建时间")}),e.jsx(p,{className:"text-right",children:s("common.actions.actions","操作")})]})}),e.jsx(te,{children:u.map(a=>e.jsxs(k,{children:[e.jsx(g,{className:"font-medium",children:a.word}),e.jsx(g,{children:me(new Date(a.created_at),"yyyy-MM-dd HH:mm")}),e.jsxs(g,{className:"text-right",children:[e.jsx(i,{variant:"ghost",size:"icon",onClick:()=>{x(a),d(!0)},children:e.jsx(ce,{className:"h-4 w-4"})}),e.jsx(i,{variant:"ghost",size:"icon",onClick:()=>{w(a),h(!0)},children:e.jsx(V,{className:"h-4 w-4 text-destructive"})})]})]},a.id))})]}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:m?s("admin.sensitiveWords.noResults","没有找到匹配的敏感词"):s("admin.sensitiveWords.empty","暂无敏感词")})})]}),e.jsx(S,{open:H,onOpenChange:o,children:e.jsxs(y,{children:[e.jsxs(b,{children:[e.jsx(A,{children:s("admin.sensitiveWords.add","添加敏感词")}),e.jsx(Y,{children:s("admin.sensitiveWords.addDescription","添加新的敏感词到过滤列表")})]}),e.jsx(j,{placeholder:s("admin.sensitiveWords.inputPlaceholder","输入敏感词"),value:c,onChange:a=>D(a.target.value),onKeyDown:a=>a.key==="Enter"&&C()}),e.jsxs(T,{children:[e.jsx(i,{variant:"outline",onClick:()=>o(!1),children:s("common.actions.cancel","取消")}),e.jsx(i,{onClick:C,disabled:f.isPending||!c.trim(),children:s("common.actions.add","添加")})]})]})}),e.jsx(S,{open:I,onOpenChange:d,children:e.jsxs(y,{children:[e.jsx(b,{children:e.jsx(A,{children:s("admin.sensitiveWords.edit","编辑敏感词")})}),e.jsx(j,{placeholder:s("admin.sensitiveWords.inputPlaceholder","输入敏感词"),value:(t==null?void 0:t.word)||"",onChange:a=>x(N=>N?{...N,word:a.target.value}:null),onKeyDown:a=>a.key==="Enter"&&W()}),e.jsxs(T,{children:[e.jsx(i,{variant:"outline",onClick:()=>d(!1),children:s("common.actions.cancel","取消")}),e.jsx(i,{onClick:W,disabled:v.isPending||!(t!=null&&t.word.trim()),children:s("common.actions.save","保存")})]})]})}),e.jsx(Z,{open:B,onOpenChange:h,children:e.jsxs(_,{children:[e.jsxs($,{children:[e.jsx(q,{children:s("admin.sensitiveWords.deleteTitle","确认删除")}),e.jsx(G,{children:s("admin.sensitiveWords.deleteDescription",'确定要删除敏感词 "{{word}}" 吗？',{word:r==null?void 0:r.word})})]}),e.jsxs(J,{children:[e.jsx(X,{children:s("common.actions.cancel","取消")}),e.jsx(ee,{onClick:L,className:"bg-destructive text-destructive-foreground",children:s("common.actions.delete","删除")})]})]})})]})};export{De as default};
