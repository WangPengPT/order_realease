import{j as e}from"./vendor-ui-DAmPMpEA.js";import{r as c}from"./vendor-react-iAJ0IrSD.js";import{cy as _e,g as A,t as H,T as M,v as R,aT as K,B as b,cz as xe,aE as me,bX as $,bY as B,o as z,D as be,aC as ue,aS as ge,a as je,b as pe,c as ve,az as i,I as E,aM as N,aN as y,aO as C,aP as S,aQ as d,bZ as ke,aV as we,aU as fe,bS as Ne,b2 as ye,cA as Ce}from"./index-BxrvzYCx.js";import{S as j}from"./switch-C0ZOyCCW.js";import{S as Se}from"./slider-BP8b6eNg.js";import{T as De,a as Te,b as ee,c as p,d as Be,e as v}from"./table-hQVUgm96.js";import{T as ze,a as Ee,b as U,c as G}from"./tabs-I8_8UHvD.js";import{u as Ve}from"./vendor-i18n-DxKeo2S1.js";import"./vendor-charts-Bz7hPIBd.js";import"./vendor-query-BlSVl3IQ.js";import"./vendor-supabase-KNAP0qdW.js";const Le=["MapPin","List","Calendar","Map","Store","Home","Search","User","Settings","Heart","Star","Bell","ShoppingCart","Gift","Info","HelpCircle"],Fe=()=>{const{t:s,i18n:ae}=Ve(),{settings:a,buttons:V,isLoading:le,updateSettings:L,createButton:W,updateButton:F,deleteButton:se}=_e(),[I,Q]=c.useState(null),[oe,D]=c.useState(!1),[w,te]=c.useState("desktop"),[o,h]=c.useState({label_zh:"",label_en:"",label_pt:"",link:"",icon:"Circle",visible:!0,show_on_desktop:!0,show_on_tablet:!0,show_on_mobile:!0,show_when_logged_in:!0,show_when_logged_out:!0}),[r,O]=c.useState({background_opacity:0,background_color:"transparent",text_color:"primary",hover_bg_color:"black",hover_text_color:"white",shadow_enabled:!0}),[x,u]=c.useState(null),[m,g]=c.useState(null),[ne,f]=c.useState(!1);c.useEffect(()=>{a&&(O({background_opacity:a.background_opacity??0,background_color:a.background_color||"transparent",text_color:a.text_color||"primary",hover_bg_color:a.hover_bg_color||"black",hover_text_color:a.hover_text_color||"white",shadow_enabled:a.shadow_enabled??!0}),a.background_opacity_tablet!==null||a.background_color_tablet!==null||a.text_color_tablet!==null||a.hover_bg_color_tablet!==null||a.hover_text_color_tablet!==null||a.shadow_enabled_tablet!==null?u({background_opacity:a.background_opacity_tablet??a.background_opacity??0,background_color:a.background_color_tablet||a.background_color||"transparent",text_color:a.text_color_tablet||a.text_color||"primary",hover_bg_color:a.hover_bg_color_tablet||a.hover_bg_color||"black",hover_text_color:a.hover_text_color_tablet||a.hover_text_color||"white",shadow_enabled:a.shadow_enabled_tablet??a.shadow_enabled??!0}):u(null),a.background_opacity_mobile!==null||a.background_color_mobile!==null||a.text_color_mobile!==null||a.hover_bg_color_mobile!==null||a.hover_text_color_mobile!==null||a.shadow_enabled_mobile!==null?g({background_opacity:a.background_opacity_mobile??a.background_opacity??0,background_color:a.background_color_mobile||a.background_color||"transparent",text_color:a.text_color_mobile||a.text_color||"primary",hover_bg_color:a.hover_bg_color_mobile||a.hover_bg_color||"black",hover_text_color:a.hover_text_color_mobile||a.hover_text_color||"white",shadow_enabled:a.shadow_enabled_mobile??a.shadow_enabled??!0}):g(null))},[a]);const k=c.useCallback((l,t,n)=>{l==="desktop"?O(_=>({..._,[t]:n})):l==="tablet"?u(_=>_?{..._,[t]:n}:{...r,[t]:n}):g(_=>_?{..._,[t]:n}:{...r,[t]:n}),f(!0)},[r]),X=c.useCallback(l=>{l==="tablet"?u({...r}):l==="mobile"&&g({...r}),f(!0)},[r]),Y=c.useCallback(l=>{l==="tablet"?u(null):l==="mobile"&&g(null),f(!0)},[]),re=c.useCallback(()=>{const l={background_opacity:r.background_opacity,background_color:r.background_color,text_color:r.text_color,hover_bg_color:r.hover_bg_color,hover_text_color:r.hover_text_color,shadow_enabled:r.shadow_enabled,background_opacity_tablet:x?.background_opacity??null,background_color_tablet:x?.background_color??null,text_color_tablet:x?.text_color??null,hover_bg_color_tablet:x?.hover_bg_color??null,hover_text_color_tablet:x?.hover_text_color??null,shadow_enabled_tablet:x?.shadow_enabled??null,background_opacity_mobile:m?.background_opacity??null,background_color_mobile:m?.background_color??null,text_color_mobile:m?.text_color??null,hover_bg_color_mobile:m?.hover_bg_color??null,hover_text_color_mobile:m?.hover_text_color??null,shadow_enabled_mobile:m?.shadow_enabled??null};L.mutate(l),f(!1)},[r,x,m,L]),ce=c.useCallback(()=>{a&&(O({background_opacity:a.background_opacity??0,background_color:a.background_color||"transparent",text_color:a.text_color||"primary",hover_bg_color:a.hover_bg_color||"black",hover_text_color:a.hover_text_color||"white",shadow_enabled:a.shadow_enabled??!0}),a.background_opacity_tablet!==null||a.background_color_tablet!==null?u({background_opacity:a.background_opacity_tablet??a.background_opacity??0,background_color:a.background_color_tablet||a.background_color||"transparent",text_color:a.text_color_tablet||a.text_color||"primary",hover_bg_color:a.hover_bg_color_tablet||a.hover_bg_color||"black",hover_text_color:a.hover_text_color_tablet||a.hover_text_color||"white",shadow_enabled:a.shadow_enabled_tablet??a.shadow_enabled??!0}):u(null),a.background_opacity_mobile!==null||a.background_color_mobile!==null?g({background_opacity:a.background_opacity_mobile??a.background_opacity??0,background_color:a.background_color_mobile||a.background_color||"transparent",text_color:a.text_color_mobile||a.text_color||"primary",hover_bg_color:a.hover_bg_color_mobile||a.hover_bg_color||"black",hover_text_color:a.hover_text_color_mobile||a.hover_text_color||"white",shadow_enabled:a.shadow_enabled_mobile??a.shadow_enabled??!0}):g(null),f(!1))},[a]),Z=l=>{l?(Q(l),h(l)):(Q(null),h({label_zh:"",label_en:"",label_pt:"",link:"",icon:"Circle",visible:!0,show_on_desktop:!0,show_on_tablet:!0,show_on_mobile:!0,show_when_logged_in:!0,show_when_logged_out:!0})),D(!0)},ie=async()=>{I?await F.mutateAsync({id:I.id,...o}):await W.mutateAsync({...o,sort_order:(V?.length||0)+1}),D(!1)},de=async l=>{confirm(s("admin.confirmDelete"))&&await se.mutateAsync(l)},q=l=>{const t=Ce[l];return t?e.jsx(t,{className:"w-4 h-4"}):null},J=l=>{const t=ae.language;return t==="zh"?l.label_zh:t==="pt"?l.label_pt:l.label_en},T=c.useCallback(l=>l==="desktop"?r:l==="tablet"?x||r:m||r,[r,x,m]),he=c.useCallback(l=>{const t=Number(l.background_opacity||0),n=l.background_color||"transparent";let _="transparent";return n==="white"?_=`rgba(255,255,255,${t})`:n==="black"?_=`rgba(0,0,0,${t})`:n==="primary"&&(_=`rgba(var(--primary-rgb, 0,0,0),${t})`),{backgroundColor:_}},[]),P=(l,t)=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:s("admin.backgroundOpacity")}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Se,{value:[Number(t.background_opacity||0)*100],onValueChange:n=>k(l,"background_opacity",n[0]/100),max:100,step:5,className:"flex-1"}),e.jsxs("span",{className:"w-12 text-right",children:[Math.round(Number(t.background_opacity||0)*100),"%"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:s("admin.backgroundColor")}),e.jsxs(N,{value:t.background_color||"transparent",onValueChange:n=>k(l,"background_color",n),children:[e.jsx(y,{children:e.jsx(C,{})}),e.jsxs(S,{children:[e.jsx(d,{value:"transparent",children:s("admin.transparent")}),e.jsx(d,{value:"white",children:s("admin.white")}),e.jsx(d,{value:"black",children:s("admin.black")}),e.jsx(d,{value:"primary",children:s("admin.primary")})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:s("admin.textColor")}),e.jsxs(N,{value:t.text_color||"primary",onValueChange:n=>k(l,"text_color",n),children:[e.jsx(y,{children:e.jsx(C,{})}),e.jsxs(S,{children:[e.jsx(d,{value:"primary",children:s("admin.primary")}),e.jsx(d,{value:"white",children:s("admin.white")}),e.jsx(d,{value:"black",children:s("admin.black")})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:s("admin.hoverBgColor")}),e.jsxs(N,{value:t.hover_bg_color||"black",onValueChange:n=>k(l,"hover_bg_color",n),children:[e.jsx(y,{children:e.jsx(C,{})}),e.jsxs(S,{children:[e.jsx(d,{value:"black",children:s("admin.black")}),e.jsx(d,{value:"white",children:s("admin.white")}),e.jsx(d,{value:"primary",children:s("admin.primary")})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:s("admin.hoverTextColor")}),e.jsxs(N,{value:t.hover_text_color||"white",onValueChange:n=>k(l,"hover_text_color",n),children:[e.jsx(y,{children:e.jsx(C,{})}),e.jsxs(S,{children:[e.jsx(d,{value:"white",children:s("admin.white")}),e.jsx(d,{value:"black",children:s("admin.black")}),e.jsx(d,{value:"primary",children:s("admin.primary")})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(i,{children:s("admin.shadowEnabled")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s("admin.shadowEnabledDescription")})]}),e.jsx(j,{checked:t.shadow_enabled??!0,onCheckedChange:n=>k(l,"shadow_enabled",n)})]})]});return le?e.jsx("div",{className:"p-6",children:s("common.loading")}):e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:s("admin.navigationSettings")}),e.jsx("p",{className:"text-muted-foreground",children:s("admin.navigationSettingsDescription")})]}),e.jsxs(A,{children:[e.jsx(H,{children:e.jsx(M,{children:s("admin.preview")})}),e.jsx(R,{children:e.jsx("div",{className:"rounded-lg border overflow-hidden",style:{backgroundColor:"#f0f0f0"},children:e.jsxs("div",{className:`h-14 px-4 flex items-center justify-between ${T(w).shadow_enabled?"shadow-[0_2px_4px_rgba(0,0,0,0.15)]":""}`,style:he(T(w)),children:[e.jsx("div",{className:"w-8 h-8 rounded bg-primary/20"}),e.jsx("div",{className:"flex gap-4",children:V?.slice(0,4).map(l=>e.jsx("span",{className:`px-3 py-1 rounded text-sm ${T(w).text_color==="white"?"text-white":T(w).text_color==="black"?"text-black":"text-primary"}`,children:J(l)},l.id))}),e.jsx("div",{className:"w-8 h-8 rounded-full bg-muted"})]})})})]}),e.jsxs(A,{children:[e.jsxs(H,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(M,{children:s("admin.navBarStyle")}),e.jsx(K,{children:s("admin.navBarStyleDescription")})]}),ne&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(b,{variant:"outline",size:"sm",onClick:ce,children:[e.jsx(xe,{className:"w-4 h-4 mr-2"}),s("common.reset")]}),e.jsxs(b,{size:"sm",onClick:re,disabled:L.isPending,children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),s("common.save")]})]})]}),e.jsx(R,{children:e.jsxs(ze,{value:w,onValueChange:l=>te(l),children:[e.jsxs(Ee,{className:"mb-4",children:[e.jsxs(U,{value:"desktop",className:"gap-2",children:[e.jsx($,{className:"w-4 h-4"}),s("admin.desktop")]}),e.jsxs(U,{value:"tablet",className:"gap-2",children:[e.jsx(B,{className:"w-4 h-4"}),s("admin.tablet")]}),e.jsxs(U,{value:"mobile",className:"gap-2",children:[e.jsx(z,{className:"w-4 h-4"}),s("admin.mobile")]})]}),e.jsx(G,{value:"desktop",children:P("desktop",r)}),e.jsx(G,{value:"tablet",children:x?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:s("admin.customTabletSettings")}),e.jsx(b,{variant:"outline",size:"sm",onClick:()=>Y("tablet"),children:s("admin.useDesktopSettings")})]}),P("tablet",x)]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx(B,{className:"w-12 h-12 text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:s("admin.usingDesktopSettings")}),e.jsx(b,{onClick:()=>X("tablet"),children:s("admin.customizeTabletSettings")})]})}),e.jsx(G,{value:"mobile",children:m?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:s("admin.customMobileSettings")}),e.jsx(b,{variant:"outline",size:"sm",onClick:()=>Y("mobile"),children:s("admin.useDesktopSettings")})]}),P("mobile",m)]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx(z,{className:"w-12 h-12 text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:s("admin.usingDesktopSettings")}),e.jsx(b,{onClick:()=>X("mobile"),children:s("admin.customizeMobileSettings")})]})})]})})]}),e.jsxs(A,{children:[e.jsxs(H,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(M,{children:s("admin.navButtons")}),e.jsx(K,{children:s("admin.navButtonsDescription")})]}),e.jsxs(be,{open:oe,onOpenChange:D,children:[e.jsx(ue,{asChild:!0,children:e.jsxs(b,{onClick:()=>Z(),children:[e.jsx(ge,{className:"w-4 h-4 mr-2"}),s("admin.addButton")]})}),e.jsxs(je,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(pe,{children:e.jsx(ve,{children:s(I?"admin.editButton":"admin.addButton")})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:s("admin.labelChinese")}),e.jsx(E,{value:o.label_zh||"",onChange:l=>h({...o,label_zh:l.target.value}),placeholder:"中文标签"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:s("admin.labelEnglish")}),e.jsx(E,{value:o.label_en||"",onChange:l=>h({...o,label_en:l.target.value}),placeholder:"English Label"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:s("admin.labelPortuguese")}),e.jsx(E,{value:o.label_pt||"",onChange:l=>h({...o,label_pt:l.target.value}),placeholder:"Rótulo Português"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:s("admin.link")}),e.jsx(E,{value:o.link||"",onChange:l=>h({...o,link:l.target.value}),placeholder:"/path"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:s("admin.icon")}),e.jsxs(N,{value:o.icon||"Circle",onValueChange:l=>h({...o,icon:l}),children:[e.jsx(y,{children:e.jsx(C,{})}),e.jsx(S,{children:Le.map(l=>e.jsx(d,{value:l,children:e.jsxs("div",{className:"flex items-center gap-2",children:[q(l),e.jsx("span",{children:l})]})},l))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:s("admin.deviceVisibility")}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{checked:o.show_on_desktop??!0,onCheckedChange:l=>h({...o,show_on_desktop:l})}),e.jsx($,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:s("admin.desktop")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{checked:o.show_on_tablet??!0,onCheckedChange:l=>h({...o,show_on_tablet:l})}),e.jsx(B,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:s("admin.tablet")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{checked:o.show_on_mobile??!0,onCheckedChange:l=>h({...o,show_on_mobile:l})}),e.jsx(z,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:s("admin.mobile")})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:s("admin.loginStateVisibility")}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{checked:o.show_when_logged_in??!0,onCheckedChange:l=>h({...o,show_when_logged_in:l})}),e.jsx("span",{className:"text-sm",children:s("admin.showWhenLoggedIn")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{checked:o.show_when_logged_out??!0,onCheckedChange:l=>h({...o,show_when_logged_out:l})}),e.jsx("span",{className:"text-sm",children:s("admin.showWhenLoggedOut")})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{checked:o.visible??!0,onCheckedChange:l=>h({...o,visible:l})}),e.jsx(i,{children:s("admin.visible")})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(b,{variant:"outline",onClick:()=>D(!1),children:s("common.cancel")}),e.jsx(b,{onClick:ie,disabled:W.isPending||F.isPending,children:s("common.save")})]})]})]})]})]}),e.jsx(R,{children:e.jsxs(De,{children:[e.jsx(Te,{children:e.jsxs(ee,{children:[e.jsx(p,{className:"w-12"}),e.jsx(p,{children:s("admin.icon")}),e.jsx(p,{children:s("admin.label")}),e.jsx(p,{children:s("admin.link")}),e.jsx(p,{children:s("admin.devices")}),e.jsx(p,{children:s("admin.visible")}),e.jsx(p,{className:"text-right",children:s("admin.actions")})]})}),e.jsx(Be,{children:V?.map(l=>e.jsxs(ee,{children:[e.jsx(v,{children:e.jsx(ke,{className:"w-4 h-4 text-muted-foreground cursor-move"})}),e.jsx(v,{children:q(l.icon)}),e.jsx(v,{className:"font-medium",children:J(l)}),e.jsx(v,{className:"text-muted-foreground",children:l.link}),e.jsx(v,{children:e.jsxs("div",{className:"flex gap-1",children:[l.show_on_desktop&&e.jsx($,{className:"w-4 h-4"}),l.show_on_tablet&&e.jsx(B,{className:"w-4 h-4"}),l.show_on_mobile&&e.jsx(z,{className:"w-4 h-4"})]})}),e.jsx(v,{children:l.visible?e.jsx(we,{className:"w-4 h-4 text-green-500"}):e.jsx(fe,{className:"w-4 h-4 text-muted-foreground"})}),e.jsx(v,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(b,{variant:"ghost",size:"icon",onClick:()=>Z(l),children:e.jsx(Ne,{className:"w-4 h-4"})}),e.jsx(b,{variant:"ghost",size:"icon",onClick:()=>de(l.id),children:e.jsx(ye,{className:"w-4 h-4 text-destructive"})})]})})]},l.id))})]})})]})]})};export{Fe as default};
//# sourceMappingURL=AdminNavigationSettings-BvnGyLg2.js.map
