{"version":3,"file":"AdminRestaurantStatsList-DVbOdxrn.js","sources":["../../src/pages/admin/AdminRestaurantStatsList.tsx"],"sourcesContent":["import { useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Skeleton } from \"@/components/ui/skeleton\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Store, Eye, Star, MessageCircle, TrendingUp, Calendar, ArrowUpDown, ArrowUp, ArrowDown } from \"lucide-react\";\r\nimport { useLocalizedContent } from \"@/hooks/useLocalizedContent\";\r\nimport { subDays, startOfDay } from \"date-fns\";\r\n\r\ntype TimeRange = \"today\" | \"7days\" | \"30days\" | \"all\";\r\ntype SortBy = \"rating\" | \"views\" | \"comments\" | \"favorites\";\r\ntype SortOrder = \"desc\" | \"asc\";\r\nconst AdminRestaurantStatsList = () => {\r\n  const { t } = useTranslation();\r\n  const navigate = useNavigate();\r\n  const { localizeRestaurant } = useLocalizedContent();\r\n  const [timeRange, setTimeRange] = useState<TimeRange>(\"30days\");\r\n  const [sortBy, setSortBy] = useState<SortBy>(\"rating\");\r\n  const [sortOrder, setSortOrder] = useState<SortOrder>(\"desc\");\r\n\r\n  const getDateFilter = () => {\r\n    const now = new Date();\r\n    switch (timeRange) {\r\n      case \"today\":\r\n        return startOfDay(now).toISOString();\r\n      case \"7days\":\r\n        return startOfDay(subDays(now, 6)).toISOString();\r\n      case \"30days\":\r\n        return startOfDay(subDays(now, 29)).toISOString();\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  // Fetch all visible restaurants\r\n  const { data: restaurants, isLoading: restaurantsLoading } = useQuery({\r\n    queryKey: ['admin-restaurants-stats-list'],\r\n    queryFn: async () => {\r\n      const { data, error } = await supabase\r\n        .from('restaurants')\r\n        .select('*')\r\n        .order('rating', { ascending: false });\r\n      if (error) throw error;\r\n      return data;\r\n    },\r\n  });\r\n\r\n  const dateFilter = getDateFilter();\r\n\r\n  // Fetch aggregated stats via RPC to avoid the 1000-row query limit\r\n  const { data: aggregatedStats } = useQuery({\r\n    queryKey: ['admin-all-restaurant-stats-aggregated', timeRange],\r\n    queryFn: async () => {\r\n      const { data, error } = await supabase.rpc('get_restaurant_stats_aggregated', {\r\n        p_date_filter: dateFilter ?? null,\r\n      });\r\n      if (error) throw error;\r\n      const viewCounts: Record<string, number> = {};\r\n      const commentCounts: Record<string, number> = {};\r\n      const favoriteCounts: Record<string, number> = {};\r\n      (data as { restaurant_id: string; view_count: number; comment_count: number; favorite_count: number }[]).forEach(row => {\r\n        viewCounts[row.restaurant_id] = Number(row.view_count);\r\n        commentCounts[row.restaurant_id] = Number(row.comment_count);\r\n        favoriteCounts[row.restaurant_id] = Number(row.favorite_count);\r\n      });\r\n      return { viewCounts, commentCounts, favoriteCounts };\r\n    },\r\n  });\r\n\r\n  const viewCounts = aggregatedStats?.viewCounts;\r\n  const commentCounts = aggregatedStats?.commentCounts;\r\n  const favoriteCounts = aggregatedStats?.favoriteCounts;\r\n\r\n  // Calculate total stats\r\n  const totalViews = viewCounts ? Object.values(viewCounts).reduce((a, b) => a + b, 0) : 0;\r\n  const totalComments = commentCounts ? Object.values(commentCounts).reduce((a, b) => a + b, 0) : 0;\r\n  const totalFavorites = favoriteCounts ? Object.values(favoriteCounts).reduce((a, b) => a + b, 0) : 0;\r\n\r\n  // Sort restaurants based on selected criteria and order\r\n  const sortedRestaurants = restaurants?.slice().sort((a, b) => {\r\n    let diff = 0;\r\n    switch (sortBy) {\r\n      case \"views\":\r\n        diff = (viewCounts?.[b.id] || 0) - (viewCounts?.[a.id] || 0);\r\n        break;\r\n      case \"comments\":\r\n        diff = (commentCounts?.[b.id] || 0) - (commentCounts?.[a.id] || 0);\r\n        break;\r\n      case \"favorites\":\r\n        diff = (favoriteCounts?.[b.id] || 0) - (favoriteCounts?.[a.id] || 0);\r\n        break;\r\n      case \"rating\":\r\n      default:\r\n        diff = (b.rating || 0) - (a.rating || 0);\r\n    }\r\n    return sortOrder === \"desc\" ? diff : -diff;\r\n  });\r\n\r\n  if (restaurantsLoading) {\r\n    return (\r\n      <div className=\"space-y-6\">\r\n        <Skeleton className=\"h-8 w-48\" />\r\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n          {[1, 2, 3, 4].map(i => <Skeleton key={i} className=\"h-24\" />)}\r\n        </div>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n          {[1, 2, 3, 4, 5, 6].map(i => <Skeleton key={i} className=\"h-40\" />)}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\r\n        <div className=\"flex items-center gap-2\">\r\n          <TrendingUp className=\"h-6 w-6 text-primary\" />\r\n          <h1 className=\"text-2xl font-bold\">{t('admin.restaurantStatistics', '餐厅统计')}</h1>\r\n        </div>\r\n        <div className=\"flex items-center gap-4 flex-wrap\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <ArrowUpDown className=\"h-4 w-4 text-muted-foreground\" />\r\n            <Select value={sortBy} onValueChange={(v) => setSortBy(v as SortBy)}>\r\n              <SelectTrigger className=\"w-[140px]\">\r\n                <SelectValue />\r\n              </SelectTrigger>\r\n              <SelectContent>\r\n                <SelectItem value=\"rating\">{t('admin.sortByRating', '按评分')}</SelectItem>\r\n                <SelectItem value=\"views\">{t('admin.sortByViews', '按浏览量')}</SelectItem>\r\n                <SelectItem value=\"comments\">{t('admin.sortByComments', '按评论数')}</SelectItem>\r\n                <SelectItem value=\"favorites\">{t('admin.sortByFavorites', '按收藏数')}</SelectItem>\r\n              </SelectContent>\r\n            </Select>\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"icon\"\r\n              onClick={() => setSortOrder(sortOrder === \"desc\" ? \"asc\" : \"desc\")}\r\n              title={sortOrder === \"desc\" ? t('admin.sortDescending', '从大到小') : t('admin.sortAscending', '从小到大')}\r\n            >\r\n              {sortOrder === \"desc\" ? <ArrowDown className=\"h-4 w-4\" /> : <ArrowUp className=\"h-4 w-4\" />}\r\n            </Button>\r\n          </div>\r\n          <div className=\"flex items-center gap-2\">\r\n            <Calendar className=\"h-4 w-4 text-muted-foreground\" />\r\n            <Select value={timeRange} onValueChange={(v) => setTimeRange(v as TimeRange)}>\r\n              <SelectTrigger className=\"w-[140px]\">\r\n                <SelectValue />\r\n              </SelectTrigger>\r\n              <SelectContent>\r\n                <SelectItem value=\"today\">{t('analytics.today', '今日')}</SelectItem>\r\n                <SelectItem value=\"7days\">{t('analytics.last7Days', '近7天')}</SelectItem>\r\n                <SelectItem value=\"30days\">{t('analytics.last30Days', '近30天')}</SelectItem>\r\n                <SelectItem value=\"all\">{t('analytics.allTime', '所有时间')}</SelectItem>\r\n              </SelectContent>\r\n            </Select>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Overview Stats */}\r\n      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n        <Card>\r\n          <CardContent className=\"pt-6\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"p-2 bg-primary/10 rounded-lg\">\r\n                <Store className=\"h-5 w-5 text-primary\" />\r\n              </div>\r\n              <div>\r\n                <p className=\"text-sm text-muted-foreground\">{t('admin.totalRestaurants', '餐厅总数')}</p>\r\n                <p className=\"text-2xl font-bold\">{restaurants?.length || 0}</p>\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n        <Card>\r\n          <CardContent className=\"pt-6\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"p-2 bg-blue-500/10 rounded-lg\">\r\n                <Eye className=\"h-5 w-5 text-blue-500\" />\r\n              </div>\r\n              <div>\r\n                <p className=\"text-sm text-muted-foreground\">{t('admin.totalViews', '总浏览量')}</p>\r\n                <p className=\"text-2xl font-bold\">{totalViews}</p>\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n        <Card>\r\n          <CardContent className=\"pt-6\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"p-2 bg-amber-500/10 rounded-lg\">\r\n                <MessageCircle className=\"h-5 w-5 text-amber-500\" />\r\n              </div>\r\n              <div>\r\n                <p className=\"text-sm text-muted-foreground\">{t('admin.totalComments', '总评论数')}</p>\r\n                <p className=\"text-2xl font-bold\">{totalComments}</p>\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n        <Card>\r\n          <CardContent className=\"pt-6\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"p-2 bg-red-500/10 rounded-lg\">\r\n                <Star className=\"h-5 w-5 text-red-500\" />\r\n              </div>\r\n              <div>\r\n                <p className=\"text-sm text-muted-foreground\">{t('admin.totalFavorites', '总收藏数')}</p>\r\n                <p className=\"text-2xl font-bold\">{totalFavorites}</p>\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Restaurant List */}\r\n      <div>\r\n        <h2 className=\"text-lg font-semibold mb-4\">{t('admin.allRestaurants', '所有餐厅')}</h2>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n          {sortedRestaurants?.map(restaurant => {\r\n            const localized = localizeRestaurant(restaurant);\r\n            const views = viewCounts?.[restaurant.id] || 0;\r\n            const comments = commentCounts?.[restaurant.id] || 0;\r\n            const favorites = favoriteCounts?.[restaurant.id] || 0;\r\n\r\n            return (\r\n              <Card \r\n                key={restaurant.id} \r\n                className=\"cursor-pointer hover:shadow-md transition-shadow\"\r\n                onClick={() => navigate(`/admin/restaurant-stats/${restaurant.id}`)}\r\n              >\r\n                <CardHeader className=\"pb-2\">\r\n                  <div className=\"flex items-center gap-3\">\r\n                    {restaurant.image_url ? (\r\n                      <img \r\n                        src={restaurant.image_url} \r\n                        alt={localized.name}\r\n                        className=\"w-12 h-12 rounded-lg object-cover\"\r\n                      />\r\n                    ) : (\r\n                      <div className=\"w-12 h-12 rounded-lg bg-muted flex items-center justify-center\">\r\n                        <Store className=\"h-6 w-6 text-muted-foreground\" />\r\n                      </div>\r\n                    )}\r\n                    <div className=\"flex-1 min-w-0\">\r\n                      <CardTitle className=\"text-base line-clamp-1\">{localized.name}</CardTitle>\r\n                      {restaurant.rating > 0 && (\r\n                        <div className=\"flex items-center gap-1 text-sm text-muted-foreground\">\r\n                          <Star className=\"h-3 w-3 fill-amber-400 text-amber-400\" />\r\n                          <span>{restaurant.rating.toFixed(1)}</span>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <div className=\"grid grid-cols-3 gap-3 text-sm\">\r\n                    <div className=\"flex flex-col items-center p-2 bg-muted/50 rounded-lg\">\r\n                      <Eye className=\"h-4 w-4 text-muted-foreground mb-1\" />\r\n                      <span className=\"font-medium\">{views}</span>\r\n                      <span className=\"text-xs text-muted-foreground\">{t('admin.views', '浏览')}</span>\r\n                    </div>\r\n                    <div className=\"flex flex-col items-center p-2 bg-muted/50 rounded-lg\">\r\n                      <MessageCircle className=\"h-4 w-4 text-muted-foreground mb-1\" />\r\n                      <span className=\"font-medium\">{comments}</span>\r\n                      <span className=\"text-xs text-muted-foreground\">{t('admin.comments', '评论')}</span>\r\n                    </div>\r\n                    <div className=\"flex flex-col items-center p-2 bg-muted/50 rounded-lg\">\r\n                      <Star className=\"h-4 w-4 text-muted-foreground mb-1\" />\r\n                      <span className=\"font-medium\">{favorites}</span>\r\n                      <span className=\"text-xs text-muted-foreground\">{t('admin.favorites', '收藏')}</span>\r\n                    </div>\r\n                  </div>\r\n                  <Button variant=\"outline\" size=\"sm\" className=\"w-full mt-4\">\r\n                    {t('admin.viewDetails', '查看详情')}\r\n                  </Button>\r\n                </CardContent>\r\n              </Card>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminRestaurantStatsList;\r\n"],"names":["AdminRestaurantStatsList","t","useTranslation","navigate","useNavigate","localizeRestaurant","useLocalizedContent","timeRange","setTimeRange","useState","sortBy","setSortBy","sortOrder","setSortOrder","getDateFilter","now","startOfDay","subDays","restaurants","restaurantsLoading","useQuery","data","error","supabase","dateFilter","aggregatedStats","viewCounts","commentCounts","favoriteCounts","row","totalViews","a","b","totalComments","totalFavorites","sortedRestaurants","diff","jsxs","jsx","Skeleton","i","TrendingUp","ArrowUpDown","Select","v","SelectTrigger","SelectValue","SelectContent","SelectItem","Button","ArrowDown","ArrowUp","Calendar","Card","CardContent","Store","Eye","MessageCircle","Star","restaurant","localized","views","comments","favorites","CardHeader","CardTitle"],"mappings":"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"}