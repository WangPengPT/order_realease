import{s as xs,q as ve,v as $e,w as pe,p as qe,r as p,dc as Fs,dd as ds,j as e,bf as ae,aM as we,de as Ps,df as Es,dg as Ts,dh as zs,bU as ue,di as Rs,dj as $s,d3 as qs,X as O,dk as Us,dl as Ms,dm as Vs,dn as Bs,a4 as Ls,bu as Os,bk as Ce,ak as Hs,bW as Gs,bO as Ks,bS as Qs,b3 as ke,ab as Se,bs as ms,bb as fe,y as Ws,dp as Xs,aW as Zs,a$ as Ie,am as ps,bc as Ys}from"./vendor-react-uNsGwLc7.js";import{m as De}from"./vendor-map-CvE3ASYw.js";import{s as S,u as Js,C as M,m as et,E as st,$ as tt,n as V,h as A,A as at,q as nt,r as rt,t as it,v as lt,w as ot,I as u,g as ct,z as gs,U as r,G as dt,D as mt,W as pt,c as ut,d as ht,e as xt,T as gt,F as ft,a2 as jt,a3 as Nt,a4 as vt,a5 as yt,a6 as bt,a8 as oe}from"./index-CD9lV4AA.js";import{C as ce}from"./checkbox-x1O8Gv4L.js";import{S as us}from"./switch-Dfi28Zc2.js";import{R as fs,a as Ne}from"./radio-group-BfM1EeDc.js";import{T as ze,a as Re,b as Z,c as Y}from"./tabs-BY4whP5x.js";import{i as $}from"./vendor-i18n-jtdHZIRR.js";import{R as Ae}from"./RichTextEditor-BpsoURLn.js";import{a as _t}from"./useBrands-CTNTxvC1.js";import{N as wt,O as R,Q as Fe,T as hs,U as je}from"./vendor-utils-vwQGbBim.js";const Ct=t=>xs({queryKey:["dish-images",t],queryFn:async()=>{const{data:g,error:a}=await S.from("restaurant_dish_images").select("*").eq("restaurant_id",t).order("sort_order",{ascending:!0});if(a)throw a;return g},enabled:!!t}),kt=()=>{const{user:t}=Js(),g=ve();return $e({mutationFn:async({restaurantId:a,file:b})=>{if(!t)throw new Error("Must be logged in");const{data:v,error:j}=await S.from("restaurant_dish_images").select("id").eq("restaurant_id",a);if(j)throw j;if(v&&v.length>=10)throw new Error("MAX_IMAGES_REACHED");const f=b.name.split(".").pop(),I=`${a}/${Date.now()}-${Math.random().toString(36).substring(7)}.${f}`,{error:o}=await S.storage.from("dish-images").upload(I,b);if(o)throw o;const{data:{publicUrl:N}}=S.storage.from("dish-images").getPublicUrl(I),w=v?v.length:0,{data:y,error:C}=await S.from("restaurant_dish_images").insert({restaurant_id:a,image_url:N,sort_order:w,created_by:t.id}).select().single();if(C)throw C;return y},onSuccess:(a,b)=>{g.invalidateQueries({queryKey:["dish-images",b.restaurantId]}),pe.success($.t("dishImages.uploadSuccess"))},onError:a=>{a.message==="MAX_IMAGES_REACHED"?pe.error($.t("dishImages.maxImagesReached")):pe.error($.t("dishImages.uploadFailed"))}})},St=()=>{const t=ve();return $e({mutationFn:async({imageId:g,restaurantId:a,imageUrl:b})=>{const v=b.split("/dish-images/");v[1]&&await S.storage.from("dish-images").remove([v[1]]);const{error:j}=await S.from("restaurant_dish_images").delete().eq("id",g);if(j)throw j;return{restaurantId:a}},onSuccess:g=>{t.invalidateQueries({queryKey:["dish-images",g.restaurantId]}),pe.success($.t("dishImages.deleteSuccess"))},onError:()=>{pe.error($.t("dishImages.deleteFailed"))}})},It=()=>{const t=ve();return $e({mutationFn:async({images:g,restaurantId:a})=>{const b=g.map(v=>S.from("restaurant_dish_images").update({sort_order:v.sort_order}).eq("id",v.id));return await Promise.all(b),{restaurantId:a}},onSuccess:g=>{t.invalidateQueries({queryKey:["dish-images",g.restaurantId]})}})};function Dt({image:t,index:g,onDelete:a}){const{attributes:b,listeners:v,setNodeRef:j,transform:f,transition:I,isDragging:o}=Rs({id:t.id}),N={transform:$s.Transform.toString(f),transition:I,zIndex:o?10:1,opacity:o?.8:1};return e.jsxs("div",{ref:j,style:N,className:`relative group aspect-square rounded-lg overflow-hidden border ${o?"ring-2 ring-primary shadow-lg":""}`,children:[e.jsx("div",{...b,...v,className:"absolute top-1 left-1 z-10 p-1 bg-black/60 rounded cursor-grab active:cursor-grabbing opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(qs,{className:"w-4 h-4 text-white"})}),e.jsx("img",{src:t.image_url,alt:`Dish ${g+1}`,className:"w-full h-full object-cover",draggable:!1}),e.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsx(A,{type:"button",variant:"destructive",size:"icon",className:"h-8 w-8",onClick:w=>{w.preventDefault(),w.stopPropagation(),a(t.id,t.image_url)},children:e.jsx(O,{className:"w-4 h-4"})})}),e.jsx("div",{className:"absolute bottom-1 right-1 bg-black/60 text-white text-xs px-1.5 py-0.5 rounded",children:g+1})]})}function At({restaurantId:t}){const{t:g}=qe(),a=p.useRef(null),{data:b=[],isLoading:v}=Ct(t),j=kt(),f=St(),I=It(),[o,N]=p.useState(null),[w,y]=p.useState([]),[C,q]=p.useState(!1),h=w.length>0?w:b,T=Fs(ds(Vs,{activationConstraint:{distance:8}}),ds(Ms,{coordinateGetter:Us})),le=i=>{const{active:c,over:_}=i;if(_&&c.id!==_.id){const Q=h.findIndex(se=>se.id===c.id),ee=h.findIndex(se=>se.id===_.id),W=Bs(h,Q,ee);y(W);const re=W.map((se,de)=>({id:se.id,sort_order:de}));I.mutate({images:re,restaurantId:t},{onSuccess:()=>{y([])},onError:()=>{y([])}})}},U=async i=>{const c=i.target.files?.[0];c&&(c.size>5*1024*1024||c.type.startsWith("image/")&&(await j.mutateAsync({restaurantId:t,file:c}),a.current&&(a.current.value="")))},ne=async()=>{if(!o||C)return;const{id:i,url:c}=o;q(!0);try{await f.mutateAsync({imageId:i,restaurantId:t,imageUrl:c}),N(null)}catch(_){console.error("Delete failed:",_)}finally{q(!1)}},J=i=>{!i&&!C&&N(null)},m=h.length<10;return e.jsxs(M,{children:[e.jsxs(et,{className:"pb-3",children:[e.jsxs(st,{className:"text-lg flex items-center gap-2",children:[e.jsx(ae,{className:"w-5 h-5"}),g("dishImages.title")]}),e.jsxs(tt,{children:[g("dishImages.description",{current:h.length,max:10}),h.length>1&&e.jsx("span",{className:"block mt-1 text-xs",children:g("dishImages.dragToReorder")})]})]}),e.jsxs(V,{children:[v?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(we,{className:"w-6 h-6 animate-spin"})}):e.jsxs("div",{className:"space-y-4",children:[h.length>0&&e.jsx(Ps,{sensors:T,collisionDetection:Es,onDragEnd:le,children:e.jsx(Ts,{items:h.map(i=>i.id),strategy:zs,children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:h.map((i,c)=>e.jsx(Dt,{image:i,index:c,onDelete:(_,Q)=>N({id:_,url:Q})},i.id))})})}),m&&e.jsxs("div",{children:[e.jsx("input",{ref:a,type:"file",accept:"image/*",className:"hidden",onChange:U,disabled:j.isPending}),e.jsxs(A,{type:"button",variant:"outline",className:"w-full",onClick:()=>a.current?.click(),disabled:j.isPending,children:[j.isPending?e.jsx(we,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(ue,{className:"w-4 h-4 mr-2"}),g("dishImages.upload")]})]}),!m&&e.jsx("p",{className:"text-sm text-muted-foreground text-center",children:g("dishImages.maxReached")})]}),e.jsx(at,{open:!!o,onOpenChange:J,children:e.jsx(nt,{onClick:i=>i.stopPropagation(),onKeyDown:i=>{i.key==="Enter"&&(i.preventDefault(),i.stopPropagation())},children:e.jsxs("form",{onSubmit:i=>i.preventDefault(),children:[e.jsxs(rt,{children:[e.jsx(it,{children:g("dishImages.deleteConfirmTitle")}),e.jsx(lt,{children:g("dishImages.deleteConfirmDescription")})]}),e.jsxs(ot,{className:"mt-4",children:[e.jsx(A,{type:"button",variant:"outline",onClick:i=>{i.preventDefault(),i.stopPropagation(),C||N(null)},disabled:C,children:g("common.cancel")}),e.jsxs(A,{type:"button",variant:"destructive",onClick:i=>{i.preventDefault(),i.stopPropagation(),ne()},disabled:C,children:[C?e.jsx(we,{className:"w-4 h-4 mr-2 animate-spin"}):null,g("common.delete")]})]})]})})})]})]})}function Pe({value:t,onChange:g,suggestions:a,placeholder:b,className:v}){const[j,f]=p.useState(!1),[I,o]=p.useState(t),N=p.useRef(null),w=p.useRef(null),y=a.filter(h=>h.toLowerCase().includes(I.toLowerCase()));p.useEffect(()=>{o(t)},[t]),p.useEffect(()=>{const h=T=>{w.current&&!w.current.contains(T.target)&&N.current&&!N.current.contains(T.target)&&f(!1)};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]);const C=h=>{const T=h.target.value;o(T),g(T),f(!0)},q=h=>{o(h),g(h),f(!1),N.current?.focus()};return e.jsxs("div",{className:"relative",children:[e.jsx(u,{ref:N,value:I,onChange:C,onFocus:()=>f(!0),placeholder:b,className:v}),j&&y.length>0&&e.jsx("div",{ref:w,className:"absolute z-50 mt-1 w-full max-h-48 overflow-auto rounded-md border bg-popover p-1 shadow-md",children:y.map(h=>e.jsxs("div",{onClick:()=>q(h),className:ct("relative flex cursor-pointer select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none hover:bg-accent hover:text-accent-foreground",h===I&&"bg-accent"),children:[h===I&&e.jsx(Ls,{className:"mr-2 h-4 w-4"}),e.jsx("span",{className:h===I?"":"pl-6",children:h})]},h))})]})}const Ft=()=>xs({queryKey:["all-restaurant-types"],queryFn:async()=>{const{data:t,error:g}=await S.from("restaurants").select("type, type_en, type_pt");if(g)throw g;const a=new Map;t.forEach(f=>{const I=f.type||[],o=f.type_en||[],N=f.type_pt||[],w=Math.max(I.length,o.length,N.length);for(let y=0;y<w;y++){const C=I[y]||"",q=o[y]||"",h=N[y]||"",T=`${C}|${q}|${h}`;(C||q||h)&&(a.has(T)||a.set(T,{zh:C,en:q,pt:h}))}});const b=new Set,v=new Set,j=new Set;return a.forEach(f=>{f.zh&&b.add(f.zh),f.en&&v.add(f.en),f.pt&&j.add(f.pt)}),{typeSets:Array.from(a.values()),uniqueZh:Array.from(b).sort(),uniqueEn:Array.from(v).sort(),uniquePt:Array.from(j).sort()}}}),Ee=5;function Pt({bannerMediaType:t,onBannerMediaTypeChange:g,promoVideoUrl:a,onPromoVideoUrlChange:b,promoVideoPoster:v,onPromoVideoPosterChange:j,videos:f,onVideosChange:I}){const{t:o}=qe(),{toast:N}=gs(),[w,y]=p.useState(!1),C=async(m,i,c=!1)=>{const _=m.name.split(".").pop(),Q=`${i}_${Math.random()}.${_}`,ee=c?"restaurant-videos":"restaurant-images",{error:W}=await S.storage.from(ee).upload(Q,m);if(W)throw W;const{data:{publicUrl:re}}=S.storage.from(ee).getPublicUrl(Q);return re},q=async m=>{const i=m.target.files?.[0];if(i){y(!0);try{const c=await C(i,"promo_video",!0);b(c),N({title:o("common.success"),description:o("admin.videoUploaded","ËßÜÈ¢ë‰∏ä‰º†ÊàêÂäü")})}catch(c){N({title:o("common.error"),description:c.message,variant:"destructive"})}finally{y(!1)}}},h=async m=>{const i=m.target.files?.[0];if(i){y(!0);try{const c=await C(i,"promo_poster");j(c)}catch(c){N({title:o("common.error"),description:c.message,variant:"destructive"})}finally{y(!1)}}},T=()=>{f.length>=Ee||I([...f,{url:"",title_zh:"",title_en:"",title_pt:"",poster_url:""}])},le=m=>{I(f.filter((i,c)=>c!==m))},U=(m,i,c)=>{const _=[...f];_[m]={..._[m],[i]:c},I(_)},ne=async(m,i)=>{const c=i.target.files?.[0];if(c){y(!0);try{const _=await C(c,`video_${m}`,!0);U(m,"url",_),N({title:o("common.success"),description:o("admin.videoUploaded","ËßÜÈ¢ë‰∏ä‰º†ÊàêÂäü")})}catch(_){N({title:o("common.error"),description:_.message,variant:"destructive"})}finally{y(!1)}}},J=async(m,i)=>{const c=i.target.files?.[0];if(c){y(!0);try{const _=await C(c,`video_poster_${m}`);U(m,"poster_url",_)}catch(_){N({title:o("common.error"),description:_.message,variant:"destructive"})}finally{y(!1)}}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(M,{className:"border-primary/20",children:e.jsxs(V,{className:"p-4 space-y-4",children:[e.jsxs(r,{className:"text-sm font-semibold flex items-center gap-2",children:[e.jsx(Os,{className:"w-4 h-4 text-primary"}),o("restaurants.bannerType","Ê®™ÂπÖÁ±ªÂûã")]}),e.jsxs(fs,{value:t,onValueChange:m=>g(m),className:"flex gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ne,{value:"image",id:"banner-image"}),e.jsx(r,{htmlFor:"banner-image",className:"cursor-pointer text-sm",children:o("restaurants.bannerImage","ÂõæÁâá")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ne,{value:"video",id:"banner-video"}),e.jsx(r,{htmlFor:"banner-video",className:"cursor-pointer text-sm",children:o("restaurants.bannerVideo","ËßÜÈ¢ë")})]})]}),t==="video"&&e.jsxs("div",{className:"space-y-4 pt-2",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:o("restaurants.promoVideoHint","ÂÆ£‰º†ËßÜÈ¢ëÂ∞ÜÂú®È°∂ÈÉ®Ê®™ÂπÖ‰ΩçÁΩÆËá™Âä®ÈùôÈü≥Âæ™ÁéØÊí≠Êîæ")}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-sm",children:o("restaurants.promoVideo","ÂÆ£‰º†ËßÜÈ¢ë")}),e.jsx("div",{className:"flex items-center gap-3",children:a?e.jsxs("div",{className:"relative group",children:[e.jsxs("div",{className:"w-40 h-24 bg-muted rounded-lg flex items-center justify-center overflow-hidden",children:[e.jsx("video",{src:a,className:"w-full h-full object-cover",muted:!0}),e.jsx("div",{className:"absolute inset-0 bg-black/30 flex items-center justify-center",children:e.jsx(Ce,{className:"w-8 h-8 text-white",fill:"white"})})]}),e.jsx(A,{type:"button",variant:"destructive",size:"icon",className:"absolute -top-2 -right-2 h-6 w-6 opacity-0 group-hover:opacity-100 transition-opacity rounded-full",onClick:()=>b(""),children:e.jsx(O,{className:"h-3 w-3"})})]}):e.jsxs(r,{htmlFor:"promo-video-upload",className:"cursor-pointer",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2 px-6 py-4 border-2 border-dashed border-primary/30 rounded-lg hover:border-primary hover:bg-primary/5 transition-all",children:[e.jsx(ue,{className:"h-6 w-6 text-primary"}),e.jsx("p",{className:"font-medium text-xs",children:o("admin.uploadVideo","‰∏ä‰º†ËßÜÈ¢ë")})]}),e.jsx(u,{id:"promo-video-upload",type:"file",accept:"video/*",className:"hidden",onChange:q,disabled:w})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-sm",children:o("restaurants.videoPoster","ËßÜÈ¢ëÂ∞ÅÈù¢")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:o("restaurants.videoPosterHint","ËßÜÈ¢ëÂä†ËΩΩÊó∂ÊòæÁ§∫ÁöÑÂ∞ÅÈù¢Âõæ")}),e.jsx("div",{className:"flex items-center gap-3",children:v?e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:v,alt:"Video Poster",className:"w-32 h-20 object-cover rounded-lg shadow ring-2 ring-primary/20"}),e.jsx(A,{type:"button",variant:"destructive",size:"icon",className:"absolute -top-2 -right-2 h-6 w-6 opacity-0 group-hover:opacity-100 transition-opacity rounded-full",onClick:()=>j(""),children:e.jsx(O,{className:"h-3 w-3"})})]}):e.jsxs(r,{htmlFor:"promo-poster-upload",className:"cursor-pointer",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2 px-4 py-3 border-2 border-dashed border-muted-foreground/30 rounded-lg hover:border-primary/50 transition-all",children:[e.jsx(ae,{className:"h-5 w-5 text-muted-foreground"}),e.jsx("p",{className:"font-medium text-xs text-muted-foreground",children:o("admin.uploadImage")})]}),e.jsx(u,{id:"promo-poster-upload",type:"file",accept:"image/*",className:"hidden",onChange:h,disabled:w})]})})]})]})]})}),e.jsx(M,{className:"border-primary/20",children:e.jsxs(V,{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(r,{className:"text-sm font-semibold flex items-center gap-2",children:[e.jsx(Ce,{className:"w-4 h-4 text-primary"}),o("restaurants.videoGallery","ËßÜÈ¢ëÂàóË°®")]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:o("restaurants.maxVideos",{count:Ee})})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:o("restaurants.videoGalleryHint","Ê∑ªÂä†ÁæéÈ£üÂà∂‰ΩúËøáÁ®ã„ÄÅÂìÅÁâåÊïÖ‰∫ãÁ≠âËßÜÈ¢ë")}),e.jsx("div",{className:"space-y-4",children:f.map((m,i)=>e.jsxs("div",{className:"p-4 border rounded-lg space-y-3 bg-muted/30",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium",children:[o("common.video","ËßÜÈ¢ë")," #",i+1]}),e.jsx(A,{type:"button",variant:"ghost",size:"sm",onClick:()=>le(i),className:"text-destructive hover:text-destructive",children:e.jsx(Hs,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[m.url?e.jsxs("div",{className:"relative group",children:[e.jsxs("div",{className:"w-32 h-20 bg-muted rounded-lg flex items-center justify-center overflow-hidden",children:[e.jsx("video",{src:m.url,className:"w-full h-full object-cover",muted:!0}),e.jsx("div",{className:"absolute inset-0 bg-black/30 flex items-center justify-center",children:e.jsx(Ce,{className:"w-6 h-6 text-white",fill:"white"})})]}),e.jsx(A,{type:"button",variant:"destructive",size:"icon",className:"absolute -top-2 -right-2 h-5 w-5 opacity-0 group-hover:opacity-100 transition-opacity rounded-full",onClick:()=>U(i,"url",""),children:e.jsx(O,{className:"h-3 w-3"})})]}):e.jsxs(r,{htmlFor:`video-upload-${i}`,className:"cursor-pointer",children:[e.jsxs("div",{className:"flex flex-col items-center gap-1 px-4 py-3 border-2 border-dashed border-primary/30 rounded-lg hover:border-primary hover:bg-primary/5 transition-all",children:[e.jsx(ue,{className:"h-5 w-5 text-primary"}),e.jsx("p",{className:"font-medium text-xs",children:o("admin.uploadVideo","‰∏ä‰º†ËßÜÈ¢ë")})]}),e.jsx(u,{id:`video-upload-${i}`,type:"file",accept:"video/*",className:"hidden",onChange:c=>ne(i,c),disabled:w})]}),m.poster_url?e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:m.poster_url,alt:"Poster",className:"w-20 h-20 object-cover rounded-lg ring-2 ring-primary/20"}),e.jsx(A,{type:"button",variant:"destructive",size:"icon",className:"absolute -top-2 -right-2 h-5 w-5 opacity-0 group-hover:opacity-100 transition-opacity rounded-full",onClick:()=>U(i,"poster_url",""),children:e.jsx(O,{className:"h-3 w-3"})})]}):e.jsxs(r,{htmlFor:`poster-upload-${i}`,className:"cursor-pointer",children:[e.jsxs("div",{className:`flex flex-col items-center gap-1 px-3 py-2 border-2 border-dashed rounded-lg transition-all ${m.url?"border-destructive/50 bg-destructive/5":"border-muted-foreground/30 hover:border-primary/50"}`,children:[e.jsx(ae,{className:`h-4 w-4 ${m.url?"text-destructive":"text-muted-foreground"}`}),e.jsxs("p",{className:`text-xs ${m.url?"text-destructive font-medium":"text-muted-foreground"}`,children:[o("restaurants.videoPoster","Â∞ÅÈù¢"),m.url&&e.jsx("span",{className:"text-destructive",children:"*"})]})]}),e.jsx(u,{id:`poster-upload-${i}`,type:"file",accept:"image/*",className:"hidden",onChange:c=>J(i,c),disabled:w})]})]}),m.url&&!m.poster_url&&e.jsxs("p",{className:"text-xs text-destructive flex items-center gap-1",children:[e.jsx("span",{children:"‚ö†Ô∏è"}),o("restaurants.posterRequired","ËØ∑‰∏ä‰º†ËßÜÈ¢ëÂ∞ÅÈù¢ÂõæÔºåÁî®‰∫éÂú®ÂàóË°®‰∏≠Â±ïÁ§∫")]})]}),e.jsxs(ze,{defaultValue:"zh",className:"w-full",children:[e.jsxs(Re,{className:"grid w-full grid-cols-3 h-8",children:[e.jsx(Z,{value:"zh",className:"text-xs",children:"üá®üá≥"}),e.jsx(Z,{value:"en",className:"text-xs",children:"üá¨üáß"}),e.jsx(Z,{value:"pt",className:"text-xs",children:"üáµüáπ"})]}),e.jsx(Y,{value:"zh",className:"mt-2",children:e.jsx(u,{value:m.title_zh||"",onChange:c=>U(i,"title_zh",c.target.value),placeholder:o("restaurants.videoTitle","ËßÜÈ¢ëÊ†áÈ¢ò")+" (‰∏≠Êñá)",className:"text-sm"})}),e.jsx(Y,{value:"en",className:"mt-2",children:e.jsx(u,{value:m.title_en||"",onChange:c=>U(i,"title_en",c.target.value),placeholder:"Video Title (English)",className:"text-sm"})}),e.jsx(Y,{value:"pt",className:"mt-2",children:e.jsx(u,{value:m.title_pt||"",onChange:c=>U(i,"title_pt",c.target.value),placeholder:"T√≠tulo do V√≠deo (Portugu√™s)",className:"text-sm"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(r,{className:"text-xs text-muted-foreground",children:[o("common.duration","Êó∂Èïø")," (s):"]}),e.jsx(u,{type:"number",value:m.duration||"",onChange:c=>U(i,"duration",parseInt(c.target.value)||0),placeholder:"90",className:"w-20 h-8 text-sm"})]})]},i))}),f.length<Ee&&e.jsxs(A,{type:"button",variant:"outline",onClick:T,className:"w-full gap-2",children:[e.jsx(Gs,{className:"w-4 h-4"}),o("restaurants.addVideo","Ê∑ªÂä†ËßÜÈ¢ë")]})]})})]})}const Et=wt({name:R().min(1,$.t("validation.nameRequired")),name_en:R().min(1,$.t("validation.nameRequired")),name_pt:R().min(1,$.t("validation.nameRequired")),key_id:R().optional(),type:Fe(R()).min(1,$.t("validation.typeRequired")).max(3,$.t("validation.typeMaximum")),type_en:Fe(R()).min(1,$.t("validation.typeRequired")).max(3,$.t("validation.typeMaximum")),type_pt:Fe(R()).min(1,$.t("validation.typeRequired")).max(3,$.t("validation.typeMaximum")),description:R().optional(),description_en:R().optional(),description_pt:R().optional(),announcement_zh:R().optional(),announcement_en:R().optional(),announcement_pt:R().optional(),address:R().min(1,$.t("validation.addressRequired")),lat:hs(),lng:hs(),phone:R().optional(),website_url:R().optional(),visible:je().default(!0),show_takeaway_button:je().default(!0),show_booking_button:je().default(!0),show_ghost_intro:je().default(!0)}),Te=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];function Gt({restaurant:t,trigger:g}){const{t:a}=qe(),{toast:b}=gs(),v=ve(),{isAdmin:j}=dt(),{data:f}=Ft(),{data:I}=_t(),[o,N]=p.useState(!1),[w,y]=p.useState(t?.is_chain||!1),[C,q]=p.useState(t?.brand_id||null),[h,T]=p.useState(null),[le,U]=p.useState(t?.image_url||null),[ne,J]=p.useState(null),[m,i]=p.useState(t?.cover_image_url||null),[c,_]=p.useState(null),[Q,ee]=p.useState(t?.owner_avatar_url||null),[W,re]=p.useState(null),[se,de]=p.useState(t?.banner_url||null),[Ue,Me]=p.useState(t?.owner_bio||""),[Ve,Be]=p.useState(t?.owner_bio_en||""),[Le,Oe]=p.useState(t?.owner_bio_pt||""),[He,Ge]=p.useState(t?.owner_name||""),[Ke,Qe]=p.useState(t?.owner_name_en||""),[We,Xe]=p.useState(t?.owner_name_pt||""),[Ze,Ye]=p.useState(!1),[ye,Je]=p.useState(t?.banner_media_type||"image"),[es,ss]=p.useState(t?.promo_video_url||""),[ts,as]=p.useState(t?.promo_video_poster||""),[ns,rs]=p.useState(()=>t?.videos&&Array.isArray(t.videos)?t.videos:[]),he=p.useRef(null),z=p.useRef(null),ie=p.useRef(null),[l,F]=p.useState(()=>{const s={};return Te.forEach(n=>{s[n]={open:"12:00",close:"23:00",closed:!1,splitShift:!1,open2:"19:00",close2:"23:00"}}),t?.opening_hours?{...s,...t.opening_hours}:s}),[P,xe]=p.useState(t?.template||"default");p.useEffect(()=>{if(o){y(t?.is_chain||!1),q(t?.brand_id||null),T(null),U(t?.image_url||null),J(null),i(t?.cover_image_url||null),_(null),ee(t?.owner_avatar_url||null),re(null),de(t?.banner_url||null),Me(t?.owner_bio||""),Be(t?.owner_bio_en||""),Oe(t?.owner_bio_pt||""),Ge(t?.owner_name||""),Qe(t?.owner_name_en||""),Xe(t?.owner_name_pt||""),Je(t?.banner_media_type||"image"),ss(t?.promo_video_url||""),as(t?.promo_video_poster||""),rs(t?.videos&&Array.isArray(t.videos)?t.videos:[]),xe(t?.template||"default");const s={};Te.forEach(n=>{s[n]={open:"12:00",close:"23:00",closed:!1,splitShift:!1,open2:"19:00",close2:"23:00"}}),F(t?.opening_hours?{...s,...t.opening_hours}:s),t?.type&&Array.isArray(t.type)?me(t.type.map((n,d)=>({zh:n,en:t.type_en?.[d]||"",pt:t.type_pt?.[d]||""}))):me([{zh:"",en:"",pt:""}]),t&&(x("name",t.name),x("name_en",t.name_en||""),x("name_pt",t.name_pt||""),x("key_id",t.key_id||""),x("type",Array.isArray(t.type)?t.type:[t.type]),x("type_en",Array.isArray(t.type_en)?t.type_en:t.type_en?[t.type_en]:[""]),x("type_pt",Array.isArray(t.type_pt)?t.type_pt:t.type_pt?[t.type_pt]:[""]),x("description",t.description||""),x("description_en",t.description_en||""),x("description_pt",t.description_pt||""),x("announcement_zh",t.announcement_zh||""),x("announcement_en",t.announcement_en||""),x("announcement_pt",t.announcement_pt||""),x("address",t.address),x("lat",typeof t.lat=="number"&&!isNaN(t.lat)?t.lat:38.7223),x("lng",typeof t.lng=="number"&&!isNaN(t.lng)?t.lng:-9.1393),x("phone",t.phone||""),x("website_url",t.website_url||""),x("visible",t.visible??!0),x("show_takeaway_button",t.show_takeaway_button??!0),x("show_booking_button",t.show_booking_button??!0),x("show_ghost_intro",t.show_ghost_intro??!0))}},[o,t]);const[H,me]=p.useState(()=>t?.type&&Array.isArray(t.type)?t.type.map((s,n)=>({zh:s,en:t.type_en?.[n]||"",pt:t.type_pt?.[n]||""})):[{zh:"",en:"",pt:""}]),{register:B,handleSubmit:is,formState:{errors:D},setValue:x,watch:X,trigger:Tt}=Ks({resolver:Qs(Et),defaultValues:t?{name:t.name,name_en:t.name_en||"",name_pt:t.name_pt||"",key_id:t.key_id||"",type:Array.isArray(t.type)?t.type:[t.type],type_en:Array.isArray(t.type_en)?t.type_en:t.type_en?[t.type_en]:[""],type_pt:Array.isArray(t.type_pt)?t.type_pt:t.type_pt?[t.type_pt]:[""],description:t.description||"",description_en:t.description_en||"",description_pt:t.description_pt||"",announcement_zh:t.announcement_zh||"",announcement_en:t.announcement_en||"",announcement_pt:t.announcement_pt||"",address:t.address,lat:typeof t.lat=="number"&&!isNaN(t.lat)?t.lat:38.7223,lng:typeof t.lng=="number"&&!isNaN(t.lng)?t.lng:-9.1393,phone:t.phone||"",website_url:t.website_url||"",visible:t.visible??!0,show_takeaway_button:t.show_takeaway_button??!0,show_booking_button:t.show_booking_button??!0,show_ghost_intro:t.show_ghost_intro??!0}:{name:"",name_en:"",name_pt:"",key_id:"",type:[""],type_en:[""],type_pt:[""],description:"",description_en:"",description_pt:"",announcement_zh:"",announcement_en:"",announcement_pt:"",address:"",lat:38.7223,lng:-9.1393,phone:"",website_url:"",visible:!0,show_takeaway_button:!0,show_booking_button:!0,show_ghost_intro:!0}}),js=()=>{const s=[];D.name&&s.push(a("admin.fieldName")+" (‰∏≠Êñá)"),D.name_en&&s.push(a("admin.fieldName")+" (EN)"),D.name_pt&&s.push(a("admin.fieldName")+" (PT)"),D.type&&s.push(a("admin.fieldType")+" (‰∏≠Êñá)"),D.type_en&&s.push(a("admin.fieldType")+" (EN)"),D.type_pt&&s.push(a("admin.fieldType")+" (PT)"),D.address&&s.push(a("admin.fieldAddress")),(D.lat||D.lng)&&s.push(a("admin.fieldLocation")),s.length>0&&b({title:a("admin.validationFailed"),description:a("admin.missingFields")+": "+s.join(", "),variant:"destructive"})},Ns=()=>{H.length<3&&me([...H,{zh:"",en:"",pt:""}])},vs=s=>{H.length>1&&me(H.filter((n,d)=>d!==s))},be=(s,n,d)=>{const k=[...H];k[s][n]=d,me(k),x("type",k.map(E=>E.zh).filter(Boolean)),x("type_en",k.map(E=>E.en).filter(Boolean)),x("type_pt",k.map(E=>E.pt).filter(Boolean))},G=X("lat"),K=X("lng"),ys=X("visible"),bs=X("show_takeaway_button"),_s=X("show_booking_button");X("show_ghost_intro");const ge=(s,n)=>typeof s=="number"&&typeof n=="number"&&!isNaN(s)&&!isNaN(n)&&isFinite(s)&&isFinite(n);p.useEffect(()=>{if(!o){z.current&&(z.current.remove(),z.current=null,ie.current=null);return}if(z.current)return;const s="pk.eyJ1IjoieGlhb3hpb25nMTIzIiwiYSI6ImNtNTFjOXliYjF1Y2IyaXM4bnNzMGxvdnkifQ.mPcWqH7ndIrjEqlWIJVk8g",d=setTimeout(()=>{if(!he.current){console.error("Map container not found");return}try{De.accessToken=s;const k=ge(G,K)?K:-9.1393,E=ge(G,K)?G:38.7223;z.current=new De.Map({container:he.current,style:"mapbox://styles/mapbox/light-v11",center:[k,E],zoom:15}),z.current.scrollZoom.disable(),z.current.on("load",()=>{z.current&&(ge(G,K)&&(ie.current=new De.Marker({draggable:!0}).setLngLat([K,G]).addTo(z.current)),ie.current.on("dragend",()=>{const L=ie.current.getLngLat();x("lng",L.lng),x("lat",L.lat)}),setTimeout(()=>{z.current?.resize()},100))});const _e=L=>{L.ctrlKey||L.metaKey?z.current?.scrollZoom.enable():z.current?.scrollZoom.disable()};he.current.addEventListener("wheel",_e),z.current.on("click",L=>{const{lng:te,lat:cs}=L.lngLat;x("lng",te),x("lat",cs),ie.current?.setLngLat([te,cs])}),z.current.on("error",L=>{console.error("Map error:",L)})}catch(k){console.error("Failed to initialize map:",k)}},500);return()=>{clearTimeout(d)}},[o,G,K]),p.useEffect(()=>{ie.current&&z.current&&ge(G,K)&&(ie.current.setLngLat([K,G]),z.current.setCenter([K,G]))},[G,K]);const ws=s=>{const n=s.target.files?.[0];if(n){T(n);const d=new FileReader;d.onloadend=()=>{U(d.result)},d.readAsDataURL(n)}},ls=s=>{const n=s.target.files?.[0];if(n){J(n);const d=new FileReader;d.onloadend=()=>{i(d.result)},d.readAsDataURL(n)}},Cs=s=>{const n=s.target.files?.[0];if(n){_(n);const d=new FileReader;d.onloadend=()=>{ee(d.result)},d.readAsDataURL(n)}},ks=s=>{const n=s.target.files?.[0];if(n){re(n);const d=new FileReader;d.onloadend=()=>{de(d.result)},d.readAsDataURL(n)}},Ss=async()=>{if(!h)return t?.image_url||null;const s=h.name.split(".").pop(),d=`${`${Math.random()}.${s}`}`,{error:k}=await S.storage.from("restaurant-images").upload(d,h);if(k)throw k;const{data:{publicUrl:E}}=S.storage.from("restaurant-images").getPublicUrl(d);return E},Is=async()=>{if(!ne)return t?.cover_image_url||null;const s=ne.name.split(".").pop(),d=`${`cover_${Math.random()}.${s}`}`,{error:k}=await S.storage.from("restaurant-images").upload(d,ne);if(k)throw k;const{data:{publicUrl:E}}=S.storage.from("restaurant-images").getPublicUrl(d);return E},Ds=async()=>{if(!c)return t?.owner_avatar_url||null;const s=c.name.split(".").pop(),d=`${`owner_${Math.random()}.${s}`}`,{error:k}=await S.storage.from("restaurant-images").upload(d,c);if(k)throw k;const{data:{publicUrl:E}}=S.storage.from("restaurant-images").getPublicUrl(d);return E},As=async()=>{if(!W)return t?.banner_url||null;const s=W.name.split(".").pop(),d=`${`banner_${Math.random()}.${s}`}`,{error:k}=await S.storage.from("restaurant-images").upload(d,W);if(k)throw k;const{data:{publicUrl:E}}=S.storage.from("restaurant-images").getPublicUrl(d);return E},os=async s=>{Ye(!0);try{const{data:{user:n}}=await S.auth.getUser();if(!n)throw new Error("Not authenticated");const d=await Ss(),k=await Is(),E=await Ds(),_e=await As(),L={name:s.name,name_en:s.name_en,name_pt:s.name_pt,key_id:s.key_id||null,type:s.type,type_en:s.type_en,type_pt:s.type_pt,description:s.description||null,description_en:s.description_en||null,description_pt:s.description_pt||null,announcement_zh:s.announcement_zh||null,announcement_en:s.announcement_en||null,announcement_pt:s.announcement_pt||null,address:s.address,lat:P==="ghost"?s.lat||38.7223:s.lat,lng:P==="ghost"?s.lng||-9.1393:s.lng,phone:s.phone||null,website_url:s.website_url||null,visible:s.visible,show_takeaway_button:s.show_takeaway_button,show_booking_button:P==="ghost"?!1:s.show_booking_button,show_ghost_intro:P==="ghost"?s.show_ghost_intro:!0,image_url:d,cover_image_url:k,opening_hours:P==="ghost"?null:l,template:P,owner_avatar_url:E,banner_url:_e,owner_bio:Ue||null,owner_bio_en:Ve||null,owner_bio_pt:Le||null,owner_name:He||null,owner_name_en:Ke||null,owner_name_pt:We||null,is_chain:w,brand_id:w?C:null,banner_media_type:P==="ghost"?ye:"image",promo_video_url:P==="ghost"&&es||null,promo_video_poster:P==="ghost"&&ts||null,videos:P==="ghost"?ns:[]};if(t){const{error:te}=await S.from("restaurants").update({...L,updated_by:n.id}).eq("id",t.id);if(te)throw te;b({title:a("common.success"),description:a("admin.restaurantUpdated")})}else{const{error:te}=await S.from("restaurants").insert([{...L,created_by:n.id}]);if(te)throw te;b({title:a("common.success"),description:a("admin.restaurantCreated")})}v.invalidateQueries({queryKey:["restaurants"]}),v.invalidateQueries({queryKey:["admin-restaurants"]}),t?.id&&v.invalidateQueries({queryKey:["restaurant",t.id]}),N(!1)}catch(n){b({title:a("common.error"),description:n.message,variant:"destructive"})}finally{Ye(!1)}};return e.jsxs(mt,{open:o,onOpenChange:N,children:[e.jsx(pt,{asChild:!0,children:g}),e.jsxs(ut,{className:"max-w-[95vw] sm:max-w-6xl max-h-[95vh] overflow-hidden flex flex-col p-0",children:[e.jsxs(ht,{className:"px-6 pt-6 pb-4 border-b bg-muted/30",children:[e.jsxs(xt,{className:"text-2xl flex items-center gap-2",children:[e.jsx(ke,{className:"w-6 h-6 text-primary"}),a(t?"admin.editRestaurant":"admin.addRestaurant")]}),e.jsx(gt,{className:"text-base",children:a(t?"admin.editRestaurantDetails":"admin.createRestaurantWithInfo")})]}),e.jsx(ft,{className:"px-6 h-[calc(95vh-220px)]",children:e.jsxs("form",{onSubmit:is(os,js),className:"space-y-6 py-6",children:[e.jsx(M,{className:"border-primary/20 bg-gradient-to-br from-primary/5 to-background",children:e.jsx(V,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:e.jsx(Se,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx(r,{className:"text-base font-semibold",children:a("admin.frontendDisplay")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a("admin.frontendDisplayDesc")})]})]}),e.jsx(us,{checked:ys,onCheckedChange:s=>x("visible",s)})]})})}),j&&e.jsx(M,{className:"border-primary/20 bg-gradient-to-br from-background to-muted/20",children:e.jsxs(V,{className:"p-6",children:[e.jsxs(r,{className:"text-base font-semibold flex items-center gap-2 mb-4",children:[e.jsx(ke,{className:"w-5 h-5 text-primary"}),a("admin.restaurantTemplate")]}),e.jsxs(fs,{value:P,onValueChange:xe,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-start space-x-3 p-4 rounded-lg border border-border hover:border-primary/50 transition-colors cursor-pointer",onClick:()=>xe("default"),children:[e.jsx(Ne,{value:"default",id:"template-default",className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(r,{htmlFor:"template-default",className:"text-sm font-medium cursor-pointer",children:a("admin.templateDefault")}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:a("admin.templateDefaultDesc")})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 p-4 rounded-lg border border-border hover:border-primary/50 transition-colors cursor-pointer",onClick:()=>xe("ghost"),children:[e.jsx(Ne,{value:"ghost",id:"template-ghost",className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(r,{htmlFor:"template-ghost",className:"text-sm font-medium cursor-pointer",children:a("admin.templateGhost")}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:a("admin.templateGhostDesc")})]})]})]})]})}),e.jsx(M,{className:"border-primary/20 bg-gradient-to-br from-background to-muted/20",children:e.jsxs(V,{className:"p-6",children:[e.jsxs(r,{className:"text-base font-semibold flex items-center gap-2 mb-4",children:[e.jsx(ms,{className:"w-5 h-5 text-primary"}),a("admin.restaurant.isChain")]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(r,{className:"text-sm font-medium",children:a("admin.restaurant.isChain")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a("admin.restaurant.isChainDesc")})]}),e.jsx(us,{checked:w,onCheckedChange:s=>{y(s),s||q(null)}})]}),w&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-sm font-medium",children:a("admin.restaurant.selectBrand")}),e.jsxs(jt,{value:C||"",onValueChange:s=>q(s||null),children:[e.jsx(Nt,{children:e.jsx(vt,{placeholder:a("admin.restaurant.selectBrandPlaceholder")})}),e.jsx(yt,{children:I?.map(s=>e.jsx(bt,{value:s.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[s.logo_url?e.jsx("img",{src:s.logo_url,alt:"",className:"w-5 h-5 object-contain rounded"}):e.jsx(ms,{className:"w-4 h-4 text-muted-foreground"}),s.name]})},s.id))})]})]})]})]})}),e.jsx(M,{className:"border-primary/20 bg-gradient-to-br from-background to-muted/20",children:e.jsxs(V,{className:"p-6",children:[e.jsxs(r,{className:"text-base font-semibold flex items-center gap-2 mb-4",children:[e.jsx(ue,{className:"w-5 h-5 text-primary"}),a("admin.restaurantImages")]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium",children:a("admin.cardImage")}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",a("admin.cardImageHint"),")"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[le&&e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:le,alt:"Card Preview",className:"w-32 h-32 object-cover rounded-lg shadow-lg ring-2 ring-primary/20 transition-transform duration-200 group-hover:scale-105"}),e.jsx(A,{type:"button",variant:"destructive",size:"icon",className:"absolute -top-2 -right-2 h-6 w-6 shadow-lg opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>{T(null),U(null)},children:e.jsx(O,{className:"h-3 w-3"})})]}),e.jsxs(r,{htmlFor:"image-upload",className:"cursor-pointer",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2 px-6 py-4 border-2 border-dashed border-primary/30 rounded-lg hover:border-primary hover:bg-primary/5 transition-all duration-200",children:[e.jsx(ue,{className:"h-6 w-6 text-primary"}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"font-medium text-xs",children:a("admin.uploadImage")})})]}),e.jsx(u,{id:"image-upload",type:"file",accept:"image/*",className:"hidden",onChange:ws})]})]})]}),P!=="ghost"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium",children:a("admin.coverImage")}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",a("admin.coverImageHint"),")"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[m&&e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:m,alt:"Cover Preview",className:"w-32 h-32 object-cover rounded-lg shadow-lg ring-2 ring-accent/20 transition-transform duration-200 group-hover:scale-105"}),e.jsx(A,{type:"button",variant:"destructive",size:"icon",className:"absolute -top-2 -right-2 h-6 w-6 shadow-lg opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>{J(null),i(null)},children:e.jsx(O,{className:"h-3 w-3"})})]}),e.jsxs(r,{htmlFor:"cover-image-upload",className:"cursor-pointer",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2 px-6 py-4 border-2 border-dashed border-accent/30 rounded-lg hover:border-accent hover:bg-accent/5 transition-all duration-200",children:[e.jsx(ae,{className:"h-6 w-6 text-accent"}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"font-medium text-xs",children:a("admin.uploadImage")})})]}),e.jsx(u,{id:"cover-image-upload",type:"file",accept:"image/*",className:"hidden",onChange:ls})]})]})]})]})]})}),t?.id&&e.jsx(M,{className:"border-primary/20",children:e.jsxs(V,{className:"p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs(r,{className:"text-base font-semibold flex items-center gap-2",children:[e.jsx(ae,{className:"w-5 h-5 text-primary"}),a("admin.dishGallery")]})}),e.jsx(At,{restaurantId:t.id})]})}),e.jsx(M,{className:"border-primary/20",children:e.jsxs(V,{className:"p-6",children:[e.jsxs(r,{className:"text-base font-semibold flex items-center gap-2 mb-4",children:[e.jsx(Se,{className:"w-5 h-5 text-primary"}),a("admin.multilingualContent")]}),e.jsxs(ze,{defaultValue:"zh",className:"w-full",children:[e.jsxs(Re,{className:"grid w-full grid-cols-3 mb-6",children:[e.jsxs(Z,{value:"zh",className:"gap-2",children:["üá®üá≥ ",a("admin.chinese")]}),e.jsxs(Z,{value:"en",className:"gap-2",children:["üá¨üáß ",a("admin.english")]}),e.jsxs(Z,{value:"pt",className:"gap-2",children:["üáµüáπ ",a("admin.portuguese")]})]}),e.jsxs(Y,{value:"zh",className:"space-y-4 mt-0",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"name",className:"text-sm font-medium",children:a("admin.restaurantName")}),e.jsx(u,{id:"name",...B("name"),placeholder:a("admin.enterRestaurantName"),className:"text-base"}),D.name&&e.jsx("p",{className:"text-sm text-destructive",children:D.name.message})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(r,{className:"text-sm font-medium",children:a("admin.restaurantType")}),H.length<3&&e.jsx(A,{type:"button",variant:"outline",size:"sm",onClick:Ns,children:a("admin.addType")})]}),H.map((s,n)=>e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(Pe,{placeholder:a("admin.typeExample"),value:s.zh,onChange:d=>be(n,"zh",d),suggestions:f?.uniqueZh||[]}),e.jsx(A,{type:"button",variant:"ghost",size:"icon",onClick:()=>vs(n),disabled:H.length===1,children:e.jsx(O,{className:"h-4 w-4"})})]},n)),D.type&&e.jsx("p",{className:"text-sm text-destructive",children:D.type.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"description",className:"text-sm font-medium",children:a("admin.description")}),e.jsx(Ae,{value:X("description")||"",onChange:s=>x("description",s),placeholder:a("admin.enterDescription")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"announcement_zh",className:"text-sm font-medium",children:a("admin.announcement")}),e.jsx(oe,{id:"announcement_zh",...B("announcement_zh"),rows:2,placeholder:a("admin.enterAnnouncement")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a("admin.announcementHint")})]})]}),e.jsxs(Y,{value:"en",className:"space-y-4 mt-0",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"name_en",className:"text-sm font-medium",children:"Restaurant Name"}),e.jsx(u,{id:"name_en",...B("name_en"),placeholder:"Enter restaurant name...",className:"text-base"}),D.name_en&&e.jsx("p",{className:"text-sm text-destructive",children:D.name_en.message})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(r,{className:"text-sm font-medium",children:"Restaurant Types (1-3 tags)"}),H.map((s,n)=>e.jsx("div",{className:"flex gap-2 items-center",children:e.jsx(Pe,{placeholder:"e.g. Cantonese",value:s.en,onChange:d=>be(n,"en",d),suggestions:f?.uniqueEn||[]})},n))]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"description_en",className:"text-sm font-medium",children:"Description"}),e.jsx(Ae,{value:X("description_en")||"",onChange:s=>x("description_en",s),placeholder:"Enter restaurant description..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"announcement_en",className:"text-sm font-medium",children:"Announcement"}),e.jsx(oe,{id:"announcement_en",...B("announcement_en"),rows:2,placeholder:"Enter announcement (optional)..."}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Display important notices at top of restaurant page"})]})]}),e.jsxs(Y,{value:"pt",className:"space-y-4 mt-0",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"name_pt",className:"text-sm font-medium",children:"Nome do Restaurante"}),e.jsx(u,{id:"name_pt",...B("name_pt"),placeholder:"Digite o nome do restaurante...",className:"text-base"}),D.name_pt&&e.jsx("p",{className:"text-sm text-destructive",children:D.name_pt.message})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(r,{className:"text-sm font-medium",children:"Tipos de Restaurante (1-3 tags)"}),H.map((s,n)=>e.jsx("div",{className:"flex gap-2 items-center",children:e.jsx(Pe,{placeholder:"ex: Cantonesa",value:s.pt,onChange:d=>be(n,"pt",d),suggestions:f?.uniquePt||[]})},n))]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"description_pt",className:"text-sm font-medium",children:"Descri√ß√£o"}),e.jsx(Ae,{value:X("description_pt")||"",onChange:s=>x("description_pt",s),placeholder:"Digite a descri√ß√£o do restaurante..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"announcement_pt",className:"text-sm font-medium",children:"An√∫ncio"}),e.jsx(oe,{id:"announcement_pt",...B("announcement_pt"),rows:2,placeholder:"Digite o an√∫ncio (opcional)..."}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Exibir avisos importantes no topo da p√°gina do restaurante"})]})]})]})]})}),e.jsx(M,{className:"border-primary/20",children:e.jsxs(V,{className:"p-6 space-y-4",children:[e.jsxs(r,{className:"text-base font-semibold flex items-center gap-2",children:[e.jsx(fe,{className:"w-5 h-5 text-primary"}),a("admin.locationAndContact")]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"address",className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(fe,{className:"w-4 h-4"}),a("admin.address")]}),e.jsx(u,{id:"address",...B("address"),placeholder:a("admin.enterAddress")}),D.address&&e.jsx("p",{className:"text-sm text-destructive",children:D.address.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"phone",className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(Ws,{className:"w-4 h-4"}),a("admin.phone")]}),e.jsx(u,{id:"phone",...B("phone"),placeholder:"+351..."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"website_url",className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(Se,{className:"w-4 h-4"}),a("admin.websiteBaseUrl")]}),e.jsx(u,{id:"website_url",...B("website_url"),placeholder:"https://sushi.xiaoxiong.pt:6000",readOnly:!j,disabled:!j,className:j?"":"bg-muted cursor-not-allowed"}),!j&&e.jsx("p",{className:"text-xs text-muted-foreground",children:a("admin.websiteReadOnly")})]}),j&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"key_id",className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(Xs,{className:"w-4 h-4"}),"Key ID (API)"]}),e.jsx(u,{id:"key_id",...B("key_id"),placeholder:"‰æãÂ¶Ç: saldanha01"})]})]}),e.jsxs("div",{className:"space-y-3 pt-2",children:[e.jsx(r,{className:"text-sm font-medium text-muted-foreground",children:a("admin.displaySettings")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg border bg-muted/30",children:[e.jsx(ce,{id:"show_takeaway_button",checked:bs,onCheckedChange:s=>x("show_takeaway_button",s)}),e.jsxs(r,{htmlFor:"show_takeaway_button",className:"cursor-pointer text-sm flex items-center gap-2",children:[e.jsx(Zs,{className:"w-4 h-4"}),a("admin.showTakeawayButton")]})]}),P!=="ghost"&&e.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg border bg-muted/30",children:[e.jsx(ce,{id:"show_booking_button",checked:_s,onCheckedChange:s=>x("show_booking_button",s)}),e.jsxs(r,{htmlFor:"show_booking_button",className:"cursor-pointer text-sm flex items-center gap-2",children:[e.jsx(Ie,{className:"w-4 h-4"}),a("admin.showBookingButton")]})]})]})]})]})}),P==="ghost"&&e.jsx(M,{className:"border-primary/20 bg-gradient-to-br from-background to-muted/20",children:e.jsxs(V,{className:"p-6",children:[e.jsxs(r,{className:"text-base font-semibold flex items-center gap-2 mb-4",children:[e.jsx(ae,{className:"w-5 h-5 text-primary"}),a("admin.visualAssets","ËßÜËßâÁ¥†Êùê")]}),e.jsx("div",{className:"mb-6",children:e.jsx(Pt,{bannerMediaType:ye,onBannerMediaTypeChange:Je,promoVideoUrl:es,onPromoVideoUrlChange:ss,promoVideoPoster:ts,onPromoVideoPosterChange:as,videos:ns,onVideosChange:rs})}),ye==="image"&&e.jsxs("div",{className:"space-y-4 mb-6 p-4 border rounded-lg bg-muted/20",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ae,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"text-sm font-medium",children:a("admin.backgroundImage","ËÉåÊôØÂõæ")})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a("admin.backgroundImageDesc","Ê≠§ÂõæÁâáÂ∞ÜÊòæÁ§∫Âú®ËØ¶ÊÉÖÈ°µÈ°∂ÈÉ®‰Ωú‰∏∫ËÉåÊôØÊ®™ÂπÖ")}),e.jsxs("div",{className:"flex items-start gap-4",children:[se&&e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:se,alt:"Background Banner Preview",className:"w-40 h-20 object-cover rounded-lg shadow-lg ring-2 ring-primary/20 transition-transform duration-200 group-hover:scale-105"}),e.jsx(A,{type:"button",variant:"destructive",size:"icon",className:"absolute -top-2 -right-2 h-6 w-6 shadow-lg opacity-0 group-hover:opacity-100 transition-opacity rounded-full",onClick:()=>{re(null),de(null)},children:e.jsx(O,{className:"h-3 w-3"})})]}),e.jsxs(r,{htmlFor:"ghost-banner-upload",className:"cursor-pointer",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2 px-6 py-4 border-2 border-dashed border-primary/30 rounded-lg hover:border-primary hover:bg-primary/5 transition-all duration-200",children:[e.jsx(ae,{className:"h-6 w-6 text-primary"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-medium text-xs",children:a("admin.uploadImage")}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["16:9 ",a("admin.recommended","Êé®Ëçê")]})]})]}),e.jsx(u,{id:"ghost-banner-upload",type:"file",accept:"image/*",className:"hidden",onChange:ks})]})]})]}),e.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-muted/20",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"text-sm font-medium",children:a("admin.signatureDish","ÊãõÁâåÁæéÈ£ü")})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a("admin.signatureDishDesc","Ê≠§ÂõæÁâáÂ∞ÜÊòæÁ§∫Âú®ËØ¶ÊÉÖÈ°µÁæéÈ£üÂ±ïÁ§∫Âå∫")}),e.jsxs("div",{className:"flex items-start gap-4",children:[m&&e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:m,alt:"Food Image Preview",className:"w-32 h-32 object-cover rounded-lg shadow-lg ring-2 ring-primary/20 transition-transform duration-200 group-hover:scale-105"}),e.jsx(A,{type:"button",variant:"destructive",size:"icon",className:"absolute -top-2 -right-2 h-6 w-6 shadow-lg opacity-0 group-hover:opacity-100 transition-opacity rounded-full",onClick:()=>{J(null),i(null)},children:e.jsx(O,{className:"h-3 w-3"})})]}),e.jsxs(r,{htmlFor:"ghost-cover-image-upload",className:"cursor-pointer",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2 px-6 py-4 border-2 border-dashed border-primary/30 rounded-lg hover:border-primary hover:bg-primary/5 transition-all duration-200",children:[e.jsx(Ie,{className:"h-6 w-6 text-primary"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-medium text-xs",children:a("admin.uploadImage")}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["1:1 ",a("admin.recommended","Êé®Ëçê")]})]})]}),e.jsx(u,{id:"ghost-cover-image-upload",type:"file",accept:"image/*",className:"hidden",onChange:ls})]})]})]})]})}),P==="ghost"&&e.jsx(M,{className:"border-primary/20 bg-gradient-to-br from-background to-muted/20",children:e.jsxs(V,{className:"p-6",children:[e.jsxs(r,{className:"text-base font-semibold flex items-center gap-2 mb-4",children:[e.jsx(ps,{className:"w-5 h-5 text-primary"}),a("admin.chefProfile","Â§ßÂé®Ê°£Ê°à")]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsx(r,{className:"text-sm font-medium",children:a("admin.chefName","Â§ßÂé®ÂêçÁß∞")}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsxs(r,{className:"text-xs text-muted-foreground mb-1 block",children:["üá®üá≥ ",a("admin.chinese")]}),e.jsx(u,{value:He,onChange:s=>Ge(s.target.value),placeholder:a("admin.chefNamePlaceholder","ËæìÂÖ•Â§ßÂé®ÂêçÁß∞")})]}),e.jsxs("div",{children:[e.jsxs(r,{className:"text-xs text-muted-foreground mb-1 block",children:["üá¨üáß ",a("admin.english")]}),e.jsx(u,{value:Ke,onChange:s=>Qe(s.target.value),placeholder:"Chef name"})]}),e.jsxs("div",{children:[e.jsxs(r,{className:"text-xs text-muted-foreground mb-1 block",children:["üáµüáπ ",a("admin.portuguese")]}),e.jsx(u,{value:We,onChange:s=>Xe(s.target.value),placeholder:"Nome do chef"})]})]})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"text-sm font-medium",children:a("admin.ownerAvatar")})}),e.jsxs("div",{className:"flex items-center gap-4",children:[Q&&e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:Q,alt:"Owner Avatar Preview",className:"w-20 h-20 object-cover rounded-full shadow-lg ring-2 ring-primary/20 transition-transform duration-200 group-hover:scale-105"}),e.jsx(A,{type:"button",variant:"destructive",size:"icon",className:"absolute -top-2 -right-2 h-6 w-6 shadow-lg opacity-0 group-hover:opacity-100 transition-opacity rounded-full",onClick:()=>{_(null),ee(null)},children:e.jsx(O,{className:"h-3 w-3"})})]}),e.jsxs(r,{htmlFor:"owner-avatar-upload",className:"cursor-pointer",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2 px-6 py-4 border-2 border-dashed border-primary/30 rounded-lg hover:border-primary hover:bg-primary/5 transition-all duration-200",children:[e.jsx(ps,{className:"h-6 w-6 text-primary"}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"font-medium text-xs",children:a("admin.uploadImage")})})]}),e.jsx(u,{id:"owner-avatar-upload",type:"file",accept:"image/*",className:"hidden",onChange:Cs})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(r,{className:"text-sm font-medium",children:a("admin.ownerBio")}),e.jsxs(ze,{defaultValue:"zh",className:"w-full",children:[e.jsxs(Re,{className:"grid w-full grid-cols-3 mb-4",children:[e.jsxs(Z,{value:"zh",className:"gap-2 text-xs",children:["üá®üá≥ ",a("admin.chinese")]}),e.jsxs(Z,{value:"en",className:"gap-2 text-xs",children:["üá¨üáß ",a("admin.english")]}),e.jsxs(Z,{value:"pt",className:"gap-2 text-xs",children:["üáµüáπ ",a("admin.portuguese")]})]}),e.jsx(Y,{value:"zh",children:e.jsx(oe,{value:Ue,onChange:s=>Me(s.target.value),rows:4,placeholder:a("admin.ownerBioPlaceholder")})}),e.jsx(Y,{value:"en",children:e.jsx(oe,{value:Ve,onChange:s=>Be(s.target.value),rows:4,placeholder:"Share your story, philosophy and culinary passion..."})}),e.jsx(Y,{value:"pt",children:e.jsx(oe,{value:Le,onChange:s=>Oe(s.target.value),rows:4,placeholder:"Compartilhe sua hist√≥ria, filosofia e paix√£o culin√°ria..."})})]})]})]})}),P!=="ghost"&&e.jsx(M,{className:"border-primary/20",children:e.jsxs(V,{className:"p-6 space-y-4",children:[e.jsxs(r,{className:"text-base font-semibold flex items-center gap-2",children:[e.jsx(fe,{className:"w-5 h-5 text-primary"}),a("admin.location")]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"lat",className:"text-sm font-medium",children:a("admin.latitude")}),e.jsx(u,{id:"lat",type:"number",step:"any",...B("lat",{valueAsNumber:!0})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"lng",className:"text-sm font-medium",children:a("admin.longitude")}),e.jsx(u,{id:"lng",type:"number",step:"any",...B("lng",{valueAsNumber:!0})})]})]}),e.jsx("div",{ref:he,className:"h-96 w-full rounded-lg border-2 border-primary/20 shadow-sm",style:{minHeight:"384px"}}),e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[e.jsx(fe,{className:"w-4 h-4"}),a("admin.clickOrDragToSetLocation")]})]})}),P!=="ghost"&&e.jsx(M,{className:"border-primary/20 overflow-hidden",children:e.jsxs(V,{className:"p-3 md:p-6 space-y-4",children:[e.jsxs(r,{className:"text-base font-semibold flex items-center gap-2",children:[e.jsx(Ys,{className:"w-5 h-5 text-primary"}),a("admin.openingHours")]}),e.jsx("div",{className:"space-y-2",children:Te.map(s=>e.jsxs("div",{className:"space-y-2 p-2 md:p-3 rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"md:hidden space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r,{className:"capitalize font-semibold text-sm",children:a(`admin.day.${s}`)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ce,{id:`split-mobile-${s}`,checked:l[s].splitShift,onCheckedChange:n=>F({...l,[s]:{...l[s],splitShift:n}}),disabled:l[s].closed,className:"h-4 w-4"}),e.jsx(r,{htmlFor:`split-mobile-${s}`,className:"cursor-pointer text-xs",children:"ÂàÜÊÆµ"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ce,{id:`closed-mobile-${s}`,checked:l[s].closed,onCheckedChange:n=>F({...l,[s]:{...l[s],closed:n}}),className:"h-4 w-4"}),e.jsx(r,{htmlFor:`closed-mobile-${s}`,className:"cursor-pointer text-xs",children:a("admin.closed")})]})]})]}),!l[s].closed&&e.jsx("div",{className:"space-y-1.5",children:l[s].splitShift?e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"grid grid-cols-[32px_1fr_12px_1fr] gap-1 items-center",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"ÂçàÈ§ê"}),e.jsx(u,{type:"time",value:l[s].open,onChange:n=>F({...l,[s]:{...l[s],open:n.target.value}}),className:"h-8 text-xs px-2 min-w-0"}),e.jsx("span",{className:"text-muted-foreground text-xs text-center",children:"-"}),e.jsx(u,{type:"time",value:l[s].close,onChange:n=>F({...l,[s]:{...l[s],close:n.target.value}}),className:"h-8 text-xs px-2 min-w-0"})]}),e.jsxs("div",{className:"grid grid-cols-[32px_1fr_12px_1fr] gap-1 items-center",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"ÊôöÈ§ê"}),e.jsx(u,{type:"time",value:l[s].open2||"19:00",onChange:n=>F({...l,[s]:{...l[s],open2:n.target.value}}),className:"h-8 text-xs px-2 min-w-0"}),e.jsx("span",{className:"text-muted-foreground text-xs text-center",children:"-"}),e.jsx(u,{type:"time",value:l[s].close2||"23:00",onChange:n=>F({...l,[s]:{...l[s],close2:n.target.value}}),className:"h-8 text-xs px-2 min-w-0"})]})]}):e.jsxs("div",{className:"grid grid-cols-[1fr_12px_1fr] gap-1 items-center",children:[e.jsx(u,{type:"time",value:l[s].open,onChange:n=>F({...l,[s]:{...l[s],open:n.target.value}}),className:"h-8 text-xs px-2 min-w-0"}),e.jsx("span",{className:"text-muted-foreground text-xs text-center",children:"-"}),e.jsx(u,{type:"time",value:l[s].close,onChange:n=>F({...l,[s]:{...l[s],close:n.target.value}}),className:"h-8 text-xs px-2 min-w-0"})]})})]}),e.jsxs("div",{className:"hidden md:block",children:[e.jsxs("div",{className:"grid grid-cols-[120px_1fr_auto] gap-4 items-center",children:[e.jsx(r,{className:"capitalize font-semibold",children:a(`admin.day.${s}`)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{id:`split-${s}`,checked:l[s].splitShift,onCheckedChange:n=>F({...l,[s]:{...l[s],splitShift:n}}),disabled:l[s].closed}),e.jsx(r,{htmlFor:`split-${s}`,className:"cursor-pointer text-sm",children:"ÂàÜÊÆµËê•‰∏ö"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ce,{id:`closed-${s}`,checked:l[s].closed,onCheckedChange:n=>F({...l,[s]:{...l[s],closed:n}})}),e.jsx(r,{htmlFor:`closed-${s}`,className:"cursor-pointer",children:a("admin.closed")})]})]}),!l[s].closed&&e.jsx("div",{className:"ml-[120px] space-y-2 mt-2",children:l[s].splitShift?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground w-12",children:"ÂçàÈ§ê"}),e.jsx(u,{type:"time",value:l[s].open,onChange:n=>F({...l,[s]:{...l[s],open:n.target.value}}),className:"w-32"}),e.jsx("span",{className:"text-muted-foreground",children:"-"}),e.jsx(u,{type:"time",value:l[s].close,onChange:n=>F({...l,[s]:{...l[s],close:n.target.value}}),className:"w-32"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground w-12",children:"ÊôöÈ§ê"}),e.jsx(u,{type:"time",value:l[s].open2||"19:00",onChange:n=>F({...l,[s]:{...l[s],open2:n.target.value}}),className:"w-32"}),e.jsx("span",{className:"text-muted-foreground",children:"-"}),e.jsx(u,{type:"time",value:l[s].close2||"23:00",onChange:n=>F({...l,[s]:{...l[s],close2:n.target.value}}),className:"w-32"})]})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{type:"time",value:l[s].open,onChange:n=>F({...l,[s]:{...l[s],open:n.target.value}}),className:"w-32"}),e.jsx("span",{className:"text-muted-foreground",children:"-"}),e.jsx(u,{type:"time",value:l[s].close,onChange:n=>F({...l,[s]:{...l[s],close:n.target.value}}),className:"w-32"})]})})]})]},s))})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-2 px-6 py-4 border-t bg-muted/30",children:[e.jsx(A,{type:"button",variant:"outline",onClick:()=>N(!1),children:a("common.cancel")}),e.jsxs(A,{type:"submit",disabled:Ze,onClick:is(os),className:"gap-2",children:[e.jsx(ke,{className:"w-4 h-4"}),a(Ze?"common.saving":"common.save")]})]})]})]})}export{Gt as R,Ct as u};
//# sourceMappingURL=RestaurantFormDialog-Dhcvja7b.js.map
