import{p as be,aN as ye,q as _e,r as c,j as e,aL as h,bz as we,bu as Ce,b3 as Se,aW as ke,bj as ee,bQ as se,aJ as Pe,y as S,M as Ie}from"./vendor-react-Hsdnn-sD.js";import{a as Ae,l as Ee,C as x,v as g,M as j,$ as p,w as f,W as i,B as r,I as d,a8 as k,s as ae}from"./index-Bv780GYB.js";import{S as te}from"./slider-A7l5g-ND.js";import{S as v}from"./switch-FG7Z0541.js";import"./vendor-i18n-jtdHZIRR.js";import"./vendor-editor-B1vH4T8i.js";import"./vendor-utils-Z4kpnli5.js";import"./vendor-supabase-BVdpxhZP.js";const Je=()=>{const{t:a}=be(),N=ye(),ne=_e(),{settings:n,isLoading:P,updateSettings:t,uploadLogo:I}=Ae(),[A,E]=c.useState(!1),[T,M]=c.useState(!1),D=c.useRef(null),L=c.useRef(null),b=c.useRef(null),y=c.useRef(null),[m,_]=c.useState(35),[u,w]=c.useState(35),[F,R]=c.useState(""),[U,H]=c.useState(""),[J,V]=c.useState(""),[W,q]=c.useState(""),[B,z]=c.useState(""),[O,Z]=c.useState(""),[Q,$]=c.useState(""),[K,G]=c.useState(""),[X,Y]=c.useState("");c.useEffect(()=>{n&&(_(n.logo_width||35),w(n.logo_height||35),R(n.join_contact_phone||"968815050"),H(n.join_success_title_zh||"信息已提交成功！"),V(n.join_success_title_en||"Request Submitted!"),q(n.join_success_title_pt||"Informação Enviada com Sucesso!"),z(n.join_success_message_zh||"感谢您的信任！我们的专属顾问将在24小时工作日内通过电话与您联系。"),Z(n.join_success_message_en||"Thank you for your trust! Our dedicated consultant will contact you by phone within 24 business hours."),$(n.join_success_message_pt||"Obrigado pela sua confiança! Nosso consultor dedicado entrará em contato por telefone dentro de 24 horas úteis."),G(n.contact_phone||""),Y(n.contact_email||""))},[n]),c.useEffect(()=>{N.hash==="#join-us"&&b.current?setTimeout(()=>{b.current?.scrollIntoView({behavior:"smooth",block:"start"})},100):N.hash==="#contact-info"&&y.current&&setTimeout(()=>{y.current?.scrollIntoView({behavior:"smooth",block:"start"})},100)},[N.hash,P]);const ie=async s=>{const l=s.target.files?.[0];if(l){E(!0);try{const o=await I(l);o&&await t.mutateAsync({logo_url:o})}finally{E(!1)}}},ce=async s=>{const l=s.target.files?.[0];if(l){M(!0);try{const o=await I(l);o&&await t.mutateAsync({favicon_url:o})}finally{M(!1)}}},le=s=>{_(s[0])},oe=s=>{w(s[0])},de=async s=>{await t.mutateAsync({logo_width:s[0]})},re=async s=>{await t.mutateAsync({logo_height:s[0]})},me=s=>{const l=parseInt(s.target.value)||20,o=Math.min(Math.max(l,20),100);_(o)},ue=async()=>{await t.mutateAsync({logo_width:m})},he=s=>{const l=parseInt(s.target.value)||20,o=Math.min(Math.max(l,20),100);w(o)},xe=async()=>{await t.mutateAsync({logo_height:u})},ge=async()=>{await t.mutateAsync({logo_url:null})},je=async()=>{await t.mutateAsync({favicon_url:null})},pe=async()=>{await t.mutateAsync({join_contact_phone:F,join_success_title_zh:U,join_success_title_en:J,join_success_title_pt:W,join_success_message_zh:B,join_success_message_en:O,join_success_message_pt:Q})},fe=async()=>{await t.mutateAsync({contact_phone:K,contact_email:X})};if(P)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(h,{className:"h-8 w-8 animate-spin text-primary"})});const ve=n?.logo_url||Ee,C=n?.community_enabled!==!1,Ne=async()=>{const s=!C;await t.mutateAsync({community_enabled:s});const{data:l}=await ae.from("navigation_buttons").select("id").eq("link","/community").single();l&&(await ae.from("navigation_buttons").update({enabled:s}).eq("id",l.id),ne.invalidateQueries({queryKey:["navigation-buttons"]}))};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:a("admin.siteSettings")}),e.jsx("p",{className:"text-muted-foreground",children:a("admin.siteSettingsDescription")})]}),e.jsxs(x,{children:[e.jsxs(g,{children:[e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(we,{className:"h-5 w-5"}),a("admin.featureToggles","功能开关")]}),e.jsx(p,{children:a("admin.featureTogglesDescription","控制网站功能的显示与隐藏")})]}),e.jsxs(f,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted/30 rounded-lg",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(i,{htmlFor:"community-enabled",className:"text-base font-medium",children:a("admin.communityEnabled","社区功能")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:C?a("admin.communityEnabledDesc","社区入口在导航栏中显示"):a("admin.communityDisabledDesc","社区入口已隐藏")}),e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1 mt-1",children:[e.jsx(Ce,{className:"h-3 w-3"}),a("admin.communitySyncHint","此设置与导航按钮中的社区按钮同步")]})]}),e.jsx(v,{id:"community-enabled",checked:C,onCheckedChange:Ne,disabled:t.isPending})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted/30 rounded-lg",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Se,{className:"h-4 w-4 text-primary"}),e.jsx(i,{htmlFor:"about-us-mobile",className:"text-base font-medium",children:a("admin.mobileAboutUsButton","移动端关于我们按钮")})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:n?.about_us_button_mobile!==!1?a("admin.mobileAboutUsEnabledDesc","在移动端首页右上角显示"):a("admin.mobileAboutUsDisabledDesc","移动端首页不显示此按钮")})]}),e.jsx(v,{id:"about-us-mobile",checked:n?.about_us_button_mobile!==!1,onCheckedChange:s=>t.mutateAsync({about_us_button_mobile:s}),disabled:t.isPending})]}),e.jsxs("div",{className:"p-4 bg-muted/30 rounded-lg space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"h-4 w-4"}),e.jsx(i,{className:"text-base font-medium",children:a("admin.voiceInputSettings","语音输入")})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a("admin.voiceInputSettingsDesc","控制AI助手语音输入按钮在不同设备上的显示")}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2 p-3 bg-background rounded-lg border",children:[e.jsx(i,{htmlFor:"voice-mobile",className:"text-sm font-medium",children:a("admin.mobile","手机")}),e.jsx(v,{id:"voice-mobile",checked:n?.voice_input_mobile!==!1,onCheckedChange:s=>t.mutateAsync({voice_input_mobile:s}),disabled:t.isPending})]}),e.jsxs("div",{className:"flex flex-col items-center gap-2 p-3 bg-background rounded-lg border",children:[e.jsx(i,{htmlFor:"voice-tablet",className:"text-sm font-medium",children:a("admin.tablet","平板")}),e.jsx(v,{id:"voice-tablet",checked:n?.voice_input_tablet!==!1,onCheckedChange:s=>t.mutateAsync({voice_input_tablet:s}),disabled:t.isPending})]}),e.jsxs("div",{className:"flex flex-col items-center gap-2 p-3 bg-background rounded-lg border",children:[e.jsx(i,{htmlFor:"voice-desktop",className:"text-sm font-medium",children:a("admin.desktop","桌面")}),e.jsx(v,{id:"voice-desktop",checked:n?.voice_input_desktop!==!1,onCheckedChange:s=>t.mutateAsync({voice_input_desktop:s}),disabled:t.isPending})]})]})]})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(x,{children:[e.jsxs(g,{children:[e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-5 w-5"}),a("admin.logoSettings")]}),e.jsx(p,{children:a("admin.logoSettingsDescription")})]}),e.jsxs(f,{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col items-center gap-4 p-6 border rounded-lg bg-muted/50",children:[e.jsx(i,{className:"text-sm text-muted-foreground",children:a("admin.logoPreview")}),e.jsx("div",{className:"bg-background p-4 rounded-lg shadow-sm border",children:e.jsx("img",{src:ve,alt:"Logo Preview",style:{width:`${m}px`,height:`${u}px`},className:"object-contain"})}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[m,"px × ",u,"px"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:a("admin.uploadLogo")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{ref:D,type:"file",accept:"image/*",onChange:ie,className:"hidden"}),e.jsxs(r,{variant:"outline",onClick:()=>D.current?.click(),disabled:A,className:"flex-1",children:[A?e.jsx(h,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(se,{className:"h-4 w-4 mr-2"}),a("admin.selectImage")]}),n?.logo_url&&e.jsx(r,{variant:"destructive",onClick:ge,disabled:t.isPending,children:a("common.remove")})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(i,{children:a("admin.logoWidth")}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(d,{type:"number",value:m,onChange:me,onBlur:ue,min:20,max:100,className:"w-16 h-8 text-center text-sm"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"px"})]})]}),e.jsx(te,{value:[m],onValueChange:le,onValueCommit:de,min:20,max:100,step:1})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(i,{children:a("admin.logoHeight")}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(d,{type:"number",value:u,onChange:he,onBlur:xe,min:20,max:100,className:"w-16 h-8 text-center text-sm"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"px"})]})]}),e.jsx(te,{value:[u],onValueChange:oe,onValueCommit:re,min:20,max:100,step:1})]})]})]}),e.jsxs(x,{children:[e.jsxs(g,{children:[e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-5 w-5"}),a("admin.faviconSettings")]}),e.jsx(p,{children:a("admin.faviconSettingsDescription")})]}),e.jsxs(f,{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col items-center gap-4 p-6 border rounded-lg bg-muted/50",children:[e.jsx(i,{className:"text-sm text-muted-foreground",children:a("admin.faviconPreview")}),e.jsx("div",{className:"bg-background p-4 rounded-lg shadow-sm border",children:e.jsx("img",{src:n?.favicon_url||"/favicon.png",alt:"Favicon Preview",className:"w-8 h-8 object-contain"})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"32px × 32px"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:a("admin.uploadFavicon")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{ref:L,type:"file",accept:"image/*",onChange:ce,className:"hidden"}),e.jsxs(r,{variant:"outline",onClick:()=>L.current?.click(),disabled:T,className:"flex-1",children:[T?e.jsx(h,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(se,{className:"h-4 w-4 mr-2"}),a("admin.selectImage")]}),n?.favicon_url&&e.jsx(r,{variant:"destructive",onClick:je,disabled:t.isPending,children:a("common.remove")})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a("admin.faviconHint")})]})]})]})]}),e.jsxs(x,{ref:b,id:"join-us",children:[e.jsxs(g,{children:[e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"h-5 w-5"}),a("admin.joinUsSettings")]}),e.jsx(p,{children:a("admin.joinUsSettingsDescription")})]}),e.jsxs(f,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(i,{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-4 w-4"}),a("admin.joinContactPhone")]}),e.jsx(d,{value:F,onChange:s=>R(s.target.value),placeholder:"968815050"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(i,{children:a("admin.joinSuccessTitle")}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-xs text-muted-foreground",children:"中文"}),e.jsx(d,{value:U,onChange:s=>H(s.target.value),placeholder:"信息已提交成功！"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-xs text-muted-foreground",children:"English"}),e.jsx(d,{value:J,onChange:s=>V(s.target.value),placeholder:"Request Submitted!"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-xs text-muted-foreground",children:"Português"}),e.jsx(d,{value:W,onChange:s=>q(s.target.value),placeholder:"Informação Enviada com Sucesso!"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(i,{children:a("admin.joinSuccessMessage")}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-1",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-xs text-muted-foreground",children:"中文"}),e.jsx(k,{value:B,onChange:s=>z(s.target.value),placeholder:"感谢您的信任！我们的专属顾问将在24小时工作日内通过电话与您联系。",rows:2})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-xs text-muted-foreground",children:"English"}),e.jsx(k,{value:O,onChange:s=>Z(s.target.value),placeholder:"Thank you for your trust! Our dedicated consultant will contact you by phone within 24 business hours.",rows:2})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-xs text-muted-foreground",children:"Português"}),e.jsx(k,{value:Q,onChange:s=>$(s.target.value),placeholder:"Obrigado pela sua confiança! Nosso consultor dedicado entrará em contato por telefone dentro de 24 horas úteis.",rows:2})]})]})]}),e.jsxs(r,{onClick:pe,disabled:t.isPending,className:"w-full md:w-auto",children:[t.isPending&&e.jsx(h,{className:"h-4 w-4 mr-2 animate-spin"}),a("common.save")]})]})]}),e.jsxs(x,{ref:y,id:"contact-info",children:[e.jsxs(g,{children:[e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-5 w-5"}),a("admin.contactSettings")]}),e.jsx(p,{children:a("admin.contactSettingsDescription")})]}),e.jsxs(f,{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(i,{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-4 w-4"}),a("admin.contactPhone")]}),e.jsx(d,{value:K,onChange:s=>G(s.target.value),placeholder:"+351 968 815 050"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(i,{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"h-4 w-4"}),a("admin.contactEmail")]}),e.jsx(d,{type:"email",value:X,onChange:s=>Y(s.target.value),placeholder:"comercial@xiaoxiong.pt"})]})]}),e.jsxs(r,{onClick:fe,disabled:t.isPending,className:"w-full md:w-auto",children:[t.isPending&&e.jsx(h,{className:"h-4 w-4 mr-2 animate-spin"}),a("common.save")]})]})]})]})})};export{Je as default};
//# sourceMappingURL=AdminSiteSettings-BxotuhMF.js.map
