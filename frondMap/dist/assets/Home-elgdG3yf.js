import{c as me,u as te,a as he,r,j as e,D as xe,b as pe,d as fe,e as be,S as ge,f as N,U as ye,L as Z,I as ve,B as L,g as je,h as W,C as we,i as se,H as Ne,M as ke,k as _e}from"./index-Ga7ov3Y-.js";import{m as Se}from"./map-icon-DR07RZr_.js";import{u as Ce}from"./useHomepageTemplates-C6jm3hIt.js";import{u as Ie,i as ze,a as De,b as ae}from"./externalLinks-CrRTrZnN.js";import{B as J}from"./bot-CjUvwkIB.js";import{S as Oe}from"./shopping-bag-yjq8OaP2.js";import{C as Te}from"./calendar-check-fJddhYuy.js";import{A as Be}from"./arrow-right-CEgo0_y6.js";import{M as $e}from"./message-circle-cq1k2oQr.js";import{S as Q}from"./search-H5ksmTfE.js";import{S as Re}from"./star-BIoECmdX.js";import{D as Me}from"./download-Cb1r-YTn.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=me("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),G="/assets/sushi-ramen-hero-kMMmiTPz.jpg",oe="/assets/sushi-ramen-mobile-BHV96LaL.jpg",Pe="/assets/google-play-badge-BAXiFmDF.png",Ve="https://tzdgqhwyzsxkxnncgzap.supabase.co",ee="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR6ZGdxaHd5enN4a3hubmNnemFwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM2NTg2ODgsImV4cCI6MjA3OTIzNDY4OH0.D76C4OkjQVWyMxtjjdOofpD8X_hEEoTtrXHqi4XSYUw",Ae=({open:t,onOpenChange:p})=>{const{i18n:a}=te(),m=he(),[f,k]=r.useState(""),[_,C]=r.useState([]),[u,T]=r.useState(!1),[g,M]=r.useState(null),i=r.useRef(null),P=r.useRef(null),z=r.useRef(null);r.useEffect(()=>{var o;t&&!g&&((o=navigator.geolocation)==null||o.getCurrentPosition(b=>{M({lat:b.coords.latitude,lng:b.coords.longitude})},b=>{console.log("Unable to get user location:",b.message)},{enableHighAccuracy:!1,timeout:5e3,maximumAge:3e5}))},[t,g]),r.useEffect(()=>{var o;(o=z.current)==null||o.scrollIntoView({behavior:"smooth"})},[_]);const B=async()=>{if(!f.trim()||u)return;const o={id:Date.now().toString(),role:"user",content:f.trim()},b=(Date.now()+1).toString(),n={id:b,role:"assistant",content:"",isStreaming:!0};C(s=>[...s,o,n]),k(""),T(!0),i.current&&i.current.abort(),i.current=new AbortController;try{const s=await fetch(`${Ve}/functions/v1/ask-xiaoxiong`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ee}`,apikey:ee},body:JSON.stringify({text:o.content,stream:!0,lat:g==null?void 0:g.lat,lng:g==null?void 0:g.lng}),signal:i.current.signal});if(!s.ok)throw new Error(`Request failed with status: ${s.status}`);if(!s.body)throw new Error("No response body");const d=s.body.getReader(),S=new TextDecoder;let j="";for(;;){const{done:R,value:D}=await d.read();if(R)break;const l=S.decode(D,{stream:!0});j+=l;let c=j;c.startsWith('"')&&(c=c.slice(1)),c.endsWith('"')&&(c=c.slice(0,-1)),c=c.replace(/\\n/g,`
`),C(I=>I.map(w=>w.id===b?{...w,content:c}:w))}let x=j;x.startsWith('"')&&(x=x.slice(1)),x.endsWith('"')&&(x=x.slice(0,-1)),x=x.replace(/\\n/g,`
`),C(R=>R.map(D=>D.id===b?{...D,content:x,isStreaming:!1}:D))}catch(s){if(s instanceof Error&&s.name==="AbortError"){console.log("Request aborted");return}console.error("Ask API error:",s);const d=a.language==="zh"?"抱歉，暂时无法获取结果，请稍后再试":a.language==="pt"?"Desculpe, não foi possível obter resultados. Tente novamente mais tarde.":"Sorry, unable to get results. Please try again later.";C(S=>S.map(j=>j.id===b?{...j,content:d,isStreaming:!1}:j))}finally{T(!1)}},O=o=>{o.key==="Enter"&&!o.shiftKey&&(o.preventDefault(),B())},h=()=>{i.current&&i.current.abort(),p(!1)},y=o=>{h(),m(o)},v=o=>{const b=/\[([^\]]+)\]\(([^)]+)\)/g,n=[];let s=0,d,S=0;for(;(d=b.exec(o))!==null;){d.index>s&&n.push(e.jsx("span",{children:o.slice(s,d.index)},S++));const j=d[1],x=d[2];x.startsWith("/")?n.push(e.jsx("button",{onClick:()=>y(x),className:"text-primary hover:underline font-medium cursor-pointer",children:j},S++)):n.push(e.jsx("a",{href:x,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline font-medium",children:j},S++)),s=d.index+d[0].length}return s<o.length&&n.push(e.jsx("span",{children:o.slice(s)},S++)),n.length>0?n:[e.jsx("span",{children:o},"0")]},$=o=>{const b=o.split(`
`),n=[];return b.forEach((s,d)=>{if(s.startsWith("### "))n.push(e.jsx("h3",{className:"text-base font-semibold mt-3 mb-1",children:v(s.slice(4))},d));else if(s.startsWith("## "))n.push(e.jsx("h2",{className:"text-lg font-bold mt-4 mb-2",children:v(s.slice(3))},d));else if(s.startsWith("# "))n.push(e.jsx("h1",{className:"text-xl font-bold mt-4 mb-2",children:v(s.slice(2))},d));else if(s.includes("**")){const S=s.split(/\*\*(.*?)\*\*/g);n.push(e.jsx("p",{className:"mb-1 leading-relaxed",children:S.map((j,x)=>x%2===1?e.jsx("strong",{className:"font-semibold",children:v(j)},x):v(j))},d))}else s.startsWith("- ")||s.startsWith("* ")?n.push(e.jsx("li",{className:"ml-4 mb-0.5 list-disc",children:v(s.slice(2))},d)):/^\d+\.\s/.test(s)?n.push(e.jsx("li",{className:"ml-4 mb-0.5 list-decimal",children:v(s.replace(/^\d+\.\s/,""))},d)):s.match(/^[-*_]{3,}$/)?n.push(e.jsx("hr",{className:"my-3 border-border"},d)):s.trim()===""?n.push(e.jsx("div",{className:"h-1"},d)):n.push(e.jsx("p",{className:"mb-1 leading-relaxed",children:v(s)},d))}),n},E=()=>a.language==="zh"?"和小熊聊聊":a.language==="pt"?"Converse com Xiaoxiong":"Chat with Xiaoxiong",H=()=>a.language==="zh"?"输入你想吃的...":a.language==="pt"?"Digite o que quer comer...":"Type what you want to eat...",F=()=>a.language==="zh"?"你好！我是小熊，告诉我你想吃什么，我来帮你推荐餐厅！":a.language==="pt"?"Olá! Eu sou o Xiaoxiong, me diga o que você quer comer e eu vou te ajudar a encontrar restaurantes!":"Hi! I'm Xiaoxiong, tell me what you want to eat and I'll help you find restaurants!";return e.jsx(xe,{open:t,onOpenChange:h,children:e.jsxs(pe,{className:"sm:max-w-lg h-[85vh] sm:h-[70vh] flex flex-col p-0 gap-0 overflow-hidden",children:[e.jsx(fe,{className:"px-4 py-3 border-b shrink-0 bg-primary/5",children:e.jsxs(be,{className:"flex items-center gap-2 text-base",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(J,{className:"h-4 w-4 text-primary"})}),E()]})}),e.jsx(ge,{className:"flex-1 h-0",ref:P,children:e.jsxs("div",{className:"p-4 space-y-4",children:[_.length===0&&e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center shrink-0",children:e.jsx(J,{className:"h-4 w-4 text-primary"})}),e.jsx("div",{className:"flex-1 bg-muted/50 rounded-2xl rounded-tl-sm px-4 py-3 text-sm",children:F()})]}),_.map(o=>e.jsxs("div",{className:N("flex gap-3",o.role==="user"&&"flex-row-reverse"),children:[e.jsx("div",{className:N("w-8 h-8 rounded-full flex items-center justify-center shrink-0",o.role==="user"?"bg-primary text-primary-foreground":"bg-primary/10"),children:o.role==="user"?e.jsx(ye,{className:"h-4 w-4"}):e.jsx(J,{className:"h-4 w-4 text-primary"})}),e.jsx("div",{className:N("flex-1 max-w-[85%] rounded-2xl px-4 py-3 text-sm",o.role==="user"?"bg-primary text-primary-foreground rounded-tr-sm":"bg-muted/50 rounded-tl-sm"),children:o.role==="assistant"?e.jsxs(e.Fragment,{children:[o.content?e.jsx("div",{className:"prose-sm",children:$(o.content)}):e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(Z,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{children:a.language==="zh"?"思考中...":a.language==="pt"?"Pensando...":"Thinking..."})]}),o.isStreaming&&o.content&&e.jsx("span",{className:"inline-block w-1.5 h-4 bg-primary/50 animate-pulse ml-0.5 align-middle"})]}):o.content})]},o.id)),e.jsx("div",{ref:z})]})}),e.jsx("div",{className:"p-3 border-t bg-background shrink-0",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ve,{value:f,onChange:o=>k(o.target.value),onKeyDown:O,placeholder:H(),disabled:u,className:"flex-1 rounded-full bg-muted/50 border-0 focus-visible:ring-1",autoFocus:!0}),e.jsx(L,{onClick:B,disabled:!f.trim()||u,size:"icon",className:"shrink-0 rounded-full",children:u?e.jsx(Z,{className:"h-4 w-4 animate-spin"}):e.jsx(je,{className:"h-4 w-4"})})]})})]})})},re=r.memo(({stats:t,t:p})=>e.jsx("div",{className:"absolute top-3 sm:top-4 left-3 z-20",children:e.jsxs("div",{className:"gap-4 w-fit flex-col flex items-start justify-start",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"text-sm text-white/90 drop-shadow-md",children:p("home.stats.delivery")}),e.jsx("span",{className:"font-bold text-white text-sm drop-shadow-md",children:t.order_count})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Te,{className:"w-4 h-4 text-accent"}),e.jsx("span",{className:"text-sm text-white/90 drop-shadow-md",children:p("home.stats.reservation")}),e.jsx("span",{className:"font-bold text-white text-sm drop-shadow-md",children:t.reserve_count})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xl sm:text-2xl font-bold text-white drop-shadow-md",children:p("home.hero.brandName")}),e.jsx("img",{src:Se,alt:"map icon",className:"w-5 sm:w-8 h-5 sm:h-8 object-contain flex-shrink-0"})]})]})}));re.displayName="StatsDisplay";const A=r.memo(({to:t,Icon:p,title:a,desc:m,iconBg:f,iconColor:k,hoverBorderColor:_})=>e.jsx(W,{to:t,children:e.jsxs(we,{className:`group p-6 sm:p-8 border-border/50 ${_} transition-all hover:shadow-large cursor-pointer h-full`,children:[e.jsx("div",{className:`w-14 sm:w-16 h-14 sm:h-16 rounded-2xl ${f} flex items-center justify-center mb-4 sm:mb-6 group-hover:scale-110 transition-transform`,children:e.jsx(p,{className:`w-7 sm:w-8 h-7 sm:h-8 ${k}`})}),e.jsx("h3",{className:"text-xl sm:text-2xl font-semibold mb-2 sm:mb-3 text-card-foreground",children:a}),e.jsxs("p",{className:"text-sm sm:text-base text-muted-foreground leading-relaxed flex items-center gap-2",children:[m,e.jsx(Be,{className:"w-4 h-4 flex-shrink-0 group-hover:translate-x-1 transition-transform"})]})]})}));A.displayName="FeatureCard";const Le=()=>{var u;const t=window.innerWidth<640,p=window.innerWidth>=1024,a=navigator.connection,m=window.Capacitor,f=ze(),k=De(),_=ae(),C=navigator.userAgent;return console.log("[LightweightMode] Detection:",{isCapacitorApp:f,isInWebView:k,isIOSDevice:_,hasCapacitor:!!m,capacitorDetails:m?{isNativePlatform:m.isNativePlatform,isNative:m.isNative,platform:(u=m.getPlatform)==null?void 0:u.call(m)}:null,userAgent:C.substring(0,150),hasSafari:/Safari\//.test(C),hasVersion:/Version\/[\d.]+/.test(C),isStandalone:window.navigator.standalone===!0}),p?!!(a!=null&&a.saveData):k&&!f?(console.log("[LightweightMode] WebView detected (not Capacitor), using lightweight mode"),!0):a&&(a.saveData||a.effectiveType==="2g"||a.effectiveType==="slow-2g")||t&&navigator.deviceMemory&&navigator.deviceMemory<2?!0:(console.log("[LightweightMode] Normal mode, videos enabled for",_?"iOS":"non-iOS","device"),!1)},le=r.memo(({template:t,isActive:p,currentLang:a,t:m,onContentReady:f,onAskXiaoxiong:k})=>{const[_,C]=r.useState({}),[u,T]=r.useState({}),[g,M]=r.useState({}),[i,P]=r.useState({mobile:!0,tablet:!0,desktop:!0}),[z,B]=r.useState(!1),O=Le(),h=r.useRef(null),y=r.useRef(null),v=r.useRef(null),$=l=>t[`${l}${a==="zh"?"_zh":a==="pt"?"_pt":"_en"}`]||"",E=()=>window.innerWidth<640?"mobile":window.innerWidth<1024?"tablet":"desktop",H=()=>{const l=E();return l==="mobile"&&t.mobile_overlay_opacity!==null?t.mobile_overlay_opacity:l==="tablet"&&t.tablet_overlay_opacity!==null?t.tablet_overlay_opacity:l==="desktop"&&t.desktop_overlay_opacity!==null?t.desktop_overlay_opacity:t.overlay_opacity??30},F=()=>{const l=H(),c=t.overlay_gradient_direction||"to-b",I=(V,ue)=>V==null?ue/100:V>1?V/100:V,w=l>1?l/100:l,Y=I(t.overlay_gradient_from_opacity,30)*w,X=I(t.overlay_gradient_via_opacity,25)*w,U=I(t.overlay_gradient_to_opacity,40)*w,ie={"to-t":"to top","to-b":"to bottom","to-l":"to left","to-r":"to right","to-tl":"to top left","to-tr":"to top right","to-bl":"to bottom left","to-br":"to bottom right"}[c]||"to bottom",q={black:"0, 0, 0",white:"255, 255, 255",background:"0, 0, 0",foreground:"255, 255, 255",primary:"1, 100, 80",secondary:"240, 240, 240"},ne=q[t.overlay_gradient_from||"black"]||"0, 0, 0",ce=q[t.overlay_gradient_via||"black"]||"0, 0, 0",de=q[t.overlay_gradient_to||"black"]||"0, 0, 0";return{background:`linear-gradient(${ie}, rgba(${ne}, ${Y}), rgba(${ce}, ${X}), rgba(${de}, ${U}))`}},o=t.mobile_image_url||oe,b=t.tablet_image_url||t.desktop_image_url||G,n=t.desktop_image_url||G,s=t.background_blur||0,d=t.media_type==="video"&&!O,S=O?null:t.mobile_video_url,j=O?null:t.tablet_video_url||t.desktop_video_url,x=O?null:t.desktop_video_url;r.useEffect(()=>{const l=E(),c=l==="mobile"?o:l==="tablet"?b:n;if(c){const I=new Image;I.onload=()=>{C(w=>({...w,[l]:!0})),P(w=>({...w,[l]:!0})),p&&(f==null||f(),setTimeout(()=>B(!0),100))},I.src=c}},[o,b,n,p,f]),r.useEffect(()=>{p&&_[E()]&&B(!0)},[p,_]);const R=l=>{T(c=>({...c,[l]:!0}))},D=(l,c)=>{console.error(`[HeroSlide] Video error on ${l}:`,c),M(I=>({...I,[l]:!0}))};return r.useEffect(()=>{if(!z||!p||!ae())return;const c=E(),w=(c==="mobile"?h:c==="tablet"?y:v).current;if(!w)return;const X=setTimeout(async()=>{try{w.muted=!0,w.playsInline=!0,w.setAttribute("webkit-playsinline","true"),await w.play(),console.log(`[HeroSlide] iOS video play successful on ${c}`)}catch(U){console.error(`[HeroSlide] iOS video play failed on ${c}:`,U),M(K=>({...K,[c]:!0}))}},150);return()=>clearTimeout(X)},[z,p]),e.jsxs("div",{className:N("absolute inset-0 w-full h-full transition-opacity duration-1000",p?"opacity-100 z-10":"opacity-0 z-0"),children:[e.jsxs("div",{className:"absolute inset-0 w-full h-full",children:[d?e.jsxs(e.Fragment,{children:[S&&e.jsxs("div",{className:"absolute inset-0 w-full h-full sm:hidden",children:[!i.mobile&&e.jsx("div",{className:"absolute inset-0 w-full h-full bg-muted animate-pulse z-20"}),e.jsx("img",{src:o,alt:"Background",className:N("absolute inset-0 w-full h-full object-cover object-center z-10 transition-opacity duration-500",u.mobile&&!g.mobile?"opacity-0 pointer-events-none":"opacity-100"),style:{filter:s>0?`blur(${s}px)`:void 0}}),z&&!g.mobile&&e.jsx("video",{ref:h,src:S,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,"webkit-playsinline":"true",preload:"auto",onCanPlay:()=>R("mobile"),onError:l=>D("mobile",l),className:"absolute inset-0 w-full h-full object-cover object-center",style:{filter:s>0?`blur(${s}px)`:void 0}})]}),!S&&e.jsxs("div",{className:"absolute inset-0 w-full h-full sm:hidden",children:[!i.mobile&&e.jsx("div",{className:"absolute inset-0 w-full h-full bg-muted animate-pulse z-20"}),e.jsx("img",{src:o,alt:"Background",className:N("absolute inset-0 w-full h-full object-cover object-center transition-opacity duration-500",i.mobile?"opacity-100":"opacity-0"),style:{filter:s>0?`blur(${s}px)`:void 0}})]}),j&&e.jsxs("div",{className:"absolute inset-0 w-full h-full hidden sm:block lg:hidden",children:[!i.tablet&&e.jsx("div",{className:"absolute inset-0 w-full h-full bg-muted animate-pulse z-20"}),e.jsx("img",{src:b,alt:"Background",className:N("absolute inset-0 w-full h-full object-cover object-center z-10 transition-opacity duration-500",u.tablet&&!g.tablet?"opacity-0 pointer-events-none":"opacity-100"),style:{filter:s>0?`blur(${s}px)`:void 0}}),z&&!g.tablet&&e.jsx("video",{ref:y,src:j,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,"webkit-playsinline":"true",preload:"auto",onCanPlay:()=>R("tablet"),onError:l=>D("tablet",l),className:"absolute inset-0 w-full h-full object-cover object-center",style:{filter:s>0?`blur(${s}px)`:void 0}})]}),!j&&e.jsxs("div",{className:"absolute inset-0 w-full h-full hidden sm:block lg:hidden",children:[!i.tablet&&e.jsx("div",{className:"absolute inset-0 w-full h-full bg-muted animate-pulse z-20"}),e.jsx("img",{src:b,alt:"Background",className:N("absolute inset-0 w-full h-full object-cover object-center transition-opacity duration-500",i.tablet?"opacity-100":"opacity-0"),style:{filter:s>0?`blur(${s}px)`:void 0}})]}),x&&e.jsxs("div",{className:"absolute inset-0 w-full h-full hidden lg:block",children:[!i.desktop&&e.jsx("div",{className:"absolute inset-0 w-full h-full bg-muted animate-pulse z-20"}),e.jsx("img",{src:n,alt:"Background",className:N("absolute inset-0 w-full h-full object-cover object-center z-10 transition-opacity duration-500",u.desktop&&!g.desktop?"opacity-0 pointer-events-none":"opacity-100"),style:{filter:s>0?`blur(${s}px)`:void 0}}),z&&!g.desktop&&e.jsx("video",{ref:v,src:x,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,"webkit-playsinline":"true",preload:"auto",onCanPlay:()=>R("desktop"),onError:l=>D("desktop",l),className:"absolute inset-0 w-full h-full object-cover object-center",style:{filter:s>0?`blur(${s}px)`:void 0}})]}),!x&&e.jsxs("div",{className:"absolute inset-0 w-full h-full hidden lg:block",children:[!i.desktop&&e.jsx("div",{className:"absolute inset-0 w-full h-full bg-muted animate-pulse z-20"}),e.jsx("img",{src:n,alt:"Background",className:N("absolute inset-0 w-full h-full object-cover object-center transition-opacity duration-500",i.desktop?"opacity-100":"opacity-0"),style:{filter:s>0?`blur(${s}px)`:void 0}})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"absolute inset-0 w-full h-full sm:hidden",children:[!i.mobile&&e.jsx("div",{className:"absolute inset-0 w-full h-full bg-muted animate-pulse z-20"}),e.jsx("img",{src:o,alt:"Background",className:N("absolute inset-0 w-full h-full object-cover object-center transition-opacity duration-500",i.mobile?"opacity-100":"opacity-0"),style:{filter:s>0?`blur(${s}px)`:void 0}})]}),e.jsxs("div",{className:"absolute inset-0 w-full h-full hidden sm:block lg:hidden",children:[!i.tablet&&e.jsx("div",{className:"absolute inset-0 w-full h-full bg-muted animate-pulse z-20"}),e.jsx("img",{src:b,alt:"Background",className:N("absolute inset-0 w-full h-full object-cover object-center transition-opacity duration-500",i.tablet?"opacity-100":"opacity-0"),style:{filter:s>0?`blur(${s}px)`:void 0}})]}),e.jsxs("div",{className:"absolute inset-0 w-full h-full hidden lg:block",children:[!i.desktop&&e.jsx("div",{className:"absolute inset-0 w-full h-full bg-muted animate-pulse z-20"}),e.jsx("img",{src:n,alt:"Background",className:N("absolute inset-0 w-full h-full object-cover object-center transition-opacity duration-500",i.desktop?"opacity-100":"opacity-0"),style:{filter:s>0?`blur(${s}px)`:void 0}})]})]}),e.jsx("div",{className:"absolute inset-0 w-full h-full",style:F()})]}),e.jsx("div",{className:"relative z-10 container mx-auto px-4 sm:px-6 flex items-center min-h-screen",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center space-y-4 sm:space-y-8 animate-fade-in w-full",children:[t.subtitle_button_text_zh&&e.jsx("div",{className:"flex justify-center",children:e.jsxs("button",{onClick:k,className:"group flex items-center gap-3 bg-white/95 backdrop-blur-sm text-muted-foreground px-4 sm:px-6 py-3 sm:py-4 rounded-full shadow-lg hover:shadow-2xl hover:bg-white transition-all duration-300 cursor-text border border-border/20",children:[e.jsx($e,{className:"w-5 h-5 text-primary/70 group-hover:text-primary transition-colors"}),e.jsx("span",{className:"text-sm sm:text-base text-muted-foreground/80 group-hover:text-muted-foreground transition-colors",children:$("subtitle_button_text")||m("home.hero.subtitle")}),e.jsx(Q,{className:"w-4 h-4 text-muted-foreground/50 ml-2"})]})}),e.jsx("h1",{className:"text-3xl sm:text-5xl md:text-7xl font-bold text-white leading-tight px-4 drop-shadow-[0_2px_8px_rgba(0,0,0,0.8)]",children:$("title")||m("home.hero.title")}),e.jsx("p",{className:"text-sm sm:text-xl md:text-2xl text-white/95 max-w-2xl mx-auto px-4 drop-shadow-[0_2px_6px_rgba(0,0,0,0.7)]",children:$("description")||m("home.hero.description")}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center pt-2 sm:pt-4 px-4",children:[e.jsx(L,{size:"lg",asChild:!0,className:"text-base sm:text-lg shadow-lg hover:shadow-2xl hover:scale-105 transition-all w-full sm:w-auto",children:e.jsxs(W,{to:t.primary_button_link||"/restaurants",children:[e.jsx(Q,{className:"mr-2 w-4 sm:w-5 h-4 sm:h-5"}),$("primary_button_text")||m("home.hero.exploreBtn")]})}),e.jsx(L,{size:"lg",variant:"outline",asChild:!0,className:"text-base sm:text-lg w-full sm:w-auto backdrop-blur-sm hover:border-transparent hover:scale-105 transition-all",children:e.jsxs(W,{to:t.secondary_button_link||"/activities",children:[e.jsx(se,{className:"mr-2 w-4 sm:w-5 h-4 sm:h-5"}),$("secondary_button_text")||m("home.hero.activitiesBtn")]})})]})]})})]})});le.displayName="HeroSlide";const et=()=>{const{t,i18n:p}=te(),{data:a,isLoading:m}=Ce(),[f,k]=r.useState(0),[_,C]=r.useState(null),u=r.useRef(null),[T,g]=r.useState(!1),[M,i]=r.useState(!1),P=r.useCallback(()=>{g(!0)},[]);Ie({pageType:"home"}),r.useEffect(()=>{(async()=>{try{const v=await(await fetch("https://v.xiaoxiong.pt/api/get_info")).json();v&&C({order_count:v.order_count||0,reserve_count:v.reserve_count||0})}catch(y){console.error("Failed to fetch stats:",y)}})()},[]),r.useEffect(()=>{if(!a||a.length<=1)return;const h=a[f],y=(h==null?void 0:h.duration)||5e3;return u.current=setTimeout(()=>{k(v=>(v+1)%a.length)},y),()=>{u.current&&clearTimeout(u.current)}},[a,f]);const z=r.useCallback(h=>{u.current&&clearTimeout(u.current),k(h)},[]);r.useCallback(()=>{a&&(u.current&&clearTimeout(u.current),k(h=>(h-1+a.length)%a.length))},[a]),r.useCallback(()=>{a&&(u.current&&clearTimeout(u.current),k(h=>(h+1)%a.length))},[a]);const B=p.language,O=a&&a.length>1;return e.jsxs("div",{className:"min-h-screen",children:[e.jsxs("section",{className:"relative min-h-screen flex items-start overflow-hidden bg-background",children:[_&&e.jsx(re,{stats:_,t}),e.jsx("div",{className:N("absolute inset-0 w-full h-full transition-opacity duration-500",T?"opacity-100":"opacity-0"),children:a==null?void 0:a.map((h,y)=>e.jsx(le,{template:h,isActive:y===f,currentLang:B,t,onContentReady:y===0?P:void 0,onAskXiaoxiong:()=>i(!0)},h.id))}),e.jsx("div",{className:N("absolute inset-0 w-full h-full z-20 transition-opacity duration-500",m||!T?"opacity-100":"opacity-0 pointer-events-none"),children:e.jsx(Ne,{})}),!m&&(!a||a.length===0)&&e.jsxs("div",{className:"absolute inset-0 w-full h-full",children:[e.jsx("img",{src:oe,alt:"Background",className:"absolute inset-0 w-full h-full object-cover object-center sm:hidden"}),e.jsx("img",{src:G,alt:"Background",className:"absolute inset-0 w-full h-full object-cover object-center hidden sm:block"}),e.jsx("div",{className:"absolute inset-0 w-full h-full bg-gradient-to-b from-black/30 via-black/25 to-black/40"}),e.jsx("div",{className:"relative z-10 container mx-auto px-4 sm:px-6 flex items-center min-h-screen",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center space-y-4 sm:space-y-8 animate-fade-in w-full",children:[e.jsx("h1",{className:"text-3xl sm:text-5xl md:text-7xl font-bold text-white leading-tight px-4 drop-shadow-[0_2px_8px_rgba(0,0,0,0.8)]",children:t("home.hero.title")}),e.jsx("p",{className:"text-sm sm:text-xl md:text-2xl text-white/95 max-w-2xl mx-auto px-4 drop-shadow-[0_2px_6px_rgba(0,0,0,0.7)]",children:t("home.hero.description")})]})})]}),O&&e.jsx("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 z-30 flex gap-2",children:a.map((h,y)=>e.jsx("button",{onClick:()=>z(y),className:N("w-3 h-3 rounded-full transition-all duration-300",y===f?"bg-white w-8":"bg-white/50 hover:bg-white/70"),"aria-label":`Go to slide ${y+1}`},y))})]}),e.jsx("section",{className:"py-16 sm:py-24 px-4 bg-secondary/20",children:e.jsxs("div",{className:"container mx-auto max-w-6xl",children:[e.jsxs("div",{className:"text-center mb-12 sm:mb-16",children:[e.jsx("h2",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-foreground mb-3 sm:mb-4",children:t("home.features.title")}),e.jsx("p",{className:"text-base sm:text-lg text-muted-foreground max-w-2xl mx-auto px-4",children:t("home.features.description")})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 sm:gap-8",children:[e.jsx(A,{to:"/map",Icon:ke,title:t("home.features.map.title"),desc:t("home.features.map.desc"),iconBg:"bg-gradient-to-br from-primary to-primary-light",iconColor:"text-primary-foreground",hoverBorderColor:"hover:border-primary/50"}),e.jsx(A,{to:"/restaurants",Icon:Re,title:t("home.features.reviews.title"),desc:t("home.features.reviews.desc"),iconBg:"bg-gradient-to-br from-accent to-warning",iconColor:"text-accent-foreground",hoverBorderColor:"hover:border-accent/50"}),e.jsx("div",{className:"sm:col-span-2 md:col-span-1",children:e.jsx(A,{to:"/activities",Icon:se,title:t("home.features.events.title"),desc:t("home.features.events.desc"),iconBg:"bg-gradient-to-br from-success to-accent",iconColor:"text-white",hoverBorderColor:"hover:border-success/50"})})]})]})}),e.jsxs("section",{className:"py-16 sm:py-24 px-4 bg-gradient-to-br from-primary/5 via-background to-primary/10 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-1/4 w-72 h-72 bg-primary/10 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 right-1/4 w-96 h-96 bg-primary/5 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute top-1/2 left-0 w-32 h-32 bg-primary/20 rounded-full blur-2xl -translate-y-1/2"}),e.jsx("div",{className:"absolute top-1/2 right-0 w-32 h-32 bg-primary/20 rounded-full blur-2xl -translate-y-1/2"}),e.jsx("div",{className:"container mx-auto max-w-5xl relative z-10",children:e.jsx("div",{className:"flex flex-col items-center justify-center gap-8",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 bg-primary/10 text-primary text-sm font-medium px-4 py-2 rounded-full mb-4",children:[e.jsx(Ee,{className:"w-4 h-4"}),e.jsx("span",{children:"Mobile App"})]}),e.jsx("h3",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-foreground mb-4",children:t("home.app.title")}),e.jsx("p",{className:"text-base sm:text-lg text-muted-foreground mb-8 leading-relaxed",children:t("home.app.description")}),e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsxs("a",{href:"https://play.google.com/store/apps/details?id=com.xiaoxiong.market",target:"_blank",rel:"noopener noreferrer",className:"relative group",children:[e.jsx("div",{className:"absolute -inset-2 bg-gradient-to-r from-primary via-primary-glow to-primary rounded-2xl blur-lg opacity-40 group-hover:opacity-70 transition-opacity"}),e.jsx("div",{className:"relative bg-black hover:bg-gray-900 px-6 py-3 rounded-xl transition-all hover:scale-105 shadow-2xl hover:shadow-primary/30 border border-white/10",children:e.jsx("img",{src:Pe,alt:"Get it on Google Play",className:"h-12 sm:h-14"})})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(Me,{className:"w-4 h-4 animate-bounce"}),e.jsx("span",{children:t("home.app.downloadNow")})]})]})]})})})]}),e.jsxs("section",{className:"py-16 sm:py-20 px-4 bg-gradient-to-br from-primary via-primary-glow to-primary-light relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-grid-pattern opacity-10"}),e.jsx("div",{className:"absolute top-0 right-0 w-64 sm:w-96 h-64 sm:h-96 bg-white/5 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-64 sm:w-96 h-64 sm:h-96 bg-white/5 rounded-full blur-3xl"}),e.jsxs("div",{className:"container mx-auto max-w-4xl text-center relative z-10",children:[e.jsx("h2",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-primary-foreground mb-4 sm:mb-6 px-4",children:t("home.cta.title")}),e.jsx("p",{className:"text-base sm:text-xl text-primary-foreground/90 mb-6 sm:mb-8 max-w-2xl mx-auto px-4",children:t("home.cta.description")}),e.jsx("div",{className:"flex justify-center",children:e.jsx(L,{size:"lg",variant:"secondary",asChild:!0,className:"text-base sm:text-lg shadow-xl hover:shadow-2xl",children:e.jsxs(W,{to:"/join-us",children:[e.jsx(_e,{className:"mr-2 w-4 sm:w-5 h-4 sm:h-5"}),t("home.cta.button")]})})})]})]}),e.jsx(Ae,{open:M,onOpenChange:i})]})};export{et as default};
