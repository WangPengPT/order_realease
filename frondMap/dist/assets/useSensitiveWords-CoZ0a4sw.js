import{a as u,u as a,b as d}from"./vendor-query-BS0wY7WL.js";import{m as c,s as n}from"./index-CEqKPgls.js";const l=()=>u({queryKey:["sensitive-words"],queryFn:async()=>{const{data:e,error:s}=await n.from("sensitive_words").select("*").order("created_at",{ascending:!1});if(s)throw s;return e},staleTime:6e4}),y=()=>{const{data:e}=l();return{checkContent:t=>{if(!e||e.length===0)return{hasSensitive:!1,matchedWords:[]};const r=t.toLowerCase(),i=[];for(const o of e)r.includes(o.word.toLowerCase())&&i.push(o.word);return{hasSensitive:i.length>0,matchedWords:i}},isLoading:!e}},f=()=>{const{toast:e}=c(),s=a();return d({mutationFn:async t=>{const{data:r,error:i}=await n.from("sensitive_words").insert({word:t.trim().toLowerCase()}).select().single();if(i)throw i;return r},onSuccess:()=>{s.invalidateQueries({queryKey:["sensitive-words"]}),e({title:"Success",description:"Sensitive word added successfully"})},onError:t=>{e({title:"Error",description:t.message?.includes("duplicate")?"This word already exists":"Failed to add sensitive word",variant:"destructive"})}})},m=()=>{const{toast:e}=c(),s=a();return d({mutationFn:async({id:t,word:r})=>{const{data:i,error:o}=await n.from("sensitive_words").update({word:r.trim().toLowerCase()}).eq("id",t).select().single();if(o)throw o;return i},onSuccess:()=>{s.invalidateQueries({queryKey:["sensitive-words"]}),e({title:"Success",description:"Sensitive word updated successfully"})},onError:()=>{e({title:"Error",description:"Failed to update sensitive word",variant:"destructive"})}})},p=()=>{const{toast:e}=c(),s=a();return d({mutationFn:async t=>{const{error:r}=await n.from("sensitive_words").delete().eq("id",t);if(r)throw r},onSuccess:()=>{s.invalidateQueries({queryKey:["sensitive-words"]}),e({title:"Success",description:"Sensitive word deleted successfully"})},onError:()=>{e({title:"Error",description:"Failed to delete sensitive word",variant:"destructive"})}})};export{f as a,m as b,p as c,y as d,l as u};
//# sourceMappingURL=useSensitiveWords-CoZ0a4sw.js.map
